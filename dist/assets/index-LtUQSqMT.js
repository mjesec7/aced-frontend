const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MyCourses-CytMuQw6.js","assets/MyCourses-CcTdkXpz.css","assets/LessonPage-BuabhTMS.js","assets/LessonPage-BIyD9pvu.css","assets/TopicFinished-DGhcAim0.js","assets/TopicFinished-CzyDKW_t.css","assets/TopicOverview-BdD0VZux.js","assets/TopicOverview-B1f-3OPf.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function us(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Qe={},ro=[],ls=()=>{},sa=()=>!1,ki=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),lh=t=>t.startsWith("onUpdate:"),Xe=Object.assign,ch=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},u4=Object.prototype.hasOwnProperty,ot=(t,e)=>u4.call(t,e),ke=Array.isArray,no=t=>Co(t)==="[object Map]",Ii=t=>Co(t)==="[object Set]",zp=t=>Co(t)==="[object Date]",Yw=t=>Co(t)==="[object RegExp]",Le=t=>typeof t=="function",Fe=t=>typeof t=="string",js=t=>typeof t=="symbol",dt=t=>t!==null&&typeof t=="object",uh=t=>(dt(t)||Le(t))&&Le(t.then)&&Le(t.catch),pg=Object.prototype.toString,Co=t=>pg.call(t),Qw=t=>Co(t).slice(8,-1),Cc=t=>Co(t)==="[object Object]",dh=t=>Fe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Tn=us(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xw=us("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),hh=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},d4=/-(\w)/g,At=hh(t=>t.replace(d4,(e,s)=>s?s.toUpperCase():"")),h4=/\B([A-Z])/g,xs=hh(t=>t.replace(h4,"-$1").toLowerCase()),Ci=hh(t=>t.charAt(0).toUpperCase()+t.slice(1)),io=hh(t=>t?`on${Ci(t)}`:""),Is=(t,e)=>!Object.is(t,e),oo=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},mg=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},Hl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},zl=t=>{const e=Fe(t)?Number(t):NaN;return isNaN(e)?t:e};let H0;const Ac=()=>H0||(H0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),f4=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function p4(t){return f4.test(t)?`__props.${t}`:`__props[${JSON.stringify(t)}]`}function m4(t,e){return t+JSON.stringify(e,(s,r)=>typeof r=="function"?r.toString():r)}const g4={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},y4={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},v4={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},_4={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},b4={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},w4="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",gg=us(w4),S4=gg,z0=2;function Jw(t,e=0,s=t.length){if(e=Math.max(0,Math.min(e,t.length)),s=Math.max(0,Math.min(s,t.length)),e>s)return"";let r=t.split(/(\r?\n)/);const n=r.filter((l,c)=>c%2===1);r=r.filter((l,c)=>c%2===0);let i=0;const o=[];for(let l=0;l<r.length;l++)if(i+=r[l].length+(n[l]&&n[l].length||0),i>=e){for(let c=l-z0;c<=l+z0||s>i;c++){if(c<0||c>=r.length)continue;const u=c+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${r[c]}`);const h=r[c].length,f=n[c]&&n[c].length||0;if(c===l){const m=e-(i-(h+f)),g=Math.max(1,s>i?h-m:s-e);o.push("   |  "+" ".repeat(m)+"^".repeat(g))}else if(c>l){if(s>i){const m=Math.max(Math.min(s-i,h),1);o.push("   |  "+"^".repeat(m))}i+=h+f}}break}return o.join(`
`)}function ct(t){if(ke(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=Fe(r)?yg(r):ct(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(Fe(t)||dt(t))return t}const E4=/;(?![^(]*\))/g,T4=/:([^]+)/,k4=/\/\*[^]*?\*\//g;function yg(t){const e={};return t.replace(k4,"").split(E4).forEach(s=>{if(s){const r=s.split(T4);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function I4(t){if(!t)return"";if(Fe(t))return t;let e="";for(const s in t){const r=t[s];if(Fe(r)||typeof r=="number"){const n=s.startsWith("--")?s:xs(s);e+=`${n}:${r};`}}return e}function ye(t){let e="";if(Fe(t))e=t;else if(ke(t))for(let s=0;s<t.length;s++){const r=ye(t[s]);r&&(e+=r+" ")}else if(dt(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}function Zw(t){if(!t)return null;let{class:e,style:s}=t;return e&&!Fe(e)&&(t.class=ye(e)),s&&(t.style=ct(s)),t}const C4="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",A4="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",P4="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",x4="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",e2=us(C4),t2=us(A4),s2=us(P4),r2=us(x4),n2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",i2=us(n2),L4=us(n2+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function vg(t){return!!t||t===""}const R4=/[>/="'\u0009\u000a\u000c\u0020]/,ep={};function N4(t){if(ep.hasOwnProperty(t))return ep[t];const e=R4.test(t);return e&&console.error(`unsafe attribute name: ${t}`),ep[t]=!e}const O4={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},D4=us("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),M4=us("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),$4=us("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function U4(t){if(t==null)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"}const F4=/["'&<>]/;function V4(t){const e=""+t,s=F4.exec(e);if(!s)return e;let r="",n,i,o=0;for(i=s.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==i&&(r+=e.slice(o,i)),o=i+1,r+=n}return o!==i?r+e.slice(o,i):r}const q4=/^-?>|<!--|-->|--!>|<!-$/g;function B4(t){return t.replace(q4,"")}const o2=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function j4(t,e){return t.replace(o2,s=>e?s==='"'?'\\\\\\"':`\\\\${s}`:`\\${s}`)}function H4(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=xn(t[r],e[r]);return s}function xn(t,e){if(t===e)return!0;let s=zp(t),r=zp(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=js(t),r=js(e),s||r)return t===e;if(s=ke(t),r=ke(e),s||r)return s&&r?H4(t,e):!1;if(s=dt(t),r=dt(e),s||r){if(!s||!r)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!xn(t[o],e[o]))return!1}}return String(t)===String(e)}function Pc(t,e){return t.findIndex(s=>xn(s,e))}const a2=t=>!!(t&&t.__v_isRef===!0),p=t=>Fe(t)?t:t==null?"":ke(t)||dt(t)&&(t.toString===pg||!Le(t.toString))?a2(t)?p(t.value):JSON.stringify(t,l2,2):String(t),l2=(t,e)=>a2(e)?l2(t,e.value):no(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[tp(r,i)+" =>"]=n,s),{})}:Ii(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>tp(s))}:js(e)?tp(e):dt(e)&&!ke(e)&&!Cc(e)?String(e):e,tp=(t,e="")=>{var s;return js(t)?`Symbol(${(s=t.description)!=null?s:e})`:t},z4=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:ro,EMPTY_OBJ:Qe,NO:sa,NOOP:ls,PatchFlagNames:y4,PatchFlags:g4,ShapeFlags:v4,SlotFlags:_4,camelize:At,capitalize:Ci,cssVarNameEscapeSymbolsRE:o2,def:mg,escapeHtml:V4,escapeHtmlComment:B4,extend:Xe,genCacheKey:m4,genPropsAccessExp:p4,generateCodeFrame:Jw,getEscapedCssVarName:j4,getGlobalThis:Ac,hasChanged:Is,hasOwn:ot,hyphenate:xs,includeBooleanAttr:vg,invokeArrayFns:oo,isArray:ke,isBooleanAttr:L4,isBuiltInDirective:Xw,isDate:zp,isFunction:Le,isGloballyAllowed:gg,isGloballyWhitelisted:S4,isHTMLTag:e2,isIntegerKey:dh,isKnownHtmlAttr:D4,isKnownMathMLAttr:$4,isKnownSvgAttr:M4,isMap:no,isMathMLTag:s2,isModelListener:lh,isObject:dt,isOn:ki,isPlainObject:Cc,isPromise:uh,isRegExp:Yw,isRenderableAttrValue:U4,isReservedProp:Tn,isSSRSafeAttrName:N4,isSVGTag:t2,isSet:Ii,isSpecialBooleanAttr:i2,isString:Fe,isSymbol:js,isVoidTag:r2,looseEqual:xn,looseIndexOf:Pc,looseToNumber:Hl,makeMap:us,normalizeClass:ye,normalizeProps:Zw,normalizeStyle:ct,objectToString:pg,parseStringStyle:yg,propsToAttrMap:O4,remove:ch,slotFlagsText:b4,stringifyStyle:I4,toDisplayString:p,toHandlerKey:io,toNumber:zl,toRawType:Qw,toTypeString:Co},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fs;class _g{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fs,!e&&Fs&&(this.index=(Fs.scopes||(Fs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Fs;try{return Fs=this,e()}finally{Fs=s}}}on(){Fs=this}off(){Fs=this.parent}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function bg(t){return new _g(t)}function c2(){return Fs}function W4(t,e=!1){Fs&&Fs.cleanups.push(t)}let It;const sp=new WeakSet;class Wl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fs&&Fs.active&&Fs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sp.has(this)&&(sp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||d2(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,W0(this),h2(this);const e=It,s=xr;It=this,xr=!0;try{return this.fn()}finally{f2(this),It=e,xr=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Eg(e);this.deps=this.depsTail=void 0,W0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wp(this)&&this.run()}get dirty(){return Wp(this)}}let u2=0,Pl,xl;function d2(t,e=!1){if(t.flags|=8,e){t.next=xl,xl=t;return}t.next=Pl,Pl=t}function wg(){u2++}function Sg(){if(--u2>0)return;if(xl){let e=xl;for(xl=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Pl;){let e=Pl;for(Pl=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function h2(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function f2(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),Eg(r),G4(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function Wp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(p2(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function p2(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Gl))return;t.globalVersion=Gl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Wp(t)){t.flags&=-3;return}const s=It,r=xr;It=t,xr=!0;try{h2(t);const n=t.fn(t._value);(e.version===0||Is(n,t._value))&&(t._value=n,e.version++)}catch(n){throw e.version++,n}finally{It=s,xr=r,f2(t),t.flags&=-3}}function Eg(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)Eg(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function G4(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}function K4(t,e){t.effect instanceof Wl&&(t=t.effect.fn);const s=new Wl(t);e&&Xe(s,e);try{s.run()}catch(n){throw s.stop(),n}const r=s.run.bind(s);return r.effect=s,r}function Y4(t){t.effect.stop()}let xr=!0;const m2=[];function Ai(){m2.push(xr),xr=!1}function Pi(){const t=m2.pop();xr=t===void 0?!0:t}function W0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=It;It=void 0;try{e()}finally{It=s}}}let Gl=0;class Q4{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!It||!xr||It===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==It)s=this.activeLink=new Q4(It,this),It.deps?(s.prevDep=It.depsTail,It.depsTail.nextDep=s,It.depsTail=s):It.deps=It.depsTail=s,g2(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=It.depsTail,s.nextDep=void 0,It.depsTail.nextDep=s,It.depsTail=s,It.deps===s&&(It.deps=r)}return s}trigger(e){this.version++,Gl++,this.notify(e)}notify(e){wg();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Sg()}}}function g2(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)g2(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const dd=new WeakMap,ao=Symbol(""),Gp=Symbol(""),Kl=Symbol("");function Cs(t,e,s){if(xr&&It){let r=dd.get(t);r||dd.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new fh),n.map=r,n.key=s),n.track()}}function gn(t,e,s,r,n,i){const o=dd.get(t);if(!o){Gl++;return}const l=c=>{c&&c.trigger()};if(wg(),e==="clear")o.forEach(l);else{const c=ke(t),u=c&&dh(s);if(c&&s==="length"){const h=Number(r);o.forEach((f,m)=>{(m==="length"||m===Kl||!js(m)&&m>=h)&&l(f)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),u&&l(o.get(Kl)),e){case"add":c?u&&l(o.get("length")):(l(o.get(ao)),no(t)&&l(o.get(Gp)));break;case"delete":c||(l(o.get(ao)),no(t)&&l(o.get(Gp)));break;case"set":no(t)&&l(o.get(ao));break}}Sg()}function X4(t,e){const s=dd.get(t);return s&&s.get(e)}function jo(t){const e=nt(t);return e===t?e:(Cs(e,"iterate",Kl),lr(t)?e:e.map(As))}function ph(t){return Cs(t=nt(t),"iterate",Kl),t}const J4={__proto__:null,[Symbol.iterator](){return rp(this,Symbol.iterator,As)},concat(...t){return jo(this).concat(...t.map(e=>ke(e)?jo(e):e))},entries(){return rp(this,"entries",t=>(t[1]=As(t[1]),t))},every(t,e){return cn(this,"every",t,e,void 0,arguments)},filter(t,e){return cn(this,"filter",t,e,s=>s.map(As),arguments)},find(t,e){return cn(this,"find",t,e,As,arguments)},findIndex(t,e){return cn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return cn(this,"findLast",t,e,As,arguments)},findLastIndex(t,e){return cn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return cn(this,"forEach",t,e,void 0,arguments)},includes(...t){return np(this,"includes",t)},indexOf(...t){return np(this,"indexOf",t)},join(t){return jo(this).join(t)},lastIndexOf(...t){return np(this,"lastIndexOf",t)},map(t,e){return cn(this,"map",t,e,void 0,arguments)},pop(){return ll(this,"pop")},push(...t){return ll(this,"push",t)},reduce(t,...e){return G0(this,"reduce",t,e)},reduceRight(t,...e){return G0(this,"reduceRight",t,e)},shift(){return ll(this,"shift")},some(t,e){return cn(this,"some",t,e,void 0,arguments)},splice(...t){return ll(this,"splice",t)},toReversed(){return jo(this).toReversed()},toSorted(t){return jo(this).toSorted(t)},toSpliced(...t){return jo(this).toSpliced(...t)},unshift(...t){return ll(this,"unshift",t)},values(){return rp(this,"values",As)}};function rp(t,e,s){const r=ph(t),n=r[e]();return r!==t&&!lr(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const Z4=Array.prototype;function cn(t,e,s,r,n,i){const o=ph(t),l=o!==t&&!lr(t),c=o[e];if(c!==Z4[e]){const f=c.apply(t,i);return l?As(f):f}let u=s;o!==t&&(l?u=function(f,m){return s.call(this,As(f),m,t)}:s.length>2&&(u=function(f,m){return s.call(this,f,m,t)}));const h=c.call(o,u,r);return l&&n?n(h):h}function G0(t,e,s,r){const n=ph(t);let i=s;return n!==t&&(lr(t)?s.length>3&&(i=function(o,l,c){return s.call(this,o,l,c,t)}):i=function(o,l,c){return s.call(this,o,As(l),c,t)}),n[e](i,...r)}function np(t,e,s){const r=nt(t);Cs(r,"iterate",Kl);const n=r[e](...s);return(n===-1||n===!1)&&yh(s[0])?(s[0]=nt(s[0]),r[e](...s)):n}function ll(t,e,s=[]){Ai(),wg();const r=nt(t)[e].apply(t,s);return Sg(),Pi(),r}const eL=us("__proto__,__v_isRef,__isVue"),y2=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(js));function tL(t){js(t)||(t=String(t));const e=nt(this);return Cs(e,"has",t),e.hasOwnProperty(t)}class v2{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?T2:E2:i?S2:w2).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ke(e);if(!n){let c;if(o&&(c=J4[s]))return c;if(s==="hasOwnProperty")return tL}const l=Reflect.get(e,s,Kt(e)?e:r);return(js(s)?y2.has(s):eL(s))||(n||Cs(e,"get",s),i)?l:Kt(l)?o&&dh(s)?l:l.value:dt(l)?n?kg(l):xi(l):l}}class _2 extends v2{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];if(!this._isShallow){const c=pi(i);if(!lr(r)&&!pi(r)&&(i=nt(i),r=nt(r)),!ke(e)&&Kt(i)&&!Kt(r))return c?!1:(i.value=r,!0)}const o=ke(e)&&dh(s)?Number(s)<e.length:ot(e,s),l=Reflect.set(e,s,r,Kt(e)?e:n);return e===nt(n)&&(o?Is(r,i)&&gn(e,"set",s,r):gn(e,"add",s,r)),l}deleteProperty(e,s){const r=ot(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&gn(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!js(s)||!y2.has(s))&&Cs(e,"has",s),r}ownKeys(e){return Cs(e,"iterate",ke(e)?"length":ao),Reflect.ownKeys(e)}}class b2 extends v2{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const sL=new _2,rL=new b2,nL=new _2(!0),iL=new b2(!0),Kp=t=>t,fu=t=>Reflect.getPrototypeOf(t);function oL(t,e,s){return function(...r){const n=this.__v_raw,i=nt(n),o=no(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=n[t](...r),h=s?Kp:e?Yp:As;return!e&&Cs(i,"iterate",c?Gp:ao),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:l?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function pu(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function aL(t,e){const s={get(n){const i=this.__v_raw,o=nt(i),l=nt(n);t||(Is(n,l)&&Cs(o,"get",n),Cs(o,"get",l));const{has:c}=fu(o),u=e?Kp:t?Yp:As;if(c.call(o,n))return u(i.get(n));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&Cs(nt(n),"iterate",ao),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,o=nt(i),l=nt(n);return t||(Is(n,l)&&Cs(o,"has",n),Cs(o,"has",l)),n===l?i.has(n):i.has(n)||i.has(l)},forEach(n,i){const o=this,l=o.__v_raw,c=nt(l),u=e?Kp:t?Yp:As;return!t&&Cs(c,"iterate",ao),l.forEach((h,f)=>n.call(i,u(h),u(f),o))}};return Xe(s,t?{add:pu("add"),set:pu("set"),delete:pu("delete"),clear:pu("clear")}:{add(n){!e&&!lr(n)&&!pi(n)&&(n=nt(n));const i=nt(this);return fu(i).has.call(i,n)||(i.add(n),gn(i,"add",n,n)),this},set(n,i){!e&&!lr(i)&&!pi(i)&&(i=nt(i));const o=nt(this),{has:l,get:c}=fu(o);let u=l.call(o,n);u||(n=nt(n),u=l.call(o,n));const h=c.call(o,n);return o.set(n,i),u?Is(i,h)&&gn(o,"set",n,i):gn(o,"add",n,i),this},delete(n){const i=nt(this),{has:o,get:l}=fu(i);let c=o.call(i,n);c||(n=nt(n),c=o.call(i,n)),l&&l.call(i,n);const u=i.delete(n);return c&&gn(i,"delete",n,void 0),u},clear(){const n=nt(this),i=n.size!==0,o=n.clear();return i&&gn(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=oL(n,t,e)}),s}function mh(t,e){const s=aL(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(ot(s,n)&&n in r?s:r,n,i)}const lL={get:mh(!1,!1)},cL={get:mh(!1,!0)},uL={get:mh(!0,!1)},dL={get:mh(!0,!0)},w2=new WeakMap,S2=new WeakMap,E2=new WeakMap,T2=new WeakMap;function hL(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fL(t){return t.__v_skip||!Object.isExtensible(t)?0:hL(Qw(t))}function xi(t){return pi(t)?t:gh(t,!1,sL,lL,w2)}function Tg(t){return gh(t,!1,nL,cL,S2)}function kg(t){return gh(t,!0,rL,uL,E2)}function pL(t){return gh(t,!0,iL,dL,T2)}function gh(t,e,s,r,n){if(!dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=n.get(t);if(i)return i;const o=fL(t);if(o===0)return t;const l=new Proxy(t,o===2?r:s);return n.set(t,l),l}function ai(t){return pi(t)?ai(t.__v_raw):!!(t&&t.__v_isReactive)}function pi(t){return!!(t&&t.__v_isReadonly)}function lr(t){return!!(t&&t.__v_isShallow)}function yh(t){return t?!!t.__v_raw:!1}function nt(t){const e=t&&t.__v_raw;return e?nt(e):t}function k2(t){return!ot(t,"__v_skip")&&Object.isExtensible(t)&&mg(t,"__v_skip",!0),t}const As=t=>dt(t)?xi(t):t,Yp=t=>dt(t)?kg(t):t;function Kt(t){return t?t.__v_isRef===!0:!1}function Se(t){return I2(t,!1)}function xc(t){return I2(t,!0)}function I2(t,e){return Kt(t)?t:new mL(t,e)}class mL{constructor(e,s){this.dep=new fh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:nt(e),this._value=s?e:As(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||lr(e)||pi(e);e=r?e:nt(e),Is(e,s)&&(this._rawValue=e,this._value=r?e:As(e),this.dep.trigger())}}function gL(t){t.dep&&t.dep.trigger()}function kn(t){return Kt(t)?t.value:t}function yL(t){return Le(t)?t():kn(t)}const vL={get:(t,e,s)=>e==="__v_raw"?t:kn(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return Kt(n)&&!Kt(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function Ig(t){return ai(t)?t:new Proxy(t,vL)}class _L{constructor(e){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new fh,{get:r,set:n}=e(s.track.bind(s),s.trigger.bind(s));this._get=r,this._set=n}get value(){return this._value=this._get()}set value(e){this._set(e)}}function C2(t){return new _L(t)}function bL(t){const e=ke(t)?new Array(t.length):{};for(const s in t)e[s]=A2(t,s);return e}class wL{constructor(e,s,r){this._object=e,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return X4(nt(this._object),this._key)}}class SL{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function EL(t,e,s){return Kt(t)?t:Le(t)?new SL(t):dt(t)&&arguments.length>1?A2(t,e,s):Se(t)}function A2(t,e,s){const r=t[e];return Kt(r)?r:new wL(t,e,s)}class TL{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new fh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Gl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return d2(this,!0),!0}get value(){const e=this.dep.track();return p2(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function kL(t,e,s=!1){let r,n;return Le(t)?r=t:(r=t.get,n=t.set),new TL(r,n,s)}const IL={GET:"get",HAS:"has",ITERATE:"iterate"},CL={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},mu={},hd=new WeakMap;let Qn;function AL(){return Qn}function P2(t,e=!1,s=Qn){if(s){let r=hd.get(s);r||hd.set(s,r=[]),r.push(t)}}function PL(t,e,s=Qe){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:l,call:c}=s,u=L=>n?L:lr(L)||n===!1||n===0?yn(L,1):yn(L);let h,f,m,g,v=!1,I=!1;if(Kt(t)?(f=()=>t.value,v=lr(t)):ai(t)?(f=()=>u(t),v=!0):ke(t)?(I=!0,v=t.some(L=>ai(L)||lr(L)),f=()=>t.map(L=>{if(Kt(L))return L.value;if(ai(L))return u(L);if(Le(L))return c?c(L,2):L()})):Le(t)?e?f=c?()=>c(t,2):t:f=()=>{if(m){Ai();try{m()}finally{Pi()}}const L=Qn;Qn=h;try{return c?c(t,3,[g]):t(g)}finally{Qn=L}}:f=ls,e&&n){const L=f,$=n===!0?1/0:n;f=()=>yn(L(),$)}const C=c2(),U=()=>{h.stop(),C&&C.active&&ch(C.effects,h)};if(i&&e){const L=e;e=(...$)=>{L(...$),U()}}let D=I?new Array(t.length).fill(mu):mu;const E=L=>{if(!(!(h.flags&1)||!h.dirty&&!L))if(e){const $=h.run();if(n||v||(I?$.some((M,A)=>Is(M,D[A])):Is($,D))){m&&m();const M=Qn;Qn=h;try{const A=[$,D===mu?void 0:I&&D[0]===mu?[]:D,g];c?c(e,3,A):e(...A),D=$}finally{Qn=M}}}else h.run()};return l&&l(E),h=new Wl(f),h.scheduler=o?()=>o(E,!1):E,g=L=>P2(L,!1,h),m=h.onStop=()=>{const L=hd.get(h);if(L){if(c)c(L,4);else for(const $ of L)$();hd.delete(h)}},e?r?E(!0):D=h.run():o?o(E.bind(null,!0),!0):h.run(),U.pause=h.pause.bind(h),U.resume=h.resume.bind(h),U.stop=U,U}function yn(t,e=1/0,s){if(e<=0||!dt(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Kt(t))yn(t.value,e,s);else if(ke(t))for(let r=0;r<t.length;r++)yn(t[r],e,s);else if(Ii(t)||no(t))t.forEach(r=>{yn(r,e,s)});else if(Cc(t)){for(const r in t)yn(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&yn(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const x2=[];function xL(t){x2.push(t)}function LL(){x2.pop()}function RL(t,e){}const NL={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},OL={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Ma(t,e,s,r){try{return r?t(...r):t()}catch(n){Ao(n,e,s)}}function vr(t,e,s,r){if(Le(t)){const n=Ma(t,e,s,r);return n&&uh(n)&&n.catch(i=>{Ao(i,e,s)}),n}if(ke(t)){const n=[];for(let i=0;i<t.length;i++)n.push(vr(t[i],e,s,r));return n}}function Ao(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Qe;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const h=l.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,u)===!1)return}l=l.parent}if(i){Ai(),Ma(i,null,10,[t,c,u]),Pi();return}}DL(t,s,n,r,o)}function DL(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const Vs=[];let jr=-1;const ia=[];let Xn=null,Ko=0;const L2=Promise.resolve();let fd=null;function Po(t){const e=fd||L2;return t?e.then(this?t.bind(this):t):e}function ML(t){let e=jr+1,s=Vs.length;for(;e<s;){const r=e+s>>>1,n=Vs[r],i=Ql(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function Cg(t){if(!(t.flags&1)){const e=Ql(t),s=Vs[Vs.length-1];!s||!(t.flags&2)&&e>=Ql(s)?Vs.push(t):Vs.splice(ML(e),0,t),t.flags|=1,R2()}}function R2(){fd||(fd=L2.then(N2))}function Yl(t){ke(t)?ia.push(...t):Xn&&t.id===-1?Xn.splice(Ko+1,0,t):t.flags&1||(ia.push(t),t.flags|=1),R2()}function K0(t,e,s=jr+1){for(;s<Vs.length;s++){const r=Vs[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Vs.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function pd(t){if(ia.length){const e=[...new Set(ia)].sort((s,r)=>Ql(s)-Ql(r));if(ia.length=0,Xn){Xn.push(...e);return}for(Xn=e,Ko=0;Ko<Xn.length;Ko++){const s=Xn[Ko];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Xn=null,Ko=0}}const Ql=t=>t.id==null?t.flags&2?-1:1/0:t.id;function N2(t){try{for(jr=0;jr<Vs.length;jr++){const e=Vs[jr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ma(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;jr<Vs.length;jr++){const e=Vs[jr];e&&(e.flags&=-2)}jr=-1,Vs.length=0,pd(),fd=null,(Vs.length||ia.length)&&N2()}}let Yo,gu=[];function O2(t,e){var s,r;Yo=t,Yo?(Yo.enabled=!0,gu.forEach(({event:n,args:i})=>Yo.emit(n,...i)),gu=[]):typeof window<"u"&&window.HTMLElement&&!((r=(s=window.navigator)==null?void 0:s.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{O2(i,e)}),setTimeout(()=>{Yo||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,gu=[])},3e3)):gu=[]}let Zt=null,vh=null;function Xl(t){const e=Zt;return Zt=t,vh=t&&t.type.__scopeId||null,e}function $L(t){vh=t}function UL(){vh=null}const FL=t=>Qt;function Qt(t,e=Zt,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&rm(-1);const i=Xl(e);let o;try{o=t(...n)}finally{Xl(i),r._d&&rm(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Pe(t,e){if(Zt===null)return t;const s=Oc(Zt),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,l,c=Qe]=e[n];i&&(Le(i)&&(i={mounted:i,updated:i}),i.deep&&yn(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Hr(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(Ai(),vr(c,s,8,[t.el,l,t,e]),Pi())}}const D2=Symbol("_vte"),M2=t=>t.__isTeleport,Ll=t=>t&&(t.disabled||t.disabled===""),Y0=t=>t&&(t.defer||t.defer===""),Q0=t=>typeof SVGElement<"u"&&t instanceof SVGElement,X0=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Qp=(t,e)=>{const s=t&&t.to;return Fe(s)?e?e(s):null:s},$2={name:"Teleport",__isTeleport:!0,process(t,e,s,r,n,i,o,l,c,u){const{mc:h,pc:f,pbc:m,o:{insert:g,querySelector:v,createText:I,createComment:C}}=u,U=Ll(e.props);let{shapeFlag:D,children:E,dynamicChildren:L}=e;if(t==null){const $=e.el=I(""),M=e.anchor=I("");g($,s,r),g(M,s,r);const A=(_,P)=>{D&16&&(n&&n.isCE&&(n.ce._teleportTarget=_),h(E,_,P,n,i,o,l,c))},w=()=>{const _=e.target=Qp(e.props,v),P=U2(_,e,I,g);_&&(o!=="svg"&&Q0(_)?o="svg":o!=="mathml"&&X0(_)&&(o="mathml"),U||(A(_,P),Uu(e,!1)))};U&&(A(s,M),Uu(e,!0)),Y0(e.props)?Yt(()=>{w(),e.el.__isMounted=!0},i):w()}else{if(Y0(e.props)&&!t.el.__isMounted){Yt(()=>{$2.process(t,e,s,r,n,i,o,l,c,u),delete t.el.__isMounted},i);return}e.el=t.el,e.targetStart=t.targetStart;const $=e.anchor=t.anchor,M=e.target=t.target,A=e.targetAnchor=t.targetAnchor,w=Ll(t.props),_=w?s:M,P=w?$:A;if(o==="svg"||Q0(M)?o="svg":(o==="mathml"||X0(M))&&(o="mathml"),L?(m(t.dynamicChildren,L,_,n,i,o,l),Ug(t,e,!0)):c||f(t,e,_,P,n,i,o,l,!1),U)w?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):yu(e,s,$,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=Qp(e.props,v);R&&yu(e,R,null,u,0)}else w&&yu(e,M,A,u,1);Uu(e,U)}},remove(t,e,s,{um:r,o:{remove:n}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:f,props:m}=t;if(f&&(n(u),n(h)),i&&n(c),o&16){const g=i||!Ll(m);for(let v=0;v<l.length;v++){const I=l[v];r(I,e,s,g,!!I.dynamicChildren)}}},move:yu,hydrate:VL};function yu(t,e,s,{o:{insert:r},m:n},i=2){i===0&&r(t.targetAnchor,e,s);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=t,f=i===2;if(f&&r(o,e,s),(!f||Ll(h))&&c&16)for(let m=0;m<u.length;m++)n(u[m],e,s,2);f&&r(l,e,s)}function VL(t,e,s,r,n,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},f){const m=e.target=Qp(e.props,c);if(m){const g=Ll(e.props),v=m._lpa||m.firstChild;if(e.shapeFlag&16)if(g)e.anchor=f(o(t),e,l(t),s,r,n,i),e.targetStart=v,e.targetAnchor=v&&o(v);else{e.anchor=o(t);let I=v;for(;I;){if(I&&I.nodeType===8){if(I.data==="teleport start anchor")e.targetStart=I;else if(I.data==="teleport anchor"){e.targetAnchor=I,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}I=o(I)}e.targetAnchor||U2(m,e,h,u),f(v&&o(v),e,m,s,r,n,i)}Uu(e,g)}return e.anchor&&o(e.anchor)}const md=$2;function Uu(t,e){const s=t.ctx;if(s&&s.ut){let r,n;for(e?(r=t.el,n=t.anchor):(r=t.targetStart,n=t.targetAnchor);r&&r!==n;)r.nodeType===1&&r.setAttribute("data-v-owner",s.uid),r=r.nextSibling;s.ut()}}function U2(t,e,s,r){const n=e.targetStart=s(""),i=e.targetAnchor=s("");return n[D2]=i,t&&(r(n,t),r(i,t)),i}const Jn=Symbol("_leaveCb"),vu=Symbol("_enterCb");function Ag(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return br(()=>{t.isMounted=!0}),Rc(()=>{t.isUnmounting=!0}),t}const dr=[Function,Array],Pg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:dr,onEnter:dr,onAfterEnter:dr,onEnterCancelled:dr,onBeforeLeave:dr,onLeave:dr,onAfterLeave:dr,onLeaveCancelled:dr,onBeforeAppear:dr,onAppear:dr,onAfterAppear:dr,onAppearCancelled:dr},F2=t=>{const e=t.subTree;return e.component?F2(e.component):e},qL={name:"BaseTransition",props:Pg,setup(t,{slots:e}){const s=ys(),r=Ag();return()=>{const n=e.default&&_h(e.default(),!0);if(!n||!n.length)return;const i=V2(n),o=nt(t),{mode:l}=o;if(r.isLeaving)return ip(i);const c=J0(i);if(!c)return ip(i);let u=ha(c,o,r,s,f=>u=f);c.type!==Gt&&Ln(c,u);let h=s.subTree&&J0(s.subTree);if(h&&h.type!==Gt&&!kr(c,h)&&F2(s).type!==Gt){let f=ha(h,o,r,s);if(Ln(h,f),l==="out-in"&&c.type!==Gt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,h=void 0},ip(i);l==="in-out"&&c.type!==Gt?f.delayLeave=(m,g,v)=>{const I=B2(r,h);I[String(h.key)]=h,m[Jn]=()=>{g(),m[Jn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function V2(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Gt){e=s;break}}return e}const q2=qL;function B2(t,e){const{leavingVNodes:s}=t;let r=s.get(e.type);return r||(r=Object.create(null),s.set(e.type,r)),r}function ha(t,e,s,r,n){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:m,onLeave:g,onAfterLeave:v,onLeaveCancelled:I,onBeforeAppear:C,onAppear:U,onAfterAppear:D,onAppearCancelled:E}=e,L=String(t.key),$=B2(s,t),M=(_,P)=>{_&&vr(_,r,9,P)},A=(_,P)=>{const R=P[1];M(_,P),ke(_)?_.every(x=>x.length<=1)&&R():_.length<=1&&R()},w={mode:o,persisted:l,beforeEnter(_){let P=c;if(!s.isMounted)if(i)P=C||c;else return;_[Jn]&&_[Jn](!0);const R=$[L];R&&kr(t,R)&&R.el[Jn]&&R.el[Jn](),M(P,[_])},enter(_){let P=u,R=h,x=f;if(!s.isMounted)if(i)P=U||u,R=D||h,x=E||f;else return;let N=!1;const ue=_[vu]=de=>{N||(N=!0,de?M(x,[_]):M(R,[_]),w.delayedLeave&&w.delayedLeave(),_[vu]=void 0)};P?A(P,[_,ue]):ue()},leave(_,P){const R=String(t.key);if(_[vu]&&_[vu](!0),s.isUnmounting)return P();M(m,[_]);let x=!1;const N=_[Jn]=ue=>{x||(x=!0,P(),ue?M(I,[_]):M(v,[_]),_[Jn]=void 0,$[R]===t&&delete $[R])};$[R]=t,g?A(g,[_,N]):N()},clone(_){const P=ha(_,e,s,r,n);return n&&n(P),P}};return w}function ip(t){if(Lc(t))return t=en(t),t.children=null,t}function J0(t){if(!Lc(t))return M2(t.type)&&t.children?V2(t.children):t;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&Le(s.default))return s.default()}}function Ln(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ln(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function _h(t,e=!1,s){let r=[],n=0;for(let i=0;i<t.length;i++){let o=t[i];const l=s==null?o.key:String(s)+String(o.key!=null?o.key:i);o.type===he?(o.patchFlag&128&&n++,r=r.concat(_h(o.children,e,l))):(e||o.type!==Gt)&&r.push(l!=null?en(o,{key:l}):o)}if(n>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Li(t,e){return Le(t)?Xe({name:t.name},e,{setup:t}):t}function BL(){const t=ys();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function xg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function jL(t){const e=ys(),s=xc(null);if(e){const n=e.refs===Qe?e.refs={}:e.refs;Object.defineProperty(n,t,{enumerable:!0,get:()=>s.value,set:i=>s.value=i})}return s}function Jl(t,e,s,r,n=!1){if(ke(t)){t.forEach((v,I)=>Jl(v,e&&(ke(e)?e[I]:e),s,r,n));return}if(li(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Jl(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?Oc(r.component):r.el,o=n?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===Qe?l.refs={}:l.refs,f=l.setupState,m=nt(f),g=f===Qe?()=>!1:v=>ot(m,v);if(u!=null&&u!==c&&(Fe(u)?(h[u]=null,g(u)&&(f[u]=null)):Kt(u)&&(u.value=null)),Le(c))Ma(c,l,12,[o,h]);else{const v=Fe(c),I=Kt(c);if(v||I){const C=()=>{if(t.f){const U=v?g(c)?f[c]:h[c]:c.value;n?ke(U)&&ch(U,i):ke(U)?U.includes(i)||U.push(i):v?(h[c]=[i],g(c)&&(f[c]=h[c])):(c.value=[i],t.k&&(h[t.k]=c.value))}else v?(h[c]=o,g(c)&&(f[c]=o)):I&&(c.value=o,t.k&&(h[t.k]=o))};o?(C.id=-1,Yt(C,s)):C()}}}let Z0=!1;const Ho=()=>{Z0||(console.error("Hydration completed but contains mismatches."),Z0=!0)},HL=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",zL=t=>t.namespaceURI.includes("MathML"),_u=t=>{if(t.nodeType===1){if(HL(t))return"svg";if(zL(t))return"mathml"}},ra=t=>t.nodeType===8;function WL(t){const{mt:e,p:s,o:{patchProp:r,createText:n,nextSibling:i,parentNode:o,remove:l,insert:c,createComment:u}}=t,h=(E,L)=>{if(!L.hasChildNodes()){s(null,E,L),pd(),L._vnode=E;return}f(L.firstChild,E,null,null,null),pd(),L._vnode=E},f=(E,L,$,M,A,w=!1)=>{w=w||!!L.dynamicChildren;const _=ra(E)&&E.data==="[",P=()=>I(E,L,$,M,A,_),{type:R,ref:x,shapeFlag:N,patchFlag:ue}=L;let de=E.nodeType;L.el=E,ue===-2&&(w=!1,L.dynamicChildren=null);let ce=null;switch(R){case In:de!==3?L.children===""?(c(L.el=n(""),o(E),E),ce=E):ce=P():(E.data!==L.children&&(Ho(),E.data=L.children),ce=i(E));break;case Gt:D(E)?(ce=i(E),U(L.el=E.content.firstChild,E,$)):de!==8||_?ce=P():ce=i(E);break;case co:if(_&&(E=i(E),de=E.nodeType),de===1||de===3){ce=E;const te=!L.children.length;for(let le=0;le<L.staticCount;le++)te&&(L.children+=ce.nodeType===1?ce.outerHTML:ce.data),le===L.staticCount-1&&(L.anchor=ce),ce=i(ce);return _?i(ce):ce}else P();break;case he:_?ce=v(E,L,$,M,A,w):ce=P();break;default:if(N&1)(de!==1||L.type.toLowerCase()!==E.tagName.toLowerCase())&&!D(E)?ce=P():ce=m(E,L,$,M,A,w);else if(N&6){L.slotScopeIds=A;const te=o(E);if(_?ce=C(E):ra(E)&&E.data==="teleport start"?ce=C(E,E.data,"teleport end"):ce=i(E),e(L,te,null,$,M,_u(te),w),li(L)&&!L.type.__asyncResolved){let le;_?(le=xe(he),le.anchor=ce?ce.previousSibling:te.lastChild):le=E.nodeType===3?re(""):xe("div"),le.el=E,L.component.subTree=le}}else N&64?de!==8?ce=P():ce=L.type.hydrate(E,L,$,M,A,w,t,g):N&128&&(ce=L.type.hydrate(E,L,$,M,_u(o(E)),A,w,t,f))}return x!=null&&Jl(x,null,M,L),ce},m=(E,L,$,M,A,w)=>{w=w||!!L.dynamicChildren;const{type:_,props:P,patchFlag:R,shapeFlag:x,dirs:N,transition:ue}=L,de=_==="input"||_==="option";if(de||R!==-1){N&&Hr(L,null,$,"created");let ce=!1;if(D(E)){ce=hS(null,ue)&&$&&$.vnode.props&&$.vnode.props.appear;const le=E.content.firstChild;ce&&ue.beforeEnter(le),U(le,E,$),L.el=E=le}if(x&16&&!(P&&(P.innerHTML||P.textContent))){let le=g(E.firstChild,L,E,$,M,A,w);for(;le;){bu(E,1)||Ho();const $e=le;le=le.nextSibling,l($e)}}else if(x&8){let le=L.children;le[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(le=le.slice(1)),E.textContent!==le&&(bu(E,0)||Ho(),E.textContent=L.children)}if(P){if(de||!w||R&48){const le=E.tagName.includes("-");for(const $e in P)(de&&($e.endsWith("value")||$e==="indeterminate")||ki($e)&&!Tn($e)||$e[0]==="."||le)&&r(E,$e,null,P[$e],void 0,$)}else if(P.onClick)r(E,"onClick",null,P.onClick,void 0,$);else if(R&4&&ai(P.style))for(const le in P.style)P.style[le]}let te;(te=P&&P.onVnodeBeforeMount)&&Ws(te,$,L),N&&Hr(L,null,$,"beforeMount"),((te=P&&P.onVnodeMounted)||N||ce)&&wS(()=>{te&&Ws(te,$,L),ce&&ue.enter(E),N&&Hr(L,null,$,"mounted")},M)}return E.nextSibling},g=(E,L,$,M,A,w,_)=>{_=_||!!L.dynamicChildren;const P=L.children,R=P.length;for(let x=0;x<R;x++){const N=_?P[x]:P[x]=Ks(P[x]),ue=N.type===In;E?(ue&&!_&&x+1<R&&Ks(P[x+1]).type===In&&(c(n(E.data.slice(N.children.length)),$,i(E)),E.data=N.children),E=f(E,N,M,A,w,_)):ue&&!N.children?c(N.el=n(""),$):(bu($,1)||Ho(),s(null,N,$,null,M,A,_u($),w))}return E},v=(E,L,$,M,A,w)=>{const{slotScopeIds:_}=L;_&&(A=A?A.concat(_):_);const P=o(E),R=g(i(E),L,P,$,M,A,w);return R&&ra(R)&&R.data==="]"?i(L.anchor=R):(Ho(),c(L.anchor=u("]"),P,R),R)},I=(E,L,$,M,A,w)=>{if(bu(E.parentElement,1)||Ho(),L.el=null,w){const R=C(E);for(;;){const x=i(E);if(x&&x!==R)l(x);else break}}const _=i(E),P=o(E);return l(E),s(null,L,P,_,$,M,_u(P),A),$&&($.vnode.el=L.el,Th($,L.el)),_},C=(E,L="[",$="]")=>{let M=0;for(;E;)if(E=i(E),E&&ra(E)&&(E.data===L&&M++,E.data===$)){if(M===0)return i(E);M--}return E},U=(E,L,$)=>{const M=L.parentNode;M&&M.replaceChild(E,L);let A=$;for(;A;)A.vnode.el===L&&(A.vnode.el=A.subTree.el=E),A=A.parent},D=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[h,f]}const e1="data-allow-mismatch",GL={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function bu(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(e1);)t=t.parentElement;const s=t&&t.getAttribute(e1);if(s==null)return!1;if(s==="")return!0;{const r=s.split(",");return e===0&&r.includes("children")?!0:s.split(",").includes(GL[e])}}const KL=Ac().requestIdleCallback||(t=>setTimeout(t,1)),YL=Ac().cancelIdleCallback||(t=>clearTimeout(t)),QL=(t=1e4)=>e=>{const s=KL(e,{timeout:t});return()=>YL(s)};function XL(t){const{top:e,left:s,bottom:r,right:n}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:o}=window;return(e>0&&e<i||r>0&&r<i)&&(s>0&&s<o||n>0&&n<o)}const JL=t=>(e,s)=>{const r=new IntersectionObserver(n=>{for(const i of n)if(i.isIntersecting){r.disconnect(),e();break}},t);return s(n=>{if(n instanceof Element){if(XL(n))return e(),r.disconnect(),!1;r.observe(n)}}),()=>r.disconnect()},ZL=t=>e=>{if(t){const s=matchMedia(t);if(s.matches)e();else return s.addEventListener("change",e,{once:!0}),()=>s.removeEventListener("change",e)}},eR=(t=[])=>(e,s)=>{Fe(t)&&(t=[t]);let r=!1;const n=o=>{r||(r=!0,i(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},i=()=>{s(o=>{for(const l of t)o.removeEventListener(l,n)})};return s(o=>{for(const l of t)o.addEventListener(l,n,{once:!0})}),i};function tR(t,e){if(ra(t)&&t.data==="["){let s=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(ra(r))if(r.data==="]"){if(--s===0)break}else r.data==="["&&s++;r=r.nextSibling}}else e(t)}const li=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function sR(t){Le(t)&&(t={loader:t});const{loader:e,loadingComponent:s,errorComponent:r,delay:n=200,hydrate:i,timeout:o,suspensible:l=!0,onError:c}=t;let u=null,h,f=0;const m=()=>(f++,u=null,g()),g=()=>{let v;return u||(v=u=e().catch(I=>{if(I=I instanceof Error?I:new Error(String(I)),c)return new Promise((C,U)=>{c(I,()=>C(m()),()=>U(I),f+1)});throw I}).then(I=>v!==u&&u?u:(I&&(I.__esModule||I[Symbol.toStringTag]==="Module")&&(I=I.default),h=I,I)))};return Li({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(v,I,C){const U=i?()=>{const D=i(C,E=>tR(v,E));D&&(I.bum||(I.bum=[])).push(D)}:C;h?U():g().then(()=>!I.isUnmounted&&U())},get __asyncResolved(){return h},setup(){const v=Xt;if(xg(v),h)return()=>op(h,v);const I=E=>{u=null,Ao(E,v,13,!r)};if(l&&v.suspense||fa)return g().then(E=>()=>op(E,v)).catch(E=>(I(E),()=>r?xe(r,{error:E}):null));const C=Se(!1),U=Se(),D=Se(!!n);return n&&setTimeout(()=>{D.value=!1},n),o!=null&&setTimeout(()=>{if(!C.value&&!U.value){const E=new Error(`Async component timed out after ${o}ms.`);I(E),U.value=E}},o),g().then(()=>{C.value=!0,v.parent&&Lc(v.parent.vnode)&&v.parent.update()}).catch(E=>{I(E),U.value=E}),()=>{if(C.value&&h)return op(h,v);if(U.value&&r)return xe(r,{error:U.value});if(s&&!D.value)return xe(s)}}})}function op(t,e){const{ref:s,props:r,children:n,ce:i}=e.vnode,o=xe(t,r,n);return o.ref=s,o.ce=i,delete e.vnode.ce,o}const Lc=t=>t.type.__isKeepAlive,rR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const s=ys(),r=s.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const n=new Map,i=new Set;let o=null;const l=s.suspense,{renderer:{p:c,m:u,um:h,o:{createElement:f}}}=r,m=f("div");r.activate=(D,E,L,$,M)=>{const A=D.component;u(D,E,L,0,l),c(A.vnode,D,E,L,A,l,$,D.slotScopeIds,M),Yt(()=>{A.isDeactivated=!1,A.a&&oo(A.a);const w=D.props&&D.props.onVnodeMounted;w&&Ws(w,A.parent,D)},l)},r.deactivate=D=>{const E=D.component;yd(E.m),yd(E.a),u(D,m,null,1,l),Yt(()=>{E.da&&oo(E.da);const L=D.props&&D.props.onVnodeUnmounted;L&&Ws(L,E.parent,D),E.isDeactivated=!0},l)};function g(D){ap(D),h(D,s,l,!0)}function v(D){n.forEach((E,L)=>{const $=lm(E.type);$&&!D($)&&I(L)})}function I(D){const E=n.get(D);E&&(!o||!kr(E,o))?g(E):o&&ap(o),n.delete(D),i.delete(D)}fr(()=>[t.include,t.exclude],([D,E])=>{D&&v(L=>yl(D,L)),E&&v(L=>!yl(E,L))},{flush:"post",deep:!0});let C=null;const U=()=>{C!=null&&(vd(s.subTree.type)?Yt(()=>{n.set(C,wu(s.subTree))},s.subTree.suspense):n.set(C,wu(s.subTree)))};return br(U),wh(U),Rc(()=>{n.forEach(D=>{const{subTree:E,suspense:L}=s,$=wu(E);if(D.type===$.type&&D.key===$.key){ap($);const M=$.component.da;M&&Yt(M,L);return}g(D)})}),()=>{if(C=null,!e.default)return o=null;const D=e.default(),E=D[0];if(D.length>1)return o=null,D;if(!Rn(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return o=null,E;let L=wu(E);if(L.type===Gt)return o=null,L;const $=L.type,M=lm(li(L)?L.type.__asyncResolved||{}:$),{include:A,exclude:w,max:_}=t;if(A&&(!M||!yl(A,M))||w&&M&&yl(w,M))return L.shapeFlag&=-257,o=L,E;const P=L.key==null?$:L.key,R=n.get(P);return L.el&&(L=en(L),E.shapeFlag&128&&(E.ssContent=L)),C=P,R?(L.el=R.el,L.component=R.component,L.transition&&Ln(L,L.transition),L.shapeFlag|=512,i.delete(P),i.add(P)):(i.add(P),_&&i.size>parseInt(_,10)&&I(i.values().next().value)),L.shapeFlag|=256,o=L,vd(E.type)?E:L}}},nR=rR;function yl(t,e){return ke(t)?t.some(s=>yl(s,e)):Fe(t)?t.split(",").includes(e):Yw(t)?(t.lastIndex=0,t.test(e)):!1}function j2(t,e){z2(t,"a",e)}function H2(t,e){z2(t,"da",e)}function z2(t,e,s=Xt){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(bh(e,r,s),s){let n=s.parent;for(;n&&n.parent;)Lc(n.parent.vnode)&&iR(r,e,s,n),n=n.parent}}function iR(t,e,s,r){const n=bh(e,t,r,!0);Ri(()=>{ch(r[e],n)},s)}function ap(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function wu(t){return t.shapeFlag&128?t.ssContent:t}function bh(t,e,s=Xt,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ai();const l=po(s),c=vr(e,s,t,o);return l(),Pi(),c});return r?n.unshift(i):n.push(i),i}}const Un=t=>(e,s=Xt)=>{(!fa||t==="sp")&&bh(t,(...r)=>e(...r),s)},Lg=Un("bm"),br=Un("m"),Rg=Un("bu"),wh=Un("u"),Rc=Un("bum"),Ri=Un("um"),W2=Un("sp"),G2=Un("rtg"),K2=Un("rtc");function Y2(t,e=Xt){bh("ec",t,e)}const Ng="components",oR="directives";function es(t,e){return Og(Ng,t,!0,e)||t}const Q2=Symbol.for("v-ndc");function Sh(t){return Fe(t)?Og(Ng,t,!1)||t:t||Q2}function aR(t){return Og(oR,t)}function Og(t,e,s=!0,r=!1){const n=Zt||Xt;if(n){const i=n.type;if(t===Ng){const l=lm(i,!1);if(l&&(l===e||l===At(e)||l===Ci(At(e))))return i}const o=t1(n[t]||i[t],e)||t1(n.appContext[t],e);return!o&&r?i:o}}function t1(t,e){return t&&(t[e]||t[At(e)]||t[Ci(At(e))])}function be(t,e,s,r){let n;const i=s&&s[r],o=ke(t);if(o||Fe(t)){const l=o&&ai(t);let c=!1;l&&(c=!lr(t),t=ph(t)),n=new Array(t.length);for(let u=0,h=t.length;u<h;u++)n[u]=e(c?As(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,i&&i[l])}else if(dt(t))if(t[Symbol.iterator])n=Array.from(t,(l,c)=>e(l,c,void 0,i&&i[c]));else{const l=Object.keys(t);n=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];n[c]=e(t[h],h,c,i&&i[c])}}else n=[];return s&&(s[r]=n),n}function lR(t,e){for(let s=0;s<e.length;s++){const r=e[s];if(ke(r))for(let n=0;n<r.length;n++)t[r[n].name]=r[n].fn;else r&&(t[r.name]=r.key?(...n)=>{const i=r.fn(...n);return i&&(i.key=r.key),i}:r.fn)}return t}function cR(t,e,s={},r,n){if(Zt.ce||Zt.parent&&li(Zt.parent)&&Zt.parent.ce)return e!=="default"&&(s.name=e),b(),ts(he,null,[xe("slot",s,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),b();const o=i&&Dg(i(s)),l=s.key||o&&o.key,c=ts(he,{key:(l&&!js(l)?l:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!n&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Dg(t){return t.some(e=>Rn(e)?!(e.type===Gt||e.type===he&&!Dg(e.children)):!0)?t:null}function uR(t,e){const s={};for(const r in t)s[e&&/[A-Z]/.test(r)?`on:${r}`:io(r)]=t[r];return s}const Xp=t=>t?AS(t)?Oc(t):Xp(t.parent):null,Rl=Xe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Xp(t.parent),$root:t=>Xp(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Mg(t),$forceUpdate:t=>t.f||(t.f=()=>{Cg(t.update)}),$nextTick:t=>t.n||(t.n=Po.bind(t.proxy)),$watch:t=>BR.bind(t)}),lp=(t,e)=>t!==Qe&&!t.__isScriptSetup&&ot(t,e),Jp={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(lp(r,e))return o[e]=1,r[e];if(n!==Qe&&ot(n,e))return o[e]=2,n[e];if((u=t.propsOptions[0])&&ot(u,e))return o[e]=3,i[e];if(s!==Qe&&ot(s,e))return o[e]=4,s[e];Zp&&(o[e]=0)}}const h=Rl[e];let f,m;if(h)return e==="$attrs"&&Cs(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==Qe&&ot(s,e))return o[e]=4,s[e];if(m=c.config.globalProperties,ot(m,e))return m[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return lp(n,e)?(n[e]=s,!0):r!==Qe&&ot(r,e)?(r[e]=s,!0):ot(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,propsOptions:i}},o){let l;return!!s[o]||t!==Qe&&ot(t,o)||lp(e,o)||(l=i[0])&&ot(l,o)||ot(r,o)||ot(Rl,o)||ot(n.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ot(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}},dR=Xe({},Jp,{get(t,e){if(e!==Symbol.unscopables)return Jp.get(t,e,t)},has(t,e){return e[0]!=="_"&&!gg(e)}});function hR(){return null}function fR(){return null}function pR(t){}function mR(t){}function gR(){return null}function yR(){}function vR(t,e){return null}function _R(){return X2().slots}function bR(){return X2().attrs}function X2(){const t=ys();return t.setupContext||(t.setupContext=LS(t))}function Zl(t){return ke(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}function wR(t,e){const s=Zl(t);for(const r in e){if(r.startsWith("__skip"))continue;let n=s[r];n?ke(n)||Le(n)?n=s[r]={type:n,default:e[r]}:n.default=e[r]:n===null&&(n=s[r]={default:e[r]}),n&&e[`__skip_${r}`]&&(n.skipFactory=!0)}return s}function SR(t,e){return!t||!e?t||e:ke(t)&&ke(e)?t.concat(e):Xe({},Zl(t),Zl(e))}function ER(t,e){const s={};for(const r in t)e.includes(r)||Object.defineProperty(s,r,{enumerable:!0,get:()=>t[r]});return s}function TR(t){const e=ys();let s=t();return im(),uh(s)&&(s=s.catch(r=>{throw po(e),r})),[s,()=>po(e)]}let Zp=!0;function kR(t){const e=Mg(t),s=t.proxy,r=t.ctx;Zp=!1,e.beforeCreate&&s1(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:f,mounted:m,beforeUpdate:g,updated:v,activated:I,deactivated:C,beforeDestroy:U,beforeUnmount:D,destroyed:E,unmounted:L,render:$,renderTracked:M,renderTriggered:A,errorCaptured:w,serverPrefetch:_,expose:P,inheritAttrs:R,components:x,directives:N,filters:ue}=e;if(u&&IR(u,r,null),o)for(const te in o){const le=o[te];Le(le)&&(r[te]=le.bind(s))}if(n){const te=n.call(s,s);dt(te)&&(t.data=xi(te))}if(Zp=!0,i)for(const te in i){const le=i[te],$e=Le(le)?le.bind(s,s):Le(le.get)?le.get.bind(s,s):ls,vt=!Le(le)&&Le(le.set)?le.set.bind(s):ls,me=_e({get:$e,set:vt});Object.defineProperty(r,te,{enumerable:!0,configurable:!0,get:()=>me.value,set:Oe=>me.value=Oe})}if(l)for(const te in l)J2(l[te],r,s,te);if(c){const te=Le(c)?c.call(s):c;Reflect.ownKeys(te).forEach(le=>{Nl(le,te[le])})}h&&s1(h,t,"c");function ce(te,le){ke(le)?le.forEach($e=>te($e.bind(s))):le&&te(le.bind(s))}if(ce(Lg,f),ce(br,m),ce(Rg,g),ce(wh,v),ce(j2,I),ce(H2,C),ce(Y2,w),ce(K2,M),ce(G2,A),ce(Rc,D),ce(Ri,L),ce(W2,_),ke(P))if(P.length){const te=t.exposed||(t.exposed={});P.forEach(le=>{Object.defineProperty(te,le,{get:()=>s[le],set:$e=>s[le]=$e})})}else t.exposed||(t.exposed={});$&&t.render===ls&&(t.render=$),R!=null&&(t.inheritAttrs=R),x&&(t.components=x),N&&(t.directives=N),_&&xg(t)}function IR(t,e,s=ls){ke(t)&&(t=em(t));for(const r in t){const n=t[r];let i;dt(n)?"default"in n?i=Xs(n.from||r,n.default,!0):i=Xs(n.from||r):i=Xs(n),Kt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function s1(t,e,s){vr(ke(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function J2(t,e,s,r){let n=r.includes(".")?yS(s,r):()=>s[r];if(Fe(t)){const i=e[t];Le(i)&&fr(n,i)}else if(Le(t))fr(n,t.bind(s));else if(dt(t))if(ke(t))t.forEach(i=>J2(i,e,s,r));else{const i=Le(t.handler)?t.handler.bind(s):e[t.handler];Le(i)&&fr(n,i,t)}}function Mg(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!n.length&&!s&&!r?c=e:(c={},n.length&&n.forEach(u=>gd(c,u,o,!0)),gd(c,e,o)),dt(e)&&i.set(e,c),c}function gd(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&gd(t,i,s,!0),n&&n.forEach(o=>gd(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const l=CR[o]||s&&s[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const CR={data:r1,props:n1,emits:n1,methods:vl,computed:vl,beforeCreate:$s,created:$s,beforeMount:$s,mounted:$s,beforeUpdate:$s,updated:$s,beforeDestroy:$s,beforeUnmount:$s,destroyed:$s,unmounted:$s,activated:$s,deactivated:$s,errorCaptured:$s,serverPrefetch:$s,components:vl,directives:vl,watch:PR,provide:r1,inject:AR};function r1(t,e){return e?t?function(){return Xe(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function AR(t,e){return vl(em(t),em(e))}function em(t){if(ke(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function $s(t,e){return t?[...new Set([].concat(t,e))]:e}function vl(t,e){return t?Xe(Object.create(null),t,e):e}function n1(t,e){return t?ke(t)&&ke(e)?[...new Set([...t,...e])]:Xe(Object.create(null),Zl(t),Zl(e??{})):e}function PR(t,e){if(!t)return e;if(!e)return t;const s=Xe(Object.create(null),t);for(const r in e)s[r]=$s(t[r],e[r]);return s}function Z2(){return{app:null,config:{isNativeTag:sa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xR=0;function LR(t,e){return function(r,n=null){Le(r)||(r=Xe({},r)),n!=null&&!dt(n)&&(n=null);const i=Z2(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:xR++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:NS,get config(){return i.config},set config(h){},use(h,...f){return o.has(h)||(h&&Le(h.install)?(o.add(h),h.install(u,...f)):Le(h)&&(o.add(h),h(u,...f))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,f){return f?(i.components[h]=f,u):i.components[h]},directive(h,f){return f?(i.directives[h]=f,u):i.directives[h]},mount(h,f,m){if(!c){const g=u._ceVNode||xe(r,n);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),f&&e?e(g,h):t(g,h,m),c=!0,u._container=h,h.__vue_app__=u,Oc(g.component)}},onUnmount(h){l.push(h)},unmount(){c&&(vr(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return i.provides[h]=f,u},runWithContext(h){const f=lo;lo=u;try{return h()}finally{lo=f}}};return u}}let lo=null;function Nl(t,e){if(Xt){let s=Xt.provides;const r=Xt.parent&&Xt.parent.provides;r===s&&(s=Xt.provides=Object.create(r)),s[t]=e}}function Xs(t,e,s=!1){const r=Xt||Zt;if(r||lo){const n=lo?lo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&Le(e)?e.call(r&&r.proxy):e}}function RR(){return!!(Xt||Zt||lo)}const eS={},tS=()=>Object.create(eS),sS=t=>Object.getPrototypeOf(t)===eS;function NR(t,e,s,r=!1){const n={},i=tS();t.propsDefaults=Object.create(null),rS(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Tg(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function OR(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,l=nt(n),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(Eh(t.emitsOptions,m))continue;const g=e[m];if(c)if(ot(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const v=At(m);n[v]=tm(c,l,v,g,t,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{rS(t,e,n,i)&&(u=!0);let h;for(const f in l)(!e||!ot(e,f)&&((h=xs(f))===f||!ot(e,h)))&&(c?s&&(s[f]!==void 0||s[h]!==void 0)&&(n[f]=tm(c,l,f,void 0,t,!0)):delete n[f]);if(i!==l)for(const f in i)(!e||!ot(e,f))&&(delete i[f],u=!0)}u&&gn(t.attrs,"set","")}function rS(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Tn(c))continue;const u=e[c];let h;n&&ot(n,h=At(c))?!i||!i.includes(h)?s[h]=u:(l||(l={}))[h]=u:Eh(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=nt(s),u=l||Qe;for(let h=0;h<i.length;h++){const f=i[h];s[f]=tm(n,c,f,u[f],t,!ot(u,f))}}return o}function tm(t,e,s,r,n,i){const o=t[s];if(o!=null){const l=ot(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Le(c)){const{propsDefaults:u}=n;if(s in u)r=u[s];else{const h=po(n);r=u[s]=c.call(null,e),h()}}else r=c;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===xs(s))&&(r=!0))}return r}const DR=new WeakMap;function nS(t,e,s=!1){const r=s?DR:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},l=[];let c=!1;if(!Le(t)){const h=f=>{c=!0;const[m,g]=nS(f,e,!0);Xe(o,m),g&&l.push(...g)};!s&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return dt(t)&&r.set(t,ro),ro;if(ke(i))for(let h=0;h<i.length;h++){const f=At(i[h]);i1(f)&&(o[f]=Qe)}else if(i)for(const h in i){const f=At(h);if(i1(f)){const m=i[h],g=o[f]=ke(m)||Le(m)?{type:m}:Xe({},m),v=g.type;let I=!1,C=!0;if(ke(v))for(let U=0;U<v.length;++U){const D=v[U],E=Le(D)&&D.name;if(E==="Boolean"){I=!0;break}else E==="String"&&(C=!1)}else I=Le(v)&&v.name==="Boolean";g[0]=I,g[1]=C,(I||ot(g,"default"))&&l.push(f)}}const u=[o,l];return dt(t)&&r.set(t,u),u}function i1(t){return t[0]!=="$"&&!Tn(t)}const iS=t=>t[0]==="_"||t==="$stable",$g=t=>ke(t)?t.map(Ks):[Ks(t)],MR=(t,e,s)=>{if(e._n)return e;const r=Qt((...n)=>$g(e(...n)),s);return r._c=!1,r},oS=(t,e,s)=>{const r=t._ctx;for(const n in t){if(iS(n))continue;const i=t[n];if(Le(i))e[n]=MR(n,i,r);else if(i!=null){const o=$g(i);e[n]=()=>o}}},aS=(t,e)=>{const s=$g(e);t.slots.default=()=>s},lS=(t,e,s)=>{for(const r in e)(s||r!=="_")&&(t[r]=e[r])},$R=(t,e,s)=>{const r=t.slots=tS();if(t.vnode.shapeFlag&32){const n=e._;n?(lS(r,e,s),s&&mg(r,"_",n,!0)):oS(e,r)}else e&&aS(t,e)},UR=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=Qe;if(r.shapeFlag&32){const l=e._;l?s&&l===1?i=!1:lS(n,e,s):(i=!e.$stable,oS(e,n)),o=e}else e&&(aS(t,e),o={default:1});if(i)for(const l in n)!iS(l)&&o[l]==null&&delete n[l]},Yt=wS;function cS(t){return dS(t)}function uS(t){return dS(t,WL)}function dS(t,e){const s=Ac();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:m,setScopeId:g=ls,insertStaticContent:v}=t,I=(B,T,q,Q=null,H=null,Y=null,J=void 0,O=null,V=!!T.dynamicChildren)=>{if(B===T)return;B&&!kr(B,T)&&(Q=se(B),Oe(B,H,Y,!0),B=null),T.patchFlag===-2&&(V=!1,T.dynamicChildren=null);const{type:j,ref:X,shapeFlag:oe}=T;switch(j){case In:C(B,T,q,Q);break;case Gt:U(B,T,q,Q);break;case co:B==null&&D(T,q,Q,J);break;case he:x(B,T,q,Q,H,Y,J,O,V);break;default:oe&1?$(B,T,q,Q,H,Y,J,O,V):oe&6?N(B,T,q,Q,H,Y,J,O,V):(oe&64||oe&128)&&j.process(B,T,q,Q,H,Y,J,O,V,Ee)}X!=null&&H&&Jl(X,B&&B.ref,Y,T||B,!T)},C=(B,T,q,Q)=>{if(B==null)r(T.el=l(T.children),q,Q);else{const H=T.el=B.el;T.children!==B.children&&u(H,T.children)}},U=(B,T,q,Q)=>{B==null?r(T.el=c(T.children||""),q,Q):T.el=B.el},D=(B,T,q,Q)=>{[B.el,B.anchor]=v(B.children,T,q,Q,B.el,B.anchor)},E=({el:B,anchor:T},q,Q)=>{let H;for(;B&&B!==T;)H=m(B),r(B,q,Q),B=H;r(T,q,Q)},L=({el:B,anchor:T})=>{let q;for(;B&&B!==T;)q=m(B),n(B),B=q;n(T)},$=(B,T,q,Q,H,Y,J,O,V)=>{T.type==="svg"?J="svg":T.type==="math"&&(J="mathml"),B==null?M(T,q,Q,H,Y,J,O,V):_(B,T,H,Y,J,O,V)},M=(B,T,q,Q,H,Y,J,O)=>{let V,j;const{props:X,shapeFlag:oe,transition:ie,dirs:z}=B;if(V=B.el=o(B.type,Y,X&&X.is,X),oe&8?h(V,B.children):oe&16&&w(B.children,V,null,Q,H,cp(B,Y),J,O),z&&Hr(B,null,Q,"created"),A(V,B,B.scopeId,J,Q),X){for(const Ce in X)Ce!=="value"&&!Tn(Ce)&&i(V,Ce,null,X[Ce],Y,Q);"value"in X&&i(V,"value",null,X.value,Y),(j=X.onVnodeBeforeMount)&&Ws(j,Q,B)}z&&Hr(B,null,Q,"beforeMount");const K=hS(H,ie);K&&ie.beforeEnter(V),r(V,T,q),((j=X&&X.onVnodeMounted)||K||z)&&Yt(()=>{j&&Ws(j,Q,B),K&&ie.enter(V),z&&Hr(B,null,Q,"mounted")},H)},A=(B,T,q,Q,H)=>{if(q&&g(B,q),Q)for(let Y=0;Y<Q.length;Y++)g(B,Q[Y]);if(H){let Y=H.subTree;if(T===Y||vd(Y.type)&&(Y.ssContent===T||Y.ssFallback===T)){const J=H.vnode;A(B,J,J.scopeId,J.slotScopeIds,H.parent)}}},w=(B,T,q,Q,H,Y,J,O,V=0)=>{for(let j=V;j<B.length;j++){const X=B[j]=O?Zn(B[j]):Ks(B[j]);I(null,X,T,q,Q,H,Y,J,O)}},_=(B,T,q,Q,H,Y,J)=>{const O=T.el=B.el;let{patchFlag:V,dynamicChildren:j,dirs:X}=T;V|=B.patchFlag&16;const oe=B.props||Qe,ie=T.props||Qe;let z;if(q&&Bi(q,!1),(z=ie.onVnodeBeforeUpdate)&&Ws(z,q,T,B),X&&Hr(T,B,q,"beforeUpdate"),q&&Bi(q,!0),(oe.innerHTML&&ie.innerHTML==null||oe.textContent&&ie.textContent==null)&&h(O,""),j?P(B.dynamicChildren,j,O,q,Q,cp(T,H),Y):J||le(B,T,O,null,q,Q,cp(T,H),Y,!1),V>0){if(V&16)R(O,oe,ie,q,H);else if(V&2&&oe.class!==ie.class&&i(O,"class",null,ie.class,H),V&4&&i(O,"style",oe.style,ie.style,H),V&8){const K=T.dynamicProps;for(let Ce=0;Ce<K.length;Ce++){const Ae=K[Ce],ft=oe[Ae],wt=ie[Ae];(wt!==ft||Ae==="value")&&i(O,Ae,ft,wt,H,q)}}V&1&&B.children!==T.children&&h(O,T.children)}else!J&&j==null&&R(O,oe,ie,q,H);((z=ie.onVnodeUpdated)||X)&&Yt(()=>{z&&Ws(z,q,T,B),X&&Hr(T,B,q,"updated")},Q)},P=(B,T,q,Q,H,Y,J)=>{for(let O=0;O<T.length;O++){const V=B[O],j=T[O],X=V.el&&(V.type===he||!kr(V,j)||V.shapeFlag&70)?f(V.el):q;I(V,j,X,null,Q,H,Y,J,!0)}},R=(B,T,q,Q,H)=>{if(T!==q){if(T!==Qe)for(const Y in T)!Tn(Y)&&!(Y in q)&&i(B,Y,T[Y],null,H,Q);for(const Y in q){if(Tn(Y))continue;const J=q[Y],O=T[Y];J!==O&&Y!=="value"&&i(B,Y,O,J,H,Q)}"value"in q&&i(B,"value",T.value,q.value,H)}},x=(B,T,q,Q,H,Y,J,O,V)=>{const j=T.el=B?B.el:l(""),X=T.anchor=B?B.anchor:l("");let{patchFlag:oe,dynamicChildren:ie,slotScopeIds:z}=T;z&&(O=O?O.concat(z):z),B==null?(r(j,q,Q),r(X,q,Q),w(T.children||[],q,X,H,Y,J,O,V)):oe>0&&oe&64&&ie&&B.dynamicChildren?(P(B.dynamicChildren,ie,q,H,Y,J,O),(T.key!=null||H&&T===H.subTree)&&Ug(B,T,!0)):le(B,T,q,X,H,Y,J,O,V)},N=(B,T,q,Q,H,Y,J,O,V)=>{T.slotScopeIds=O,B==null?T.shapeFlag&512?H.ctx.activate(T,q,Q,J,V):ue(T,q,Q,H,Y,J,V):de(B,T,V)},ue=(B,T,q,Q,H,Y,J)=>{const O=B.component=CS(B,Q,H);if(Lc(B)&&(O.ctx.renderer=Ee),PS(O,!1,J),O.asyncDep){if(H&&H.registerDep(O,ce,J),!B.el){const V=O.subTree=xe(Gt);U(null,V,T,q)}}else ce(O,B,T,q,H,Y,J)},de=(B,T,q)=>{const Q=T.component=B.component;if(KR(B,T,q))if(Q.asyncDep&&!Q.asyncResolved){te(Q,T,q);return}else Q.next=T,Q.update();else T.el=B.el,Q.vnode=T},ce=(B,T,q,Q,H,Y,J)=>{const O=()=>{if(B.isMounted){let{next:oe,bu:ie,u:z,parent:K,vnode:Ce}=B;{const os=fS(B);if(os){oe&&(oe.el=Ce.el,te(B,oe,J)),os.asyncDep.then(()=>{B.isUnmounted||O()});return}}let Ae=oe,ft;Bi(B,!1),oe?(oe.el=Ce.el,te(B,oe,J)):oe=Ce,ie&&oo(ie),(ft=oe.props&&oe.props.onVnodeBeforeUpdate)&&Ws(ft,K,oe,Ce),Bi(B,!0);const wt=Fu(B),Et=B.subTree;B.subTree=wt,I(Et,wt,f(Et.el),se(Et),B,H,Y),oe.el=wt.el,Ae===null&&Th(B,wt.el),z&&Yt(z,H),(ft=oe.props&&oe.props.onVnodeUpdated)&&Yt(()=>Ws(ft,K,oe,Ce),H)}else{let oe;const{el:ie,props:z}=T,{bm:K,m:Ce,parent:Ae,root:ft,type:wt}=B,Et=li(T);if(Bi(B,!1),K&&oo(K),!Et&&(oe=z&&z.onVnodeBeforeMount)&&Ws(oe,Ae,T),Bi(B,!0),ie&&Je){const os=()=>{B.subTree=Fu(B),Je(ie,B.subTree,B,H,null)};Et&&wt.__asyncHydrate?wt.__asyncHydrate(ie,B,os):os()}else{ft.ce&&ft.ce._injectChildStyle(wt);const os=B.subTree=Fu(B);I(null,os,q,Q,B,H,Y),T.el=os.el}if(Ce&&Yt(Ce,H),!Et&&(oe=z&&z.onVnodeMounted)){const os=T;Yt(()=>Ws(oe,Ae,os),H)}(T.shapeFlag&256||Ae&&li(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&B.a&&Yt(B.a,H),B.isMounted=!0,T=q=Q=null}};B.scope.on();const V=B.effect=new Wl(O);B.scope.off();const j=B.update=V.run.bind(V),X=B.job=V.runIfDirty.bind(V);X.i=B,X.id=B.uid,V.scheduler=()=>Cg(X),Bi(B,!0),j()},te=(B,T,q)=>{T.component=B;const Q=B.vnode.props;B.vnode=T,B.next=null,OR(B,T.props,Q,q),UR(B,T.children,q),Ai(),K0(B),Pi()},le=(B,T,q,Q,H,Y,J,O,V=!1)=>{const j=B&&B.children,X=B?B.shapeFlag:0,oe=T.children,{patchFlag:ie,shapeFlag:z}=T;if(ie>0){if(ie&128){vt(j,oe,q,Q,H,Y,J,O,V);return}else if(ie&256){$e(j,oe,q,Q,H,Y,J,O,V);return}}z&8?(X&16&&bt(j,H,Y),oe!==j&&h(q,oe)):X&16?z&16?vt(j,oe,q,Q,H,Y,J,O,V):bt(j,H,Y,!0):(X&8&&h(q,""),z&16&&w(oe,q,Q,H,Y,J,O,V))},$e=(B,T,q,Q,H,Y,J,O,V)=>{B=B||ro,T=T||ro;const j=B.length,X=T.length,oe=Math.min(j,X);let ie;for(ie=0;ie<oe;ie++){const z=T[ie]=V?Zn(T[ie]):Ks(T[ie]);I(B[ie],z,q,null,H,Y,J,O,V)}j>X?bt(B,H,Y,!0,!1,oe):w(T,q,Q,H,Y,J,O,V,oe)},vt=(B,T,q,Q,H,Y,J,O,V)=>{let j=0;const X=T.length;let oe=B.length-1,ie=X-1;for(;j<=oe&&j<=ie;){const z=B[j],K=T[j]=V?Zn(T[j]):Ks(T[j]);if(kr(z,K))I(z,K,q,null,H,Y,J,O,V);else break;j++}for(;j<=oe&&j<=ie;){const z=B[oe],K=T[ie]=V?Zn(T[ie]):Ks(T[ie]);if(kr(z,K))I(z,K,q,null,H,Y,J,O,V);else break;oe--,ie--}if(j>oe){if(j<=ie){const z=ie+1,K=z<X?T[z].el:Q;for(;j<=ie;)I(null,T[j]=V?Zn(T[j]):Ks(T[j]),q,K,H,Y,J,O,V),j++}}else if(j>ie)for(;j<=oe;)Oe(B[j],H,Y,!0),j++;else{const z=j,K=j,Ce=new Map;for(j=K;j<=ie;j++){const Ds=T[j]=V?Zn(T[j]):Ks(T[j]);Ds.key!=null&&Ce.set(Ds.key,j)}let Ae,ft=0;const wt=ie-K+1;let Et=!1,os=0;const on=new Array(wt);for(j=0;j<wt;j++)on[j]=0;for(j=z;j<=oe;j++){const Ds=B[j];if(ft>=wt){Oe(Ds,H,Y,!0);continue}let ur;if(Ds.key!=null)ur=Ce.get(Ds.key);else for(Ae=K;Ae<=ie;Ae++)if(on[Ae-K]===0&&kr(Ds,T[Ae])){ur=Ae;break}ur===void 0?Oe(Ds,H,Y,!0):(on[ur-K]=j+1,ur>=os?os=ur:Et=!0,I(Ds,T[ur],q,null,H,Y,J,O,V),ft++)}const $o=Et?FR(on):ro;for(Ae=$o.length-1,j=wt-1;j>=0;j--){const Ds=K+j,ur=T[Ds],Uo=Ds+1<X?T[Ds+1].el:Q;on[j]===0?I(null,ur,q,Uo,H,Y,J,O,V):Et&&(Ae<0||j!==$o[Ae]?me(ur,q,Uo,2):Ae--)}}},me=(B,T,q,Q,H=null)=>{const{el:Y,type:J,transition:O,children:V,shapeFlag:j}=B;if(j&6){me(B.component.subTree,T,q,Q);return}if(j&128){B.suspense.move(T,q,Q);return}if(j&64){J.move(B,T,q,Ee);return}if(J===he){r(Y,T,q);for(let oe=0;oe<V.length;oe++)me(V[oe],T,q,Q);r(B.anchor,T,q);return}if(J===co){E(B,T,q);return}if(Q!==2&&j&1&&O)if(Q===0)O.beforeEnter(Y),r(Y,T,q),Yt(()=>O.enter(Y),H);else{const{leave:oe,delayLeave:ie,afterLeave:z}=O,K=()=>r(Y,T,q),Ce=()=>{oe(Y,()=>{K(),z&&z()})};ie?ie(Y,K,Ce):Ce()}else r(Y,T,q)},Oe=(B,T,q,Q=!1,H=!1)=>{const{type:Y,props:J,ref:O,children:V,dynamicChildren:j,shapeFlag:X,patchFlag:oe,dirs:ie,cacheIndex:z}=B;if(oe===-2&&(H=!1),O!=null&&Jl(O,null,q,B,!0),z!=null&&(T.renderCache[z]=void 0),X&256){T.ctx.deactivate(B);return}const K=X&1&&ie,Ce=!li(B);let Ae;if(Ce&&(Ae=J&&J.onVnodeBeforeUnmount)&&Ws(Ae,T,B),X&6)_t(B.component,q,Q);else{if(X&128){B.suspense.unmount(q,Q);return}K&&Hr(B,null,T,"beforeUnmount"),X&64?B.type.remove(B,T,q,Ee,Q):j&&!j.hasOnce&&(Y!==he||oe>0&&oe&64)?bt(j,T,q,!1,!0):(Y===he&&oe&384||!H&&X&16)&&bt(V,T,q),Q&&Be(B)}(Ce&&(Ae=J&&J.onVnodeUnmounted)||K)&&Yt(()=>{Ae&&Ws(Ae,T,B),K&&Hr(B,null,T,"unmounted")},q)},Be=B=>{const{type:T,el:q,anchor:Q,transition:H}=B;if(T===he){Rt(q,Q);return}if(T===co){L(B);return}const Y=()=>{n(q),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(B.shapeFlag&1&&H&&!H.persisted){const{leave:J,delayLeave:O}=H,V=()=>J(q,Y);O?O(B.el,Y,V):V()}else Y()},Rt=(B,T)=>{let q;for(;B!==T;)q=m(B),n(B),B=q;n(T)},_t=(B,T,q)=>{const{bum:Q,scope:H,job:Y,subTree:J,um:O,m:V,a:j}=B;yd(V),yd(j),Q&&oo(Q),H.stop(),Y&&(Y.flags|=8,Oe(J,B,T,q)),O&&Yt(O,T),Yt(()=>{B.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},bt=(B,T,q,Q=!1,H=!1,Y=0)=>{for(let J=Y;J<B.length;J++)Oe(B[J],T,q,Q,H)},se=B=>{if(B.shapeFlag&6)return se(B.component.subTree);if(B.shapeFlag&128)return B.suspense.next();const T=m(B.anchor||B.el),q=T&&T[D2];return q?m(q):T};let we=!1;const ge=(B,T,q)=>{B==null?T._vnode&&Oe(T._vnode,null,null,!0):I(T._vnode||null,B,T,null,null,null,q),T._vnode=B,we||(we=!0,K0(),pd(),we=!1)},Ee={p:I,um:Oe,m:me,r:Be,mt:ue,mc:w,pc:le,pbc:P,n:se,o:t};let ze,Je;return e&&([ze,Je]=e(Ee)),{render:ge,hydrate:ze,createApp:LR(ge,ze)}}function cp({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Bi({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function hS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ug(t,e,s=!1){const r=t.children,n=e.children;if(ke(r)&&ke(n))for(let i=0;i<r.length;i++){const o=r[i];let l=n[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[i]=Zn(n[i]),l.el=o.el),!s&&l.patchFlag!==-2&&Ug(o,l)),l.type===In&&(l.el=o.el)}}function FR(t){const e=t.slice(),s=[0];let r,n,i,o,l;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(n=s[s.length-1],t[n]<u){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)l=i+o>>1,t[s[l]]<u?i=l+1:o=l;u<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function fS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fS(e)}function yd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const pS=Symbol.for("v-scx"),mS=()=>Xs(pS);function VR(t,e){return Nc(t,null,e)}function qR(t,e){return Nc(t,null,{flush:"post"})}function gS(t,e){return Nc(t,null,{flush:"sync"})}function fr(t,e,s){return Nc(t,e,s)}function Nc(t,e,s=Qe){const{immediate:r,deep:n,flush:i,once:o}=s,l=Xe({},s),c=e&&r||!e&&i!=="post";let u;if(fa){if(i==="sync"){const g=mS();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=ls,g.resume=ls,g.pause=ls,g}}const h=Xt;l.call=(g,v,I)=>vr(g,h,v,I);let f=!1;i==="post"?l.scheduler=g=>{Yt(g,h&&h.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(g,v)=>{v?g():Cg(g)}),l.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=PL(t,e,l);return fa&&(u?u.push(m):c&&m()),m}function BR(t,e,s){const r=this.proxy,n=Fe(t)?t.includes(".")?yS(r,t):()=>r[t]:t.bind(r,r);let i;Le(e)?i=e:(i=e.handler,s=e);const o=po(this),l=Nc(n,i.bind(r),s);return o(),l}function yS(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}function jR(t,e,s=Qe){const r=ys(),n=At(e),i=xs(e),o=vS(t,n),l=C2((c,u)=>{let h,f=Qe,m;return gS(()=>{const g=t[n];Is(h,g)&&(h=g,u())}),{get(){return c(),s.get?s.get(h):h},set(g){const v=s.set?s.set(g):g;if(!Is(v,h)&&!(f!==Qe&&Is(g,f)))return;const I=r.vnode.props;I&&(e in I||n in I||i in I)&&(`onUpdate:${e}`in I||`onUpdate:${n}`in I||`onUpdate:${i}`in I)||(h=g,u()),r.emit(`update:${e}`,v),Is(g,v)&&Is(g,f)&&!Is(v,m)&&u(),f=g,m=v}}});return l[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?o||Qe:l,done:!1}:{done:!0}}}},l}const vS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${At(e)}Modifiers`]||t[`${xs(e)}Modifiers`];function HR(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||Qe;let n=s;const i=e.startsWith("update:"),o=i&&vS(r,e.slice(7));o&&(o.trim&&(n=s.map(h=>Fe(h)?h.trim():h)),o.number&&(n=s.map(Hl)));let l,c=r[l=io(e)]||r[l=io(At(e))];!c&&i&&(c=r[l=io(xs(e))]),c&&vr(c,t,6,n);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,vr(u,t,6,n)}}function _S(t,e,s=!1){const r=e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},l=!1;if(!Le(t)){const c=u=>{const h=_S(u,e,!0);h&&(l=!0,Xe(o,h))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(dt(t)&&r.set(t,null),null):(ke(i)?i.forEach(c=>o[c]=null):Xe(o,i),dt(t)&&r.set(t,o),o)}function Eh(t,e){return!t||!ki(e)?!1:(e=e.slice(2).replace(/Once$/,""),ot(t,e[0].toLowerCase()+e.slice(1))||ot(t,xs(e))||ot(t,e))}function Fu(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:f,data:m,setupState:g,ctx:v,inheritAttrs:I}=t,C=Xl(t);let U,D;try{if(s.shapeFlag&4){const L=n||r,$=L;U=Ks(u.call($,L,h,f,g,m,v)),D=l}else{const L=e;U=Ks(L.length>1?L(f,{attrs:l,slots:o,emit:c}):L(f,null)),D=e.props?l:WR(l)}}catch(L){Ol.length=0,Ao(L,t,1),U=xe(Gt)}let E=U;if(D&&I!==!1){const L=Object.keys(D),{shapeFlag:$}=E;L.length&&$&7&&(i&&L.some(lh)&&(D=GR(D,i)),E=en(E,D,!1,!0))}return s.dirs&&(E=en(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(s.dirs):s.dirs),s.transition&&Ln(E,s.transition),U=E,Xl(C),U}function zR(t,e=!0){let s;for(let r=0;r<t.length;r++){const n=t[r];if(Rn(n)){if(n.type!==Gt||n.children==="v-if"){if(s)return;s=n}}else return}return s}const WR=t=>{let e;for(const s in t)(s==="class"||s==="style"||ki(s))&&((e||(e={}))[s]=t[s]);return e},GR=(t,e)=>{const s={};for(const r in t)(!lh(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function KR(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return r?o1(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==r[m]&&!Eh(u,m))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?o1(r,o,u):!0:!!o;return!1}function o1(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!Eh(s,i))return!0}return!1}function Th({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const vd=t=>t.__isSuspense;let sm=0;const YR={name:"Suspense",__isSuspense:!0,process(t,e,s,r,n,i,o,l,c,u){if(t==null)XR(e,s,r,n,i,o,l,c,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}JR(t,e,s,r,n,o,l,c,u)}},hydrate:ZR,normalize:eN},QR=YR;function ec(t,e){const s=t.props&&t.props[e];Le(s)&&s()}function XR(t,e,s,r,n,i,o,l,c){const{p:u,o:{createElement:h}}=c,f=h("div"),m=t.suspense=bS(t,n,r,e,f,s,i,o,l,c);u(null,m.pendingBranch=t.ssContent,f,null,r,m,i,o),m.deps>0?(ec(t,"onPending"),ec(t,"onFallback"),u(null,t.ssFallback,e,s,r,null,i,o),oa(m,t.ssFallback)):m.resolve(!1,!0)}function JR(t,e,s,r,n,i,o,l,{p:c,um:u,o:{createElement:h}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const m=e.ssContent,g=e.ssFallback,{activeBranch:v,pendingBranch:I,isInFallback:C,isHydrating:U}=f;if(I)f.pendingBranch=m,kr(m,I)?(c(I,m,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0?f.resolve():C&&(U||(c(v,g,s,r,n,null,i,o,l),oa(f,g)))):(f.pendingId=sm++,U?(f.isHydrating=!1,f.activeBranch=I):u(I,n,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),C?(c(null,m,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0?f.resolve():(c(v,g,s,r,n,null,i,o,l),oa(f,g))):v&&kr(m,v)?(c(v,m,s,r,n,f,i,o,l),f.resolve(!0)):(c(null,m,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0&&f.resolve()));else if(v&&kr(m,v))c(v,m,s,r,n,f,i,o,l),oa(f,m);else if(ec(e,"onPending"),f.pendingBranch=m,m.shapeFlag&512?f.pendingId=m.component.suspenseId:f.pendingId=sm++,c(null,m,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0)f.resolve();else{const{timeout:D,pendingId:E}=f;D>0?setTimeout(()=>{f.pendingId===E&&f.fallback(g)},D):D===0&&f.fallback(g)}}function bS(t,e,s,r,n,i,o,l,c,u,h=!1){const{p:f,m,um:g,n:v,o:{parentNode:I,remove:C}}=u;let U;const D=tN(t);D&&e&&e.pendingBranch&&(U=e.pendingId,e.deps++);const E=t.props?zl(t.props.timeout):void 0,L=i,$={vnode:t,parent:e,parentComponent:s,namespace:o,container:r,hiddenContainer:n,deps:0,pendingId:sm++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(M=!1,A=!1){const{vnode:w,activeBranch:_,pendingBranch:P,pendingId:R,effects:x,parentComponent:N,container:ue}=$;let de=!1;$.isHydrating?$.isHydrating=!1:M||(de=_&&P.transition&&P.transition.mode==="out-in",de&&(_.transition.afterLeave=()=>{R===$.pendingId&&(m(P,ue,i===L?v(_):i,0),Yl(x))}),_&&(I(_.el)===ue&&(i=v(_)),g(_,N,$,!0)),de||m(P,ue,i,0)),oa($,P),$.pendingBranch=null,$.isInFallback=!1;let ce=$.parent,te=!1;for(;ce;){if(ce.pendingBranch){ce.effects.push(...x),te=!0;break}ce=ce.parent}!te&&!de&&Yl(x),$.effects=[],D&&e&&e.pendingBranch&&U===e.pendingId&&(e.deps--,e.deps===0&&!A&&e.resolve()),ec(w,"onResolve")},fallback(M){if(!$.pendingBranch)return;const{vnode:A,activeBranch:w,parentComponent:_,container:P,namespace:R}=$;ec(A,"onFallback");const x=v(w),N=()=>{$.isInFallback&&(f(null,M,P,x,_,null,R,l,c),oa($,M))},ue=M.transition&&M.transition.mode==="out-in";ue&&(w.transition.afterLeave=N),$.isInFallback=!0,g(w,_,null,!0),ue||N()},move(M,A,w){$.activeBranch&&m($.activeBranch,M,A,w),$.container=M},next(){return $.activeBranch&&v($.activeBranch)},registerDep(M,A,w){const _=!!$.pendingBranch;_&&$.deps++;const P=M.vnode.el;M.asyncDep.catch(R=>{Ao(R,M,0)}).then(R=>{if(M.isUnmounted||$.isUnmounted||$.pendingId!==M.suspenseId)return;M.asyncResolved=!0;const{vnode:x}=M;om(M,R,!1),P&&(x.el=P);const N=!P&&M.subTree.el;A(M,x,I(P||M.subTree.el),P?null:v(M.subTree),$,o,w),N&&C(N),Th(M,x.el),_&&--$.deps===0&&$.resolve()})},unmount(M,A){$.isUnmounted=!0,$.activeBranch&&g($.activeBranch,s,M,A),$.pendingBranch&&g($.pendingBranch,s,M,A)}};return $}function ZR(t,e,s,r,n,i,o,l,c){const u=e.suspense=bS(e,r,s,t.parentNode,document.createElement("div"),null,n,i,o,l,!0),h=c(t,u.pendingBranch=e.ssContent,s,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function eN(t){const{shapeFlag:e,children:s}=t,r=e&32;t.ssContent=a1(r?s.default:s),t.ssFallback=r?a1(s.fallback):xe(Gt)}function a1(t){let e;if(Le(t)){const s=fo&&t._c;s&&(t._d=!1,b()),t=t(),s&&(t._d=!0,e=Rs,SS())}return ke(t)&&(t=zR(t)),t=Ks(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(s=>s!==t)),t}function wS(t,e){e&&e.pendingBranch?ke(t)?e.effects.push(...t):e.effects.push(t):Yl(t)}function oa(t,e){t.activeBranch=e;const{vnode:s,parentComponent:r}=t;let n=e.el;for(;!n&&e.component;)e=e.component.subTree,n=e.el;s.el=n,r&&r.subTree===s&&(r.vnode.el=n,Th(r,n))}function tN(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const he=Symbol.for("v-fgt"),In=Symbol.for("v-txt"),Gt=Symbol.for("v-cmt"),co=Symbol.for("v-stc"),Ol=[];let Rs=null;function b(t=!1){Ol.push(Rs=t?null:[])}function SS(){Ol.pop(),Rs=Ol[Ol.length-1]||null}let fo=1;function rm(t,e=!1){fo+=t,t<0&&Rs&&e&&(Rs.hasOnce=!0)}function ES(t){return t.dynamicChildren=fo>0?Rs||ro:null,SS(),fo>0&&Rs&&Rs.push(t),t}function S(t,e,s,r,n,i){return ES(a(t,e,s,r,n,i,!0))}function ts(t,e,s,r,n){return ES(xe(t,e,s,r,n,!0))}function Rn(t){return t?t.__v_isVNode===!0:!1}function kr(t,e){return t.type===e.type&&t.key===e.key}function sN(t){}const TS=({key:t})=>t??null,Vu=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Fe(t)||Kt(t)||Le(t)?{i:Zt,r:t,k:e,f:!!s}:t:null);function a(t,e=null,s=null,r=0,n=null,i=t===he?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&TS(e),ref:e&&Vu(e),scopeId:vh,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Zt};return l?(Fg(c,s),i&128&&t.normalize(c)):s&&(c.shapeFlag|=Fe(s)?8:16),fo>0&&!o&&Rs&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Rs.push(c),c}const xe=rN;function rN(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===Q2)&&(t=Gt),Rn(t)){const l=en(t,e,!0);return s&&Fg(l,s),fo>0&&!i&&Rs&&(l.shapeFlag&6?Rs[Rs.indexOf(t)]=l:Rs.push(l)),l.patchFlag=-2,l}if(uN(t)&&(t=t.__vccOpts),e){e=kS(e);let{class:l,style:c}=e;l&&!Fe(l)&&(e.class=ye(l)),dt(c)&&(yh(c)&&!ke(c)&&(c=Xe({},c)),e.style=ct(c))}const o=Fe(t)?1:vd(t)?128:M2(t)?64:dt(t)?4:Le(t)?2:0;return a(t,e,s,r,n,o,i,!0)}function kS(t){return t?yh(t)||sS(t)?Xe({},t):t:null}function en(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?IS(n||{},e):n,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&TS(u),ref:e&&e.ref?s&&i?ke(i)?i.concat(Vu(e)):[i,Vu(e)]:Vu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==he?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&en(t.ssContent),ssFallback:t.ssFallback&&en(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Ln(h,c.clone(h)),h}function re(t=" ",e=0){return xe(In,null,t,e)}function kt(t,e){const s=xe(co,null,t);return s.staticCount=e,s}function W(t="",e=!1){return e?(b(),ts(Gt,null,t)):xe(Gt,null,t)}function Ks(t){return t==null||typeof t=="boolean"?xe(Gt):ke(t)?xe(he,null,t.slice()):Rn(t)?Zn(t):xe(In,null,String(t))}function Zn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:en(t)}function Fg(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ke(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Fg(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!sS(e)?e._ctx=Zt:n===3&&Zt&&(Zt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Le(e)?(e={default:e,_ctx:Zt},s=32):(e=String(e),r&64?(s=16,e=[re(e)]):s=8);t.children=e,t.shapeFlag|=s}function IS(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=ye([e.class,r.class]));else if(n==="style")e.style=ct([e.style,r.style]);else if(ki(n)){const i=e[n],o=r[n];o&&i!==o&&!(ke(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function Ws(t,e,s,r=null){vr(t,e,7,[s,r])}const nN=Z2();let iN=0;function CS(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||nN,i={uid:iN++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _g(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nS(r,n),emitsOptions:_S(r,n),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:r.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=HR.bind(null,i),t.ce&&t.ce(i),i}let Xt=null;const ys=()=>Xt||Zt;let _d,nm;{const t=Ac(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};_d=e("__VUE_INSTANCE_SETTERS__",s=>Xt=s),nm=e("__VUE_SSR_SETTERS__",s=>fa=s)}const po=t=>{const e=Xt;return _d(t),t.scope.on(),()=>{t.scope.off(),_d(e)}},im=()=>{Xt&&Xt.scope.off(),_d(null)};function AS(t){return t.vnode.shapeFlag&4}let fa=!1;function PS(t,e=!1,s=!1){e&&nm(e);const{props:r,children:n}=t.vnode,i=AS(t);NR(t,r,i,e),$R(t,n,s);const o=i?oN(t,e):void 0;return e&&nm(!1),o}function oN(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Jp);const{setup:r}=s;if(r){Ai();const n=t.setupContext=r.length>1?LS(t):null,i=po(t),o=Ma(r,t,0,[t.props,n]),l=uh(o);if(Pi(),i(),(l||t.sp)&&!li(t)&&xg(t),l){if(o.then(im,im),e)return o.then(c=>{om(t,c,e)}).catch(c=>{Ao(c,t,0)});t.asyncDep=o}else om(t,o,e)}else xS(t,e)}function om(t,e,s){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:dt(e)&&(t.setupState=Ig(e)),xS(t,s)}let bd,am;function aN(t){bd=t,am=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,dR))}}const lN=()=>!bd;function xS(t,e,s){const r=t.type;if(!t.render){if(!e&&bd&&!r.render){const n=r.template||Mg(t).template;if(n){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:l,compilerOptions:c}=r,u=Xe(Xe({isCustomElement:i,delimiters:l},o),c);r.render=bd(n,u)}}t.render=r.render||ls,am&&am(t)}{const n=po(t);Ai();try{kR(t)}finally{Pi(),n()}}}const cN={get(t,e){return Cs(t,"get",""),t[e]}};function LS(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,cN),slots:t.slots,emit:t.emit,expose:e}}function Oc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ig(k2(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Rl)return Rl[s](t)},has(e,s){return s in e||s in Rl}})):t.proxy}function lm(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function uN(t){return Le(t)&&"__vccOpts"in t}const _e=(t,e)=>kL(t,e,fa);function $a(t,e,s){const r=arguments.length;return r===2?dt(e)&&!ke(e)?Rn(e)?xe(t,null,[e]):xe(t,e):xe(t,null,e):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&Rn(s)&&(s=[s]),xe(t,e,s))}function dN(){}function hN(t,e,s,r){const n=s[r];if(n&&RS(n,t))return n;const i=e();return i.memo=t.slice(),i.cacheIndex=r,s[r]=i}function RS(t,e){const s=t.memo;if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++)if(Is(s[r],e[r]))return!1;return fo>0&&Rs&&Rs.push(t),!0}const NS="3.5.13",fN=ls,pN=OL,mN=Yo,gN=O2,yN={createComponentInstance:CS,setupComponent:PS,renderComponentRoot:Fu,setCurrentRenderingInstance:Xl,isVNode:Rn,normalizeVNode:Ks,getComponentPublicInstance:Oc,ensureValidVNode:Dg,pushWarningContext:xL,popWarningContext:LL},vN=yN,_N=null,bN=null,wN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cm;const l1=typeof window<"u"&&window.trustedTypes;if(l1)try{cm=l1.createPolicy("vue",{createHTML:t=>t})}catch{}const OS=cm?t=>cm.createHTML(t):t=>t,SN="http://www.w3.org/2000/svg",EN="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,c1=mn&&mn.createElement("template"),TN={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?mn.createElementNS(SN,t):e==="mathml"?mn.createElementNS(EN,t):s?mn.createElement(t,{is:s}):mn.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>mn.createTextNode(t),createComment:t=>mn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>mn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{c1.innerHTML=OS(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=c1.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},jn="transition",cl="animation",pa=Symbol("_vtc"),DS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},MS=Xe({},Pg,DS),kN=t=>(t.displayName="Transition",t.props=MS,t),ma=kN((t,{slots:e})=>$a(q2,$S(t),e)),ji=(t,e=[])=>{ke(t)?t.forEach(s=>s(...e)):t&&t(...e)},u1=t=>t?ke(t)?t.some(e=>e.length>1):t.length>1:!1;function $S(t){const e={};for(const x in t)x in DS||(e[x]=t[x]);if(t.css===!1)return e;const{name:s="v",type:r,duration:n,enterFromClass:i=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:m=`${s}-leave-active`,leaveToClass:g=`${s}-leave-to`}=t,v=IN(n),I=v&&v[0],C=v&&v[1],{onBeforeEnter:U,onEnter:D,onEnterCancelled:E,onLeave:L,onLeaveCancelled:$,onBeforeAppear:M=U,onAppear:A=D,onAppearCancelled:w=E}=e,_=(x,N,ue,de)=>{x._enterCancelled=de,Yn(x,N?h:l),Yn(x,N?u:o),ue&&ue()},P=(x,N)=>{x._isLeaving=!1,Yn(x,f),Yn(x,g),Yn(x,m),N&&N()},R=x=>(N,ue)=>{const de=x?A:D,ce=()=>_(N,x,ue);ji(de,[N,ce]),d1(()=>{Yn(N,x?c:i),qr(N,x?h:l),u1(de)||h1(N,r,I,ce)})};return Xe(e,{onBeforeEnter(x){ji(U,[x]),qr(x,i),qr(x,o)},onBeforeAppear(x){ji(M,[x]),qr(x,c),qr(x,u)},onEnter:R(!1),onAppear:R(!0),onLeave(x,N){x._isLeaving=!0;const ue=()=>P(x,N);qr(x,f),x._enterCancelled?(qr(x,m),um()):(um(),qr(x,m)),d1(()=>{x._isLeaving&&(Yn(x,f),qr(x,g),u1(L)||h1(x,r,C,ue))}),ji(L,[x,ue])},onEnterCancelled(x){_(x,!1,void 0,!0),ji(E,[x])},onAppearCancelled(x){_(x,!0,void 0,!0),ji(w,[x])},onLeaveCancelled(x){P(x),ji($,[x])}})}function IN(t){if(t==null)return null;if(dt(t))return[up(t.enter),up(t.leave)];{const e=up(t);return[e,e]}}function up(t){return zl(t)}function qr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[pa]||(t[pa]=new Set)).add(e)}function Yn(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const s=t[pa];s&&(s.delete(e),s.size||(t[pa]=void 0))}function d1(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let CN=0;function h1(t,e,s,r){const n=t._endId=++CN,i=()=>{n===t._endId&&r()};if(s!=null)return setTimeout(i,s);const{type:o,timeout:l,propCount:c}=US(t,e);if(!o)return r();const u=o+"end";let h=0;const f=()=>{t.removeEventListener(u,m),i()},m=g=>{g.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},l+1),t.addEventListener(u,m)}function US(t,e){const s=window.getComputedStyle(t),r=v=>(s[v]||"").split(", "),n=r(`${jn}Delay`),i=r(`${jn}Duration`),o=f1(n,i),l=r(`${cl}Delay`),c=r(`${cl}Duration`),u=f1(l,c);let h=null,f=0,m=0;e===jn?o>0&&(h=jn,f=o,m=i.length):e===cl?u>0&&(h=cl,f=u,m=c.length):(f=Math.max(o,u),h=f>0?o>u?jn:cl:null,m=h?h===jn?i.length:c.length:0);const g=h===jn&&/\b(transform|all)(,|$)/.test(r(`${jn}Property`).toString());return{type:h,timeout:f,propCount:m,hasTransform:g}}function f1(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,r)=>p1(s)+p1(t[r])))}function p1(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function um(){return document.body.offsetHeight}function AN(t,e,s){const r=t[pa];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const wd=Symbol("_vod"),FS=Symbol("_vsh"),VS={beforeMount(t,{value:e},{transition:s}){t[wd]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):ul(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:r}){!e!=!s&&(r?e?(r.beforeEnter(t),ul(t,!0),r.enter(t)):r.leave(t,()=>{ul(t,!1)}):ul(t,e))},beforeUnmount(t,{value:e}){ul(t,e)}};function ul(t,e){t.style.display=e?t[wd]:"none",t[FS]=!e}function PN(){VS.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const qS=Symbol("");function xN(t){const e=ys();if(!e)return;const s=e.ut=(n=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>Sd(i,n))},r=()=>{const n=t(e.proxy);e.ce?Sd(e.ce,n):dm(e.subTree,n),s(n)};Rg(()=>{Yl(r)}),br(()=>{fr(r,ls,{flush:"post"});const n=new MutationObserver(r);n.observe(e.subTree.el.parentNode,{childList:!0}),Ri(()=>n.disconnect())})}function dm(t,e){if(t.shapeFlag&128){const s=t.suspense;t=s.activeBranch,s.pendingBranch&&!s.isHydrating&&s.effects.push(()=>{dm(s.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Sd(t.el,e);else if(t.type===he)t.children.forEach(s=>dm(s,e));else if(t.type===co){let{el:s,anchor:r}=t;for(;s&&(Sd(s,e),s!==r);)s=s.nextSibling}}function Sd(t,e){if(t.nodeType===1){const s=t.style;let r="";for(const n in e)s.setProperty(`--${n}`,e[n]),r+=`--${n}: ${e[n]};`;s[qS]=r}}const LN=/(^|;)\s*display\s*:/;function RN(t,e,s){const r=t.style,n=Fe(s);let i=!1;if(s&&!n){if(e)if(Fe(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&qu(r,l,"")}else for(const o in e)s[o]==null&&qu(r,o,"");for(const o in s)o==="display"&&(i=!0),qu(r,o,s[o])}else if(n){if(e!==s){const o=r[qS];o&&(s+=";"+o),r.cssText=s,i=LN.test(s)}}else e&&t.removeAttribute("style");wd in t&&(t[wd]=i?r.display:"",t[FS]&&(r.display="none"))}const m1=/\s*!important$/;function qu(t,e,s){if(ke(s))s.forEach(r=>qu(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=NN(t,e);m1.test(s)?t.setProperty(xs(r),s.replace(m1,""),"important"):t[r]=s}}const g1=["Webkit","Moz","ms"],dp={};function NN(t,e){const s=dp[e];if(s)return s;let r=At(e);if(r!=="filter"&&r in t)return dp[e]=r;r=Ci(r);for(let n=0;n<g1.length;n++){const i=g1[n]+r;if(i in t)return dp[e]=i}return e}const y1="http://www.w3.org/1999/xlink";function v1(t,e,s,r,n,i=i2(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(y1,e.slice(6,e.length)):t.setAttributeNS(y1,e,s):s==null||i&&!vg(s)?t.removeAttribute(e):t.setAttribute(e,i?"":js(s)?String(s):s)}function _1(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?OS(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=vg(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function vn(t,e,s,r){t.addEventListener(e,s,r)}function ON(t,e,s,r){t.removeEventListener(e,s,r)}const b1=Symbol("_vei");function DN(t,e,s,r,n=null){const i=t[b1]||(t[b1]={}),o=i[e];if(r&&o)o.value=r;else{const[l,c]=MN(e);if(r){const u=i[e]=FN(r,n);vn(t,l,u,c)}else o&&(ON(t,l,o,c),i[e]=void 0)}}const w1=/(?:Once|Passive|Capture)$/;function MN(t){let e;if(w1.test(t)){e={};let r;for(;r=t.match(w1);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xs(t.slice(2)),e]}let hp=0;const $N=Promise.resolve(),UN=()=>hp||($N.then(()=>hp=0),hp=Date.now());function FN(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;vr(VN(r,s.value),e,5,[r])};return s.value=t,s.attached=UN(),s}function VN(t,e){if(ke(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const S1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,qN=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?AN(t,r,o):e==="style"?RN(t,s,r):ki(e)?lh(e)||DN(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):BN(t,e,r,o))?(_1(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&v1(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Fe(r))?_1(t,At(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),v1(t,e,r,o))};function BN(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&S1(e)&&Le(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return S1(e)&&Fe(s)?!1:e in t}const E1={};/*! #__NO_SIDE_EFFECTS__ */function BS(t,e,s){const r=Li(t,e);Cc(r)&&Xe(r,e);class n extends kh{constructor(o){super(r,o,s)}}return n.def=r,n}/*! #__NO_SIDE_EFFECTS__ */const jN=(t,e)=>BS(t,e,ZS),HN=typeof HTMLElement<"u"?HTMLElement:class{};class kh extends HN{constructor(e,s={},r=sc){super(),this._def=e,this._props=s,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==sc?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof kh){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,Po(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const n of r)this._setAttr(n.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,n=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:o}=r;let l;if(i&&!ke(i))for(const c in i){const u=i[c];(u===Number||u&&u.type===Number)&&(c in this._props&&(this._props[c]=zl(this._props[c])),(l||(l=Object.create(null)))[At(c)]=!0)}this._numberProps=l,n&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},s=this._def.__asyncLoader;s?this._pendingResolve=s().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const s=this._instance&&this._instance.exposed;if(s)for(const r in s)ot(this,r)||Object.defineProperty(this,r,{get:()=>kn(s[r])})}_resolveProps(e){const{props:s}=e,r=ke(s)?s:Object.keys(s||{});for(const n of Object.keys(this))n[0]!=="_"&&r.includes(n)&&this._setProp(n,this[n]);for(const n of r.map(At))Object.defineProperty(this,n,{get(){return this._getProp(n)},set(i){this._setProp(n,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const s=this.hasAttribute(e);let r=s?this.getAttribute(e):E1;const n=At(e);s&&this._numberProps&&this._numberProps[n]&&(r=zl(r)),this._setProp(n,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,s,r=!0,n=!1){if(s!==this._props[e]&&(s===E1?delete this._props[e]:(this._props[e]=s,e==="key"&&this._app&&(this._app._ceVNode.key=s)),n&&this._instance&&this._update(),r)){const i=this._ob;i&&i.disconnect(),s===!0?this.setAttribute(xs(e),""):typeof s=="string"||typeof s=="number"?this.setAttribute(xs(e),s+""):s||this.removeAttribute(xs(e)),i&&i.observe(this,{attributes:!0})}}_update(){JS(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const s=xe(this._def,Xe(e,this._props));return this._instance||(s.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const n=(i,o)=>{this.dispatchEvent(new CustomEvent(i,Cc(o[0])?Xe({detail:o},o[0]):{detail:o}))};r.emit=(i,...o)=>{n(i,o),xs(i)!==i&&n(xs(i),o)},this._setParent()}),s}_applyStyles(e,s){if(!e)return;if(s){if(s===this._def||this._styleChildren.has(s))return;this._styleChildren.add(s)}const r=this._nonce;for(let n=e.length-1;n>=0;n--){const i=document.createElement("style");r&&i.setAttribute("nonce",r),i.textContent=e[n],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let s;for(;s=this.firstChild;){const r=s.nodeType===1&&s.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(s),this.removeChild(s)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),s=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const n=e[r],i=n.getAttribute("name")||"default",o=this._slots[i],l=n.parentNode;if(o)for(const c of o){if(s&&c.nodeType===1){const u=s+"-s",h=document.createTreeWalker(c,1);c.setAttribute(u,"");let f;for(;f=h.nextNode();)f.setAttribute(u,"")}l.insertBefore(c,n)}else for(;n.firstChild;)l.insertBefore(n.firstChild,n);l.removeChild(n)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function jS(t){const e=ys(),s=e&&e.ce;return s||null}function zN(){const t=jS();return t&&t.shadowRoot}function WN(t="$style"){{const e=ys();if(!e)return Qe;const s=e.type.__cssModules;if(!s)return Qe;const r=s[t];return r||Qe}}const HS=new WeakMap,zS=new WeakMap,Ed=Symbol("_moveCb"),T1=Symbol("_enterCb"),GN=t=>(delete t.props.mode,t),KN=GN({name:"TransitionGroup",props:Xe({},MS,{tag:String,moveClass:String}),setup(t,{slots:e}){const s=ys(),r=Ag();let n,i;return wh(()=>{if(!n.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!ZN(n[0].el,s.vnode.el,o))return;n.forEach(QN),n.forEach(XN);const l=n.filter(JN);um(),l.forEach(c=>{const u=c.el,h=u.style;qr(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const f=u[Ed]=m=>{m&&m.target!==u||(!m||/transform$/.test(m.propertyName))&&(u.removeEventListener("transitionend",f),u[Ed]=null,Yn(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=nt(t),l=$S(o);let c=o.tag||he;if(n=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(n.push(h),Ln(h,ha(h,l,r,s)),HS.set(h,h.el.getBoundingClientRect()))}i=e.default?_h(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&Ln(h,ha(h,l,r,s))}return xe(c,null,i)}}}),YN=KN;function QN(t){const e=t.el;e[Ed]&&e[Ed](),e[T1]&&e[T1]()}function XN(t){zS.set(t,t.el.getBoundingClientRect())}function JN(t){const e=HS.get(t),s=zS.get(t),r=e.left-s.left,n=e.top-s.top;if(r||n){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${n}px)`,i.transitionDuration="0s",t}}function ZN(t,e,s){const r=t.cloneNode(),n=t[pa];n&&n.forEach(l=>{l.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),s.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=US(r);return i.removeChild(r),o}const mi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ke(e)?s=>oo(e,s):e};function eO(t){t.target.composing=!0}function k1(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const pr=Symbol("_assign"),Ge={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[pr]=mi(n);const i=r||n.props&&n.props.type==="number";vn(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;s&&(l=l.trim()),i&&(l=Hl(l)),t[pr](l)}),s&&vn(t,"change",()=>{t.value=t.value.trim()}),e||(vn(t,"compositionstart",eO),vn(t,"compositionend",k1),vn(t,"change",k1))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[pr]=mi(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Hl(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===c)||(t.value=c))}},Ih={deep:!0,created(t,e,s){t[pr]=mi(s),vn(t,"change",()=>{const r=t._modelValue,n=ga(t),i=t.checked,o=t[pr];if(ke(r)){const l=Pc(r,n),c=l!==-1;if(i&&!c)o(r.concat(n));else if(!i&&c){const u=[...r];u.splice(l,1),o(u)}}else if(Ii(r)){const l=new Set(r);i?l.add(n):l.delete(n),o(l)}else o(WS(t,i))})},mounted:I1,beforeUpdate(t,e,s){t[pr]=mi(s),I1(t,e,s)}};function I1(t,{value:e,oldValue:s},r){t._modelValue=e;let n;if(ke(e))n=Pc(e,r.props.value)>-1;else if(Ii(e))n=e.has(r.props.value);else{if(e===s)return;n=xn(e,WS(t,!0))}t.checked!==n&&(t.checked=n)}const wn={created(t,{value:e},s){t.checked=xn(e,s.props.value),t[pr]=mi(s),vn(t,"change",()=>{t[pr](ga(t))})},beforeUpdate(t,{value:e,oldValue:s},r){t[pr]=mi(r),e!==s&&(t.checked=xn(e,r.props.value))}},Js={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const n=Ii(e);vn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Hl(ga(o)):ga(o));t[pr](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,Po(()=>{t._assigning=!1})}),t[pr]=mi(r)},mounted(t,{value:e}){C1(t,e)},beforeUpdate(t,e,s){t[pr]=mi(s)},updated(t,{value:e}){t._assigning||C1(t,e)}};function C1(t,e){const s=t.multiple,r=ke(e);if(!(s&&!r&&!Ii(e))){for(let n=0,i=t.options.length;n<i;n++){const o=t.options[n],l=ga(o);if(s)if(r){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=Pc(e,l)>-1}else o.selected=e.has(l);else if(xn(ga(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ga(t){return"_value"in t?t._value:t.value}function WS(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const GS={created(t,e,s){Su(t,e,s,null,"created")},mounted(t,e,s){Su(t,e,s,null,"mounted")},beforeUpdate(t,e,s,r){Su(t,e,s,r,"beforeUpdate")},updated(t,e,s,r){Su(t,e,s,r,"updated")}};function KS(t,e){switch(t){case"SELECT":return Js;case"TEXTAREA":return Ge;default:switch(e){case"checkbox":return Ih;case"radio":return wn;default:return Ge}}}function Su(t,e,s,r,n){const o=KS(t.tagName,s.props&&s.props.type)[n];o&&o(t,e,s,r)}function tO(){Ge.getSSRProps=({value:t})=>({value:t}),wn.getSSRProps=({value:t},e)=>{if(e.props&&xn(e.props.value,t))return{checked:!0}},Ih.getSSRProps=({value:t},e)=>{if(ke(t)){if(e.props&&Pc(t,e.props.value)>-1)return{checked:!0}}else if(Ii(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},GS.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const s=KS(e.type.toUpperCase(),e.props&&e.props.type);if(s.getSSRProps)return s.getSSRProps(t,e)}}const sO=["ctrl","shift","alt","meta"],rO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>sO.some(s=>t[`${s}Key`]&&!e.includes(s))},gt=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<e.length;o++){const l=rO[e[o]];if(l&&l(n,e))return}return t(n,...i)})},nO={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},tc=(t,e)=>{const s=t._withKeys||(t._withKeys={}),r=e.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const i=xs(n.key);if(e.some(o=>o===i||nO[o]===i))return t(n)})},YS=Xe({patchProp:qN},TN);let Dl,A1=!1;function QS(){return Dl||(Dl=cS(YS))}function XS(){return Dl=A1?Dl:uS(YS),A1=!0,Dl}const JS=(...t)=>{QS().render(...t)},iO=(...t)=>{XS().hydrate(...t)},sc=(...t)=>{const e=QS().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=tE(r);if(!n)return;const i=e._component;!Le(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,eE(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e},ZS=(...t)=>{const e=XS().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=tE(r);if(n)return s(n,!0,eE(n))},e};function eE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function tE(t){return Fe(t)?document.querySelector(t):t}let P1=!1;const oO=()=>{P1||(P1=!0,tO(),PN())},aO=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:q2,BaseTransitionPropsValidators:Pg,Comment:Gt,DeprecationTypes:wN,EffectScope:_g,ErrorCodes:NL,ErrorTypeStrings:pN,Fragment:he,KeepAlive:nR,ReactiveEffect:Wl,Static:co,Suspense:QR,Teleport:md,Text:In,TrackOpTypes:IL,Transition:ma,TransitionGroup:YN,TriggerOpTypes:CL,VueElement:kh,assertNumber:RL,callWithAsyncErrorHandling:vr,callWithErrorHandling:Ma,camelize:At,capitalize:Ci,cloneVNode:en,compatUtils:bN,computed:_e,createApp:sc,createBlock:ts,createCommentVNode:W,createElementBlock:S,createElementVNode:a,createHydrationRenderer:uS,createPropsRestProxy:ER,createRenderer:cS,createSSRApp:ZS,createSlots:lR,createStaticVNode:kt,createTextVNode:re,createVNode:xe,customRef:C2,defineAsyncComponent:sR,defineComponent:Li,defineCustomElement:BS,defineEmits:fR,defineExpose:pR,defineModel:yR,defineOptions:mR,defineProps:hR,defineSSRCustomElement:jN,defineSlots:gR,devtools:mN,effect:K4,effectScope:bg,getCurrentInstance:ys,getCurrentScope:c2,getCurrentWatcher:AL,getTransitionRawChildren:_h,guardReactiveProps:kS,h:$a,handleError:Ao,hasInjectionContext:RR,hydrate:iO,hydrateOnIdle:QL,hydrateOnInteraction:eR,hydrateOnMediaQuery:ZL,hydrateOnVisible:JL,initCustomFormatter:dN,initDirectivesForSSR:oO,inject:Xs,isMemoSame:RS,isProxy:yh,isReactive:ai,isReadonly:pi,isRef:Kt,isRuntimeOnly:lN,isShallow:lr,isVNode:Rn,markRaw:k2,mergeDefaults:wR,mergeModels:SR,mergeProps:IS,nextTick:Po,normalizeClass:ye,normalizeProps:Zw,normalizeStyle:ct,onActivated:j2,onBeforeMount:Lg,onBeforeUnmount:Rc,onBeforeUpdate:Rg,onDeactivated:H2,onErrorCaptured:Y2,onMounted:br,onRenderTracked:K2,onRenderTriggered:G2,onScopeDispose:W4,onServerPrefetch:W2,onUnmounted:Ri,onUpdated:wh,onWatcherCleanup:P2,openBlock:b,popScopeId:UL,provide:Nl,proxyRefs:Ig,pushScopeId:$L,queuePostFlushCb:Yl,reactive:xi,readonly:kg,ref:Se,registerRuntimeCompiler:aN,render:JS,renderList:be,renderSlot:cR,resolveComponent:es,resolveDirective:aR,resolveDynamicComponent:Sh,resolveFilter:_N,resolveTransitionHooks:ha,setBlockTracking:rm,setDevtoolsHook:gN,setTransitionHooks:Ln,shallowReactive:Tg,shallowReadonly:pL,shallowRef:xc,ssrContextKey:pS,ssrUtils:vN,stop:Y4,toDisplayString:p,toHandlerKey:io,toHandlers:uR,toRaw:nt,toRef:EL,toRefs:bL,toValue:yL,transformVNodeArgs:sN,triggerRef:gL,unref:kn,useAttrs:bR,useCssModule:WN,useCssVars:xN,useHost:jS,useId:BL,useModel:jR,useSSRContext:mS,useShadowRoot:zN,useSlots:_R,useTemplateRef:jL,useTransitionState:Ag,vModelCheckbox:Ih,vModelDynamic:GS,vModelRadio:wn,vModelSelect:Js,vModelText:Ge,vShow:VS,version:NS,warn:fN,watch:fr,watchEffect:VR,watchPostEffect:qR,watchSyncEffect:gS,withAsyncContext:TR,withCtx:Qt,withDefaults:vR,withDirectives:Pe,withKeys:tc,withMemo:hN,withModifiers:gt,withScopeId:FL},Symbol.toStringTag,{value:"Module"})),tt=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},lO={name:"GlobalLoader",props:{visible:Boolean}},cO={key:0,class:"global-loader"};function uO(t,e,s,r,n,i){return s.visible?(b(),S("div",cO,e[0]||(e[0]=[a("div",{class:"spinner"},null,-1)]))):W("",!0)}const dO=tt(lO,[["render",uO],["__scopeId","data-v-6ce91e32"]]),hO={name:"App",components:{GlobalLoader:dO}},fO={id:"app"};function pO(t,e,s,r,n,i){const o=es("GlobalLoader"),l=es("router-view");return b(),S("div",fO,[t.$store.state.global.loading?(b(),ts(o,{key:0})):W("",!0),xe(l)])}const sE=tt(hO,[["render",pO]]),mO="modulepreload",gO=function(t){return"/"+t},x1={},mt=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let o=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(s.map(u=>{if(u=gO(u),u in x1)return;x1[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":mO,h||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function yO(){return rE().__VUE_DEVTOOLS_GLOBAL_HOOK__}function rE(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const vO=typeof Proxy=="function",_O="devtools-plugin:setup",bO="plugin:settings:set";let zo,hm;function wO(){var t;return zo!==void 0||(typeof window<"u"&&window.performance?(zo=!0,hm=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(zo=!0,hm=globalThis.perf_hooks.performance):zo=!1),zo}function SO(){return wO()?hm.now():Date.now()}class EO{constructor(e,s){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=s;const r={};if(e.settings)for(const o in e.settings){const l=e.settings[o];r[o]=l.defaultValue}const n=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(n),l=JSON.parse(o);Object.assign(i,l)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(n,JSON.stringify(o))}catch{}i=o},now(){return SO()}},s&&s.on(bO,(o,l)=>{o===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(o,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:l,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const s of this.onQueue)this.target.on[s.method](...s.args);for(const s of this.targetQueue)s.resolve(await this.target[s.method](...s.args))}}function TO(t,e){const s=t,r=rE(),n=yO(),i=vO&&s.enableEarlyProxy;if(n&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))n.emit(_O,t,e);else{const o=i?new EO(s,n):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:s,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Qo=typeof document<"u";function nE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function kO(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&nE(t.default)}const pt=Object.assign;function fp(t,e){const s={};for(const r in e){const n=e[r];s[r]=Rr(n)?n.map(t):t(n)}return s}const Ml=()=>{},Rr=Array.isArray,iE=/#/g,IO=/&/g,CO=/\//g,AO=/=/g,PO=/\?/g,oE=/\+/g,xO=/%5B/g,LO=/%5D/g,aE=/%5E/g,RO=/%60/g,lE=/%7B/g,NO=/%7C/g,cE=/%7D/g,OO=/%20/g;function Vg(t){return encodeURI(""+t).replace(NO,"|").replace(xO,"[").replace(LO,"]")}function DO(t){return Vg(t).replace(lE,"{").replace(cE,"}").replace(aE,"^")}function fm(t){return Vg(t).replace(oE,"%2B").replace(OO,"+").replace(iE,"%23").replace(IO,"%26").replace(RO,"`").replace(lE,"{").replace(cE,"}").replace(aE,"^")}function MO(t){return fm(t).replace(AO,"%3D")}function $O(t){return Vg(t).replace(iE,"%23").replace(PO,"%3F")}function UO(t){return t==null?"":$O(t).replace(CO,"%2F")}function rc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const FO=/\/$/,VO=t=>t.replace(FO,"");function pp(t,e,s="/"){let r,n={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),n=t(i)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=HO(r??e,s),{fullPath:r+(i&&"?")+i+o,path:r,query:n,hash:rc(o)}}function qO(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function L1(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function BO(t,e,s){const r=e.matched.length-1,n=s.matched.length-1;return r>-1&&r===n&&ya(e.matched[r],s.matched[n])&&uE(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function ya(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function uE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!jO(t[s],e[s]))return!1;return!0}function jO(t,e){return Rr(t)?R1(t,e):Rr(e)?R1(e,t):t===e}function R1(t,e){return Rr(e)?t.length===e.length&&t.every((s,r)=>s===e[r]):t.length===1&&t[0]===e}function HO(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),r=t.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=s.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var nc;(function(t){t.pop="pop",t.push="push"})(nc||(nc={}));var $l;(function(t){t.back="back",t.forward="forward",t.unknown=""})($l||($l={}));function zO(t){if(!t)if(Qo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),VO(t)}const WO=/^[^#]+#/;function GO(t,e){return t.replace(WO,"#")+e}function KO(t,e){const s=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-s.left-(e.left||0),top:r.top-s.top-(e.top||0)}}const Ch=()=>({left:window.scrollX,top:window.scrollY});function YO(t){let e;if("el"in t){const s=t.el,r=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=KO(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function N1(t,e){return(history.state?history.state.position-e:-1)+t}const pm=new Map;function QO(t,e){pm.set(t,e)}function XO(t){const e=pm.get(t);return pm.delete(t),e}let JO=()=>location.protocol+"//"+location.host;function dE(t,e){const{pathname:s,search:r,hash:n}=e,i=t.indexOf("#");if(i>-1){let l=n.includes(t.slice(i))?t.slice(i).length:1,c=n.slice(l);return c[0]!=="/"&&(c="/"+c),L1(c,"")}return L1(s,t)+r+n}function ZO(t,e,s,r){let n=[],i=[],o=null;const l=({state:m})=>{const g=dE(t,location),v=s.value,I=e.value;let C=0;if(m){if(s.value=g,e.value=m,o&&o===v){o=null;return}C=I?m.position-I.position:0}else r(g);n.forEach(U=>{U(s.value,v,{delta:C,type:nc.pop,direction:C?C>0?$l.forward:$l.back:$l.unknown})})};function c(){o=s.value}function u(m){n.push(m);const g=()=>{const v=n.indexOf(m);v>-1&&n.splice(v,1)};return i.push(g),g}function h(){const{history:m}=window;m.state&&m.replaceState(pt({},m.state,{scroll:Ch()}),"")}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function O1(t,e,s,r=!1,n=!1){return{back:t,current:e,forward:s,replaced:r,position:window.history.length,scroll:n?Ch():null}}function eD(t){const{history:e,location:s}=window,r={value:dE(t,s)},n={value:e.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=t.indexOf("#"),m=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+c:JO()+t+c;try{e[h?"replaceState":"pushState"](u,"",m),n.value=u}catch(g){console.error(g),s[h?"replace":"assign"](m)}}function o(c,u){const h=pt({},e.state,O1(n.value.back,c,n.value.forward,!0),u,{position:n.value.position});i(c,h,!0),r.value=c}function l(c,u){const h=pt({},n.value,e.state,{forward:c,scroll:Ch()});i(h.current,h,!0);const f=pt({},O1(r.value,c,null),{position:h.position+1},u);i(c,f,!1),r.value=c}return{location:r,state:n,push:l,replace:o}}function tD(t){t=zO(t);const e=eD(t),s=ZO(t,e.state,e.location,e.replace);function r(i,o=!0){o||s.pauseListeners(),history.go(i)}const n=pt({location:"",base:t,go:r,createHref:GO.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function sD(t){return typeof t=="string"||t&&typeof t=="object"}function hE(t){return typeof t=="string"||typeof t=="symbol"}const fE=Symbol("");var D1;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(D1||(D1={}));function va(t,e){return pt(new Error,{type:t,[fE]:!0},e)}function un(t,e){return t instanceof Error&&fE in t&&(e==null||!!(t.type&e))}const M1="[^/]+?",rD={sensitive:!1,strict:!1,start:!0,end:!0},nD=/[.+*?^${}()[\]/\\]/g;function iD(t,e){const s=pt({},rD,e),r=[];let n=s.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];s.strict&&!u.length&&(n+="/");for(let f=0;f<u.length;f++){const m=u[f];let g=40+(s.sensitive?.25:0);if(m.type===0)f||(n+="/"),n+=m.value.replace(nD,"\\$&"),g+=40;else if(m.type===1){const{value:v,repeatable:I,optional:C,regexp:U}=m;i.push({name:v,repeatable:I,optional:C});const D=U||M1;if(D!==M1){g+=10;try{new RegExp(`(${D})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${v}" (${D}): `+L.message)}}let E=I?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(E=C&&u.length<2?`(?:/${E})`:"/"+E),C&&(E+="?"),n+=E,g+=20,C&&(g+=-8),I&&(g+=-20),D===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(s.strict&&s.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function l(u){const h=u.match(o),f={};if(!h)return null;for(let m=1;m<h.length;m++){const g=h[m]||"",v=i[m-1];f[v.name]=g&&v.repeatable?g.split("/"):g}return f}function c(u){let h="",f=!1;for(const m of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of m)if(g.type===0)h+=g.value;else if(g.type===1){const{value:v,repeatable:I,optional:C}=g,U=v in u?u[v]:"";if(Rr(U)&&!I)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const D=Rr(U)?U.join("/"):U;if(!D)if(C)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:i,parse:l,stringify:c}}function oD(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=e[s]-t[s];if(r)return r;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function pE(t,e){let s=0;const r=t.score,n=e.score;for(;s<r.length&&s<n.length;){const i=oD(r[s],n[s]);if(i)return i;s++}if(Math.abs(n.length-r.length)===1){if($1(r))return 1;if($1(n))return-1}return n.length-r.length}function $1(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const aD={type:0,value:""},lD=/[a-zA-Z0-9_]/;function cD(t){if(!t)return[[]];if(t==="/")return[[aD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${s})/"${u}": ${g}`)}let s=0,r=s;const n=[];let i;function o(){i&&n.push(i),i=[]}let l=0,c,u="",h="";function f(){u&&(s===0?i.push({type:0,value:u}):s===1||s===2||s===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&s!==2){r=s,s=4;continue}switch(s){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),s=1):m();break;case 4:m(),s=r;break;case 1:c==="("?s=2:lD.test(c)?m():(f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:s=3:h+=c;break;case 3:f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),n}function uD(t,e,s){const r=iD(cD(t.path),s),n=pt(r,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function dD(t,e){const s=[],r=new Map;e=q1({strict:!1,end:!0,sensitive:!1},e);function n(f){return r.get(f)}function i(f,m,g){const v=!g,I=F1(f);I.aliasOf=g&&g.record;const C=q1(e,f),U=[I];if("alias"in f){const L=typeof f.alias=="string"?[f.alias]:f.alias;for(const $ of L)U.push(F1(pt({},I,{components:g?g.record.components:I.components,path:$,aliasOf:g?g.record:I})))}let D,E;for(const L of U){const{path:$}=L;if(m&&$[0]!=="/"){const M=m.record.path,A=M[M.length-1]==="/"?"":"/";L.path=m.record.path+($&&A+$)}if(D=uD(L,m,C),g?g.alias.push(D):(E=E||D,E!==D&&E.alias.push(D),v&&f.name&&!V1(D)&&o(f.name)),mE(D)&&c(D),I.children){const M=I.children;for(let A=0;A<M.length;A++)i(M[A],D,g&&g.children[A])}g=g||D}return E?()=>{o(E)}:Ml}function o(f){if(hE(f)){const m=r.get(f);m&&(r.delete(f),s.splice(s.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=s.indexOf(f);m>-1&&(s.splice(m,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return s}function c(f){const m=pD(f,s);s.splice(m,0,f),f.record.name&&!V1(f)&&r.set(f.record.name,f)}function u(f,m){let g,v={},I,C;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw va(1,{location:f});C=g.record.name,v=pt(U1(m.params,g.keys.filter(E=>!E.optional).concat(g.parent?g.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),f.params&&U1(f.params,g.keys.map(E=>E.name))),I=g.stringify(v)}else if(f.path!=null)I=f.path,g=s.find(E=>E.re.test(I)),g&&(v=g.parse(I),C=g.record.name);else{if(g=m.name?r.get(m.name):s.find(E=>E.re.test(m.path)),!g)throw va(1,{location:f,currentLocation:m});C=g.record.name,v=pt({},m.params,f.params),I=g.stringify(v)}const U=[];let D=g;for(;D;)U.unshift(D.record),D=D.parent;return{name:C,path:I,params:v,matched:U,meta:fD(U)}}t.forEach(f=>i(f));function h(){s.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:n}}function U1(t,e){const s={};for(const r of e)r in t&&(s[r]=t[r]);return s}function F1(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:hD(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function hD(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const r in t.components)e[r]=typeof s=="object"?s[r]:s;return e}function V1(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function fD(t){return t.reduce((e,s)=>pt(e,s.meta),{})}function q1(t,e){const s={};for(const r in t)s[r]=r in e?e[r]:t[r];return s}function pD(t,e){let s=0,r=e.length;for(;s!==r;){const i=s+r>>1;pE(t,e[i])<0?r=i:s=i+1}const n=mD(t);return n&&(r=e.lastIndexOf(n,r-1)),r}function mD(t){let e=t;for(;e=e.parent;)if(mE(e)&&pE(t,e)===0)return e}function mE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function gD(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(oE," "),o=i.indexOf("="),l=rc(o<0?i:i.slice(0,o)),c=o<0?null:rc(i.slice(o+1));if(l in e){let u=e[l];Rr(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function B1(t){let e="";for(let s in t){const r=t[s];if(s=MO(s),r==null){r!==void 0&&(e+=(e.length?"&":"")+s);continue}(Rr(r)?r.map(i=>i&&fm(i)):[r&&fm(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+s,i!=null&&(e+="="+i))})}return e}function yD(t){const e={};for(const s in t){const r=t[s];r!==void 0&&(e[s]=Rr(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return e}const vD=Symbol(""),j1=Symbol(""),Ah=Symbol(""),qg=Symbol(""),mm=Symbol("");function dl(){let t=[];function e(r){return t.push(r),()=>{const n=t.indexOf(r);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function ei(t,e,s,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(va(4,{from:s,to:e})):m instanceof Error?c(m):sD(m)?c(va(2,{from:e,to:m})):(o&&r.enterCallbacks[n]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>t.call(r&&r.instances[n],e,s,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(m=>c(m))})}function mp(t,e,s,r,n=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(nE(c)){const h=(c.__vccOpts||c)[e];h&&i.push(ei(h,s,r,o,l,n))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=kO(h)?h.default:h;o.mods[l]=h,o.components[l]=f;const g=(f.__vccOpts||f)[e];return g&&ei(g,s,r,o,l,n)()}))}}return i}function H1(t){const e=Xs(Ah),s=Xs(qg),r=_e(()=>{const c=kn(t.to);return e.resolve(c)}),n=_e(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=s.matched;if(!h||!f.length)return-1;const m=f.findIndex(ya.bind(null,h));if(m>-1)return m;const g=z1(c[u-2]);return u>1&&z1(h)===g&&f[f.length-1].path!==g?f.findIndex(ya.bind(null,c[u-2])):m}),i=_e(()=>n.value>-1&&ED(s.params,r.value.params)),o=_e(()=>n.value>-1&&n.value===s.matched.length-1&&uE(s.params,r.value.params));function l(c={}){if(SD(c)){const u=e[kn(t.replace)?"replace":"push"](kn(t.to)).catch(Ml);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:_e(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}function _D(t){return t.length===1?t[0]:t}const bD=Li({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:H1,setup(t,{slots:e}){const s=xi(H1(t)),{options:r}=Xs(Ah),n=_e(()=>({[W1(t.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[W1(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&_D(e.default(s));return t.custom?i:$a("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},i)}}}),wD=bD;function SD(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ED(t,e){for(const s in e){const r=e[s],n=t[s];if(typeof r=="string"){if(r!==n)return!1}else if(!Rr(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function z1(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const W1=(t,e,s)=>t??e??s,TD=Li({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const r=Xs(mm),n=_e(()=>t.route||r.value),i=Xs(j1,0),o=_e(()=>{let u=kn(i);const{matched:h}=n.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),l=_e(()=>n.value.matched[o.value]);Nl(j1,_e(()=>o.value+1)),Nl(vD,l),Nl(mm,n);const c=Se();return fr(()=>[c.value,l.value,t.name],([u,h,f],[m,g,v])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!ya(h,g)||!m)&&(h.enterCallbacks[f]||[]).forEach(I=>I(u))},{flush:"post"}),()=>{const u=n.value,h=t.name,f=l.value,m=f&&f.components[h];if(!m)return G1(s.default,{Component:m,route:u});const g=f.props[h],v=g?g===!0?u.params:typeof g=="function"?g(u):g:null,C=$a(m,pt({},v,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return G1(s.default,{Component:C,route:u})||C}}});function G1(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const kD=TD;function ID(t){const e=dD(t.routes,t),s=t.parseQuery||gD,r=t.stringifyQuery||B1,n=t.history,i=dl(),o=dl(),l=dl(),c=xc(Hn);let u=Hn;Qo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=fp.bind(null,se=>""+se),f=fp.bind(null,UO),m=fp.bind(null,rc);function g(se,we){let ge,Ee;return hE(se)?(ge=e.getRecordMatcher(se),Ee=we):Ee=se,e.addRoute(Ee,ge)}function v(se){const we=e.getRecordMatcher(se);we&&e.removeRoute(we)}function I(){return e.getRoutes().map(se=>se.record)}function C(se){return!!e.getRecordMatcher(se)}function U(se,we){if(we=pt({},we||c.value),typeof se=="string"){const T=pp(s,se,we.path),q=e.resolve({path:T.path},we),Q=n.createHref(T.fullPath);return pt(T,q,{params:m(q.params),hash:rc(T.hash),redirectedFrom:void 0,href:Q})}let ge;if(se.path!=null)ge=pt({},se,{path:pp(s,se.path,we.path).path});else{const T=pt({},se.params);for(const q in T)T[q]==null&&delete T[q];ge=pt({},se,{params:f(T)}),we.params=f(we.params)}const Ee=e.resolve(ge,we),ze=se.hash||"";Ee.params=h(m(Ee.params));const Je=qO(r,pt({},se,{hash:DO(ze),path:Ee.path})),B=n.createHref(Je);return pt({fullPath:Je,hash:ze,query:r===B1?yD(se.query):se.query||{}},Ee,{redirectedFrom:void 0,href:B})}function D(se){return typeof se=="string"?pp(s,se,c.value.path):pt({},se)}function E(se,we){if(u!==se)return va(8,{from:we,to:se})}function L(se){return A(se)}function $(se){return L(pt(D(se),{replace:!0}))}function M(se){const we=se.matched[se.matched.length-1];if(we&&we.redirect){const{redirect:ge}=we;let Ee=typeof ge=="function"?ge(se):ge;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=D(Ee):{path:Ee},Ee.params={}),pt({query:se.query,hash:se.hash,params:Ee.path!=null?{}:se.params},Ee)}}function A(se,we){const ge=u=U(se),Ee=c.value,ze=se.state,Je=se.force,B=se.replace===!0,T=M(ge);if(T)return A(pt(D(T),{state:typeof T=="object"?pt({},ze,T.state):ze,force:Je,replace:B}),we||ge);const q=ge;q.redirectedFrom=we;let Q;return!Je&&BO(r,Ee,ge)&&(Q=va(16,{to:q,from:Ee}),me(Ee,Ee,!0,!1)),(Q?Promise.resolve(Q):P(q,Ee)).catch(H=>un(H)?un(H,2)?H:vt(H):le(H,q,Ee)).then(H=>{if(H){if(un(H,2))return A(pt({replace:B},D(H.to),{state:typeof H.to=="object"?pt({},ze,H.to.state):ze,force:Je}),we||q)}else H=x(q,Ee,!0,B,ze);return R(q,Ee,H),H})}function w(se,we){const ge=E(se,we);return ge?Promise.reject(ge):Promise.resolve()}function _(se){const we=Rt.values().next().value;return we&&typeof we.runWithContext=="function"?we.runWithContext(se):se()}function P(se,we){let ge;const[Ee,ze,Je]=CD(se,we);ge=mp(Ee.reverse(),"beforeRouteLeave",se,we);for(const T of Ee)T.leaveGuards.forEach(q=>{ge.push(ei(q,se,we))});const B=w.bind(null,se,we);return ge.push(B),bt(ge).then(()=>{ge=[];for(const T of i.list())ge.push(ei(T,se,we));return ge.push(B),bt(ge)}).then(()=>{ge=mp(ze,"beforeRouteUpdate",se,we);for(const T of ze)T.updateGuards.forEach(q=>{ge.push(ei(q,se,we))});return ge.push(B),bt(ge)}).then(()=>{ge=[];for(const T of Je)if(T.beforeEnter)if(Rr(T.beforeEnter))for(const q of T.beforeEnter)ge.push(ei(q,se,we));else ge.push(ei(T.beforeEnter,se,we));return ge.push(B),bt(ge)}).then(()=>(se.matched.forEach(T=>T.enterCallbacks={}),ge=mp(Je,"beforeRouteEnter",se,we,_),ge.push(B),bt(ge))).then(()=>{ge=[];for(const T of o.list())ge.push(ei(T,se,we));return ge.push(B),bt(ge)}).catch(T=>un(T,8)?T:Promise.reject(T))}function R(se,we,ge){l.list().forEach(Ee=>_(()=>Ee(se,we,ge)))}function x(se,we,ge,Ee,ze){const Je=E(se,we);if(Je)return Je;const B=we===Hn,T=Qo?history.state:{};ge&&(Ee||B?n.replace(se.fullPath,pt({scroll:B&&T&&T.scroll},ze)):n.push(se.fullPath,ze)),c.value=se,me(se,we,ge,B),vt()}let N;function ue(){N||(N=n.listen((se,we,ge)=>{if(!_t.listening)return;const Ee=U(se),ze=M(Ee);if(ze){A(pt(ze,{replace:!0,force:!0}),Ee).catch(Ml);return}u=Ee;const Je=c.value;Qo&&QO(N1(Je.fullPath,ge.delta),Ch()),P(Ee,Je).catch(B=>un(B,12)?B:un(B,2)?(A(pt(D(B.to),{force:!0}),Ee).then(T=>{un(T,20)&&!ge.delta&&ge.type===nc.pop&&n.go(-1,!1)}).catch(Ml),Promise.reject()):(ge.delta&&n.go(-ge.delta,!1),le(B,Ee,Je))).then(B=>{B=B||x(Ee,Je,!1),B&&(ge.delta&&!un(B,8)?n.go(-ge.delta,!1):ge.type===nc.pop&&un(B,20)&&n.go(-1,!1)),R(Ee,Je,B)}).catch(Ml)}))}let de=dl(),ce=dl(),te;function le(se,we,ge){vt(se);const Ee=ce.list();return Ee.length?Ee.forEach(ze=>ze(se,we,ge)):console.error(se),Promise.reject(se)}function $e(){return te&&c.value!==Hn?Promise.resolve():new Promise((se,we)=>{de.add([se,we])})}function vt(se){return te||(te=!se,ue(),de.list().forEach(([we,ge])=>se?ge(se):we()),de.reset()),se}function me(se,we,ge,Ee){const{scrollBehavior:ze}=t;if(!Qo||!ze)return Promise.resolve();const Je=!ge&&XO(N1(se.fullPath,0))||(Ee||!ge)&&history.state&&history.state.scroll||null;return Po().then(()=>ze(se,we,Je)).then(B=>B&&YO(B)).catch(B=>le(B,se,we))}const Oe=se=>n.go(se);let Be;const Rt=new Set,_t={currentRoute:c,listening:!0,addRoute:g,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:I,resolve:U,options:t,push:L,replace:$,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:ce.add,isReady:$e,install(se){const we=this;se.component("RouterLink",wD),se.component("RouterView",kD),se.config.globalProperties.$router=we,Object.defineProperty(se.config.globalProperties,"$route",{enumerable:!0,get:()=>kn(c)}),Qo&&!Be&&c.value===Hn&&(Be=!0,L(n.location).catch(ze=>{}));const ge={};for(const ze in Hn)Object.defineProperty(ge,ze,{get:()=>c.value[ze],enumerable:!0});se.provide(Ah,we),se.provide(qg,Tg(ge)),se.provide(mm,c);const Ee=se.unmount;Rt.add(se),se.unmount=function(){Rt.delete(se),Rt.size<1&&(u=Hn,N&&N(),N=null,c.value=Hn,Be=!1,te=!1),Ee()}}};function bt(se){return se.reduce((we,ge)=>we.then(()=>_(ge)),Promise.resolve())}return _t}function CD(t,e){const s=[],r=[],n=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>ya(u,l))?r.push(l):s.push(l));const c=t.matched[o];c&&(e.matched.find(u=>ya(u,c))||n.push(c))}return[s,r,n]}function Ph(){return Xs(Ah)}function AD(t){return Xs(qg)}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var gE="store";function xh(t){return t===void 0&&(t=null),Xs(t!==null?t:gE)}function Ua(t,e){Object.keys(t).forEach(function(s){return e(t[s],s)})}function yE(t){return t!==null&&typeof t=="object"}function PD(t){return t&&typeof t.then=="function"}function xD(t,e){return function(){return t(e)}}function vE(t,e,s){return e.indexOf(t)<0&&(s&&s.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function _E(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var s=t.state;Lh(t,s,[],t._modules.root,!0),Bg(t,s,e)}function Bg(t,e,s){var r=t._state,n=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},l={},c=bg(!0);c.run(function(){Ua(i,function(u,h){o[h]=xD(u,t),l[h]=_e(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return l[h].value},enumerable:!0})})}),t._state=xi({data:e}),t._scope=c,t.strict&&DD(t),r&&s&&t._withCommit(function(){r.data=null}),n&&n.stop()}function Lh(t,e,s,r,n){var i=!s.length,o=t._modules.getNamespace(s);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!n){var l=jg(e,s.slice(0,-1)),c=s[s.length-1];t._withCommit(function(){l[c]=r.state})}var u=r.context=LD(t,o,s);r.forEachMutation(function(h,f){var m=o+f;RD(t,m,h,u)}),r.forEachAction(function(h,f){var m=h.root?f:o+f,g=h.handler||h;ND(t,m,g,u)}),r.forEachGetter(function(h,f){var m=o+f;OD(t,m,h,u)}),r.forEachChild(function(h,f){Lh(t,e,s.concat(f),h,n)})}function LD(t,e,s){var r=e==="",n={dispatch:r?t.dispatch:function(i,o,l){var c=Td(i,o,l),u=c.payload,h=c.options,f=c.type;return(!h||!h.root)&&(f=e+f),t.dispatch(f,u)},commit:r?t.commit:function(i,o,l){var c=Td(i,o,l),u=c.payload,h=c.options,f=c.type;(!h||!h.root)&&(f=e+f),t.commit(f,u,h)}};return Object.defineProperties(n,{getters:{get:r?function(){return t.getters}:function(){return bE(t,e)}},state:{get:function(){return jg(t.state,s)}}}),n}function bE(t,e){if(!t._makeLocalGettersCache[e]){var s={},r=e.length;Object.keys(t.getters).forEach(function(n){if(n.slice(0,r)===e){var i=n.slice(r);Object.defineProperty(s,i,{get:function(){return t.getters[n]},enumerable:!0})}}),t._makeLocalGettersCache[e]=s}return t._makeLocalGettersCache[e]}function RD(t,e,s,r){var n=t._mutations[e]||(t._mutations[e]=[]);n.push(function(o){s.call(t,r.state,o)})}function ND(t,e,s,r){var n=t._actions[e]||(t._actions[e]=[]);n.push(function(o){var l=s.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return PD(l)||(l=Promise.resolve(l)),t._devtoolHook?l.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):l})}function OD(t,e,s,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return s(r.state,r.getters,i.state,i.getters)})}function DD(t){fr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function jg(t,e){return e.reduce(function(s,r){return s[r]},t)}function Td(t,e,s){return yE(t)&&t.type&&(s=e,e=t,t=t.type),{type:t,payload:e,options:s}}var MD="vuex bindings",K1="vuex:mutations",gp="vuex:actions",Wo="vuex",$D=0;function UD(t,e){TO({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[MD]},function(s){s.addTimelineLayer({id:K1,label:"Vuex Mutations",color:Y1}),s.addTimelineLayer({id:gp,label:"Vuex Actions",color:Y1}),s.addInspector({id:Wo,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),s.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Wo)if(r.filter){var n=[];TE(n,e._modules.root,r.filter,""),r.rootNodes=n}else r.rootNodes=[EE(e._modules.root,"")]}),s.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Wo){var n=r.nodeId;bE(e,n),r.state=qD(jD(e._modules,n),n==="root"?e.getters:e._makeLocalGettersCache,n)}}),s.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Wo){var n=r.nodeId,i=r.path;n!=="root"&&(i=n.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,n){var i={};r.payload&&(i.payload=r.payload),i.state=n,s.notifyComponentUpdate(),s.sendInspectorTree(Wo),s.sendInspectorState(Wo),s.addTimelineEvent({layerId:K1,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,n){var i={};r.payload&&(i.payload=r.payload),r._id=$D++,r._time=Date.now(),i.state=n,s.addTimelineEvent({layerId:gp,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,n){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=n,s.addTimelineEvent({layerId:gp,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var Y1=8702998,FD=6710886,VD=16777215,wE={label:"namespaced",textColor:VD,backgroundColor:FD};function SE(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function EE(t,e){return{id:e||"root",label:SE(e),tags:t.namespaced?[wE]:[],children:Object.keys(t._children).map(function(s){return EE(t._children[s],e+s+"/")})}}function TE(t,e,s,r){r.includes(s)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[wE]:[]}),Object.keys(e._children).forEach(function(n){TE(t,e._children[n],s,r+n+"/")})}function qD(t,e,s){e=s==="root"?e:e[s];var r=Object.keys(e),n={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=BD(e);n.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?SE(o):o,editable:!1,value:gm(function(){return i[o]})}})}return n}function BD(t){var e={};return Object.keys(t).forEach(function(s){var r=s.split("/");if(r.length>1){var n=e,i=r.pop();r.forEach(function(o){n[o]||(n[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),n=n[o]._custom.value}),n[i]=gm(function(){return t[s]})}else e[s]=gm(function(){return t[s]})}),e}function jD(t,e){var s=e.split("/").filter(function(r){return r});return s.reduce(function(r,n,i){var o=r[n];if(!o)throw new Error('Missing module "'+n+'" for path "'+e+'".');return i===s.length-1?o:o._children},e==="root"?t:t.root._children)}function gm(t){try{return t()}catch(e){return e}}var Or=function(e,s){this.runtime=s,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},kE={namespaced:{configurable:!0}};kE.namespaced.get=function(){return!!this._rawModule.namespaced};Or.prototype.addChild=function(e,s){this._children[e]=s};Or.prototype.removeChild=function(e){delete this._children[e]};Or.prototype.getChild=function(e){return this._children[e]};Or.prototype.hasChild=function(e){return e in this._children};Or.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Or.prototype.forEachChild=function(e){Ua(this._children,e)};Or.prototype.forEachGetter=function(e){this._rawModule.getters&&Ua(this._rawModule.getters,e)};Or.prototype.forEachAction=function(e){this._rawModule.actions&&Ua(this._rawModule.actions,e)};Or.prototype.forEachMutation=function(e){this._rawModule.mutations&&Ua(this._rawModule.mutations,e)};Object.defineProperties(Or.prototype,kE);var xo=function(e){this.register([],e,!1)};xo.prototype.get=function(e){return e.reduce(function(s,r){return s.getChild(r)},this.root)};xo.prototype.getNamespace=function(e){var s=this.root;return e.reduce(function(r,n){return s=s.getChild(n),r+(s.namespaced?n+"/":"")},"")};xo.prototype.update=function(e){IE([],this.root,e)};xo.prototype.register=function(e,s,r){var n=this;r===void 0&&(r=!0);var i=new Or(s,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}s.modules&&Ua(s.modules,function(l,c){n.register(e.concat(c),l,r)})};xo.prototype.unregister=function(e){var s=this.get(e.slice(0,-1)),r=e[e.length-1],n=s.getChild(r);n&&n.runtime&&s.removeChild(r)};xo.prototype.isRegistered=function(e){var s=this.get(e.slice(0,-1)),r=e[e.length-1];return s?s.hasChild(r):!1};function IE(t,e,s){if(e.update(s),s.modules)for(var r in s.modules){if(!e.getChild(r))return;IE(t.concat(r),e.getChild(r),s.modules[r])}}function HD(t){return new sr(t)}var sr=function(e){var s=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var n=e.strict;n===void 0&&(n=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new xo(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,l=this,c=l.dispatch,u=l.commit;this.dispatch=function(m,g){return c.call(o,m,g)},this.commit=function(m,g,v){return u.call(o,m,g,v)},this.strict=n;var h=this._modules.root.state;Lh(this,h,[],this._modules.root),Bg(this,h),r.forEach(function(f){return f(s)})},Hg={state:{configurable:!0}};sr.prototype.install=function(e,s){e.provide(s||gE,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&UD(e,this)};Hg.state.get=function(){return this._state.data};Hg.state.set=function(t){};sr.prototype.commit=function(e,s,r){var n=this,i=Td(e,s,r),o=i.type,l=i.payload,c={type:o,payload:l},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(f){f(l)})}),this._subscribers.slice().forEach(function(h){return h(c,n.state)}))};sr.prototype.dispatch=function(e,s){var r=this,n=Td(e,s),i=n.type,o=n.payload,l={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(l,r.state)})}catch{}var u=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,f){u.then(function(m){try{r._actionSubscribers.filter(function(g){return g.after}).forEach(function(g){return g.after(l,r.state)})}catch{}h(m)},function(m){try{r._actionSubscribers.filter(function(g){return g.error}).forEach(function(g){return g.error(l,r.state,m)})}catch{}f(m)})})}};sr.prototype.subscribe=function(e,s){return vE(e,this._subscribers,s)};sr.prototype.subscribeAction=function(e,s){var r=typeof e=="function"?{before:e}:e;return vE(r,this._actionSubscribers,s)};sr.prototype.watch=function(e,s,r){var n=this;return fr(function(){return e(n.state,n.getters)},s,Object.assign({},r))};sr.prototype.replaceState=function(e){var s=this;this._withCommit(function(){s._state.data=e})};sr.prototype.registerModule=function(e,s,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,s),Lh(this,this.state,e,this._modules.get(e),r.preserveState),Bg(this,this.state)};sr.prototype.unregisterModule=function(e){var s=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=jg(s.state,e.slice(0,-1));delete r[e[e.length-1]]}),_E(this)};sr.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};sr.prototype.hotUpdate=function(e){this._modules.update(e),_E(this,!0)};sr.prototype._withCommit=function(e){var s=this._committing;this._committing=!0,e(),this._committing=s};Object.defineProperties(sr.prototype,Hg);var zg=Nh(function(t,e){var s={};return Rh(e).forEach(function(r){var n=r.key,i=r.val;s[n]=function(){var l=this.$store.state,c=this.$store.getters;if(t){var u=Oh(this.$store,"mapState",t);if(!u)return;l=u.context.state,c=u.context.getters}return typeof i=="function"?i.call(this,l,c):l[i]},s[n].vuex=!0}),s}),CE=Nh(function(t,e){var s={};return Rh(e).forEach(function(r){var n=r.key,i=r.val;s[n]=function(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];var u=this.$store.commit;if(t){var h=Oh(this.$store,"mapMutations",t);if(!h)return;u=h.context.commit}return typeof i=="function"?i.apply(this,[u].concat(l)):u.apply(this.$store,[i].concat(l))}}),s}),tn=Nh(function(t,e){var s={};return Rh(e).forEach(function(r){var n=r.key,i=r.val;i=t+i,s[n]=function(){if(!(t&&!Oh(this.$store,"mapGetters",t)))return this.$store.getters[i]},s[n].vuex=!0}),s}),zD=Nh(function(t,e){var s={};return Rh(e).forEach(function(r){var n=r.key,i=r.val;s[n]=function(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];var u=this.$store.dispatch;if(t){var h=Oh(this.$store,"mapActions",t);if(!h)return;u=h.context.dispatch}return typeof i=="function"?i.apply(this,[u].concat(l)):u.apply(this.$store,[i].concat(l))}}),s});function Rh(t){return WD(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function WD(t){return Array.isArray(t)||yE(t)}function Nh(t){return function(e,s){return typeof e!="string"?(s=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,s)}}function Oh(t,e,s){var r=t._modulesNamespaceMap[s];return r}const GD={namespaced:!0,state:()=>({loading:!1}),mutations:{setLoading(t,e){t.loading=e}},getters:{isLoading:t=>t.loading}},KD={namespaced:!0,state:{learningMode:localStorage.getItem("learningMode")||"study_centre",schoolProfile:{placementTestTaken:!1,placementTestDate:null,placementTestScore:null,assignedLevel:null,currentGrade:null,currentLevelCap:1,progressLocked:!0,accessibleLevels:[1],lockedLevels:[],completedLevels:[],mandatoryCourses:[],curriculum:"standard",minPassingScore:70},studyCentreProfile:{explorationHistory:[],bookmarkedCourses:[],personalPaths:[],preferences:{showAllLevels:!0,allowJumping:!0,explorationMode:!0}},modeHistory:[],levelGradeMapping:{1:"A1",2:"A1",3:"A1",4:"A2",5:"A2",6:"A2",7:"B1",8:"B1",9:"B1",10:"B2",11:"B2",12:"B2",13:"C1",14:"C1",15:"C1",16:"C2",17:"C2",18:"C2",19:"Expert",20:"Master"}},mutations:{SET_LEARNING_MODE(t,e){t.learningMode=e,localStorage.setItem("learningMode",e)},SET_SCHOOL_PROFILE(t,e){t.schoolProfile={...t.schoolProfile,...e},localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},SET_STUDY_CENTRE_PROFILE(t,e){t.studyCentreProfile={...t.studyCentreProfile,...e},localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},SET_PLACEMENT_TEST_TAKEN(t,e){t.schoolProfile.placementTestTaken=e,localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},SET_PLACEMENT_TEST_RESULTS(t,e){t.schoolProfile.placementTestDate=new Date().toISOString(),t.schoolProfile.placementTestScore=e.overallScore,t.schoolProfile.assignedLevel=e.level,t.schoolProfile.currentGrade=t.levelGradeMapping[e.level],t.schoolProfile.currentLevelCap=e.level,t.schoolProfile.accessibleLevels=Array.from({length:e.level},(s,r)=>r+1),localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},UNLOCK_LEVEL(t,e){t.schoolProfile.accessibleLevels.includes(e)||(t.schoolProfile.accessibleLevels.push(e),t.schoolProfile.accessibleLevels.sort((r,n)=>r-n));const s=t.schoolProfile.lockedLevels.indexOf(e);s>-1&&t.schoolProfile.lockedLevels.splice(s,1),e>t.schoolProfile.currentLevelCap&&(t.schoolProfile.currentLevelCap=e),localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},COMPLETE_LEVEL(t,{level:e,score:s,certificate:r}){const n={level:e,completedDate:new Date().toISOString(),finalScore:s,certificate:r,unlockedNext:[e+1]};t.schoolProfile.completedLevels.push(n),e+1<=20&&(t.schoolProfile.accessibleLevels.push(e+1),t.schoolProfile.currentLevelCap=e+1,t.schoolProfile.currentGrade=t.levelGradeMapping[e+1]),localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},ADD_TO_EXPLORATION_HISTORY(t,e){t.studyCentreProfile.explorationHistory.push({...e,accessedAt:new Date().toISOString()}),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},ADD_BOOKMARK(t,{courseId:e,notes:s}){t.studyCentreProfile.bookmarkedCourses.push({courseId:e,notes:s,bookmarkedAt:new Date().toISOString()}),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},REMOVE_BOOKMARK(t,e){t.studyCentreProfile.bookmarkedCourses=t.studyCentreProfile.bookmarkedCourses.filter(s=>s.courseId!==e),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},CREATE_PERSONAL_PATH(t,e){t.studyCentreProfile.personalPaths.push({...e,createdAt:new Date().toISOString(),progress:0}),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},ADD_MODE_HISTORY(t,{fromMode:e,toMode:s,reason:r}){t.modeHistory.push({fromMode:e,toMode:s,switchedAt:new Date().toISOString(),reason:r})},LOAD_FROM_LOCALSTORAGE(t){try{const e=localStorage.getItem("learningMode"),s=JSON.parse(localStorage.getItem("schoolProfile")||"{}"),r=JSON.parse(localStorage.getItem("studyCentreProfile")||"{}");e&&(t.learningMode=e),Object.keys(s).length>0&&(t.schoolProfile={...t.schoolProfile,...s}),Object.keys(r).length>0&&(t.studyCentreProfile={...t.studyCentreProfile,...r})}catch{}},RESET_PLATFORM_MODE(t){t.learningMode=null,t.schoolProfile={placementTestTaken:!1,placementTestDate:null,placementTestScore:null,assignedLevel:null,currentGrade:null,currentLevelCap:1,progressLocked:!0,accessibleLevels:[1],lockedLevels:[],completedLevels:[],mandatoryCourses:[],curriculum:"standard",minPassingScore:70},t.studyCentreProfile={explorationHistory:[],bookmarkedCourses:[],personalPaths:[],preferences:{showAllLevels:!0,allowJumping:!0,explorationMode:!0}},localStorage.removeItem("learningMode"),localStorage.removeItem("schoolProfile"),localStorage.removeItem("studyCentreProfile")}},actions:{async switchMode({commit:t,state:e},{newMode:s,reason:r=""}){const n=e.learningMode;return t("ADD_MODE_HISTORY",{fromMode:n,toMode:s,reason:r}),t("SET_LEARNING_MODE",s),s==="school"?t("SET_SCHOOL_PROFILE",{progressLocked:!0}):s==="study_centre"&&t("SET_STUDY_CENTRE_PROFILE",{preferences:{...e.studyCentreProfile.preferences,showAllLevels:!0}}),{success:!0,newMode:s}},setPlacementTestResults({commit:t},e){t("SET_PLACEMENT_TEST_TAKEN",!0),t("SET_PLACEMENT_TEST_RESULTS",e)},unlockLevel({commit:t},e){t("UNLOCK_LEVEL",e)},completeLevel({commit:t},e){t("COMPLETE_LEVEL",e)},addToExplorationHistory({commit:t},e){t("ADD_TO_EXPLORATION_HISTORY",e)},addBookmark({commit:t},e){t("ADD_BOOKMARK",e)},removeBookmark({commit:t},e){t("REMOVE_BOOKMARK",e)},createPersonalPath({commit:t},e){t("CREATE_PERSONAL_PATH",e)},loadFromLocalStorage({commit:t}){t("LOAD_FROM_LOCALSTORAGE")},resetPlatformMode({commit:t}){t("RESET_PLATFORM_MODE")}},getters:{learningMode:t=>t.learningMode,isSchoolMode:t=>t.learningMode==="school",isStudyCentreMode:t=>t.learningMode==="study_centre",isHybridMode:t=>t.learningMode==="hybrid",hasSelectedMode:t=>t.learningMode!==null,schoolProfile:t=>t.schoolProfile,studyCentreProfile:t=>t.studyCentreProfile,currentGrade:t=>t.schoolProfile.currentGrade,currentLevelCap:t=>t.schoolProfile.currentLevelCap,accessibleLevels:t=>t.schoolProfile.accessibleLevels,placementTestTaken:t=>t.schoolProfile.placementTestTaken,placementTestResults:t=>({score:t.schoolProfile.placementTestScore,level:t.schoolProfile.assignedLevel,grade:t.schoolProfile.currentGrade,date:t.schoolProfile.placementTestDate}),canAccessLevel:t=>e=>{if(t.learningMode==="study_centre")return!0;if(t.learningMode==="school"){const s=t.schoolProfile.accessibleLevels.includes(e),r=!t.schoolProfile.lockedLevels.includes(e),n=e<=t.schoolProfile.currentLevelCap;return s||r&&n}return t.studyCentreProfile.preferences.showAllLevels||t.schoolProfile.accessibleLevels.includes(e)},isLevelCompleted:t=>e=>t.schoolProfile.completedLevels.some(s=>s.level===e),nextUnlockableLevel:t=>t.learningMode==="study_centre"?null:t.schoolProfile.currentLevelCap+1,levelProgress:t=>{const s=t.schoolProfile.completedLevels.length;return Math.round(s/20*100)},bookmarkedCourses:t=>t.studyCentreProfile.bookmarkedCourses,isBookmarked:t=>e=>t.studyCentreProfile.bookmarkedCourses.some(s=>s.courseId===e),personalPaths:t=>t.studyCentreProfile.personalPaths,modeHistory:t=>t.modeHistory,getLevelGrade:t=>e=>t.levelGradeMapping[e]||"Unknown"}},YD=()=>{};var Q1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e[s++]=n:n<2048?(e[s++]=n>>6|192,e[s++]=n&63|128):(n&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=n>>18|240,e[s++]=n>>12&63|128,e[s++]=n>>6&63|128,e[s++]=n&63|128):(e[s++]=n>>12|224,e[s++]=n>>6&63|128,e[s++]=n&63|128)}return e},QD=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const n=t[s++];if(n<128)e[r++]=String.fromCharCode(n);else if(n>191&&n<224){const i=t[s++];e[r++]=String.fromCharCode((n&31)<<6|i&63)}else if(n>239&&n<365){const i=t[s++],o=t[s++],l=t[s++],c=((n&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[s++],o=t[s++];e[r++]=String.fromCharCode((n&15)<<12|(i&63)<<6|o&63)}}return e.join("")},PE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<t.length;n+=3){const i=t[n],o=n+1<t.length,l=o?t[n+1]:0,c=n+2<t.length,u=c?t[n+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(s[h],s[f],s[m],s[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<t.length;){const i=s[t.charAt(n++)],l=n<t.length?s[t.charAt(n)]:0;++n;const u=n<t.length?s[t.charAt(n)]:64;++n;const f=n<t.length?s[t.charAt(n)]:64;if(++n,i==null||l==null||u==null||f==null)throw new XD;const m=i<<2|l>>4;if(r.push(m),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JD=function(t){const e=AE(t);return PE.encodeByteArray(e,!0)},kd=function(t){return JD(t).replace(/\./g,"")},xE=function(t){try{return PE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=()=>ZD().__FIREBASE_DEFAULTS__,tM=()=>{if(typeof process>"u"||typeof Q1>"u")return;const t=Q1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xE(t[1]);return e&&JSON.parse(e)},Dh=()=>{try{return YD()||eM()||tM()||sM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LE=t=>{var e,s;return(s=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},rM=t=>{const e=LE(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},RE=()=>{var t;return(t=Dh())===null||t===void 0?void 0:t.config},NE=t=>{var e;return(e=Dh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",n=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kd(JSON.stringify(s)),kd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Os())}function aM(){var t;const e=(t=Dh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uM(){const t=Os();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dM(){return!aM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gg(){try{return typeof indexedDB=="object"}catch{return!1}}function Kg(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},n.onupgradeneeded=()=>{s=!1},n.onerror=()=>{var i;e(((i=n.error)===null||i===void 0?void 0:i.message)||"")}}catch(s){e(s)}})}function OE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="FirebaseError";class Dr extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=hM,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},n=`${this.service}/${e}`,i=this.errors[e],o=i?fM(i,r):"Error",l=`${this.serviceName}: ${o} (${n}).`;return new Dr(n,l,r)}}function fM(t,e){return t.replace(pM,(s,r)=>{const n=e[r];return n!=null?String(n):`<${r}?>`})}const pM=/\{\$([^}]+)}/g;function mM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gi(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const n of s){if(!r.includes(n))return!1;const i=t[n],o=e[n];if(X1(i)&&X1(o)){if(!gi(i,o))return!1}else if(i!==o)return!1}for(const n of r)if(!s.includes(n))return!1;return!0}function X1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(n=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _l(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[n,i]=r.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}}),e}function bl(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function gM(t,e){const s=new yM(t,e);return s.subscribe.bind(s)}class yM{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let n;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");vM(e,["next","error","complete"])?n=e:n={next:e,error:s,complete:r},n.next===void 0&&(n.next=yp),n.error===void 0&&(n.error=yp),n.complete===void 0&&(n.complete=yp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vM(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function yp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=1e3,bM=2,wM=4*60*60*1e3,SM=.5;function J1(t,e=_M,s=bM){const r=e*Math.pow(s,t),n=Math.round(SM*r*(Math.random()-.5)*2);return Math.min(wM,r+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){return t.endsWith(".cloudworkstations.dev")}async function DE(t){return(await fetch(t,{credentials:"include"})).ok}class Nr{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new nM;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:s});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kM(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:n});r.resolve(i)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(n)}return n}onInit(e,s){var r;const n=this.normalizeInstanceIdentifier(s),i=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const n of r)try{n(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TM(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TM(t){return t===Wi?void 0:t}function kM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new EM(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const CM={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},AM=Ze.INFO,PM={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},xM=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),n=PM[e];if(n)console[n](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $h{constructor(e){this.name=e,this._logLevel=AM,this._logHandler=xM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const LM=(t,e)=>e.some(s=>t instanceof s);let Z1,e_;function RM(){return Z1||(Z1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NM(){return e_||(e_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,ym=new WeakMap,$E=new WeakMap,vp=new WeakMap,Yg=new WeakMap;function OM(t){const e=new Promise((s,r)=>{const n=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{s(ci(t.result)),n()},o=()=>{r(t.error),n()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(s=>{s instanceof IDBCursor&&ME.set(s,t)}).catch(()=>{}),Yg.set(e,t),e}function DM(t){if(ym.has(t))return;const e=new Promise((s,r)=>{const n=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{s(),n()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ym.set(t,e)}let vm={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return ym.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$E.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ci(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MM(t){vm=t(vm)}function $M(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(_p(this),e,...s);return $E.set(r,e.sort?e.sort():[e]),ci(r)}:NM().includes(t)?function(...e){return t.apply(_p(this),e),ci(ME.get(this))}:function(...e){return ci(t.apply(_p(this),e))}}function UM(t){return typeof t=="function"?$M(t):(t instanceof IDBTransaction&&DM(t),LM(t,RM())?new Proxy(t,vm):t)}function ci(t){if(t instanceof IDBRequest)return OM(t);if(vp.has(t))return vp.get(t);const e=UM(t);return e!==t&&(vp.set(t,e),Yg.set(e,t)),e}const _p=t=>Yg.get(t);function UE(t,e,{blocked:s,upgrade:r,blocking:n,terminated:i}={}){const o=indexedDB.open(t,e),l=ci(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ci(o.result),c.oldVersion,c.newVersion,ci(o.transaction),c)}),s&&o.addEventListener("blocked",c=>s(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),n&&c.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const FM=["get","getKey","getAll","getAllKeys","count"],VM=["put","add","delete","clear"],bp=new Map;function t_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,n=VM.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(n||FM.includes(s)))return;const i=async function(o,...l){const c=this.transaction(o,n?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[s](...l),n&&c.done]))[0]};return bp.set(e,i),i}MM(t=>({...t,get:(e,s,r)=>t_(e,s)||t.get(e,s,r),has:(e,s)=>!!t_(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(BM(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function BM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _m="@firebase/app",s_="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new $h("@firebase/app"),jM="@firebase/app-compat",HM="@firebase/analytics-compat",zM="@firebase/analytics",WM="@firebase/app-check-compat",GM="@firebase/app-check",KM="@firebase/auth",YM="@firebase/auth-compat",QM="@firebase/database",XM="@firebase/data-connect",JM="@firebase/database-compat",ZM="@firebase/functions",e3="@firebase/functions-compat",t3="@firebase/installations",s3="@firebase/installations-compat",r3="@firebase/messaging",n3="@firebase/messaging-compat",i3="@firebase/performance",o3="@firebase/performance-compat",a3="@firebase/remote-config",l3="@firebase/remote-config-compat",c3="@firebase/storage",u3="@firebase/storage-compat",d3="@firebase/firestore",h3="@firebase/vertexai",f3="@firebase/firestore-compat",p3="firebase",m3="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="[DEFAULT]",g3={[_m]:"fire-core",[jM]:"fire-core-compat",[zM]:"fire-analytics",[HM]:"fire-analytics-compat",[GM]:"fire-app-check",[WM]:"fire-app-check-compat",[KM]:"fire-auth",[YM]:"fire-auth-compat",[QM]:"fire-rtdb",[XM]:"fire-data-connect",[JM]:"fire-rtdb-compat",[ZM]:"fire-fn",[e3]:"fire-fn-compat",[t3]:"fire-iid",[s3]:"fire-iid-compat",[r3]:"fire-fcm",[n3]:"fire-fcm-compat",[i3]:"fire-perf",[o3]:"fire-perf-compat",[a3]:"fire-rc",[l3]:"fire-rc-compat",[c3]:"fire-gcs",[u3]:"fire-gcs-compat",[d3]:"fire-fst",[f3]:"fire-fst-compat",[h3]:"fire-vertex","fire-js":"fire-js",[p3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map,y3=new Map,wm=new Map;function r_(t,e){try{t.container.addComponent(e)}catch(s){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function sn(t){const e=t.name;if(wm.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;wm.set(e,t);for(const s of Id.values())r_(s,t);for(const s of y3.values())r_(s,t);return!0}function Ro(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function Ys(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Lo("app","Firebase",v3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=m3;function FE(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bm,automaticDataCollectionEnabled:!1},e),n=r.name;if(typeof n!="string"||!n)throw ui.create("bad-app-name",{appName:String(n)});if(s||(s=RE()),!s)throw ui.create("no-options");const i=Id.get(n);if(i){if(gi(s,i.options)&&gi(r,i.config))return i;throw ui.create("duplicate-app",{appName:n})}const o=new IM(n);for(const c of wm.values())o.addComponent(c);const l=new _3(s,r,o);return Id.set(n,l),l}function Qg(t=bm){const e=Id.get(t);if(!e&&t===bm&&RE())return FE();if(!e)throw ui.create("no-app",{appName:t});return e}function mr(t,e,s){var r;let n=(r=g3[t])!==null&&r!==void 0?r:t;s&&(n+=`-${s}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${n}" with version "${e}":`];i&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(l.join(" "));return}sn(new Nr(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="firebase-heartbeat-database",w3=1,ic="firebase-heartbeat-store";let wp=null;function VE(){return wp||(wp=UE(b3,w3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ic)}catch(s){console.warn(s)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),wp}async function S3(t){try{const s=(await VE()).transaction(ic),r=await s.objectStore(ic).get(qE(t));return await s.done,r}catch(e){if(e instanceof Dr)Nn.warn(e.message);else{const s=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(s.message)}}}async function n_(t,e){try{const r=(await VE()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,qE(t)),await r.done}catch(s){if(s instanceof Dr)Nn.warn(s.message);else{const r=ui.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Nn.warn(r.message)}}}function qE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=1024,T3=30;class k3{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new C3(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=i_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>T3){const o=A3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=i_(),{heartbeatsToSend:r,unsentEntries:n}=I3(this._heartbeatsCache.heartbeats),i=kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return Nn.warn(s),""}}}function i_(){return new Date().toISOString().substring(0,10)}function I3(t,e=E3){const s=[];let r=t.slice();for(const n of t){const i=s.find(o=>o.agent===n.agent);if(i){if(i.dates.push(n.date),o_(s)>e){i.dates.pop();break}}else if(s.push({agent:n.agent,dates:[n.date]}),o_(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class C3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gg()?Kg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await S3(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const n=await this.read();return n_(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const n=await this.read();return n_(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function o_(t){return kd(JSON.stringify({version:2,heartbeats:t})).length}function A3(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let r=1;r<t.length;r++)t[r].date<s&&(s=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){sn(new Nr("platform-logger",e=>new qM(e),"PRIVATE")),sn(new Nr("heartbeat",e=>new k3(e),"PRIVATE")),mr(_m,s_,t),mr(_m,s_,"esm2017"),mr("fire-js","")}P3("");var x3="firebase",L3="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(x3,L3,"app");var a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,BE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,w){function _(){}_.prototype=w.prototype,A.D=w.prototype,A.prototype=new _,A.prototype.constructor=A,A.C=function(P,R,x){for(var N=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)N[ue-2]=arguments[ue];return w.prototype[R].apply(P,N)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(A,w,_){_||(_=0);var P=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)P[R]=w.charCodeAt(_++)|w.charCodeAt(_++)<<8|w.charCodeAt(_++)<<16|w.charCodeAt(_++)<<24;else for(R=0;16>R;++R)P[R]=w[_++]|w[_++]<<8|w[_++]<<16|w[_++]<<24;w=A.g[0],_=A.g[1],R=A.g[2];var x=A.g[3],N=w+(x^_&(R^x))+P[0]+3614090360&4294967295;w=_+(N<<7&4294967295|N>>>25),N=x+(R^w&(_^R))+P[1]+3905402710&4294967295,x=w+(N<<12&4294967295|N>>>20),N=R+(_^x&(w^_))+P[2]+606105819&4294967295,R=x+(N<<17&4294967295|N>>>15),N=_+(w^R&(x^w))+P[3]+3250441966&4294967295,_=R+(N<<22&4294967295|N>>>10),N=w+(x^_&(R^x))+P[4]+4118548399&4294967295,w=_+(N<<7&4294967295|N>>>25),N=x+(R^w&(_^R))+P[5]+1200080426&4294967295,x=w+(N<<12&4294967295|N>>>20),N=R+(_^x&(w^_))+P[6]+2821735955&4294967295,R=x+(N<<17&4294967295|N>>>15),N=_+(w^R&(x^w))+P[7]+4249261313&4294967295,_=R+(N<<22&4294967295|N>>>10),N=w+(x^_&(R^x))+P[8]+1770035416&4294967295,w=_+(N<<7&4294967295|N>>>25),N=x+(R^w&(_^R))+P[9]+2336552879&4294967295,x=w+(N<<12&4294967295|N>>>20),N=R+(_^x&(w^_))+P[10]+4294925233&4294967295,R=x+(N<<17&4294967295|N>>>15),N=_+(w^R&(x^w))+P[11]+2304563134&4294967295,_=R+(N<<22&4294967295|N>>>10),N=w+(x^_&(R^x))+P[12]+1804603682&4294967295,w=_+(N<<7&4294967295|N>>>25),N=x+(R^w&(_^R))+P[13]+4254626195&4294967295,x=w+(N<<12&4294967295|N>>>20),N=R+(_^x&(w^_))+P[14]+2792965006&4294967295,R=x+(N<<17&4294967295|N>>>15),N=_+(w^R&(x^w))+P[15]+1236535329&4294967295,_=R+(N<<22&4294967295|N>>>10),N=w+(R^x&(_^R))+P[1]+4129170786&4294967295,w=_+(N<<5&4294967295|N>>>27),N=x+(_^R&(w^_))+P[6]+3225465664&4294967295,x=w+(N<<9&4294967295|N>>>23),N=R+(w^_&(x^w))+P[11]+643717713&4294967295,R=x+(N<<14&4294967295|N>>>18),N=_+(x^w&(R^x))+P[0]+3921069994&4294967295,_=R+(N<<20&4294967295|N>>>12),N=w+(R^x&(_^R))+P[5]+3593408605&4294967295,w=_+(N<<5&4294967295|N>>>27),N=x+(_^R&(w^_))+P[10]+38016083&4294967295,x=w+(N<<9&4294967295|N>>>23),N=R+(w^_&(x^w))+P[15]+3634488961&4294967295,R=x+(N<<14&4294967295|N>>>18),N=_+(x^w&(R^x))+P[4]+3889429448&4294967295,_=R+(N<<20&4294967295|N>>>12),N=w+(R^x&(_^R))+P[9]+568446438&4294967295,w=_+(N<<5&4294967295|N>>>27),N=x+(_^R&(w^_))+P[14]+3275163606&4294967295,x=w+(N<<9&4294967295|N>>>23),N=R+(w^_&(x^w))+P[3]+4107603335&4294967295,R=x+(N<<14&4294967295|N>>>18),N=_+(x^w&(R^x))+P[8]+1163531501&4294967295,_=R+(N<<20&4294967295|N>>>12),N=w+(R^x&(_^R))+P[13]+2850285829&4294967295,w=_+(N<<5&4294967295|N>>>27),N=x+(_^R&(w^_))+P[2]+4243563512&4294967295,x=w+(N<<9&4294967295|N>>>23),N=R+(w^_&(x^w))+P[7]+1735328473&4294967295,R=x+(N<<14&4294967295|N>>>18),N=_+(x^w&(R^x))+P[12]+2368359562&4294967295,_=R+(N<<20&4294967295|N>>>12),N=w+(_^R^x)+P[5]+4294588738&4294967295,w=_+(N<<4&4294967295|N>>>28),N=x+(w^_^R)+P[8]+2272392833&4294967295,x=w+(N<<11&4294967295|N>>>21),N=R+(x^w^_)+P[11]+1839030562&4294967295,R=x+(N<<16&4294967295|N>>>16),N=_+(R^x^w)+P[14]+4259657740&4294967295,_=R+(N<<23&4294967295|N>>>9),N=w+(_^R^x)+P[1]+2763975236&4294967295,w=_+(N<<4&4294967295|N>>>28),N=x+(w^_^R)+P[4]+1272893353&4294967295,x=w+(N<<11&4294967295|N>>>21),N=R+(x^w^_)+P[7]+4139469664&4294967295,R=x+(N<<16&4294967295|N>>>16),N=_+(R^x^w)+P[10]+3200236656&4294967295,_=R+(N<<23&4294967295|N>>>9),N=w+(_^R^x)+P[13]+681279174&4294967295,w=_+(N<<4&4294967295|N>>>28),N=x+(w^_^R)+P[0]+3936430074&4294967295,x=w+(N<<11&4294967295|N>>>21),N=R+(x^w^_)+P[3]+3572445317&4294967295,R=x+(N<<16&4294967295|N>>>16),N=_+(R^x^w)+P[6]+76029189&4294967295,_=R+(N<<23&4294967295|N>>>9),N=w+(_^R^x)+P[9]+3654602809&4294967295,w=_+(N<<4&4294967295|N>>>28),N=x+(w^_^R)+P[12]+3873151461&4294967295,x=w+(N<<11&4294967295|N>>>21),N=R+(x^w^_)+P[15]+530742520&4294967295,R=x+(N<<16&4294967295|N>>>16),N=_+(R^x^w)+P[2]+3299628645&4294967295,_=R+(N<<23&4294967295|N>>>9),N=w+(R^(_|~x))+P[0]+4096336452&4294967295,w=_+(N<<6&4294967295|N>>>26),N=x+(_^(w|~R))+P[7]+1126891415&4294967295,x=w+(N<<10&4294967295|N>>>22),N=R+(w^(x|~_))+P[14]+2878612391&4294967295,R=x+(N<<15&4294967295|N>>>17),N=_+(x^(R|~w))+P[5]+4237533241&4294967295,_=R+(N<<21&4294967295|N>>>11),N=w+(R^(_|~x))+P[12]+1700485571&4294967295,w=_+(N<<6&4294967295|N>>>26),N=x+(_^(w|~R))+P[3]+2399980690&4294967295,x=w+(N<<10&4294967295|N>>>22),N=R+(w^(x|~_))+P[10]+4293915773&4294967295,R=x+(N<<15&4294967295|N>>>17),N=_+(x^(R|~w))+P[1]+2240044497&4294967295,_=R+(N<<21&4294967295|N>>>11),N=w+(R^(_|~x))+P[8]+1873313359&4294967295,w=_+(N<<6&4294967295|N>>>26),N=x+(_^(w|~R))+P[15]+4264355552&4294967295,x=w+(N<<10&4294967295|N>>>22),N=R+(w^(x|~_))+P[6]+2734768916&4294967295,R=x+(N<<15&4294967295|N>>>17),N=_+(x^(R|~w))+P[13]+1309151649&4294967295,_=R+(N<<21&4294967295|N>>>11),N=w+(R^(_|~x))+P[4]+4149444226&4294967295,w=_+(N<<6&4294967295|N>>>26),N=x+(_^(w|~R))+P[11]+3174756917&4294967295,x=w+(N<<10&4294967295|N>>>22),N=R+(w^(x|~_))+P[2]+718787259&4294967295,R=x+(N<<15&4294967295|N>>>17),N=_+(x^(R|~w))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+x&4294967295}r.prototype.u=function(A,w){w===void 0&&(w=A.length);for(var _=w-this.blockSize,P=this.B,R=this.h,x=0;x<w;){if(R==0)for(;x<=_;)n(this,A,x),x+=this.blockSize;if(typeof A=="string"){for(;x<w;)if(P[R++]=A.charCodeAt(x++),R==this.blockSize){n(this,P),R=0;break}}else for(;x<w;)if(P[R++]=A[x++],R==this.blockSize){n(this,P),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;var _=8*this.o;for(w=A.length-8;w<A.length;++w)A[w]=_&255,_/=256;for(this.u(A),A=Array(16),w=_=0;4>w;++w)for(var P=0;32>P;P+=8)A[_++]=this.g[w]>>>P&255;return A};function i(A,w){var _=l;return Object.prototype.hasOwnProperty.call(_,A)?_[A]:_[A]=w(A)}function o(A,w){this.h=w;for(var _=[],P=!0,R=A.length-1;0<=R;R--){var x=A[R]|0;P&&x==w||(_[R]=x,P=!1)}this.g=_}var l={};function c(A){return-128<=A&&128>A?i(A,function(w){return new o([w|0],0>w?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return C(u(-A));for(var w=[],_=1,P=0;A>=_;P++)w[P]=A/_|0,_*=4294967296;return new o(w,0)}function h(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return C(h(A.substring(1),w));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(w,8)),P=f,R=0;R<A.length;R+=8){var x=Math.min(8,A.length-R),N=parseInt(A.substring(R,R+x),w);8>x?(x=u(Math.pow(w,x)),P=P.j(x).add(u(N))):(P=P.j(_),P=P.add(u(N)))}return P}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(I(this))return-C(this).m();for(var A=0,w=1,_=0;_<this.g.length;_++){var P=this.i(_);A+=(0<=P?P:4294967296+P)*w,w*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(v(this))return"0";if(I(this))return"-"+C(this).toString(A);for(var w=u(Math.pow(A,6)),_=this,P="";;){var R=L(_,w).g;_=U(_,R.j(w));var x=((0<_.g.length?_.g[0]:_.h)>>>0).toString(A);if(_=R,v(_))return x+P;for(;6>x.length;)x="0"+x;P=x+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function v(A){if(A.h!=0)return!1;for(var w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function I(A){return A.h==-1}t.l=function(A){return A=U(this,A),I(A)?-1:v(A)?0:1};function C(A){for(var w=A.g.length,_=[],P=0;P<w;P++)_[P]=~A.g[P];return new o(_,~A.h).add(m)}t.abs=function(){return I(this)?C(this):this},t.add=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],P=0,R=0;R<=w;R++){var x=P+(this.i(R)&65535)+(A.i(R)&65535),N=(x>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);P=N>>>16,x&=65535,N&=65535,_[R]=N<<16|x}return new o(_,_[_.length-1]&-2147483648?-1:0)};function U(A,w){return A.add(C(w))}t.j=function(A){if(v(this)||v(A))return f;if(I(this))return I(A)?C(this).j(C(A)):C(C(this).j(A));if(I(A))return C(this.j(C(A)));if(0>this.l(g)&&0>A.l(g))return u(this.m()*A.m());for(var w=this.g.length+A.g.length,_=[],P=0;P<2*w;P++)_[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<A.g.length;R++){var x=this.i(P)>>>16,N=this.i(P)&65535,ue=A.i(R)>>>16,de=A.i(R)&65535;_[2*P+2*R]+=N*de,D(_,2*P+2*R),_[2*P+2*R+1]+=x*de,D(_,2*P+2*R+1),_[2*P+2*R+1]+=N*ue,D(_,2*P+2*R+1),_[2*P+2*R+2]+=x*ue,D(_,2*P+2*R+2)}for(P=0;P<w;P++)_[P]=_[2*P+1]<<16|_[2*P];for(P=w;P<2*w;P++)_[P]=0;return new o(_,0)};function D(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function E(A,w){this.g=A,this.h=w}function L(A,w){if(v(w))throw Error("division by zero");if(v(A))return new E(f,f);if(I(A))return w=L(C(A),w),new E(C(w.g),C(w.h));if(I(w))return w=L(A,C(w)),new E(C(w.g),w.h);if(30<A.g.length){if(I(A)||I(w))throw Error("slowDivide_ only works with positive integers.");for(var _=m,P=w;0>=P.l(A);)_=$(_),P=$(P);var R=M(_,1),x=M(P,1);for(P=M(P,2),_=M(_,2);!v(P);){var N=x.add(P);0>=N.l(A)&&(R=R.add(_),x=N),P=M(P,1),_=M(_,1)}return w=U(A,R.j(w)),new E(R,w)}for(R=f;0<=A.l(w);){for(_=Math.max(1,Math.floor(A.m()/w.m())),P=Math.ceil(Math.log(_)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),x=u(_),N=x.j(w);I(N)||0<N.l(A);)_-=P,x=u(_),N=x.j(w);v(x)&&(x=m),R=R.add(x),A=U(A,N)}return new E(R,A)}t.A=function(A){return L(this,A).h},t.and=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],P=0;P<w;P++)_[P]=this.i(P)&A.i(P);return new o(_,this.h&A.h)},t.or=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],P=0;P<w;P++)_[P]=this.i(P)|A.i(P);return new o(_,this.h|A.h)},t.xor=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],P=0;P<w;P++)_[P]=this.i(P)^A.i(P);return new o(_,this.h^A.h)};function $(A){for(var w=A.g.length+1,_=[],P=0;P<w;P++)_[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(_,A.h)}function M(A,w){var _=w>>5;w%=32;for(var P=A.g.length-_,R=[],x=0;x<P;x++)R[x]=0<w?A.i(x+_)>>>w|A.i(x+_+1)<<32-w:A.i(x+_);return new o(R,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,di=o}).apply(typeof a_<"u"?a_:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jE,wl,HE,Bu,Sm,zE,WE,GE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,k){return d==Array.prototype||d==Object.prototype||(d[y]=k.value),d};function s(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var y=0;y<d.length;++y){var k=d[y];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=s(this);function n(d,y){if(y)e:{var k=r;d=d.split(".");for(var F=0;F<d.length-1;F++){var G=d[F];if(!(G in k))break e;k=k[G]}d=d[d.length-1],F=k[d],y=y(F),y!=F&&y!=null&&e(k,d,{configurable:!0,writable:!0,value:y})}}function i(d,y){d instanceof String&&(d+="");var k=0,F=!1,G={next:function(){if(!F&&k<d.length){var ee=k++;return{value:y(ee,d[ee]),done:!1}}return F=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}n("Array.prototype.values",function(d){return d||function(){return i(this,function(y,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function u(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function h(d,y,k){return d.call.apply(d.bind,arguments)}function f(d,y,k){if(!d)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,F),d.apply(y,G)}}return function(){return d.apply(y,arguments)}}function m(d,y,k){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,y){var k=Array.prototype.slice.call(arguments,1);return function(){var F=k.slice();return F.push.apply(F,arguments),d.apply(this,F)}}function v(d,y){function k(){}k.prototype=y.prototype,d.aa=y.prototype,d.prototype=new k,d.prototype.constructor=d,d.Qb=function(F,G,ee){for(var ve=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)ve[Tt-2]=arguments[Tt];return y.prototype[G].apply(F,ve)}}function I(d){const y=d.length;if(0<y){const k=Array(y);for(let F=0;F<y;F++)k[F]=d[F];return k}return[]}function C(d,y){for(let k=1;k<arguments.length;k++){const F=arguments[k];if(c(F)){const G=d.length||0,ee=F.length||0;d.length=G+ee;for(let ve=0;ve<ee;ve++)d[G+ve]=F[ve]}else d.push(F)}}class U{constructor(y,k){this.i=y,this.j=k,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(d){return/^[\s\xa0]*$/.test(d)}function E(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function L(d){return L[" "](d),d}L[" "]=function(){};var $=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(d,y,k){for(const F in d)y.call(k,d[F],F,d)}function A(d,y){for(const k in d)y.call(void 0,d[k],k,d)}function w(d){const y={};for(const k in d)y[k]=d[k];return y}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,y){let k,F;for(let G=1;G<arguments.length;G++){F=arguments[G];for(k in F)d[k]=F[k];for(let ee=0;ee<_.length;ee++)k=_[ee],Object.prototype.hasOwnProperty.call(F,k)&&(d[k]=F[k])}}function R(d){var y=1;d=d.split(":");const k=[];for(;0<y&&d.length;)k.push(d.shift()),y--;return d.length&&k.push(d.join(":")),k}function x(d){l.setTimeout(()=>{throw d},0)}function N(){var d=$e;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ue{constructor(){this.h=this.g=null}add(y,k){const F=de.get();F.set(y,k),this.h?this.h.next=F:this.g=F,this.h=F}}var de=new U(()=>new ce,d=>d.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,k){this.h=y,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let te,le=!1,$e=new ue,vt=()=>{const d=l.Promise.resolve(void 0);te=()=>{d.then(me)}};var me=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(k){x(k)}var y=de;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}le=!1};function Oe(){this.s=this.s,this.C=this.C}Oe.prototype.s=!1,Oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var Rt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const k=()=>{};l.addEventListener("test",k,y),l.removeEventListener("test",k,y)}catch{}return d}();function _t(d,y){if(Be.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var k=this.type=d.type,F=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if($){e:{try{L(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else k=="mouseover"?y=d.fromElement:k=="mouseout"&&(y=d.toElement);this.relatedTarget=y,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:bt[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&_t.aa.h.call(this)}}v(_t,Be);var bt={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),we=0;function ge(d,y,k,F,G){this.listener=d,this.proxy=null,this.src=y,this.type=k,this.capture=!!F,this.ha=G,this.key=++we,this.da=this.fa=!1}function Ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ze(d){this.src=d,this.g={},this.h=0}ze.prototype.add=function(d,y,k,F,G){var ee=d.toString();d=this.g[ee],d||(d=this.g[ee]=[],this.h++);var ve=B(d,y,F,G);return-1<ve?(y=d[ve],k||(y.fa=!1)):(y=new ge(y,this.src,ee,!!F,G),y.fa=k,d.push(y)),y};function Je(d,y){var k=y.type;if(k in d.g){var F=d.g[k],G=Array.prototype.indexOf.call(F,y,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(F,G,1),ee&&(Ee(y),d.g[k].length==0&&(delete d.g[k],d.h--))}}function B(d,y,k,F){for(var G=0;G<d.length;++G){var ee=d[G];if(!ee.da&&ee.listener==y&&ee.capture==!!k&&ee.ha==F)return G}return-1}var T="closure_lm_"+(1e6*Math.random()|0),q={};function Q(d,y,k,F,G){if(Array.isArray(y)){for(var ee=0;ee<y.length;ee++)Q(d,y[ee],k,F,G);return null}return k=ie(k),d&&d[se]?d.K(y,k,u(F)?!!F.capture:!1,G):H(d,y,k,!1,F,G)}function H(d,y,k,F,G,ee){if(!y)throw Error("Invalid event type");var ve=u(G)?!!G.capture:!!G,Tt=X(d);if(Tt||(d[T]=Tt=new ze(d)),k=Tt.add(y,k,F,ve,ee),k.proxy)return k;if(F=Y(),k.proxy=F,F.src=d,F.listener=k,d.addEventListener)Rt||(G=ve),G===void 0&&(G=!1),d.addEventListener(y.toString(),F,G);else if(d.attachEvent)d.attachEvent(V(y.toString()),F);else if(d.addListener&&d.removeListener)d.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Y(){function d(k){return y.call(d.src,d.listener,k)}const y=j;return d}function J(d,y,k,F,G){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)J(d,y[ee],k,F,G);else F=u(F)?!!F.capture:!!F,k=ie(k),d&&d[se]?(d=d.i,y=String(y).toString(),y in d.g&&(ee=d.g[y],k=B(ee,k,F,G),-1<k&&(Ee(ee[k]),Array.prototype.splice.call(ee,k,1),ee.length==0&&(delete d.g[y],d.h--)))):d&&(d=X(d))&&(y=d.g[y.toString()],d=-1,y&&(d=B(y,k,F,G)),(k=-1<d?y[d]:null)&&O(k))}function O(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[se])Je(y.i,d);else{var k=d.type,F=d.proxy;y.removeEventListener?y.removeEventListener(k,F,d.capture):y.detachEvent?y.detachEvent(V(k),F):y.addListener&&y.removeListener&&y.removeListener(F),(k=X(y))?(Je(k,d),k.h==0&&(k.src=null,y[T]=null)):Ee(d)}}}function V(d){return d in q?q[d]:q[d]="on"+d}function j(d,y){if(d.da)d=!0;else{y=new _t(y,this);var k=d.listener,F=d.ha||d.src;d.fa&&O(d),d=k.call(F,y)}return d}function X(d){return d=d[T],d instanceof ze?d:null}var oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(d){return typeof d=="function"?d:(d[oe]||(d[oe]=function(y){return d.handleEvent(y)}),d[oe])}function z(){Oe.call(this),this.i=new ze(this),this.M=this,this.F=null}v(z,Oe),z.prototype[se]=!0,z.prototype.removeEventListener=function(d,y,k,F){J(this,d,y,k,F)};function K(d,y){var k,F=d.F;if(F)for(k=[];F;F=F.F)k.push(F);if(d=d.M,F=y.type||y,typeof y=="string")y=new Be(y,d);else if(y instanceof Be)y.target=y.target||d;else{var G=y;y=new Be(F,d),P(y,G)}if(G=!0,k)for(var ee=k.length-1;0<=ee;ee--){var ve=y.g=k[ee];G=Ce(ve,F,!0,y)&&G}if(ve=y.g=d,G=Ce(ve,F,!0,y)&&G,G=Ce(ve,F,!1,y)&&G,k)for(ee=0;ee<k.length;ee++)ve=y.g=k[ee],G=Ce(ve,F,!1,y)&&G}z.prototype.N=function(){if(z.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var k=d.g[y],F=0;F<k.length;F++)Ee(k[F]);delete d.g[y],d.h--}}this.F=null},z.prototype.K=function(d,y,k,F){return this.i.add(String(d),y,!1,k,F)},z.prototype.L=function(d,y,k,F){return this.i.add(String(d),y,!0,k,F)};function Ce(d,y,k,F){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,ee=0;ee<y.length;++ee){var ve=y[ee];if(ve&&!ve.da&&ve.capture==k){var Tt=ve.listener,hs=ve.ha||ve.src;ve.fa&&Je(d.i,ve),G=Tt.call(hs,F)!==!1&&G}}return G&&!F.defaultPrevented}function Ae(d,y,k){if(typeof d=="function")k&&(d=m(d,k));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:l.setTimeout(d,y||0)}function ft(d){d.g=Ae(()=>{d.g=null,d.i&&(d.i=!1,ft(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class wt extends Oe{constructor(y,k){super(),this.m=y,this.l=k,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(d){Oe.call(this),this.h=d,this.g={}}v(Et,Oe);var os=[];function on(d){M(d.g,function(y,k){this.g.hasOwnProperty(k)&&O(y)},d),d.g={}}Et.prototype.N=function(){Et.aa.N.call(this),on(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $o=l.JSON.stringify,Ds=l.JSON.parse,ur=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Uo(){}Uo.prototype.h=null;function Zv(d){return d.h||(d.h=d.i())}function e0(){}var Qa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vf(){Be.call(this,"d")}v(Vf,Be);function qf(){Be.call(this,"c")}v(qf,Be);var Ui={},t0=null;function Jc(){return t0=t0||new z}Ui.La="serverreachability";function s0(d){Be.call(this,Ui.La,d)}v(s0,Be);function Xa(d){const y=Jc();K(y,new s0(y))}Ui.STAT_EVENT="statevent";function r0(d,y){Be.call(this,Ui.STAT_EVENT,d),this.stat=y}v(r0,Be);function Ms(d){const y=Jc();K(y,new r0(y,d))}Ui.Ma="timingevent";function n0(d,y){Be.call(this,Ui.Ma,d),this.size=y}v(n0,Be);function Ja(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},y)}function Za(){this.g=!0}Za.prototype.xa=function(){this.g=!1};function qx(d,y,k,F,G,ee){d.info(function(){if(d.g)if(ee)for(var ve="",Tt=ee.split("&"),hs=0;hs<Tt.length;hs++){var it=Tt[hs].split("=");if(1<it.length){var _s=it[0];it=it[1];var bs=_s.split("_");ve=2<=bs.length&&bs[1]=="type"?ve+(_s+"="+it+"&"):ve+(_s+"=redacted&")}}else ve=null;else ve=ee;return"XMLHTTP REQ ("+F+") [attempt "+G+"]: "+y+`
`+k+`
`+ve})}function Bx(d,y,k,F,G,ee,ve){d.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+G+"]: "+y+`
`+k+`
`+ee+" "+ve})}function Fo(d,y,k,F){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Hx(d,k)+(F?" "+F:"")})}function jx(d,y){d.info(function(){return"TIMEOUT: "+y})}Za.prototype.info=function(){};function Hx(d,y){if(!d.g)return y;if(!y)return null;try{var k=JSON.parse(y);if(k){for(d=0;d<k.length;d++)if(Array.isArray(k[d])){var F=k[d];if(!(2>F.length)){var G=F[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ve=1;ve<G.length;ve++)G[ve]=""}}}}return $o(k)}catch{return y}}var Zc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},i0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bf;function eu(){}v(eu,Uo),eu.prototype.g=function(){return new XMLHttpRequest},eu.prototype.i=function(){return{}},Bf=new eu;function Vn(d,y,k,F){this.j=d,this.i=y,this.l=k,this.R=F||1,this.U=new Et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new o0}function o0(){this.i=null,this.g="",this.h=!1}var a0={},jf={};function Hf(d,y,k){d.L=1,d.v=nu(an(y)),d.m=k,d.P=!0,l0(d,null)}function l0(d,y){d.F=Date.now(),tu(d),d.A=an(d.v);var k=d.A,F=d.R;Array.isArray(F)||(F=[String(F)]),S0(k.i,"t",F),d.C=0,k=d.j.J,d.h=new o0,d.g=V0(d.j,k?y:null,!d.m),0<d.O&&(d.M=new wt(m(d.Y,d,d.g),d.O)),y=d.U,k=d.g,F=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(os[0]=G.toString()),G=os);for(var ee=0;ee<G.length;ee++){var ve=Q(k,G[ee],F||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=d.H?w(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Xa(),qx(d.i,d.u,d.A,d.l,d.R,d.m)}Vn.prototype.ca=function(d){d=d.target;const y=this.M;y&&ln(d)==3?y.j():this.Y(d)},Vn.prototype.Y=function(d){try{if(d==this.g)e:{const bs=ln(this.g);var y=this.g.Ba();const Bo=this.g.Z();if(!(3>bs)&&(bs!=3||this.g&&(this.h.h||this.g.oa()||P0(this.g)))){this.J||bs!=4||y==7||(y==8||0>=Bo?Xa(3):Xa(2)),zf(this);var k=this.g.Z();this.X=k;t:if(c0(this)){var F=P0(this.g);d="";var G=F.length,ee=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),el(this);var ve="";break t}this.h.i=new l.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,d+=this.h.i.decode(F[y],{stream:!(ee&&y==G-1)});F.length=0,this.h.g+=d,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=k==200,Bx(this.i,this.u,this.A,this.l,this.R,bs,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Tt,hs=this.g;if((Tt=hs.g?hs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Tt)){var it=Tt;break t}}it=null}if(k=it)Fo(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wf(this,k);else{this.o=!1,this.s=3,Ms(12),Fi(this),el(this);break e}}if(this.P){k=!0;let wr;for(;!this.J&&this.C<ve.length;)if(wr=zx(this,ve),wr==jf){bs==4&&(this.s=4,Ms(14),k=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(wr==a0){this.s=4,Ms(15),Fo(this.i,this.l,ve,"[Invalid Chunk]"),k=!1;break}else Fo(this.i,this.l,wr,null),Wf(this,wr);if(c0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bs!=4||ve.length!=0||this.h.h||(this.s=1,Ms(16),k=!1),this.o=this.o&&k,!k)Fo(this.i,this.l,ve,"[Invalid Chunked Response]"),Fi(this),el(this);else if(0<ve.length&&!this.W){this.W=!0;var _s=this.j;_s.g==this&&_s.ba&&!_s.M&&(_s.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Jf(_s),_s.M=!0,Ms(11))}}else Fo(this.i,this.l,ve,null),Wf(this,ve);bs==4&&Fi(this),this.o&&!this.J&&(bs==4?M0(this.j,this):(this.o=!1,tu(this)))}else l4(this.g),k==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Ms(12)):(this.s=0,Ms(13)),Fi(this),el(this)}}}catch{}finally{}};function c0(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function zx(d,y){var k=d.C,F=y.indexOf(`
`,k);return F==-1?jf:(k=Number(y.substring(k,F)),isNaN(k)?a0:(F+=1,F+k>y.length?jf:(y=y.slice(F,F+k),d.C=F+k,y)))}Vn.prototype.cancel=function(){this.J=!0,Fi(this)};function tu(d){d.S=Date.now()+d.I,u0(d,d.I)}function u0(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ja(m(d.ba,d),y)}function zf(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Vn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(jx(this.i,this.A),this.L!=2&&(Xa(),Ms(17)),Fi(this),this.s=2,el(this)):u0(this,this.S-d)};function el(d){d.j.G==0||d.J||M0(d.j,d)}function Fi(d){zf(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,on(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Wf(d,y){try{var k=d.j;if(k.G!=0&&(k.g==d||Gf(k.h,d))){if(!d.K&&Gf(k.h,d)&&k.G==3){try{var F=k.Da.g.parse(y)}catch{F=null}if(Array.isArray(F)&&F.length==3){var G=F;if(G[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<d.F)uu(k),lu(k);else break e;Xf(k),Ms(18)}}else k.za=G[1],0<k.za-k.T&&37500>G[2]&&k.F&&k.v==0&&!k.C&&(k.C=Ja(m(k.Za,k),6e3));if(1>=f0(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else qi(k,11)}else if((d.K||k.g==d)&&uu(k),!D(y))for(G=k.Da.g.parse(y),y=0;y<G.length;y++){let it=G[y];if(k.T=it[0],it=it[1],k.G==2)if(it[0]=="c"){k.K=it[1],k.ia=it[2];const _s=it[3];_s!=null&&(k.la=_s,k.j.info("VER="+k.la));const bs=it[4];bs!=null&&(k.Aa=bs,k.j.info("SVER="+k.Aa));const Bo=it[5];Bo!=null&&typeof Bo=="number"&&0<Bo&&(F=1.5*Bo,k.L=F,k.j.info("backChannelRequestTimeoutMs_="+F)),F=k;const wr=d.g;if(wr){const hu=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var ee=F.h;ee.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Kf(ee,ee.h),ee.h=null))}if(F.D){const Zf=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zf&&(F.ya=Zf,Pt(F.I,F.D,Zf))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-d.F,k.j.info("Handshake RTT: "+k.R+"ms")),F=k;var ve=d;if(F.qa=F0(F,F.J?F.ia:null,F.W),ve.K){p0(F.h,ve);var Tt=ve,hs=F.L;hs&&(Tt.I=hs),Tt.B&&(zf(Tt),tu(Tt)),F.g=ve}else O0(F);0<k.i.length&&cu(k)}else it[0]!="stop"&&it[0]!="close"||qi(k,7);else k.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?qi(k,7):Qf(k):it[0]!="noop"&&k.l&&k.l.ta(it),k.v=0)}}Xa(4)}catch{}}var Wx=class{constructor(d,y){this.g=d,this.map=y}};function d0(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function h0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function f0(d){return d.h?1:d.g?d.g.size:0}function Gf(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Kf(d,y){d.g?d.g.add(y):d.h=y}function p0(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}d0.prototype.cancel=function(){if(this.i=m0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function m0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const k of d.g.values())y=y.concat(k.D);return y}return I(d.i)}function Gx(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var y=[],k=d.length,F=0;F<k;F++)y.push(d[F]);return y}y=[],k=0;for(F in d)y[k++]=d[F];return y}function Kx(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var y=[];d=d.length;for(var k=0;k<d;k++)y.push(k);return y}y=[],k=0;for(const F in d)y[k++]=F;return y}}}function g0(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var k=Kx(d),F=Gx(d),G=F.length,ee=0;ee<G;ee++)y.call(void 0,F[ee],k&&k[ee],d)}var y0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yx(d,y){if(d){d=d.split("&");for(var k=0;k<d.length;k++){var F=d[k].indexOf("="),G=null;if(0<=F){var ee=d[k].substring(0,F);G=d[k].substring(F+1)}else ee=d[k];y(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Vi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Vi){this.h=d.h,su(this,d.j),this.o=d.o,this.g=d.g,ru(this,d.s),this.l=d.l;var y=d.i,k=new rl;k.i=y.i,y.g&&(k.g=new Map(y.g),k.h=y.h),v0(this,k),this.m=d.m}else d&&(y=String(d).match(y0))?(this.h=!1,su(this,y[1]||"",!0),this.o=tl(y[2]||""),this.g=tl(y[3]||"",!0),ru(this,y[4]),this.l=tl(y[5]||"",!0),v0(this,y[6]||"",!0),this.m=tl(y[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}Vi.prototype.toString=function(){var d=[],y=this.j;y&&d.push(sl(y,_0,!0),":");var k=this.g;return(k||y=="file")&&(d.push("//"),(y=this.o)&&d.push(sl(y,_0,!0),"@"),d.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&d.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&d.push("/"),d.push(sl(k,k.charAt(0)=="/"?Jx:Xx,!0))),(k=this.i.toString())&&d.push("?",k),(k=this.m)&&d.push("#",sl(k,e4)),d.join("")};function an(d){return new Vi(d)}function su(d,y,k){d.j=k?tl(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function ru(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function v0(d,y,k){y instanceof rl?(d.i=y,t4(d.i,d.h)):(k||(y=sl(y,Zx)),d.i=new rl(y,d.h))}function Pt(d,y,k){d.i.set(y,k)}function nu(d){return Pt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function tl(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function sl(d,y,k){return typeof d=="string"?(d=encodeURI(d).replace(y,Qx),k&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Qx(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var _0=/[#\/\?@]/g,Xx=/[#\?:]/g,Jx=/[#\?]/g,Zx=/[#\?@]/g,e4=/#/g;function rl(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function qn(d){d.g||(d.g=new Map,d.h=0,d.i&&Yx(d.i,function(y,k){d.add(decodeURIComponent(y.replace(/\+/g," ")),k)}))}t=rl.prototype,t.add=function(d,y){qn(this),this.i=null,d=Vo(this,d);var k=this.g.get(d);return k||this.g.set(d,k=[]),k.push(y),this.h+=1,this};function b0(d,y){qn(d),y=Vo(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function w0(d,y){return qn(d),y=Vo(d,y),d.g.has(y)}t.forEach=function(d,y){qn(this),this.g.forEach(function(k,F){k.forEach(function(G){d.call(y,G,F,this)},this)},this)},t.na=function(){qn(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),k=[];for(let F=0;F<y.length;F++){const G=d[F];for(let ee=0;ee<G.length;ee++)k.push(y[F])}return k},t.V=function(d){qn(this);let y=[];if(typeof d=="string")w0(this,d)&&(y=y.concat(this.g.get(Vo(this,d))));else{d=Array.from(this.g.values());for(let k=0;k<d.length;k++)y=y.concat(d[k])}return y},t.set=function(d,y){return qn(this),this.i=null,d=Vo(this,d),w0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function S0(d,y,k){b0(d,y),0<k.length&&(d.i=null,d.g.set(Vo(d,y),I(k)),d.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var k=0;k<y.length;k++){var F=y[k];const ee=encodeURIComponent(String(F)),ve=this.V(F);for(F=0;F<ve.length;F++){var G=ee;ve[F]!==""&&(G+="="+encodeURIComponent(String(ve[F]))),d.push(G)}}return this.i=d.join("&")};function Vo(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function t4(d,y){y&&!d.j&&(qn(d),d.i=null,d.g.forEach(function(k,F){var G=F.toLowerCase();F!=G&&(b0(this,F),S0(this,G,k))},d)),d.j=y}function s4(d,y){const k=new Za;if(l.Image){const F=new Image;F.onload=g(Bn,k,"TestLoadImage: loaded",!0,y,F),F.onerror=g(Bn,k,"TestLoadImage: error",!1,y,F),F.onabort=g(Bn,k,"TestLoadImage: abort",!1,y,F),F.ontimeout=g(Bn,k,"TestLoadImage: timeout",!1,y,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=d}else y(!1)}function r4(d,y){const k=new Za,F=new AbortController,G=setTimeout(()=>{F.abort(),Bn(k,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:F.signal}).then(ee=>{clearTimeout(G),ee.ok?Bn(k,"TestPingServer: ok",!0,y):Bn(k,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Bn(k,"TestPingServer: error",!1,y)})}function Bn(d,y,k,F,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),F(k)}catch{}}function n4(){this.g=new ur}function i4(d,y,k){const F=k||"";try{g0(d,function(G,ee){let ve=G;u(G)&&(ve=$o(G)),y.push(F+ee+"="+encodeURIComponent(ve))})}catch(G){throw y.push(F+"type="+encodeURIComponent("_badmap")),G}}function iu(d){this.l=d.Ub||null,this.j=d.eb||!1}v(iu,Uo),iu.prototype.g=function(){return new ou(this.l,this.j)},iu.prototype.i=function(d){return function(){return d}}({});function ou(d,y){z.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(ou,z),t=ou.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,il(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||l).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,il(this)),this.g&&(this.readyState=3,il(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;E0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function E0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?nl(this):il(this),this.readyState==3&&E0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,nl(this))},t.Qa=function(d){this.g&&(this.response=d,nl(this))},t.ga=function(){this.g&&nl(this)};function nl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,il(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var k=y.next();!k.done;)k=k.value,d.push(k[0]+": "+k[1]),k=y.next();return d.join(`\r
`)};function il(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function T0(d){let y="";return M(d,function(k,F){y+=F,y+=":",y+=k,y+=`\r
`}),y}function Yf(d,y,k){e:{for(F in k){var F=!1;break e}F=!0}F||(k=T0(k),typeof d=="string"?k!=null&&encodeURIComponent(String(k)):Pt(d,y,k))}function Ut(d){z.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ut,z);var o4=/^https?$/i,a4=["POST","PUT"];t=Ut.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,k,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bf.g(),this.v=this.o?Zv(this.o):Zv(Bf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(ee){k0(this,ee);return}if(d=k||"",k=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var G in F)k.set(G,F[G]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ee of F.keys())k.set(ee,F.get(ee));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(k.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(a4,y,void 0))||F||G||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ve]of k)this.g.setRequestHeader(ee,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{A0(this),this.u=!0,this.g.send(d),this.u=!1}catch(ee){k0(this,ee)}};function k0(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,I0(d),au(d)}function I0(d){d.A||(d.A=!0,K(d,"complete"),K(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,K(this,"complete"),K(this,"abort"),au(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),au(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?C0(this):this.bb())},t.bb=function(){C0(this)};function C0(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ln(d)!=4||d.Z()!=2)){if(d.u&&ln(d)==4)Ae(d.Ea,0,d);else if(K(d,"readystatechange"),ln(d)==4){d.h=!1;try{const ve=d.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var k;if(!(k=y)){var F;if(F=ve===0){var G=String(d.D).match(y0)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),F=!o4.test(G?G.toLowerCase():"")}k=F}if(k)K(d,"complete"),K(d,"success");else{d.m=6;try{var ee=2<ln(d)?d.g.statusText:""}catch{ee=""}d.l=ee+" ["+d.Z()+"]",I0(d)}}finally{au(d)}}}}function au(d,y){if(d.g){A0(d);const k=d.g,F=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||K(d,"ready");try{k.onreadystatechange=F}catch{}}}function A0(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ln(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Ds(y)}};function P0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function l4(d){const y={};d=(d.g&&2<=ln(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<d.length;F++){if(D(d[F]))continue;var k=R(d[F]);const G=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ee=y[G]||[];y[G]=ee,ee.push(k)}A(y,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(d,y,k){return k&&k.internalChannelParams&&k.internalChannelParams[d]||y}function x0(d){this.Aa=0,this.i=[],this.j=new Za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,d),this.cb=ol("retryDelaySeedMs",1e4,d),this.Wa=ol("forwardChannelMaxRetries",2,d),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new d0(d&&d.concurrentRequestLimit),this.Da=new n4,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=x0.prototype,t.la=8,t.G=1,t.connect=function(d,y,k,F){Ms(0),this.W=d,this.H=y||{},k&&F!==void 0&&(this.H.OSID=k,this.H.OAID=F),this.F=this.X,this.I=F0(this,null,this.W),cu(this)};function Qf(d){if(L0(d),d.G==3){var y=d.U++,k=an(d.I);if(Pt(k,"SID",d.K),Pt(k,"RID",y),Pt(k,"TYPE","terminate"),al(d,k),y=new Vn(d,d.j,y),y.L=2,y.v=nu(an(k)),k=!1,l.navigator&&l.navigator.sendBeacon)try{k=l.navigator.sendBeacon(y.v.toString(),"")}catch{}!k&&l.Image&&(new Image().src=y.v,k=!0),k||(y.g=V0(y.j,null),y.g.ea(y.v)),y.F=Date.now(),tu(y)}U0(d)}function lu(d){d.g&&(Jf(d),d.g.cancel(),d.g=null)}function L0(d){lu(d),d.u&&(l.clearTimeout(d.u),d.u=null),uu(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function cu(d){if(!h0(d.h)&&!d.s){d.s=!0;var y=d.Ga;te||vt(),le||(te(),le=!0),$e.add(y,d),d.B=0}}function c4(d,y){return f0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ja(m(d.Ga,d,y),$0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new Vn(this,this.j,d);let ee=this.o;if(this.S&&(ee?(ee=w(ee),P(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var y=0,k=0;k<this.i.length;k++){t:{var F=this.i[k];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(y+=F,4096<y){y=k;break e}if(y===4096||k===this.i.length-1){y=k+1;break e}}y=1e3}else y=1e3;y=N0(this,G,y),k=an(this.I),Pt(k,"RID",d),Pt(k,"CVER",22),this.D&&Pt(k,"X-HTTP-Session-Id",this.D),al(this,k),ee&&(this.O?y="headers="+encodeURIComponent(String(T0(ee)))+"&"+y:this.m&&Yf(k,this.m,ee)),Kf(this.h,G),this.Ua&&Pt(k,"TYPE","init"),this.P?(Pt(k,"$req",y),Pt(k,"SID","null"),G.T=!0,Hf(G,k,null)):Hf(G,k,y),this.G=2}}else this.G==3&&(d?R0(this,d):this.i.length==0||h0(this.h)||R0(this))};function R0(d,y){var k;y?k=y.l:k=d.U++;const F=an(d.I);Pt(F,"SID",d.K),Pt(F,"RID",k),Pt(F,"AID",d.T),al(d,F),d.m&&d.o&&Yf(F,d.m,d.o),k=new Vn(d,d.j,k,d.B+1),d.m===null&&(k.H=d.o),y&&(d.i=y.D.concat(d.i)),y=N0(d,k,1e3),k.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Kf(d.h,k),Hf(k,F,y)}function al(d,y){d.H&&M(d.H,function(k,F){Pt(y,F,k)}),d.l&&g0({},function(k,F){Pt(y,F,k)})}function N0(d,y,k){k=Math.min(d.i.length,k);var F=d.l?m(d.l.Na,d.l,d):null;e:{var G=d.i;let ee=-1;for(;;){const ve=["count="+k];ee==-1?0<k?(ee=G[0].g,ve.push("ofs="+ee)):ee=0:ve.push("ofs="+ee);let Tt=!0;for(let hs=0;hs<k;hs++){let it=G[hs].g;const _s=G[hs].map;if(it-=ee,0>it)ee=Math.max(0,G[hs].g-100),Tt=!1;else try{i4(_s,ve,"req"+it+"_")}catch{F&&F(_s)}}if(Tt){F=ve.join("&");break e}}}return d=d.i.splice(0,k),y.D=d,F}function O0(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;te||vt(),le||(te(),le=!0),$e.add(y,d),d.v=0}}function Xf(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ja(m(d.Fa,d),$0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,D0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ja(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ms(10),lu(this),D0(this))};function Jf(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function D0(d){d.g=new Vn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=an(d.qa);Pt(y,"RID","rpc"),Pt(y,"SID",d.K),Pt(y,"AID",d.T),Pt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Pt(y,"TO",d.ja),Pt(y,"TYPE","xmlhttp"),al(d,y),d.m&&d.o&&Yf(y,d.m,d.o),d.L&&(d.g.I=d.L);var k=d.g;d=d.ia,k.L=1,k.v=nu(an(y)),k.m=null,k.P=!0,l0(k,d)}t.Za=function(){this.C!=null&&(this.C=null,lu(this),Xf(this),Ms(19))};function uu(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function M0(d,y){var k=null;if(d.g==y){uu(d),Jf(d),d.g=null;var F=2}else if(Gf(d.h,y))k=y.D,p0(d.h,y),F=1;else return;if(d.G!=0){if(y.o)if(F==1){k=y.m?y.m.length:0,y=Date.now()-y.F;var G=d.B;F=Jc(),K(F,new n0(F,k)),cu(d)}else O0(d);else if(G=y.s,G==3||G==0&&0<y.X||!(F==1&&c4(d,y)||F==2&&Xf(d)))switch(k&&0<k.length&&(y=d.h,y.i=y.i.concat(k)),G){case 1:qi(d,5);break;case 4:qi(d,10);break;case 3:qi(d,6);break;default:qi(d,2)}}}function $0(d,y){let k=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(k*=2),k*y}function qi(d,y){if(d.j.info("Error code "+y),y==2){var k=m(d.fb,d),F=d.Xa;const G=!F;F=new Vi(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||su(F,"https"),nu(F),G?s4(F.toString(),k):r4(F.toString(),k)}else Ms(2);d.G=0,d.l&&d.l.sa(y),U0(d),L0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ms(2)):(this.j.info("Failed to ping google.com"),Ms(1))};function U0(d){if(d.G=0,d.ka=[],d.l){const y=m0(d.h);(y.length!=0||d.i.length!=0)&&(C(d.ka,y),C(d.ka,d.i),d.h.i.length=0,I(d.i),d.i.length=0),d.l.ra()}}function F0(d,y,k){var F=k instanceof Vi?an(k):new Vi(k);if(F.g!="")y&&(F.g=y+"."+F.g),ru(F,F.s);else{var G=l.location;F=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var ee=new Vi(null);F&&su(ee,F),y&&(ee.g=y),G&&ru(ee,G),k&&(ee.l=k),F=ee}return k=d.D,y=d.ya,k&&y&&Pt(F,k,y),Pt(F,"VER",d.la),al(d,F),F}function V0(d,y,k){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ut(new iu({eb:k})):new Ut(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function q0(){}t=q0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function du(){}du.prototype.g=function(d,y){return new rr(d,y)};function rr(d,y){z.call(this),this.g=new x0(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!D(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new qo(this)}v(rr,z),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){Qf(this.g)},rr.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var k={};k.__data__=d,d=k}else this.u&&(k={},k.__data__=$o(d),d=k);y.i.push(new Wx(y.Ya++,d)),y.G==3&&cu(y)},rr.prototype.N=function(){this.g.l=null,delete this.j,Qf(this.g),delete this.g,rr.aa.N.call(this)};function B0(d){Vf.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const k in y){d=k;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}v(B0,Vf);function j0(){qf.call(this),this.status=1}v(j0,qf);function qo(d){this.g=d}v(qo,q0),qo.prototype.ua=function(){K(this.g,"a")},qo.prototype.ta=function(d){K(this.g,new B0(d))},qo.prototype.sa=function(d){K(this.g,new j0)},qo.prototype.ra=function(){K(this.g,"b")},du.prototype.createWebChannel=du.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,GE=function(){return new du},WE=function(){return Jc()},zE=Ui,Sm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zc.NO_ERROR=0,Zc.TIMEOUT=8,Zc.HTTP_ERROR=6,Bu=Zc,i0.COMPLETE="complete",HE=i0,e0.EventType=Qa,Qa.OPEN="a",Qa.CLOSE="b",Qa.ERROR="c",Qa.MESSAGE="d",z.prototype.listen=z.prototype.K,wl=e0,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,jE=Ut}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const l_="@firebase/firestore",c_="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new $h("@firebase/firestore");function Xo(){return mo.logLevel}function Ie(t,...e){if(mo.logLevel<=Ze.DEBUG){const s=e.map(Xg);mo.debug(`Firestore (${Va}): ${t}`,...s)}}function On(t,...e){if(mo.logLevel<=Ze.ERROR){const s=e.map(Xg);mo.error(`Firestore (${Va}): ${t}`,...s)}}function _a(t,...e){if(mo.logLevel<=Ze.WARN){const s=e.map(Xg);mo.warn(`Firestore (${Va}): ${t}`,...s)}}function Xg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,KE(t,r,s)}function KE(t,e,s){let r=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw On(r),new Error(r)}function yt(t,e,s,r){let n="Unexpected state";typeof s=="string"?n=s:r=s,t||KE(e,n,r)}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Dr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Ts.UNAUTHENTICATED))}shutdown(){}}class N3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class O3{constructor(e){this.t=e,this.currentUser=Ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){yt(this.o===void 0,42304);let r=this.i;const n=c=>this.i!==r?(r=this.i,s(c)):Promise.resolve();let i=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hi,e.enqueueRetryable(()=>n(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await n(this.currentUser)})},l=c=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hi)}},0),o()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new YE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new Ts(e)}}class D3{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=Ts.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class M3{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new D3(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable(()=>s(Ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $3{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ys(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){yt(this.o===void 0,3512);const r=i=>{i.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const n=i=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?n(i):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new u_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(yt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new u_(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=U3(40);for(let i=0;i<n.length;++i)r.length<20&&n[i]<s&&(r+=e.charAt(n[i]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function Em(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=t.codePointAt(s),n=e.codePointAt(s);if(r!==n){if(r<128&&n<128)return Ke(r,n);{const i=QE(),o=F3(i.encode(d_(t,s)),i.encode(d_(e,s)));return o!==0?o:Ke(r,n)}}s+=r>65535?2:1}return Ke(t.length,e.length)}function d_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function F3(t,e){for(let s=0;s<t.length&&s<e.length;++s)if(t[s]!==e[s])return Ke(t[s],e[s]);return Ke(t.length,e.length)}function ba(t,e,s){return t.length===e.length&&t.every((r,n)=>s(r,e[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=-62135596800,f_=1e6;class ss{static now(){return ss.fromMillis(Date.now())}static fromDate(e){return ss.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*f_);return new ss(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Re(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Re(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<h_)throw new Re(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f_}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-h_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new ss(0,0))}static max(){return new Ve(new ss(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__name__";class zr{constructor(e,s,r){s===void 0?s=0:s>e.length&&Ue(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&Ue(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(r=>{s.push(r)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let n=0;n<r;n++){const i=zr.compareSegments(e.get(n),s.get(n));if(i!==0)return i}return Ke(e.length,s.length)}static compareSegments(e,s){const r=zr.isNumericId(e),n=zr.isNumericId(s);return r&&!n?-1:!r&&n?1:r&&n?zr.extractNumericId(e).compare(zr.extractNumericId(s)):Em(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return di.fromString(e.substring(4,e.length-2))}}class Ft extends zr{construct(e,s,r){return new Ft(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter(n=>n.length>0))}return new Ft(s)}static emptyPath(){return new Ft([])}}const V3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ms extends zr{construct(e,s,r){return new ms(e,s,r)}static isValidIdentifier(e){return V3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p_}static keyField(){return new ms([p_])}static fromServerFormat(e){const s=[];let r="",n=0;const i=()=>{if(r.length===0)throw new Re(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let o=!1;for(;n<e.length;){const l=e[n];if(l==="\\"){if(n+1===e.length)throw new Re(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[n+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Re(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,n+=2}else l==="`"?(o=!o,n++):l!=="."||o?(r+=l,n++):(i(),n++)}if(i(),o)throw new Re(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ms(s)}static emptyPath(){return new ms([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Ft.fromString(e))}static fromName(e){return new Ne(Ft.fromString(e).popFirst(5))}static empty(){return new Ne(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Ft.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=-1;function q3(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,n=Ve.fromTimestamp(r===1e9?new ss(s+1,0):new ss(s,r));return new yi(n,Ne.empty(),e)}function B3(t){return new yi(t.readTime,t.key,oc)}class yi{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new yi(Ve.min(),Ne.empty(),oc)}static max(){return new yi(Ve.max(),Ne.empty(),oc)}}function j3(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=Ne.comparator(t.documentKey,e.documentKey),s!==0?s:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==H3)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ne((r,n)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,n)},this.catchCallback=i=>{this.wrapFailure(s,i).next(r,n)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof ne?s:ne.resolve(s)}catch(s){return ne.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):ne.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):ne.reject(s)}static resolve(e){return new ne((s,r)=>{s(e)})}static reject(e){return new ne((s,r)=>{r(e)})}static waitFor(e){return new ne((s,r)=>{let n=0,i=0,o=!1;e.forEach(l=>{++n,l.next(()=>{++i,o&&i===n&&s()},c=>r(c))}),o=!0,i===n&&s()})}static or(e){let s=ne.resolve(!1);for(const r of e)s=s.next(n=>n?ne.resolve(n):r());return s}static forEach(e,s){const r=[];return e.forEach((n,i)=>{r.push(s.call(this,n,i))}),this.waitFor(r)}static mapArray(e,s){return new ne((r,n)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;s(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>n(h))}})}static doWhile(e,s){return new ne((r,n)=>{const i=()=>{e()===!0?s().next(()=>{i()},n):r()};i()})}}function W3(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>s.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Uh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=-1;function Fh(t){return t==null}function Cd(t){return t===0&&1/t==-1/0}function G3(t){return typeof t=="number"&&Number.isInteger(t)&&!Cd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="";function K3(t){let e="";for(let s=0;s<t.length;s++)e.length>0&&(e=m_(e)),e=Y3(t.get(s),e);return m_(e)}function Y3(t,e){let s=e;const r=t.length;for(let n=0;n<r;n++){const i=t.charAt(n);switch(i){case"\0":s+="";break;case JE:s+="";break;default:s+=i}}return s}function m_(t){return t+JE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Ni(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function ZE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,s){this.comparator=e,this.root=s||ps.EMPTY}insert(e,s){return new $t(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return s+r.left.size;n<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,r)=>(e(s,r),!1))}toString(){const e=[];return this.inorderTraversal((s,r)=>(e.push(`${s}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tu(this.root,e,this.comparator,!0)}}class Tu{constructor(e,s,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=s?r(e.key,s):1,s&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,s,r,n,i){this.key=e,this.value=s,this.color=r??ps.RED,this.left=n??ps.EMPTY,this.right=i??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,n,i){return new ps(e??this.key,s??this.value,r??this.color,n??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let n=this;const i=r(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,s,r),null):i===0?n.copy(null,s,null,null,null):n.copy(null,null,null,null,n.right.insert(e,s,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,n=this;if(s(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,s),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),s(e,n.key)===0){if(n.right.isEmpty())return ps.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,s))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1;ps.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,s,r,n,i){return this}insert(e,s,r){return new ps(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,r)=>(e(s),!1))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;s(n.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new y_(this.data.getIterator())}getIteratorFrom(e){return new y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(r=>{s=s.add(r)}),s}isEqual(e){if(!(e instanceof rs)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const n=s.getNext().key,i=r.getNext().key;if(this.comparator(n,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new rs(this.comparator);return s.data=e,s}}class y_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.fields=e,e.sort(ms.comparator)}static empty(){return new Ir([])}unionWith(e){let s=new rs(ms.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Ir(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(s,r)=>s.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new eT("Invalid base64 string: "+i):i}}(e);return new vs(s)}static fromUint8Array(e){const s=function(n){let i="";for(let o=0;o<n.length;++o)i+=String.fromCharCode(n[o]);return i}(e);return new vs(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const r=new Uint8Array(s.length);for(let n=0;n<s.length;n++)r[n]=s.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vs.EMPTY_BYTE_STRING=new vs("");const Q3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(t){if(yt(!!t,39018),typeof t=="string"){let e=0;const s=Q3.exec(t);if(yt(!!s,46558,{timestamp:t}),s[1]){let n=s[1];n=(n+"000000000").substr(0,9),e=Number(n)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(t.seconds),nanos:jt(t.nanos)}}function jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?vs.fromBase64String(t):vs.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",sT="__type__",rT="__previous_value__",nT="__local_write_time__";function Zg(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[sT])===null||s===void 0?void 0:s.stringValue)===tT}function Vh(t){const e=t.mapValue.fields[rT];return Zg(e)?Vh(e):e}function ac(t){const e=vi(t.mapValue.fields[nT].timestampValue);return new ss(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,s,r,n,i,o,l,c,u,h){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ad="(default)";class lc{constructor(e,s){this.projectId=e,this.database=s||Ad}static empty(){return new lc("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="__type__",J3="__max__",ku={mapValue:{}},oT="__vector__",Pd="value";function bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zg(t)?4:e$(t)?9007199254740991:Z3(t)?10:11:Ue(28295,{value:t})}function rn(t,e){if(t===e)return!0;const s=bi(t);if(s!==bi(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ac(t).isEqual(ac(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const o=vi(n.timestampValue),l=vi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return _i(n.bytesValue).isEqual(_i(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return jt(n.geoPointValue.latitude)===jt(i.geoPointValue.latitude)&&jt(n.geoPointValue.longitude)===jt(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return jt(n.integerValue)===jt(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const o=jt(n.doubleValue),l=jt(i.doubleValue);return o===l?Cd(o)===Cd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(n,i){const o=n.mapValue.fields||{},l=i.mapValue.fields||{};if(g_(o)!==g_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!rn(o[c],l[c])))return!1;return!0}(t,e);default:return Ue(52216,{left:t})}}function cc(t,e){return(t.values||[]).find(s=>rn(s,e))!==void 0}function wa(t,e){if(t===e)return 0;const s=bi(t),r=bi(e);if(s!==r)return Ke(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=jt(i.integerValue||i.doubleValue),c=jt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return v_(t.timestampValue,e.timestampValue);case 4:return v_(ac(t),ac(e));case 5:return Em(t.stringValue,e.stringValue);case 6:return function(i,o){const l=_i(i),c=_i(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ke(l[u],c[u]);if(h!==0)return h}return Ke(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ke(jt(i.latitude),jt(o.latitude));return l!==0?l:Ke(jt(i.longitude),jt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,h;const f=i.fields||{},m=o.fields||{},g=(l=f[Pd])===null||l===void 0?void 0:l.arrayValue,v=(c=m[Pd])===null||c===void 0?void 0:c.arrayValue,I=Ke(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:__(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ku.mapValue&&o===ku.mapValue)return 0;if(i===ku.mapValue)return 1;if(o===ku.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Em(c[f],h[f]);if(m!==0)return m;const g=wa(l[c[f]],u[h[f]]);if(g!==0)return g}return Ke(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ue(23264,{Pe:s})}}function v_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const s=vi(t),r=vi(e),n=Ke(s.seconds,r.seconds);return n!==0?n:Ke(s.nanos,r.nanos)}function __(t,e){const s=t.values||[],r=e.values||[];for(let n=0;n<s.length&&n<r.length;++n){const i=wa(s[n],r[n]);if(i)return i}return Ke(s.length,r.length)}function Sa(t){return Tm(t)}function Tm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=vi(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return _i(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return Ne.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let r="[",n=!0;for(const i of s.values||[])n?n=!1:r+=",",r+=Tm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let n="{",i=!0;for(const o of r)i?i=!1:n+=",",n+=`${o}:${Tm(s.fields[o])}`;return n+"}"}(t.mapValue):Ue(61005,{value:t})}function ju(t){switch(bi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vh(t);return e?16+ju(e):16;case 5:return 2*t.stringValue.length;case 6:return _i(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,i)=>n+ju(i),0)}(t.arrayValue);case 10:case 11:return function(r){let n=0;return Ni(r.fields,(i,o)=>{n+=i.length+ju(o)}),n}(t.mapValue);default:throw Ue(13486,{value:t})}}function km(t){return!!t&&"integerValue"in t}function ey(t){return!!t&&"arrayValue"in t}function b_(t){return!!t&&"nullValue"in t}function w_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hu(t){return!!t&&"mapValue"in t}function Z3(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[iT])===null||s===void 0?void 0:s.stringValue)===oT}function Ul(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ni(t.mapValue.fields,(s,r)=>e.mapValue.fields[s]=Ul(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Ul(t.arrayValue.values[s]);return e}return Object.assign({},t)}function e$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===J3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!Hu(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(s)}setAll(e){let s=ms.emptyPath(),r={},n=[];e.forEach((o,l)=>{if(!s.isImmediateParentOf(l)){const c=this.getFieldsMap(s);this.applyChanges(c,r,n),r={},n=[],s=l.popLast()}o?r[l.lastSegment()]=Ul(o):n.push(l.lastSegment())});const i=this.getFieldsMap(s);this.applyChanges(i,r,n)}delete(e){const s=this.field(e.popLast());Hu(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=s.mapValue.fields[e.get(r)];Hu(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=n),s=n}return s.mapValue.fields}applyChanges(e,s,r){Ni(s,(n,i)=>e[n]=i);for(const n of r)delete e[n]}clone(){return new or(Ul(this.value))}}function aT(t){const e=[];return Ni(t.fields,(s,r)=>{const n=new ms([s]);if(Hu(r)){const i=aT(r.mapValue).fields;if(i.length===0)e.push(n);else for(const o of i)e.push(n.child(o))}else e.push(n)}),new Ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,s,r,n,i,o,l){this.key=e,this.documentType=s,this.version=r,this.readTime=n,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ps(e,0,Ve.min(),Ve.min(),Ve.min(),or.empty(),0)}static newFoundDocument(e,s,r,n){return new Ps(e,1,s,Ve.min(),r,n,0)}static newNoDocument(e,s){return new Ps(e,2,s,Ve.min(),Ve.min(),or.empty(),0)}static newUnknownDocument(e,s){return new Ps(e,3,s,Ve.min(),Ve.min(),or.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ps&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ps(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,s){this.position=e,this.inclusive=s}}function S_(t,e,s){let r=0;for(let n=0;n<t.position.length;n++){const i=e[n],o=t.position[n];if(i.field.isKeyField()?r=Ne.comparator(Ne.fromName(o.referenceValue),s.key):r=wa(o,s.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function E_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!rn(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,s="asc"){this.field=e,this.dir=s}}function t$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{}class Jt extends lT{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new r$(e,s,r):s==="array-contains"?new o$(e,r):s==="in"?new a$(e,r):s==="not-in"?new l$(e,r):s==="array-contains-any"?new c$(e,r):new Jt(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new n$(e,r):new i$(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(wa(s,this.value)):s!==null&&bi(this.value)===bi(s)&&this.matchesComparison(wa(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends lT{constructor(e,s){super(),this.filters=e,this.op=s,this.Te=null}static create(e,s){return new nn(e,s)}matches(e){return cT(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function cT(t){return t.op==="and"}function uT(t){return s$(t)&&cT(t)}function s$(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function Im(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+Sa(t.value);if(uT(t))return t.filters.map(e=>Im(e)).join(",");{const e=t.filters.map(s=>Im(s)).join(",");return`${t.op}(${e})`}}function dT(t,e){return t instanceof Jt?function(r,n){return n instanceof Jt&&r.op===n.op&&r.field.isEqual(n.field)&&rn(r.value,n.value)}(t,e):t instanceof nn?function(r,n){return n instanceof nn&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((i,o,l)=>i&&dT(o,n.filters[l]),!0):!1}(t,e):void Ue(19439)}function hT(t){return t instanceof Jt?function(s){return`${s.field.canonicalString()} ${s.op} ${Sa(s.value)}`}(t):t instanceof nn?function(s){return s.op.toString()+" {"+s.getFilters().map(hT).join(" ,")+"}"}(t):"Filter"}class r$ extends Jt{constructor(e,s,r){super(e,s,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const s=Ne.comparator(e.key,this.key);return this.matchesComparison(s)}}class n$ extends Jt{constructor(e,s){super(e,"in",s),this.keys=fT("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class i$ extends Jt{constructor(e,s){super(e,"not-in",s),this.keys=fT("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function fT(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class o$ extends Jt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return ey(s)&&cc(s.arrayValue,this.value)}}class a$ extends Jt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&cc(this.value.arrayValue,s)}}class l$ extends Jt{constructor(e,s){super(e,"not-in",s)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!cc(this.value.arrayValue,s)}}class c$ extends Jt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!ey(s)||!s.arrayValue.values)&&s.arrayValue.values.some(r=>cc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e,s=null,r=[],n=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function T_(t,e=null,s=[],r=[],n=null,i=null,o=null){return new u$(t,e,s,r,n,i,o)}function ty(t){const e=He(t);if(e.Ie===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(r=>Im(r)).join(","),s+="|ob:",s+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Fh(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>Sa(r)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>Sa(r)).join(",")),e.Ie=s}return e.Ie}function sy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!t$(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!dT(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E_(t.startAt,e.startAt)&&E_(t.endAt,e.endAt)}function Cm(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,s=null,r=[],n=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function d$(t,e,s,r,n,i,o,l){return new qh(t,e,s,r,n,i,o,l)}function ry(t){return new qh(t)}function k_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h$(t){return t.collectionGroup!==null}function Fl(t){const e=He(t);if(e.Ee===null){e.Ee=[];const s=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),s.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rs(ms.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{s.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Ld(i,r))}),s.has(ms.keyField().canonicalString())||e.Ee.push(new Ld(ms.keyField(),r))}return e.Ee}function Kr(t){const e=He(t);return e.de||(e.de=f$(e,Fl(t))),e.de}function f$(t,e){if(t.limitType==="F")return T_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(n=>{const i=n.dir==="desc"?"asc":"desc";return new Ld(n.field,i)});const s=t.endAt?new xd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xd(t.startAt.position,t.startAt.inclusive):null;return T_(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function Am(t,e,s){return new qh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Bh(t,e){return sy(Kr(t),Kr(e))&&t.limitType===e.limitType}function pT(t){return`${ty(Kr(t))}|lt:${t.limitType}`}function Jo(t){return`Query(target=${function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map(n=>hT(n)).join(", ")}]`),Fh(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map(n=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(n)).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map(n=>Sa(n)).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map(n=>Sa(n)).join(",")),`Target(${r})`}(Kr(t))}; limitType=${t.limitType})`}function jh(t,e){return e.isFoundDocument()&&function(r,n){const i=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,n){for(const i of Fl(r))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const i of r.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(o,l,c){const u=S_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Fl(r),n)||r.endAt&&!function(o,l,c){const u=S_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Fl(r),n))}(t,e)}function p$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mT(t){return(e,s)=>{let r=!1;for(const n of Fl(t)){const i=m$(n,e,s);if(i!==0)return i;r=r||n.field.isKeyField()}return 0}}function m$(t,e,s){const r=t.field.isKeyField()?Ne.comparator(e.key,s.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?wa(c,u):Ue(42886)}(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[n,i]of r)if(this.equalsFn(n,e))return i}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return void(n[i]=[e,s]);n.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return r.length===1?delete this.inner[s]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,(s,r)=>{for(const[n,i]of r)e(n,i)})}isEmpty(){return ZE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=new $t(Ne.comparator);function Dn(){return g$}const gT=new $t(Ne.comparator);function Sl(...t){let e=gT;for(const s of t)e=e.insert(s.key,s);return e}function yT(t){let e=gT;return t.forEach((s,r)=>e=e.insert(s,r.overlayedDocument)),e}function Qi(){return Vl()}function vT(){return Vl()}function Vl(){return new No(t=>t.toString(),(t,e)=>t.isEqual(e))}const y$=new $t(Ne.comparator),v$=new rs(Ne.comparator);function et(...t){let e=v$;for(const s of t)e=e.add(s);return e}const _$=new rs(Ke);function b$(){return _$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function _T(t){return{integerValue:""+t}}function w$(t,e){return G3(e)?_T(e):ny(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function S$(t,e,s){return t instanceof Rd?function(n,i){const o={fields:{[sT]:{stringValue:tT},[nT]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&Zg(i)&&(i=Vh(i)),i&&(o.fields[rT]=i),{mapValue:o}}(s,e):t instanceof uc?wT(t,e):t instanceof dc?ST(t,e):function(n,i){const o=bT(n,i),l=I_(o)+I_(n.Re);return km(o)&&km(n.Re)?_T(l):ny(n.serializer,l)}(t,e)}function E$(t,e,s){return t instanceof uc?wT(t,e):t instanceof dc?ST(t,e):s}function bT(t,e){return t instanceof Nd?function(r){return km(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Rd extends Hh{}class uc extends Hh{constructor(e){super(),this.elements=e}}function wT(t,e){const s=ET(e);for(const r of t.elements)s.some(n=>rn(n,r))||s.push(r);return{arrayValue:{values:s}}}class dc extends Hh{constructor(e){super(),this.elements=e}}function ST(t,e){let s=ET(e);for(const r of t.elements)s=s.filter(n=>!rn(n,r));return{arrayValue:{values:s}}}class Nd extends Hh{constructor(e,s){super(),this.serializer=e,this.Re=s}}function I_(t){return jt(t.integerValue||t.doubleValue)}function ET(t){return ey(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function T$(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof uc&&n instanceof uc||r instanceof dc&&n instanceof dc?ba(r.elements,n.elements,rn):r instanceof Nd&&n instanceof Nd?rn(r.Re,n.Re):r instanceof Rd&&n instanceof Rd}(t.transform,e.transform)}class k${constructor(e,s){this.version=e,this.transformResults=s}}class Cn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zh{}function TT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new IT(t.key,Cn.none()):new Wh(t.key,t.data,Cn.none());{const s=t.data,r=or.empty();let n=new rs(ms.comparator);for(let i of e.fields)if(!n.has(i)){let o=s.field(i);o===null&&i.length>1&&(i=i.popLast(),o=s.field(i)),o===null?r.delete(i):r.set(i,o),n=n.add(i)}return new Oo(t.key,r,new Ir(n.toArray()),Cn.none())}}function I$(t,e,s){t instanceof Wh?function(n,i,o){const l=n.value.clone(),c=A_(n.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,s):t instanceof Oo?function(n,i,o){if(!zu(n.precondition,i))return void i.convertToUnknownDocument(o.version);const l=A_(n.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(kT(n)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,s):function(n,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,s)}function ql(t,e,s,r){return t instanceof Wh?function(i,o,l,c){if(!zu(i.precondition,o))return l;const u=i.value.clone(),h=P_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,s,r):t instanceof Oo?function(i,o,l,c){if(!zu(i.precondition,o))return l;const u=P_(i.fieldTransforms,c,o),h=o.data;return h.setAll(kT(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,s,r):function(i,o,l){return zu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,s)}function C$(t,e){let s=null;for(const r of t.fieldTransforms){const n=e.data.field(r.field),i=bT(r.transform,n||null);i!=null&&(s===null&&(s=or.empty()),s.set(r.field,i))}return s||null}function C_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&ba(r,n,(i,o)=>T$(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wh extends zh{constructor(e,s,r,n=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class Oo extends zh{constructor(e,s,r,n,i=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kT(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}}),e}function A_(t,e,s){const r=new Map;yt(t.length===s.length,32656,{Ve:s.length,me:t.length});for(let n=0;n<s.length;n++){const i=t[n],o=i.transform,l=e.data.field(i.field);r.set(i.field,E$(o,l,s[n]))}return r}function P_(t,e,s){const r=new Map;for(const n of t){const i=n.transform,o=s.data.field(n.field);r.set(n.field,S$(i,o,e))}return r}class IT extends zh{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A$ extends zh{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,s,r,n){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let n=0;n<this.mutations.length;n++){const i=this.mutations[n];i.key.isEqual(e.key)&&I$(i,e,r[n])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=ql(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=ql(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=vT();return this.mutations.forEach(n=>{const i=e.get(n.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=s.has(n.key)?null:l;const c=TT(o,l);c!==null&&r.set(n.key,c),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),et())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(s,r)=>C_(s,r))&&ba(this.baseMutations,e.baseMutations,(s,r)=>C_(s,r))}}class iy{constructor(e,s,r,n){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=n}static from(e,s,r){yt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let n=function(){return y$}();const i=e.mutations;for(let o=0;o<i.length;o++)n=n.insert(i[o].key,r[o].version);return new iy(e,s,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,st;function R$(t){switch(t){case fe.OK:return Ue(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ue(15467,{code:t})}}function CT(t){if(t===void 0)return On("GRPC error has no .code"),fe.UNKNOWN;switch(t){case zt.OK:return fe.OK;case zt.CANCELLED:return fe.CANCELLED;case zt.UNKNOWN:return fe.UNKNOWN;case zt.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case zt.INTERNAL:return fe.INTERNAL;case zt.UNAVAILABLE:return fe.UNAVAILABLE;case zt.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case zt.NOT_FOUND:return fe.NOT_FOUND;case zt.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case zt.ABORTED:return fe.ABORTED;case zt.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case zt.DATA_LOSS:return fe.DATA_LOSS;default:return Ue(39323,{code:t})}}(st=zt||(zt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=new di([4294967295,4294967295],0);function x_(t){const e=QE().encode(t),s=new BE;return s.update(e),new Uint8Array(s.digest())}function L_(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),n=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new di([s,r],0),new di([n,i],0)]}class oy{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new El(`Invalid padding: ${s}`);if(r<0)throw new El(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new El(`Invalid padding when bitmap length is 0: ${s}`);this.pe=8*e.length-s,this.ye=di.fromNumber(this.pe)}we(e,s,r){let n=e.add(s.multiply(di.fromNumber(r)));return n.compare(N$)===1&&(n=new di([n.getBits(0),n.getBits(1)],0)),n.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const s=x_(e),[r,n]=L_(s);for(let i=0;i<this.hashCount;i++){const o=this.we(r,n,i);if(!this.be(o))return!1}return!0}static create(e,s,r){const n=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new oy(i,n,s);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const s=x_(e),[r,n]=L_(s);for(let i=0;i<this.hashCount;i++){const o=this.we(r,n,i);this.Se(o)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,s,r,n,i){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const n=new Map;return n.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new Gh(Ve.min(),n,new $t(Ke),Dn(),et())}}class Mc{constructor(e,s,r,n,i){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new Mc(r,s,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,s,r,n){this.De=e,this.removedTargetIds=s,this.key=r,this.ve=n}}class AT{constructor(e,s){this.targetId=e,this.Ce=s}}class PT{constructor(e,s,r=vs.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=n}}class R_{constructor(){this.Fe=0,this.Me=N_(),this.xe=vs.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=et(),s=et(),r=et();return this.Me.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:s=s.add(n);break;case 1:r=r.add(n);break;default:Ue(38017,{changeType:i})}}),new Mc(this.xe,this.Oe,e,s,r)}Qe(){this.Ne=!1,this.Me=N_()}$e(e,s){this.Ne=!0,this.Me=this.Me.insert(e,s)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,yt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class O${constructor(e){this.ze=e,this.je=new Map,this.He=Dn(),this.Je=Iu(),this.Ye=Iu(),this.Ze=new $t(Ke)}Xe(e){for(const s of e.De)e.ve&&e.ve.isFoundDocument()?this.et(s,e.ve):this.tt(s,e.key,e.ve);for(const s of e.removedTargetIds)this.tt(s,e.key,e.ve)}nt(e){this.forEachTarget(e,s=>{const r=this.rt(s);switch(e.state){case 0:this.it(s)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(s);break;case 3:this.it(s)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(s)&&(this.st(s),r.ke(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.je.forEach((r,n)=>{this.it(n)&&s(n)})}ot(e){const s=e.targetId,r=e.Ce.count,n=this._t(s);if(n){const i=n.target;if(Cm(i))if(r===0){const o=new Ne(i.path);this.tt(s,o,Ps.newNoDocument(o,Ve.min()))}else yt(r===1,20013,{expectedCount:r});else{const o=this.ut(s);if(o!==r){const l=this.ct(e),c=l?this.lt(l,e,o):1;if(c!==0){this.st(s);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,u)}}}}}ct(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:i=0}=s;let o,l;try{o=_i(r).toUint8Array()}catch(c){if(c instanceof eT)return _a("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new oy(o,n,i)}catch(c){return _a(c instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,s,r){return s.Ce.count===r-this.Tt(e,s.targetId)?0:2}Tt(e,s){const r=this.ze.getRemoteKeysForTarget(s);let n=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(s,i,null),n++)}),n}It(e){const s=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&Cm(l.target)){const c=new Ne(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Ps.newNoDocument(c,e))}i.Le&&(s.set(o,i.qe()),i.Qe())}});let r=et();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const n=new Gh(e,s,this.Ze,this.He,r);return this.He=Dn(),this.Je=Iu(),this.Ye=Iu(),this.Ze=new $t(Ke),n}et(e,s){if(!this.it(e))return;const r=this.dt(e,s.key)?2:0;this.rt(e).$e(s.key,r),this.He=this.He.insert(s.key,s),this.Je=this.Je.insert(s.key,this.Et(s.key).add(e)),this.Ye=this.Ye.insert(s.key,this.At(s.key).add(e))}tt(e,s,r){if(!this.it(e))return;const n=this.rt(e);this.dt(e,s)?n.$e(s,1):n.Ue(s),this.Ye=this.Ye.insert(s,this.At(s).delete(e)),this.Ye=this.Ye.insert(s,this.At(s).add(e)),r&&(this.He=this.He.insert(s,r))}removeTarget(e){this.je.delete(e)}ut(e){const s=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let s=this.je.get(e);return s||(s=new R_,this.je.set(e,s)),s}At(e){let s=this.Ye.get(e);return s||(s=new rs(Ke),this.Ye=this.Ye.insert(e,s)),s}Et(e){let s=this.Je.get(e);return s||(s=new rs(Ke),this.Je=this.Je.insert(e,s)),s}it(e){const s=this._t(e)!==null;return s||Ie("WatchChangeAggregator","Detected inactive target",e),s}_t(e){const s=this.je.get(e);return s&&s.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new R_),this.ze.getRemoteKeysForTarget(e).forEach(s=>{this.tt(e,s,null)})}dt(e,s){return this.ze.getRemoteKeysForTarget(e).has(s)}}function Iu(){return new $t(Ne.comparator)}function N_(){return new $t(Ne.comparator)}const D$={asc:"ASCENDING",desc:"DESCENDING"},M$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$$={and:"AND",or:"OR"};class U${constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Pm(t,e){return t.useProto3Json||Fh(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F$(t,e){return Od(t,e.toTimestamp())}function Yr(t){return yt(!!t,49232),Ve.fromTimestamp(function(s){const r=vi(s);return new ss(r.seconds,r.nanos)}(t))}function ay(t,e){return xm(t,e).canonicalString()}function xm(t,e){const s=function(n){return new Ft(["projects",n.projectId,"databases",n.database])}(t).child("documents");return e===void 0?s:s.child(e)}function LT(t){const e=Ft.fromString(t);return yt(MT(e),10190,{key:e.toString()}),e}function Lm(t,e){return ay(t.databaseId,e.path)}function Sp(t,e){const s=LT(e);if(s.get(1)!==t.databaseId.projectId)throw new Re(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Re(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new Ne(NT(s))}function RT(t,e){return ay(t.databaseId,e)}function V$(t){const e=LT(t);return e.length===4?Ft.emptyPath():NT(e)}function Rm(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NT(t){return yt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function O_(t,e,s){return{name:Lm(t,e),fields:s.value.mapValue.fields}}function q$(t,e){let s;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ue(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),n=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(yt(h===void 0||typeof h=="string",58123),vs.fromBase64String(h||"")):(yt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),vs.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?fe.UNKNOWN:CT(u.code);return new Re(h,u.message||"")}(o);s=new PT(r,n,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const n=Sp(t,r.document.name),i=Yr(r.document.updateTime),o=r.document.createTime?Yr(r.document.createTime):Ve.min(),l=new or({mapValue:{fields:r.document.fields}}),c=Ps.newFoundDocument(n,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];s=new Wu(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const n=Sp(t,r.document),i=r.readTime?Yr(r.readTime):Ve.min(),o=Ps.newNoDocument(n,i),l=r.removedTargetIds||[];s=new Wu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const n=Sp(t,r.document),i=r.removedTargetIds||[];s=new Wu([],i,n,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:n=0,unchangedNames:i}=r,o=new L$(n,i),l=r.targetId;s=new AT(l,o)}}return s}function B$(t,e){let s;if(e instanceof Wh)s={update:O_(t,e.key,e.value)};else if(e instanceof IT)s={delete:Lm(t,e.key)};else if(e instanceof Oo)s={update:O_(t,e.key,e.data),updateMask:X$(e.fieldMask)};else{if(!(e instanceof A$))return Ue(16599,{ft:e.type});s={verify:Lm(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nd)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw Ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(s.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:F$(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ue(27497)}(t,e.precondition)),s}function j$(t,e){return t&&t.length>0?(yt(e!==void 0,14353),t.map(s=>function(n,i){let o=n.updateTime?Yr(n.updateTime):Yr(i);return o.isEqual(Ve.min())&&(o=Yr(i)),new k$(o,n.transformResults||[])}(s,e))):[]}function H$(t,e){return{documents:[RT(t,e.path)]}}function z$(t,e){const s={structuredQuery:{}},r=e.path;let n;e.collectionGroup!==null?(n=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=RT(t,n);const i=function(u){if(u.length!==0)return DT(nn.create(u,"and"))}(e.filters);i&&(s.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Zo(m.field),direction:K$(m.dir)}}(h))}(e.orderBy);o&&(s.structuredQuery.orderBy=o);const l=Pm(t,e.limit);return l!==null&&(s.structuredQuery.limit=l),e.startAt&&(s.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:s,parent:n}}function W$(t){let e=V$(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let n=null;if(r>0){yt(r===1,65062);const h=s.from[0];h.allDescendants?n=h.collectionId:e=e.child(h.collectionId)}let i=[];s.where&&(i=function(f){const m=OT(f);return m instanceof nn&&uT(m)?m.getFilters():[m]}(s.where));let o=[];s.orderBy&&(o=function(f){return f.map(m=>function(v){return new Ld(ea(v.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(s.orderBy));let l=null;s.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Fh(m)?null:m}(s.limit));let c=null;s.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new xd(g,m)}(s.startAt));let u=null;return s.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new xd(g,m)}(s.endAt)),d$(e,n,o,i,l,"F",c,u)}function G$(t,e){const s=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:n})}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function OT(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=ea(s.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=ea(s.unaryFilter.field);return Jt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ea(s.unaryFilter.field);return Jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ea(s.unaryFilter.field);return Jt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(t):t.fieldFilter!==void 0?function(s){return Jt.create(ea(s.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return nn.create(s.compositeFilter.filters.map(r=>OT(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(s.compositeFilter.op))}(t):Ue(30097,{filter:t})}function K$(t){return D$[t]}function Y$(t){return M$[t]}function Q$(t){return $$[t]}function Zo(t){return{fieldPath:t.canonicalString()}}function ea(t){return ms.fromServerFormat(t.fieldPath)}function DT(t){return t instanceof Jt?function(s){if(s.op==="=="){if(w_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NAN"}};if(b_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(w_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NOT_NAN"}};if(b_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(s.field),op:Y$(s.op),value:s.value}}}(t):t instanceof nn?function(s){const r=s.getFilters().map(n=>DT(n));return r.length===1?r[0]:{compositeFilter:{op:Q$(s.op),filters:r}}}(t):Ue(54877,{filter:t})}function X$(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function MT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,s,r,n,i=Ve.min(),o=Ve.min(),l=vs.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this.wt=e}}function Z$(t){const e=W$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.yn=new t5}addToCollectionParentIndex(e,s){return this.yn.add(s),ne.resolve()}getCollectionParents(e,s){return ne.resolve(this.yn.getEntries(s))}addFieldIndex(e,s){return ne.resolve()}deleteFieldIndex(e,s){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,s){return ne.resolve()}getDocumentsMatchingTarget(e,s){return ne.resolve(null)}getIndexType(e,s){return ne.resolve(0)}getFieldIndexes(e,s){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,s){return ne.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,s){return ne.resolve(yi.min())}updateCollectionGroup(e,s,r){return ne.resolve()}updateIndexEntries(e,s){return ne.resolve()}}class t5{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),n=this.index[s]||new rs(Ft.comparator),i=!n.has(r);return this.index[s]=n.add(r),i}has(e){const s=e.lastSegment(),r=e.popLast(),n=this.index[s];return n&&n.has(r)}getEntries(e){return(this.index[e]||new rs(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$T=41943040;class Gs{static withCacheSize(e){return new Gs(e,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs.DEFAULT_COLLECTION_PERCENTILE=10,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gs.DEFAULT=new Gs($T,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gs.DISABLED=new Gs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ea(0)}static ir(){return new Ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LruGarbageCollector",s5=1048576;function $_([t,e],[s,r]){const n=Ke(t,s);return n===0?Ke(e,r):n}class r5{constructor(e){this.cr=e,this.buffer=new rs($_),this.lr=0}hr(){return++this.lr}Pr(e){const s=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();$_(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class n5{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Ie(M_,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ba(s)?Ie(M_,"Ignoring IndexedDB error during garbage collection: ",s):await qa(s)}await this.Ir(3e5)})}}class i5{constructor(e,s){this.Er=e,this.params=s}calculateTargetCount(e,s){return this.Er.dr(e).next(r=>Math.floor(s/100*r))}nthSequenceNumber(e,s){if(s===0)return ne.resolve(Uh.le);const r=new r5(s);return this.Er.forEachTarget(e,n=>r.Pr(n.sequenceNumber)).next(()=>this.Er.Ar(e,n=>r.Pr(n))).next(()=>r.maxValue)}removeTargets(e,s,r){return this.Er.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.Er.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(D_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D_):this.Rr(e,s))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,s){let r,n,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),n=this.params.maximumSequenceNumbersToCollect):n=f,o=Date.now(),this.nthSequenceNumber(e,n))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,s))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Xo()<=Ze.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${n} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:f})))}}function o5(t,e){return new i5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this.changes=new No(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Ps.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ne.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,s,r,n){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,s))).next(n=>(r!==null&&ql(r.mutation,n,Ir.empty(),ss.now()),n))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,s,r=et()){const n=Qi();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,r).next(i=>{let o=Sl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,s){const r=Qi();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,et()))}populateOverlays(e,s,r){const n=[];return r.forEach(i=>{s.has(i)||n.push(i)}),this.documentOverlayCache.getOverlays(e,n).next(i=>{i.forEach((o,l)=>{s.set(o,l)})})}computeViews(e,s,r,n){let i=Dn();const o=Vl(),l=function(){return Vl()}();return s.forEach((c,u)=>{const h=r.get(u.key);n.has(u.key)&&(h===void 0||h.mutation instanceof Oo)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ql(h.mutation,u,h.mutation.getFieldMask(),ss.now())):o.set(u.key,Ir.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),s.forEach((u,h)=>{var f;return l.set(u,new l5(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,s){const r=Vl();let n=new $t((o,l)=>o-l),i=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=s.get(c);if(u===null)return;let h=r.get(c)||Ir.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(n.get(l.batchId)||et()).add(c);n=n.insert(l.batchId,f)})}).next(()=>{const o=[],l=n.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=vT();h.forEach(m=>{if(!i.has(m)){const g=TT(s.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,s,r,n){return function(o){return Ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):h$(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,n):this.getDocumentsMatchingCollectionQuery(e,s,r,n)}getNextDocuments(e,s,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,n).next(i=>{const o=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,n-i.size):ne.resolve(Qi());let l=oc,c=i;return o.next(u=>ne.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?ne.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,et())).next(h=>({batchId:l,changes:yT(h)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ne(s)).next(r=>{let n=Sl();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(e,s,r,n){const i=s.collectionGroup;let o=Sl();return this.indexManager.getCollectionParents(e,i).next(l=>ne.forEach(l,c=>{const u=function(f,m){return new qh(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(s,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,n).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,s,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,i,n))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ps.newInvalidDocument(h)))});let l=Sl();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&ql(h.mutation,u,Ir.empty(),ss.now()),jh(s,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,s){return ne.resolve(this.Fr.get(s))}saveBundleMetadata(e,s){return this.Fr.set(s.id,function(n){return{id:n.id,version:n.version,createTime:Yr(n.createTime)}}(s)),ne.resolve()}getNamedQuery(e,s){return ne.resolve(this.Mr.get(s))}saveNamedQuery(e,s){return this.Mr.set(s.name,function(n){return{name:n.name,query:Z$(n.bundledQuery),readTime:Yr(n.readTime)}}(s)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.overlays=new $t(Ne.comparator),this.Or=new Map}getOverlay(e,s){return ne.resolve(this.overlays.get(s))}getOverlays(e,s){const r=Qi();return ne.forEach(s,n=>this.getOverlay(e,n).next(i=>{i!==null&&r.set(n,i)})).next(()=>r)}saveOverlays(e,s,r){return r.forEach((n,i)=>{this.St(e,s,i)}),ne.resolve()}removeOverlaysForBatchId(e,s,r){const n=this.Or.get(r);return n!==void 0&&(n.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),ne.resolve()}getOverlaysForCollection(e,s,r){const n=Qi(),i=s.length+1,o=new Ne(s.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!s.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&n.set(c.getKey(),c)}return ne.resolve(n)}getOverlaysForCollectionGroup(e,s,r,n){let i=new $t((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===s&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Qi(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Qi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=n)););return ne.resolve(l)}St(e,s,r){const n=this.overlays.get(r.key);if(n!==null){const o=this.Or.get(n.largestBatchId).delete(r.key);this.Or.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new x$(s,r));let i=this.Or.get(s);i===void 0&&(i=et(),this.Or.set(s,i)),this.Or.set(s,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(){this.sessionToken=vs.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.Nr=new rs(as.Br),this.Lr=new rs(as.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,s){const r=new as(e,s);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,s){e.forEach(r=>this.addReference(r,s))}removeReference(e,s){this.Qr(new as(e,s))}$r(e,s){e.forEach(r=>this.removeReference(r,s))}Ur(e){const s=new Ne(new Ft([])),r=new as(s,e),n=new as(s,e+1),i=[];return this.Lr.forEachInRange([r,n],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const s=new Ne(new Ft([])),r=new as(s,e),n=new as(s,e+1);let i=et();return this.Lr.forEachInRange([r,n],o=>{i=i.add(o.key)}),i}containsKey(e){const s=new as(e,0),r=this.Nr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class as{constructor(e,s){this.key=e,this.Gr=s}static Br(e,s){return Ne.comparator(e.key,s.key)||Ke(e.Gr,s.Gr)}static kr(e,s){return Ke(e.Gr,s.Gr)||Ne.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Jn=1,this.zr=new rs(as.Br)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,n){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new P$(i,s,r,n);this.mutationQueue.push(o);for(const l of n)this.zr=this.zr.add(new as(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,s){return ne.resolve(this.jr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,n=this.Hr(r),i=n<0?0:n;return ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Jg:this.Jn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new as(s,0),n=new as(s,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,n],o=>{const l=this.jr(o.Gr);i.push(l)}),ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new rs(Ke);return s.forEach(n=>{const i=new as(n,0),o=new as(n,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],l=>{r=r.add(l.Gr)})}),ne.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,n=r.length+1;let i=r;Ne.isDocumentKey(i)||(i=i.child(""));const o=new as(new Ne(i),0);let l=new rs(Ke);return this.zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===n&&(l=l.add(c.Gr)),!0)},o),ne.resolve(this.Jr(l))}Jr(e){const s=[];return e.forEach(r=>{const n=this.jr(r);n!==null&&s.push(n)}),s}removeMutationBatch(e,s){yt(this.Yr(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return ne.forEach(s.mutations,n=>{const i=new as(n.key,s.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,s){const r=new as(s,0),n=this.zr.firstAfterOrEqual(r);return ne.resolve(s.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Yr(e,s){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const s=this.Hr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.Zr=e,this.docs=function(){return new $t(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,n=this.docs.get(r),i=n?n.size:0,o=this.Zr(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ne.resolve(r?r.document.mutableCopy():Ps.newInvalidDocument(s))}getEntries(e,s){let r=Dn();return s.forEach(n=>{const i=this.docs.get(n);r=r.insert(n,i?i.document.mutableCopy():Ps.newInvalidDocument(n))}),ne.resolve(r)}getDocumentsMatchingQuery(e,s,r,n){let i=Dn();const o=s.path,l=new Ne(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||j3(B3(h),r)<=0||(n.has(h.key)||jh(s,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ne.resolve(i)}getAllFromCollectionGroup(e,s,r,n){Ue(9500)}Xr(e,s){return ne.forEach(this.docs,r=>s(r))}newChangeBuffer(e){return new m5(this)}getSize(e){return ne.resolve(this.size)}}class m5 extends a5{constructor(e){super(),this.vr=e}applyChanges(e){const s=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?s.push(this.vr.addEntry(e,n)):this.vr.removeEntry(r)}),ne.waitFor(s)}getFromCache(e,s){return this.vr.getEntry(e,s)}getAllFromCache(e,s){return this.vr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e){this.persistence=e,this.ei=new No(s=>ty(s),sy),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.ti=0,this.ni=new ly,this.targetCount=0,this.ri=Ea.rr()}forEachTarget(e,s){return this.ei.forEach((r,n)=>s(n)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.ti&&(this.ti=s),ne.resolve()}ar(e){this.ei.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ri=new Ea(s),this.highestTargetId=s),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,s){return this.ar(s),this.targetCount+=1,ne.resolve()}updateTargetData(e,s){return this.ar(s),ne.resolve()}removeTargetData(e,s){return this.ei.delete(s.target),this.ni.Ur(s.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,s,r){let n=0;const i=[];return this.ei.forEach((o,l)=>{l.sequenceNumber<=s&&r.get(l.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),n++)}),ne.waitFor(i).next(()=>n)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,s){const r=this.ei.get(s)||null;return ne.resolve(r)}addMatchingKeys(e,s,r){return this.ni.qr(s,r),ne.resolve()}removeMatchingKeys(e,s,r){this.ni.$r(s,r);const n=this.persistence.referenceDelegate,i=[];return n&&s.forEach(o=>{i.push(n.markPotentiallyOrphaned(e,o))}),ne.waitFor(i)}removeMatchingKeysForTargetId(e,s){return this.ni.Ur(s),ne.resolve()}getMatchingKeysForTargetId(e,s){const r=this.ni.Wr(s);return ne.resolve(r)}containsKey(e,s){return ne.resolve(this.ni.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,s){this.ii={},this.overlays={},this.si=new Uh(0),this.oi=!1,this.oi=!0,this._i=new h5,this.referenceDelegate=e(this),this.ai=new g5(this),this.indexManager=new e5,this.remoteDocumentCache=function(n){return new p5(n)}(r=>this.referenceDelegate.ui(r)),this.serializer=new J$(s),this.ci=new u5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new d5,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ii[e.toKey()];return r||(r=new f5(s,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,s,r){Ie("MemoryPersistence","Starting transaction:",e);const n=new y5(this.si.next());return this.referenceDelegate.li(),r(n).next(i=>this.referenceDelegate.hi(n).next(()=>i)).toPromise().then(i=>(n.raiseOnCommittedEvent(),i))}Pi(e,s){return ne.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,s)))}}class y5 extends z3{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Ti=new ly,this.Ii=null}static Ei(e){return new cy(e)}get di(){if(this.Ii)return this.Ii;throw Ue(60996)}addReference(e,s,r){return this.Ti.addReference(r,s),this.di.delete(r.toString()),ne.resolve()}removeReference(e,s,r){return this.Ti.removeReference(r,s),this.di.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,s){return this.di.add(s.toString()),ne.resolve()}removeTarget(e,s){this.Ti.Ur(s.targetId).forEach(n=>this.di.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next(n=>{n.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,s))}li(){this.Ii=new Set}hi(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,r=>{const n=Ne.fromPath(r);return this.Ai(e,n).next(i=>{i||s.removeEntry(n,Ve.min())})}).next(()=>(this.Ii=null,s.apply(e)))}updateLimboDocument(e,s){return this.Ai(e,s).next(r=>{r?this.di.delete(s.toString()):this.di.add(s.toString())})}ui(e){return 0}Ai(e,s){return ne.or([()=>ne.resolve(this.Ti.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Pi(e,s)])}}class Dd{constructor(e,s){this.persistence=e,this.Ri=new No(r=>K3(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=o5(this,s)}static Ei(e,s){return new Dd(e,s)}li(){}hi(e){return ne.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}dr(e){const s=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>s.next(n=>r+n))}Vr(e){let s=0;return this.Ar(e,r=>{s++}).next(()=>s)}Ar(e,s){return ne.forEach(this.Ri,(r,n)=>this.gr(e,r,n).next(i=>i?ne.resolve():s(n)))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.Xr(e,o=>this.gr(e,o,s).next(l=>{l||(r++,i.removeEntry(o,Ve.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,s){return this.Ri.set(s,e.currentSequenceNumber),ne.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.Ri.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,s,r){return this.Ri.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,s){return this.Ri.set(s,e.currentSequenceNumber),ne.resolve()}ui(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=ju(e.data.value)),s}gr(e,s,r){return ne.or([()=>this.persistence.Pi(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const n=this.Ri.get(s);return ne.resolve(n!==void 0&&n>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,s,r,n){this.targetId=e,this.fromCache=s,this.ls=r,this.hs=n}static Ps(e,s){let r=et(),n=et();for(const i of s.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new uy(e,s.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return dM()?8:W3(Os())>0?6:4}()}initialize(e,s){this.As=e,this.indexManager=s,this.Ts=!0}getDocumentsMatchingQuery(e,s,r,n){const i={result:null};return this.Rs(e,s).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,s,n,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new v5;return this.fs(e,s,o).next(l=>{if(i.result=l,this.Is)return this.gs(e,s,o,l.size)})}).next(()=>i.result)}gs(e,s,r,n){return r.documentReadCount<this.Es?(Xo()<=Ze.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Jo(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ne.resolve()):(Xo()<=Ze.DEBUG&&Ie("QueryEngine","Query:",Jo(s),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ds*n?(Xo()<=Ze.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Jo(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(s))):ne.resolve())}Rs(e,s){if(k_(s))return ne.resolve(null);let r=Kr(s);return this.indexManager.getIndexType(e,r).next(n=>n===0?null:(s.limit!==null&&n===1&&(s=Am(s,null,"F"),r=Kr(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=et(...i);return this.As.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ps(s,l);return this.ys(s,u,o,c.readTime)?this.Rs(e,Am(s,null,"F")):this.ws(e,u,s,c)}))})))}Vs(e,s,r,n){return k_(s)||n.isEqual(Ve.min())?ne.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(s,i);return this.ys(s,o,r,n)?ne.resolve(null):(Xo()<=Ze.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Jo(s)),this.ws(e,o,s,q3(n,oc)).next(l=>l))})}ps(e,s){let r=new rs(mT(e));return s.forEach((n,i)=>{jh(e,i)&&(r=r.add(i))}),r}ys(e,s,r,n){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const i=e.limitType==="F"?s.last():s.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}fs(e,s,r){return Xo()<=Ze.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Jo(s)),this.As.getDocumentsMatchingQuery(e,s,yi.min(),r)}ws(e,s,r,n){return this.As.getDocumentsMatchingQuery(e,r,n).next(i=>(s.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="LocalStore",b5=3e8;class w5{constructor(e,s,r,n){this.persistence=e,this.bs=s,this.serializer=n,this.Ss=new $t(Ke),this.Ds=new No(i=>ty(i),sy),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c5(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.Ss))}}function S5(t,e,s,r){return new w5(t,e,s,r)}async function FT(t,e){const s=He(t);return await s.persistence.runTransaction("Handle user change","readonly",r=>{let n;return s.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,s.Fs(e),s.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=et();for(const u of n){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return s.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:o,addedBatchIds:l}))})})}function E5(t,e){const s=He(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=e.batch.keys(),i=s.Cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,m=f.keys();let g=ne.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(c,v)).next(I=>{const C=u.docVersions.get(v);yt(C!==null,48541),I.version.compareTo(C)<0&&(f.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),h.addEntry(I)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(s,r,e,i).next(()=>i.apply(r)).next(()=>s.mutationQueue.performConsistencyCheck(r)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(r,n,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=et();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>s.localDocuments.getDocuments(r,n))})}function VT(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.ai.getLastRemoteSnapshotVersion(s))}function T5(t,e){const s=He(t),r=e.snapshotVersion;let n=s.Ss;return s.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=s.Cs.newChangeBuffer({trackRemovals:!0});n=s.Ss;const l=[];e.targetChanges.forEach((h,f)=>{const m=n.get(f);if(!m)return;l.push(s.ai.removeMatchingKeys(i,h.removedDocuments,f).next(()=>s.ai.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(vs.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),n=n.insert(f,g),function(I,C,U){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=b5?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(m,g,h)&&l.push(s.ai.updateTargetData(i,g))});let c=Dn(),u=et();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(s.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(k5(i,o,e.documentUpdates).next(h=>{c=h.xs,u=h.Os})),!r.isEqual(Ve.min())){const h=s.ai.getLastRemoteSnapshotVersion(i).next(f=>s.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return ne.waitFor(l).next(()=>o.apply(i)).next(()=>s.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(s.Ss=n,i))}function k5(t,e,s){let r=et(),n=et();return s.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Dn();return s.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(n=n.add(l)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ie(dy,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{xs:o,Os:n}})}function I5(t,e){const s=He(t);return s.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jg),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function C5(t,e){const s=He(t);return s.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return s.ai.getTargetData(r,e).next(i=>i?(n=i,ne.resolve(n)):s.ai.allocateTargetId(r).next(o=>(n=new ii(e,o,"TargetPurposeListen",r.currentSequenceNumber),s.ai.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=s.Ss.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(s.Ss=s.Ss.insert(r.targetId,r),s.Ds.set(e,r.targetId)),r})}async function Nm(t,e,s){const r=He(t),n=r.Ss.get(e),i=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,n))}catch(o){if(!Ba(o))throw o;Ie(dy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(n.target)}function U_(t,e,s){const r=He(t);let n=Ve.min(),i=et();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=He(c),m=f.Ds.get(h);return m!==void 0?ne.resolve(f.Ss.get(m)):f.ai.getTargetData(u,h)}(r,o,Kr(e)).next(l=>{if(l)return n=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,s?n:Ve.min(),s?i:et())).next(l=>(A5(r,p$(e),l),{documents:l,Ns:i})))}function A5(t,e,s){let r=t.vs.get(e)||Ve.min();s.forEach((n,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class F_{constructor(){this.activeTargetIds=b$()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P5{constructor(){this.So=new F_,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,s,r){this.Do[e]=s}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new F_,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="ConnectivityMonitor";class q_{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ie(V_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ie(V_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu=null;function Om(){return Cu===null?Cu=function(){return 268435456+Math.round(2147483648*Math.random())}():Cu++,"0x"+Cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="RestConnection",L5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class R5{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Lo=s+"://"+e.host,this.ko=`projects/${r}/databases/${n}`,this.qo=this.databaseId.database===Ad?`project_id=${r}`:`project_id=${r}&database_id=${n}`}Qo(e,s,r,n,i){const o=Om(),l=this.$o(e,s.toUriEncodedString());Ie(Ep,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,n,i);const{host:u}=new URL(l),h=Mh(u);return this.Ko(e,l,c,r,h).then(f=>(Ie(Ep,`Received RPC '${e}' ${o}: `,f),f),f=>{throw _a(Ep,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Wo(e,s,r,n,i,o){return this.Qo(e,s,r,n,i)}Uo(e,s,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Va}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((n,i)=>e[i]=n),r&&r.headers.forEach((n,i)=>e[i]=n)}$o(e,s){const r=L5[e];return`${this.Lo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="WebChannelConnection";class O5 extends R5{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,s,r,n,i){const o=Om();return new Promise((l,c)=>{const u=new jE;u.setWithCredentials(!0),u.listenOnce(HE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Bu.NO_ERROR:const f=u.getResponseJson();Ie(ws,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Bu.TIMEOUT:Ie(ws,`RPC '${e}' ${o} timed out`),c(new Re(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Bu.HTTP_ERROR:const m=u.getStatus();if(Ie(ws,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const I=function(U){const D=U.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(D)>=0?D:fe.UNKNOWN}(v.status);c(new Re(I,v.message))}else c(new Re(fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Re(fe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{s_:e,streamId:o,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{Ie(ws,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(n);Ie(ws,`RPC '${e}' ${o} sending request:`,n),u.send(s,"POST",h,r,15)})}a_(e,s,r){const n=Om(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GE(),l=WE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,s,r),c.encodeInitMessageHeaders=!0;const h=i.join("");Ie(ws,`Creating RPC '${e}' stream ${n}: ${h}`,c);const f=o.createWebChannel(h,c);let m=!1,g=!1;const v=new N5({Go:C=>{g?Ie(ws,`Not sending because RPC '${e}' stream ${n} is closed:`,C):(m||(Ie(ws,`Opening RPC '${e}' stream ${n} transport.`),f.open(),m=!0),Ie(ws,`RPC '${e}' stream ${n} sending:`,C),f.send(C))},zo:()=>f.close()}),I=(C,U,D)=>{C.listen(U,E=>{try{D(E)}catch(L){setTimeout(()=>{throw L},0)}})};return I(f,wl.EventType.OPEN,()=>{g||(Ie(ws,`RPC '${e}' stream ${n} transport opened.`),v.t_())}),I(f,wl.EventType.CLOSE,()=>{g||(g=!0,Ie(ws,`RPC '${e}' stream ${n} transport closed`),v.r_())}),I(f,wl.EventType.ERROR,C=>{g||(g=!0,_a(ws,`RPC '${e}' stream ${n} transport errored. Name:`,C.name,"Message:",C.message),v.r_(new Re(fe.UNAVAILABLE,"The operation could not be completed")))}),I(f,wl.EventType.MESSAGE,C=>{var U;if(!g){const D=C.data[0];yt(!!D,16349);const E=D,L=(E==null?void 0:E.error)||((U=E[0])===null||U===void 0?void 0:U.error);if(L){Ie(ws,`RPC '${e}' stream ${n} received error:`,L);const $=L.status;let M=function(_){const P=zt[_];if(P!==void 0)return CT(P)}($),A=L.message;M===void 0&&(M=fe.INTERNAL,A="Unknown error status: "+$+" with message "+L.message),g=!0,v.r_(new Re(M,A)),f.close()}else Ie(ws,`RPC '${e}' stream ${n} received:`,D),v.i_(D)}}),I(l,zE.STAT_EVENT,C=>{C.stat===Sm.PROXY?Ie(ws,`RPC '${e}' stream ${n} detected buffering proxy`):C.stat===Sm.NOPROXY&&Ie(ws,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{v.n_()},0),v}}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){return new U$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,s,r=1e3,n=1.5,i=6e4){this.bi=e,this.timerId=s,this.u_=r,this.c_=n,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const s=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),n=Math.max(0,s-r);n>0&&Ie("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.h_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,n,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="PersistentStream";class BT{constructor(e,s,r,n,i,o,l,c){this.bi=e,this.R_=r,this.V_=n,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new qT(e,s)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,s){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():s&&s.code===fe.RESOURCE_EXHAUSTED?(On(s.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):s&&s.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(s)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),s=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.m_===s&&this.B_(r,n)},r=>{e(()=>{const n=new Re(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(n)})})}B_(e,s){const r=this.N_(this.m_);this.stream=this.k_(e,s),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(n=>{r(()=>this.L_(n))}),this.stream.onMessage(n=>{r(()=>++this.p_==1?this.q_(n):this.onNext(n))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Ie(B_,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return s=>{this.bi.enqueueAndForget(()=>this.m_===e?s():(Ie(B_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D5 extends BT{constructor(e,s,r,n,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,n,o),this.serializer=i}k_(e,s){return this.connection.a_("Listen",e,s)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const s=q$(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?Yr(o.readTime):Ve.min()}(e);return this.listener.Q_(s,r)}U_(e){const s={};s.database=Rm(this.serializer),s.addTarget=function(i,o){let l;const c=o.target;if(l=Cm(c)?{documents:H$(i,c)}:{query:z$(i,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=xT(i,o.resumeToken);const u=Pm(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ve.min())>0){l.readTime=Od(i,o.snapshotVersion.toTimestamp());const u=Pm(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=G$(this.serializer,e);r&&(s.labels=r),this.F_(s)}K_(e){const s={};s.database=Rm(this.serializer),s.removeTarget=e,this.F_(s)}}class M5 extends BT{constructor(e,s,r,n,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,n,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,s){return this.connection.a_("Write",e,s)}q_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const s=j$(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.j_(r,s)}H_(){const e={};e.database=Rm(this.serializer),this.F_(e)}G_(e){const s={streamToken:this.lastStreamToken,writes:e.map(r=>B$(this.serializer,r))};this.F_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{}class U5 extends $5{constructor(e,s,r,n){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=n,this.J_=!1}Y_(){if(this.J_)throw new Re(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,s,r,n){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,xm(s,r),n,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(fe.UNKNOWN,i.toString())})}Wo(e,s,r,n,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,xm(s,r),n,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(fe.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class F5{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(On(s),this.ea=!1):Ie("OnlineStateTracker",s)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="RemoteStore";class V5{constructor(e,s,r,n,i){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Do(this)&&(Ie(go,"Restarting streams for network reachability change."),await async function(c){const u=He(c);u.aa.add(4),await $c(u),u.la.set("Unknown"),u.aa.delete(4),await Yh(u)}(this))})}),this.la=new F5(r,n)}}async function Yh(t){if(Do(t))for(const e of t.ua)await e(!0)}async function $c(t){for(const e of t.ua)await e(!1)}function jT(t,e){const s=He(t);s._a.has(e.targetId)||(s._a.set(e.targetId,e),my(s)?py(s):ja(s).b_()&&fy(s,e))}function hy(t,e){const s=He(t),r=ja(s);s._a.delete(e),r.b_()&&HT(s,e),s._a.size===0&&(r.b_()?r.v_():Do(s)&&s.la.set("Unknown"))}function fy(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}ja(t).U_(e)}function HT(t,e){t.ha.Ke(e),ja(t).K_(e)}function py(t){t.ha=new O$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.la.ta()}function my(t){return Do(t)&&!ja(t).w_()&&t._a.size>0}function Do(t){return He(t).aa.size===0}function zT(t){t.ha=void 0}async function q5(t){t.la.set("Online")}async function B5(t){t._a.forEach((e,s)=>{fy(t,e)})}async function j5(t,e){zT(t),my(t)?(t.la.ia(e),py(t)):t.la.set("Unknown")}async function H5(t,e,s){if(t.la.set("Online"),e instanceof PT&&e.state===2&&e.cause)try{await async function(n,i){const o=i.cause;for(const l of i.targetIds)n._a.has(l)&&(await n.remoteSyncer.rejectListen(l,o),n._a.delete(l),n.ha.removeTarget(l))}(t,e)}catch(r){Ie(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Md(t,r)}else if(e instanceof Wu?t.ha.Xe(e):e instanceof AT?t.ha.ot(e):t.ha.nt(e),!s.isEqual(Ve.min()))try{const r=await VT(t.localStore);s.compareTo(r)>=0&&await function(i,o){const l=i.ha.It(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i._a.get(u);h&&i._a.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i._a.get(c);if(!h)return;i._a.set(c,h.withResumeToken(vs.EMPTY_BYTE_STRING,h.snapshotVersion)),HT(i,c);const f=new ii(h.target,c,u,h.sequenceNumber);fy(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,s)}catch(r){Ie(go,"Failed to raise snapshot:",r),await Md(t,r)}}async function Md(t,e,s){if(!Ba(e))throw e;t.aa.add(1),await $c(t),t.la.set("Offline"),s||(s=()=>VT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie(go,"Retrying IndexedDB access"),await s(),t.aa.delete(1),await Yh(t)})}function WT(t,e){return e().catch(s=>Md(t,s,e))}async function Qh(t){const e=He(t),s=wi(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:Jg;for(;z5(e);)try{const n=await I5(e.localStore,r);if(n===null){e.oa.length===0&&s.v_();break}r=n.batchId,W5(e,n)}catch(n){await Md(e,n)}GT(e)&&KT(e)}function z5(t){return Do(t)&&t.oa.length<10}function W5(t,e){t.oa.push(e);const s=wi(t);s.b_()&&s.W_&&s.G_(e.mutations)}function GT(t){return Do(t)&&!wi(t).w_()&&t.oa.length>0}function KT(t){wi(t).start()}async function G5(t){wi(t).H_()}async function K5(t){const e=wi(t);for(const s of t.oa)e.G_(s.mutations)}async function Y5(t,e,s){const r=t.oa.shift(),n=iy.from(r,e,s);await WT(t,()=>t.remoteSyncer.applySuccessfulWrite(n)),await Qh(t)}async function Q5(t,e){e&&wi(t).W_&&await async function(r,n){if(function(o){return R$(o)&&o!==fe.ABORTED}(n.code)){const i=r.oa.shift();wi(r).D_(),await WT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,n)),await Qh(r)}}(t,e),GT(t)&&KT(t)}async function j_(t,e){const s=He(t);s.asyncQueue.verifyOperationInProgress(),Ie(go,"RemoteStore received new credentials");const r=Do(s);s.aa.add(3),await $c(s),r&&s.la.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.aa.delete(3),await Yh(s)}async function X5(t,e){const s=He(t);e?(s.aa.delete(2),await Yh(s)):e||(s.aa.add(2),await $c(s),s.la.set("Unknown"))}function ja(t){return t.Pa||(t.Pa=function(s,r,n){const i=He(s);return i.Y_(),new D5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{jo:q5.bind(null,t),Jo:B5.bind(null,t),Zo:j5.bind(null,t),Q_:H5.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),my(t)?py(t):t.la.set("Unknown")):(await t.Pa.stop(),zT(t))})),t.Pa}function wi(t){return t.Ta||(t.Ta=function(s,r,n){const i=He(s);return i.Y_(),new M5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:G5.bind(null,t),Zo:Q5.bind(null,t),z_:K5.bind(null,t),j_:Y5.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Qh(t)):(await t.Ta.stop(),t.oa.length>0&&(Ie(go,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,s,r,n,i){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,n,i){const o=Date.now()+r,l=new gy(e,s,o,n,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(t,e){if(On("AsyncQueue",`${e}: ${t}`),Ba(t))return new Re(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{static emptySet(e){return new aa(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||Ne.comparator(s.key,r.key):(s,r)=>Ne.comparator(s.key,r.key),this.keyedMap=Sl(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,r)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const n=s.getNext().key,i=r.getNext().key;if(!n.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.Ia=new $t(Ne.comparator)}track(e){const s=e.doc.key,r=this.Ia.get(s);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(s,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(s):e.type===1&&r.type===2?this.Ia=this.Ia.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(s,{type:2,doc:e.doc}):Ue(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(s,e)}da(){const e=[];return this.Ia.inorderTraversal((s,r)=>{e.push(r)}),e}}class Ta{constructor(e,s,r,n,i,o,l,c,u){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,s,r,n,i){const o=[];return s.forEach(l=>{o.push({type:0,doc:l})}),new Ta(e,s,aa.emptySet(s),o,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let n=0;n<s.length;n++)if(s[n].type!==r[n].type||!s[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Z5{constructor(){this.queries=z_(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(s,r){const n=He(s),i=n.queries;n.queries=z_(),i.forEach((o,l)=>{for(const c of l.Ra)c.onError(r)})})(this,new Re(fe.ABORTED,"Firestore shutting down"))}}function z_(){return new No(t=>pT(t),Bh)}async function e6(t,e){const s=He(t);let r=3;const n=e.query;let i=s.queries.get(n);i?!i.Va()&&e.ma()&&(r=2):(i=new J5,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await s.onListen(n,!0);break;case 1:i.Aa=await s.onListen(n,!1);break;case 2:await s.onFirstRemoteStoreListen(n)}}catch(o){const l=yy(o,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(l)}s.queries.set(n,i),i.Ra.push(e),e.ga(s.onlineState),i.Aa&&e.pa(i.Aa)&&vy(s)}async function t6(t,e){const s=He(t),r=e.query;let n=3;const i=s.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?n=e.ma()?0:1:!i.Va()&&e.ma()&&(n=2))}switch(n){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function s6(t,e){const s=He(t);let r=!1;for(const n of e){const i=n.query,o=s.queries.get(i);if(o){for(const l of o.Ra)l.pa(n)&&(r=!0);o.Aa=n}}r&&vy(s)}function r6(t,e,s){const r=He(t),n=r.queries.get(e);if(n)for(const i of n.Ra)i.onError(s);r.queries.delete(e)}function vy(t){t.fa.forEach(e=>{e.next()})}var Dm,W_;(W_=Dm||(Dm={})).ya="default",W_.Cache="cache";class n6{constructor(e,s,r){this.query=e,this.wa=s,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const n of e.docChanges)n.type!==3&&r.push(n);e=new Ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.ba?this.Da(e)&&(this.wa.next(e),s=!0):this.va(e,this.onlineState)&&(this.Ca(e),s=!0),this.Sa=e,s}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let s=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),s=!0),s}va(e,s){if(!e.fromCache||!this.ma())return!0;const r=s!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const s=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Dm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.key=e}}class QT{constructor(e){this.key=e}}class i6{constructor(e,s){this.query=e,this.qa=s,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=et(),this.mutatedKeys=et(),this.Ua=mT(e),this.Ka=new aa(this.Ua)}get Wa(){return this.qa}Ga(e,s){const r=s?s.za:new H_,n=s?s.Ka:this.Ka;let i=s?s.mutatedKeys:this.mutatedKeys,o=n,l=!1;const c=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,u=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((h,f)=>{const m=n.get(h),g=jh(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;m&&g?m.data.isEqual(g.data)?v!==I&&(r.track({type:3,doc:g}),C=!0):this.ja(m,g)||(r.track({type:2,doc:g}),C=!0,(c&&this.Ua(g,c)>0||u&&this.Ua(g,u)<0)&&(l=!0)):!m&&g?(r.track({type:0,doc:g}),C=!0):m&&!g&&(r.track({type:1,doc:m}),C=!0,(c||u)&&(l=!0)),C&&(g?(o=o.add(g),i=I?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:l,mutatedKeys:i}}ja(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,n){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,f)=>function(g,v){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:C})}};return I(g)-I(v)}(h.type,f.type)||this.Ua(h.doc,f.doc)),this.Ha(r),n=n!=null&&n;const l=s&&!n?this.Ja():[],c=this.$a.size===0&&this.current&&!n?1:0,u=c!==this.Qa;return this.Qa=c,o.length!==0||u?{snapshot:new Ta(this.query,e.Ka,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new H_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(s=>this.qa=this.qa.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.qa=this.qa.delete(s)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=et(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const s=[];return e.forEach(r=>{this.$a.has(r)||s.push(new QT(r))}),this.$a.forEach(r=>{e.has(r)||s.push(new YT(r))}),s}Xa(e){this.qa=e.Ns,this.$a=et();const s=this.Ga(e.documents);return this.applyChanges(s,!0)}eu(){return Ta.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const _y="SyncEngine";class o6{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class a6{constructor(e){this.key=e,this.tu=!1}}class l6{constructor(e,s,r,n,i,o){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new No(l=>pT(l),Bh),this.iu=new Map,this.su=new Set,this.ou=new $t(Ne.comparator),this._u=new Map,this.au=new ly,this.uu={},this.cu=new Map,this.lu=Ea.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function c6(t,e,s=!0){const r=sk(t);let n;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),n=i.view.eu()):n=await XT(r,e,s,!0),n}async function u6(t,e){const s=sk(t);await XT(s,e,!0,!1)}async function XT(t,e,s,r){const n=await C5(t.localStore,Kr(e)),i=n.targetId,o=t.sharedClientState.addLocalQueryTarget(i,s);let l;return r&&(l=await d6(t,e,i,o==="current",n.resumeToken)),t.isPrimaryClient&&s&&jT(t.remoteStore,n),l}async function d6(t,e,s,r,n){t.Pu=(f,m,g)=>async function(I,C,U,D){let E=C.view.Ga(U);E.ys&&(E=await U_(I.localStore,C.query,!1).then(({documents:A})=>C.view.Ga(A,E)));const L=D&&D.targetChanges.get(C.targetId),$=D&&D.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(E,I.isPrimaryClient,L,$);return K_(I,C.targetId,M.Ya),M.snapshot}(t,f,m,g);const i=await U_(t.localStore,e,!0),o=new i6(e,i.Ns),l=o.Ga(i.documents),c=Mc.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",n),u=o.applyChanges(l,t.isPrimaryClient,c);K_(t,s,u.Ya);const h=new o6(e,s,o);return t.ru.set(e,h),t.iu.has(s)?t.iu.get(s).push(e):t.iu.set(s,[e]),u.snapshot}async function h6(t,e,s){const r=He(t),n=r.ru.get(e),i=r.iu.get(n.targetId);if(i.length>1)return r.iu.set(n.targetId,i.filter(o=>!Bh(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await Nm(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),s&&hy(r.remoteStore,n.targetId),Mm(r,n.targetId)}).catch(qa)):(Mm(r,n.targetId),await Nm(r.localStore,n.targetId,!0))}async function f6(t,e){const s=He(t),r=s.ru.get(e),n=s.iu.get(r.targetId);s.isPrimaryClient&&n.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),hy(s.remoteStore,r.targetId))}async function p6(t,e,s){const r=w6(t);try{const n=await function(o,l){const c=He(o),u=ss.now(),h=l.reduce((g,v)=>g.add(v.key),et());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Dn(),I=et();return c.Cs.getEntries(g,h).next(C=>{v=C,v.forEach((U,D)=>{D.isValidDocument()||(I=I.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(C=>{f=C;const U=[];for(const D of l){const E=C$(D,f.get(D.key).overlayedDocument);E!=null&&U.push(new Oo(D.key,E,aT(E.value.mapValue),Cn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,U,l)}).next(C=>{m=C;const U=C.applyToLocalDocumentSet(f,I);return c.documentOverlayCache.saveOverlays(g,C.batchId,U)})}).then(()=>({batchId:m.batchId,changes:yT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(n.batchId),function(o,l,c){let u=o.uu[o.currentUser.toKey()];u||(u=new $t(Ke)),u=u.insert(l,c),o.uu[o.currentUser.toKey()]=u}(r,n.batchId,s),await Uc(r,n.changes),await Qh(r.remoteStore)}catch(n){const i=yy(n,"Failed to persist write");s.reject(i)}}async function JT(t,e){const s=He(t);try{const r=await T5(s.localStore,e);e.targetChanges.forEach((n,i)=>{const o=s._u.get(i);o&&(yt(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,22616),n.addedDocuments.size>0?o.tu=!0:n.modifiedDocuments.size>0?yt(o.tu,14607):n.removedDocuments.size>0&&(yt(o.tu,42227),o.tu=!1))}),await Uc(s,r,e)}catch(r){await qa(r)}}function G_(t,e,s){const r=He(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const n=[];r.ru.forEach((i,o)=>{const l=o.view.ga(e);l.snapshot&&n.push(l.snapshot)}),function(o,l){const c=He(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Ra)m.ga(l)&&(u=!0)}),u&&vy(c)}(r.eventManager,e),n.length&&r.nu.Q_(n),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m6(t,e,s){const r=He(t);r.sharedClientState.updateQueryState(e,"rejected",s);const n=r._u.get(e),i=n&&n.key;if(i){let o=new $t(Ne.comparator);o=o.insert(i,Ps.newNoDocument(i,Ve.min()));const l=et().add(i),c=new Gh(Ve.min(),new Map,new $t(Ke),o,l);await JT(r,c),r.ou=r.ou.remove(i),r._u.delete(e),by(r)}else await Nm(r.localStore,e,!1).then(()=>Mm(r,e,s)).catch(qa)}async function g6(t,e){const s=He(t),r=e.batch.batchId;try{const n=await E5(s.localStore,e);ek(s,r,null),ZT(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Uc(s,n)}catch(n){await qa(n)}}async function y6(t,e,s){const r=He(t);try{const n=await function(o,l){const c=He(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(yt(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);ek(r,e,s),ZT(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await Uc(r,n)}catch(n){await qa(n)}}function ZT(t,e){(t.cu.get(e)||[]).forEach(s=>{s.resolve()}),t.cu.delete(e)}function ek(t,e,s){const r=He(t);let n=r.uu[r.currentUser.toKey()];if(n){const i=n.get(e);i&&(s?i.reject(s):i.resolve(),n=n.remove(e)),r.uu[r.currentUser.toKey()]=n}}function Mm(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),s&&t.nu.Tu(r,s);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||tk(t,r)})}function tk(t,e){t.su.delete(e.path.canonicalString());const s=t.ou.get(e);s!==null&&(hy(t.remoteStore,s),t.ou=t.ou.remove(e),t._u.delete(s),by(t))}function K_(t,e,s){for(const r of s)r instanceof YT?(t.au.addReference(r.key,e),v6(t,r)):r instanceof QT?(Ie(_y,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||tk(t,r.key)):Ue(19791,{Iu:r})}function v6(t,e){const s=e.key,r=s.path.canonicalString();t.ou.get(s)||t.su.has(r)||(Ie(_y,"New document in limbo: "+s),t.su.add(r),by(t))}function by(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const s=new Ne(Ft.fromString(e)),r=t.lu.next();t._u.set(r,new a6(s)),t.ou=t.ou.insert(s,r),jT(t.remoteStore,new ii(Kr(ry(s.path)),r,"TargetPurposeLimboResolution",Uh.le))}}async function Uc(t,e,s){const r=He(t),n=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((l,c)=>{o.push(r.Pu(c,e,s).then(u=>{var h;if((u||s)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=s==null?void 0:s.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){n.push(u);const f=uy.Ps(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.nu.Q_(n),await async function(c,u){const h=He(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ne.forEach(u,m=>ne.forEach(m.ls,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>ne.forEach(m.hs,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Ba(f))throw f;Ie(dy,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Ss.get(m),v=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(v);h.Ss=h.Ss.insert(m,I)}}}(r.localStore,i))}async function _6(t,e){const s=He(t);if(!s.currentUser.isEqual(e)){Ie(_y,"User change. New user:",e.toKey());const r=await FT(s.localStore,e);s.currentUser=e,function(i,o){i.cu.forEach(l=>{l.forEach(c=>{c.reject(new Re(fe.CANCELLED,o))})}),i.cu.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uc(s,r.Ms)}}function b6(t,e){const s=He(t),r=s._u.get(e);if(r&&r.tu)return et().add(r.key);{let n=et();const i=s.iu.get(e);if(!i)return n;for(const o of i){const l=s.ru.get(o);n=n.unionWith(l.view.Wa)}return n}}function sk(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m6.bind(null,e),e.nu.Q_=s6.bind(null,e.eventManager),e.nu.Tu=r6.bind(null,e.eventManager),e}function w6(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y6.bind(null,e),e}class $d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,s){return null}fu(e,s){return null}Vu(e){return S5(this.persistence,new _5,e.initialUser,this.serializer)}Ru(e){return new UT(cy.Ei,this.serializer)}Au(e){return new P5}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$d.provider={build:()=>new $d};class S6 extends $d{constructor(e){super(),this.cacheSizeBytes=e}mu(e,s){yt(this.persistence.referenceDelegate instanceof Dd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new n5(r,e.asyncQueue,s)}Ru(e){const s=this.cacheSizeBytes!==void 0?Gs.withCacheSize(this.cacheSizeBytes):Gs.DEFAULT;return new UT(r=>Dd.Ei(r,s),this.serializer)}}class $m{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_6.bind(null,this.syncEngine),await X5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Z5}()}createDatastore(e){const s=Kh(e.databaseInfo.databaseId),r=function(i){return new O5(i)}(e.databaseInfo);return function(i,o,l,c){return new U5(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return function(r,n,i,o,l){return new V5(r,n,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,s=>G_(this.syncEngine,s,0),function(){return q_.C()?new q_:new x5}())}createSyncEngine(e,s){return function(n,i,o,l,c,u,h){const f=new l6(n,i,o,l,c,u);return h&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(n){const i=He(n);Ie(go,"RemoteStore shutting down."),i.aa.add(5),await $c(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class T6{constructor(e,s,r,n,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=n,this.user=Ts.UNAUTHENTICATED,this.clientId=XE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ie(Si,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ie(Si,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=yy(s,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kp(t,e){t.asyncQueue.verifyOperationInProgress(),Ie(Si,"Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener(async n=>{r.isEqual(n)||(await FT(e.localStore,n),r=n)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Y_(t,e){t.asyncQueue.verifyOperationInProgress();const s=await k6(t);Ie(Si,"Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(r=>j_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,n)=>j_(e.remoteStore,n)),t._onlineComponents=e}async function k6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie(Si,"Using user provided OfflineComponentProvider");try{await kp(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(n){return n.name==="FirebaseError"?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(s))throw s;_a("Error using user provided cache. Falling back to memory cache: "+s),await kp(t,new $d)}}else Ie(Si,"Using default OfflineComponentProvider"),await kp(t,new S6(void 0));return t._offlineComponents}async function rk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie(Si,"Using user provided OnlineComponentProvider"),await Y_(t,t._uninitializedComponentsProvider._online)):(Ie(Si,"Using default OnlineComponentProvider"),await Y_(t,new $m))),t._onlineComponents}function I6(t){return rk(t).then(e=>e.syncEngine)}async function C6(t){const e=await rk(t),s=e.eventManager;return s.onListen=c6.bind(null,e.syncEngine),s.onUnlisten=h6.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=u6.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=f6.bind(null,e.syncEngine),s}function A6(t,e,s={}){const r=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new E6({next:m=>{h.yu(),o.enqueueAndForget(()=>t6(i,f));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new Re(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new Re(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new n6(ry(l.path),h,{includeMetadataChanges:!0,Fa:!0});return e6(i,f)}(await C6(t),t.asyncQueue,e,s,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t,e,s){if(!s)throw new Re(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x6(t,e,s,r){if(e===!0&&r===!0)throw new Re(fe.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function X_(t){if(!Ne.isDocumentKey(t))throw new Re(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue(12329,{type:typeof t})}function hc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=wy(t);throw new Re(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firestore.googleapis.com",J_=!0;class Z_{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ik,this.ssl=J_}else this.host=e.host,this.ssl=(s=e.ssl)!==null&&s!==void 0?s:J_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<s5)throw new Re(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Re(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sy{constructor(e,s,r,n){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new R3;switch(r.type){case"firstParty":return new M3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const r=Q_.get(s);r&&(Ie("ComponentProvider","Removing Datastore"),Q_.delete(s),r.terminate())}(this),Promise.resolve()}}function L6(t,e,s,r={}){var n;t=hc(t,Sy);const i=Mh(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${s}`;i&&DE(`https://${c}`),o.host!==ik&&o.host!==c&&_a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!gi(u,l)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ts.MOCK_USER;else{h=iM(r.mockUserToken,(n=t._app)===null||n===void 0?void 0:n.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Re(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ts(m)}t._authCredentials=new N3(new YE(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ey(this.firestore,e,this._query)}}class gr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class fc extends Ey{constructor(e,s,r){super(e,s,ry(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new Ne(e))}withConverter(e){return new fc(this.firestore,e,this._path)}}function Tl(t,e,...s){if(t=Mt(t),arguments.length===1&&(e=XE.newId()),P6("doc","path",e),t instanceof Sy){const r=Ft.fromString(e,...s);return X_(r),new gr(t,null,new Ne(r))}{if(!(t instanceof gr||t instanceof fc))throw new Re(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...s));return X_(r),new gr(t.firestore,t instanceof fc?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="AsyncQueue";class tb{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new qT(this,"async_queue_retry"),this.ju=()=>{const r=Tp();r&&Ie(eb,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const s=Tp();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const s=Tp();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const s=new hi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Ba(e))throw e;Ie(eb,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const s=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,On("INTERNAL UNHANDLED ERROR: ",sb(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=s,s}enqueueAfterDelay(e,s,r){this.Ju(),this.zu.indexOf(e)>-1&&(s=0);const n=gy.createAndSchedule(this,e,s,r,i=>this.Xu(i));return this.Uu.push(n),n}Ju(){this.Ku&&Ue(47125,{ec:sb(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const s of this.Uu)if(s.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((s,r)=>s.targetTimeMs-r.targetTimeMs);for(const s of this.Uu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const s=this.Uu.indexOf(e);this.Uu.splice(s,1)}}function sb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ty extends Sy{constructor(e,s,r,n){super(e,s,r,n),this.type="firestore",this._queue=new tb,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tb(e),this._firestoreClient=void 0,await e}}}function R6(t,e){const s=typeof t=="object"?t:Qg(),r=typeof t=="string"?t:Ad,n=Ro(s,"firestore").getImmediate({identifier:r});if(!n._initialized){const i=rM("firestore");i&&L6(n,...i)}return n}function ok(t){if(t._terminated)throw new Re(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||N6(t),t._firestoreClient}function N6(t){var e,s,r;const n=t._freezeSettings(),i=function(l,c,u,h){return new X3(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,nk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._componentsProvider||!((s=n.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),t._firestoreClient=new T6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ka(vs.fromBase64String(e))}catch(s){throw new Re(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ka(vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Re(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Re(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Re(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,n){if(r.length!==n.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==n[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=/^__.*__$/;class ak{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Oo(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function lk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{oc:t})}}class Ay{constructor(e,s,r,n,i,o){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=n,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),n=this.ac({path:r,cc:!1});return n.lc(e),n}hc(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),n=this.ac({path:r,cc:!1});return n._c(),n}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Ud(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(lk(this.oc)&&O6.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class D6{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Kh(e)}dc(e,s,r,n=!1){return new Ay({oc:e,methodName:s,Ec:r,path:ms.emptyPath(),cc:!1,Ic:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M6(t){const e=t._freezeSettings(),s=Kh(t._databaseId);return new D6(t._databaseId,!!e.ignoreUndefinedProperties,s)}class Jh extends ky{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function $6(t,e,s,r){const n=t.dc(1,e,s);uk("Data must be an object, but it was:",n,r);const i=[],o=or.empty();Ni(r,(c,u)=>{const h=Py(e,c,s);u=Mt(u);const f=n.hc(h);if(u instanceof Jh)i.push(h);else{const m=Zh(u,f);m!=null&&(i.push(h),o.set(h,m))}});const l=new Ir(i);return new ak(o,l,n.fieldTransforms)}function U6(t,e,s,r,n,i){const o=t.dc(1,e,s),l=[rb(e,r,s)],c=[n];if(i.length%2!=0)throw new Re(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(rb(e,i[m])),c.push(i[m+1]);const u=[],h=or.empty();for(let m=l.length-1;m>=0;--m)if(!q6(u,l[m])){const g=l[m];let v=c[m];v=Mt(v);const I=o.hc(g);if(v instanceof Jh)u.push(g);else{const C=Zh(v,I);C!=null&&(u.push(g),h.set(g,C))}}const f=new Ir(u);return new ak(h,f,o.fieldTransforms)}function Zh(t,e){if(ck(t=Mt(t)))return uk("Unsupported field value:",e,t),F6(t,e);if(t instanceof ky)return function(r,n){if(!lk(n.oc))throw n.Tc(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,n){const i=[];let o=0;for(const l of r){let c=Zh(l,n.Pc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,n){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w$(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ss.fromDate(r);return{timestampValue:Od(n.serializer,i)}}if(r instanceof ss){const i=new ss(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Od(n.serializer,i)}}if(r instanceof Iy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ka)return{bytesValue:xT(n.serializer,r._byteString)};if(r instanceof gr){const i=n.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw n.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ay(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof Cy)return function(o,l){return{mapValue:{fields:{[iT]:{stringValue:oT},[Pd]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Tc("VectorValues must only contain numeric values.");return ny(l.serializer,u)})}}}}}}(r,n);throw n.Tc(`Unsupported field value: ${wy(r)}`)}(t,e)}function F6(t,e){const s={};return ZE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(t,(r,n)=>{const i=Zh(n,e.uc(r));i!=null&&(s[r]=i)}),{mapValue:{fields:s}}}function ck(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ss||t instanceof Iy||t instanceof ka||t instanceof gr||t instanceof ky||t instanceof Cy)}function uk(t,e,s){if(!ck(s)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(s)){const r=wy(s);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function rb(t,e,s){if((e=Mt(e))instanceof Xh)return e._internalPath;if(typeof e=="string")return Py(t,e);throw Ud("Field path arguments must be of type string or ",t,!1,void 0,s)}const V6=new RegExp("[~\\*/\\[\\]]");function Py(t,e,s){if(e.search(V6)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Xh(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Ud(t,e,s,r,n){const i=r&&!r.isEmpty(),o=n!==void 0;let l=`Function ${e}() called with invalid data`;s&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${n}`),c+=")"),new Re(fe.INVALID_ARGUMENT,l+t+c)}function q6(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,s,r,n,i){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(hk("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class B6 extends dk{data(){return super.data()}}function hk(t,e){return typeof e=="string"?Py(t,e):e instanceof Xh?e._internalPath:e._delegate._internalPath}class j6{convertValue(e,s="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Ni(e,(n,i)=>{r[n]=this.convertValue(i,s)}),r}convertVectorValue(e){var s,r,n;const i=(n=(r=(s=e.fields)===null||s===void 0?void 0:s[Pd].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(o=>jt(o.doubleValue));return new Cy(i)}convertGeoPoint(e){return new Iy(jt(e.latitude),jt(e.longitude))}convertArray(e,s){return(e.values||[]).map(r=>this.convertValue(r,s))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Vh(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const s=vi(e);return new ss(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=Ft.fromString(e);yt(MT(r),9688,{name:e});const n=new lc(r.get(1),r.get(3)),i=new Ne(r.popFirst(5));return n.isEqual(s)||On(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fk extends dk{constructor(e,s,r,n,i,o){super(e,s,r,n,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new z6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(hk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class z6 extends fk{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){t=hc(t,gr);const e=hc(t.firestore,Ty);return A6(ok(e),t._key).then(s=>K6(e,t,s))}class W6 extends j6{constructor(e){super(),this.firestore=e}convertBytes(e){return new ka(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,s)}}function Gu(t,e,s,...r){t=hc(t,gr);const n=hc(t.firestore,Ty),i=M6(n);let o;return o=typeof(e=Mt(e))=="string"||e instanceof Xh?U6(i,"updateDoc",t._key,e,s,r):$6(i,"updateDoc",t._key,e),G6(n,[o.toMutation(t._key,Cn.exists(!0))])}function G6(t,e){return function(r,n){const i=new hi;return r.asyncQueue.enqueueAndForget(async()=>p6(await I6(r),n,i)),i.promise}(ok(t),e)}function K6(t,e,s){const r=s.docs.get(e._key),n=new W6(t);return new fk(t,n,e._key,r,new H6(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(n){Va=n})(Fa),sn(new Nr("firestore",(r,{instanceIdentifier:n,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ty(new O3(r.getProvider("auth-internal")),new $3(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Re(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(u.options.projectId,h)}(o,n),o);return i=Object.assign({useFetchStreams:s},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),mr(l_,c_,e),mr(l_,c_,"esm2017")})();function xy(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function mk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y6=mk,gk=new Lo("auth","Firebase",mk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new $h("@firebase/auth");function Q6(t,...e){Fd.logLevel<=Ze.WARN&&Fd.warn(`Auth (${Fa}): ${t}`,...e)}function Ku(t,...e){Fd.logLevel<=Ze.ERROR&&Fd.error(`Auth (${Fa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,...e){throw Ry(t,...e)}function Lr(t,...e){return Ry(t,...e)}function Ly(t,e,s){const r=Object.assign(Object.assign({},Y6()),{[e]:s});return new Lo("auth","Firebase",r).create(e,{appName:t.name})}function Qr(t){return Ly(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yk(t,e,s){const r=s;if(!(e instanceof r))throw r.name!==e.constructor.name&&_r(t,"argument-error"),Ly(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ry(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return gk.create(t,...e)}function Me(t,e,...s){if(!t)throw Ry(e,...s)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ku(e),new Error(e)}function Mn(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function X6(){return nb()==="http:"||nb()==="https:"}function nb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X6()||Wg()||"connection"in navigator)?navigator.onLine:!0}function Z6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Mn(s>e,"Short delay should be less than long delay!"),this.isMobile=oM()||cM()}get(){return J6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e){Mn(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sU=new Fc(3e4,6e4);function Fn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mr(t,e,s,r,n={}){return _k(t,n,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Dc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return lM()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Mh(t.emulatorConfig.host)&&(u.credentials="include"),vk.fetch()(await bk(t,t.config.apiHost,s,l),u)})}async function _k(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eU),e);try{const n=new nU(t),i=await Promise.race([s(),n.promise]);n.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Au(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Au(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Au(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Au(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ly(t,h,u);_r(t,h)}}catch(n){if(n instanceof Dr)throw n;_r(t,"network-request-failed",{message:String(n)})}}async function Vc(t,e,s,r,n={}){const i=await Mr(t,e,s,r,n);return"mfaPendingCredential"in i&&_r(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function bk(t,e,s,r){const n=`${e}${s}?${r}`,i=t,o=i.config.emulator?Ny(t.config,n):`${t.config.apiScheme}://${n}`;return tU.includes(s)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),sU.get())})}}function Au(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const n=Lr(t,e,r);return n.customData._tokenResponse=s,n}function ib(t){return t!==void 0&&t.enterprise!==void 0}class iU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return rU(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oU(t,e){return Mr(t,"GET","/v2/recaptchaConfig",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t,e){return Mr(t,"POST","/v1/accounts:delete",e)}async function Vd(t,e){return Mr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lU(t,e=!1){const s=Mt(t),r=await s.getIdToken(e),n=Oy(r);Me(n&&n.exp&&n.auth_time&&n.iat,s.auth,"internal-error");const i=typeof n.firebase=="object"?n.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:n,token:r,authTime:Bl(Ip(n.auth_time)),issuedAtTime:Bl(Ip(n.iat)),expirationTime:Bl(Ip(n.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ip(t){return Number(t)*1e3}function Oy(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const n=xE(s);return n?JSON.parse(n):(Ku("Failed to decode base64 JWT payload"),null)}catch(n){return Ku("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function ob(t){const e=Oy(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Dr&&cU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t){var e;const s=t.auth,r=await t.getIdToken(),n=await yo(t,Vd(s,{idToken:r}));Me(n==null?void 0:n.users.length,s,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?wk(i.providerUserInfo):[],l=hU(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Fm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function dU(t){const e=Mt(t);await qd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hU(t,e){return[...t.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function wk(t){return t.map(e=>{var{providerId:s}=e,r=xy(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e){const s=await _k(t,{},async()=>{const r=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:i}=t.config,o=await bk(t,n,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",vk.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function pU(t,e){return Mr(t,"POST","/v2/accounts:revokeToken",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ob(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const s=ob(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:n,expiresIn:i}=await fU(e,s);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:n,expirationTime:i}=s,o=new la;return r&&(Me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),n&&(Me(typeof n=="string","internal-error",{appName:e}),o.accessToken=n),i&&(Me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:s,auth:r,stsTokenManager:n}=e,i=xy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await yo(this,this.stsTokenManager.getToken(this.auth,e));return Me(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return lU(this,e)}reload(){return dU(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await qd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await yo(this,aU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,n,i,o,l,c,u,h;const f=(r=s.displayName)!==null&&r!==void 0?r:void 0,m=(n=s.email)!==null&&n!==void 0?n:void 0,g=(i=s.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=s.photoURL)!==null&&o!==void 0?o:void 0,I=(l=s.tenantId)!==null&&l!==void 0?l:void 0,C=(c=s._redirectEventId)!==null&&c!==void 0?c:void 0,U=(u=s.createdAt)!==null&&u!==void 0?u:void 0,D=(h=s.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:L,isAnonymous:$,providerData:M,stsTokenManager:A}=s;Me(E&&A,e,"internal-error");const w=la.fromJSON(this.name,A);Me(typeof E=="string",e,"internal-error"),zn(f,e.name),zn(m,e.name),Me(typeof L=="boolean",e,"internal-error"),Me(typeof $=="boolean",e,"internal-error"),zn(g,e.name),zn(v,e.name),zn(I,e.name),zn(C,e.name),zn(U,e.name),zn(D,e.name);const _=new Cr({uid:E,auth:e,email:m,emailVerified:L,displayName:f,isAnonymous:$,photoURL:v,phoneNumber:g,tenantId:I,stsTokenManager:w,createdAt:U,lastLoginAt:D});return M&&Array.isArray(M)&&(_.providerData=M.map(P=>Object.assign({},P))),C&&(_._redirectEventId=C),_}static async _fromIdTokenResponse(e,s,r=!1){const n=new la;n.updateFromServerResponse(s);const i=new Cr({uid:s.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await qd(i),i}static async _fromGetAccountInfoResponse(e,s,r){const n=s.users[0];Me(n.localId!==void 0,"internal-error");const i=n.providerUserInfo!==void 0?wk(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(i!=null&&i.length),l=new la;l.updateFromIdToken(r);const c=new Cr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new Fm(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function En(t){Mn(t instanceof Function,"Expected a class definition");let e=ab.get(t);return e?(Mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ab.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Sk.type="NONE";const lb=Sk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,s){return`firebase:${t}:${e}:${s}`}class ca{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:n,name:i}=this.auth;this.fullUserKey=Yu(this.userKey,n.apiKey,i),this.fullPersistenceKey=Yu("persistence",n.apiKey,i),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await Vd(this.auth,{idToken:e}).catch(()=>{});return s?Cr._fromGetAccountInfoResponse(this.auth,s,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new ca(En(lb),e,r);const n=(await Promise.all(s.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=n[0]||En(lb);const o=Yu(r,e.config.apiKey,e.name);let l=null;for(const u of s)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Vd(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Cr._fromGetAccountInfoResponse(e,m,h)}else f=Cr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=n.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ca(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(s.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ca(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ik(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ek(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ak(e))return"Blackberry";if(Pk(e))return"Webos";if(Tk(e))return"Safari";if((e.includes("chrome/")||kk(e))&&!e.includes("edge/"))return"Chrome";if(Ck(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ek(t=Os()){return/firefox\//i.test(t)}function Tk(t=Os()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kk(t=Os()){return/crios\//i.test(t)}function Ik(t=Os()){return/iemobile/i.test(t)}function Ck(t=Os()){return/android/i.test(t)}function Ak(t=Os()){return/blackberry/i.test(t)}function Pk(t=Os()){return/webos/i.test(t)}function Dy(t=Os()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mU(t=Os()){var e;return Dy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gU(){return uM()&&document.documentMode===10}function xk(t=Os()){return Dy(t)||Ck(t)||Pk(t)||Ak(t)||/windows phone/i.test(t)||Ik(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t,e=[]){let s;switch(t){case"Browser":s=cb(Os());break;case"Worker":s=`${cb(Os())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Fa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=s,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const n of s)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(t,e={}){return Mr(t,"GET","/v2/passwordPolicy",Fn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=6;class bU{constructor(e){var s,r,n,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=o.minPasswordLength)!==null&&s!==void 0?s:_U,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,n,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(s=c.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.containsLowercaseLetter)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),n&&(s.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,s,r,n){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ub(this),this.idTokenSubscription=new ub(this),this.beforeStateQueue=new yU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=En(s)),this._initializationPromise=this.queue(async()=>{var r,n,i;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Vd(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ys(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await qd(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ys(this.app))return Promise.reject(Qr(this));const s=e?Mt(e):null;return s&&Me(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ys(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vU(this),s=new bU(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await pU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&En(e)||this._popupRedirectResolver;Me(s,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[En(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,n){if(this._deleted)return()=>{};const i=typeof s=="function"?s:s.next.bind(s);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof s=="function"){const c=e.addObserver(s,r,n);return()=>{o=!0,c()}}else{const c=e.addObserver(s);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(s["X-Firebase-AppCheck"]=n),s}async _getAppCheckToken(){var e;if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&Q6(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function $r(t){return Mt(t)}class ub{constructor(e){this.auth=e,this.observer=null,this.addObserver=gM(s=>this.observer=s)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SU(t){ef=t}function Rk(t){return ef.loadJS(t)}function EU(){return ef.recaptchaEnterpriseScript}function TU(){return ef.gapiScript}function kU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class IU{constructor(){this.enterprise=new CU}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class CU{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const AU="recaptcha-enterprise",Nk="NO_RECAPTCHA";class PU{constructor(e){this.type=AU,this.auth=$r(e)}async verify(e="verify",s=!1){async function r(i){if(!s){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{oU(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new iU(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function n(i,o,l){const c=window.grecaptcha;ib(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Nk)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IU().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!s&&ib(window.grecaptcha))n(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=EU();c.length!==0&&(c+=l),Rk(c).then(()=>{n(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function db(t,e,s,r=!1,n=!1){const i=new PU(t);let o;if(n)o=Nk;else try{o=await i.verify(s)}catch{o=await i.verify(s,!0)}const l=Object.assign({},e);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Bd(t,e,s,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await db(t,e,s,s==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await db(t,e,s,s==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t,e){const s=Ro(t,"auth");if(s.isInitialized()){const n=s.getImmediate(),i=s.getOptions();if(gi(i,e??{}))return n;_r(n,"already-initialized")}return s.initialize({options:e})}function LU(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RU(t,e,s){const r=$r(t);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!1,i=Ok(e),{host:o,port:l}=NU(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(gi(u,r.config.emulator)&&gi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,OU(),Mh(o)&&DE(`${i}//${o}${c}`)}function Ok(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NU(t){const e=Ok(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const i=n[1];return{host:i,port:hb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:hb(o)}}}function hb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OU(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,s){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function DU(t,e){return Mr(t,"POST","/v1/accounts:update",e)}async function MU(t,e){return Mr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(t,e){return Vc(t,"POST","/v1/accounts:signInWithPassword",Fn(t,e))}async function Dk(t,e){return Mr(t,"POST","/v1/accounts:sendOobCode",Fn(t,e))}async function UU(t,e){return Dk(t,e)}async function FU(t,e){return Dk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VU(t,e){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",Fn(t,e))}async function qU(t,e){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends My{constructor(e,s,r,n=null){super("password",r),this._email=e,this._password=s,this._tenantId=n}static _fromEmailAndPassword(e,s){return new pc(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new pc(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bd(e,s,"signInWithPassword",$U);case"emailLink":return VU(e,{email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bd(e,r,"signUpPassword",MU);case"emailLink":return qU(e,{idToken:s,email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t,e){return Vc(t,"POST","/v1/accounts:signInWithIdp",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="http://localhost";class vo extends My{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):_r("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=s,i=xy(s,["providerId","signInMethod"]);if(!r||!n)return null;const o=new vo(r,n);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const s=this.buildRequest();return ua(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,ua(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,ua(e,s)}buildRequest(){const e={requestUri:BU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Dc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HU(t){const e=_l(bl(t)).link,s=e?_l(bl(e)).deep_link_id:null,r=_l(bl(t)).deep_link_id;return(r?_l(bl(r)).link:null)||r||s||e||t}class $y{constructor(e){var s,r,n,i,o,l;const c=_l(bl(e)),u=(s=c.apiKey)!==null&&s!==void 0?s:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=jU((n=c.mode)!==null&&n!==void 0?n:null);Me(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const s=HU(e);try{return new $y(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,s){return pc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=$y.parseLink(s);return Me(r,"argument-error"),pc._fromEmailAndCode(e,r.code,r.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends qc{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return vo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Wr.credential(s,r)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends qc{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends qc{constructor(){super("twitter.com")}static credential(e,s){return vo._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return ni.credential(s,r)}catch{return null}}}ni.TWITTER_SIGN_IN_METHOD="twitter.com";ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zU(t,e){return Vc(t,"POST","/v1/accounts:signUp",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,n=!1){const i=await Cr._fromIdTokenResponse(e,r,n),o=fb(r);return new _o({user:i,providerId:o,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const n=fb(r);return new _o({user:e,providerId:n,_tokenResponse:r,operationType:s})}}function fb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Dr{constructor(e,s,r,n){var i;super(s.code,s.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,n){return new jd(e,s,r,n)}}function Mk(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(t,i,e,r):i})}async function WU(t,e,s=!1){const r=await yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return _o._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(t,e,s=!1){const{auth:r}=t;if(Ys(r.app))return Promise.reject(Qr(r));const n="reauthenticate";try{const i=await yo(t,Mk(r,n,e,t),s);Me(i.idToken,r,"internal-error");const o=Oy(i.idToken);Me(o,r,"internal-error");const{sub:l}=o;return Me(t.uid===l,r,"user-mismatch"),_o._forOperation(t,n,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_r(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e,s=!1){if(Ys(t.app))return Promise.reject(Qr(t));const r="signIn",n=await Mk(t,r,e),i=await _o._fromIdTokenResponse(t,r,n);return s||await t._updateCurrentUser(i.user),i}async function GU(t,e){return Uk($r(t),e)}async function KU(t,e){return $k(Mt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t){const e=$r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Vk(t,e,s){const r=$r(t);await Bd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",FU)}async function qk(t,e,s){if(Ys(t.app))return Promise.reject(Qr(t));const r=$r(t),o=await Bd(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Fk(t),c}),l=await _o._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Bk(t,e,s){return Ys(t.app)?Promise.reject(Qr(t)):GU(Mt(t),Mo.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Fk(t),r})}async function YU(t,e){const s=Mt(t),n={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await UU(s.auth,n);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(t,e){return Mr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const r=Mt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},o=await yo(r,QU(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function XU(t,e){return JU(Mt(t),null,e)}async function JU(t,e,s){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};s&&(i.password=s);const o=await yo(t,DU(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t,e){return Mt(t).setPersistence(e)}function eF(t,e,s,r){return Mt(t).onIdTokenChanged(e,s,r)}function tF(t,e,s){return Mt(t).beforeAuthStateChanged(e,s)}function Bc(t,e,s,r){return Mt(t).onAuthStateChanged(e,s,r)}function jk(t){return Mt(t).signOut()}async function sF(t){return Mt(t).delete()}const Hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=1e3,nF=10;class zk extends Hk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),n=this.localCache[s];r!==n&&e(s,n,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;s?this.detachListener():this.stopPolling();const n=()=>{const o=this.storage.getItem(r);!s&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,nF):n()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},rF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}zk.type="LOCAL";const Wk=zk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk extends Hk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Gk.type="SESSION";const Kk=Gk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(n=>n.isListeningto(e));if(s)return s;const r=new sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:n,data:i}=s.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const l=Array.from(o).map(async u=>u(s.origin,i)),c=await iF(l);s.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:c})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Uy("",20);n.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:n,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:s},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function aF(t){Xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function lF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uF(){return Yk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firebaseLocalStorageDb",dF=1,zd="firebaseLocalStorage",Xk="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function rf(t,e){return t.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function hF(){const t=indexedDB.deleteDatabase(Qk);return new jc(t).toPromise()}function Vm(){const t=indexedDB.open(Qk,dF);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zd,{keyPath:Xk})}catch(n){s(n)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),await hF(),e(await Vm()))})})}async function mb(t,e,s){const r=rf(t,!0).put({[Xk]:e,value:s});return new jc(r).toPromise()}async function fF(t,e){const s=rf(t,!1).get(e),r=await new jc(s).toPromise();return r===void 0?null:r.value}function gb(t,e){const s=rf(t,!0).delete(e);return new jc(s).toPromise()}const pF=800,mF=3;class Jk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>mF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sf._getInstance(uF()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await lF(),!this.activeServiceWorker)return;this.sender=new oF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vm();return await mb(e,Hd,"1"),await gb(e,Hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>mb(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>fF(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>gb(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const i=rf(n,!1).getAll();return new jc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),s.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),s.push(n));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jk.type="LOCAL";const gF=Jk;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t,e){return e?En(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends My{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,s){return ua(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function yF(t){return Uk(t.auth,new Vy(t),t.bypassAuthState)}function vF(t){const{auth:e,user:s}=t;return Me(s,e,"internal-error"),$k(s,new Vy(t),t.bypassAuthState)}async function _F(t){const{auth:e,user:s}=t;return Me(s,e,"internal-error"),WU(s,new Vy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,s,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:n,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:s,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yF;case"linkViaPopup":case"linkViaRedirect":return _F;case"reauthViaPopup":case"reauthViaRedirect":return vF;default:_r(this.auth,"internal-error")}}resolve(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=new Fc(2e3,1e4);async function eI(t,e,s){if(Ys(t.app))return Promise.reject(Lr(t,"operation-not-supported-in-this-environment"));const r=$r(t);yk(t,e,tf);const n=Fy(r,s);return new Xi(r,"signInViaPopup",e,n).executeNotNull()}class Xi extends Zk{constructor(e,s,r,n,i){super(e,s,n,i),this.provider=r,this.authWindow=null,this.pollId=null,Xi.currentPopupAction&&Xi.currentPopupAction.cancel(),Xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Mn(this.filter.length===1,"Popup operations only handle one event");const e=Uy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bF.get())};e()}}Xi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="pendingRedirect",Qu=new Map;class SF extends Zk{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=Qu.get(this.auth._key());if(!e){try{const r=await EF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EF(t,e){const s=sI(e),r=tI(t);if(!await r._isAvailable())return!1;const n=await r._get(s)==="true";return await r._remove(s),n}async function TF(t,e){return tI(t)._set(sI(e),"true")}function kF(t,e){Qu.set(t._key(),e)}function tI(t){return En(t._redirectPersistence)}function sI(t){return Yu(wF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(t,e,s){return CF(t,e,s)}async function CF(t,e,s){if(Ys(t.app))return Promise.reject(Qr(t));const r=$r(t);yk(t,e,tf),await r._initializationPromise;const n=Fy(r,s);return await TF(n,r),n._openRedirect(r,e,"signInViaRedirect")}async function AF(t,e){return await $r(t)._initializationPromise,rI(t,e,!1)}async function rI(t,e,s=!1){if(Ys(t.app))return Promise.reject(Qr(t));const r=$r(t),n=Fy(r,e),o=await new SF(r,n,s).execute();return o&&!s&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=10*60*1e3;class xF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LF(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!nI(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(Lr(this.auth,n))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PF&&this.cachedEventUids.clear(),this.cachedEventUids.has(yb(e))}saveEventToCache(e){this.cachedEventUids.add(yb(e)),this.lastProcessedEventTime=Date.now()}}function yb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e={}){return Mr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OF=/^https?/;async function DF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RF(t);for(const s of e)try{if(MF(s))return}catch{}_r(t,"unauthorized-domain")}function MF(t){const e=Um(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===r}if(!OF.test(s))return!1;if(NF.test(t))return r===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=new Fc(3e4,6e4);function vb(){const t=Xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function UF(t){return new Promise((e,s)=>{var r,n,i;function o(){vb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vb(),s(Lr(t,"network-request-failed"))},timeout:$F.get()})}if(!((n=(r=Xr().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((i=Xr().gapi)===null||i===void 0)&&i.load)o();else{const l=kU("iframefcb");return Xr()[l]=()=>{gapi.load?o():s(Lr(t,"network-request-failed"))},Rk(`${TU()}?onload=${l}`).catch(c=>s(c))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function FF(t){return Xu=Xu||UF(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=new Fc(5e3,15e3),qF="__/auth/iframe",BF="emulator/auth/iframe",jF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zF(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?Ny(e,BF):`https://${t.config.authDomain}/${qF}`,r={apiKey:e.apiKey,appName:t.name,v:Fa},n=HF.get(t.config.apiHost);n&&(r.eid=n);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${s}?${Dc(r).slice(1)}`}async function WF(t){const e=await FF(t),s=Xr().gapi;return Me(s,t,"internal-error"),e.open({where:document.body,url:zF(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jF,dontclear:!0},r=>new Promise(async(n,i)=>{await r.restyle({setHideOnLeave:!1});const o=Lr(t,"network-request-failed"),l=Xr().setTimeout(()=>{i(o)},VF.get());function c(){Xr().clearTimeout(l),n(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KF=500,YF=600,QF="_blank",XF="http://localhost";class _b{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JF(t,e,s,r=KF,n=YF){const i=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},GF),{width:r.toString(),height:n.toString(),top:i,left:o}),u=Os().toLowerCase();s&&(l=kk(u)?QF:s),Ek(u)&&(e=e||XF,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(mU(u)&&l!=="_self")return ZF(e||"",l),new _b(null);const f=window.open(e||"",l,h);Me(f,t,"popup-blocked");try{f.focus()}catch{}return new _b(f)}function ZF(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="__/auth/handler",tV="emulator/auth/handler",sV=encodeURIComponent("fac");async function bb(t,e,s,r,n,i){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:Fa,eventId:n};if(e instanceof tf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",mM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof qc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${sV}=${encodeURIComponent(c)}`:"";return`${rV(t)}?${Dc(l).slice(1)}${u}`}function rV({config:t}){return t.emulator?Ny(t,tV):`https://${t.authDomain}/${eV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="webStorageSupport";class nV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kk,this._completeRedirectFn=rI,this._overrideRedirectResult=kF}async _openPopup(e,s,r,n){var i;Mn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await bb(e,s,r,Um(),n);return JF(e,o,Uy())}async _openRedirect(e,s,r,n){await this._originValidation(e);const i=await bb(e,s,r,Um(),n);return aF(i),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:n,promise:i}=this.eventManagers[s];return n?Promise.resolve(n):(Mn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await WF(e),r=new xF(e);return s.register("authEvent",n=>(Me(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Cp,{type:Cp},n=>{var i;const o=(i=n==null?void 0:n[0])===null||i===void 0?void 0:i[Cp];o!==void 0&&s(!!o),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=DF(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return xk()||Tk()||Dy()}}const iV=nV;var wb="@firebase/auth",Sb="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lV(t){sn(new Nr("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lk(t)},u=new wU(r,n,i,c);return LU(u,s),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),sn(new Nr("auth-internal",e=>{const s=$r(e.getProvider("auth").getImmediate());return(r=>new oV(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(wb,Sb,aV(t)),mr(wb,Sb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=5*60,uV=NE("authIdTokenMaxAge")||cV;let Eb=null;const dV=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>uV)return;const n=s==null?void 0:s.token;Eb!==n&&(Eb=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function iI(t=Qg()){const e=Ro(t,"auth");if(e.isInitialized())return e.getImmediate();const s=xU(t,{popupRedirectResolver:iV,persistence:[gF,Wk,Kk]}),r=NE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=dV(i.toString());tF(s,o,()=>o(s.currentUser)),eF(s,l=>o(l))}}const n=LE("auth");return n&&RU(s,`http://${n}`),s}function hV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SU({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n=>{const i=Lr("internal-error");i.customData=n,s(i)},r.type="text/javascript",r.charset="UTF-8",hV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lV("Browser");const oI="@firebase/installations",qy="0.6.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=1e4,lI=`w:${qy}`,cI="FIS_v2",fV="https://firebaseinstallations.googleapis.com/v1",pV=60*60*1e3,mV="installations",gV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bo=new Lo(mV,gV,yV);function uI(t){return t instanceof Dr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI({projectId:t}){return`${fV}/projects/${t}/installations`}function hI(t){return{token:t.token,requestStatus:2,expiresIn:_V(t.expiresIn),creationTime:Date.now()}}async function fI(t,e){const r=(await e.json()).error;return bo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function pI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function vV(t,{refreshToken:e}){const s=pI(t);return s.append("Authorization",bV(e)),s}async function mI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function _V(t){return Number(t.replace("s","000"))}function bV(t){return`${cI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const r=dI(t),n=pI(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&n.append("x-firebase-client",u)}const o={fid:s,authVersion:cI,appId:t.appId,sdkVersion:lI},l={method:"POST",headers:n,body:JSON.stringify(o)},c=await mI(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||s,registrationStatus:2,refreshToken:u.refreshToken,authToken:hI(u.authToken)}}else throw await fI("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=/^[cdef][\w-]{21}$/,qm="";function TV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=kV(t);return EV.test(s)?s:qm}catch{return qm}}function kV(t){return SV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new Map;function vI(t,e){const s=nf(t);_I(s,e),IV(s,e)}function _I(t,e){const s=yI.get(t);if(s)for(const r of s)r(e)}function IV(t,e){const s=CV();s&&s.postMessage({key:t,fid:e}),AV()}let Ji=null;function CV(){return!Ji&&"BroadcastChannel"in self&&(Ji=new BroadcastChannel("[Firebase] FID Change"),Ji.onmessage=t=>{_I(t.data.key,t.data.fid)}),Ji}function AV(){yI.size===0&&Ji&&(Ji.close(),Ji=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="firebase-installations-database",xV=1,wo="firebase-installations-store";let Ap=null;function By(){return Ap||(Ap=UE(PV,xV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wo)}}})),Ap}async function Wd(t,e){const s=nf(t),n=(await By()).transaction(wo,"readwrite"),i=n.objectStore(wo),o=await i.get(s);return await i.put(e,s),await n.done,(!o||o.fid!==e.fid)&&vI(t,e.fid),e}async function bI(t){const e=nf(t),r=(await By()).transaction(wo,"readwrite");await r.objectStore(wo).delete(e),await r.done}async function of(t,e){const s=nf(t),n=(await By()).transaction(wo,"readwrite"),i=n.objectStore(wo),o=await i.get(s),l=e(o);return l===void 0?await i.delete(s):await i.put(l,s),await n.done,l&&(!o||o.fid!==l.fid)&&vI(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(t){let e;const s=await of(t.appConfig,r=>{const n=LV(r),i=RV(t,n);return e=i.registrationPromise,i.installationEntry});return s.fid===qm?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function LV(t){const e=t||{fid:TV(),registrationStatus:0};return wI(e)}function RV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(bo.create("app-offline"));return{installationEntry:e,registrationPromise:n}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NV(t,s);return{installationEntry:s,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:OV(t)}:{installationEntry:e}}async function NV(t,e){try{const s=await wV(t,e);return Wd(t.appConfig,s)}catch(s){throw uI(s)&&s.customData.serverCode===409?await bI(t.appConfig):await Wd(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function OV(t){let e=await Tb(t.appConfig);for(;e.registrationStatus===1;)await gI(100),e=await Tb(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await jy(t);return r||s}return e}function Tb(t){return of(t,e=>{if(!e)throw bo.create("installation-not-found");return wI(e)})}function wI(t){return DV(t)?{fid:t.fid,registrationStatus:0}:t}function DV(t){return t.registrationStatus===1&&t.registrationTime+aI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV({appConfig:t,heartbeatServiceProvider:e},s){const r=$V(t,s),n=vV(t,s),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&n.append("x-firebase-client",u)}const o={installation:{sdkVersion:lI,appId:t.appId}},l={method:"POST",headers:n,body:JSON.stringify(o)},c=await mI(()=>fetch(r,l));if(c.ok){const u=await c.json();return hI(u)}else throw await fI("Generate Auth Token",c)}function $V(t,{fid:e}){return`${dI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hy(t,e=!1){let s;const r=await of(t.appConfig,i=>{if(!SI(i))throw bo.create("not-registered");const o=i.authToken;if(!e&&VV(o))return i;if(o.requestStatus===1)return s=UV(t,e),i;{if(!navigator.onLine)throw bo.create("app-offline");const l=BV(i);return s=FV(t,l),l}});return s?await s:r.authToken}async function UV(t,e){let s=await kb(t.appConfig);for(;s.authToken.requestStatus===1;)await gI(100),s=await kb(t.appConfig);const r=s.authToken;return r.requestStatus===0?Hy(t,e):r}function kb(t){return of(t,e=>{if(!SI(e))throw bo.create("not-registered");const s=e.authToken;return jV(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function FV(t,e){try{const s=await MV(t,e),r=Object.assign(Object.assign({},e),{authToken:s});return await Wd(t.appConfig,r),s}catch(s){if(uI(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await bI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Wd(t.appConfig,r)}throw s}}function SI(t){return t!==void 0&&t.registrationStatus===2}function VV(t){return t.requestStatus===2&&!qV(t)}function qV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pV}function BV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function jV(t){return t.requestStatus===1&&t.requestTime+aI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t){const e=t,{installationEntry:s,registrationPromise:r}=await jy(e);return r?r.catch(console.error):Hy(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e=!1){const s=t;return await WV(s),(await Hy(s,e)).token}async function WV(t){const{registrationPromise:e}=await jy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t){if(!t||!t.options)throw Pp("App Configuration");if(!t.name)throw Pp("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw Pp(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Pp(t){return bo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="installations",KV="installations-internal",YV=t=>{const e=t.getProvider("app").getImmediate(),s=GV(e),r=Ro(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QV=t=>{const e=t.getProvider("app").getImmediate(),s=Ro(e,EI).getImmediate();return{getId:()=>HV(s),getToken:n=>zV(s,n)}};function XV(){sn(new Nr(EI,YV,"PUBLIC")),sn(new Nr(KV,QV,"PRIVATE"))}XV();mr(oI,qy);mr(oI,qy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="analytics",JV="firebase_id",ZV="origin",e8=60*1e3,t8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new $h("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},cr=new Lo("analytics","Analytics",s8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){if(!t.startsWith(zy)){const e=cr.create("invalid-gtag-resource",{gtagURL:t});return Zs.warn(e.message),""}return t}function TI(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function n8(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function i8(t,e){const s=n8("firebase-js-sdk-policy",{createScriptURL:r8}),r=document.createElement("script"),n=`${zy}?l=${t}&id=${e}`;r.src=s?s==null?void 0:s.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function o8(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function a8(t,e,s,r,n,i){const o=r[n];try{if(o)await e[o];else{const c=(await TI(s)).find(u=>u.measurementId===n);c&&await e[c.appId]}}catch(l){Zs.error(l)}t("config",n,i)}async function l8(t,e,s,r,n){try{let i=[];if(n&&n.send_to){let o=n.send_to;Array.isArray(o)||(o=[o]);const l=await TI(s);for(const c of o){const u=l.find(f=>f.measurementId===c),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,n||{})}catch(i){Zs.error(i)}}function c8(t,e,s,r){async function n(i,...o){try{if(i==="event"){const[l,c]=o;await l8(t,e,s,l,c)}else if(i==="config"){const[l,c]=o;await a8(t,e,s,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Zs.error(l)}}return n}function u8(t,e,s,r,n){let i=function(...o){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(i=window[n]),window[n]=c8(i,t,e,s),{gtagCore:i,wrappedGtag:window[n]}}function d8(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(zy)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=30,f8=1e3;class p8{constructor(e={},s=f8){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const kI=new p8;function m8(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function g8(t){var e;const{appId:s,apiKey:r}=t,n={method:"GET",headers:m8(r)},i=t8.replace("{app-id}",s),o=await fetch(i,n);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw cr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function y8(t,e=kI,s){const{appId:r,apiKey:n,measurementId:i}=t.options;if(!r)throw cr.create("no-app-id");if(!n){if(i)return{measurementId:i,appId:r};throw cr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new b8;return setTimeout(async()=>{l.abort()},e8),II({appId:r,apiKey:n,measurementId:i},o,l,e)}async function II(t,{throttleEndTimeMillis:e,backoffCount:s},r,n=kI){var i;const{appId:o,measurementId:l}=t;try{await v8(r,e)}catch(c){if(l)return Zs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await g8(t);return n.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!_8(u)){if(n.deleteThrottleMetadata(o),l)return Zs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw c}const h=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?J1(s,n.intervalMillis,h8):J1(s,n.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:s+1};return n.setThrottleMetadata(o,f),Zs.debug(`Calling attemptFetch again in ${h} millis`),II(t,f,r,n)}}function v8(t,e){return new Promise((s,r)=>{const n=Math.max(e-Date.now(),0),i=setTimeout(s,n);t.addEventListener(()=>{clearTimeout(i),r(cr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _8(t){if(!(t instanceof Dr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class b8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function w8(t,e,s,r,n){if(n&&n.global){t("event",s,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",s,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(){if(Gg())try{await Kg()}catch(t){return Zs.warn(cr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Zs.warn(cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function E8(t,e,s,r,n,i,o){var l;const c=y8(t);c.then(g=>{s[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Zs.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Zs.error(g)),e.push(c);const u=S8().then(g=>{if(g)return r.getId()}),[h,f]=await Promise.all([c,u]);d8(i)||i8(i,h.measurementId),n("js",new Date);const m=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return m[ZV]="firebase",m.update=!0,f!=null&&(m[JV]=f),n("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.app=e}_delete(){return delete jl[this.app.options.appId],Promise.resolve()}}let jl={},Ib=[];const Cb={};let xp="dataLayer",k8="gtag",Ab,CI,Pb=!1;function I8(){const t=[];if(Wg()&&t.push("This is a browser extension environment."),OE()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,n)=>`(${n+1}) ${r}`).join(" "),s=cr.create("invalid-analytics-context",{errorInfo:e});Zs.warn(s.message)}}function C8(t,e,s){I8();const r=t.options.appId;if(!r)throw cr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Zs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw cr.create("no-api-key");if(jl[r]!=null)throw cr.create("already-exists",{id:r});if(!Pb){o8(xp);const{wrappedGtag:i,gtagCore:o}=u8(jl,Ib,Cb,xp,k8);CI=i,Ab=o,Pb=!0}return jl[r]=E8(t,Ib,Cb,e,Ab,xp,s),new T8(t)}function A8(t=Qg()){t=Mt(t);const e=Ro(t,Gd);return e.isInitialized()?e.getImmediate():P8(t)}function P8(t,e={}){const s=Ro(t,Gd);if(s.isInitialized()){const n=s.getImmediate();if(gi(e,s.getOptions()))return n;throw cr.create("already-initialized")}return s.initialize({options:e})}async function x8(){if(Wg()||!OE()||!Gg())return!1;try{return await Kg()}catch{return!1}}function L8(t,e,s,r){t=Mt(t),w8(CI,jl[t.app.options.appId],e,s,r).catch(n=>Zs.error(n))}const xb="@firebase/analytics",Lb="0.10.13";function R8(){sn(new Nr(Gd,(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();return C8(r,n,s)},"PUBLIC")),sn(new Nr("analytics-internal",t,"PRIVATE")),mr(xb,Lb),mr(xb,Lb,"esm2017");function t(e){try{const s=e.getProvider(Gd).getImmediate();return{logEvent:(r,n,i)=>L8(s,r,n,i)}}catch(s){throw cr.create("interop-component-reg-failed",{reason:s})}}}R8();const N8={apiKey:"AIzaSyDg032Kbbm2NbSYgYiwu_xgQDUZ1vHf1jA",authDomain:"auth.aced.live",projectId:"aced-9cf72",storageBucket:"aced-9cf72.appspot.com",messagingSenderId:"295500018562",appId:"1:295500018562:web:1bf3a721401ab29665559b",measurementId:"G-VH244VZZD8"},af=FE(N8),kl=R6(af),pe=iI(af);typeof window<"u"&&x8().then(t=>{t&&A8(af)});const O8=Object.freeze(Object.defineProperty({__proto__:null,app:af,auth:pe,db:kl,doc:Tl,getDoc:pk,updateDoc:Gu},Symbol.toStringTag,{value:"Module"})),Br=(t,e={})=>{var s;if(!(typeof window>"u"))try{const r={...e,eventName:t,source:"user-store",timestamp:e.timestamp||Date.now(),version:"2.0"},n=new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0});window.dispatchEvent(n),(s=window.eventBus)!=null&&s.emit&&window.eventBus.emit(t,r)}catch(r){console.error(" [store/user] Event trigger error:",r)}},Rb=t=>{const e={free:{vocabulary:!1,analytics:!1,unlimited_lessons:!1,priority_support:!1,custom_courses:!1,offline_mode:!1,export_progress:!1,advanced_grammar:!1,multiple_languages:!1,ai_tutor:!1},start:{vocabulary:!0,analytics:!1,unlimited_lessons:!1,priority_support:!0,custom_courses:!1,offline_mode:!0,export_progress:!1,advanced_grammar:!0,multiple_languages:!1,ai_tutor:!1},pro:{vocabulary:!0,analytics:!0,unlimited_lessons:!0,priority_support:!0,custom_courses:!0,offline_mode:!0,export_progress:!0,advanced_grammar:!0,multiple_languages:!0,ai_tutor:!0},premium:{vocabulary:!0,analytics:!0,unlimited_lessons:!0,priority_support:!0,custom_courses:!0,offline_mode:!0,export_progress:!0,advanced_grammar:!0,multiple_languages:!0,ai_tutor:!0}},s=t.userStatus||"free";t.features={...e[s]||e.free}},Ju=t=>{var e,s,r,n;return((e=t.currentUser)==null?void 0:e.firebaseId)||((s=t.currentUser)==null?void 0:s.firebaseUserId)||((r=t.currentUser)==null?void 0:r._id)||((n=t.currentUser)==null?void 0:n.uid)||localStorage.getItem("userId")||localStorage.getItem("firebaseUserId")||null},D8=()=>({currentUser:null,userStatus:"free",subscription:{plan:"free",status:"inactive",source:null,startDate:null,expiryDate:null,isAutoRenew:!1,details:{},lastSync:null,serverFetch:!1},usage:{current:{messages:0,images:0,lastUpdated:null,resetDate:null},limits:{free:{messages:50,images:5},start:{messages:-1,images:20},pro:{messages:-1,images:-1},premium:{messages:-1,images:-1}}},features:{vocabulary:!1,analytics:!1,unlimited_lessons:!1,priority_support:!1,custom_courses:!1,offline_mode:!1,export_progress:!1,advanced_grammar:!1,multiple_languages:!1,ai_tutor:!1},promocodes:{applied:[],available:[],lastCheck:null},payments:{history:[],pending:[],failed:[],lastCheck:null},system:{initialized:!1,initializationTime:null,lastUpdate:Date.now(),forceUpdateCounter:0,syncInProgress:!1,lastServerSync:null,loading:{status:!1,usage:!1,payments:!1,saving:!1,sync:!1},errors:{lastError:null,errorCount:0}}}),M8={SET_USER(t,e){const s=Date.now();if(t.currentUser=e?{...e,lastUpdate:s}:null,t.system.lastUpdate=s,t.system.forceUpdateCounter++,e)try{localStorage.setItem("currentUser",JSON.stringify(e)),localStorage.setItem("userId",e.firebaseId||e.uid||e._id),localStorage.setItem("firebaseUserId",e.firebaseId||e.uid)}catch{}Br("userUpdated",{user:e,timestamp:s})},CLEAR_USER(t){const e=Date.now();t.currentUser=null,t.userStatus="free",t.subscription={plan:"free",status:"inactive",source:null,startDate:null,expiryDate:null,isAutoRenew:!1,details:{},lastSync:null,serverFetch:!1},t.usage.current={messages:0,images:0,lastUpdated:null,resetDate:null},t.features=Object.keys(t.features).reduce((r,n)=>({...r,[n]:!1}),{}),t.promocodes.applied=[],t.payments.history=[],t.system.initialized=!1,t.system.lastUpdate=e,t.system.forceUpdateCounter++,["currentUser","userStatus","subscriptionData","subscriptionPlan","userPlan","plan","subscriptionExpiry","userId","firebaseUserId"].forEach(r=>{try{localStorage.removeItem(r)}catch{}}),Br("userCleared",{timestamp:e})},SET_USER_STATUS(t,e){const s=t.userStatus,n=["free","start","pro","premium"].includes(e)?e:"free";t.userStatus=n,(!t.subscription||typeof t.subscription!="object")&&(t.subscription={plan:"free",status:"inactive",source:null,startDate:null,expiryDate:null,isAutoRenew:!1,details:{},lastSync:null,serverFetch:!1}),t.subscription.plan=n,t.subscription.status=n!=="free"?"active":"inactive",t.subscription.lastSync=new Date().toISOString(),t.system.lastUpdate=Date.now(),t.system.forceUpdateCounter++,Rb(t);try{localStorage.setItem("userStatus",n),localStorage.setItem("userPlan",n),localStorage.setItem("subscriptionPlan",n),localStorage.setItem("plan",n)}catch{}Br("userStatusChanged",{oldStatus:s,newStatus:n,timestamp:Date.now()}),Br("subscriptionUpdated",{plan:n,timestamp:Date.now()})},UPDATE_SUBSCRIPTION(t,e){if(!e||typeof e!="object")return;const s=Date.now();t.system||(t.system={loading:{},errors:{errorCount:0,lastError:null},initialized:!1,lastUpdate:Date.now(),forceUpdateCounter:0}),t.subscription={...t.subscription,...e,lastSync:new Date().toISOString()},e.plan&&(t.userStatus=e.plan,Rb(t)),t.system.lastUpdate=s,Br("subscriptionUpdated",{...e,timestamp:s});try{localStorage.setItem("subscriptionData",JSON.stringify(t.subscription)),e.expiryDate&&localStorage.setItem("subscriptionExpiry",e.expiryDate)}catch{}},SET_LOADING(t,{type:e,loading:s}){t.system||(t.system={loading:{},errors:{errorCount:0,lastError:null},initialized:!1,lastUpdate:Date.now(),forceUpdateCounter:0}),t.system.loading||(t.system.loading={}),t.system.loading[e]=!!s,t.system.lastUpdate=Date.now()},SET_INITIALIZED(t,e=!0){t.system.initialized=!!e,t.system.initializationTime=e?Date.now():null,t.system.lastUpdate=Date.now()},SET_LAST_SERVER_SYNC(t,e){t.system.lastServerSync=e||Date.now()},FORCE_UPDATE(t){t.system.forceUpdateCounter++,t.system.lastUpdate=Date.now(),Br("forceUpdate",{counter:t.system.forceUpdateCounter})},SET_ERROR(t,e){t.system.errors.lastError={message:e.message||e,timestamp:Date.now(),context:e.context||null},t.system.errors.errorCount++},ADD_PROMOCODE(t,e){var r;Array.isArray(t.promocodes.applied)||(t.promocodes.applied=[]);const s={id:`promo_${Date.now()}`,code:((r=e.code)==null?void 0:r.toUpperCase())||"",plan:e.plan||"free",appliedAt:new Date().toISOString(),source:e.source||"manual"};t.promocodes.applied.unshift(s),t.promocodes.applied.length>10&&(t.promocodes.applied=t.promocodes.applied.slice(0,10));try{localStorage.setItem("appliedPromocodes",JSON.stringify(t.promocodes.applied))}catch{}Br("promocodeApplied",{promocode:s})},ADD_PAYMENT(t,e){Array.isArray(t.payments.history)||(t.payments.history=[]);const s={id:e.id||`payment_${Date.now()}`,amount:e.amount||0,currency:e.currency||"UZS",status:e.status||"pending",plan:e.plan||"free",method:e.method||"unknown",timestamp:e.timestamp||Date.now(),createdAt:new Date().toISOString()};t.payments.history.unshift(s),t.payments.history.length>50&&(t.payments.history=t.payments.history.slice(0,50)),Br("paymentUpdated",{payment:s})},SET_USAGE(t,e){!e||typeof e!="object"||(t.usage.current={messages:Math.max(0,parseInt(e.messages)||0),images:Math.max(0,parseInt(e.images)||0),lastUpdated:new Date().toISOString(),resetDate:e.resetDate||null},t.system.lastUpdate=Date.now(),Br("usageUpdated",{usage:t.usage.current}))},INCREMENT_USAGE(t,{messages:e=0,images:s=0}){t.usage.current.messages=Math.max(0,(t.usage.current.messages||0)+e),t.usage.current.images=Math.max(0,(t.usage.current.images||0)+s),t.usage.current.lastUpdated=new Date().toISOString()}},$8={async initialize({commit:t,dispatch:e,state:s}){if(s.system.initialized)return{success:!0,cached:!0};try{t("SET_INITIALIZED",!0);const r=localStorage.getItem("currentUser");if(r)try{const i=JSON.parse(r);i&&i.email&&t("SET_USER",i)}catch{}const n=localStorage.getItem("userStatus");return n&&["free","start","pro","premium"].includes(n)&&t("SET_USER_STATUS",n),{success:!0}}catch(r){return console.error(" [store/user] Initialization error:",r),t("SET_ERROR",{message:"Initialization failed",context:"initialize"}),{success:!1,error:r.message}}},async fetchStatusFromServer({commit:t,state:e}){var s,r,n,i;try{t("SET_LOADING",{type:"status",loading:!0});const o=((s=e.currentUser)==null?void 0:s.firebaseId)||((r=e.currentUser)==null?void 0:r.firebaseUserId)||((n=e.currentUser)==null?void 0:n._id)||((i=e.currentUser)==null?void 0:i.uid)||localStorage.getItem("userId")||localStorage.getItem("firebaseUserId");if(!o)return console.error(" [store/user] No user ID available"),{success:!1,error:"No user ID"};let l=null;try{const{auth:I}=await mt(async()=>{const{auth:C}=await Promise.resolve().then(()=>O8);return{auth:C}},void 0);I.currentUser&&(l=await I.currentUser.getIdToken())}catch{l=localStorage.getItem("token")||localStorage.getItem("authToken")}if(!l)return console.error(" [store/user] No auth token available"),{success:!1,error:"No auth token"};const u=await fetch(`https://api.aced.live/api/users/${o}`,{method:"GET",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Server returned ${u.status}`);const h=await u.json(),f=h.user||h.data||h,m=f.subscriptionPlan||f.userStatus||"free",g=f.subscriptionExpiryDate||f.subscriptionExpiry,v=f.subscriptionDuration;return t("SET_USER_STATUS",m),t("UPDATE_SUBSCRIPTION",{plan:m,status:m!=="free"?"active":"inactive",expiryDate:g||null,duration:v||null,lastSync:new Date().toISOString(),serverFetch:!0}),localStorage.setItem("userStatus",m),localStorage.setItem("subscriptionPlan",m),localStorage.setItem("userPlan",m),localStorage.setItem("plan",m),g&&localStorage.setItem("subscriptionExpiry",g),localStorage.setItem("lastServerSync",Date.now().toString()),{success:!0,status:m,expiryDate:g,duration:v,serverFetch:!0}}catch(o){return console.error(" [store/user] fetchStatusFromServer error:",o),{success:!1,error:o.message}}finally{t("SET_LOADING",{type:"status",loading:!1})}},async loadUserStatus({dispatch:t,commit:e,state:s}){const r=await t("fetchStatusFromServer");if(!r.success){console.warn(" [store/user] Server fetch failed, using local data");const n=localStorage.getItem("userStatus");return n&&["free","start","pro","premium"].includes(n)?(e("SET_USER_STATUS",n),{success:!0,status:n,source:"localStorage"}):(e("SET_USER_STATUS","free"),{success:!0,status:"free",defaulted:!0})}return r},async updateUserStatus({commit:t,state:e,dispatch:s},r){if(!r||!["free","start","pro","premium"].includes(r))return{success:!1,error:"Invalid status"};const i=e.userStatus;if(i===r)return{success:!0,message:"Status unchanged",noChange:!0};try{t("SET_USER_STATUS",r),t("FORCE_UPDATE");const o=Ju(e);if(o){const{updateUserStatusWithPersistence:l}=await mt(async()=>{const{updateUserStatusWithPersistence:c}=await Promise.resolve().then(()=>Fp);return{updateUserStatusWithPersistence:c}},void 0);await l(o,r,"manual")}return{success:!0,oldStatus:i,newStatus:r,timestamp:Date.now()}}catch(o){return console.error(" [store/user] updateUserStatus error:",o),t("SET_ERROR",{message:o.message,context:"updateUserStatus"}),{success:!1,error:o.message}}},async updateSubscription({commit:t,dispatch:e,state:s},{plan:r,source:n="payment",details:i={}}){try{const l=["free","start","pro","premium"].includes(r)?r:"free",c=s.userStatus;let u=null;if(l!=="free"){const m=new Date,g=n==="payment"?365:30;u=new Date(m.getTime()+g*24*60*60*1e3).toISOString()}const h={plan:l,status:l!=="free"?"active":"inactive",startDate:new Date().toISOString(),expiryDate:u,source:n,details:i,serverFetch:!1};t("SET_USER_STATUS",l),t("UPDATE_SUBSCRIPTION",h),t("FORCE_UPDATE");const f=Ju(s);if(f){const{saveSubscriptionToServer:m}=await mt(async()=>{const{saveSubscriptionToServer:g}=await Promise.resolve().then(()=>Fp);return{saveSubscriptionToServer:g}},void 0);await m(f,h)}return{success:!0,subscriptionData:h,oldStatus:c,newStatus:l}}catch(o){return console.error(" [store/user] updateSubscription error:",o),t("SET_ERROR",{message:o.message,context:"updateSubscription"}),{success:!1,error:o.message}}},async applyPromocode({commit:t,state:e,dispatch:s},{promoCode:r,plan:n}){try{if(!r||r.trim().length<3)return{success:!1,error:"Invalid promocode"};const i=r.trim().toUpperCase(),o=e.userStatus,{applyPromocode:l}=await mt(async()=>{const{applyPromocode:u}=await Promise.resolve().then(()=>Ew);return{applyPromocode:u}},void 0);if((await l(i)).success){const u=m.plan||n||"pro",h=m.expiryDate;t("SET_USER_STATUS",u),t("UPDATE_SUBSCRIPTION",{plan:u,status:"active",expiryDate:h,source:"promocode",lastSync:new Date().toISOString()}),t("ADD_PROMOCODE",{code:i,plan:u,source:"api"}),t("FORCE_UPDATE"),localStorage.setItem("userStatus",u),localStorage.setItem("subscriptionPlan",u),localStorage.setItem("userPlan",u),h&&localStorage.setItem("subscriptionExpiry",h),Br("userStatusChanged",{oldStatus:o,newStatus:u,source:"promocode"}),s("fetchStatusFromServer");const{applyPromocode:f}=await mt(async()=>{const{applyPromocode:g}=await Promise.resolve().then(()=>Fp);return{applyPromocode:g}},void 0),m=await f(Ju(e),i);return m.success&&(t("ADD_PROMOCODE",{code:i,plan:m.plan,source:"api"}),m.plan&&m.plan!==o&&(t("SET_USER_STATUS",m.plan),t("FORCE_UPDATE"))),m}}catch(i){return console.error(" [store/user] applyPromocode error:",i),{success:!1,error:i.message}}},async saveUser({commit:t,state:e},{userData:s,token:r}){try{const{saveUser:n}=await mt(async()=>{const{saveUser:o}=await Promise.resolve().then(()=>Zd);return{saveUser:o}},void 0),i=await n(s);return i.success&&i.user?(t("SET_USER",i.user),{success:!0,user:i.user}):{success:!1,error:"Failed to save user"}}catch(n){return console.error(" [store/user] saveUser error:",n),{success:!1,error:n.message}}},async logout({commit:t}){return t("CLEAR_USER"),{success:!0}},async validatePromocode({state:t},e){try{if(!e||e.trim().length<3)return{valid:!1,error:"Promocode too short"};const{validatePromocode:s}=await mt(async()=>{const{validatePromocode:n}=await Promise.resolve().then(()=>Ew);return{validatePromocode:n}},void 0);return await s(e.trim().toUpperCase())}catch(s){return console.error(" [store/user] validatePromocode error:",s),{valid:!1,error:s.message}}},async saveUser({commit:t,dispatch:e},{userData:s,token:r}){var n;try{t("SET_LOADING",{type:"saving",loading:!0});const{saveUser:i}=await mt(async()=>{const{saveUser:u}=await Promise.resolve().then(()=>Zd);return{saveUser:u}},void 0),o={firebaseUserId:s.uid||s.firebaseId,email:s.email,name:s.displayName||s.name||((n=s.email)==null?void 0:n.split("@")[0])||"User",displayName:s.displayName||s.name||"",emailVerified:!!s.emailVerified,photoURL:s.photoURL||null,subscriptionPlan:s.subscriptionPlan||"free"},c=await(await fetch("https://api.aced.live/api/users/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,name:o.name,subscriptionPlan:o.subscriptionPlan})})).json();if(c.success&&c.user)return t("SET_USER",c.user),t("SET_USER_STATUS",c.user.subscriptionPlan||"free"),localStorage.setItem("userId",c.user.firebaseId),localStorage.setItem("firebaseUserId",c.user.firebaseId),{success:!0,user:c.user};throw new Error(c.error||"Failed to save user")}catch(i){return t("SET_ERROR",{message:i.message,context:"saveUser"}),{success:!1,error:i.message}}finally{t("SET_LOADING",{type:"saving",loading:!1})}},async forceUpdate({commit:t}){return t("FORCE_UPDATE"),{success:!0}},async logout({commit:t}){return t("CLEAR_USER"),{success:!0}}},U8={isAuthenticated:t=>!!(t.currentUser&&(t.currentUser.firebaseId||t.currentUser._id||t.currentUser.uid)),getUser:t=>t.currentUser,getUserId:t=>Ju(t),userName:t=>{var e,s,r,n;return((e=t.currentUser)==null?void 0:e.name)||((s=t.currentUser)==null?void 0:s.displayName)||((n=(r=t.currentUser)==null?void 0:r.email)==null?void 0:n.split("@")[0])||"User"},userEmail:t=>{var e;return((e=t.currentUser)==null?void 0:e.email)||""},userStatus:t=>{var e;return t.userStatus&&t.userStatus!=="free"?t.userStatus:(e=t.subscription)!=null&&e.plan&&t.subscription.plan!=="free"?t.subscription.plan:t.userStatus||"free"},subscription:t=>t.subscription,subscriptionDetails:t=>{var e,s,r,n,i,o,l;return{plan:((e=t.subscription)==null?void 0:e.plan)||t.userStatus||"free",status:((s=t.subscription)==null?void 0:s.status)||"inactive",expiryDate:((r=t.subscription)==null?void 0:r.expiryDate)||null,source:((n=t.subscription)==null?void 0:n.source)||null,duration:((i=t.subscription)==null?void 0:i.duration)||null,serverFetch:((o=t.subscription)==null?void 0:o.serverFetch)||!1,lastSync:((l=t.subscription)==null?void 0:l.lastSync)||null}},isPremiumUser:(t,e)=>{const s=e.userStatus;return["premium","start","pro"].includes(s)},isStartUser:(t,e)=>{const s=e.userStatus;return["start","pro","premium"].includes(s)},isProUser:(t,e)=>{const s=e.userStatus;return["pro","premium"].includes(s)},isFreeUser:(t,e)=>e.userStatus==="free",hasActiveSubscription:(t,e)=>e.userStatus!=="free",features:t=>t.features,hasFeatureAccess:t=>e=>{var s;return!!((s=t.features)!=null&&s[e])},currentUsage:t=>{var e;return((e=t.usage)==null?void 0:e.current)||{messages:0,images:0}},usageLimits:(t,e)=>{var r,n;const s=e.userStatus;return((n=(r=t.usage)==null?void 0:r.limits)==null?void 0:n[s])||{messages:50,images:5}},appliedPromocodes:t=>{var e;return((e=t.promocodes)==null?void 0:e.applied)||[]},paymentHistory:t=>{var e;return((e=t.payments)==null?void 0:e.history)||[]},isInitialized:t=>{var e;return!!((e=t.system)!=null&&e.initialized)},isLoading:t=>e=>{var s,r;return!!((r=(s=t.system)==null?void 0:s.loading)!=null&&r[e])},isAnyLoading:t=>{var s;const e=((s=t.system)==null?void 0:s.loading)||{};return Object.values(e).some(Boolean)},lastServerSync:t=>{var e;return((e=t.system)==null?void 0:e.lastServerSync)||null},forceUpdateCounter:t=>{var e;return((e=t.system)==null?void 0:e.forceUpdateCounter)||0},lastError:t=>{var e,s;return((s=(e=t.system)==null?void 0:e.errors)==null?void 0:s.lastError)||null}},F8={namespaced:!0,state:D8,mutations:M8,actions:$8,getters:U8};function AI(t,e){return function(){return t.apply(e,arguments)}}const{toString:V8}=Object.prototype,{getPrototypeOf:Wy}=Object,{iterator:lf,toStringTag:PI}=Symbol,cf=(t=>e=>{const s=V8.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>cf(e)===t),uf=t=>e=>typeof e===t,{isArray:Ha}=Array,mc=uf("undefined");function q8(t){return t!==null&&!mc(t)&&t.constructor!==null&&!mc(t.constructor)&&er(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const xI=Ur("ArrayBuffer");function B8(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&xI(t.buffer),e}const j8=uf("string"),er=uf("function"),LI=uf("number"),df=t=>t!==null&&typeof t=="object",H8=t=>t===!0||t===!1,Zu=t=>{if(cf(t)!=="object")return!1;const e=Wy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(PI in t)&&!(lf in t)},z8=Ur("Date"),W8=Ur("File"),G8=Ur("Blob"),K8=Ur("FileList"),Y8=t=>df(t)&&er(t.pipe),Q8=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||er(t.append)&&((e=cf(t))==="formdata"||e==="object"&&er(t.toString)&&t.toString()==="[object FormData]"))},X8=Ur("URLSearchParams"),[J8,Z8,e9,t9]=["ReadableStream","Request","Response","Headers"].map(Ur),s9=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hc(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),Ha(t))for(r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else{const i=s?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(r=0;r<o;r++)l=i[r],e.call(null,t[l],l,t)}}function RI(t,e){e=e.toLowerCase();const s=Object.keys(t);let r=s.length,n;for(;r-- >0;)if(n=s[r],e===n.toLowerCase())return n;return null}const Zi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NI=t=>!mc(t)&&t!==Zi;function Bm(){const{caseless:t}=NI(this)&&this||{},e={},s=(r,n)=>{const i=t&&RI(e,n)||n;Zu(e[i])&&Zu(r)?e[i]=Bm(e[i],r):Zu(r)?e[i]=Bm({},r):Ha(r)?e[i]=r.slice():e[i]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&Hc(arguments[r],s);return e}const r9=(t,e,s,{allOwnKeys:r}={})=>(Hc(e,(n,i)=>{s&&er(n)?t[i]=AI(n,s):t[i]=n},{allOwnKeys:r}),t),n9=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),i9=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},o9=(t,e,s,r)=>{let n,i,o;const l={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=s!==!1&&Wy(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},a9=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},l9=t=>{if(!t)return null;if(Ha(t))return t;let e=t.length;if(!LI(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},c9=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Wy(Uint8Array)),u9=(t,e)=>{const r=(t&&t[lf]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},d9=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},h9=Ur("HTMLFormElement"),f9=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,n){return r.toUpperCase()+n}),Nb=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),p9=Ur("RegExp"),OI=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};Hc(s,(n,i)=>{let o;(o=e(n,i,t))!==!1&&(r[i]=o||n)}),Object.defineProperties(t,r)},m9=t=>{OI(t,(e,s)=>{if(er(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(er(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},g9=(t,e)=>{const s={},r=n=>{n.forEach(i=>{s[i]=!0})};return Ha(t)?r(t):r(String(t).split(e)),s},y9=()=>{},v9=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function _9(t){return!!(t&&er(t.append)&&t[PI]==="FormData"&&t[lf])}const b9=t=>{const e=new Array(10),s=(r,n)=>{if(df(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[n]=r;const i=Ha(r)?[]:{};return Hc(r,(o,l)=>{const c=s(o,n+1);!mc(c)&&(i[l]=c)}),e[n]=void 0,i}}return r};return s(t,0)},w9=Ur("AsyncFunction"),S9=t=>t&&(df(t)||er(t))&&er(t.then)&&er(t.catch),DI=((t,e)=>t?setImmediate:e?((s,r)=>(Zi.addEventListener("message",({source:n,data:i})=>{n===Zi&&i===s&&r.length&&r.shift()()},!1),n=>{r.push(n),Zi.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",er(Zi.postMessage)),E9=typeof queueMicrotask<"u"?queueMicrotask.bind(Zi):typeof process<"u"&&process.nextTick||DI,T9=t=>t!=null&&er(t[lf]),Z={isArray:Ha,isArrayBuffer:xI,isBuffer:q8,isFormData:Q8,isArrayBufferView:B8,isString:j8,isNumber:LI,isBoolean:H8,isObject:df,isPlainObject:Zu,isReadableStream:J8,isRequest:Z8,isResponse:e9,isHeaders:t9,isUndefined:mc,isDate:z8,isFile:W8,isBlob:G8,isRegExp:p9,isFunction:er,isStream:Y8,isURLSearchParams:X8,isTypedArray:c9,isFileList:K8,forEach:Hc,merge:Bm,extend:r9,trim:s9,stripBOM:n9,inherits:i9,toFlatObject:o9,kindOf:cf,kindOfTest:Ur,endsWith:a9,toArray:l9,forEachEntry:u9,matchAll:d9,isHTMLForm:h9,hasOwnProperty:Nb,hasOwnProp:Nb,reduceDescriptors:OI,freezeMethods:m9,toObjectSet:g9,toCamelCase:f9,noop:y9,toFiniteNumber:v9,findKey:RI,global:Zi,isContextDefined:NI,isSpecCompliantForm:_9,toJSONObject:b9,isAsyncFn:w9,isThenable:S9,setImmediate:DI,asap:E9,isIterable:T9};function We(t,e,s,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}Z.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const MI=We.prototype,$I={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{$I[t]={value:t}});Object.defineProperties(We,$I);Object.defineProperty(MI,"isAxiosError",{value:!0});We.from=(t,e,s,r,n,i)=>{const o=Object.create(MI);return Z.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),We.call(o,t.message,e,s,r,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const k9=null;function jm(t){return Z.isPlainObject(t)||Z.isArray(t)}function UI(t){return Z.endsWith(t,"[]")?t.slice(0,-2):t}function Ob(t,e,s){return t?t.concat(e).map(function(n,i){return n=UI(n),!s&&i?"["+n+"]":n}).join(s?".":""):e}function I9(t){return Z.isArray(t)&&!t.some(jm)}const C9=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function hf(t,e,s){if(!Z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=Z.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,C){return!Z.isUndefined(C[I])});const r=s.metaTokens,n=s.visitor||h,i=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(n))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(Z.isDate(v))return v.toISOString();if(!c&&Z.isBlob(v))throw new We("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(v)||Z.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,I,C){let U=v;if(v&&!C&&typeof v=="object"){if(Z.endsWith(I,"{}"))I=r?I:I.slice(0,-2),v=JSON.stringify(v);else if(Z.isArray(v)&&I9(v)||(Z.isFileList(v)||Z.endsWith(I,"[]"))&&(U=Z.toArray(v)))return I=UI(I),U.forEach(function(E,L){!(Z.isUndefined(E)||E===null)&&e.append(o===!0?Ob([I],L,i):o===null?I:I+"[]",u(E))}),!1}return jm(v)?!0:(e.append(Ob(C,I,i),u(v)),!1)}const f=[],m=Object.assign(C9,{defaultVisitor:h,convertValue:u,isVisitable:jm});function g(v,I){if(!Z.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+I.join("."));f.push(v),Z.forEach(v,function(U,D){(!(Z.isUndefined(U)||U===null)&&n.call(e,U,Z.isString(D)?D.trim():D,I,m))===!0&&g(U,I?I.concat(D):[D])}),f.pop()}}if(!Z.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Db(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Gy(t,e){this._pairs=[],t&&hf(t,this,e)}const FI=Gy.prototype;FI.append=function(e,s){this._pairs.push([e,s])};FI.toString=function(e){const s=e?function(r){return e.call(this,r,Db)}:Db;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function A9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VI(t,e,s){if(!e)return t;const r=s&&s.encode||A9;Z.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let i;if(n?i=n(e,s):i=Z.isURLSearchParams(e)?e.toString():new Gy(e,s).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Mb{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(r){r!==null&&e(r)})}}const qI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},P9=typeof URLSearchParams<"u"?URLSearchParams:Gy,x9=typeof FormData<"u"?FormData:null,L9=typeof Blob<"u"?Blob:null,R9={isBrowser:!0,classes:{URLSearchParams:P9,FormData:x9,Blob:L9},protocols:["http","https","file","blob","url","data"]},Ky=typeof window<"u"&&typeof document<"u",Hm=typeof navigator=="object"&&navigator||void 0,N9=Ky&&(!Hm||["ReactNative","NativeScript","NS"].indexOf(Hm.product)<0),O9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",D9=Ky&&window.location.href||"http://localhost",M9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ky,hasStandardBrowserEnv:N9,hasStandardBrowserWebWorkerEnv:O9,navigator:Hm,origin:D9},Symbol.toStringTag,{value:"Module"})),Ls={...M9,...R9};function $9(t,e){return hf(t,new Ls.classes.URLSearchParams,Object.assign({visitor:function(s,r,n,i){return Ls.isNode&&Z.isBuffer(s)?(this.append(r,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function U9(t){return Z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function F9(t){const e={},s=Object.keys(t);let r;const n=s.length;let i;for(r=0;r<n;r++)i=s[r],e[i]=t[i];return e}function BI(t){function e(s,r,n,i){let o=s[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=s.length;return o=!o&&Z.isArray(n)?n.length:o,c?(Z.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!l):((!n[o]||!Z.isObject(n[o]))&&(n[o]=[]),e(s,r,n[o],i)&&Z.isArray(n[o])&&(n[o]=F9(n[o])),!l)}if(Z.isFormData(t)&&Z.isFunction(t.entries)){const s={};return Z.forEachEntry(t,(r,n)=>{e(U9(r),n,s,0)}),s}return null}function V9(t,e,s){if(Z.isString(t))try{return(e||JSON.parse)(t),Z.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const zc={transitional:qI,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",n=r.indexOf("application/json")>-1,i=Z.isObject(e);if(i&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return n?JSON.stringify(BI(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $9(e,this.formSerializer).toString();if((l=Z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return hf(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||n?(s.setContentType("application/json",!1),V9(e)):e}],transformResponse:[function(e){const s=this.transitional||zc.transitional,r=s&&s.forcedJSONParsing,n=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(r&&!this.responseType||n)){const o=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?We.from(l,We.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ls.classes.FormData,Blob:Ls.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],t=>{zc.headers[t]={}});const q9=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B9=t=>{const e={};let s,r,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),s=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!s||e[s]&&q9[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},$b=Symbol("internals");function hl(t){return t&&String(t).trim().toLowerCase()}function ed(t){return t===!1||t==null?t:Z.isArray(t)?t.map(ed):String(t)}function j9(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const H9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lp(t,e,s,r,n){if(Z.isFunction(r))return r.call(this,e,s);if(n&&(e=s),!!Z.isString(e)){if(Z.isString(r))return e.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(e)}}function z9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function W9(t,e){const s=Z.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(n,i,o){return this[r].call(this,e,n,i,o)},configurable:!0})})}let tr=class{constructor(e){e&&this.set(e)}set(e,s,r){const n=this;function i(l,c,u){const h=hl(c);if(!h)throw new Error("header name must be a non-empty string");const f=Z.findKey(n,h);(!f||n[f]===void 0||u===!0||u===void 0&&n[f]!==!1)&&(n[f||c]=ed(l))}const o=(l,c)=>Z.forEach(l,(u,h)=>i(u,h,c));if(Z.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(Z.isString(e)&&(e=e.trim())&&!H9(e))o(B9(e),s);else if(Z.isObject(e)&&Z.isIterable(e)){let l={},c,u;for(const h of e){if(!Z.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?Z.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,s)}else e!=null&&i(s,e,r);return this}get(e,s){if(e=hl(e),e){const r=Z.findKey(this,e);if(r){const n=this[r];if(!s)return n;if(s===!0)return j9(n);if(Z.isFunction(s))return s.call(this,n,r);if(Z.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=hl(e),e){const r=Z.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||Lp(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let n=!1;function i(o){if(o=hl(o),o){const l=Z.findKey(r,o);l&&(!s||Lp(r,r[l],l,s))&&(delete r[l],n=!0)}}return Z.isArray(e)?e.forEach(i):i(e),n}clear(e){const s=Object.keys(this);let r=s.length,n=!1;for(;r--;){const i=s[r];(!e||Lp(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const s=this,r={};return Z.forEach(this,(n,i)=>{const o=Z.findKey(r,i);if(o){s[o]=ed(n),delete s[i];return}const l=e?z9(i):String(i).trim();l!==i&&delete s[i],s[l]=ed(n),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return Z.forEach(this,(r,n)=>{r!=null&&r!==!1&&(s[n]=e&&Z.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(n=>r.set(n)),r}static accessor(e){const r=(this[$b]=this[$b]={accessors:{}}).accessors,n=this.prototype;function i(o){const l=hl(o);r[l]||(W9(n,o),r[l]=!0)}return Z.isArray(e)?e.forEach(i):i(e),this}};tr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(tr.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});Z.freezeMethods(tr);function Rp(t,e){const s=this||zc,r=e||s,n=tr.from(r.headers);let i=r.data;return Z.forEach(t,function(l){i=l.call(s,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function jI(t){return!!(t&&t.__CANCEL__)}function za(t,e,s){We.call(this,t??"canceled",We.ERR_CANCELED,e,s),this.name="CanceledError"}Z.inherits(za,We,{__CANCEL__:!0});function HI(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new We("Request failed with status code "+s.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function G9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function K9(t,e){t=t||10;const s=new Array(t),r=new Array(t);let n=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=r[i];o||(o=u),s[n]=c,r[n]=u;let f=i,m=0;for(;f!==n;)m+=s[f++],f=f%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),u-o<e)return;const g=h&&u-h;return g?Math.round(m*1e3/g):void 0}}function Y9(t,e){let s=0,r=1e3/e,n,i;const o=(u,h=Date.now())=>{s=h,n=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const h=Date.now(),f=h-s;f>=r?o(u,h):(n=u,i||(i=setTimeout(()=>{i=null,o(n)},r-f)))},()=>n&&o(n)]}const Kd=(t,e,s=3)=>{let r=0;const n=K9(50,250);return Y9(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,u=n(c),h=o<=l;r=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},s)},Ub=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},Fb=t=>(...e)=>Z.asap(()=>t(...e)),Q9=Ls.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ls.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ls.origin),Ls.navigator&&/(msie|trident)/i.test(Ls.navigator.userAgent)):()=>!0,X9=Ls.hasStandardBrowserEnv?{write(t,e,s,r,n,i){const o=[t+"="+encodeURIComponent(e)];Z.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),Z.isString(r)&&o.push("path="+r),Z.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function J9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Z9(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function zI(t,e,s){let r=!J9(e);return t&&(r||s==!1)?Z9(t,e):e}const Vb=t=>t instanceof tr?{...t}:t;function So(t,e){e=e||{};const s={};function r(u,h,f,m){return Z.isPlainObject(u)&&Z.isPlainObject(h)?Z.merge.call({caseless:m},u,h):Z.isPlainObject(h)?Z.merge({},h):Z.isArray(h)?h.slice():h}function n(u,h,f,m){if(Z.isUndefined(h)){if(!Z.isUndefined(u))return r(void 0,u,f,m)}else return r(u,h,f,m)}function i(u,h){if(!Z.isUndefined(h))return r(void 0,h)}function o(u,h){if(Z.isUndefined(h)){if(!Z.isUndefined(u))return r(void 0,u)}else return r(void 0,h)}function l(u,h,f){if(f in e)return r(u,h);if(f in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,f)=>n(Vb(u),Vb(h),f,!0)};return Z.forEach(Object.keys(Object.assign({},t,e)),function(h){const f=c[h]||n,m=f(t[h],e[h],h);Z.isUndefined(m)&&f!==l||(s[h]=m)}),s}const WI=t=>{const e=So({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:l}=e;e.headers=o=tr.from(o),e.url=VI(zI(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Z.isFormData(s)){if(Ls.hasStandardBrowserEnv||Ls.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...h]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Ls.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(e)),r||r!==!1&&Q9(e.url))){const u=n&&i&&X9.read(i);u&&o.set(n,u)}return e},e7=typeof XMLHttpRequest<"u",t7=e7&&function(t){return new Promise(function(s,r){const n=WI(t);let i=n.data;const o=tr.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=n,h,f,m,g,v;function I(){g&&g(),v&&v(),n.cancelToken&&n.cancelToken.unsubscribe(h),n.signal&&n.signal.removeEventListener("abort",h)}let C=new XMLHttpRequest;C.open(n.method.toUpperCase(),n.url,!0),C.timeout=n.timeout;function U(){if(!C)return;const E=tr.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),$={data:!l||l==="text"||l==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:E,config:t,request:C};HI(function(A){s(A),I()},function(A){r(A),I()},$),C=null}"onloadend"in C?C.onloadend=U:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(U)},C.onabort=function(){C&&(r(new We("Request aborted",We.ECONNABORTED,t,C)),C=null)},C.onerror=function(){r(new We("Network Error",We.ERR_NETWORK,t,C)),C=null},C.ontimeout=function(){let L=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const $=n.transitional||qI;n.timeoutErrorMessage&&(L=n.timeoutErrorMessage),r(new We(L,$.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,t,C)),C=null},i===void 0&&o.setContentType(null),"setRequestHeader"in C&&Z.forEach(o.toJSON(),function(L,$){C.setRequestHeader($,L)}),Z.isUndefined(n.withCredentials)||(C.withCredentials=!!n.withCredentials),l&&l!=="json"&&(C.responseType=n.responseType),u&&([m,v]=Kd(u,!0),C.addEventListener("progress",m)),c&&C.upload&&([f,g]=Kd(c),C.upload.addEventListener("progress",f),C.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(h=E=>{C&&(r(!E||E.type?new za(null,t,C):E),C.abort(),C=null)},n.cancelToken&&n.cancelToken.subscribe(h),n.signal&&(n.signal.aborted?h():n.signal.addEventListener("abort",h)));const D=G9(n.url);if(D&&Ls.protocols.indexOf(D)===-1){r(new We("Unsupported protocol "+D+":",We.ERR_BAD_REQUEST,t));return}C.send(i||null)})},s7=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,n;const i=function(u){if(!n){n=!0,l();const h=u instanceof Error?u:this.reason;r.abort(h instanceof We?h:new za(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new We(`timeout ${e} of ms exceeded`,We.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>Z.asap(l),c}},r7=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,n;for(;r<s;)n=r+e,yield t.slice(r,n),r=n},n7=async function*(t,e){for await(const s of i7(t))yield*r7(s,e)},i7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},qb=(t,e,s,r)=>{const n=n7(t,e);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await n.next();if(u){l(),c.close();return}let f=h.byteLength;if(s){let m=i+=f;s(m)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},ff=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",GI=ff&&typeof ReadableStream=="function",o7=ff&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),KI=(t,...e)=>{try{return!!t(...e)}catch{return!1}},a7=GI&&KI(()=>{let t=!1;const e=new Request(Ls.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Bb=64*1024,zm=GI&&KI(()=>Z.isReadableStream(new Response("").body)),Yd={stream:zm&&(t=>t.body)};ff&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Yd[e]&&(Yd[e]=Z.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new We(`Response type '${e}' is not supported`,We.ERR_NOT_SUPPORT,r)})})})(new Response);const l7=async t=>{if(t==null)return 0;if(Z.isBlob(t))return t.size;if(Z.isSpecCompliantForm(t))return(await new Request(Ls.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(t)||Z.isArrayBuffer(t))return t.byteLength;if(Z.isURLSearchParams(t)&&(t=t+""),Z.isString(t))return(await o7(t)).byteLength},c7=async(t,e)=>{const s=Z.toFiniteNumber(t.getContentLength());return s??l7(e)},u7=ff&&(async t=>{let{url:e,method:s,data:r,signal:n,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:f="same-origin",fetchOptions:m}=WI(t);u=u?(u+"").toLowerCase():"text";let g=s7([n,i&&i.toAbortSignal()],o),v;const I=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let C;try{if(c&&a7&&s!=="get"&&s!=="head"&&(C=await c7(h,r))!==0){let $=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(Z.isFormData(r)&&(M=$.headers.get("content-type"))&&h.setContentType(M),$.body){const[A,w]=Ub(C,Kd(Fb(c)));r=qb($.body,Bb,A,w)}}Z.isString(f)||(f=f?"include":"omit");const U="credentials"in Request.prototype;v=new Request(e,{...m,signal:g,method:s.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:U?f:void 0});let D=await fetch(v);const E=zm&&(u==="stream"||u==="response");if(zm&&(l||E&&I)){const $={};["status","statusText","headers"].forEach(_=>{$[_]=D[_]});const M=Z.toFiniteNumber(D.headers.get("content-length")),[A,w]=l&&Ub(M,Kd(Fb(l),!0))||[];D=new Response(qb(D.body,Bb,A,()=>{w&&w(),I&&I()}),$)}u=u||"text";let L=await Yd[Z.findKey(Yd,u)||"text"](D,t);return!E&&I&&I(),await new Promise(($,M)=>{HI($,M,{data:L,headers:tr.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:v})})}catch(U){throw I&&I(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,t,v),{cause:U.cause||U}):We.from(U,U&&U.code,t,v)}}),Wm={http:k9,xhr:t7,fetch:u7};Z.forEach(Wm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const jb=t=>`- ${t}`,d7=t=>Z.isFunction(t)||t===null||t===!1,YI={getAdapter:t=>{t=Z.isArray(t)?t:[t];const{length:e}=t;let s,r;const n={};for(let i=0;i<e;i++){s=t[i];let o;if(r=s,!d7(s)&&(r=Wm[(o=String(s)).toLowerCase()],r===void 0))throw new We(`Unknown adapter '${o}'`);if(r)break;n[o||"#"+i]=r}if(!r){const i=Object.entries(n).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(jb).join(`
`):" "+jb(i[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Wm};function Np(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new za(null,t)}function Hb(t){return Np(t),t.headers=tr.from(t.headers),t.data=Rp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YI.getAdapter(t.adapter||zc.adapter)(t).then(function(r){return Np(t),r.data=Rp.call(t,t.transformResponse,r),r.headers=tr.from(r.headers),r},function(r){return jI(r)||(Np(t),r&&r.response&&(r.response.data=Rp.call(t,t.transformResponse,r.response),r.response.headers=tr.from(r.response.headers))),Promise.reject(r)})}const QI="1.9.0",pf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const zb={};pf.transitional=function(e,s,r){function n(i,o){return"[Axios v"+QI+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(e===!1)throw new We(n(o," has been removed"+(s?" in "+s:"")),We.ERR_DEPRECATED);return s&&!zb[o]&&(zb[o]=!0,console.warn(n(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,l):!0}};pf.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function h7(t,e,s){if(typeof t!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new We("option "+i+" must be "+c,We.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new We("Unknown option "+i,We.ERR_BAD_OPTION)}}const td={assertOptions:h7,validators:pf},Fr=td.validators;let uo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Mb,response:new Mb}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=So(this.defaults,s);const{transitional:r,paramsSerializer:n,headers:i}=s;r!==void 0&&td.assertOptions(r,{silentJSONParsing:Fr.transitional(Fr.boolean),forcedJSONParsing:Fr.transitional(Fr.boolean),clarifyTimeoutError:Fr.transitional(Fr.boolean)},!1),n!=null&&(Z.isFunction(n)?s.paramsSerializer={serialize:n}:td.assertOptions(n,{encode:Fr.function,serialize:Fr.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),td.assertOptions(s,{baseUrl:Fr.spelling("baseURL"),withXsrfToken:Fr.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&Z.merge(i.common,i[s.method]);i&&Z.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),s.headers=tr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(s)===!1||(c=c&&I.synchronous,l.unshift(I.fulfilled,I.rejected))});const u=[];this.interceptors.response.forEach(function(I){u.push(I.fulfilled,I.rejected)});let h,f=0,m;if(!c){const v=[Hb.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,u),m=v.length,h=Promise.resolve(s);f<m;)h=h.then(v[f++],v[f++]);return h}m=l.length;let g=s;for(f=0;f<m;){const v=l[f++],I=l[f++];try{g=v(g)}catch(C){I.call(this,C);break}}try{h=Hb.call(this,g)}catch(v){return Promise.reject(v)}for(f=0,m=u.length;f<m;)h=h.then(u[f++],u[f++]);return h}getUri(e){e=So(this.defaults,e);const s=zI(e.baseURL,e.url,e.allowAbsoluteUrls);return VI(s,e.params,e.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(e){uo.prototype[e]=function(s,r){return this.request(So(r||{},{method:e,url:s,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function s(r){return function(i,o,l){return this.request(So(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}uo.prototype[e]=s(),uo.prototype[e+"Form"]=s(!0)});let f7=class XI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,l){r.reason||(r.reason=new za(i,o,l),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new XI(function(n){e=n}),cancel:e}}};function p7(t){return function(s){return t.apply(null,s)}}function m7(t){return Z.isObject(t)&&t.isAxiosError===!0}const Gm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gm).forEach(([t,e])=>{Gm[e]=t});function JI(t){const e=new uo(t),s=AI(uo.prototype.request,e);return Z.extend(s,uo.prototype,e,{allOwnKeys:!0}),Z.extend(s,e,null,{allOwnKeys:!0}),s.create=function(n){return JI(So(t,n))},s}const ut=JI(zc);ut.Axios=uo;ut.CanceledError=za;ut.CancelToken=f7;ut.isCancel=jI;ut.VERSION=QI;ut.toFormData=hf;ut.AxiosError=We;ut.Cancel=ut.CanceledError;ut.all=function(e){return Promise.all(e)};ut.spread=p7;ut.isAxiosError=m7;ut.mergeConfig=So;ut.AxiosHeaders=tr;ut.formToJSON=t=>BI(Z.isHTMLForm(t)?new FormData(t):t);ut.getAdapter=YI.getAdapter;ut.HttpStatusCode=Gm;ut.default=ut;const{Axios:A2e,AxiosError:P2e,CanceledError:x2e,isCancel:L2e,CancelToken:R2e,VERSION:N2e,all:O2e,Cancel:D2e,isAxiosError:M2e,spread:$2e,toFormData:U2e,AxiosHeaders:F2e,HttpStatusCode:V2e,formToJSON:q2e,getAdapter:B2e,mergeConfig:j2e}=ut,Op={},g7=(Op==null?void 0:Op.VITE_API_BASE_URL)||"https://api.aced.live",Jr=HD({modules:{global:GD,platformMode:KD,user:F8},state:{user:null,firebaseUserId:null,token:null,progress:{},diaryLogs:[],authInitialized:!1},mutations:{setUser(t,e){t.user=e},setFirebaseUserId(t,e){t.firebaseUserId=e},setToken(t,e){t.token=e},setProgress(t,e){t.progress=e||{}},setDiaryLogs(t,e){t.diaryLogs=e||[]},setAuthInitialized(t,e){t.authInitialized=e},logout(t){t.user=null,t.firebaseUserId=null,t.token=null,t.progress={},t.diaryLogs=[],t.authInitialized=!0,localStorage.clear()}},actions:{async LoginUser({commit:t},{userData:e,token:s}){try{const n=(await ut.post(`${g7}/users/save`,{token:s,name:e.displayName||e.email||"Unnamed User",subscriptionPlan:"free"})).data;t("setUser",n),t("setFirebaseUserId",n.firebaseId),t("setToken",s),t("setAuthInitialized",!0),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("firebaseUserId",n.firebaseId),localStorage.setItem("token",s)}catch{}},logoutUser({commit:t}){t("logout")},loadUserFromLocalStorage({commit:t}){try{const e=JSON.parse(localStorage.getItem("user")),s=localStorage.getItem("firebaseUserId"),r=localStorage.getItem("token"),n=JSON.parse(localStorage.getItem("progress")||"{}"),i=JSON.parse(localStorage.getItem("diaryLogs")||"[]");e&&t("setUser",e),s&&t("setFirebaseUserId",s),r&&t("setToken",r),t("setProgress",n),t("setDiaryLogs",i),t("setAuthInitialized",!0)}catch{t("setAuthInitialized",!0)}},waitForAuthInit({state:t}){return new Promise(e=>{if(t.authInitialized)return e();const s=setInterval(()=>{t.authInitialized&&(clearInterval(s),e())},50)})},updateProgress({commit:t},e){t("setProgress",e),localStorage.setItem("progress",JSON.stringify(e))},updateDiaryLogs({commit:t},e){t("setDiaryLogs",e),localStorage.setItem("diaryLogs",JSON.stringify(e))}},getters:{isLoggedIn:t=>!!t.user&&!!t.firebaseUserId&&!!t.token,getUser:t=>t.user,getFirebaseUserId:t=>t.firebaseUserId,getToken:t=>t.token,getProgress:t=>t.progress,getDiaryLogs:t=>t.diaryLogs,isAuthInitialized:t=>t.authInitialized}}),Oi=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"}));/*!
  * shared v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Qd=typeof window<"u",Di=(t,e=!1)=>e?Symbol.for(t):Symbol(t),y7=(t,e,s)=>v7({l:t,k:e,s}),v7=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ht=t=>typeof t=="number"&&isFinite(t),_7=t=>eC(t)==="[object Date]",Ei=t=>eC(t)==="[object RegExp]",mf=t=>qe(t)&&Object.keys(t).length===0,gs=Object.assign,b7=Object.create,St=(t=null)=>b7(t);let Wb;const _n=()=>Wb||(Wb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:St());function Gb(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const w7=Object.prototype.hasOwnProperty;function Ar(t,e){return w7.call(t,e)}const Lt=Array.isArray,Ct=t=>typeof t=="function",Te=t=>typeof t=="string",Ye=t=>typeof t=="boolean",at=t=>t!==null&&typeof t=="object",S7=t=>at(t)&&Ct(t.then)&&Ct(t.catch),ZI=Object.prototype.toString,eC=t=>ZI.call(t),qe=t=>{if(!at(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},E7=t=>t==null?"":Lt(t)||qe(t)&&t.toString===ZI?JSON.stringify(t,null,2):String(t);function T7(t,e=""){return t.reduce((s,r,n)=>n===0?s+r:s+e+r,"")}function gf(t){let e=t;return()=>++e}function k7(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Pu=t=>!at(t)||Lt(t);function sd(t,e){if(Pu(t)||Pu(e))throw new Error("Invalid value");const s=[{src:t,des:e}];for(;s.length;){const{src:r,des:n}=s.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(at(r[i])&&!at(n[i])&&(n[i]=Array.isArray(r[i])?[]:St()),Pu(n[i])||Pu(r[i])?n[i]=r[i]:s.push({src:r[i],des:n[i]}))})}}/*!
  * message-compiler v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function I7(t,e,s){return{line:t,column:e,offset:s}}function Xd(t,e,s){return{start:t,end:e}}const C7=/\{([0-9a-zA-Z]+)\}/g;function tC(t,...e){return e.length===1&&A7(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(C7,(s,r)=>e.hasOwnProperty(r)?e[r]:"")}const sC=Object.assign,Kb=t=>typeof t=="string",A7=t=>t!==null&&typeof t=="object";function rC(t,e=""){return t.reduce((s,r,n)=>n===0?s+r:s+e+r,"")}const Yy={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},P7={[Yy.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function x7(t,e,...s){const r=tC(P7[t],...s||[]),n={message:String(r),code:t};return e&&(n.location=e),n}const De={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},L7={[De.EXPECTED_TOKEN]:"Expected token: '{0}'",[De.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[De.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[De.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[De.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[De.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[De.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[De.EMPTY_PLACEHOLDER]:"Empty placeholder",[De.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[De.INVALID_LINKED_FORMAT]:"Invalid linked format",[De.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[De.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[De.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[De.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[De.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[De.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Wa(t,e,s={}){const{domain:r,messages:n,args:i}=s,o=tC((n||L7)[t]||"",...i||[]),l=new SyntaxError(String(o));return l.code=t,e&&(l.location=e),l.domain=r,l}function R7(t){throw t}const dn=" ",N7="\r",Us=`
`,O7="\u2028",D7="\u2029";function M7(t){const e=t;let s=0,r=1,n=1,i=0;const o=A=>e[A]===N7&&e[A+1]===Us,l=A=>e[A]===Us,c=A=>e[A]===D7,u=A=>e[A]===O7,h=A=>o(A)||l(A)||c(A)||u(A),f=()=>s,m=()=>r,g=()=>n,v=()=>i,I=A=>o(A)||c(A)||u(A)?Us:e[A],C=()=>I(s),U=()=>I(s+i);function D(){return i=0,h(s)&&(r++,n=0),o(s)&&s++,s++,n++,e[s]}function E(){return o(s+i)&&i++,i++,e[s+i]}function L(){s=0,r=1,n=1,i=0}function $(A=0){i=A}function M(){const A=s+i;for(;A!==s;)D();i=0}return{index:f,line:m,column:g,peekOffset:v,charAt:I,currentChar:C,currentPeek:U,next:D,peek:E,reset:L,resetPeek:$,skipToPeek:M}}const Wn=void 0,$7=".",Yb="'",U7="tokenizer";function F7(t,e={}){const s=e.location!==!1,r=M7(t),n=()=>r.index(),i=()=>I7(r.line(),r.column(),r.index()),o=i(),l=n(),c={currentType:14,offset:l,startLoc:o,endLoc:o,lastType:14,lastOffset:l,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>c,{onError:h}=e;function f(O,V,j,...X){const oe=u();if(V.column+=j,V.offset+=j,h){const ie=s?Xd(oe.startLoc,V):null,z=Wa(O,ie,{domain:U7,args:X});h(z)}}function m(O,V,j){O.endLoc=i(),O.currentType=V;const X={type:V};return s&&(X.loc=Xd(O.startLoc,O.endLoc)),j!=null&&(X.value=j),X}const g=O=>m(O,14);function v(O,V){return O.currentChar()===V?(O.next(),V):(f(De.EXPECTED_TOKEN,i(),0,V),"")}function I(O){let V="";for(;O.currentPeek()===dn||O.currentPeek()===Us;)V+=O.currentPeek(),O.peek();return V}function C(O){const V=I(O);return O.skipToPeek(),V}function U(O){if(O===Wn)return!1;const V=O.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V===95}function D(O){if(O===Wn)return!1;const V=O.charCodeAt(0);return V>=48&&V<=57}function E(O,V){const{currentType:j}=V;if(j!==2)return!1;I(O);const X=U(O.currentPeek());return O.resetPeek(),X}function L(O,V){const{currentType:j}=V;if(j!==2)return!1;I(O);const X=O.currentPeek()==="-"?O.peek():O.currentPeek(),oe=D(X);return O.resetPeek(),oe}function $(O,V){const{currentType:j}=V;if(j!==2)return!1;I(O);const X=O.currentPeek()===Yb;return O.resetPeek(),X}function M(O,V){const{currentType:j}=V;if(j!==8)return!1;I(O);const X=O.currentPeek()===".";return O.resetPeek(),X}function A(O,V){const{currentType:j}=V;if(j!==9)return!1;I(O);const X=U(O.currentPeek());return O.resetPeek(),X}function w(O,V){const{currentType:j}=V;if(!(j===8||j===12))return!1;I(O);const X=O.currentPeek()===":";return O.resetPeek(),X}function _(O,V){const{currentType:j}=V;if(j!==10)return!1;const X=()=>{const ie=O.currentPeek();return ie==="{"?U(O.peek()):ie==="@"||ie==="%"||ie==="|"||ie===":"||ie==="."||ie===dn||!ie?!1:ie===Us?(O.peek(),X()):x(O,!1)},oe=X();return O.resetPeek(),oe}function P(O){I(O);const V=O.currentPeek()==="|";return O.resetPeek(),V}function R(O){const V=I(O),j=O.currentPeek()==="%"&&O.peek()==="{";return O.resetPeek(),{isModulo:j,hasSpace:V.length>0}}function x(O,V=!0){const j=(oe=!1,ie="",z=!1)=>{const K=O.currentPeek();return K==="{"?ie==="%"?!1:oe:K==="@"||!K?ie==="%"?!0:oe:K==="%"?(O.peek(),j(oe,"%",!0)):K==="|"?ie==="%"||z?!0:!(ie===dn||ie===Us):K===dn?(O.peek(),j(!0,dn,z)):K===Us?(O.peek(),j(!0,Us,z)):!0},X=j();return V&&O.resetPeek(),X}function N(O,V){const j=O.currentChar();return j===Wn?Wn:V(j)?(O.next(),j):null}function ue(O){const V=O.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===95||V===36}function de(O){return N(O,ue)}function ce(O){const V=O.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===95||V===36||V===45}function te(O){return N(O,ce)}function le(O){const V=O.charCodeAt(0);return V>=48&&V<=57}function $e(O){return N(O,le)}function vt(O){const V=O.charCodeAt(0);return V>=48&&V<=57||V>=65&&V<=70||V>=97&&V<=102}function me(O){return N(O,vt)}function Oe(O){let V="",j="";for(;V=$e(O);)j+=V;return j}function Be(O){C(O);const V=O.currentChar();return V!=="%"&&f(De.EXPECTED_TOKEN,i(),0,V),O.next(),"%"}function Rt(O){let V="";for(;;){const j=O.currentChar();if(j==="{"||j==="}"||j==="@"||j==="|"||!j)break;if(j==="%")if(x(O))V+=j,O.next();else break;else if(j===dn||j===Us)if(x(O))V+=j,O.next();else{if(P(O))break;V+=j,O.next()}else V+=j,O.next()}return V}function _t(O){C(O);let V="",j="";for(;V=te(O);)j+=V;return O.currentChar()===Wn&&f(De.UNTERMINATED_CLOSING_BRACE,i(),0),j}function bt(O){C(O);let V="";return O.currentChar()==="-"?(O.next(),V+=`-${Oe(O)}`):V+=Oe(O),O.currentChar()===Wn&&f(De.UNTERMINATED_CLOSING_BRACE,i(),0),V}function se(O){return O!==Yb&&O!==Us}function we(O){C(O),v(O,"'");let V="",j="";for(;V=N(O,se);)V==="\\"?j+=ge(O):j+=V;const X=O.currentChar();return X===Us||X===Wn?(f(De.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),X===Us&&(O.next(),v(O,"'")),j):(v(O,"'"),j)}function ge(O){const V=O.currentChar();switch(V){case"\\":case"'":return O.next(),`\\${V}`;case"u":return Ee(O,V,4);case"U":return Ee(O,V,6);default:return f(De.UNKNOWN_ESCAPE_SEQUENCE,i(),0,V),""}}function Ee(O,V,j){v(O,V);let X="";for(let oe=0;oe<j;oe++){const ie=me(O);if(!ie){f(De.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${V}${X}${O.currentChar()}`);break}X+=ie}return`\\${V}${X}`}function ze(O){return O!=="{"&&O!=="}"&&O!==dn&&O!==Us}function Je(O){C(O);let V="",j="";for(;V=N(O,ze);)j+=V;return j}function B(O){let V="",j="";for(;V=de(O);)j+=V;return j}function T(O){const V=j=>{const X=O.currentChar();return X==="{"||X==="%"||X==="@"||X==="|"||X==="("||X===")"||!X||X===dn?j:(j+=X,O.next(),V(j))};return V("")}function q(O){C(O);const V=v(O,"|");return C(O),V}function Q(O,V){let j=null;switch(O.currentChar()){case"{":return V.braceNest>=1&&f(De.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),O.next(),j=m(V,2,"{"),C(O),V.braceNest++,j;case"}":return V.braceNest>0&&V.currentType===2&&f(De.EMPTY_PLACEHOLDER,i(),0),O.next(),j=m(V,3,"}"),V.braceNest--,V.braceNest>0&&C(O),V.inLinked&&V.braceNest===0&&(V.inLinked=!1),j;case"@":return V.braceNest>0&&f(De.UNTERMINATED_CLOSING_BRACE,i(),0),j=H(O,V)||g(V),V.braceNest=0,j;default:{let oe=!0,ie=!0,z=!0;if(P(O))return V.braceNest>0&&f(De.UNTERMINATED_CLOSING_BRACE,i(),0),j=m(V,1,q(O)),V.braceNest=0,V.inLinked=!1,j;if(V.braceNest>0&&(V.currentType===5||V.currentType===6||V.currentType===7))return f(De.UNTERMINATED_CLOSING_BRACE,i(),0),V.braceNest=0,Y(O,V);if(oe=E(O,V))return j=m(V,5,_t(O)),C(O),j;if(ie=L(O,V))return j=m(V,6,bt(O)),C(O),j;if(z=$(O,V))return j=m(V,7,we(O)),C(O),j;if(!oe&&!ie&&!z)return j=m(V,13,Je(O)),f(De.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,j.value),C(O),j;break}}return j}function H(O,V){const{currentType:j}=V;let X=null;const oe=O.currentChar();switch((j===8||j===9||j===12||j===10)&&(oe===Us||oe===dn)&&f(De.INVALID_LINKED_FORMAT,i(),0),oe){case"@":return O.next(),X=m(V,8,"@"),V.inLinked=!0,X;case".":return C(O),O.next(),m(V,9,".");case":":return C(O),O.next(),m(V,10,":");default:return P(O)?(X=m(V,1,q(O)),V.braceNest=0,V.inLinked=!1,X):M(O,V)||w(O,V)?(C(O),H(O,V)):A(O,V)?(C(O),m(V,12,B(O))):_(O,V)?(C(O),oe==="{"?Q(O,V)||X:m(V,11,T(O))):(j===8&&f(De.INVALID_LINKED_FORMAT,i(),0),V.braceNest=0,V.inLinked=!1,Y(O,V))}}function Y(O,V){let j={type:14};if(V.braceNest>0)return Q(O,V)||g(V);if(V.inLinked)return H(O,V)||g(V);switch(O.currentChar()){case"{":return Q(O,V)||g(V);case"}":return f(De.UNBALANCED_CLOSING_BRACE,i(),0),O.next(),m(V,3,"}");case"@":return H(O,V)||g(V);default:{if(P(O))return j=m(V,1,q(O)),V.braceNest=0,V.inLinked=!1,j;const{isModulo:oe,hasSpace:ie}=R(O);if(oe)return ie?m(V,0,Rt(O)):m(V,4,Be(O));if(x(O))return m(V,0,Rt(O));break}}return j}function J(){const{currentType:O,offset:V,startLoc:j,endLoc:X}=c;return c.lastType=O,c.lastOffset=V,c.lastStartLoc=j,c.lastEndLoc=X,c.offset=n(),c.startLoc=i(),r.currentChar()===Wn?m(c,14):Y(r,c)}return{nextToken:J,currentOffset:n,currentPosition:i,context:u}}const V7="parser",q7=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function B7(t,e,s){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||s,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function j7(t={}){const e=t.location!==!1,{onError:s,onWarn:r}=t;function n(E,L,$,M,...A){const w=E.currentPosition();if(w.offset+=M,w.column+=M,s){const _=e?Xd($,w):null,P=Wa(L,_,{domain:V7,args:A});s(P)}}function i(E,L,$,M,...A){const w=E.currentPosition();if(w.offset+=M,w.column+=M,r){const _=e?Xd($,w):null;r(x7(L,_,A))}}function o(E,L,$){const M={type:E};return e&&(M.start=L,M.end=L,M.loc={start:$,end:$}),M}function l(E,L,$,M){e&&(E.end=L,E.loc&&(E.loc.end=$))}function c(E,L){const $=E.context(),M=o(3,$.offset,$.startLoc);return M.value=L,l(M,E.currentOffset(),E.currentPosition()),M}function u(E,L){const $=E.context(),{lastOffset:M,lastStartLoc:A}=$,w=o(5,M,A);return w.index=parseInt(L,10),E.nextToken(),l(w,E.currentOffset(),E.currentPosition()),w}function h(E,L,$){const M=E.context(),{lastOffset:A,lastStartLoc:w}=M,_=o(4,A,w);return _.key=L,$===!0&&(_.modulo=!0),E.nextToken(),l(_,E.currentOffset(),E.currentPosition()),_}function f(E,L){const $=E.context(),{lastOffset:M,lastStartLoc:A}=$,w=o(9,M,A);return w.value=L.replace(q7,B7),E.nextToken(),l(w,E.currentOffset(),E.currentPosition()),w}function m(E){const L=E.nextToken(),$=E.context(),{lastOffset:M,lastStartLoc:A}=$,w=o(8,M,A);return L.type!==12?(n(E,De.UNEXPECTED_EMPTY_LINKED_MODIFIER,$.lastStartLoc,0),w.value="",l(w,M,A),{nextConsumeToken:L,node:w}):(L.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,$.lastStartLoc,0,Sr(L)),w.value=L.value||"",l(w,E.currentOffset(),E.currentPosition()),{node:w})}function g(E,L){const $=E.context(),M=o(7,$.offset,$.startLoc);return M.value=L,l(M,E.currentOffset(),E.currentPosition()),M}function v(E){const L=E.context(),$=o(6,L.offset,L.startLoc);let M=E.nextToken();if(M.type===9){const A=m(E);$.modifier=A.node,M=A.nextConsumeToken||E.nextToken()}switch(M.type!==10&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(M)),M=E.nextToken(),M.type===2&&(M=E.nextToken()),M.type){case 11:M.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(M)),$.key=g(E,M.value||"");break;case 5:M.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(M)),$.key=h(E,M.value||"");break;case 6:M.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(M)),$.key=u(E,M.value||"");break;case 7:M.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(M)),$.key=f(E,M.value||"");break;default:{n(E,De.UNEXPECTED_EMPTY_LINKED_KEY,L.lastStartLoc,0);const A=E.context(),w=o(7,A.offset,A.startLoc);return w.value="",l(w,A.offset,A.startLoc),$.key=w,l($,A.offset,A.startLoc),{nextConsumeToken:M,node:$}}}return l($,E.currentOffset(),E.currentPosition()),{node:$}}function I(E){const L=E.context(),$=L.currentType===1?E.currentOffset():L.offset,M=L.currentType===1?L.endLoc:L.startLoc,A=o(2,$,M);A.items=[];let w=null,_=null;do{const x=w||E.nextToken();switch(w=null,x.type){case 0:x.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(x)),A.items.push(c(E,x.value||""));break;case 6:x.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(x)),A.items.push(u(E,x.value||""));break;case 4:_=!0;break;case 5:x.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(x)),A.items.push(h(E,x.value||"",!!_)),_&&(i(E,Yy.USE_MODULO_SYNTAX,L.lastStartLoc,0,Sr(x)),_=null);break;case 7:x.value==null&&n(E,De.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,Sr(x)),A.items.push(f(E,x.value||""));break;case 8:{const N=v(E);A.items.push(N.node),w=N.nextConsumeToken||null;break}}}while(L.currentType!==14&&L.currentType!==1);const P=L.currentType===1?L.lastOffset:E.currentOffset(),R=L.currentType===1?L.lastEndLoc:E.currentPosition();return l(A,P,R),A}function C(E,L,$,M){const A=E.context();let w=M.items.length===0;const _=o(1,L,$);_.cases=[],_.cases.push(M);do{const P=I(E);w||(w=P.items.length===0),_.cases.push(P)}while(A.currentType!==14);return w&&n(E,De.MUST_HAVE_MESSAGES_IN_PLURAL,$,0),l(_,E.currentOffset(),E.currentPosition()),_}function U(E){const L=E.context(),{offset:$,startLoc:M}=L,A=I(E);return L.currentType===14?A:C(E,$,M,A)}function D(E){const L=F7(E,sC({},t)),$=L.context(),M=o(0,$.offset,$.startLoc);return e&&M.loc&&(M.loc.source=E),M.body=U(L),t.onCacheKey&&(M.cacheKey=t.onCacheKey(E)),$.currentType!==14&&n(L,De.UNEXPECTED_LEXICAL_ANALYSIS,$.lastStartLoc,0,E[$.offset]||""),l(M,L.currentOffset(),L.currentPosition()),M}return{parse:D}}function Sr(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function H7(t,e={}){const s={ast:t,helpers:new Set};return{context:()=>s,helper:i=>(s.helpers.add(i),i)}}function Qb(t,e){for(let s=0;s<t.length;s++)Qy(t[s],e)}function Qy(t,e){switch(t.type){case 1:Qb(t.cases,e),e.helper("plural");break;case 2:Qb(t.items,e);break;case 6:{Qy(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function z7(t,e={}){const s=H7(t);s.helper("normalize"),t.body&&Qy(t.body,s);const r=s.context();t.helpers=Array.from(r.helpers)}function W7(t){const e=t.body;return e.type===2?Xb(e):e.cases.forEach(s=>Xb(s)),t}function Xb(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let s=0;s<t.items.length;s++){const r=t.items[s];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=rC(e);for(let s=0;s<t.items.length;s++){const r=t.items[s];(r.type===3||r.type===9)&&delete r.value}}}}const G7="minifier";function ta(t){switch(t.t=t.type,t.type){case 0:{const e=t;ta(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,s=e.cases;for(let r=0;r<s.length;r++)ta(s[r]);e.c=s,delete e.cases;break}case 2:{const e=t,s=e.items;for(let r=0;r<s.length;r++)ta(s[r]);e.i=s,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;ta(e.key),e.k=e.key,delete e.key,e.modifier&&(ta(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw Wa(De.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:G7,args:[t.type]})}delete t.type}const K7="parser";function Y7(t,e){const{filename:s,breakLineCode:r,needIndent:n}=e,i=e.location!==!1,o={filename:s,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:n,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const l=()=>o;function c(I,C){o.code+=I}function u(I,C=!0){const U=C?r:"";c(n?U+"  ".repeat(I):U)}function h(I=!0){const C=++o.indentLevel;I&&u(C)}function f(I=!0){const C=--o.indentLevel;I&&u(C)}function m(){u(o.indentLevel)}return{context:l,push:c,indent:h,deindent:f,newline:m,helper:I=>`_${I}`,needIndent:()=>o.needIndent}}function Q7(t,e){const{helper:s}=t;t.push(`${s("linked")}(`),Ia(t,e.key),e.modifier?(t.push(", "),Ia(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function X7(t,e){const{helper:s,needIndent:r}=t;t.push(`${s("normalize")}([`),t.indent(r());const n=e.items.length;for(let i=0;i<n&&(Ia(t,e.items[i]),i!==n-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function J7(t,e){const{helper:s,needIndent:r}=t;if(e.cases.length>1){t.push(`${s("plural")}([`),t.indent(r());const n=e.cases.length;for(let i=0;i<n&&(Ia(t,e.cases[i]),i!==n-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function Z7(t,e){e.body?Ia(t,e.body):t.push("null")}function Ia(t,e){const{helper:s}=t;switch(e.type){case 0:Z7(t,e);break;case 1:J7(t,e);break;case 2:X7(t,e);break;case 6:Q7(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${s("interpolate")}(${s("list")}(${e.index}))`,e);break;case 4:t.push(`${s("interpolate")}(${s("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw Wa(De.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:K7,args:[e.type]})}}const eq=(t,e={})=>{const s=Kb(e.mode)?e.mode:"normal",r=Kb(e.filename)?e.filename:"message.intl";e.sourceMap;const n=e.breakLineCode!=null?e.breakLineCode:s==="arrow"?";":`
`,i=e.needIndent?e.needIndent:s!=="arrow",o=t.helpers||[],l=Y7(t,{filename:r,breakLineCode:n,needIndent:i});l.push(s==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(i),o.length>0&&(l.push(`const { ${rC(o.map(h=>`${h}: _${h}`),", ")} } = ctx`),l.newline()),l.push("return "),Ia(l,t),l.deindent(i),l.push("}"),delete t.helpers;const{code:c,map:u}=l.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function tq(t,e={}){const s=sC({},e),r=!!s.jit,n=!!s.minify,i=s.optimize==null?!0:s.optimize,l=j7(s).parse(t);return r?(i&&W7(l),n&&ta(l),{ast:l,code:""}):(z7(l,s),eq(l,s))}/*!
  * core-base v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function sq(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_n().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_n().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_n().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Zr(t){return at(t)&&Xy(t)===0&&(Ar(t,"b")||Ar(t,"body"))}const nC=["b","body"];function rq(t){return Mi(t,nC)}const iC=["c","cases"];function nq(t){return Mi(t,iC,[])}const oC=["s","static"];function iq(t){return Mi(t,oC)}const aC=["i","items"];function oq(t){return Mi(t,aC,[])}const lC=["t","type"];function Xy(t){return Mi(t,lC)}const cC=["v","value"];function xu(t,e){const s=Mi(t,cC);if(s!=null)return s;throw gc(e)}const uC=["m","modifier"];function aq(t){return Mi(t,uC)}const dC=["k","key"];function lq(t){const e=Mi(t,dC);if(e)return e;throw gc(6)}function Mi(t,e,s){for(let r=0;r<e.length;r++){const n=e[r];if(Ar(t,n)&&t[n]!=null)return t[n]}return s}const hC=[...nC,...iC,...oC,...aC,...dC,...uC,...cC,...lC];function gc(t){return new Error(`unhandled node type: ${t}`)}const $i=[];$i[0]={w:[0],i:[3,0],"[":[4],o:[7]};$i[1]={w:[1],".":[2],"[":[4],o:[7]};$i[2]={w:[2],i:[3,0],0:[3,0]};$i[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};$i[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};$i[5]={"'":[4,0],o:8,l:[5,0]};$i[6]={'"':[4,0],o:8,l:[6,0]};const cq=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function uq(t){return cq.test(t)}function dq(t){const e=t.charCodeAt(0),s=t.charCodeAt(t.length-1);return e===s&&(e===34||e===39)?t.slice(1,-1):t}function hq(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function fq(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:uq(e)?dq(e):"*"+e}function pq(t){const e=[];let s=-1,r=0,n=0,i,o,l,c,u,h,f;const m=[];m[0]=()=>{o===void 0?o=l:o+=l},m[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},m[2]=()=>{m[0](),n++},m[3]=()=>{if(n>0)n--,r=4,m[0]();else{if(n=0,o===void 0||(o=fq(o),o===!1))return!1;m[1]()}};function g(){const v=t[s+1];if(r===5&&v==="'"||r===6&&v==='"')return s++,l="\\"+v,m[0](),!0}for(;r!==null;)if(s++,i=t[s],!(i==="\\"&&g())){if(c=hq(i),f=$i[r],u=f[c]||f.l||8,u===8||(r=u[0],u[1]!==void 0&&(h=m[u[1]],h&&(l=i,h()===!1))))return;if(r===7)return e}}const Jb=new Map;function mq(t,e){return at(t)?t[e]:null}function gq(t,e){if(!at(t))return null;let s=Jb.get(e);if(s||(s=pq(e),s&&Jb.set(e,s)),!s)return null;const r=s.length;let n=t,i=0;for(;i<r;){const o=s[i];if(hC.includes(o)&&Zr(n))return null;const l=n[o];if(l===void 0||Ct(n))return null;n=l,i++}return n}const yq=t=>t,vq=t=>"",_q="text",bq=t=>t.length===0?"":T7(t),wq=E7;function Zb(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function Sq(t){const e=Ht(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Ht(t.named.count)||Ht(t.named.n))?Ht(t.named.count)?t.named.count:Ht(t.named.n)?t.named.n:e:e}function Eq(t,e){e.count||(e.count=t),e.n||(e.n=t)}function Tq(t={}){const e=t.locale,s=Sq(t),r=at(t.pluralRules)&&Te(e)&&Ct(t.pluralRules[e])?t.pluralRules[e]:Zb,n=at(t.pluralRules)&&Te(e)&&Ct(t.pluralRules[e])?Zb:void 0,i=U=>U[r(s,U.length,n)],o=t.list||[],l=U=>o[U],c=t.named||St();Ht(t.pluralIndex)&&Eq(s,c);const u=U=>c[U];function h(U){const D=Ct(t.messages)?t.messages(U):at(t.messages)?t.messages[U]:!1;return D||(t.parent?t.parent.message(U):vq)}const f=U=>t.modifiers?t.modifiers[U]:yq,m=qe(t.processor)&&Ct(t.processor.normalize)?t.processor.normalize:bq,g=qe(t.processor)&&Ct(t.processor.interpolate)?t.processor.interpolate:wq,v=qe(t.processor)&&Te(t.processor.type)?t.processor.type:_q,C={list:l,named:u,plural:i,linked:(U,...D)=>{const[E,L]=D;let $="text",M="";D.length===1?at(E)?(M=E.modifier||M,$=E.type||$):Te(E)&&(M=E||M):D.length===2&&(Te(E)&&(M=E||M),Te(L)&&($=L||$));const A=h(U)(C),w=$==="vnode"&&Lt(A)&&M?A[0]:A;return M?f(M)(w,$):w},message:h,type:v,interpolate:g,normalize:m,values:gs(St(),o,c)};return C}let yc=null;function kq(t){yc=t}function Iq(t,e,s){yc&&yc.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:s})}const Cq=Aq("function:translate");function Aq(t){return e=>yc&&yc.emit(t,e)}const Pq=Yy.__EXTEND_POINT__,Hi=gf(Pq),xq={FALLBACK_TO_TRANSLATE:Hi(),CANNOT_FORMAT_NUMBER:Hi(),FALLBACK_TO_NUMBER_FORMAT:Hi(),CANNOT_FORMAT_DATE:Hi(),FALLBACK_TO_DATE_FORMAT:Hi(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Hi(),__EXTEND_POINT__:Hi()},fC=De.__EXTEND_POINT__,zi=gf(fC),Pr={INVALID_ARGUMENT:fC,INVALID_DATE_ARGUMENT:zi(),INVALID_ISO_DATE_ARGUMENT:zi(),NOT_SUPPORT_NON_STRING_MESSAGE:zi(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:zi(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:zi(),NOT_SUPPORT_LOCALE_TYPE:zi(),__EXTEND_POINT__:zi()};function Gr(t){return Wa(t,null,void 0)}function Jy(t,e){return e.locale!=null?ew(e.locale):ew(t.locale)}let Dp;function ew(t){if(Te(t))return t;if(Ct(t)){if(t.resolvedOnce&&Dp!=null)return Dp;if(t.constructor.name==="Function"){const e=t();if(S7(e))throw Gr(Pr.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Dp=e}else throw Gr(Pr.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Gr(Pr.NOT_SUPPORT_LOCALE_TYPE)}function Lq(t,e,s){return[...new Set([s,...Lt(e)?e:at(e)?Object.keys(e):Te(e)?[e]:[s]])]}function pC(t,e,s){const r=Te(s)?s:Ca,n=t;n.__localeChainCache||(n.__localeChainCache=new Map);let i=n.__localeChainCache.get(r);if(!i){i=[];let o=[s];for(;Lt(o);)o=tw(i,o,e);const l=Lt(e)||!qe(e)?e:e.default?e.default:null;o=Te(l)?[l]:l,Lt(o)&&tw(i,o,!1),n.__localeChainCache.set(r,i)}return i}function tw(t,e,s){let r=!0;for(let n=0;n<e.length&&Ye(r);n++){const i=e[n];Te(i)&&(r=Rq(t,e[n],s))}return r}function Rq(t,e,s){let r;const n=e.split("-");do{const i=n.join("-");r=Nq(t,i,s),n.splice(-1,1)}while(n.length&&r===!0);return r}function Nq(t,e,s){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const n=e.replace(/!/g,"");t.push(n),(Lt(s)||qe(s))&&s[n]&&(r=s[n])}return r}const Oq="9.14.4",yf=-1,Ca="en-US",sw="",rw=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function Dq(){return{upper:(t,e)=>e==="text"&&Te(t)?t.toUpperCase():e==="vnode"&&at(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Te(t)?t.toLowerCase():e==="vnode"&&at(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Te(t)?rw(t):e==="vnode"&&at(t)&&"__v_isVNode"in t?rw(t.children):t}}let mC;function nw(t){mC=t}let gC;function Mq(t){gC=t}let yC;function $q(t){yC=t}let vC=null;const Uq=t=>{vC=t},Fq=()=>vC;let _C=null;const iw=t=>{_C=t},Vq=()=>_C;let ow=0;function qq(t={}){const e=Ct(t.onWarn)?t.onWarn:k7,s=Te(t.version)?t.version:Oq,r=Te(t.locale)||Ct(t.locale)?t.locale:Ca,n=Ct(r)?Ca:r,i=Lt(t.fallbackLocale)||qe(t.fallbackLocale)||Te(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,o=qe(t.messages)?t.messages:Mp(n),l=qe(t.datetimeFormats)?t.datetimeFormats:Mp(n),c=qe(t.numberFormats)?t.numberFormats:Mp(n),u=gs(St(),t.modifiers,Dq()),h=t.pluralRules||St(),f=Ct(t.missing)?t.missing:null,m=Ye(t.missingWarn)||Ei(t.missingWarn)?t.missingWarn:!0,g=Ye(t.fallbackWarn)||Ei(t.fallbackWarn)?t.fallbackWarn:!0,v=!!t.fallbackFormat,I=!!t.unresolving,C=Ct(t.postTranslation)?t.postTranslation:null,U=qe(t.processor)?t.processor:null,D=Ye(t.warnHtmlMessage)?t.warnHtmlMessage:!0,E=!!t.escapeParameter,L=Ct(t.messageCompiler)?t.messageCompiler:mC,$=Ct(t.messageResolver)?t.messageResolver:gC||mq,M=Ct(t.localeFallbacker)?t.localeFallbacker:yC||Lq,A=at(t.fallbackContext)?t.fallbackContext:void 0,w=t,_=at(w.__datetimeFormatters)?w.__datetimeFormatters:new Map,P=at(w.__numberFormatters)?w.__numberFormatters:new Map,R=at(w.__meta)?w.__meta:{};ow++;const x={version:s,cid:ow,locale:r,fallbackLocale:i,messages:o,modifiers:u,pluralRules:h,missing:f,missingWarn:m,fallbackWarn:g,fallbackFormat:v,unresolving:I,postTranslation:C,processor:U,warnHtmlMessage:D,escapeParameter:E,messageCompiler:L,messageResolver:$,localeFallbacker:M,fallbackContext:A,onWarn:e,__meta:R};return x.datetimeFormats=l,x.numberFormats=c,x.__datetimeFormatters=_,x.__numberFormatters=P,__INTLIFY_PROD_DEVTOOLS__&&Iq(x,s,R),x}const Mp=t=>({[t]:St()});function Zy(t,e,s,r,n){const{missing:i,onWarn:o}=t;if(i!==null){const l=i(t,s,e,n);return Te(l)?l:e}else return e}function fl(t,e,s){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,s,e)}function Bq(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function jq(t,e){const s=e.indexOf(t);if(s===-1)return!1;for(let r=s+1;r<e.length;r++)if(Bq(t,e[r]))return!0;return!1}function $p(t){return s=>Hq(s,t)}function Hq(t,e){const s=rq(e);if(s==null)throw gc(0);if(Xy(s)===1){const i=nq(s);return t.plural(i.reduce((o,l)=>[...o,aw(t,l)],[]))}else return aw(t,s)}function aw(t,e){const s=iq(e);if(s!=null)return t.type==="text"?s:t.normalize([s]);{const r=oq(e).reduce((n,i)=>[...n,Km(t,i)],[]);return t.normalize(r)}}function Km(t,e){const s=Xy(e);switch(s){case 3:return xu(e,s);case 9:return xu(e,s);case 4:{const r=e;if(Ar(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(Ar(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw gc(s)}case 5:{const r=e;if(Ar(r,"i")&&Ht(r.i))return t.interpolate(t.list(r.i));if(Ar(r,"index")&&Ht(r.index))return t.interpolate(t.list(r.index));throw gc(s)}case 6:{const r=e,n=aq(r),i=lq(r);return t.linked(Km(t,i),n?Km(t,n):void 0,t.type)}case 7:return xu(e,s);case 8:return xu(e,s);default:throw new Error(`unhandled node on format message part: ${s}`)}}const bC=t=>t;let na=St();function wC(t,e={}){let s=!1;const r=e.onError||R7;return e.onError=n=>{s=!0,r(n)},{...tq(t,e),detectError:s}}const zq=(t,e)=>{if(!Te(t))throw Gr(Pr.NOT_SUPPORT_NON_STRING_MESSAGE);{Ye(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||bC)(t),n=na[r];if(n)return n;const{code:i,detectError:o}=wC(t,e),l=new Function(`return ${i}`)();return o?l:na[r]=l}};function Wq(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&Te(t)){Ye(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||bC)(t),n=na[r];if(n)return n;const{ast:i,detectError:o}=wC(t,{...e,location:!1,jit:!0}),l=$p(i);return o?l:na[r]=l}else{const s=t.cacheKey;if(s){const r=na[s];return r||(na[s]=$p(t))}else return $p(t)}}const lw=()=>"",hr=t=>Ct(t);function cw(t,...e){const{fallbackFormat:s,postTranslation:r,unresolving:n,messageCompiler:i,fallbackLocale:o,messages:l}=t,[c,u]=Ym(...e),h=Ye(u.missingWarn)?u.missingWarn:t.missingWarn,f=Ye(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,m=Ye(u.escapeParameter)?u.escapeParameter:t.escapeParameter,g=!!u.resolvedMessage,v=Te(u.default)||Ye(u.default)?Ye(u.default)?i?c:()=>c:u.default:s?i?c:()=>c:"",I=s||v!=="",C=Jy(t,u);m&&Gq(u);let[U,D,E]=g?[c,C,l[C]||St()]:SC(t,c,C,o,f,h),L=U,$=c;if(!g&&!(Te(L)||Zr(L)||hr(L))&&I&&(L=v,$=L),!g&&(!(Te(L)||Zr(L)||hr(L))||!Te(D)))return n?yf:c;let M=!1;const A=()=>{M=!0},w=hr(L)?L:EC(t,c,D,L,$,A);if(M)return L;const _=Qq(t,D,E,u),P=Tq(_),R=Kq(t,w,P),x=r?r(R,c):R;if(__INTLIFY_PROD_DEVTOOLS__){const N={timestamp:Date.now(),key:Te(c)?c:hr(L)?L.key:"",locale:D||(hr(L)?L.locale:""),format:Te(L)?L:hr(L)?L.source:"",message:x};N.meta=gs({},t.__meta,Fq()||{}),Cq(N)}return x}function Gq(t){Lt(t.list)?t.list=t.list.map(e=>Te(e)?Gb(e):e):at(t.named)&&Object.keys(t.named).forEach(e=>{Te(t.named[e])&&(t.named[e]=Gb(t.named[e]))})}function SC(t,e,s,r,n,i){const{messages:o,onWarn:l,messageResolver:c,localeFallbacker:u}=t,h=u(t,r,s);let f=St(),m,g=null;const v="translate";for(let I=0;I<h.length&&(m=h[I],f=o[m]||St(),(g=c(f,e))===null&&(g=f[e]),!(Te(g)||Zr(g)||hr(g)));I++)if(!jq(m,h)){const C=Zy(t,e,m,i,v);C!==e&&(g=C)}return[g,m,f]}function EC(t,e,s,r,n,i){const{messageCompiler:o,warnHtmlMessage:l}=t;if(hr(r)){const u=r;return u.locale=u.locale||s,u.key=u.key||e,u}if(o==null){const u=()=>r;return u.locale=s,u.key=e,u}const c=o(r,Yq(t,s,n,r,l,i));return c.locale=s,c.key=e,c.source=r,c}function Kq(t,e,s){return e(s)}function Ym(...t){const[e,s,r]=t,n=St();if(!Te(e)&&!Ht(e)&&!hr(e)&&!Zr(e))throw Gr(Pr.INVALID_ARGUMENT);const i=Ht(e)?String(e):(hr(e),e);return Ht(s)?n.plural=s:Te(s)?n.default=s:qe(s)&&!mf(s)?n.named=s:Lt(s)&&(n.list=s),Ht(r)?n.plural=r:Te(r)?n.default=r:qe(r)&&gs(n,r),[i,n]}function Yq(t,e,s,r,n,i){return{locale:e,key:s,warnHtmlMessage:n,onError:o=>{throw i&&i(o),o},onCacheKey:o=>y7(e,s,o)}}function Qq(t,e,s,r){const{modifiers:n,pluralRules:i,messageResolver:o,fallbackLocale:l,fallbackWarn:c,missingWarn:u,fallbackContext:h}=t,m={locale:e,modifiers:n,pluralRules:i,messages:g=>{let v=o(s,g);if(v==null&&h){const[,,I]=SC(h,g,e,l,c,u);v=o(I,g)}if(Te(v)||Zr(v)){let I=!1;const U=EC(t,g,e,v,g,()=>{I=!0});return I?lw:U}else return hr(v)?v:lw}};return t.processor&&(m.processor=t.processor),r.list&&(m.list=r.list),r.named&&(m.named=r.named),Ht(r.plural)&&(m.pluralIndex=r.plural),m}function uw(t,...e){const{datetimeFormats:s,unresolving:r,fallbackLocale:n,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:l}=t,[c,u,h,f]=Qm(...e),m=Ye(h.missingWarn)?h.missingWarn:t.missingWarn;Ye(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const g=!!h.part,v=Jy(t,h),I=o(t,n,v);if(!Te(c)||c==="")return new Intl.DateTimeFormat(v,f).format(u);let C={},U,D=null;const E="datetime format";for(let M=0;M<I.length&&(U=I[M],C=s[U]||{},D=C[c],!qe(D));M++)Zy(t,c,U,m,E);if(!qe(D)||!Te(U))return r?yf:c;let L=`${U}__${c}`;mf(f)||(L=`${L}__${JSON.stringify(f)}`);let $=l.get(L);return $||($=new Intl.DateTimeFormat(U,gs({},D,f)),l.set(L,$)),g?$.formatToParts(u):$.format(u)}const TC=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Qm(...t){const[e,s,r,n]=t,i=St();let o=St(),l;if(Te(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Gr(Pr.INVALID_ISO_DATE_ARGUMENT);const u=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();l=new Date(u);try{l.toISOString()}catch{throw Gr(Pr.INVALID_ISO_DATE_ARGUMENT)}}else if(_7(e)){if(isNaN(e.getTime()))throw Gr(Pr.INVALID_DATE_ARGUMENT);l=e}else if(Ht(e))l=e;else throw Gr(Pr.INVALID_ARGUMENT);return Te(s)?i.key=s:qe(s)&&Object.keys(s).forEach(c=>{TC.includes(c)?o[c]=s[c]:i[c]=s[c]}),Te(r)?i.locale=r:qe(r)&&(o=r),qe(n)&&(o=n),[i.key||"",l,i,o]}function dw(t,e,s){const r=t;for(const n in s){const i=`${e}__${n}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function hw(t,...e){const{numberFormats:s,unresolving:r,fallbackLocale:n,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:l}=t,[c,u,h,f]=Xm(...e),m=Ye(h.missingWarn)?h.missingWarn:t.missingWarn;Ye(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const g=!!h.part,v=Jy(t,h),I=o(t,n,v);if(!Te(c)||c==="")return new Intl.NumberFormat(v,f).format(u);let C={},U,D=null;const E="number format";for(let M=0;M<I.length&&(U=I[M],C=s[U]||{},D=C[c],!qe(D));M++)Zy(t,c,U,m,E);if(!qe(D)||!Te(U))return r?yf:c;let L=`${U}__${c}`;mf(f)||(L=`${L}__${JSON.stringify(f)}`);let $=l.get(L);return $||($=new Intl.NumberFormat(U,gs({},D,f)),l.set(L,$)),g?$.formatToParts(u):$.format(u)}const kC=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Xm(...t){const[e,s,r,n]=t,i=St();let o=St();if(!Ht(e))throw Gr(Pr.INVALID_ARGUMENT);const l=e;return Te(s)?i.key=s:qe(s)&&Object.keys(s).forEach(c=>{kC.includes(c)?o[c]=s[c]:i[c]=s[c]}),Te(r)?i.locale=r:qe(r)&&(o=r),qe(n)&&(o=n),[i.key||"",l,i,o]}function fw(t,e,s){const r=t;for(const n in s){const i=`${e}__${n}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}sq();/*!
  * vue-i18n v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const IC="9.14.4";function Xq(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(_n().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(_n().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_n().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_n().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_n().__INTLIFY_PROD_DEVTOOLS__=!1)}const Jq=xq.__EXTEND_POINT__,hn=gf(Jq);hn(),hn(),hn(),hn(),hn(),hn(),hn(),hn(),hn();const CC=Pr.__EXTEND_POINT__,Hs=gf(CC),ns={UNEXPECTED_RETURN_TYPE:CC,INVALID_ARGUMENT:Hs(),MUST_BE_CALL_SETUP_TOP:Hs(),NOT_INSTALLED:Hs(),NOT_AVAILABLE_IN_LEGACY_MODE:Hs(),REQUIRED_VALUE:Hs(),INVALID_VALUE:Hs(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Hs(),NOT_INSTALLED_WITH_PROVIDE:Hs(),UNEXPECTED_ERROR:Hs(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Hs(),BRIDGE_SUPPORT_VUE_2_ONLY:Hs(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Hs(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Hs(),__EXTEND_POINT__:Hs()};function cs(t,...e){return Wa(t,null,void 0)}const Jm=Di("__translateVNode"),Zm=Di("__datetimeParts"),eg=Di("__numberParts"),AC=Di("__setPluralRules"),PC=Di("__injectWithOption"),tg=Di("__dispose");function vc(t){if(!at(t)||Zr(t))return t;for(const e in t)if(Ar(t,e))if(!e.includes("."))at(t[e])&&vc(t[e]);else{const s=e.split("."),r=s.length-1;let n=t,i=!1;for(let o=0;o<r;o++){if(s[o]==="__proto__")throw new Error(`unsafe key: ${s[o]}`);if(s[o]in n||(n[s[o]]=St()),!at(n[s[o]])){i=!0;break}n=n[s[o]]}if(i||(Zr(n)?hC.includes(s[r])||delete t[e]:(n[s[r]]=t[e],delete t[e])),!Zr(n)){const o=n[s[r]];at(o)&&vc(o)}}return t}function vf(t,e){const{messages:s,__i18n:r,messageResolver:n,flatJson:i}=e,o=qe(s)?s:Lt(r)?St():{[t]:St()};if(Lt(r)&&r.forEach(l=>{if("locale"in l&&"resource"in l){const{locale:c,resource:u}=l;c?(o[c]=o[c]||St(),sd(u,o[c])):sd(u,o)}else Te(l)&&sd(JSON.parse(l),o)}),n==null&&i)for(const l in o)Ar(o,l)&&vc(o[l]);return o}function xC(t){return t.type}function LC(t,e,s){let r=at(e.messages)?e.messages:St();"__i18nGlobal"in s&&(r=vf(t.locale.value,{messages:r,__i18n:s.__i18nGlobal}));const n=Object.keys(r);n.length&&n.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(at(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(at(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function pw(t){return xe(In,null,t,0)}const mw="__INTLIFY_META__",gw=()=>[],Zq=()=>!1;let yw=0;function vw(t){return(e,s,r,n)=>t(s,r,ys()||void 0,n)}const eB=()=>{const t=ys();let e=null;return t&&(e=xC(t)[mw])?{[mw]:e}:null};function ev(t={},e){const{__root:s,__injectWithOption:r}=t,n=s===void 0,i=t.flatJson,o=Qd?Se:xc,l=!!t.translateExistCompatible;let c=Ye(t.inheritLocale)?t.inheritLocale:!0;const u=o(s&&c?s.locale.value:Te(t.locale)?t.locale:Ca),h=o(s&&c?s.fallbackLocale.value:Te(t.fallbackLocale)||Lt(t.fallbackLocale)||qe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:u.value),f=o(vf(u.value,t)),m=o(qe(t.datetimeFormats)?t.datetimeFormats:{[u.value]:{}}),g=o(qe(t.numberFormats)?t.numberFormats:{[u.value]:{}});let v=s?s.missingWarn:Ye(t.missingWarn)||Ei(t.missingWarn)?t.missingWarn:!0,I=s?s.fallbackWarn:Ye(t.fallbackWarn)||Ei(t.fallbackWarn)?t.fallbackWarn:!0,C=s?s.fallbackRoot:Ye(t.fallbackRoot)?t.fallbackRoot:!0,U=!!t.fallbackFormat,D=Ct(t.missing)?t.missing:null,E=Ct(t.missing)?vw(t.missing):null,L=Ct(t.postTranslation)?t.postTranslation:null,$=s?s.warnHtmlMessage:Ye(t.warnHtmlMessage)?t.warnHtmlMessage:!0,M=!!t.escapeParameter;const A=s?s.modifiers:qe(t.modifiers)?t.modifiers:{};let w=t.pluralRules||s&&s.pluralRules,_;_=(()=>{n&&iw(null);const z={version:IC,locale:u.value,fallbackLocale:h.value,messages:f.value,modifiers:A,pluralRules:w,missing:E===null?void 0:E,missingWarn:v,fallbackWarn:I,fallbackFormat:U,unresolving:!0,postTranslation:L===null?void 0:L,warnHtmlMessage:$,escapeParameter:M,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};z.datetimeFormats=m.value,z.numberFormats=g.value,z.__datetimeFormatters=qe(_)?_.__datetimeFormatters:void 0,z.__numberFormatters=qe(_)?_.__numberFormatters:void 0;const K=qq(z);return n&&iw(K),K})(),fl(_,u.value,h.value);function R(){return[u.value,h.value,f.value,m.value,g.value]}const x=_e({get:()=>u.value,set:z=>{u.value=z,_.locale=u.value}}),N=_e({get:()=>h.value,set:z=>{h.value=z,_.fallbackLocale=h.value,fl(_,u.value,z)}}),ue=_e(()=>f.value),de=_e(()=>m.value),ce=_e(()=>g.value);function te(){return Ct(L)?L:null}function le(z){L=z,_.postTranslation=z}function $e(){return D}function vt(z){z!==null&&(E=vw(z)),D=z,_.missing=E}const me=(z,K,Ce,Ae,ft,wt)=>{R();let Et;try{__INTLIFY_PROD_DEVTOOLS__,n||(_.fallbackContext=s?Vq():void 0),Et=z(_)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(_.fallbackContext=void 0)}if(Ce!=="translate exists"&&Ht(Et)&&Et===yf||Ce==="translate exists"&&!Et){const[os,on]=K();return s&&C?Ae(s):ft(os)}else{if(wt(Et))return Et;throw cs(ns.UNEXPECTED_RETURN_TYPE)}};function Oe(...z){return me(K=>Reflect.apply(cw,null,[K,...z]),()=>Ym(...z),"translate",K=>Reflect.apply(K.t,K,[...z]),K=>K,K=>Te(K))}function Be(...z){const[K,Ce,Ae]=z;if(Ae&&!at(Ae))throw cs(ns.INVALID_ARGUMENT);return Oe(K,Ce,gs({resolvedMessage:!0},Ae||{}))}function Rt(...z){return me(K=>Reflect.apply(uw,null,[K,...z]),()=>Qm(...z),"datetime format",K=>Reflect.apply(K.d,K,[...z]),()=>sw,K=>Te(K))}function _t(...z){return me(K=>Reflect.apply(hw,null,[K,...z]),()=>Xm(...z),"number format",K=>Reflect.apply(K.n,K,[...z]),()=>sw,K=>Te(K))}function bt(z){return z.map(K=>Te(K)||Ht(K)||Ye(K)?pw(String(K)):K)}const we={normalize:bt,interpolate:z=>z,type:"vnode"};function ge(...z){return me(K=>{let Ce;const Ae=K;try{Ae.processor=we,Ce=Reflect.apply(cw,null,[Ae,...z])}finally{Ae.processor=null}return Ce},()=>Ym(...z),"translate",K=>K[Jm](...z),K=>[pw(K)],K=>Lt(K))}function Ee(...z){return me(K=>Reflect.apply(hw,null,[K,...z]),()=>Xm(...z),"number format",K=>K[eg](...z),gw,K=>Te(K)||Lt(K))}function ze(...z){return me(K=>Reflect.apply(uw,null,[K,...z]),()=>Qm(...z),"datetime format",K=>K[Zm](...z),gw,K=>Te(K)||Lt(K))}function Je(z){w=z,_.pluralRules=w}function B(z,K){return me(()=>{if(!z)return!1;const Ce=Te(K)?K:u.value,Ae=Q(Ce),ft=_.messageResolver(Ae,z);return l?ft!=null:Zr(ft)||hr(ft)||Te(ft)},()=>[z],"translate exists",Ce=>Reflect.apply(Ce.te,Ce,[z,K]),Zq,Ce=>Ye(Ce))}function T(z){let K=null;const Ce=pC(_,h.value,u.value);for(let Ae=0;Ae<Ce.length;Ae++){const ft=f.value[Ce[Ae]]||{},wt=_.messageResolver(ft,z);if(wt!=null){K=wt;break}}return K}function q(z){const K=T(z);return K??(s?s.tm(z)||{}:{})}function Q(z){return f.value[z]||{}}function H(z,K){if(i){const Ce={[z]:K};for(const Ae in Ce)Ar(Ce,Ae)&&vc(Ce[Ae]);K=Ce[z]}f.value[z]=K,_.messages=f.value}function Y(z,K){f.value[z]=f.value[z]||{};const Ce={[z]:K};if(i)for(const Ae in Ce)Ar(Ce,Ae)&&vc(Ce[Ae]);K=Ce[z],sd(K,f.value[z]),_.messages=f.value}function J(z){return m.value[z]||{}}function O(z,K){m.value[z]=K,_.datetimeFormats=m.value,dw(_,z,K)}function V(z,K){m.value[z]=gs(m.value[z]||{},K),_.datetimeFormats=m.value,dw(_,z,K)}function j(z){return g.value[z]||{}}function X(z,K){g.value[z]=K,_.numberFormats=g.value,fw(_,z,K)}function oe(z,K){g.value[z]=gs(g.value[z]||{},K),_.numberFormats=g.value,fw(_,z,K)}yw++,s&&Qd&&(fr(s.locale,z=>{c&&(u.value=z,_.locale=z,fl(_,u.value,h.value))}),fr(s.fallbackLocale,z=>{c&&(h.value=z,_.fallbackLocale=z,fl(_,u.value,h.value))}));const ie={id:yw,locale:x,fallbackLocale:N,get inheritLocale(){return c},set inheritLocale(z){c=z,z&&s&&(u.value=s.locale.value,h.value=s.fallbackLocale.value,fl(_,u.value,h.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:ue,get modifiers(){return A},get pluralRules(){return w||{}},get isGlobal(){return n},get missingWarn(){return v},set missingWarn(z){v=z,_.missingWarn=v},get fallbackWarn(){return I},set fallbackWarn(z){I=z,_.fallbackWarn=I},get fallbackRoot(){return C},set fallbackRoot(z){C=z},get fallbackFormat(){return U},set fallbackFormat(z){U=z,_.fallbackFormat=U},get warnHtmlMessage(){return $},set warnHtmlMessage(z){$=z,_.warnHtmlMessage=z},get escapeParameter(){return M},set escapeParameter(z){M=z,_.escapeParameter=z},t:Oe,getLocaleMessage:Q,setLocaleMessage:H,mergeLocaleMessage:Y,getPostTranslationHandler:te,setPostTranslationHandler:le,getMissingHandler:$e,setMissingHandler:vt,[AC]:Je};return ie.datetimeFormats=de,ie.numberFormats=ce,ie.rt=Be,ie.te=B,ie.tm=q,ie.d=Rt,ie.n=_t,ie.getDateTimeFormat=J,ie.setDateTimeFormat=O,ie.mergeDateTimeFormat=V,ie.getNumberFormat=j,ie.setNumberFormat=X,ie.mergeNumberFormat=oe,ie[PC]=r,ie[Jm]=ge,ie[Zm]=ze,ie[eg]=Ee,ie}function tB(t){const e=Te(t.locale)?t.locale:Ca,s=Te(t.fallbackLocale)||Lt(t.fallbackLocale)||qe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=Ct(t.missing)?t.missing:void 0,n=Ye(t.silentTranslationWarn)||Ei(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Ye(t.silentFallbackWarn)||Ei(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Ye(t.fallbackRoot)?t.fallbackRoot:!0,l=!!t.formatFallbackMessages,c=qe(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,h=Ct(t.postTranslation)?t.postTranslation:void 0,f=Te(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,m=!!t.escapeParameterHtml,g=Ye(t.sync)?t.sync:!0;let v=t.messages;if(qe(t.sharedMessages)){const M=t.sharedMessages;v=Object.keys(M).reduce((w,_)=>{const P=w[_]||(w[_]={});return gs(P,M[_]),w},v||{})}const{__i18n:I,__root:C,__injectWithOption:U}=t,D=t.datetimeFormats,E=t.numberFormats,L=t.flatJson,$=t.translateExistCompatible;return{locale:e,fallbackLocale:s,messages:v,flatJson:L,datetimeFormats:D,numberFormats:E,missing:r,missingWarn:n,fallbackWarn:i,fallbackRoot:o,fallbackFormat:l,modifiers:c,pluralRules:u,postTranslation:h,warnHtmlMessage:f,escapeParameter:m,messageResolver:t.messageResolver,inheritLocale:g,translateExistCompatible:$,__i18n:I,__root:C,__injectWithOption:U}}function sg(t={},e){{const s=ev(tB(t)),{__extender:r}=t,n={id:s.id,get locale(){return s.locale.value},set locale(i){s.locale.value=i},get fallbackLocale(){return s.fallbackLocale.value},set fallbackLocale(i){s.fallbackLocale.value=i},get messages(){return s.messages.value},get datetimeFormats(){return s.datetimeFormats.value},get numberFormats(){return s.numberFormats.value},get availableLocales(){return s.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return s.getMissingHandler()},set missing(i){s.setMissingHandler(i)},get silentTranslationWarn(){return Ye(s.missingWarn)?!s.missingWarn:s.missingWarn},set silentTranslationWarn(i){s.missingWarn=Ye(i)?!i:i},get silentFallbackWarn(){return Ye(s.fallbackWarn)?!s.fallbackWarn:s.fallbackWarn},set silentFallbackWarn(i){s.fallbackWarn=Ye(i)?!i:i},get modifiers(){return s.modifiers},get formatFallbackMessages(){return s.fallbackFormat},set formatFallbackMessages(i){s.fallbackFormat=i},get postTranslation(){return s.getPostTranslationHandler()},set postTranslation(i){s.setPostTranslationHandler(i)},get sync(){return s.inheritLocale},set sync(i){s.inheritLocale=i},get warnHtmlInMessage(){return s.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){s.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return s.escapeParameter},set escapeParameterHtml(i){s.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return s.pluralRules||{}},__composer:s,t(...i){const[o,l,c]=i,u={};let h=null,f=null;if(!Te(o))throw cs(ns.INVALID_ARGUMENT);const m=o;return Te(l)?u.locale=l:Lt(l)?h=l:qe(l)&&(f=l),Lt(c)?h=c:qe(c)&&(f=c),Reflect.apply(s.t,s,[m,h||f||{},u])},rt(...i){return Reflect.apply(s.rt,s,[...i])},tc(...i){const[o,l,c]=i,u={plural:1};let h=null,f=null;if(!Te(o))throw cs(ns.INVALID_ARGUMENT);const m=o;return Te(l)?u.locale=l:Ht(l)?u.plural=l:Lt(l)?h=l:qe(l)&&(f=l),Te(c)?u.locale=c:Lt(c)?h=c:qe(c)&&(f=c),Reflect.apply(s.t,s,[m,h||f||{},u])},te(i,o){return s.te(i,o)},tm(i){return s.tm(i)},getLocaleMessage(i){return s.getLocaleMessage(i)},setLocaleMessage(i,o){s.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){s.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(s.d,s,[...i])},getDateTimeFormat(i){return s.getDateTimeFormat(i)},setDateTimeFormat(i,o){s.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){s.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(s.n,s,[...i])},getNumberFormat(i){return s.getNumberFormat(i)},setNumberFormat(i,o){s.setNumberFormat(i,o)},mergeNumberFormat(i,o){s.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return n.__extender=r,n}}const tv={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function sB({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,n)=>[...r,...n.type===he?n.children:[n]],[]):e.reduce((s,r)=>{const n=t[r];return n&&(s[r]=n()),s},St())}function RC(t){return he}const rB=Li({name:"i18n-t",props:gs({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Ht(t)||!isNaN(t)}},tv),setup(t,e){const{slots:s,attrs:r}=e,n=t.i18n||Ga({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(s).filter(f=>f!=="_"),o=St();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=Te(t.plural)?+t.plural:t.plural);const l=sB(e,i),c=n[Jm](t.keypath,l,o),u=gs(St(),r),h=Te(t.tag)||at(t.tag)?t.tag:RC();return $a(h,u,c)}}}),rg=rB;function nB(t){return Lt(t)&&!Te(t[0])}function NC(t,e,s,r){const{slots:n,attrs:i}=e;return()=>{const o={part:!0};let l=St();t.locale&&(o.locale=t.locale),Te(t.format)?o.key=t.format:at(t.format)&&(Te(t.format.key)&&(o.key=t.format.key),l=Object.keys(t.format).reduce((m,g)=>s.includes(g)?gs(St(),m,{[g]:t.format[g]}):m,St()));const c=r(t.value,o,l);let u=[o.key];Lt(c)?u=c.map((m,g)=>{const v=n[m.type],I=v?v({[m.type]:m.value,index:g,parts:c}):[m.value];return nB(I)&&(I[0].key=`${m.type}-${g}`),I}):Te(c)&&(u=[c]);const h=gs(St(),i),f=Te(t.tag)||at(t.tag)?t.tag:RC();return $a(f,h,u)}}const iB=Li({name:"i18n-n",props:gs({value:{type:Number,required:!0},format:{type:[String,Object]}},tv),setup(t,e){const s=t.i18n||Ga({useScope:t.scope,__useComponent:!0});return NC(t,e,kC,(...r)=>s[eg](...r))}}),ng=iB,oB=Li({name:"i18n-d",props:gs({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},tv),setup(t,e){const s=t.i18n||Ga({useScope:t.scope,__useComponent:!0});return NC(t,e,TC,(...r)=>s[Zm](...r))}}),ig=oB;function aB(t,e){const s=t;if(t.mode==="composition")return s.__getInstance(e)||t.global;{const r=s.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function OC(t){const e=o=>{const{instance:l,modifiers:c,value:u}=o;if(!l||!l.$)throw cs(ns.UNEXPECTED_ERROR);const h=aB(t,l.$),f=_w(u);return[Reflect.apply(h.t,h,[...bw(f)]),h]};return{created:(o,l)=>{const[c,u]=e(l);Qd&&t.global===u&&(o.__i18nWatcher=fr(u.locale,()=>{l.instance&&l.instance.$forceUpdate()})),o.__composer=u,o.textContent=c},unmounted:o=>{Qd&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:l})=>{if(o.__composer){const c=o.__composer,u=_w(l);o.textContent=Reflect.apply(c.t,c,[...bw(u)])}},getSSRProps:o=>{const[l]=e(o);return{textContent:l}}}}function _w(t){if(Te(t))return{path:t};if(qe(t)){if(!("path"in t))throw cs(ns.REQUIRED_VALUE,"path");return t}else throw cs(ns.INVALID_VALUE)}function bw(t){const{path:e,locale:s,args:r,choice:n,plural:i}=t,o={},l=r||{};return Te(s)&&(o.locale=s),Ht(n)&&(o.plural=n),Ht(i)&&(o.plural=i),[e,l,o]}function lB(t,e,...s){const r=qe(s[0])?s[0]:{},n=!!r.useI18nComponentName;(Ye(r.globalInstall)?r.globalInstall:!0)&&([n?"i18n":rg.name,"I18nT"].forEach(o=>t.component(o,rg)),[ng.name,"I18nN"].forEach(o=>t.component(o,ng)),[ig.name,"I18nD"].forEach(o=>t.component(o,ig))),t.directive("t",OC(e))}function cB(t,e,s){return{beforeCreate(){const r=ys();if(!r)throw cs(ns.UNEXPECTED_ERROR);const n=this.$options;if(n.i18n){const i=n.i18n;if(n.__i18n&&(i.__i18n=n.__i18n),i.__root=e,this===this.$root)this.$i18n=ww(t,i);else{i.__injectWithOption=!0,i.__extender=s.__vueI18nExtend,this.$i18n=sg(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(n.__i18n)if(this===this.$root)this.$i18n=ww(t,n);else{this.$i18n=sg({__i18n:n.__i18n,__injectWithOption:!0,__extender:s.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;n.__i18nGlobal&&LC(e,n,n),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),s.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=ys();if(!r)throw cs(ns.UNEXPECTED_ERROR);const n=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__disposer&&(n.__disposer(),delete n.__disposer,delete n.__extender),s.__deleteInstance(r),delete this.$i18n}}}function ww(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[AC](e.pluralizationRules||t.pluralizationRules);const s=vf(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(s).forEach(r=>t.mergeLocaleMessage(r,s[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const DC=Di("global-vue-i18n");function MC(t={},e){const s=__VUE_I18N_LEGACY_API__&&Ye(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Ye(t.globalInjection)?t.globalInjection:!0,n=__VUE_I18N_LEGACY_API__&&s?!!t.allowComposition:!0,i=new Map,[o,l]=uB(t,s),c=Di("");function u(m){return i.get(m)||null}function h(m,g){i.set(m,g)}function f(m){i.delete(m)}{const m={get mode(){return __VUE_I18N_LEGACY_API__&&s?"legacy":"composition"},get allowComposition(){return n},async install(g,...v){if(g.__VUE_I18N_SYMBOL__=c,g.provide(g.__VUE_I18N_SYMBOL__,m),qe(v[0])){const U=v[0];m.__composerExtend=U.__composerExtend,m.__vueI18nExtend=U.__vueI18nExtend}let I=null;!s&&r&&(I=_B(g,m.global)),__VUE_I18N_FULL_INSTALL__&&lB(g,m,...v),__VUE_I18N_LEGACY_API__&&s&&g.mixin(cB(l,l.__composer,m));const C=g.unmount;g.unmount=()=>{I&&I(),m.dispose(),C()}},get global(){return l},dispose(){o.stop()},__instances:i,__getInstance:u,__setInstance:h,__deleteInstance:f};return m}}function Ga(t={}){const e=ys();if(e==null)throw cs(ns.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw cs(ns.NOT_INSTALLED);const s=dB(e),r=fB(s),n=xC(e),i=hB(t,n);if(__VUE_I18N_LEGACY_API__&&s.mode==="legacy"&&!t.__useComponent){if(!s.allowComposition)throw cs(ns.NOT_AVAILABLE_IN_LEGACY_MODE);return yB(e,i,r,t)}if(i==="global")return LC(r,t,n),r;if(i==="parent"){let c=pB(s,e,t.__useComponent);return c==null&&(c=r),c}const o=s;let l=o.__getInstance(e);if(l==null){const c=gs({},t);"__i18n"in n&&(c.__i18n=n.__i18n),r&&(c.__root=r),l=ev(c),o.__composerExtend&&(l[tg]=o.__composerExtend(l)),gB(o,e,l),o.__setInstance(e,l)}return l}function uB(t,e,s){const r=bg();{const n=__VUE_I18N_LEGACY_API__&&e?r.run(()=>sg(t)):r.run(()=>ev(t));if(n==null)throw cs(ns.UNEXPECTED_ERROR);return[r,n]}}function dB(t){{const e=Xs(t.isCE?DC:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw cs(t.isCE?ns.NOT_INSTALLED_WITH_PROVIDE:ns.UNEXPECTED_ERROR);return e}}function hB(t,e){return mf(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function fB(t){return t.mode==="composition"?t.global:t.global.__composer}function pB(t,e,s=!1){let r=null;const n=e.root;let i=mB(e,s);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const l=o.__getInstance(i);l!=null&&(r=l.__composer,s&&r&&!r[PC]&&(r=null))}if(r!=null||n===i)break;i=i.parent}return r}function mB(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function gB(t,e,s){br(()=>{},e),Ri(()=>{const r=s;t.__deleteInstance(e);const n=r[tg];n&&(n(),delete r[tg])},e)}function yB(t,e,s,r={}){const n=e==="local",i=xc(null);if(n&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw cs(ns.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Ye(r.inheritLocale)?r.inheritLocale:!Te(r.locale),l=Se(!n||o?s.locale.value:Te(r.locale)?r.locale:Ca),c=Se(!n||o?s.fallbackLocale.value:Te(r.fallbackLocale)||Lt(r.fallbackLocale)||qe(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:l.value),u=Se(vf(l.value,r)),h=Se(qe(r.datetimeFormats)?r.datetimeFormats:{[l.value]:{}}),f=Se(qe(r.numberFormats)?r.numberFormats:{[l.value]:{}}),m=n?s.missingWarn:Ye(r.missingWarn)||Ei(r.missingWarn)?r.missingWarn:!0,g=n?s.fallbackWarn:Ye(r.fallbackWarn)||Ei(r.fallbackWarn)?r.fallbackWarn:!0,v=n?s.fallbackRoot:Ye(r.fallbackRoot)?r.fallbackRoot:!0,I=!!r.fallbackFormat,C=Ct(r.missing)?r.missing:null,U=Ct(r.postTranslation)?r.postTranslation:null,D=n?s.warnHtmlMessage:Ye(r.warnHtmlMessage)?r.warnHtmlMessage:!0,E=!!r.escapeParameter,L=n?s.modifiers:qe(r.modifiers)?r.modifiers:{},$=r.pluralRules||n&&s.pluralRules;function M(){return[l.value,c.value,u.value,h.value,f.value]}const A=_e({get:()=>i.value?i.value.locale.value:l.value,set:T=>{i.value&&(i.value.locale.value=T),l.value=T}}),w=_e({get:()=>i.value?i.value.fallbackLocale.value:c.value,set:T=>{i.value&&(i.value.fallbackLocale.value=T),c.value=T}}),_=_e(()=>i.value?i.value.messages.value:u.value),P=_e(()=>h.value),R=_e(()=>f.value);function x(){return i.value?i.value.getPostTranslationHandler():U}function N(T){i.value&&i.value.setPostTranslationHandler(T)}function ue(){return i.value?i.value.getMissingHandler():C}function de(T){i.value&&i.value.setMissingHandler(T)}function ce(T){return M(),T()}function te(...T){return i.value?ce(()=>Reflect.apply(i.value.t,null,[...T])):ce(()=>"")}function le(...T){return i.value?Reflect.apply(i.value.rt,null,[...T]):""}function $e(...T){return i.value?ce(()=>Reflect.apply(i.value.d,null,[...T])):ce(()=>"")}function vt(...T){return i.value?ce(()=>Reflect.apply(i.value.n,null,[...T])):ce(()=>"")}function me(T){return i.value?i.value.tm(T):{}}function Oe(T,q){return i.value?i.value.te(T,q):!1}function Be(T){return i.value?i.value.getLocaleMessage(T):{}}function Rt(T,q){i.value&&(i.value.setLocaleMessage(T,q),u.value[T]=q)}function _t(T,q){i.value&&i.value.mergeLocaleMessage(T,q)}function bt(T){return i.value?i.value.getDateTimeFormat(T):{}}function se(T,q){i.value&&(i.value.setDateTimeFormat(T,q),h.value[T]=q)}function we(T,q){i.value&&i.value.mergeDateTimeFormat(T,q)}function ge(T){return i.value?i.value.getNumberFormat(T):{}}function Ee(T,q){i.value&&(i.value.setNumberFormat(T,q),f.value[T]=q)}function ze(T,q){i.value&&i.value.mergeNumberFormat(T,q)}const Je={get id(){return i.value?i.value.id:-1},locale:A,fallbackLocale:w,messages:_,datetimeFormats:P,numberFormats:R,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(T){i.value&&(i.value.inheritLocale=T)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(u.value)},get modifiers(){return i.value?i.value.modifiers:L},get pluralRules(){return i.value?i.value.pluralRules:$},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:m},set missingWarn(T){i.value&&(i.value.missingWarn=T)},get fallbackWarn(){return i.value?i.value.fallbackWarn:g},set fallbackWarn(T){i.value&&(i.value.missingWarn=T)},get fallbackRoot(){return i.value?i.value.fallbackRoot:v},set fallbackRoot(T){i.value&&(i.value.fallbackRoot=T)},get fallbackFormat(){return i.value?i.value.fallbackFormat:I},set fallbackFormat(T){i.value&&(i.value.fallbackFormat=T)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:D},set warnHtmlMessage(T){i.value&&(i.value.warnHtmlMessage=T)},get escapeParameter(){return i.value?i.value.escapeParameter:E},set escapeParameter(T){i.value&&(i.value.escapeParameter=T)},t:te,getPostTranslationHandler:x,setPostTranslationHandler:N,getMissingHandler:ue,setMissingHandler:de,rt:le,d:$e,n:vt,tm:me,te:Oe,getLocaleMessage:Be,setLocaleMessage:Rt,mergeLocaleMessage:_t,getDateTimeFormat:bt,setDateTimeFormat:se,mergeDateTimeFormat:we,getNumberFormat:ge,setNumberFormat:Ee,mergeNumberFormat:ze};function B(T){T.locale.value=l.value,T.fallbackLocale.value=c.value,Object.keys(u.value).forEach(q=>{T.mergeLocaleMessage(q,u.value[q])}),Object.keys(h.value).forEach(q=>{T.mergeDateTimeFormat(q,h.value[q])}),Object.keys(f.value).forEach(q=>{T.mergeNumberFormat(q,f.value[q])}),T.escapeParameter=E,T.fallbackFormat=I,T.fallbackRoot=v,T.fallbackWarn=g,T.missingWarn=m,T.warnHtmlMessage=D}return Lg(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw cs(ns.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const T=i.value=t.proxy.$i18n.__composer;e==="global"?(l.value=T.locale.value,c.value=T.fallbackLocale.value,u.value=T.messages.value,h.value=T.datetimeFormats.value,f.value=T.numberFormats.value):n&&B(T)}),Je}const vB=["locale","fallbackLocale","availableLocales"],Sw=["t","rt","d","n","tm","te"];function _B(t,e){const s=Object.create(null);return vB.forEach(n=>{const i=Object.getOwnPropertyDescriptor(e,n);if(!i)throw cs(ns.UNEXPECTED_ERROR);const o=Kt(i.value)?{get(){return i.value.value},set(l){i.value.value=l}}:{get(){return i.get&&i.get()}};Object.defineProperty(s,n,o)}),t.config.globalProperties.$i18n=s,Sw.forEach(n=>{const i=Object.getOwnPropertyDescriptor(e,n);if(!i||!i.value)throw cs(ns.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${n}`,i)}),()=>{delete t.config.globalProperties.$i18n,Sw.forEach(n=>{delete t.config.globalProperties[`$${n}`]})}}Xq();__INTLIFY_JIT_COMPILATION__?nw(Wq):nw(zq);Mq(gq);$q(pC);if(__INTLIFY_PROD_DEVTOOLS__){const t=_n();t.__INTLIFY__=!0,kq(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const $C=Object.freeze(Object.defineProperty({__proto__:null,DatetimeFormat:ig,I18nInjectionKey:DC,NumberFormat:ng,Translation:rg,VERSION:IC,createI18n:MC,useI18n:Ga,vTDirective:OC},Symbol.toStringTag,{value:"Module"})),UC="https://api.aced.live",ae=ut.create({baseURL:`${UC}/api`,headers:{"Content-Type":"application/json"},timeout:3e4}),Il=new Map,eo=new Map,FC=5e3,bB=3,wB=1e3,rd=t=>!t||!t.method||!t.url?`unknown-${Date.now()}`:`${t.method}-${t.url}-${JSON.stringify(t.data||{})}`;let pl=!1,og=[];const Up=(t,e=null)=>{og.forEach(s=>{t?s.reject(t):s.resolve(e)}),og=[]},VC=async()=>{try{const t=pe.currentUser;return t?await t.getIdToken(!0):null}catch{return null}};ae.interceptors.request.use(async t=>{try{const e=rd(t);if(eo.has(e)){const r=eo.get(e);Date.now()-r<1e3}if(eo.set(e,Date.now()),t.method&&t.method.toLowerCase()==="get"){const r=Il.get(e);r&&Date.now()-r.timestamp<FC&&(t.headers={...t.headers,"X-Cache-Status":"HIT"})}const s=await VC();return s&&(t.headers.Authorization=`Bearer ${s}`),t}catch(e){return Promise.reject(e)}},t=>Promise.reject(t));ae.interceptors.response.use(t=>{var e;try{const s=rd(t.config);s&&eo.has(s)&&eo.delete(s)}catch{}if((e=t.config)!=null&&e.method&&t.config.method.toLowerCase()==="get"&&t.status===200&&!t.config.headers["X-Cache-Status"])try{const s=rd(t.config);if(s&&!s.includes("unknown")&&(Il.set(s,{response:t,timestamp:Date.now()}),Il.size>100)){const r=Date.now()-FC;for(const[n,i]of Il.entries())i.timestamp<r&&Il.delete(n)}}catch{}return t},async t=>{var s,r,n,i,o,l,c;const e=t.config;if(e)try{const u=rd(e);u&&eo.has(u)&&eo.delete(u)}catch{}if((s=t.config)!=null&&s.url,(r=t.config)!=null&&r.method,(n=t.response)!=null&&n.status,(o=(i=t.response)==null?void 0:i.data)!=null&&o.message||t.message,((l=t.response)==null?void 0:l.status)===401&&!e._retry){if(pl)return new Promise((u,h)=>{og.push({resolve:u,reject:h})}).then(u=>(e.headers.Authorization=`Bearer ${u}`,ae(e)));e._retry=!0,pl=!0;try{const u=pe.currentUser;if(!u)return Up(new Error("No user available"),null),pl=!1,Promise.reject(t);const h=await u.getIdToken(!0);return e.headers.Authorization=`Bearer ${h}`,Up(null,h),pl=!1,ae(e)}catch(u){return Up(u,null),pl=!1,Promise.reject(u)}}if(((c=t.response)==null?void 0:c.status)===429&&e._retryCount<bB){e._retryCount=(e._retryCount||0)+1;const u=wB*e._retryCount;return await new Promise(h=>setTimeout(h,u)),ae(e)}return Promise.reject(t)});let nr={token:null,expiry:0,quotaErrorUntil:0};const SB=3e4,EB=3e5,sv=async()=>{var e,s;const t=Date.now();if(nr.quotaErrorUntil>t)return console.warn("[subscription.js]  Token refresh blocked (quota cooldown)"),nr.token&&nr.expiry>t?nr.token:localStorage.getItem("token")||null;if(nr.token&&nr.expiry>t)return nr.token;try{const r=pe.currentUser;if(r){const n=await r.getIdToken(!1);return nr.token=n,nr.expiry=t+EB,n}return localStorage.getItem("token")||null}catch(r){return console.error("[subscription.js] Error getting auth token:",r),(r.code==="auth/quota-exceeded"||(e=r.message)!=null&&e.includes("quota-exceeded")||(s=r.message)!=null&&s.includes("QUOTA_EXCEEDED"))&&(console.error("[subscription.js]  Quota exceeded - activating circuit breaker"),nr.quotaErrorUntil=t+SB),nr.token&&nr.expiry>t?nr.token:localStorage.getItem("token")||null}},qC=async t=>{try{const e=await sv();if(!e)return console.error(" [subscription.js] No authentication token"),{success:!1,error:"No authentication token"};const s={Authorization:`Bearer ${e}`,"Content-Type":"application/json"},{data:r}=await ae.get(`users/${t}`,{headers:s}),n=r.user||r.data||r;return{success:!0,subscription:{plan:n.subscriptionPlan||"free",status:n.subscriptionPlan&&n.subscriptionPlan!=="free"?"active":"inactive",expiryDate:n.subscriptionExpiryDate||null,source:n.subscriptionSource||null,activatedAt:n.subscriptionActivatedAt||null,duration:n.subscriptionDuration||null,serverFetch:!0,fetchTime:new Date().toISOString()},user:n}}catch(e){return{success:!1,error:e.message,subscription:null}}},TB=async(t,e)=>{console.log(" [subscription.js] saveSubscriptionToServer called");try{const s=await sv();if(!s)return{success:!1,error:"No authentication token"};const r={Authorization:`Bearer ${s}`,"Content-Type":"application/json"},n={userId:t,subscriptionPlan:e.plan,subscriptionStatus:e.status||"active",activatedAt:e.activatedAt||new Date().toISOString(),expiryDate:e.expiryDate,source:e.source||"api",details:{...e.details,lastUpdated:new Date().toISOString(),deviceInfo:{userAgent:typeof navigator<"u"?navigator.userAgent:"unknown",timestamp:Date.now()}},metadata:{version:"2.0",persistenceType:"global",syncSource:"client"}};try{const i=await ae.put(`users/${t}/status`,n,{headers:r});if(i.data&&i.data.success!==!1)return console.log(" [subscription.js] Subscription saved to server"),{success:!0,data:i.data,serverData:n}}catch(i){console.warn(" [subscription.js] Primary endpoint failed:",i.message)}try{const i=await ae.put(`users/${t}`,n,{headers:r});if(i.data)return{success:!0,data:i.data,serverData:n}}catch(i){console.warn(" [subscription.js] Fallback endpoint failed:",i.message)}return{success:!1,error:"Failed to save subscription to server",localOnly:!0,serverData:n}}catch(s){return console.error(" [subscription.js] saveSubscriptionToServer error:",s),{success:!1,error:s.message,localOnly:!0}}},kB=async(t,e,s="manual")=>{console.log(" [subscription.js] updateUserStatusWithPersistence called:",e);try{const r=await sv(),n={subscriptionPlan:e,userStatus:e,plan:e,lastStatusUpdate:new Date().toISOString(),statusSource:s};let i=!1;try{(await ae.put(`users/${t}/status`,n,{headers:{Authorization:`Bearer ${r}`}})).status===200&&(i=!0,console.log(" [subscription.js] Server update successful"))}catch(h){console.warn(" [subscription.js] Server update failed:",h.message);try{(await ae.put(`users/${t}`,n,{headers:{Authorization:`Bearer ${r}`}})).status===200&&(i=!0)}catch(f){console.warn(" [subscription.js] Fallback update failed:",f.message)}}const o=new Date,l=new Date(o.getTime()+(s==="payment"?365:30)*24*60*60*1e3),c={plan:e,status:e!=="free"?"active":"inactive",activatedAt:o.toISOString(),expiryDate:e!=="free"?l.toISOString():null,source:s,lastUpdated:o.toISOString(),serverSync:i,version:"2.0"},u={subscriptionData:JSON.stringify(c),userStatus:e,userPlan:e,subscriptionPlan:e,plan:e,lastStatusUpdate:o.toISOString(),statusPersistenceVersion:"2.0"};Object.entries(u).forEach(([h,f])=>{try{localStorage.setItem(h,f)}catch{console.warn(" [subscription.js] localStorage error:",h)}});try{const h=localStorage.getItem("user");if(h){const f=JSON.parse(h);f.subscriptionPlan=e,f.userStatus=e,f.plan=e,f.lastStatusUpdate=o.toISOString(),localStorage.setItem("user",JSON.stringify(f))}}catch{console.warn(" [subscription.js] User object update error")}return{success:!0,newStatus:e,serverSync:i,subscriptionData:c}}catch(r){console.error(" [subscription.js] updateUserStatusWithPersistence error:",r);try{localStorage.setItem("userStatus",e),localStorage.setItem("userPlan",e),localStorage.setItem("subscriptionPlan",e),localStorage.setItem("plan",e)}catch{console.error(" [subscription.js] localStorage fallback failed")}return{success:!1,error:r.message,newStatus:e,serverSync:!1}}},Fp=Object.freeze(Object.defineProperty({__proto__:null,fetchSubscriptionFromServer:qC,saveSubscriptionToServer:TB,updateUserStatusWithPersistence:kB},Symbol.toStringTag,{value:"Module"})),to=Se(localStorage.getItem("lang")||"ru"),Gi=[{code:"en",label:"English",flag:"",nativeName:"English"},{code:"ru",label:"",flag:"",nativeName:"Russian"},{code:"uz",label:"O'zbekcha",flag:"",nativeName:"Uzbek"}];let Cl=null;function rv(t){var s;Cl=t;const e=localStorage.getItem("lang")||"ru";to.value=e,(s=t==null?void 0:t.global)!=null&&s.locale&&(t.global.locale.value=e),window.addEventListener("storage",r=>{r.key==="lang"&&r.newValue&&Jd(r.newValue)})}function Jd(t){var s;Gi.some(r=>r.code===t)||(console.warn(`Invalid language code: ${t}. Using 'ru' as fallback.`),t="ru"),to.value=t,(s=Cl==null?void 0:Cl.global)!=null&&s.locale&&(Cl.global.locale.value=t),localStorage.setItem("lang",t),document.documentElement.lang=t,window.dispatchEvent(new CustomEvent("language-changed",{detail:{language:t,timestamp:Date.now()}}))}function BC(){return to.value}function IB(){const t=_e(()=>to.value),e=_e(()=>Gi.find(o=>o.code===to.value)||Gi[1]),s=_e(()=>{var o;return((o=e.value)==null?void 0:o.label)||""}),r=_e(()=>{var o;return((o=e.value)==null?void 0:o.flag)||""});return{language:t,currentLanguage:t,languages:Gi,currentLanguageInfo:e,currentLanguageLabel:s,currentLanguageFlag:r,setLanguage:Jd,getLanguage:BC,isLanguage:o=>to.value===o,cycleLanguage:()=>{const l=(Gi.findIndex(c=>c.code===to.value)+1)%Gi.length;Jd(Gi[l].code)}}}const CB={name:"LanguageSwitcher",props:{compact:{type:Boolean,default:!1}},setup(){const{language:t,languages:e,currentLanguageLabel:s,setLanguage:r}=IB(),n=Se(!1),i=Se(!1),o=Se(null),l=xi({top:-9999,left:-9999}),c=_e(()=>({position:"fixed",top:"0",left:"0",right:"0",bottom:"0",width:"100vw",height:"100vh",zIndex:2147483646,background:"transparent",cursor:"default"})),u=_e(()=>({position:"fixed",top:`${l.top}px`,left:`${l.left}px`,zIndex:2147483647,minWidth:"200px",maxWidth:"260px",background:"white",border:"1px solid #e5e7eb",borderRadius:"14px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 12px 24px rgba(139, 92, 246, 0.15)",overflow:"hidden",pointerEvents:"auto",opacity:i.value?1:0,visibility:i.value?"visible":"hidden"})),h=()=>{if(!o.value)return;const U=o.value.getBoundingClientRect(),D=window.innerWidth<480?180:220,E=200,L=window.innerWidth,$=window.innerHeight,M=16;let A=U.bottom+8,w=U.left;w+D>L-M&&(w=U.right-D),w<M&&(w=M),A+E>$-M&&(A=U.top-E-8),A<M&&(A=M),l.top=A,l.left=w},f=U=>{U.stopPropagation(),n.value?m():(h(),n.value=!0,Po(()=>{i.value=!0}))},m=()=>{i.value=!1,n.value=!1},g=U=>{r(U),m()},v=U=>{U.key==="Escape"&&n.value&&m()},I=()=>{n.value&&h()},C=()=>{n.value&&h()};return br(()=>{document.addEventListener("keydown",v),window.addEventListener("scroll",I,!0),window.addEventListener("resize",C)}),Ri(()=>{document.removeEventListener("keydown",v),window.removeEventListener("scroll",I,!0),window.removeEventListener("resize",C)}),{languages:e,currentLanguage:t,currentLanguageLabel:s,isDropdownOpen:n,switcherRef:o,backdropStyle:c,dropdownStyle:u,toggleDropdown:f,closeDropdown:m,selectLanguage:g}}},AB={key:0,class:"lang-text"},PB={class:"lang-dropdown-header"},xB={class:"lang-dropdown-options"},LB=["onClick"],RB={class:"lang-option-flag"},NB={class:"lang-option-label"},OB={key:0,class:"lang-option-check"};function DB(t,e,s,r,n,i){return b(),S("div",{class:ye(["language-switcher",{compact:s.compact}]),ref:"switcherRef"},[a("button",{class:ye(["lang-button",{active:r.isDropdownOpen}]),onClick:e[0]||(e[0]=(...o)=>r.toggleDropdown&&r.toggleDropdown(...o)),type:"button"},[e[4]||(e[4]=kt('<span class="lang-icon" data-v-d29bf8a7><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-d29bf8a7><circle cx="12" cy="12" r="10" data-v-d29bf8a7></circle><path d="M2 12h20" data-v-d29bf8a7></path><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-d29bf8a7></path></svg></span>',1)),s.compact?W("",!0):(b(),S("span",AB,p(r.currentLanguageLabel),1)),a("span",{class:ye(["lang-arrow",{rotated:r.isDropdownOpen}])},e[3]||(e[3]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"6 9 12 15 18 9"})],-1)]),2)],2),(b(),ts(md,{to:"body"},[r.isDropdownOpen?(b(),S("div",{key:0,"data-lang-backdrop":"",style:ct(r.backdropStyle),onClick:e[1]||(e[1]=(...o)=>r.closeDropdown&&r.closeDropdown(...o))},null,4)):W("",!0),xe(ma,{name:"lang-dropdown"},{default:Qt(()=>[r.isDropdownOpen?(b(),S("div",{key:0,"data-lang-dropdown":"",style:ct(r.dropdownStyle),onClick:e[2]||(e[2]=gt(()=>{},["stop"]))},[a("div",PB,[e[5]||(e[5]=a("span",{class:"lang-header-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M2 12h20"}),a("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})])],-1)),a("span",null,p(t.$t("common.selectLanguage")),1)]),a("div",xB,[(b(!0),S(he,null,be(r.languages,o=>(b(),S("button",{key:o.code,class:ye(["lang-dropdown-option",{active:r.currentLanguage===o.code}]),onClick:l=>r.selectLanguage(o.code),type:"button"},[a("span",RB,p(o.flag),1),a("span",NB,p(o.label),1),r.currentLanguage===o.code?(b(),S("span",OB,e[6]||(e[6]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[a("polyline",{points:"20 6 9 17 4 12"})],-1)]))):W("",!0)],10,LB))),128))])],4)):W("",!0)]),_:1})]))],2)}const nv=tt(CB,[["render",DB],["__scopeId","data-v-d29bf8a7"]]),MB={name:"AcedSettings",components:{LanguageSwitcher:nv},setup(){const t=xh(),e=Ph(),{t:s}=Ga(),r=Se(!1),n=Se({name:"",surname:"",email:""}),i=Se({name:"",surname:""}),o=Se(!1),l=Se(""),c=Se(""),u=Se(""),h=Se(null),f=Se(""),m=Se(!1),g=Se(""),v=Se(""),I=Se(!1),C=_e(()=>{var me;return((me=h.value)==null?void 0:me.plan)||"free"}),U=_e(()=>C.value==="pro"||C.value==="premium"?"Pro Plan":"Free Plan"),D=_e(()=>{var Rt;if(C.value==="free"||!((Rt=h.value)!=null&&Rt.expiryDate))return null;const me=new Date(h.value.expiryDate),Be=Math.ceil((me-new Date)/(1e3*60*60*24));return{date:me,formattedDate:me.toLocaleDateString(),daysRemaining:Math.max(0,Be),isExpiring:Be<=3}}),E=_e(()=>{var me;return((me=t.getters["user/currentUsage"])==null?void 0:me.messages)||0}),L=_e(()=>{var me;return((me=t.getters["user/currentUsage"])==null?void 0:me.images)||0}),$=_e(()=>{var me;return((me=t.getters["user/usageLimits"])==null?void 0:me.messages)||50}),M=_e(()=>{var me;return((me=t.getters["user/usageLimits"])==null?void 0:me.images)||5}),A=_e(()=>{var me,Oe;return((Oe=(me=pe.currentUser)==null?void 0:me.providerData)==null?void 0:Oe.some(Be=>Be.providerId==="google.com"))||!1}),w=async()=>{var me;try{const Oe=((me=pe.currentUser)==null?void 0:me.uid)||localStorage.getItem("userId")||localStorage.getItem("firebaseUserId");if(!Oe)return;const Be=await qC(Oe);Be.success&&Be.subscription&&(h.value=Be.subscription,t.commit("user/UPDATE_SUBSCRIPTION",{...Be.subscription,serverFetch:!0}))}catch{}},_=async()=>{var me,Oe,Be,Rt;r.value=!0;try{const _t=pe.currentUser,bt=t.getters["user/getUser"];bt?n.value={name:bt.name||((me=bt.displayName)==null?void 0:me.split(" ")[0])||"",surname:bt.surname||((Oe=bt.displayName)==null?void 0:Oe.split(" ")[1])||"",email:bt.email||(_t==null?void 0:_t.email)||""}:_t&&(n.value={name:((Be=_t.displayName)==null?void 0:Be.split(" ")[0])||"",surname:((Rt=_t.displayName)==null?void 0:Rt.split(" ")[1])||"",email:_t.email||""}),await w()}catch{}finally{r.value=!1}},P=()=>{i.value={...n.value},o.value=!0},R=()=>{o.value=!1,i.value={name:"",surname:""}},x=async()=>{try{r.value=!0,n.value.name=i.value.name,n.value.surname=i.value.surname,o.value=!1}catch{}finally{r.value=!1}},N=async()=>{if(!(!l.value||!c.value||!u.value)&&!(c.value!==u.value||c.value.length<6))try{r.value=!0;const me=pe.currentUser;if(!(me!=null&&me.email))throw new Error("No user");const Oe=Mo.credential(me.email,l.value);await KU(me,Oe),await XU(me,c.value),l.value="",c.value="",u.value=""}catch{}finally{r.value=!1}},ue=async()=>{var me;try{const Oe=n.value.email||((me=pe.currentUser)==null?void 0:me.email);Oe&&await Vk(pe,Oe)}catch{}},de=(me=1)=>e.push({path:"/pay/pro",query:{duration:me}}),ce=async()=>{if(!f.value.trim()){g.value=s("settings.enterPromocode");return}g.value="",v.value="",m.value=!0;try{const me=await t.dispatch("user/applyPromocode",{promoCode:f.value.trim(),plan:"pro"});me.success?(v.value=me.message||s("settings.promocodeApplied"),f.value="",await w()):g.value=me.error||s("settings.invalidPromocode")}catch{g.value=s("settings.invalidPromocode")}finally{m.value=!1}},te=()=>e.push("/profile"),le=async()=>{try{await pe.signOut(),await t.dispatch("user/logout"),e.push("/login")}catch{}},$e=()=>{I.value=!0},vt=async()=>{try{r.value=!0;const me=pe.currentUser;if(!me)throw new Error("No user");await sF(me),await t.dispatch("user/logout"),I.value=!1,e.push("/")}catch{}finally{r.value=!1}};return br(()=>{_(),window.addEventListener("subscriptionUpdated",w),window.addEventListener("userStatusChanged",w)}),Ri(()=>{window.removeEventListener("subscriptionUpdated",w),window.removeEventListener("userStatusChanged",w)}),{loading:r,user:n,tempUser:i,isEditingName:o,oldPassword:l,newPassword:c,confirmPassword:u,promocode:f,applyingPromo:m,promoError:g,promoSuccess:v,showDeleteModal:I,currentPlan:C,currentPlanLabel:U,subscriptionExpiryInfo:D,currentUsageMessages:E,currentUsageImages:L,usageLimitsMessages:$,usageLimitsImages:M,isGoogleUser:A,refreshFromServer:w,loadInitialData:_,startEditingName:P,cancelEditingName:R,saveNameChanges:x,saveChanges:N,sendPasswordReset:ue,goToUpgrade:de,applyPromocode:ce,goToProfile:te,handleLogout:le,confirmDeleteAccount:$e,deleteAccount:vt}}},$B={class:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100"},UB={class:"max-w-4xl mx-auto px-4 sm:px-6 py-6"},FB={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 p-5 bg-white rounded-2xl shadow-sm"},VB={class:"flex items-center gap-4"},qB={class:"text-2xl font-bold text-slate-900"},BB={class:"text-sm text-slate-500 mt-1"},jB={class:"flex items-center gap-3"},HB=["disabled"],zB={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},WB={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},GB={class:"min-w-0"},KB={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},YB={class:"text-base font-bold text-slate-900 truncate"},QB={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},XB={class:"min-w-0 flex-1"},JB={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},ZB={class:"text-base font-bold text-slate-900"},ej={class:"text-xs font-normal text-slate-400"},tj={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},sj={class:"min-w-0 flex-1"},rj={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},nj={class:"text-base font-bold text-slate-900"},ij={class:"text-xs font-normal text-slate-400"},oj={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},aj={class:"min-w-0"},lj={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},cj={class:"text-base font-bold text-slate-900"},uj={class:"bg-white rounded-2xl shadow-sm overflow-hidden mb-6"},dj={class:"flex items-center gap-3 p-5 border-b border-slate-100"},hj={class:"text-base font-semibold text-slate-900"},fj={class:"text-xs text-slate-500"},pj={class:"p-5"},mj={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},gj={class:"relative p-5 border-2 border-slate-200 hover:border-indigo-400 rounded-2xl transition-all hover:shadow-lg flex flex-col"},yj={class:"text-center flex-1 flex flex-col"},vj={class:"text-lg font-bold text-slate-900"},_j={class:"text-sm text-slate-500 mb-4"},bj={class:"text-left text-xs text-slate-600 space-y-2 flex-1"},wj={class:"flex items-center gap-2"},Sj={class:"flex items-center gap-2"},Ej={class:"flex items-center gap-2"},Tj=["disabled"],kj={class:"relative p-5 border-2 border-amber-400 rounded-2xl shadow-lg bg-gradient-to-b from-amber-50 to-white flex flex-col"},Ij={class:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-[10px] font-bold uppercase rounded-full tracking-wide whitespace-nowrap"},Cj={class:"text-center flex-1 flex flex-col pt-1"},Aj={class:"text-lg font-bold text-slate-900"},Pj={class:"text-sm text-slate-500"},xj={class:"inline-block px-2 py-0.5 bg-emerald-100 text-emerald-700 text-[10px] font-bold rounded-full my-2 mx-auto"},Lj={class:"text-left text-xs text-slate-600 space-y-2 flex-1"},Rj={class:"flex items-center gap-2"},Nj={class:"flex items-center gap-2"},Oj={class:"flex items-center gap-2"},Dj=["disabled"],Mj={class:"relative p-5 border-2 border-emerald-400 rounded-2xl shadow-md bg-gradient-to-b from-emerald-50 to-white flex flex-col"},$j={class:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-emerald-500 to-teal-500 text-white text-[10px] font-bold uppercase rounded-full tracking-wide whitespace-nowrap"},Uj={class:"text-center flex-1 flex flex-col pt-1"},Fj={class:"text-lg font-bold text-slate-900"},Vj={class:"text-sm text-slate-500"},qj={class:"inline-block px-2 py-0.5 bg-emerald-100 text-emerald-700 text-[10px] font-bold rounded-full my-2 mx-auto"},Bj={class:"text-left text-xs text-slate-600 space-y-2 flex-1"},jj={class:"flex items-center gap-2"},Hj={class:"flex items-center gap-2"},zj={class:"flex items-center gap-2"},Wj=["disabled"],Gj={class:"mt-6 pt-5 border-t border-slate-100"},Kj={class:"flex flex-col sm:flex-row gap-3"},Yj=["placeholder","disabled"],Qj=["disabled"],Xj={key:0,class:"text-red-500 text-xs mt-2"},Jj={key:1,class:"text-emerald-600 text-xs mt-2"},Zj={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},eH={class:"bg-white rounded-2xl shadow-sm overflow-hidden"},tH={class:"flex justify-between items-center p-5 border-b border-slate-100"},sH={class:"flex items-center gap-3"},rH={class:"text-base font-semibold text-slate-900"},nH={class:"text-xs text-slate-500"},iH={class:"p-5"},oH={class:"grid grid-cols-2 gap-4 mb-4"},aH={class:"block text-xs font-medium text-slate-600 mb-2"},lH=["placeholder"],cH={key:1,class:"px-4 py-3 bg-slate-50 rounded-xl text-sm text-slate-900"},uH={class:"block text-xs font-medium text-slate-600 mb-2"},dH=["placeholder"],hH={key:1,class:"px-4 py-3 bg-slate-50 rounded-xl text-sm text-slate-900"},fH={class:"flex items-center gap-2 text-xs font-medium text-slate-600 mb-2"},pH={class:"inline-flex items-center gap-1 px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-[10px] font-semibold"},mH=["disabled"],gH={key:0,class:"flex justify-end gap-3 mt-4 pt-4 border-t border-slate-100"},yH={key:0,class:"bg-white rounded-2xl shadow-sm overflow-hidden"},vH={class:"flex items-center gap-3 p-5 border-b border-slate-100"},_H={class:"text-base font-semibold text-slate-900"},bH={class:"text-xs text-slate-500"},wH={class:"p-5"},SH={class:"space-y-4"},EH={class:"block text-xs font-medium text-slate-600 mb-2"},TH=["disabled"],kH={class:"block text-xs font-medium text-slate-600 mb-2"},IH=["disabled"],CH={class:"block text-xs font-medium text-slate-600 mb-2"},AH=["disabled"],PH={class:"flex justify-between items-center mt-4 pt-4 border-t border-slate-100"},xH=["disabled"],LH={class:"bg-white rounded-2xl shadow-sm overflow-hidden"},RH={class:"flex items-center gap-3 p-5 border-b border-slate-100 bg-red-50"},NH={class:"text-base font-semibold text-slate-900"},OH={class:"text-xs text-slate-500"},DH={class:"p-5 flex flex-col sm:flex-row gap-4"},MH={class:"flex-1 flex items-center justify-between gap-4 p-4 bg-slate-50 rounded-xl"},$H={class:"text-sm font-semibold text-slate-900"},UH={class:"text-xs text-slate-500"},FH={class:"flex-1 flex items-center justify-between gap-4 p-4 bg-slate-50 rounded-xl"},VH={class:"text-sm font-semibold text-slate-900"},qH={class:"text-xs text-slate-500"},BH={class:"bg-white rounded-2xl max-w-md w-full overflow-hidden shadow-2xl"},jH={class:"flex justify-between items-center p-5 border-b border-slate-100"},HH={class:"text-lg font-semibold text-slate-900"},zH={class:"p-5"},WH={class:"text-slate-700 mb-3"},GH={class:"text-red-500 font-medium"},KH={class:"flex justify-end gap-3 p-5 bg-slate-50"};function YH(t,e,s,r,n,i){const o=es("LanguageSwitcher");return b(),S("div",$B,[a("main",UB,[a("header",FB,[a("div",VB,[a("button",{onClick:e[0]||(e[0]=(...l)=>r.goToProfile&&r.goToProfile(...l)),class:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 rounded-xl text-slate-700 font-medium transition-all"},[e[24]||(e[24]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)),a("span",null,p(t.$t("common.back")),1)]),a("div",null,[a("h1",qB,p(t.$t("settings.accountSettings")),1),a("p",BB,p(t.$t("settings.manageProfile")),1)])]),a("div",jB,[xe(o,{compact:!0}),a("button",{onClick:e[1]||(e[1]=(...l)=>r.saveChanges&&r.saveChanges(...l)),disabled:r.loading,class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg shadow-indigo-500/25 transition-all disabled:opacity-60 disabled:cursor-not-allowed"},[e[25]||(e[25]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),a("polyline",{points:"17 21 17 13 7 13 7 21"}),a("polyline",{points:"7 3 7 8 15 8"})],-1)),a("span",null,p(t.$t("common.save")),1)],8,HB)])]),a("div",zB,[a("div",WB,[e[26]||(e[26]=a("div",{class:"w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white flex-shrink-0"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})])],-1)),a("div",GB,[a("p",KB,p(t.$t("settings.plan")),1),a("h3",YB,p(r.currentPlan!=="free"?t.$t("common.pro"):t.$t("common.free")),1)])]),a("div",QB,[e[27]||(e[27]=a("div",{class:"w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-teal-400 to-emerald-500 text-white flex-shrink-0"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1)),a("div",XB,[a("p",JB,p(t.$t("settings.messages")),1),a("h3",ZB,[re(p(r.currentUsageMessages),1),a("span",ej,"/"+p(r.usageLimitsMessages===-1?"":r.usageLimitsMessages),1)])])]),a("div",tj,[e[28]||(e[28]=kt('<div class="w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-pink-500 to-orange-500 text-white flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div>',1)),a("div",sj,[a("p",rj,p(t.$t("settings.images")),1),a("h3",nj,[re(p(r.currentUsageImages),1),a("span",ij,"/"+p(r.usageLimitsImages===-1?"":r.usageLimitsImages),1)])])]),a("div",oj,[e[29]||(e[29]=kt('<div class="w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-sky-400 to-cyan-500 text-white flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg></div>',1)),a("div",aj,[a("p",lj,p(t.$t("settings.daysLeft")),1),a("h3",cj,p(r.currentPlan!=="free"&&r.subscriptionExpiryInfo?r.subscriptionExpiryInfo.daysRemaining:""),1)])])]),a("div",uj,[a("div",dj,[e[30]||(e[30]=a("div",{class:"w-10 h-10 flex items-center justify-center bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),a("h2",hj,p(t.$t("settings.subscriptionPlans")),1),a("p",fj,p(t.$t("settings.chooseBestPlan")),1)]),a("div",pj,[a("div",mj,[a("div",gj,[a("div",yj,[a("h3",vj,p(t.$t("settings.oneMonth")),1),e[34]||(e[34]=a("div",{class:"text-2xl font-bold text-indigo-600 mt-2"},"250,000",-1)),a("div",_j,p(t.$t("settings.uzs")),1),a("ul",bj,[a("li",wj,[e[31]||(e[31]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.unlimitedMessages")),1)]),a("li",Sj,[e[32]||(e[32]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.unlimitedImages")),1)]),a("li",Ej,[e[33]||(e[33]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.aiTutorAccess")),1)])]),a("button",{onClick:e[2]||(e[2]=l=>r.goToUpgrade(1)),disabled:r.currentPlan!=="free",class:"w-full py-2.5 mt-4 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},p(r.currentPlan==="free"?t.$t("tariffs.getStarted"):t.$t("common.active")),9,Tj)])]),a("div",kj,[a("div",Ij,p(t.$t("tariffs.popular")),1),a("div",Cj,[a("h3",Aj,p(t.$t("settings.threeMonths")),1),e[38]||(e[38]=a("div",{class:"text-2xl font-bold text-indigo-600 mt-2"},"675,000",-1)),a("div",Pj,p(t.$t("settings.uzs")),1),a("div",xj,p(t.$t("tariffs.save",{percent:10})),1),a("ul",Lj,[a("li",Rj,[e[35]||(e[35]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.unlimitedMessages")),1)]),a("li",Nj,[e[36]||(e[36]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.unlimitedImages")),1)]),a("li",Oj,[e[37]||(e[37]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.aiTutorAnalytics")),1)])]),a("button",{onClick:e[3]||(e[3]=l=>r.goToUpgrade(3)),disabled:r.currentPlan!=="free",class:"w-full py-2.5 mt-4 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},p(r.currentPlan==="free"?t.$t("tariffs.bestValue"):t.$t("common.active")),9,Dj)])]),a("div",Mj,[a("div",$j,p(t.$t("settings.bestDeal")),1),a("div",Uj,[a("h3",Fj,p(t.$t("settings.sixMonths")),1),e[42]||(e[42]=a("div",{class:"text-2xl font-bold text-indigo-600 mt-2"},"1,200,000",-1)),a("div",Vj,p(t.$t("settings.uzs")),1),a("div",qj,p(t.$t("tariffs.save",{percent:20})),1),a("ul",Bj,[a("li",jj,[e[39]||(e[39]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.unlimitedEverything")),1)]),a("li",Hj,[e[40]||(e[40]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.prioritySupportPlan")),1)]),a("li",zj,[e[41]||(e[41]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),re(" "+p(t.$t("settings.customCourses")),1)])]),a("button",{onClick:e[4]||(e[4]=l=>r.goToUpgrade(6)),disabled:r.currentPlan!=="free",class:"w-full py-2.5 mt-4 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},p(r.currentPlan==="free"?t.$t("settings.getPro"):t.$t("common.active")),9,Wj)])])]),a("div",Gj,[a("div",Kj,[Pe(a("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>r.promocode=l),class:"flex-1 px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all disabled:opacity-70 disabled:cursor-not-allowed",placeholder:t.$t("settings.enterPromocode"),disabled:r.applyingPromo||r.currentPlan!=="free"},null,8,Yj),[[Ge,r.promocode]]),a("button",{onClick:e[6]||(e[6]=(...l)=>r.applyPromocode&&r.applyPromocode(...l)),class:"px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",disabled:!r.promocode||r.applyingPromo||r.currentPlan!=="free"},p(r.applyingPromo?t.$t("settings.applying"):t.$t("settings.applyCode")),9,Qj)]),r.promoError?(b(),S("p",Xj,p(r.promoError),1)):W("",!0),r.promoSuccess?(b(),S("p",Jj,p(r.promoSuccess),1)):W("",!0)])])]),a("div",Zj,[a("div",eH,[a("div",tH,[a("div",sH,[e[43]||(e[43]=a("div",{class:"w-10 h-10 flex items-center justify-center bg-slate-100 rounded-xl text-indigo-500"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a("circle",{cx:"12",cy:"7",r:"4"})])],-1)),a("div",null,[a("h2",rH,p(t.$t("settings.personalInformation")),1),a("p",nH,p(t.$t("settings.updatePersonal")),1)])]),r.isEditingName?W("",!0):(b(),S("button",{key:0,onClick:e[7]||(e[7]=(...l)=>r.startEditingName&&r.startEditingName(...l)),class:"w-9 h-9 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-500 hover:text-slate-700 transition-all"},e[44]||(e[44]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])))]),a("div",iH,[a("div",oH,[a("div",null,[a("label",aH,p(t.$t("userSection.firstName")),1),r.isEditingName?Pe((b(),S("input",{key:0,type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>r.tempUser.name=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:t.$t("userSection.firstName")},null,8,lH)),[[Ge,r.tempUser.name]]):(b(),S("div",cH,p(r.user.name||t.$t("settings.notSpecified")),1))]),a("div",null,[a("label",uH,p(t.$t("userSection.lastName")),1),r.isEditingName?Pe((b(),S("input",{key:0,type:"text","onUpdate:modelValue":e[9]||(e[9]=l=>r.tempUser.surname=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:t.$t("userSection.lastName")},null,8,dH)),[[Ge,r.tempUser.surname]]):(b(),S("div",hH,p(r.user.surname||t.$t("settings.notSpecified")),1))])]),a("div",null,[a("label",fH,[re(p(t.$t("userSection.email"))+" ",1),a("span",pH,[e[45]||(e[45]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[a("polyline",{points:"20 6 9 17 4 12"})],-1)),re(" "+p(t.$t("common.verified")),1)])]),Pe(a("input",{type:"email","onUpdate:modelValue":e[10]||(e[10]=l=>r.user.email=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent rounded-xl text-sm text-slate-900 outline-none transition-all disabled:opacity-70 disabled:cursor-not-allowed",disabled:!r.isEditingName},null,8,mH),[[Ge,r.user.email]])]),r.isEditingName?(b(),S("div",gH,[a("button",{onClick:e[11]||(e[11]=(...l)=>r.cancelEditingName&&r.cancelEditingName(...l)),class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-all text-sm"},p(t.$t("common.cancel")),1),a("button",{onClick:e[12]||(e[12]=(...l)=>r.saveNameChanges&&r.saveNameChanges(...l)),class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl transition-all text-sm"},p(t.$t("common.save")),1)])):W("",!0)])]),r.isGoogleUser?W("",!0):(b(),S("div",yH,[a("div",vH,[e[46]||(e[46]=a("div",{class:"w-10 h-10 flex items-center justify-center bg-slate-100 rounded-xl text-indigo-500"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})])],-1)),a("div",null,[a("h2",_H,p(t.$t("settings.security")),1),a("p",bH,p(t.$t("settings.changePassword")),1)])]),a("div",wH,[a("div",SH,[a("div",null,[a("label",EH,p(t.$t("settings.currentPassword")),1),Pe(a("input",{type:"password","onUpdate:modelValue":e[13]||(e[13]=l=>r.oldPassword=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:"",disabled:r.loading},null,8,TH),[[Ge,r.oldPassword]])]),a("div",null,[a("label",kH,p(t.$t("settings.newPassword")),1),Pe(a("input",{type:"password","onUpdate:modelValue":e[14]||(e[14]=l=>r.newPassword=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:"",disabled:r.loading},null,8,IH),[[Ge,r.newPassword]])]),a("div",null,[a("label",CH,p(t.$t("settings.confirmPassword")),1),Pe(a("input",{type:"password","onUpdate:modelValue":e[15]||(e[15]=l=>r.confirmPassword=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:"",disabled:r.loading},null,8,AH),[[Ge,r.confirmPassword]])])]),a("div",PH,[a("button",{onClick:e[16]||(e[16]=(...l)=>r.sendPasswordReset&&r.sendPasswordReset(...l)),class:"text-indigo-500 hover:text-indigo-600 font-medium text-sm hover:underline"},p(t.$t("settings.forgotPassword")),1),a("button",{onClick:e[17]||(e[17]=(...l)=>r.saveChanges&&r.saveChanges(...l)),class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl transition-all text-sm disabled:opacity-60",disabled:r.loading},p(r.loading?t.$t("settings.updating"):t.$t("settings.update")),9,xH)])])]))]),a("div",LH,[a("div",RH,[e[47]||(e[47]=kt('<div class="w-10 h-10 flex items-center justify-center bg-red-100 rounded-xl text-red-600"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></div>',1)),a("div",null,[a("h2",NH,p(t.$t("settings.dangerZone")),1),a("p",OH,p(t.$t("settings.irreversibleActions")),1)])]),a("div",DH,[a("div",MH,[a("div",null,[a("h4",$H,p(t.$t("settings.signOut")),1),a("p",UH,p(t.$t("settings.signOutDesc")),1)]),a("button",{onClick:e[18]||(e[18]=(...l)=>r.handleLogout&&r.handleLogout(...l)),class:"px-4 py-2 border-2 border-red-500 text-red-500 hover:bg-red-500 hover:text-white font-semibold rounded-xl transition-all text-sm whitespace-nowrap"},p(t.$t("settings.signOut")),1)]),a("div",FH,[a("div",null,[a("h4",VH,p(t.$t("settings.deleteAccount")),1),a("p",qH,p(t.$t("settings.deleteAccountDesc")),1)]),a("button",{onClick:e[19]||(e[19]=(...l)=>r.confirmDeleteAccount&&r.confirmDeleteAccount(...l)),class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition-all text-sm whitespace-nowrap"},p(t.$t("common.delete")),1)])])])]),r.showDeleteModal?(b(),S("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-5",onClick:e[23]||(e[23]=gt(l=>r.showDeleteModal=!1,["self"]))},[a("div",BH,[a("div",jH,[a("h3",HH,p(t.$t("settings.deleteModalTitle")),1),a("button",{onClick:e[20]||(e[20]=l=>r.showDeleteModal=!1),class:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 text-2xl"},"")]),a("div",zH,[a("p",WH,p(t.$t("settings.deleteModalText")),1),a("p",GH,p(t.$t("settings.deleteModalWarning")),1)]),a("div",KH,[a("button",{onClick:e[21]||(e[21]=l=>r.showDeleteModal=!1),class:"px-5 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-all"},p(t.$t("common.cancel")),1),a("button",{onClick:e[22]||(e[22]=(...l)=>r.deleteAccount&&r.deleteAccount(...l)),class:"px-5 py-2.5 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition-all"},p(t.$t("settings.deleteForever")),1)])])])):W("",!0)])}const jC=tt(MB,[["render",YH]]),QH={components:{AcedSettings:jC,LanguageSwitcher:nv},setup(){const{t}=Ga();return{t}},data(){return{isModalOpen:!1,authMode:"register",dropdownOpen:!1,showSettings:!1,isLoading:!1,errorMessage:"",successMessage:"",loadingMessage:"",user:{name:"",surname:"",email:"",password:"",confirmPassword:""},Login:{email:"",password:""}}},computed:{...tn(["getUser"]),...tn("user",["userStatus","subscription","forceUpdateKey"]),currentUser(){return this.getUser},displayPlan(){var e,s,r,n;return(this.userStatus||((r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.userStatus)||((n=this.currentUser)==null?void 0:n.subscriptionPlan)||localStorage.getItem("userStatus")||localStorage.getItem("plan")||"free").toUpperCase()},planClass(){var e,s,r,n;return`badge-${(this.userStatus||((r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.userStatus)||((n=this.currentUser)==null?void 0:n.subscriptionPlan)||localStorage.getItem("userStatus")||localStorage.getItem("plan")||"free").toLowerCase()}`}},mounted(){this.loadingMessage=this.$t("common.loading"),Bc(pe,t=>{t&&!this.currentUser&&this.handleAuthStateChange(t)}),window.addEventListener("open-Login-modal",()=>{this.openModal("Login")}),window.addEventListener("userStatusChanged",this.handleStatusUpdate),window.addEventListener("subscriptionUpdated",this.handleStatusUpdate),window.addEventListener("forceUpdate",this.handleStatusUpdate),document.addEventListener("click",t=>{this.$el.contains(t.target)||(this.dropdownOpen=!1)})},beforeUnmount(){window.removeEventListener("userStatusChanged",this.handleStatusUpdate),window.removeEventListener("subscriptionUpdated",this.handleStatusUpdate),window.removeEventListener("forceUpdate",this.handleStatusUpdate)},methods:{...CE(["setUser","setFirebaseUserId","setToken"]),...zD(["LoginUser","logoutUser"]),handleStatusUpdate(){this.$forceUpdate()},getApiBase(){return window.location.hostname==="aced.live"?"https://api.aced.live":window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5000":"https://api.aced.live"},async saveUserToBackend(t,e,s={}){var r,n,i,o,l,c;try{const u=this.getApiBase(),h={uid:t.uid,firebaseId:t.uid,name:s.name||t.displayName||((r=t.email)==null?void 0:r.split("@")[0])||"User",email:t.email,Login:t.email,token:e,subscriptionPlan:s.subscriptionPlan||"free",emailVerified:t.emailVerified||!1,photoURL:t.photoURL||null,lastLoginAt:new Date().toISOString(),authProvider:((i=(n=t.providerData)==null?void 0:n[0])==null?void 0:i.providerId)||"firebase",...s},f=await ut({method:"POST",url:`${u}/api/users/save`,data:h,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},timeout:8e3});if(f.data&&f.data.success!==!1)return{success:!0,user:f.data.user||f.data.data||f.data,source:"backend"};throw new Error("Backend returned unsuccessful response")}catch(u){const h=((l=(o=u.response)==null?void 0:o.data)==null?void 0:l.message)||u.message;return{success:!0,user:{uid:t.uid,_id:t.uid,firebaseId:t.uid,email:t.email,name:s.name||t.displayName||((c=t.email)==null?void 0:c.split("@")[0])||"User",displayName:t.displayName||"",subscriptionPlan:s.subscriptionPlan||"free",userStatus:s.subscriptionPlan||"free",emailVerified:t.emailVerified||!1,photoURL:t.photoURL||null,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),authProvider:"firebase",backendSyncFailed:!0,syncError:h},source:"firebase-only",warning:"Backend synchronization failed, using Firebase-only mode"}}},async handleAuthStateChange(t){var e;try{this.loadingMessage=this.$t("common.loading");const s=await t.getIdToken(!0),r=await this.saveUserToBackend(t,s),n={name:r.user.name,email:t.email,uid:t.uid,subscriptionPlan:r.user.subscriptionPlan||"free",...r.user};this.setUserData(n,t.uid,s)}catch{try{const r={name:t.displayName||((e=t.email)==null?void 0:e.split("@")[0])||"User",email:t.email,uid:t.uid,subscriptionPlan:"free",authMode:"fallback"},n=await t.getIdToken(!0);this.setUserData(r,t.uid,n)}catch{this.showError(this.$t("errors.loginError"))}}},async handleEmailLogin(){if(!this.Login.email||!this.Login.password){this.showError(this.$t("errors.fillAllFields"));return}this.isLoading=!0,this.clearMessages(),this.loadingMessage=this.$t("userSection.signingIn");try{const t=await Bk(pe,this.Login.email,this.Login.password);this.loadingMessage=this.$t("common.loading"),await this.handleAuthStateChange(t.user),this.showSuccess(this.$t("success.signedIn")),setTimeout(()=>{this.closeModal()},1e3)}catch(t){let e=this.$t("errors.loginError");t.code==="auth/user-not-found"?e=this.$t("errors.userNotFound"):t.code==="auth/wrong-password"||t.code==="auth/invalid-credential"?e=this.$t("errors.invalidPassword"):t.code==="auth/invalid-email"?e=this.$t("errors.invalidEmail"):t.code==="auth/too-many-requests"?e=this.$t("errors.tooManyAttempts"):t.code==="auth/user-disabled"?e=this.$t("errors.accountDisabled"):t.code==="auth/network-request-failed"&&(e=this.$t("errors.networkError")),this.showError(e)}finally{this.isLoading=!1}},async LoginWithGoogle(){if(!this.isLoading){this.isLoading=!0,this.clearMessages(),this.loadingMessage=this.$t("common.loading");try{const t=new Wr,e=await eI(pe,t);this.loadingMessage=this.$t("common.loading"),await this.handleAuthStateChange(e.user),this.showSuccess(this.$t("success.signedInGoogle")),setTimeout(()=>{this.closeModal(),this.$router.push("/profile")},1e3)}catch(t){let e=this.$t("errors.googleSignInError");t.code==="auth/popup-closed-by-user"?e=this.$t("errors.popupClosed"):t.code==="auth/popup-blocked"?e=this.$t("errors.popupBlocked"):t.code==="auth/network-request-failed"&&(e=this.$t("errors.networkError")),this.showError(e)}finally{this.isLoading=!1}}},async register(){if(!this.user.name||!this.user.email||!this.user.password){this.showError(this.$t("errors.fillAllFields"));return}if(this.user.password!==this.user.confirmPassword){this.showError(this.$t("errors.passwordsMismatch"));return}if(this.user.password.length<6){this.showError(this.$t("errors.passwordMinLength"));return}this.isLoading=!0,this.clearMessages(),this.loadingMessage=this.$t("userSection.registering");try{const e=(await qk(pe,this.user.email,this.user.password)).user;this.loadingMessage=this.$t("common.loading");const s={name:this.user.name,surname:this.user.surname,subscriptionPlan:"free"},r=await e.getIdToken(!0),n=await this.saveUserToBackend(e,r,s),i={name:n.user.name||this.user.name,email:e.email,uid:e.uid,subscriptionPlan:n.user.subscriptionPlan||"free",...n.user};this.setUserData(i,e.uid,r),this.showSuccess(this.$t("success.registrationSuccess")),setTimeout(()=>{this.closeModal()},1500)}catch(t){let e=this.$t("errors.registrationError");t.code==="auth/email-already-in-use"?e=this.$t("errors.emailInUse"):t.code==="auth/invalid-email"?e=this.$t("errors.invalidEmail"):t.code==="auth/weak-password"?e=this.$t("errors.weakPassword"):t.code==="auth/network-request-failed"&&(e=this.$t("errors.networkError")),this.showError(e)}finally{this.isLoading=!1}},setUserData(t,e,s){this.setUser(t),this.setFirebaseUserId(e),this.setToken(s),localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("firebaseUserId",e),localStorage.setItem("token",s),localStorage.setItem("plan",t.subscriptionPlan||"free")},openModal(t){this.authMode=t,this.isModalOpen=!0,this.clearMessages()},closeModal(){this.isModalOpen=!1,this.resetForms(),this.clearMessages()},switchAuth(t){this.authMode=t,this.resetForms(),this.clearMessages()},toggleDropdown(){this.dropdownOpen=!this.dropdownOpen},clearMessages(){this.errorMessage="",this.successMessage=""},showError(t){this.errorMessage=t,this.successMessage="",setTimeout(()=>this.clearMessages(),5e3)},showSuccess(t){this.successMessage=t,this.errorMessage="",setTimeout(()=>this.clearMessages(),3e3)},async logout(){try{await pe.signOut(),this.logoutUser(),this.dropdownOpen=!1,localStorage.clear(),this.$route.path!=="/"&&this.$router.push("/")}catch{}},resetForms(){this.user={name:"",surname:"",email:"",password:"",confirmPassword:""},this.Login={email:"",password:""}}}},XH={class:"user-section-wrapper"},JH={key:0,class:"auth-buttons"},ZH={class:"btn-text"},ez={class:"btn-text"},tz={key:1,class:"user-section"},sz={class:"user-menu"},rz={class:"user-greeting"},nz={key:0,class:"loading-state"},iz={key:1,class:"auth-form"},oz={class:"modal-header"},az={class:"modal-subtitle"},lz={class:"form-group"},cz=["placeholder","disabled"],uz={class:"form-group"},dz=["placeholder","disabled"],hz={class:"form-group"},fz=["placeholder","disabled"],pz={class:"form-group"},mz=["placeholder","disabled"],gz={class:"form-group"},yz=["placeholder","disabled"],vz=["disabled"],_z={class:"divider"},bz=["disabled"],wz={class:"switch-text"},Sz={key:2,class:"auth-form"},Ez={class:"modal-header"},Tz={class:"modal-subtitle"},kz={class:"form-group"},Iz=["placeholder","disabled"],Cz={class:"form-group"},Az=["placeholder","disabled"],Pz=["disabled"],xz={class:"divider"},Lz=["disabled"],Rz={class:"switch-text"},Nz={key:3,class:"error-message"},Oz={key:4,class:"success-message"};function Dz(t,e,s,r,n,i){const o=es("LanguageSwitcher"),l=es("AcedSettings");return b(),S("div",XH,[xe(o,{compact:!0}),i.currentUser?(b(),S("div",tz,[a("button",{class:"auth-btn profile-btn",onClick:e[2]||(e[2]=c=>t.$router.push("/profile"))},[e[26]||(e[26]=a("span",{class:"profile-icon"},"",-1)),a("span",null,p(t.$t("userSection.profile")),1)]),a("div",sz,[a("button",{class:ye(["user-button",{active:n.dropdownOpen}]),onClick:e[3]||(e[3]=(...c)=>i.toggleDropdown&&i.toggleDropdown(...c))},[a("span",rz,p(t.$t("userSection.greeting",{name:i.currentUser.name})),1),a("span",{class:ye(["badge",i.planClass])},p(i.displayPlan),3),a("span",{class:ye(["dropdown-arrow",{rotated:n.dropdownOpen}])},"",2)],2),n.dropdownOpen?(b(),S("div",{key:0,class:"dropdown-menu show",onClick:e[6]||(e[6]=gt(()=>{},["stop"]))},[a("ul",null,[a("li",{onClick:e[4]||(e[4]=c=>t.$router.push("/settings"))},[e[27]||(e[27]=a("span",{class:"menu-icon"},"",-1)),a("span",null,p(t.$t("userSection.settings")),1)]),a("li",{onClick:e[5]||(e[5]=(...c)=>i.logout&&i.logout(...c))},[e[28]||(e[28]=a("span",{class:"menu-icon"},"",-1)),a("span",null,p(t.$t("userSection.logout")),1)])])])):W("",!0)])])):(b(),S("div",JH,[a("button",{class:"auth-btn login-btn",onClick:e[0]||(e[0]=c=>i.openModal("Login"))},[a("span",ZH,p(t.$t("userSection.login")),1),e[24]||(e[24]=a("span",{class:"btn-icon"},"",-1))]),a("button",{class:"auth-btn register-btn",onClick:e[1]||(e[1]=c=>i.openModal("register"))},[a("span",ez,p(t.$t("userSection.register")),1),e[25]||(e[25]=a("span",{class:"btn-glow"},null,-1))])])),n.isModalOpen?(b(),S("div",{key:2,class:"global-auth-modal",onClick:e[22]||(e[22]=(...c)=>i.closeModal&&i.closeModal(...c))},[a("div",{class:"modal-content",onClick:e[21]||(e[21]=gt(()=>{},["stop"]))},[a("button",{class:"close-btn",onClick:e[7]||(e[7]=(...c)=>i.closeModal&&i.closeModal(...c))},e[29]||(e[29]=[a("span",null,"",-1)])),n.isLoading?(b(),S("div",nz,[e[30]||(e[30]=a("div",{class:"loader-spinner"},null,-1)),a("p",null,p(n.loadingMessage),1)])):n.authMode==="register"?(b(),S("div",iz,[a("div",oz,[a("h2",null,p(t.$t("userSection.createAccount")),1),a("p",az,p(t.$t("userSection.startJourney")),1)]),a("div",lz,[Pe(a("input",{"onUpdate:modelValue":e[8]||(e[8]=c=>n.user.name=c),placeholder:t.$t("userSection.firstName"),disabled:n.isLoading,class:"form-input"},null,8,cz),[[Ge,n.user.name]])]),a("div",uz,[Pe(a("input",{"onUpdate:modelValue":e[9]||(e[9]=c=>n.user.surname=c),placeholder:t.$t("userSection.lastName"),disabled:n.isLoading,class:"form-input"},null,8,dz),[[Ge,n.user.surname]])]),a("div",hz,[Pe(a("input",{"onUpdate:modelValue":e[10]||(e[10]=c=>n.user.email=c),type:"email",placeholder:t.$t("userSection.email"),disabled:n.isLoading,class:"form-input"},null,8,fz),[[Ge,n.user.email]])]),a("div",pz,[Pe(a("input",{"onUpdate:modelValue":e[11]||(e[11]=c=>n.user.password=c),type:"password",placeholder:t.$t("userSection.password"),disabled:n.isLoading,class:"form-input"},null,8,mz),[[Ge,n.user.password]])]),a("div",gz,[Pe(a("input",{"onUpdate:modelValue":e[12]||(e[12]=c=>n.user.confirmPassword=c),type:"password",placeholder:t.$t("userSection.confirmPassword"),disabled:n.isLoading,class:"form-input"},null,8,yz),[[Ge,n.user.confirmPassword]])]),a("button",{class:"auth-submit",onClick:e[13]||(e[13]=(...c)=>i.register&&i.register(...c)),disabled:n.isLoading},[a("span",null,p(n.isLoading?t.$t("userSection.registering"):t.$t("userSection.signUp")),1),e[31]||(e[31]=a("span",{class:"submit-glow"},null,-1))],8,vz),a("div",_z,[a("span",null,p(t.$t("common.or")),1)]),a("button",{class:"google-auth",onClick:e[14]||(e[14]=(...c)=>i.LoginWithGoogle&&i.LoginWithGoogle(...c)),disabled:n.isLoading},[e[32]||(e[32]=kt('<svg class="google-icon" viewBox="0 0 24 24" data-v-429aaba5><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-429aaba5></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-429aaba5></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-429aaba5></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-429aaba5></path></svg>',1)),a("span",null,p(n.isLoading?t.$t("common.loading"):t.$t("userSection.continueWithGoogle")),1)],8,bz),a("p",wz,[re(p(t.$t("userSection.alreadyHaveAccount"))+" ",1),a("span",{class:"switch-link",onClick:e[15]||(e[15]=c=>i.switchAuth("Login"))},p(t.$t("userSection.signIn")),1)])])):(b(),S("div",Sz,[a("div",Ez,[a("h2",null,p(t.$t("userSection.welcomeBack")),1),a("p",Tz,p(t.$t("userSection.continuelearning")),1)]),a("div",kz,[Pe(a("input",{"onUpdate:modelValue":e[16]||(e[16]=c=>n.Login.email=c),type:"email",placeholder:t.$t("userSection.email"),disabled:n.isLoading,class:"form-input"},null,8,Iz),[[Ge,n.Login.email]])]),a("div",Cz,[Pe(a("input",{"onUpdate:modelValue":e[17]||(e[17]=c=>n.Login.password=c),type:"password",placeholder:t.$t("userSection.password"),disabled:n.isLoading,class:"form-input"},null,8,Az),[[Ge,n.Login.password]])]),a("button",{class:"auth-submit",onClick:e[18]||(e[18]=(...c)=>i.handleEmailLogin&&i.handleEmailLogin(...c)),disabled:n.isLoading},[a("span",null,p(n.isLoading?t.$t("userSection.signingIn"):t.$t("userSection.signIn")),1),e[33]||(e[33]=a("span",{class:"submit-glow"},null,-1))],8,Pz),a("div",xz,[a("span",null,p(t.$t("common.or")),1)]),a("button",{class:"google-auth",onClick:e[19]||(e[19]=(...c)=>i.LoginWithGoogle&&i.LoginWithGoogle(...c)),disabled:n.isLoading},[e[34]||(e[34]=kt('<svg class="google-icon" viewBox="0 0 24 24" data-v-429aaba5><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-429aaba5></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-429aaba5></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-429aaba5></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-429aaba5></path></svg>',1)),a("span",null,p(n.isLoading?t.$t("common.loading"):t.$t("userSection.continueWithGoogle")),1)],8,Lz),a("p",Rz,[re(p(t.$t("userSection.dontHaveAccount"))+" ",1),a("span",{class:"switch-link",onClick:e[20]||(e[20]=c=>i.switchAuth("register"))},p(t.$t("userSection.signUp")),1)])])),n.errorMessage?(b(),S("div",Nz,[e[35]||(e[35]=a("span",{class:"message-icon"},"",-1)),a("span",null,p(n.errorMessage),1)])):W("",!0),n.successMessage?(b(),S("div",Oz,[e[36]||(e[36]=a("span",{class:"message-icon"},"",-1)),a("span",null,p(n.successMessage),1)])):W("",!0)])])):W("",!0),n.showSettings?(b(),ts(l,{key:3,onCloseSettings:e[23]||(e[23]=c=>n.showSettings=!1)})):W("",!0)])}const Mz=tt(QH,[["render",Dz],["__scopeId","data-v-429aaba5"]]),Aa="/assets/logo-Clxx9Vi9.png",$z={components:{UserSection:Mz},methods:{handleStartFree(){const t=document.getElementById("aced");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},handleRegister(){window.dispatchEvent(new Event("open-Login-modal"))}}},Uz={class:"hero-wrapper"},Fz={class:"hero-nav"},Vz={class:"hero-content"},qz={class:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center py-6 sm:py-8 lg:py-12"},Bz={class:"relative"},jz={class:"inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-violet-50 rounded-full border border-violet-100 mb-6 sm:mb-8"},Hz={class:"text-xs sm:text-sm font-medium text-violet-700"},zz={class:"flex flex-col gap-4 sm:gap-6 mb-8 sm:mb-10"},Wz={class:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-[1.15] tracking-tight"},Gz={class:"relative inline-block"},Kz={class:"relative z-10 text-violet-600"},Yz={class:"text-base sm:text-lg lg:text-xl text-gray-500 leading-relaxed max-w-md"},Qz={class:"flex flex-col sm:flex-row gap-3 mb-8 sm:mb-10"},Xz={class:"flex flex-wrap gap-4 sm:gap-6 lg:gap-8 pt-6 border-t border-gray-100"},Jz={class:"flex items-center gap-2 sm:gap-3"},Zz={class:"text-xs sm:text-sm text-gray-500"},eW={class:"flex items-center gap-2 sm:gap-3"},tW={class:"text-xs sm:text-sm text-gray-500"},sW={class:"flex items-center gap-2 sm:gap-3"},rW={class:"text-xs sm:text-sm text-gray-500"},nW={class:"relative hidden lg:block"},iW={class:"bg-white rounded-3xl shadow-2xl shadow-gray-200/50 p-6 xl:p-8 border border-gray-100 relative"},oW={class:"space-y-4 xl:space-y-5 relative"},aW={class:"flex items-center gap-3 xl:gap-4 p-3 xl:p-4 bg-gray-50 rounded-2xl"},lW={class:"flex-1 min-w-0"},cW={class:"font-semibold text-gray-900 truncate"},uW={class:"text-sm text-gray-500 truncate"},dW={class:"px-2 xl:px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full whitespace-nowrap"},hW={class:"flex items-center gap-3 xl:gap-4 p-3 xl:p-4 bg-gray-50 rounded-2xl"},fW={class:"flex-1 min-w-0"},pW={class:"font-semibold text-gray-900 truncate"},mW={class:"text-sm text-gray-500 truncate"},gW={class:"px-2 xl:px-3 py-1 bg-violet-100 text-violet-700 text-xs font-semibold rounded-full whitespace-nowrap"},yW={class:"flex items-center gap-3 xl:gap-4 p-3 xl:p-4 bg-gray-50 rounded-2xl"},vW={class:"flex-1 min-w-0"},_W={class:"font-semibold text-gray-900 truncate"},bW={class:"text-sm text-gray-500 truncate"},wW={class:"px-2 xl:px-3 py-1 bg-violet-100 text-violet-700 text-xs font-semibold rounded-full whitespace-nowrap"},SW={class:"mt-5 xl:mt-6 pt-5 xl:pt-6 border-t border-gray-100 flex items-center justify-between"},EW={class:"flex items-center gap-2"},TW={class:"text-xs xl:text-sm text-gray-500"};function kW(t,e,s,r,n,i){const o=es("UserSection");return b(),S("div",Uz,[e[17]||(e[17]=a("div",{class:"hero-decoration"},null,-1)),a("nav",Fz,[e[2]||(e[2]=a("img",{src:Aa,alt:"ACED",class:"h-8 sm:h-10 lg:h-12"},null,-1)),xe(o)]),a("div",Vz,[a("div",qz,[a("div",Bz,[a("div",jz,[e[3]||(e[3]=a("span",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1)),a("span",Hz,p(t.$t("heroSection.studentsLearning",{count:"2,800"})),1)]),a("div",zz,[a("h1",Wz,[re(p(t.$t("heroSection.headline"))+" ",1),a("span",Gz,[a("span",Kz,p(t.$t("heroSection.headlineHighlight")),1),e[4]||(e[4]=a("span",{class:"absolute bottom-1 sm:bottom-2 left-0 w-full h-2 sm:h-3 bg-violet-200/60 -z-0 rounded"},null,-1))])]),a("p",Yz,p(t.$t("heroSection.subtitle")),1)]),a("div",Qz,[a("button",{onClick:e[0]||(e[0]=(...l)=>i.handleStartFree&&i.handleStartFree(...l)),class:"w-full sm:w-auto px-6 sm:px-8 py-3 bg-violet-600 text-white text-sm sm:text-base font-semibold rounded-xl hover:bg-violet-700 transition-colors shadow-lg shadow-violet-600/25"},p(t.$t("heroSection.startFree")),1),a("button",{onClick:e[1]||(e[1]=(...l)=>i.handleRegister&&i.handleRegister(...l)),class:"w-full sm:w-auto px-6 sm:px-8 py-3 bg-white text-gray-700 text-sm sm:text-base font-semibold rounded-xl border-2 border-gray-200 hover:border-violet-400 hover:text-violet-600 transition-all"},p(t.$t("heroSection.registerAndSave")),1)]),a("div",Xz,[a("div",Jz,[e[6]||(e[6]=a("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-violet-100 flex items-center justify-center shrink-0"},[a("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),a("div",null,[e[5]||(e[5]=a("div",{class:"text-lg sm:text-xl font-bold text-gray-900"},"100+",-1)),a("div",Zz,p(t.$t("heroSection.courses")),1)])]),a("div",eW,[e[8]||(e[8]=a("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-orange-100 flex items-center justify-center shrink-0"},[a("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),a("div",null,[e[7]||(e[7]=a("div",{class:"text-lg sm:text-xl font-bold text-gray-900"},"24/7",-1)),a("div",tW,p(t.$t("heroSection.aiSupport")),1)])]),a("div",sW,[e[10]||(e[10]=a("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-green-100 flex items-center justify-center shrink-0"},[a("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("div",null,[e[9]||(e[9]=a("div",{class:"text-lg sm:text-xl font-bold text-gray-900"},"95%",-1)),a("div",rW,p(t.$t("heroSection.completion")),1)])])])]),a("div",nW,[a("div",iW,[e[16]||(e[16]=a("div",{class:"absolute top-4 right-4 w-12 xl:w-16 h-12 xl:h-16 bg-amber-400 rounded-2xl rotate-12 opacity-20"},null,-1)),a("div",oW,[a("div",aW,[e[11]||(e[11]=a("div",{class:"w-12 xl:w-14 h-12 xl:h-14 bg-violet-100 rounded-xl flex items-center justify-center shrink-0"},[a("svg",{class:"w-6 xl:w-7 h-6 xl:h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1)),a("div",lW,[a("div",cW,p(t.$t("heroSection.mathematics")),1),a("div",uW,p(t.$t("heroSection.mathLessons")),1)]),a("span",dW,p(t.$t("common.free")),1)]),a("div",hW,[e[12]||(e[12]=a("div",{class:"w-12 xl:w-14 h-12 xl:h-14 bg-amber-100 rounded-xl flex items-center justify-center shrink-0"},[a("svg",{class:"w-6 xl:w-7 h-6 xl:h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})])],-1)),a("div",fW,[a("div",pW,p(t.$t("heroSection.languages")),1),a("div",mW,p(t.$t("heroSection.langLessons")),1)]),a("span",gW,p(t.$t("common.pro")),1)]),a("div",yW,[e[13]||(e[13]=a("div",{class:"w-12 xl:w-14 h-12 xl:h-14 bg-violet-100 rounded-xl flex items-center justify-center shrink-0"},[a("svg",{class:"w-6 xl:w-7 h-6 xl:h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})])],-1)),a("div",vW,[a("div",_W,p(t.$t("heroSection.science")),1),a("div",bW,p(t.$t("heroSection.sciLessons")),1)]),a("span",wW,p(t.$t("common.pro")),1)])]),a("div",SW,[a("div",EW,[e[14]||(e[14]=a("div",{class:"flex -space-x-2"},[a("div",{class:"w-7 xl:w-8 h-7 xl:h-8 bg-violet-200 rounded-full border-2 border-white"}),a("div",{class:"w-7 xl:w-8 h-7 xl:h-8 bg-amber-200 rounded-full border-2 border-white"}),a("div",{class:"w-7 xl:w-8 h-7 xl:h-8 bg-green-200 rounded-full border-2 border-white"})],-1)),a("span",TW,"2,800+ "+p(t.$t("heroSection.learners")),1)]),e[15]||(e[15]=a("div",{class:"flex items-center gap-1 text-amber-500"},[a("svg",{class:"w-4 xl:w-5 h-4 xl:h-5",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),a("span",{class:"font-semibold text-sm xl:text-base"},"4.9")],-1))])])])])])])}const IW=tt($z,[["render",kW],["__scopeId","data-v-4c22c91d"]]),CW={name:"AboutUs"},AW={class:"py-20 lg:py-24 bg-white"},PW={class:"max-w-7xl mx-auto px-6 lg:px-16"},xW={class:"text-center mb-20"},LW={class:"inline-flex items-center gap-2 px-4 py-2 bg-violet-50 rounded-full border border-violet-100 mb-8"},RW={class:"text-sm font-medium text-violet-700"},NW={class:"flex flex-col items-center gap-4"},OW={class:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900"},DW={class:"text-lg lg:text-xl text-gray-500 text-center max-w-2xl"},MW={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-8"},$W={class:"bg-gray-50 rounded-2xl p-8 hover:bg-violet-50 transition-colors"},UW={class:"text-xl font-bold text-gray-900 mb-3"},FW={class:"text-gray-500 leading-relaxed"},VW={class:"bg-gray-50 rounded-2xl p-8 hover:bg-amber-50 transition-colors"},qW={class:"text-xl font-bold text-gray-900 mb-3"},BW={class:"text-gray-500 leading-relaxed"},jW={class:"bg-gray-50 rounded-2xl p-8 hover:bg-violet-50 transition-colors"},HW={class:"text-xl font-bold text-gray-900 mb-3"},zW={class:"text-gray-500 leading-relaxed"},WW={class:"bg-gray-50 rounded-2xl p-8 hover:bg-amber-50 transition-colors"},GW={class:"text-xl font-bold text-gray-900 mb-3"},KW={class:"text-gray-500 leading-relaxed"},YW={class:"bg-gray-50 rounded-2xl p-8 hover:bg-violet-50 transition-colors"},QW={class:"text-xl font-bold text-gray-900 mb-3"},XW={class:"text-gray-500 leading-relaxed"},JW={class:"bg-gray-50 rounded-2xl p-8 hover:bg-amber-50 transition-colors"},ZW={class:"text-xl font-bold text-gray-900 mb-3"},eG={class:"text-gray-500 leading-relaxed"},tG={class:"mt-20 grid grid-cols-2 lg:grid-cols-4 gap-8"},sG={class:"text-center"},rG={class:"text-gray-500 text-lg"},nG={class:"text-center"},iG={class:"text-gray-500 text-lg"},oG={class:"text-center"},aG={class:"text-gray-500 text-lg"},lG={class:"text-center"},cG={class:"text-gray-500 text-lg"};function uG(t,e,s,r,n,i){return b(),S("section",AW,[a("div",PW,[a("div",xW,[a("div",LW,[e[0]||(e[0]=a("span",{class:"w-2 h-2 bg-violet-500 rounded-full"},null,-1)),a("span",RW,p(t.$t("homepage.whyChooseUs")),1)]),a("div",NW,[a("h2",OW,p(t.$t("homepage.learningMadeSimple")),1),a("p",DW,p(t.$t("homepage.learningMadeSimpleDesc")),1)])]),a("div",MW,[a("div",$W,[e[1]||(e[1]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),a("h3",UW,p(t.$t("homepage.interactiveLearning")),1),a("p",FW,p(t.$t("homepage.interactiveLearningDesc")),1)]),a("div",VW,[e[2]||(e[2]=a("div",{class:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),a("h3",qW,p(t.$t("homepage.aiPoweredHelp")),1),a("p",BW,p(t.$t("homepage.aiPoweredHelpDesc")),1)]),a("div",jW,[e[3]||(e[3]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),a("h3",HW,p(t.$t("homepage.trackProgress")),1),a("p",zW,p(t.$t("homepage.trackProgressDesc")),1)]),a("div",WW,[e[4]||(e[4]=a("div",{class:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),a("h3",GW,p(t.$t("homepage.richContent")),1),a("p",KW,p(t.$t("homepage.richContentDesc")),1)]),a("div",YW,[e[5]||(e[5]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("h3",QW,p(t.$t("homepage.learnAnytime")),1),a("p",XW,p(t.$t("homepage.learnAnytimeDesc")),1)]),a("div",JW,[e[6]||(e[6]=a("div",{class:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("h3",ZW,p(t.$t("homepage.actuallyFun")),1),a("p",eG,p(t.$t("homepage.actuallyFunDesc")),1)])]),a("div",tG,[a("div",sG,[e[7]||(e[7]=a("div",{class:"text-5xl font-bold text-violet-600 mb-2"},"2,800+",-1)),a("div",rG,p(t.$t("homepage.activeStudents")),1)]),a("div",nG,[e[8]||(e[8]=a("div",{class:"text-5xl font-bold text-amber-500 mb-2"},"100+",-1)),a("div",iG,p(t.$t("homepage.courses")),1)]),a("div",oG,[e[9]||(e[9]=a("div",{class:"text-5xl font-bold text-violet-600 mb-2"},"95%",-1)),a("div",aG,p(t.$t("homepage.completionRate")),1)]),a("div",lG,[e[10]||(e[10]=a("div",{class:"text-5xl font-bold text-amber-500 mb-2"},"24/7",-1)),a("div",cG,p(t.$t("homepage.aiSupport")),1)])])])])}const HC=tt(CW,[["render",uG]]),dG=Object.freeze(Object.defineProperty({__proto__:null,default:HC},Symbol.toStringTag,{value:"Module"}));function $n(t){return t?t.startsWith("data:")?t:t.startsWith("/uploads/")?`https://api.aced.live${t}`:t.startsWith("/")&&!t.startsWith("//")?`https://api.aced.live${t}`:(t.startsWith("http"),t):null}function ks(t){return Array.isArray(t)?t.filter(e=>e&&(e.url||e.base64)).map((e,s)=>{var r,n,i,o;return{id:e.id||`img_${s}`,url:$n(e.url||e.base64),caption:e.caption||"",alt:e.alt||e.caption||` ${s+1}`,filename:e.filename||`image_${s}`,size:e.size||0,order:e.order||s,displayOptions:{width:((r=e.displayOptions)==null?void 0:r.width)||e.width||"auto",height:((n=e.displayOptions)==null?void 0:n.height)||e.height||"auto",alignment:((i=e.displayOptions)==null?void 0:i.alignment)||e.alignment||"center",zoom:((o=e.displayOptions)==null?void 0:o.zoom)||!1}}}).sort((e,s)=>(e.order||0)-(s.order||0)):[]}function hG(t,e,s){const r=t.data||{};switch(t.type){case"explanation":case"example":case"reading":return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[])};case"image":return{...r,images:ks(r.images||t.images||[]),description:r.description||t.description||"",caption:r.caption||t.caption||""};case"practice":return{...r,instructions:r.instructions||t.instructions||t.content||"",type:r.type||"guided",images:ks(r.images||t.images||[])};case"quiz":return Array.isArray(r)&&r.length>0?r.map(n=>({...n,images:ks(n.images||[])})):t.question||t.content?[{question:t.question||t.content||"",type:t.quizType||"multiple-choice",options:(t.options||[]).map(n=>({text:n.text||n})),correctAnswer:parseInt(t.correctAnswer)||0,explanation:t.explanation||"",images:ks(t.questionImages||[])}]:t.quizzes&&Array.isArray(t.quizzes)?t.quizzes.map(n=>({...n,images:ks(n.images||[])})):[];default:return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[])}}}function fG(t,e,s){const r=t.data||{};switch(t.type){case"explanation":case"example":case"reading":return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[]),hasContent:!!(r.content||t.content)};case"image":return{...r,images:ks(r.images||t.images||[]),description:r.description||t.description||"",caption:r.caption||t.caption||"",imageCount:(r.images||t.images||[]).length};case"practice":return{...r,instructions:r.instructions||t.instructions||t.content||"",type:r.type||"guided",images:ks(r.images||t.images||[]),hasInstructions:!!(r.instructions||t.instructions||t.content)};case"quiz":let n=[];return Array.isArray(r)&&r.length>0?n=r.map(i=>({...i,images:ks(i.images||[])})):t.question||t.content?n=[{question:t.question||t.content||"",type:t.quizType||"multiple-choice",options:(t.options||[]).map(i=>({text:i.text||i})),correctAnswer:parseInt(t.correctAnswer)||0,explanation:t.explanation||"",images:ks(t.questionImages||[])}]:t.quizzes&&Array.isArray(t.quizzes)&&(n=t.quizzes.map(i=>({...i,images:ks(i.images||[])}))),{quizzes:n,questionCount:n.length,hasQuestions:n.length>0};default:return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[]),hasContent:!!(r.content||t.content)}}}function pG(t,e){return Array.isArray(t)?t.map((s,r)=>({...s,id:s.id||`step_${e}_${r}`,type:s.type||"explanation",title:s.title||"",description:s.description||"",content:s.content||"",images:ks(s.images||[]),data:hG(s)})):[]}function zC(t,e){return Array.isArray(t)?t.map((s,r)=>{var n;return{...s,id:s.id||`step_${e}_${r}`,type:s.type||"explanation",title:s.title||"",description:s.description||"",content:s.content||"",images:ks(s.images||[]),data:fG(s),hasContent:!!(s.content||(n=s.data)!=null&&n.content),hasImages:(s.images||[]).length>0,isInteractive:["quiz","practice"].includes(s.type)}}):[]}function mG(t){return Array.isArray(t)?t.map((e,s)=>{let r=e.steps||[];return(!r||r.length===0)&&e.description&&(r=[{type:"explanation",title:" ",content:e.description.replace(/\n/g,"<br />"),data:{content:e.description.replace(/\n/g,"<br />")}}]),{...e,id:e._id||e.id||`lesson_${s}`,title:e.title||` ${s+1}`,description:e.description||"",duration:e.duration||"30 ",order:e.order||s,steps:pG(r,s)}}):[]}function WC(t){const e={"  ":"https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=600&h=400&fit=crop"," ":"https://images.unsplash.com/photo-1626785774573-4b799315345d?w=600&h=400&fit=crop","Web-":"https://images.unsplash.com/photo-1547658719-da2b51169166?w=600&h=400&fit=crop"," ":"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=600&h=400&fit=crop"," ":"https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1609921212029-bb5a28e60960?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop",default:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=600&h=400&fit=crop"};return e[t]||e.default}function GC(){return"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"}function gG(t){return typeof t=="string"?t:t!=null&&t.hours?`${t.hours} `:"10 "}function KC(t){if(typeof t=="string"){const e=t.match(/(\d+)/);return e?parseInt(e[1]):30}return 30}function yG(t){if(typeof t=="string"){const e=t.match(/(\d+)/);return e?parseInt(e[1]):10}return t!=null&&t.hours?t.hours:10}function vG(t){if(!t)return!1;const e=new Date(t),s=new Date(Date.now()-7*24*60*60*1e3);return e>s}function _G(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>r.type==="quiz"||r.type==="practice")}):!1}function bG(t){return Array.isArray(t)?t.reduce((e,s)=>{var r;return e+(((r=s.steps)==null?void 0:r.length)||0)},0):0}function wG(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>r.type==="quiz")}):!1}function SG(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>(r.images||[]).length>0)}):!1}function EG(t){return t.learningOutcomes&&t.learningOutcomes.length>0?t.learningOutcomes:{"  ":["  ","    "," ","  "],"Web-":["HTML, CSS  JavaScript"," "," ","  API"]," ":["   ","    ","  ","  "]}[t.category]||["    ","   ","  ","  "]}function TG(t){return t.curriculum&&t.curriculum.length>0?t.curriculum.map(e=>e.title):["  "," "," "," "," "]}function kG(t){return Array.isArray(t)?t.map((e,s)=>{var r,n;return{id:((r=e._id)==null?void 0:r.toString())||`lesson_${s}`,_id:((n=e._id)==null?void 0:n.toString())||`lesson_${s}`,title:e.title,lessonName:e.title,description:e.description,duration:e.duration||"30 ",order:e.order||s,steps:zC(e.steps||[],s),stepCount:(e.steps||[]).length,hasQuiz:(e.steps||[]).some(i=>i.type==="quiz"),hasImages:(e.steps||[]).some(i=>(i.images||[]).length>0),estimatedMinutes:KC(e.duration)}}):[]}function IG(t){return Array.isArray(t)?t.map((e,s)=>({...e,id:e._id||e.id||`lesson_${s}`,_id:e._id||e.id||`lesson_${s}`,title:e.title||` ${s+1}`,description:e.description||"",duration:e.duration||"30 ",order:e.order!==void 0?e.order:s,steps:zC(e.steps||[],s),stepCount:(e.steps||[]).length,hasQuiz:(e.steps||[]).some(r=>r.type==="quiz"),hasImages:(e.steps||[]).some(r=>{var n;return((n=r.images)==null?void 0:n.length)>0}),estimatedMinutes:KC(e.duration)})):[]}const CG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&t[i]!==""&&e.append(i,t[i])});const s=e.toString(),r=s?`updated-courses?${s}`:"updated-courses",{data:n}=await ae.get(r);if(n.success)return{success:!0,courses:(n.courses||[]).map(o=>{var l;return{...o,id:o._id||o.id,_id:o._id||o.id,thumbnail:$n(o.thumbnail),instructor:{...o.instructor,avatar:$n((l=o.instructor)==null?void 0:l.avatar)},curriculum:o.curriculum||[]}}),categories:n.categories||[],difficulties:n.difficulties||[]};throw new Error(n.error||"Failed to fetch courses")}catch(e){return{success:!1,courses:[],error:e.message||"Network error"}}},YC=async t=>{var e,s;try{const{data:r}=await ae.get(`updated-courses/${t}`);if(r&&r.success&&r.course)return{success:!0,data:{...r.course,id:r.course._id||r.course.id,_id:r.course._id||r.course.id,thumbnail:$n(r.course.thumbnail),instructor:{...r.course.instructor,avatar:$n((e=r.course.instructor)==null?void 0:e.avatar)},curriculum:mG(r.course.curriculum||[])}};throw new Error("Course not found or invalid response")}catch(r){return((s=r.response)==null?void 0:s.status)===404?{success:!1,error:"Course not found",status:404}:{success:!1,error:r.message||"Failed to fetch course"}}},QC=async t=>{try{const{data:e}=await ae.get(`updated-courses/${t}?format=structured`);if(e&&e.success&&e.course)return{success:!0,data:e.course,format:"structured"};throw new Error("Structured course not found")}catch(e){return{success:!1,error:e.message||"Failed to fetch structured course"}}},AG=async(t={},e="standard")=>{var s;try{const r=new URLSearchParams;Object.keys(t).forEach(l=>{t[l]!==void 0&&t[l]!==null&&t[l]!==""&&r.append(l,t[l])}),e==="structured"&&r.append("format","structured");const n=r.toString(),i=n?`updated-courses?${n}`:"updated-courses",{data:o}=await ae.get(i);if(o.success){const l=(o.courses||[]).map(c=>{var u,h,f;return{...c,id:c._id||c.id,_id:c._id||c.id,thumbnail:$n(c.thumbnail)||WC(c.category),instructor:{...c.instructor,name:((u=c.instructor)==null?void 0:u.name)||"ACED Instructor",avatar:$n((h=c.instructor)==null?void 0:h.avatar)||GC(),bio:((f=c.instructor)==null?void 0:f.bio)||"Experienced instructor"},duration:c.duration||gG(c.estimatedTime),level:c.level||c.difficulty||"Beginner",category:c.category||"General",isPremium:!!(c.isPremium||c.premium||c.type==="premium"),curriculum:c.curriculum||[],structuredData:c.structuredData||null,format:o.format||"standard",studentsCount:c.studentsCount||0,rating:c.rating||0,tags:c.tags||[],requirements:c.requirements||[],learningOutcomes:c.learningOutcomes||[],isNew:vG(c.createdAt),hasHomework:_G(c.curriculum),estimatedHours:yG(c.duration||c.estimatedTime)}});return{success:!0,courses:l,format:o.format||"standard",categories:o.categories||[],difficulties:o.difficulties||[],pagination:o.pagination||{},total:((s=o.pagination)==null?void 0:s.total)||l.length}}else throw new Error(o.error||"Failed to fetch courses")}catch(r){return{success:!1,courses:[],error:r.message||"Network error",format:e}}},PG=async t=>{var e,s,r;try{let n=await QC(t);if(n.success||(n=await YC(t)),n&&n.success&&n.data){const i=n.data;return{success:!0,data:{...i,id:i._id||i.id,_id:i._id||i.id,thumbnail:$n(i.thumbnail)||WC(i.category),instructor:{...i.instructor,name:((e=i.instructor)==null?void 0:e.name)||"ACED Instructor",avatar:$n((s=i.instructor)==null?void 0:s.avatar)||GC(),bio:((r=i.instructor)==null?void 0:r.bio)||"Experienced instructor"},curriculum:IG(i.curriculum||[]),lessons:kG(i.lessons||i.curriculum||[]),format:n.format||"standard",structuredData:n.format==="structured"?i:null,totalLessons:(i.curriculum||i.lessons||[]).length,totalSteps:bG(i.curriculum||i.lessons||[]),hasQuizzes:wG(i.curriculum||i.lessons||[]),hasImages:SG(i.curriculum||i.lessons||[]),skills:EG(i),modules:TG(i),isBookmarked:!1,userProgress:null},format:n.format||"standard"}}else throw new Error("Course not found or invalid response")}catch(n){return{success:!1,error:n.message||"Failed to fetch course"}}},xG=async t=>{try{try{const{data:e}=await ae.get(`updated-courses/${t}/lessons`);if(e&&e.success)return{success:!0,data:(e.lessons||e.data||[]).map((r,n)=>({id:r._id||r.id||`lesson_${n}`,_id:r._id||r.id||`lesson_${n}`,title:r.title||r.lessonName||` ${n+1}`,lessonName:r.title||r.lessonName||` ${n+1}`,description:r.description||"",duration:r.duration||"30 ",order:r.order||n,topicId:t,subject:r.subject||"General",steps:r.steps||[]})),source:"course-lessons-endpoint"}}catch{}try{const{data:e}=await ae.get(`updated-courses/${t}`);if(e&&e.success&&e.course){const s=e.course;return{success:!0,data:(s.curriculum||[]).map((n,i)=>({id:n._id||n.id||`lesson_${i}`,_id:n._id||n.id||`lesson_${i}`,title:n.title,lessonName:n.title,description:n.description,duration:n.duration||"30 ",order:n.order||i,topicId:s.id||s._id,subject:s.category||"General",steps:n.steps||[]})),source:"course-curriculum"}}}catch{}return{success:!0,data:[],source:"empty-result"}}catch(e){return{success:!1,data:[],error:e.message||"Failed to fetch course content"}}},LG=async(t,e,s)=>{var r;try{const n=await((r=pe.currentUser)==null?void 0:r.getIdToken());if(!n)return{success:!0,bookmarked:s,message:"Bookmark toggled (demo mode)"};const i={Authorization:`Bearer ${n}`};return{success:!0,data:(await ae({method:s?"POST":"DELETE",url:`updated-courses/${e}/bookmark`,headers:i})).data,bookmarked:s}}catch{return{success:!0,bookmarked:s,message:"Bookmark toggled (offline mode)"}}},RG=async()=>{try{const{data:t}=await ae.get("subjects");return Array.isArray(t)?t:[]}catch{return[]}},NG=async()=>{try{const{data:t}=await ae.get("topics/grouped");if(t.success)return{success:!0,data:t.data,mode:"school"};throw new Error("Failed to fetch grouped topics")}catch(t){return{success:!1,data:{},error:t.message}}},OG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&t[i]!==""&&e.append(i,t[i])});const s=e.toString(),r=s?`topics/as-courses?${s}`:"topics/as-courses",{data:n}=await ae.get(r);if(n.success)return{success:!0,courses:n.data,total:n.total,mode:"study-centre"};throw new Error("Failed to fetch courses")}catch(e){return{success:!1,courses:[],error:e.message}}},XC=Object.freeze(Object.defineProperty({__proto__:null,getCourseById:YC,getCourseContent:xG,getCourseStructured:QC,getCourseStructuredEnhanced:PG,getSubjects:RG,getTopicsAsCourses:OG,getTopicsGrouped:NG,getUpdatedCourses:CG,getUpdatedCoursesWithFormat:AG,toggleBookmark:LG},Symbol.toStringTag,{value:"Module"})),DG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&e.append(i,t[i])});const s=e.toString(),r=s?`topics?${s}`:"topics",{data:n}=await ae.get(r);return n&&n.success?{success:!0,data:n.data||n.topics||[]}:Array.isArray(n)?{success:!0,data:n}:{success:!0,data:[]}}catch(e){return{success:!1,data:[],error:e.message}}},MG=async t=>{var e,s,r,n,i,o,l,c;try{if(!t||typeof t!="string")return{success:!1,error:"Invalid topic ID provided",code:400,details:"Topic ID must be a non-empty string"};try{const{data:u}=await ae.get(`topics/${t}`);if(u&&u.success===!0&&u.data)return{success:!0,data:u.data,message:u.message,source:"topics-endpoint"};if(u&&u.exists===!0&&u.data)return{success:!0,exists:!0,data:u.data,source:"topics-endpoint"};if(u&&(u._id||u.name))return{success:!0,data:u,source:"topics-endpoint"}}catch(u){if(((e=u.response)==null?void 0:e.status)!==404)throw u}try{const{data:u}=await ae.get("lessons"),f=(Array.isArray(u)?u:[]).filter(D=>{if(!D)return!1;const E=D.topicId;return typeof E=="string"?E===t:typeof E=="object"&&E!==null?(E._id||E.id)===t:!1});if(f.length===0)return{success:!1,error:"Topic not found",code:404,details:`No lessons found for topic ID: ${t}`,source:"lessons-fallback"};const m=f[0],v=(D=>{if(!D)return" ";const E=localStorage.getItem("lang")||"en";if(typeof D.topic=="string"&&D.topic.trim())return D.topic.trim();if(D.translations&&D.translations[E]&&typeof D.translations[E].topic=="string"&&D.translations[E].topic.trim())return D.translations[E].topic.trim();if(D.topic&&typeof D.topic=="object"){if(typeof D.topic[E]=="string"&&D.topic[E].trim())return D.topic[E].trim();if(typeof D.topic.en=="string"&&D.topic.en.trim())return D.topic.en.trim()}return typeof D.lessonName=="string"&&D.lessonName.trim()?`: ${D.lessonName.trim()}`:typeof D.title=="string"&&D.title.trim()?`: ${D.title.trim()}`:" "})(m),I=f.length,C=I*10;return{success:!0,data:{_id:t,id:t,name:v,topicName:v,description:`   "${v}"  ${I} `,topicDescription:`   "${v}"  ${I} `,subject:m.subject&&typeof m.subject=="string"?m.subject:"",level:m.level&&typeof m.level=="string"?m.level:"",lessonCount:I,totalTime:C,lessons:f,type:m.type&&typeof m.type=="string"?m.type:"free",isActive:!0,createdAt:m.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),metadata:{source:"constructed-from-lessons",constructedAt:new Date().toISOString(),basedOnLessons:f.length,firstLessonId:m._id||m.id}},source:"lessons-fallback",message:`Topic constructed from ${I} lessons`}}catch(u){return{success:!1,error:"Topic not found and lessons fallback failed",code:404,details:`Could not find topic ${t} in topics or lessons`,lessonsError:u.message,source:"fallback-failed"}}}catch(u){return((s=u.response)==null?void 0:s.status)===404?{success:!1,error:"Topic not found",code:404,details:"The requested topic does not exist"}:((r=u.response)==null?void 0:r.status)===403?{success:!1,error:"Access denied",code:403,details:"You do not have permission to access this topic"}:u.code==="NETWORK_ERROR"||u.message==="Network Error"?{success:!1,error:"Network error",details:"Unable to connect to the server"}:u.code==="ECONNABORTED"?{success:!1,error:"Request timeout",details:"The request took too long to complete"}:((n=u.response)==null?void 0:n.status)>=500?{success:!1,error:"Server error",code:u.response.status,details:"Internal server error occurred"}:{success:!1,error:((o=(i=u.response)==null?void 0:i.data)==null?void 0:o.message)||u.message||"Failed to fetch topic",code:(l=u.response)==null?void 0:l.status,details:((c=u.response)==null?void 0:c.data)||u}}},$G=async t=>{try{if(!t)throw new Error("Topic ID is required");try{const{data:e}=await ae.get(`lessons/topic/${t}?includeStats=true&sortBy=createdAt&order=asc`);if(e&&e.success)return{success:!0,data:e.lessons||[],stats:e.stats,source:"enhanced-endpoint"}}catch{}try{const{data:e}=await ae.get(`topics/${t}/lessons`);if(e&&e.success)return{success:!0,data:e.data||e.lessons||[],source:"legacy-endpoint"};if(Array.isArray(e))return{success:!0,data:e,source:"legacy-direct"}}catch{}try{const{data:e}=await ae.get("lessons");return{success:!0,data:(Array.isArray(e)?e:[]).filter(n=>{if(!n)return!1;const i=n.topicId;return typeof i=="string"?i===t:typeof i=="object"&&i!==null?(i._id||i.id)===t:n.topic===t}),source:"fallback-filter"}}catch{}return{success:!0,data:[],message:"No lessons found for this topic",source:"empty-result"}}catch(e){return{success:!1,data:[],error:e.message||"Failed to fetch lessons for topic",details:e}}},UG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&e.append(i,t[i])});const s=e.toString(),r=s?`lessons?${s}`:"lessons",{data:n}=await ae.get(r);return{success:!0,data:Array.isArray(n)?n:[]}}catch(e){return{success:!1,data:[],error:e.message}}},FG=async t=>{var e,s,r;try{const{data:n}=await ae.get(`lessons/${t}`);if(n&&n.success)return{success:!0,data:n.lesson,topic:n.topic,stats:n.stats};if(n&&(n._id||n.lessonName))return{success:!0,data:n};throw new Error("Invalid lesson data structure")}catch(n){throw((e=n.response)==null?void 0:e.status)===404?new Error("Lesson not found"):((s=n.response)==null?void 0:s.status)===403?new Error("Access denied to this lesson"):((r=n.response)==null?void 0:r.status)===401?new Error("Authentication required"):n}},JC=Object.freeze(Object.defineProperty({__proto__:null,getAllLessons:UG,getLessonById:FG,getLessonsByTopic:$G,getTopicById:MG,getTopics:DG},Symbol.toStringTag,{value:"Module"})),VG=async(t,e,s)=>{let r=[],n=[],i=[];try{const{data:c}=await ae.get("homeworks",{headers:s});r=c.data||c||[]}catch{}try{const{data:c}=await ae.get("lessons",{headers:s});n=(c.data||c||[]).filter(h=>h.homework&&Array.isArray(h.homework)&&h.homework.length>0)}catch{}try{const c=[`users/${e}/progress`,`progress?userId=${e}`,`user-progress/${e}`];for(const u of c)try{const{data:h}=await ae.get(u,{headers:s});if(i=h.data||h||[],Array.isArray(i))break}catch{continue}}catch{}const o=[];r.forEach(c=>{const u=i.find(h=>h.homeworkId===c._id||h.metadata&&h.metadata.standaloneHomeworkId===c._id);o.push({...c,type:"standalone",hasProgress:!!u,completed:(u==null?void 0:u.completed)||!1,score:(u==null?void 0:u.score)||0,stars:(u==null?void 0:u.stars)||0,userProgress:u,exerciseCount:(c.exercises||[]).length,metadata:{type:"standalone",homeworkTitle:c.title,hasUserProgress:!!u,progressId:u==null?void 0:u._id,source:"fallback-standalone"}})}),n.forEach(c=>{const u=i.find(h=>h.lessonId===c._id||h.metadata&&h.metadata.lessonId===c._id);o.push({lessonId:c._id,lessonName:c.lessonName||c.title,title:` : ${c.lessonName||c.title}`,subject:c.subject,exercises:c.homework||[],exerciseCount:(c.homework||[]).length,type:"lesson",hasProgress:!!u,completed:(u==null?void 0:u.completed)||!1,score:(u==null?void 0:u.score)||0,stars:(u==null?void 0:u.stars)||0,userProgress:u,metadata:{type:"lesson",lessonTitle:c.lessonName||c.title,hasUserProgress:!!u,progressId:u==null?void 0:u._id,source:"fallback-lesson"}})});const l=o.filter((c,u,h)=>u===h.findIndex(f=>f._id&&f._id===c._id||f.lessonId&&f.lessonId===c.lessonId));return l.sort((c,u)=>{const h=v=>v.hasProgress?v.completed?"completed":"in-progress":"pending",f={"in-progress":0,pending:1,completed:2},m=h(c),g=h(u);return f[m]!==f[g]?f[m]-f[g]:(c.title||c.lessonName||"").localeCompare(u.title||u.lessonName||"")}),l},qG=async t=>{var e,s;try{const r=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`,"Content-Type":"application/json"};try{const{data:l}=await ae.get(`homeworks/user/${t}`,{headers:n});if(l&&l.success&&Array.isArray(l.data))return{success:!0,data:l.data,stats:l.stats,source:"enhanced-endpoint"}}catch(l){if(((s=l.response)==null?void 0:s.status)>=500)throw new Error("     ")}const i=[`users/${t}/homeworks`,`homeworks/users/${t}`,`user/${t}/homework`];for(const l of i)try{const{data:c}=await ae.get(l,{headers:n});if(c&&c.success!==!1){const u=c.data||c;if(Array.isArray(u)&&u.length>=0)return{success:!0,data:u,stats:c.stats,source:`alternative-${l}`}}}catch{continue}const o=await VG(r,t,n);return o.length>0?{success:!0,data:o,source:"fallback-aggregation"}:{success:!0,data:[],source:"empty-result"}}catch(r){return{success:!1,data:[],error:r.message||"   "}}},BG=async(t,e)=>{var s;try{const r=await((s=pe.currentUser)==null?void 0:s.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`,"Content-Type":"application/json"};try{const{data:i}=await ae.get(`homeworks/user/${t}/lesson/${e}`,{headers:n});if(i&&i.success)return{success:!0,data:i.data,message:i.message}}catch{}try{const{data:i}=await ae.get(`lessons/${e}`,{headers:n});if(!i.homework||!Array.isArray(i.homework)||i.homework.length===0)return{success:!1,error:"     "};let o=null;try{const l=[`users/${t}/progress/lesson/${e}`,`progress?userId=${t}&lessonId=${e}`,`user-progress/lesson/${e}?userId=${t}`];for(const c of l)try{const{data:u}=await ae.get(c,{headers:n});o=u.data||u;break}catch{continue}}catch{}return{success:!0,data:{homework:o,questions:i.homework,lessonInfo:{id:i._id,name:i.lessonName||i.title,subject:i.subject,instructions:i.homeworkInstructions||""}}}}catch{throw new Error("    ")}}catch(r){throw r}},jG=async(t,e)=>{var s,r;try{const n=await((s=pe.currentUser)==null?void 0:s.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"};try{const{data:o}=await ae.get(`homeworks/user/${t}/homework/${e}`,{headers:i});if(o&&o.success)return{success:!0,data:o.data,message:o.message}}catch{}try{const{data:o}=await ae.get(`homeworks/${e}`,{headers:i});if(!o||!o.exercises&&!((r=o.data)!=null&&r.exercises))throw new Error("    ");const l=o.data||o;let c=null;try{const u=[`users/${t}/homework/${e}/progress`,`progress?userId=${t}&homeworkId=${e}`,`user-progress/homework/${e}?userId=${t}`];for(const h of u)try{const{data:f}=await ae.get(h,{headers:i});c=f.data||f;break}catch{continue}}catch{}return{success:!0,data:{homework:l,userProgress:c,questions:l.exercises||[]}}}catch{throw new Error("   ")}}catch(n){throw n}},HG=async(t,e,s)=>{var r;try{const n=await((r=pe.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={lessonId:e,answers:s,completed:!1},l=[`homeworks/user/${t}/save`,`users/${t}/homework/save`,"homework/save"];for(const c of l)try{const{data:u}=await ae.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All homework save endpoints failed")}catch(n){throw n}},zG=async(t,e,s)=>{var r;try{const n=await((r=pe.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={answers:s},l=[`homeworks/user/${t}/lesson/${e}/submit`,`users/${t}/homework/lesson/${e}/submit`,`homework/lesson/${e}/submit`];for(const c of l)try{const{data:u}=await ae.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All homework submit endpoints failed")}catch(n){throw n}},WG=async(t,e,s)=>{var r;try{const n=await((r=pe.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={answers:s},l=[`homeworks/user/${t}/homework/${e}/save`,`users/${t}/homework/${e}/save`,`homework/${e}/save`];for(const c of l)try{const{data:u}=await ae.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All standalone homework save endpoints failed")}catch(n){throw n}},GG=async(t,e,s)=>{var r;try{const n=await((r=pe.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={answers:s},l=[`homeworks/user/${t}/homework/${e}/submit`,`users/${t}/homework/${e}/submit`,`homework/${e}/submit`];for(const c of l)try{const{data:u}=await ae.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All standalone homework submit endpoints failed")}catch(n){throw n}},ZC=Object.freeze(Object.defineProperty({__proto__:null,getAllHomeworks:qG,getHomeworkByLesson:BG,getStandaloneHomework:jG,saveHomework:HG,saveStandaloneHomework:WG,submitHomework:zG,submitStandaloneHomework:GG},Symbol.toStringTag,{value:"Module"})),KG=async(t,e)=>{var s;try{const r=await((s=pe.currentUser)==null?void 0:s.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`,"Content-Type":"application/json"},i={userId:t,lessonId:e.lessonId,topicId:e.topicId||e.lessonId,completedSteps:e.completedSteps||[],progressPercent:e.progressPercent||0,completed:e.completed||!1,mistakes:e.mistakes||0,stars:e.stars||0,points:e.points||0,duration:e.duration||e.durationSeconds||0,hintsUsed:e.hintsUsed||0,submittedHomework:e.submittedHomework||!1,homeworkScore:e.homeworkScore||0,medal:e.medal||"none",...e},o=[`users/${t}/progress/save`,"progress",`users/${t}/lesson/${e.lessonId}`,"user-progress"];for(const l of o)try{const c=l.includes("/progress")&&!l.includes("users")?i:{...i,userId:void 0},{data:u}=await ae.post(l,c,{headers:n,timeout:15e3});if(u&&u.success!==!1)return{success:!0,data:u.data||u,endpoint:l}}catch{continue}throw new Error("All progress save endpoints failed")}catch(r){throw r}},YG=async(t,e)=>{var s,r;try{const n=await((s=pe.currentUser)==null?void 0:s.getIdToken());if(!n)return{success:!1,data:null};const i={Authorization:`Bearer ${n}`},o=[`progress/lesson/${e}/user/${t}`,`user-progress/user/${t}/lesson/${e}`,`user/${t}/lesson/${e}`,`progress?userId=${t}&lessonId=${e}`,`api/progress/${t}/${e}`,`api/user-progress/${t}/${e}`];for(const l of o)try{const{data:c}=await ae.get(l,{headers:i});if(c&&typeof c=="object"){const u=c.data||c;if(u&&c.success!==!1)return{success:!0,data:u}}}catch(c){if(((r=c.response)==null?void 0:r.status)===404)continue;continue}return{success:!0,data:null}}catch(n){return{success:!1,data:null,error:n.message}}},QG=async t=>{var e,s;try{const r=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`},i=[`users/${t}/progress`,`user-progress/user/${t}`,`progress?userId=${t}`];for(const o of i)try{const{data:l}=await ae.get(o,{headers:n});if(l&&typeof l=="object"){const c=l.data||l;if(c&&l.success!==!1)return{success:!0,data:c}}}catch(l){if(((s=l.response)==null?void 0:s.status)===404)continue;continue}return{success:!0,data:[]}}catch(r){return{success:!1,data:[],error:r.message}}},XG=async t=>{var e;try{const s=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ae.get(`users/${t}/progress`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},JG=async(t,e)=>{var s;try{const r=await((s=pe.currentUser)==null?void 0:s.getIdToken());if(!r)throw new Error("No authentication token");const{data:n}=await ae.get(`users/${t}/progress/lesson/${e}`,{headers:{Authorization:`Bearer ${r}`}});return n}catch(r){throw r}},ZG=async t=>{var e;try{const s=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ae.get(`users/${t}/topics-progress`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},eK=async t=>{var e;try{const s=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ae.get(`users/${t}/points`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},tK=async t=>{var e;try{const s=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`};try{const{data:n}=await ae.get(`users/${t}/analytics`,{headers:r});return n}catch{try{const{data:i}=await ae.get(`analytics/${t}`,{headers:r});return i}catch(i){throw i}}}catch(s){throw s}},sK=async t=>{var e;try{const s=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ae.get(`users/${t}/stats`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},rK=async t=>{var e;try{const s=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ae.get(`users/${t}/achievements`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},nK=async t=>{var e;try{const s=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ae.get(`users/${t}/recommendations`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},eA=Object.freeze(Object.defineProperty({__proto__:null,getLessonProgress:YG,getLessonProgressStats:JG,getRecommendations:nK,getTopicsProgress:ZG,getUserAchievements:rK,getUserAnalytics:tK,getUserPoints:eK,getUserProgress:QG,getUserProgressStats:XG,getUserStats:sK,submitProgress:KG},Symbol.toStringTag,{value:"Module"})),ht=async()=>{try{const t=pe.currentUser;if(t)return await t.getIdToken(!0);const e=localStorage.getItem("token")||localStorage.getItem("authToken");return e&&e.length>20?e:null}catch(t){return console.error("[user.js] Error getting auth token:",t),null}},iv=t=>{if(t)return t;const e=pe.currentUser;return e!=null&&e.uid?e.uid:localStorage.getItem("userId")||localStorage.getItem("firebaseUserId")||null},tA=async t=>{console.log(" [user.js] getUserInfo called for:",t);try{const e=await ht();if(!e)throw console.error(" [user.js] No authentication token available"),new Error("No authentication token available");const s=iv(t);if(!s)throw console.error(" [user.js] No user ID available"),new Error("No user ID available");const r={Authorization:`Bearer ${e}`};console.log(" [user.js] Fetching user from server:",s);const{data:n}=await ae.get(`users/${s}`,{headers:r});console.log(" [user.js] Server response:",n);const i=n.user||n.data||n;return{success:!0,data:i,user:i,subscriptionPlan:i.subscriptionPlan||"free",subscriptionExpiryDate:i.subscriptionExpiryDate,serverFetch:!0,fetchTime:new Date().toISOString()}}catch(e){throw console.error(" [user.js] getUserInfo error:",e),e}},sA=async t=>{console.log(" [user.js] getUserStatus called for:",t);try{const e=await ht();if(!e)return console.error(" [user.js] No authentication token"),{success:!1,error:"No authentication token",status:null,serverFetch:!1};const s=iv(t);if(!s)return console.error(" [user.js] No user ID"),{success:!1,error:"No user ID",status:null,serverFetch:!1};const r={Authorization:`Bearer ${e}`},n=[`users/${s}`,`users/${s}/status`,`users/${s}/subscription-status`];for(const i of n)try{console.log(` [user.js] Trying endpoint: ${i}`);const{data:o}=await ae.get(i,{headers:r});if(o&&o.success!==!1){const l=o.user||o.data||o,c=l.subscriptionPlan||l.userStatus||l.plan||o.status||"free";return console.log(" [user.js] Got status from server:",c),{success:!0,data:l,status:c,subscriptionPlan:c,subscriptionExpiryDate:l.subscriptionExpiryDate||l.subscriptionExpiry,subscriptionSource:l.subscriptionSource,serverFetch:!0,endpoint:i,fetchTime:new Date().toISOString()}}}catch(o){console.warn(` [user.js] Endpoint ${i} failed:`,o.message);continue}return console.error(" [user.js] All endpoints failed"),{success:!1,error:"Could not fetch status from server",status:null,serverFetch:!1}}catch(e){return console.error(" [user.js] getUserStatus error:",e),{success:!1,error:e.message,status:null,serverFetch:!1}}},rA=async t=>{console.log(" [user.js] fetchSubscriptionFromServer called for:",t);try{const e=await ht();if(!e)throw new Error("No authentication token");const s=iv(t);if(!s)throw new Error("No user ID");const r={Authorization:`Bearer ${e}`},{data:n}=await ae.get(`users/${s}`,{headers:r}),i=n.user||n.data||n,o={plan:i.subscriptionPlan||"free",status:i.subscriptionPlan&&i.subscriptionPlan!=="free"?"active":"inactive",expiryDate:i.subscriptionExpiryDate||null,source:i.subscriptionSource||null,activatedAt:i.subscriptionActivatedAt||null,duration:i.subscriptionDuration||null,serverFetch:!0,fetchTime:new Date().toISOString()};return console.log(" [user.js] Subscription data from server:",o),{success:!0,subscription:o,user:i}}catch(e){return console.error(" [user.js] fetchSubscriptionFromServer error:",e),{success:!1,error:e.message,subscription:null}}},nA=async t=>{console.log(" [user.js] saveUser called");try{const{data:e}=await ae.post("users/save",t);return{success:!0,data:e,user:e.user||e}}catch(e){throw console.error(" [user.js] saveUser error:",e),e}},iA=async(t,e)=>{try{const s=await ht();if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`},{data:n}=await ae.put(`users/${t}/profile`,e,{headers:r});return n}catch(s){throw console.error(" [user.js] updateUserProfile error:",s),s}},oA=async(t,e=!1)=>{var s,r,n;try{const i=await ht();if(!i)throw new Error("No authentication token");const o=`users/${t}/study-list${e?`?t=${Date.now()}`:""}`,{data:l}=await ae.get(o,{headers:{Authorization:`Bearer ${i}`}});return{success:!0,data:l.data||l||[],message:l.message}}catch(i){return((s=i.response)==null?void 0:s.status)===404?{success:!0,data:[],message:"Study list not found, returning empty list"}:{success:!1,data:[],error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},aA=async(t,e)=>{var s,r;try{const n=await ht();if(!n)throw new Error("No token");const i={topicId:e.topicId||e._id,topic:e.topic||e.topicName||e.name,subject:e.subject||"General",level:e.level||1,lessonCount:e.lessonCount||0,totalTime:e.totalTime||10,type:e.type||"free"};return{success:!0,data:(await ae.post(`users/${t}/study-list`,i,{headers:{Authorization:`Bearer ${n}`}})).data}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},lA=async(t,e)=>{var s,r;try{const n=await ht();return await ae.delete(`users/${t}/study-list/${e}`,{headers:{Authorization:`Bearer ${n}`}}),{success:!0}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},cA=async t=>{try{const e=await ht(),{data:s}=await ae.post(`users/${t}/study-list/cleanup`,{},{headers:{Authorization:`Bearer ${e}`}});return s}catch(e){throw e}},uA=async t=>{try{const e=await ht();if(!e)throw new Error("No authentication token");const{data:s}=await ae.get(`users/${t}/goals`,{headers:{Authorization:`Bearer ${e}`}});return s}catch(e){throw e}},dA=async(t,e)=>{try{const s=await ht();if(!s)throw new Error("No authentication token");const{data:r}=await ae.post(`users/${t}/goals`,e,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},hA=async(t,e,s)=>{try{const r=await ht();if(!r)throw new Error("No authentication token");const{data:n}=await ae.put(`users/${t}/goals/${e}`,s,{headers:{Authorization:`Bearer ${r}`}});return n}catch(r){throw r}},fA=async(t,e)=>{try{const s=await ht();if(!s)throw new Error("No authentication token");const{data:r}=await ae.delete(`users/${t}/goals/${e}`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},pA=async(t,e)=>{try{const s=await ht();if(!s)throw new Error("No authentication token");const{data:r}=await ae.post(`users/${t}/diary`,e,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},mA=async t=>{try{const e=await ht();if(!e)throw new Error("No authentication token");const{data:s}=await ae.get(`users/${t}/diary`,{headers:{Authorization:`Bearer ${e}`}});return s}catch(e){throw e}},gA=async t=>{try{const e=await ht();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ae.get(`progress/learning-profile/${t}`,{headers:s});return r}catch(e){throw e}},yA=async(t,e)=>{try{const s=await ht();if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`},{data:n}=await ae.post(`progress/learning-profile/${t}/update`,e,{headers:r});return n}catch(s){throw s}},vA=async t=>{try{const e=await ht();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ae.get(`progress/learning-profile/${t}/recommendation`,{headers:s});return r}catch(e){throw e}},_A=async t=>{try{const e=await ht();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ae.get(`progress/rewards/${t}`,{headers:s});return r}catch(e){throw e}},bA=async(t,e)=>{try{const s=await ht();if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`},{data:n}=await ae.post(`progress/rewards/${t}/check`,{currentStep:e},{headers:r});return n}catch(s){throw s}},wA=async t=>{try{const e=await ht();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ae.post(`progress/rewards/${t}/streak`,{},{headers:s});return r}catch(e){throw e}},SA=async t=>{var e,s;try{const r=await ht();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ae.get(`learning-mode/${t}`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},ov=async(t,e,s="")=>{var r,n;try{const i=await ht();if(!i)throw new Error("No authentication token");const o={Authorization:`Bearer ${i}`},{data:l}=await ae.post(`learning-mode/${t}/switch`,{newMode:e,reason:s},{headers:o});return{success:!0,data:l}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},EA=async t=>{var e,s;try{const r=await ht();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ae.post(`learning-mode/placement-test/${t}/start`,{},{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},TA=async(t,e,s)=>{var r,n;try{const i=await ht();if(!i)throw new Error("No authentication token");const o={Authorization:`Bearer ${i}`},{data:l}=await ae.post(`learning-mode/placement-test/${t}/answer`,{answer:e,timeSpent:s},{headers:o});return{success:!0,data:l}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},kA=async t=>{var e,s;try{const r=await ht();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ae.get(`learning-mode/placement-test/${t}/results`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},IA=async t=>{var e,s;try{const r=await ht();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ae.get(`school/${t}/curriculum`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},CA=async(t,e)=>{var s,r;try{const n=await ht();if(!n)throw new Error("No authentication token");const i={Authorization:`Bearer ${n}`},{data:o}=await ae.post(`school/${t}/complete-level`,e,{headers:i});return{success:!0,data:o}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},AA=async(t,e,s="")=>{var r,n;try{const i=await ht();if(!i)throw new Error("No authentication token");const o={Authorization:`Bearer ${i}`},{data:l}=await ae.post(`study-centre/${t}/bookmark`,{courseId:e,notes:s},{headers:o});return{success:!0,data:l}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},PA=async(t,e)=>{var s,r;try{const n=await ht();if(!n)throw new Error("No authentication token");const i={Authorization:`Bearer ${n}`},{data:o}=await ae.post(`study-centre/${t}/create-path`,e,{headers:i});return{success:!0,data:o}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},xA=async t=>{var e,s;try{const r=await ht();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ae.get(`users/${t}/accessible-content`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},LA=async(t,e)=>{var s,r;try{const n=await ht();if(!n)throw new Error("No authentication token");const i={Authorization:`Bearer ${n}`},{data:o}=await ae.get(`users/${t}/lessons/${e}/access`,{headers:i});return{success:!0,canAccess:o.canAccess,reason:o.reason}}catch(n){return{success:!1,canAccess:!1,reason:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},iK={getUserInfo:tA,getUserStatus:sA,fetchSubscriptionFromServer:rA,saveUser:nA,updateUserProfile:iA,getUserStudyList:oA,addToStudyList:aA,removeFromStudyList:lA,cleanupStudyList:cA,getUserGoals:uA,createUserGoal:dA,updateUserGoal:hA,deleteUserGoal:fA,saveDiaryEntry:pA,getDiaryEntries:mA,getLearningProfile:gA,updateLearningProfile:yA,getPersonalizedRecommendations:vA,getUserRewards:_A,checkReward:bA,updateStreak:wA,getLearningMode:SA,switchLearningMode:ov,startPlacementTest:EA,submitPlacementTestAnswer:TA,getPlacementTestResults:kA,getSchoolCurriculum:IA,completeLevel:CA,addStudyCentreBookmark:AA,createPersonalPath:PA,getAccessibleContent:xA,checkLessonAccess:LA},Zd=Object.freeze(Object.defineProperty({__proto__:null,addStudyCentreBookmark:AA,addToStudyList:aA,checkLessonAccess:LA,checkReward:bA,cleanupStudyList:cA,completeLevel:CA,createPersonalPath:PA,createUserGoal:dA,default:iK,deleteUserGoal:fA,fetchSubscriptionFromServer:rA,getAccessibleContent:xA,getDiaryEntries:mA,getLearningMode:SA,getLearningProfile:gA,getPersonalizedRecommendations:vA,getPlacementTestResults:kA,getSchoolCurriculum:IA,getUserGoals:uA,getUserInfo:tA,getUserRewards:_A,getUserStatus:sA,getUserStudyList:oA,removeFromStudyList:lA,saveDiaryEntry:pA,saveUser:nA,startPlacementTest:EA,submitPlacementTestAnswer:TA,switchLearningMode:ov,updateLearningProfile:yA,updateStreak:wA,updateUserGoal:hA,updateUserProfile:iA},Symbol.toStringTag,{value:"Module"})),oK=()=>typeof navigator<"u"?navigator.onLine:!0,Lu=[],aK=async()=>{if(oK()&&Lu.length>0){const t=[...Lu];Lu.length=0;for(const e of t)try{await e()}catch{Lu.push(e)}}};typeof window<"u"&&(window.addEventListener("online",aK),window.addEventListener("offline",()=>{}));const lK="https://api.aced.live",Pa=ut.create({baseURL:lK,headers:{"Content-Type":"application/json"},timeout:15e3}),Yi=new Map,cK=3,uK=5e3,av=(t,e)=>{const s=`${t}-${e}`,r=Date.now();if(!Yi.has(s))return Yi.set(s,{count:1,firstAttempt:r,lastAttempt:r}),!0;const n=Yi.get(s);return r-n.lastAttempt>uK?(Yi.set(s,{count:1,firstAttempt:r,lastAttempt:r}),!0):n.count>=cK?!1:(n.count++,n.lastAttempt=r,Yi.set(s,n),!0)},dK=(t,e=500)=>{let s;return(...r)=>(clearTimeout(s),new Promise((n,i)=>{s=setTimeout(async()=>{try{const o=await t(...r);n(o)}catch(o){i(o)}},e)}))},hK=async()=>{try{const t=pe.currentUser;if(!t)return null;const e=await t.getIdToken(!0);return localStorage.setItem("token",e),e}catch{return null}};Pa.interceptors.request.use(async t=>{try{t.headers["X-Request-Source"]="frontend",t.headers["X-User-Agent"]=navigator.userAgent.substring(0,50);const e=await hK();return e&&(t.headers.Authorization=`Bearer ${e}`),t}catch(e){return Promise.reject(e)}});Pa.interceptors.response.use(t=>t,async t=>{var e;if(((e=t.response)==null?void 0:e.status)===401&&!t.config._retry){t.config._retry=!0;try{const s=pe.currentUser;if(s){const r=await s.getIdToken(!0);return localStorage.setItem("token",r),t.config.headers.Authorization=`Bearer ${r}`,Pa(t.config)}}catch{localStorage.removeItem("token")}}return Promise.reject(t)});const RA=t=>({"-31601":"    ","-31610":"   ","-31611":"   ","-31612":"   ","-31622":"  ","-31623":"   ","-31630":" :  ,      "})[t]||` PayMe: ${t}`,_f=()=>({start:{tiyin:26e6,uzs:26e4,label:"Start Plan"},pro:{tiyin:455e5,uzs:455e3,label:"Pro Plan"}}),fK=(t,e="UZS")=>{try{const s=Number(t);return isNaN(s)?`${t} `:e==="UZS"?new Intl.NumberFormat("uz-UZ",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)+" ":new Intl.NumberFormat("uz-UZ",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}catch{return`${(Number(t)||0).toLocaleString("uz-UZ")} `}},pK=t=>{switch(t){case 1:return{text:"",color:"warning",icon:""};case 2:return{text:"",color:"success",icon:""};case-1:return{text:"",color:"error",icon:""};case-2:return{text:"",color:"error",icon:""};default:return{text:"",color:"default",icon:""}}},_c=async(t,e,s={})=>{var r;try{throw new Error("PayMe Merchant ID not configured. Check your .env file.")}catch(n){return{success:!1,error:n.message}}},NA=async(t,e,s={})=>{var r;try{const n="68016cc1a5e04614247f7174".trim();if(!n||n==="undefined"||n.length<10)throw new Error("Invalid PayMe Merchant ID configuration");const o=(r=_f()[e])==null?void 0:r.tiyin;if(!o)throw new Error(`Unknown plan: ${e}`);const l=Date.now(),c=Math.random().toString(36).substr(2,9),h=(s.Login||`aced${l}${c}`).replace(/[^a-zA-Z0-9]/g,""),f={receipt_type:0,items:[{title:`ACED ${e.toUpperCase()} Subscription`,price:o,count:1,code:"10899002001000000",vat_percent:0,package_code:"123456"}]};let m;try{const E=JSON.stringify(f);m=btoa(unescape(encodeURIComponent(E)))}catch{m=""}const g=s.callback||`${window.location.origin}/payment/success`,v=encodeURIComponent(g),C=["ru","uz","en"].includes(s.lang)?s.lang:"ru",U=s.callback_timeout&&Number.isInteger(Number(s.callback_timeout))?s.callback_timeout:15e3;return{success:!0,formHtml:`
    <form method="POST" action="https://checkout.paycom.uz/" id="payme-form" style="display: none;">
      <!-- Required fields -->
      <input type="hidden" name="merchant" value="${n}"/>
      <input type="hidden" name="amount" value="${o}"/>
      <input type="hidden" name="account[Login]" value="${h}"/>
      
      <!-- Optional fields -->
      <input type="hidden" name="lang" value="${C}"/>
      <input type="hidden" name="callback" value="${v}"/>
      <input type="hidden" name="callback_timeout" value="${U}"/>
      <input type="hidden" name="description" value="ACED ${e.toUpperCase()} Plan Subscription"/>
      ${m?`<input type="hidden" name="detail" value="${m}"/>`:""}
      
      <!-- Submit button (hidden, auto-submit) -->
      <button type="submit" style="display: none;">Pay with PayMe</button>
    </form>
    
    <script>
// Wait for DOM to be ready
      function submitPaymeForm() {
        const form = document.getElementById('payme-form');
        if (form) {
form.submit();
        } else {
}
      }
      
      // Auto-submit after short delay
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(submitPaymeForm, 1000);
        });
      } else {
        setTimeout(submitPaymeForm, 1000);
      }
    <\/script>
    `,method:"POST",transaction:{id:h,amount:o,plan:e,merchantId:n}}}catch(n){return{success:!1,error:n.message||"Failed to generate PayMe POST form"}}},OA=async(t,e,s={})=>{var r;if(!av(t,"payment-initiation"))throw new Error("    .   .");try{if(!((r=_f()[e])==null?void 0:r.tiyin))throw new Error(` : ${e}`);const o=s.method||"get";if(o==="get"){const c=await _c(t,e,s);if(c.success)return{success:!0,paymentUrl:c.paymentUrl,transaction:c.transaction,method:"GET",message:"Payment URL generated successfully"};throw new Error(c.error)}if(o==="post"){const c=await NA(t,e,s);if(c.success)return{success:!0,formHtml:c.formHtml,transaction:c.transaction,method:"POST",message:"Payment form generated successfully"};throw new Error(c.error)}const l=await _c(t,e,s);if(l.success)return{success:!0,paymentUrl:l.paymentUrl,transaction:l.transaction,method:"GET",message:"Payment URL generated successfully (fallback)"};throw new Error(l.error)}catch(n){return{success:!1,error:n.message||"  ",details:n}}},DA=async(t,e,s="post",r={})=>{if(!av(t,"form-generation"))throw new Error("    .   .");try{if(s==="get"){const i=await _c(t,e,{method:s,...r});return{success:i.success,method:"GET",paymentUrl:i.paymentUrl,transaction:i.transaction,error:i.error}}if(s==="post"){const i=await NA(t,e,{method:s,...r});return{success:i.success,method:"POST",formHtml:i.formHtml,transaction:i.transaction,error:i.error}}const n=await _c(t,e,{method:"get",...r});return{success:n.success,method:"GET",paymentUrl:n.paymentUrl,transaction:n.transaction,error:n.error}}catch(n){return{success:!1,error:$A(n,"  ")}}},mK=dK(async(t,e,s)=>{var r,n;if(!av(t,"promo-code"))throw new Error("    .   .");try{const i=await Pa.post("/payments/promo-code",{userId:t,plan:e,promoCode:s});return{success:!0,data:i.data,message:i.data.message||"  "}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"  "}}},1e3),gK=async(t,e=null)=>{var s,r,n;try{const i=e?`/payments/status/${t}/${e}`:`/payments/status/${t}`,o=await Pa.get(i);return{success:!0,data:o.data,transaction:o.data.transaction,status:(s=o.data.transaction)==null?void 0:s.state}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"   "}}},yK=async t=>{var e,s;try{const r=await Pa.get(`/payments/validate-user/${t}`);return{success:!0,valid:r.data.valid,user:r.data.user,source:r.data.source,note:r.data.note}}catch(r){return{success:!1,valid:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},MA=t=>{try{const e=t.split("/").pop(),s=atob(e),r=s.includes("m=")&&!s.includes("m=undefined"),n=s.includes("a=")&&/a=\d+/.test(s),i=s.includes("ac.Login=")&&!s.includes("ac.Login=undefined"),o=s.includes("")||s.includes("\f")||s.includes("\0")||s.includes("[object Object]");return{isValid:r&&n&&i&&!o,hasValidMerchant:r,hasValidAmount:n,hasValidOrderId:i,isCorrupted:o,decodedParams:s}}catch(e){return{isValid:!1,error:e.message}}},$A=(t,e=" ")=>{var s,r,n,i,o,l,c,u,h,f,m;return(r=(s=t.response)==null?void 0:s.data)!=null&&r.code&&t.response.data.code.toString().startsWith("-316")?RA(t.response.data.code):(n=t.message)!=null&&n.includes("  ")?t.message:((i=t.response)==null?void 0:i.status)===401?"      ":((o=t.response)==null?void 0:o.status)===403?"    ":((l=t.response)==null?void 0:l.status)===404?"  .   .":((c=t.response)==null?void 0:c.status)===429?"  .      .":((u=t.response)==null?void 0:u.status)>=500?"  .  ":(h=t.message)!=null&&h.includes("timeout")?"  .  -":((m=(f=t.response)==null?void 0:f.data)==null?void 0:m.message)||t.message||"    "},vK=t=>{const e=[];for(const[s]of Yi.entries())s.startsWith(t)&&e.push(s);e.forEach(s=>Yi.delete(s))},_K=async()=>{try{const t=await _c("testuser123","start",{lang:"ru",callback:"https://aced.live/payment/success"});if(t.success){const e=MA(t.paymentUrl);return{success:e.isValid,url:t.paymentUrl,validation:e}}else throw new Error(t.error)}catch(t){return{success:!1,error:t.message}}},bK=async(t,e="start")=>{},wK=DA,SK=OA,UA=Object.freeze(Object.defineProperty({__proto__:null,applyPromoCode:mK,checkPaymentStatus:gK,executePaymentFlow:SK,formatPaymentAmount:fK,generatePaymeForm:DA,generatePaymentForm:wK,getPaymeErrorMessage:RA,getPaymentAmounts:_f,getTransactionStateText:pK,handlePaymentError:$A,initiatePaymePayment:OA,resetPaymentAttempts:vK,testCleanUrlGeneration:_K,testPaymentFlow:bK,validatePaymeUrl:MA,validateUser:yK},Symbol.toStringTag,{value:"Module"})),EK="https://api.aced.live",ds=ut.create({baseURL:`${EK}/api/payments`,headers:{"Content-Type":"application/json"},timeout:3e4,maxRedirects:0,validateStatus:t=>t<500});ds.interceptors.request.use(async t=>{try{const e=pe.currentUser;if(e){const s=await e.getIdToken();t.headers.Authorization=`Bearer ${s}`}return t}catch{return t}},t=>Promise.reject(t));ds.interceptors.response.use(t=>t,t=>{var s,r,n,i,o,l,c,u,h,f,m,g,v;const e={url:(s=t.config)==null?void 0:s.url,method:(n=(r=t.config)==null?void 0:r.method)==null?void 0:n.toUpperCase(),status:(i=t.response)==null?void 0:i.status,statusText:(o=t.response)==null?void 0:o.statusText,message:((u=(c=(l=t.response)==null?void 0:l.data)==null?void 0:c.error)==null?void 0:u.details)||((f=(h=t.response)==null?void 0:h.data)==null?void 0:f.error)||((g=(m=t.response)==null?void 0:m.data)==null?void 0:g.message)||t.message,fullError:(v=t.response)==null?void 0:v.data};return t.multicardDetails=e,Promise.reject(t)});const lv=async()=>{try{const{data:t}=await ds.post("/multicard/test-connection");return t}catch(t){throw t}},FA=lv,VA=async t=>{var e,s,r,n,i,o,l,c,u,h,f,m,g,v;console.log(" [multicard.js] initiateMulticardPayment called with:",t);try{if(!t.userId)throw new Error("userId is required");if(!t.plan)throw new Error("plan is required");if(!["start","pro"].includes(t.plan))throw new Error('plan must be "start" or "pro"');const I=t.amount||(t.plan==="pro"?455e5:26e6),C=Array.isArray(t.ofd)?t.ofd:[{qty:1,price:I,total:I,name:`ACED ${t.plan.toUpperCase()} Plan Subscription`,mxik:"10899002001000000",package_code:"1873404",vat:0}],U={userId:t.userId,plan:t.plan,amount:I,ofd:C,lang:t.lang||"ru",userName:t.userName||"",userEmail:t.userEmail||"",provider:"multicard"};console.log(" [multicard.js] Sending request to /multicard/initiate with:",U);const{data:D}=await ds.post("/multicard/initiate",U);if(console.log(" [multicard.js] Response from /multicard/initiate:",D),D.success&&D.data)return{success:!0,data:{uuid:D.data.uuid,invoiceId:D.data.invoiceId,checkoutUrl:D.data.checkoutUrl,shortLink:D.data.shortLink,deeplink:D.data.deeplink,addedOn:D.data.addedOn}};{const E=((e=D.error)==null?void 0:e.details)||D.error||"Payment initiation failed";throw new Error(E)}}catch(I){let C="Unknown payment error occurred";return(r=(s=I.response)==null?void 0:s.data)!=null&&r.error?typeof I.response.data.error=="string"?C=I.response.data.error:I.response.data.error.details?C=I.response.data.error.details:I.response.data.error.message&&(C=I.response.data.error.message):(i=(n=I.response)==null?void 0:n.data)!=null&&i.message?C=I.response.data.message:I.message&&(C=I.message),((o=I.response)==null?void 0:o.status)===404?C="Multicard payment endpoint not found. Please contact support.":(C.includes(" ")||C.includes("temporarily disabled"))&&(C="Multicard payment is temporarily disabled. Please try PayMe or contact support."),{success:!1,error:C,details:{status:(l=I.response)==null?void 0:l.status,statusText:(c=I.response)==null?void 0:c.statusText,code:(f=(h=(u=I.response)==null?void 0:u.data)==null?void 0:h.error)==null?void 0:f.code,hint:(g=(m=I.response)==null?void 0:m.data)==null?void 0:g.hint,timestamp:new Date().toISOString(),endpoint:(v=I.config)==null?void 0:v.url}}}},qA=async t=>{try{const{data:e}=await ds.post(`/multicard/invoice/${t}`);return e}catch(e){throw e}},BA=async t=>{try{const{data:e}=await ds.delete(`/multicard/invoice/${t}`);return e}catch(e){throw e}},jA=async t=>{var e,s,r,n;try{if(!t.userId)throw new Error("userId is required");if(!t.redirectUrl)throw new Error("redirectUrl is required");if(!t.redirectDeclineUrl)throw new Error("redirectDeclineUrl is required");const{data:i}=await ds.post("/multicard/card/bind",t);if(i.success)return{success:!0,data:{sessionId:i.data.sessionId,formUrl:i.data.formUrl,expiresIn:i.data.expiresIn}};throw new Error(((e=i.error)==null?void 0:e.details)||"Card binding session creation failed")}catch(i){return{success:!1,error:((n=(r=(s=i.response)==null?void 0:s.data)==null?void 0:r.error)==null?void 0:n.details)||i.message}}},HA=async t=>{try{const{data:e}=await ds.post(`/multicard/card/bind/${t}`);return e}catch(e){throw e}},zA=async t=>{try{const{data:e}=await ds.post(`/multicard/card/${t}`);return e}catch(e){throw e}},WA=async t=>{try{const{data:e}=await ds.delete(`/multicard/card/${t}`);return e}catch(e){throw e}},GA=async t=>{var e,s,r,n,i;try{if(!((e=t.card)!=null&&e.token))throw new Error("Card token is required");if(!t.amount)throw new Error("Amount is required");if(!t.storeId)throw new Error("Store ID is required");if(!t.invoiceId)throw new Error("Invoice ID is required");const{data:o}=await ds.post("/multicard/payment",t);if(o.success)return{success:!0,data:o.data};throw new Error(((s=o.error)==null?void 0:s.details)||"Payment creation failed")}catch(o){return{success:!1,error:((i=(n=(r=o.response)==null?void 0:r.data)==null?void 0:n.error)==null?void 0:i.details)||o.message}}},KA=async t=>{var e,s,r,n;try{const i=["payme","click","uzum","anorbank","alif","oson","xazna","beepul"];if(!i.includes(t.paymentSystem))throw new Error(`Invalid payment system. Must be one of: ${i.join(", ")}`);const{data:o}=await ds.post("/multicard/payment/via-app",t);if(o.success)return{success:!0,data:o.data,message:o.message};throw new Error(((e=o.error)==null?void 0:e.details)||"Payment via app creation failed")}catch(i){return{success:!1,error:((n=(r=(s=i.response)==null?void 0:s.data)==null?void 0:r.error)==null?void 0:n.details)||i.message}}},YA=async(t,e,s=!1)=>{var r,n,i,o,l,c,u;try{if(!t)throw new Error("Payment UUID is required");if(!e||e.length!==6)throw new Error("Valid 6-digit OTP is required");const{data:h}=await ds.put(`/multicard/payment/${t}`,{otp:e,debit_available:s});if(h.success)return{success:!0,data:h.data};throw new Error(((r=h.error)==null?void 0:r.details)||"Payment confirmation failed")}catch(h){return{success:!1,error:((o=(i=(n=h.response)==null?void 0:n.data)==null?void 0:i.error)==null?void 0:o.details)||h.message,code:(u=(c=(l=h.response)==null?void 0:l.data)==null?void 0:c.error)==null?void 0:u.code}}},QA=async t=>{try{const{data:e}=await ds.delete(`/multicard/payment/${t}`);return e}catch(e){throw e}},XA=async t=>{try{const{data:e}=await ds.post(`/multicard/payment/${t}`);return e}catch(e){throw e}},JA=async(t,e)=>{try{const{data:s}=await ds.post(`/multicard/store/${t}/history`,{params:e});return s}catch(s){throw s}},ZA=async(t,e,s)=>{try{const{data:r}=await ds.post(`/multicard/store/${t}/statistics`,{params:{startDate:e,endDate:s}});return r}catch(r){throw r}},eP=async()=>{try{const{data:t}=await ds.post("/multicard/application/info");return t}catch(t){throw t}},eh=t=>Math.round(t*100),cv=t=>t/100,tP=(t,e="uz-UZ")=>{const s=cv(t);return new Intl.NumberFormat(e,{style:"currency",currency:"UZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)},sP=t=>t.map(e=>({qty:e.quantity||1,price:typeof e.price=="number"?e.price:eh(e.price),mxik:e.mxik||"10899002001000000",total:(e.quantity||1)*(typeof e.price=="number"?e.price:eh(e.price)),package_code:e.packageCode||"1873404",name:e.name,...e.vat!==void 0&&{vat:e.vat},...e.tin&&{tin:e.tin}})),rP=t=>({draft:"",progress:" ",billing:" ",success:"",error:"",revert:"",pending:""})[t]||t,nP=t=>({uzcard:"UZCARD",humo:"HUMO",visa:"Visa",mastercard:"Mastercard",unionpay:"UnionPay",payme:"Payme",click:"Click",uzum:"Uzum",anorbank:"Anorbank",alif:"Alif",oson:"Oson",xazna:"Xazna",beepul:"Beepul"})[t]||t,iP=t=>t&&typeof t=="string"&&t.length>5,oP=t=>t&&typeof t=="string"&&t.length>10,TK={testMulticardConnection:lv,testMulticardAuth:FA,initiateMulticardPayment:VA,getInvoiceInfo:qA,cancelInvoice:BA,createCardBindingSession:jA,checkCardBindingStatus:HA,getCardInfo:zA,deleteCard:WA,createPaymentByToken:GA,createPaymentViaApp:KA,confirmPayment:YA,refundPayment:QA,getPaymentInfo:XA,getPaymentHistory:JA,getPaymentStatistics:ZA,getApplicationInfo:eP,uzsToTiyin:eh,tiyinToUzs:cv,formatPrice:tP,createOfdData:sP,getPaymentStatusText:rP,getPaymentSystemName:nP,isValidInvoiceId:iP,isValidCardToken:oP},ag=Object.freeze(Object.defineProperty({__proto__:null,cancelInvoice:BA,checkCardBindingStatus:HA,confirmPayment:YA,createCardBindingSession:jA,createOfdData:sP,createPaymentByToken:GA,createPaymentViaApp:KA,default:TK,deleteCard:WA,formatPrice:tP,getApplicationInfo:eP,getCardInfo:zA,getInvoiceInfo:qA,getPaymentHistory:JA,getPaymentInfo:XA,getPaymentStatistics:ZA,getPaymentStatusText:rP,getPaymentSystemName:nP,initiateMulticardPayment:VA,isValidCardToken:oP,isValidInvoiceId:iP,refundPayment:QA,testMulticardAuth:FA,testMulticardConnection:lv,tiyinToUzs:cv,uzsToTiyin:eh},Symbol.toStringTag,{value:"Module"})),kK=async({lessonId:t,stepIndex:e,gameType:s="basket-catch",difficulty:r="medium"})=>{var n,i,o;try{const l=await((n=pe.currentUser)==null?void 0:n.getIdToken());if(!l)throw new Error("No authentication token");const{data:c}=await ae.post("games/generate",{lessonId:t,stepIndex:e,gameType:s,difficulty:r},{headers:{Authorization:`Bearer ${l}`}});if(c.success)return{success:!0,game:c.game};throw new Error(c.error||"Failed to generate game")}catch(l){return{success:!1,error:((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.error)||l.message}}},IK=async t=>{var e,s,r;try{const n=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!n)throw new Error("No authentication token");const{data:i}=await ae.post("games/submit",t,{headers:{Authorization:`Bearer ${n}`}});if(i.success)return{success:!0,result:i.result};throw new Error(i.error||"Failed to submit game results")}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},CK=async(t,e={})=>{var s,r;try{const{limit:n=10,timeframe:i="all-time"}=e,o=new URLSearchParams({limit:n,timeframe:i}),{data:l}=await ae.get(`games/leaderboard/${t}?${o}`);if(l.success)return{success:!0,leaderboard:l.leaderboard,gameType:l.gameType,timeframe:l.timeframe};throw new Error(l.error||"Failed to fetch leaderboard")}catch(n){return{success:!1,leaderboard:[],error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},AK=async t=>{var e,s,r;try{const n=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!n)throw new Error("No authentication token");const{data:i}=await ae.get(`games/stats/${t}`,{headers:{Authorization:`Bearer ${n}`}});if(i.success)return{success:!0,stats:i.stats};throw new Error(i.error||"Failed to fetch game stats")}catch(n){return{success:!1,stats:null,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},PK=async()=>{var t,e;try{const{data:s}=await ae.get("games/types");if(s.success)return{success:!0,gameTypes:s.gameTypes};throw new Error(s.error||"Failed to fetch game types")}catch(s){return{success:!1,gameTypes:[],error:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.error)||s.message}}},xK=async({lessonId:t,stepIndex:e,gameType:s})=>{var r,n,i;try{const o=await((r=pe.currentUser)==null?void 0:r.getIdToken());if(!o)throw new Error("No authentication token");const{data:l}=await ae.post("games/convert-exercise",{lessonId:t,stepIndex:e,gameType:s},{headers:{Authorization:`Bearer ${o}`}});if(l.success)return{success:!0,gameConfig:l.gameConfig,message:l.message};throw new Error(l.error||"Failed to convert exercise")}catch(o){return{success:!1,error:((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.error)||o.message}}},bf={"basket-catch":{id:"basket-catch",name:"Basket Catch",description:"Catch falling correct answers in your basket",icon:"",category:"throwing",difficulty:["easy","medium","hard"],bestFor:["quick-recall","recognition","vocabulary"]},"target-practice":{id:"target-practice",name:"Target Practice",description:"Shoot correct answers at moving targets",icon:"",category:"throwing",difficulty:["easy","medium","hard"],bestFor:["accuracy","math-operations","quick-facts"]},"memory-cards":{id:"memory-cards",name:"Memory Cards",description:"Match pairs of related items",icon:"",category:"matching",difficulty:["easy","medium","hard"],bestFor:["matching","memorization","vocabulary-pairs"]},"connection-lines":{id:"connection-lines",name:"Connection Lines",description:"Draw lines between matching items",icon:"",category:"matching",difficulty:["easy","medium","hard"],bestFor:["relationships","definitions","translations"]},"whack-a-mole":{id:"whack-a-mole",name:"Whack-a-Mole",description:"Hit correct answers as they appear",icon:"",category:"reaction",difficulty:["easy","medium","hard"],bestFor:["speed","grammar-errors","quick-selection"]},"lightning-round":{id:"lightning-round",name:"Lightning Round",description:"Rapid-fire questions with timer",icon:"",category:"reaction",difficulty:["easy","medium","hard"],bestFor:["speed-drills","multiplication-tables","quick-recall"]},"tower-builder":{id:"tower-builder",name:"Tower Builder",description:"Stack blocks with correct answers",icon:"",category:"building",difficulty:["easy","medium","hard"],bestFor:["sentence-building","sequencing","ordering"]},"scale-balance":{id:"scale-balance",name:"Scale Balance",description:"Balance scales with correct weights",icon:"",category:"strategy",difficulty:["easy","medium","hard"],bestFor:["equations","equivalent-values","math-balance"]},"pattern-builder":{id:"pattern-builder",name:"Pattern Builder",description:"Complete the pattern",icon:"",category:"strategy",difficulty:["easy","medium","hard"],bestFor:["sequences","logic","predictions"]},"maze-runner":{id:"maze-runner",name:"Maze Runner",description:"Navigate maze by answering questions",icon:"",category:"movement",difficulty:["easy","medium","hard"],bestFor:["sequential-learning","step-by-step","navigation"]}},LK=t=>bf[t]||null,RK=t=>Object.values(bf).filter(e=>e.category===t),NK=()=>{const t=new Set(Object.values(bf).map(e=>e.category));return Array.from(t)},OK=Object.freeze(Object.defineProperty({__proto__:null,GAME_TYPES:bf,convertExerciseToGame:xK,generateGame:kK,getGameCategories:NK,getGameLeaderboard:CK,getGameTypeMetadata:LK,getGameTypes:PK,getGameTypesByCategory:RK,getUserGameStats:AK,submitGameResults:IK},Symbol.toStringTag,{value:"Module"})),DK="https://api.aced.live",MK=ut.create({baseURL:DK,headers:{"Content-Type":"application/json"},timeout:15e3});MK.interceptors.request.use(async t=>{try{const e=pe.currentUser;if(e){const s=await e.getIdToken(!0);t.headers.Authorization=`Bearer ${s}`}return t}catch(e){return Promise.reject(e)}});const $K=async()=>{try{const t=pe.currentUser;return t?await t.getIdToken(!0):localStorage.getItem("token")||null}catch(t){return console.error("[promocodes.js] Error getting auth token:",t),null}},UK=()=>{const t=pe.currentUser;return t!=null&&t.uid?t.uid:localStorage.getItem("userId")||localStorage.getItem("firebaseUserId")||null},lg=async t=>{var e,s,r,n,i,o,l;try{if(!t||t.trim().length<3)return{valid:!1,error:"Promocode is too short"};const c=t.trim().toUpperCase(),{data:u}=await ae.get(`promocodes/validate/${c}`);return u.valid||u.success?{valid:!0,code:c,data:u.data||{},plan:((e=u.data)==null?void 0:e.grantsPlan)||u.plan||"pro",duration:((s=u.data)==null?void 0:s.subscriptionDays)||u.duration||30,discount:u.discount||100,message:u.message||"Promocode is valid"}:{valid:!1,error:u.message||u.error||"Invalid promocode"}}catch(c){return((r=c.response)==null?void 0:r.status)===404?{valid:!1,error:"Promocode not found"}:((n=c.response)==null?void 0:n.status)===410?{valid:!1,error:"Promocode has expired"}:((i=c.response)==null?void 0:i.status)===409?{valid:!1,error:"Promocode already used"}:{valid:!1,error:((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||c.message||"Failed to validate promocode"}}},aP=async(t,e=null)=>{var s,r,n,i,o,l,c,u;try{if(!t||t.trim().length<3)return{success:!1,error:"Promocode is too short"};const h=await $K();if(!h)return{success:!1,error:"Not authenticated"};const f=e||UK();if(!f)return{success:!1,error:"No user ID available"};const m=t.trim().toUpperCase(),g={Authorization:`Bearer ${h}`},{data:v}=await ae.post("promocodes/apply",{code:m,userId:f},{headers:g});if(v.success){const I=new Date,C=v.duration||30,U=new Date(I.getTime()+C*24*60*60*1e3);return{success:!0,message:v.message||`Promocode applied! ${(v.plan||"Pro").toUpperCase()} activated.`,plan:v.plan||"pro",duration:C,expiryDate:U.toISOString(),promocode:m}}else return{success:!1,error:v.message||v.error||"Failed to apply promocode"}}catch(h){return((s=h.response)==null?void 0:s.status)===404?{success:!1,error:"Promocode not found"}:((r=h.response)==null?void 0:r.status)===410?{success:!1,error:"Promocode has expired"}:((n=h.response)==null?void 0:n.status)===409?{success:!1,error:"Promocode already used"}:((i=h.response)==null?void 0:i.status)===400?{success:!1,error:((l=(o=h.response)==null?void 0:o.data)==null?void 0:l.message)||"Invalid promocode"}:{success:!1,error:((u=(c=h.response)==null?void 0:c.data)==null?void 0:u.message)||h.message||"Failed to apply promocode"}}},Ew=Object.freeze(Object.defineProperty({__proto__:null,applyPromocode:aP,validatePromocode:lg},Symbol.toStringTag,{value:"Module"})),{getUpdatedCourses:uv,getUpdatedCoursesWithFormat:lP,getCourseStructuredEnhanced:cg,getTopicsGrouped:dv,getTopicsAsCourses:hv}=XC,{getTopics:cP,getTopicById:uP,getLessonsByTopic:dP,getAllLessons:fv,getLessonById:hP}=JC,{getAllHomeworks:fP,getHomeworkByLesson:pP,getStandaloneHomework:mP,saveHomework:gP,submitHomework:yP,saveStandaloneHomework:vP,submitStandaloneHomework:_P}=ZC,{getLessonProgress:FK,getUserProgress:pv,getUserAnalytics:bP}=eA,{getUserStatus:VK,saveUser:qK,getUserStudyList:mv,addToStudyList:wP,removeFromStudyList:BK,getLearningProfile:gv,getPersonalizedRecommendations:yv,getUserRewards:vv,updateStreak:_v}=Zd,{initiatePaymePayment:SP,checkPaymentStatus:EP}=UA,{initiateMulticardPayment:TP,createPaymentByToken:kP,confirmPayment:IP}=ag,{submitGameResults:jK}=OK,HK=Object.freeze(Object.defineProperty({__proto__:null,BASE_URL:UC,CoursesAPI:XC,HomeworkAPI:ZC,LessonsAPI:JC,MulticardAPI:ag,PaymentsAPI:UA,ProgressAPI:eA,UserAPI:Zd,addToStudyList:wP,checkPaymentStatus:EP,confirmPayment:IP,createPaymentByToken:kP,default:ae,getAllHomeworks:fP,getAllLessons:fv,getCourseStructuredEnhanced:cg,getHomeworkByLesson:pP,getLearningProfile:gv,getLessonById:hP,getLessonProgress:FK,getLessonsByTopic:dP,getPersonalizedRecommendations:yv,getStandaloneHomework:mP,getTopicById:uP,getTopics:cP,getTopicsAsCourses:hv,getTopicsGrouped:dv,getUpdatedCourses:uv,getUpdatedCoursesWithFormat:lP,getUserAnalytics:bP,getUserProgress:pv,getUserRewards:vv,getUserStatus:VK,getUserStudyList:mv,getValidToken:VC,initiateMulticardPayment:TP,initiatePaymePayment:SP,multicardAPI:ag,removeFromStudyList:BK,saveHomework:gP,saveStandaloneHomework:vP,saveUser:qK,submitGameResults:jK,submitHomework:yP,submitStandaloneHomework:_P,updateStreak:_v},Symbol.toStringTag,{value:"Module"})),zK={name:"AcedSection",data(){return{allCourses:[],filteredCourses:[],displayedCourses:[],maxDisplayedCourses:6,loadingCourses:!0,processingCourse:null,showRegistrationModal:!1,selectedCourse:null,errorMessage:null,retryCount:0,maxRetries:3,navigationInProgress:!1}},async mounted(){await this.initializeCourses()},methods:{getTypeClasses(t){return this.getTopicType(t)==="free"?"bg-green-100 text-green-700":"bg-violet-100 text-violet-700"},getLocalizedLessonName(t){if(!t)return"";const e=localStorage.getItem("lang")||"ru";if(t.title&&typeof t.title=="string")return t.title;if(t.lessonName){if(typeof t.lessonName=="string")return t.lessonName;if(typeof t.lessonName=="object")return t.lessonName[e]||t.lessonName.en||t.lessonName.ru||t.lessonName.uz||""}return""},async initializeCourses(){this.loadingCourses=!0,this.errorMessage=null;try{let t=await this.fetchCoursesFromLessons();(!t||t.length===0)&&(t=await this.fetchCoursesFromTopics()),t&&t.length>0?(this.allCourses=t,this.filterCourses()):(this.allCourses=[],this.filteredCourses=[],this.displayedCourses=[])}catch{this.errorMessage="Error loading courses"}finally{this.loadingCourses=!1}},async fetchCoursesFromLessons(){try{const t=await fv();return t!=null&&t.success&&Array.isArray(t.data)&&t.data.length>0?this.buildCoursesFromLessons(t.data):[]}catch{return[]}},async fetchCoursesFromTopics(){try{const t=await cP({includeStats:!0});return t!=null&&t.success&&Array.isArray(t.data)&&t.data.length>0?t.data.filter(e=>e.lessons&&e.lessons.length>0):[]}catch{return[]}},buildCoursesFromLessons(t){const e=new Map;return t.forEach(s=>{if(!(s!=null&&s.topicId))return;const r=typeof s.topicId=="string"?s.topicId:s.topicId._id||String(s.topicId),n=(s==null?void 0:s.topic)||this.getLocalizedLessonName(s)||"No Topic";if(!e.has(r))e.set(r,{_id:r,name:n,description:`Course on "${n}"`,level:s.level||1,type:s.type||"free",lessons:[s],totalTime:parseInt(s.estimatedTime||10)});else{const i=e.get(r);i.lessons.push(s),i.totalTime+=parseInt(s.estimatedTime||10)}}),Array.from(e.values()).sort((s,r)=>s.type==="free"&&r.type!=="free"?-1:r.type==="free"&&s.type!=="free"?1:0)},filterCourses(){this.filteredCourses=[...this.allCourses],this.displayedCourses=this.filteredCourses.slice(0,this.maxDisplayedCourses)},async refreshCourses(){if(this.retryCount>=this.maxRetries){this.errorMessage="Max retries exceeded";return}this.retryCount++,await this.initializeCourses(),this.errorMessage||(this.retryCount=0)},handleCourseClick(t){this.handleStartCourse(t)},async handleStartCourse(t){var e,s;if(!(!(t!=null&&t._id)||this.processingCourse===t._id||this.navigationInProgress)){this.processingCourse=t._id,this.navigationInProgress=!0;try{const r=this.getTopicType(t),n=!!iI().currentUser;if(r==="free"){const i=(e=t.lessons)==null?void 0:e[0];i!=null&&i._id&&await this.$router.push({name:"LessonPage",params:{id:String(i._id).trim()},query:{type:"free"}})}else if(n){const i=(s=t.lessons)==null?void 0:s[0];i!=null&&i._id&&await this.$router.push({name:"LessonPage",params:{id:String(i._id).trim()},query:{type:r}})}else this.selectedCourse=t,this.showRegistrationModal=!0}catch{this.errorMessage="Unable to open course"}finally{setTimeout(()=>{this.processingCourse=null,this.navigationInProgress=!1},1e3)}}},triggerRegistration(){window.dispatchEvent(new Event("open-Login-modal")),this.closeRegistrationModal()},closeRegistrationModal(){this.showRegistrationModal=!1,this.selectedCourse=null},getTopicName(t){return(t==null?void 0:t.name)||(t==null?void 0:t.topicName)||this.$t("course.untitled")},getTopicDescription(t){const e=(t==null?void 0:t.description)||"";return e.length>80?e.substring(0,80)+"...":e||`Learn ${this.getTopicName(t)}`},getTopicType(t){const e=String((t==null?void 0:t.type)||"free").toLowerCase();return["premium","paid","start","pro","professional"].includes(e)?"pro":"free"},getTopicTypeLabel(t){return this.getTopicType(t)==="pro"?this.$t("common.pro"):this.$t("common.free")}}},WK={class:"py-20 lg:py-24 bg-white",id:"aced"},GK={class:"max-w-7xl mx-auto px-6 lg:px-16"},KK={class:"text-center mb-16"},YK={class:"inline-flex items-center gap-2 px-4 py-2 bg-violet-50 rounded-full border border-violet-100 mb-8"},QK={class:"text-sm font-medium text-violet-700"},XK={class:"flex flex-col items-center gap-4"},JK={class:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900"},ZK={class:"text-violet-600"},eY={class:"text-lg lg:text-xl text-gray-500 text-center max-w-2xl"},tY={class:"relative min-h-[300px]"},sY={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},rY={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},nY=["onClick"],iY={class:"p-6"},oY={class:"flex justify-between items-start mb-4"},aY={class:"text-xs font-medium text-gray-400"},lY={class:"text-lg font-bold text-gray-900 mb-2 group-hover:text-violet-600 transition-colors"},cY={class:"text-gray-500 text-sm leading-relaxed line-clamp-2 mb-4"},uY={class:"flex items-center justify-between pt-4 border-t border-gray-50"},dY={class:"flex items-center gap-4 text-xs text-gray-400"},hY=["onClick","disabled"],fY={key:2,class:"text-center py-16 bg-gray-50 rounded-2xl border border-gray-100"},pY={class:"text-lg font-bold text-gray-900 mb-2"},mY={class:"text-gray-500 mb-4"},gY={class:"text-center mb-6"},yY={class:"text-xl font-bold text-gray-900 mb-2"},vY={class:"text-gray-500 text-sm"},_Y={key:0,class:"bg-gray-50 rounded-xl p-4 mb-6"},bY={class:"font-semibold text-gray-900"},wY={class:"text-sm text-gray-500"},SY={class:"space-y-3"},EY={key:1,class:"fixed bottom-6 right-6 z-[100] bg-white text-gray-900 px-5 py-3 rounded-xl border border-gray-200 shadow-lg flex items-center gap-3"},TY={class:"text-sm"};function kY(t,e,s,r,n,i){var o;return b(),S("section",WK,[a("div",GK,[a("div",KK,[a("div",YK,[e[7]||(e[7]=a("span",{class:"w-2 h-2 bg-violet-500 rounded-full"},null,-1)),a("span",QK,p(t.$t("acedSection.exploreCourses")),1)]),a("div",XK,[a("h2",JK,[re(p(t.$t("acedSection.startLearning"))+" ",1),a("span",ZK,p(t.$t("acedSection.today")),1)]),a("p",eY,p(t.$t("acedSection.chooseCourse")),1)])]),a("div",tY,[n.loadingCourses?(b(),S("div",sY,[(b(),S(he,null,be(6,l=>a("div",{key:l,class:"h-[280px] bg-gray-50 rounded-2xl animate-pulse"})),64))])):n.displayedCourses.length>0?(b(),S("div",rY,[(b(!0),S(he,null,be(n.displayedCourses,l=>{var c;return b(),S("div",{key:l._id,class:"group bg-white rounded-2xl border border-gray-100 hover:border-violet-200 overflow-hidden transition-all duration-200 hover:shadow-lg cursor-pointer",onClick:u=>i.handleCourseClick(l)},[a("div",iY,[a("div",oY,[a("span",{class:ye(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",i.getTypeClasses(l)])},p(i.getTopicTypeLabel(l)),3),a("span",aY,p(t.$t("acedSection.lvl"))+" "+p(l.level||1),1)]),a("h3",lY,p(i.getTopicName(l)),1),a("p",cY,p(i.getTopicDescription(l)),1),a("div",uY,[a("div",dY,[a("span",null,p(((c=l.lessons)==null?void 0:c.length)||0)+" "+p(t.$t("acedSection.lessons")),1),a("span",null,p(Math.round((l.totalTime||0)/60)||1)+"h",1)]),a("button",{class:"text-sm font-semibold text-violet-600 hover:text-violet-700 flex items-center gap-1",onClick:gt(u=>i.handleStartCourse(l),["stop"]),disabled:n.processingCourse===l._id},[re(p(t.$t("acedSection.start"))+" ",1),e[8]||(e[8]=a("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,hY)])])],8,nY)}),128))])):(b(),S("div",fY,[e[9]||(e[9]=a("div",{class:"w-16 h-16 mx-auto mb-4 bg-violet-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-8 h-8 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),a("h3",pY,p(t.$t("acedSection.noCoursesFound")),1),a("p",mY,p(t.$t("acedSection.loadingContent")),1),n.loadingCourses?W("",!0):(b(),S("button",{key:0,onClick:e[0]||(e[0]=(...l)=>i.refreshCourses&&i.refreshCourses(...l)),class:"px-6 py-2 bg-violet-600 text-white font-semibold rounded-lg hover:bg-violet-700 transition-colors"},p(t.$t("acedSection.tryAgain")),1))]))]),n.showRegistrationModal?(b(),S("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:e[5]||(e[5]=(...l)=>i.closeRegistrationModal&&i.closeRegistrationModal(...l))},[e[12]||(e[12]=a("div",{class:"absolute inset-0 bg-gray-900/50"},null,-1)),a("div",{class:"relative w-full max-w-md bg-white rounded-2xl shadow-xl p-8",onClick:e[4]||(e[4]=gt(()=>{},["stop"]))},[a("button",{class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",onClick:e[1]||(e[1]=(...l)=>i.closeRegistrationModal&&i.closeRegistrationModal(...l))},e[10]||(e[10]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("div",gY,[e[11]||(e[11]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mx-auto mb-4"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),a("h2",yY,p(t.$t("acedSection.unlockCourse")),1),a("p",vY,p(t.$t("acedSection.createFreeAccount")),1)]),n.selectedCourse?(b(),S("div",_Y,[a("h3",bY,p(i.getTopicName(n.selectedCourse)),1),a("p",wY,p(((o=n.selectedCourse.lessons)==null?void 0:o.length)||0)+" "+p(t.$t("acedSection.lessons")),1)])):W("",!0),a("div",SY,[a("button",{class:"w-full py-3 rounded-xl bg-violet-600 text-white font-semibold hover:bg-violet-700 transition-colors",onClick:e[2]||(e[2]=(...l)=>i.triggerRegistration&&i.triggerRegistration(...l))},p(t.$t("acedSection.createAccount")),1),a("button",{class:"w-full py-3 rounded-xl text-gray-500 font-medium hover:bg-gray-50 transition-colors",onClick:e[3]||(e[3]=(...l)=>i.closeRegistrationModal&&i.closeRegistrationModal(...l))},p(t.$t("acedSection.maybeLater")),1)])])])):W("",!0),n.errorMessage?(b(),S("div",EY,[a("span",TY,p(n.errorMessage),1),a("button",{class:"text-sm font-semibold text-violet-600",onClick:e[6]||(e[6]=(...l)=>i.refreshCourses&&i.refreshCourses(...l))},p(t.$t("acedSection.tryAgain")),1)])):W("",!0)])])}const IY=tt(zK,[["render",kY]]),CY={name:"TariffSection",data(){return{features:["allSubjectsIncluded","unlimitedAiHelp","progressTracking","homeworkAssistance","prioritySupport"]}},computed:{...tn(["getUser"]),isAuthenticated(){return!!this.getUser},translatedFeatures(){return this.features.map(t=>this.$t(`tariffSection.${t}`))}},methods:{handleSubscribe(t){this.isAuthenticated?this.$router.push("/settings"):window.dispatchEvent(new CustomEvent("open-Login-modal"))}}},AY={class:"py-20 lg:py-24 bg-white",id:"tariffs"},PY={class:"max-w-7xl mx-auto px-6 lg:px-16"},xY={class:"text-center mb-20"},LY={class:"inline-flex items-center gap-2 px-4 py-2 bg-violet-50 rounded-full border border-violet-100 mb-8"},RY={class:"text-sm font-medium text-violet-700"},NY={class:"flex flex-col items-center gap-4"},OY={class:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900"},DY={class:"text-violet-600"},MY={class:"text-lg lg:text-xl text-gray-500 text-center max-w-2xl"},$Y={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},UY={class:"bg-white rounded-2xl border border-gray-100 p-8 hover:border-violet-200 transition-colors"},FY={class:"mb-6"},VY={class:"text-lg font-bold text-gray-900 mb-1"},qY={class:"text-gray-500 text-sm"},BY={class:"mb-6"},jY={class:"text-gray-500 ml-1"},HY={class:"space-y-3"},zY={class:"bg-white rounded-2xl p-8 relative md:-translate-y-4 ring-2 ring-violet-500 shadow-xl shadow-violet-500/10"},WY={class:"absolute -top-3 left-1/2 -translate-x-1/2"},GY={class:"px-4 py-1.5 bg-violet-600 text-white text-xs font-bold rounded-full shadow-lg"},KY={class:"mb-6 pt-2"},YY={class:"text-lg font-bold text-gray-900 mb-1"},QY={class:"text-gray-500 text-sm"},XY={class:"mb-6"},JY={class:"text-sm text-gray-500"},ZY={class:"ml-2 px-2 py-0.5 bg-amber-100 rounded text-xs text-amber-700 font-medium"},eQ={class:"space-y-3"},tQ={class:"bg-white rounded-2xl border border-gray-100 p-8 hover:border-violet-200 transition-colors"},sQ={class:"mb-6"},rQ={class:"text-lg font-bold text-gray-900 mb-1"},nQ={class:"text-gray-500 text-sm"},iQ={class:"mb-6"},oQ={class:"text-sm text-gray-500"},aQ={class:"ml-2 px-2 py-0.5 bg-amber-100 rounded text-xs text-amber-700 font-medium"},lQ={class:"space-y-3"},cQ={class:"mt-12 flex flex-wrap justify-center gap-8 text-sm text-gray-500"},uQ={class:"flex items-center gap-2"},dQ={class:"flex items-center gap-2"},hQ={class:"flex items-center gap-2"};function fQ(t,e,s,r,n,i){return b(),S("section",AY,[a("div",PY,[a("div",xY,[a("div",LY,[e[3]||(e[3]=a("span",{class:"w-2 h-2 bg-violet-500 rounded-full"},null,-1)),a("span",RY,p(t.$t("tariffSection.pricing")),1)]),a("div",NY,[a("h2",OY,[re(p(t.$t("tariffSection.simplePricing").split(" ")[0])+" ",1),a("span",DY,p(t.$t("tariffSection.simplePricing").split(" ")[1]||""),1)]),a("p",MY,p(t.$t("tariffSection.noHiddenFees")),1)])]),a("div",$Y,[a("div",UY,[a("div",FY,[a("h3",VY,p(t.$t("tariffSection.monthly")),1),a("p",qY,p(t.$t("tariffSection.greatForTrying")),1)]),a("div",BY,[e[4]||(e[4]=a("span",{class:"text-4xl font-bold text-gray-900"},"250K",-1)),a("span",jY,"UZS"+p(t.$t("tariffSection.perMonth")),1)]),a("button",{onClick:e[0]||(e[0]=o=>i.handleSubscribe(1)),class:"w-full py-3 px-6 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-violet-500 hover:text-violet-600 transition-all mb-6"},p(t.$t("tariffSection.getStarted")),1),a("ul",HY,[(b(!0),S(he,null,be(i.translatedFeatures,(o,l)=>(b(),S("li",{key:l,class:"flex items-center gap-3 text-sm text-gray-600"},[e[5]||(e[5]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),re(" "+p(o),1)]))),128))])]),a("div",zY,[a("div",WY,[a("span",GY,p(t.$t("tariffSection.popular")),1)]),a("div",KY,[a("h3",YY,p(t.$t("tariffSection.quarterly")),1),a("p",QY,p(t.$t("tariffSection.bestValue")),1)]),e[7]||(e[7]=a("div",{class:"mb-2"},[a("span",{class:"text-4xl font-bold text-gray-900"},"675K"),a("span",{class:"text-gray-500 ml-1"},"UZS")],-1)),a("div",XY,[a("span",JY,p(t.$t("tariffSection.forMonths",{months:3})),1),a("span",ZY,p(t.$t("tariffSection.save",{percent:10})),1)]),a("button",{onClick:e[1]||(e[1]=o=>i.handleSubscribe(3)),class:"w-full py-3 px-6 bg-violet-600 text-white font-semibold rounded-xl hover:bg-violet-700 transition-colors mb-6 shadow-lg shadow-violet-600/20"},p(t.$t("tariffSection.startLearning")),1),a("ul",eQ,[(b(!0),S(he,null,be(i.translatedFeatures,(o,l)=>(b(),S("li",{key:l,class:"flex items-center gap-3 text-sm text-gray-600"},[e[6]||(e[6]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),re(" "+p(o),1)]))),128))])]),a("div",tQ,[a("div",sQ,[a("h3",rQ,p(t.$t("tariffSection.biannual")),1),a("p",nQ,p(t.$t("tariffSection.maximumSavings")),1)]),e[9]||(e[9]=a("div",{class:"mb-2"},[a("span",{class:"text-4xl font-bold text-gray-900"},"1.2M"),a("span",{class:"text-gray-500 ml-1"},"UZS")],-1)),a("div",iQ,[a("span",oQ,p(t.$t("tariffSection.forMonths",{months:6})),1),a("span",aQ,p(t.$t("tariffSection.save",{percent:20})),1)]),a("button",{onClick:e[2]||(e[2]=o=>i.handleSubscribe(6)),class:"w-full py-3 px-6 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-violet-500 hover:text-violet-600 transition-all mb-6"},p(t.$t("tariffSection.subscribe")),1),a("ul",lQ,[(b(!0),S(he,null,be(i.translatedFeatures,(o,l)=>(b(),S("li",{key:l,class:"flex items-center gap-3 text-sm text-gray-600"},[e[8]||(e[8]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),re(" "+p(o),1)]))),128))])])]),a("div",cQ,[a("span",uQ,[e[10]||(e[10]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),re(" "+p(t.$t("tariffSection.securePayment")),1)]),a("span",dQ,[e[11]||(e[11]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),re(" "+p(t.$t("tariffSection.cancelAnytime")),1)]),a("span",hQ,[e[12]||(e[12]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),re(" "+p(t.$t("tariffSection.instantAccess")),1)])])])])}const pQ=tt(CY,[["render",fQ]]),mQ={data(){return{form:{name:"",email:"",message:""}}},methods:{submitForm(){alert("!      Email."),this.$emit("close")}}},gQ={class:"modal-box"};function yQ(t,e,s,r,n,i){return b(),S("div",{class:"modal-overlay",onClick:e[6]||(e[6]=gt(o=>t.$emit("close"),["self"]))},[a("div",gQ,[a("button",{class:"close-x",onClick:e[0]||(e[0]=o=>t.$emit("close"))},""),e[8]||(e[8]=a("h2",null,"  ",-1)),a("form",{onSubmit:e[5]||(e[5]=gt((...o)=>i.submitForm&&i.submitForm(...o),["prevent"]))},[Pe(a("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.form.name=o),type:"text",placeholder:" ",required:""},null,512),[[Ge,n.form.name]]),Pe(a("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.form.email=o),type:"email",placeholder:" Email",required:""},null,512),[[Ge,n.form.email]]),Pe(a("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.form.message=o),placeholder:" ",required:""},null,512),[[Ge,n.form.message]]),e[7]||(e[7]=a("button",{type:"submit"},"",-1)),a("button",{type:"button",class:"close-btn",onClick:e[4]||(e[4]=o=>t.$emit("close"))},"")],32)])])}const vQ=tt(mQ,[["render",yQ],["__scopeId","data-v-bb42f243"]]),_Q={name:"FooterBar",components:{ContactModal:vQ},data(){return{showAIModal:!1,showContact:!1}},methods:{showAIHelperModal(){this.showAIModal=!0},showContactModal(){this.showContact=!0},closeModals(){this.showAIModal=!1,this.showContact=!1}}},bQ={class:"bg-white py-20 lg:py-24",id:"contacts"},wQ={class:"max-w-7xl mx-auto px-6 lg:px-16"},SQ={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12"},EQ={class:"lg:col-span-2"},TQ={class:"text-gray-500 text-sm leading-relaxed mb-6 max-w-sm"},kQ={class:"font-semibold text-gray-900 mb-4"},IQ={class:"space-y-3"},CQ={href:"#about-us",class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},AQ={href:"#aced",class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},PQ={href:"#tariffs",class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},xQ={class:"font-semibold text-gray-900 mb-4"},LQ={class:"space-y-3"},RQ={class:"pt-8 border-t border-gray-100 flex flex-col md:flex-row justify-between items-center gap-4"},NQ={class:"text-gray-400 text-sm"},OQ={class:"flex items-center gap-6"},DQ={href:"/privacy-policy.html",target:"_blank",class:"text-gray-400 hover:text-violet-600 text-sm transition-colors"},MQ={href:"/terms-of-service.html",target:"_blank",class:"text-gray-400 hover:text-violet-600 text-sm transition-colors"},$Q={key:0,class:"relative w-full max-w-md bg-white rounded-2xl shadow-xl p-8 text-center"},UQ={class:"text-xl font-bold text-gray-900 mb-2"},FQ={class:"text-gray-500 text-sm mb-6"};function VQ(t,e,s,r,n,i){const o=es("ContactModal");return b(),S("footer",bQ,[a("div",wQ,[a("div",SQ,[a("div",EQ,[e[6]||(e[6]=a("div",{class:"flex items-center gap-2 mb-6"},[a("img",{src:Aa,alt:"ACED",class:"h-10 w-10 object-contain"})],-1)),a("p",TQ,p(t.$t("footer.slogan")),1),e[7]||(e[7]=kt('<div class="flex gap-3"><a href="https://instagram.com/aced.live" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-violet-50 hover:text-violet-600 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a><a href="https://tiktok.com/@aced.live" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-violet-50 hover:text-violet-600 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"></path></svg></a><a href="https://t.me/aced_live" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-violet-50 hover:text-violet-600 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg></a></div>',1))]),a("div",null,[a("h4",kQ,p(t.$t("footer.navigation")),1),a("ul",IQ,[a("li",null,[a("a",CQ,p(t.$t("footer.aboutUs")),1)]),a("li",null,[a("a",AQ,p(t.$t("footer.courses")),1)]),a("li",null,[a("a",PQ,p(t.$t("footer.pricing")),1)]),a("li",null,[a("a",{href:"#",onClick:e[0]||(e[0]=gt((...l)=>i.showAIHelperModal&&i.showAIHelperModal(...l),["prevent"])),class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},p(t.$t("footer.aiAssistant")),1)])])]),a("div",null,[a("h4",xQ,p(t.$t("footer.contact")),1),a("ul",LQ,[e[8]||(e[8]=a("li",{class:"text-gray-500 text-sm"},"@aced.live",-1)),a("li",null,[a("a",{href:"#",onClick:e[1]||(e[1]=gt((...l)=>i.showContactModal&&i.showContactModal(...l),["prevent"])),class:"text-violet-600 hover:text-violet-700 text-sm font-medium transition-colors"},p(t.$t("footer.contactUs")),1)])])])]),a("div",RQ,[a("p",NQ,p(t.$t("footer.allRights")),1),a("div",OQ,[a("a",DQ,p(t.$t("footer.privacyPolicy")),1),a("a",MQ,p(t.$t("footer.termsOfService")),1)])])]),n.showAIModal||n.showContact?(b(),S("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:e[5]||(e[5]=gt((...l)=>i.closeModals&&i.closeModals(...l),["self"]))},[e[11]||(e[11]=a("div",{class:"absolute inset-0 bg-gray-900/50"},null,-1)),n.showAIModal?(b(),S("div",$Q,[a("button",{class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",onClick:e[2]||(e[2]=l=>n.showAIModal=!1)},e[9]||(e[9]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e[10]||(e[10]=a("div",{class:"w-16 h-16 mx-auto bg-violet-100 rounded-xl flex items-center justify-center mb-4"},[a("svg",{class:"w-8 h-8 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),a("h3",UQ,p(t.$t("footer.aiHelperTitle")),1),a("p",FQ,p(t.$t("footer.aiHelperText")),1),a("button",{class:"w-full py-3 rounded-xl bg-violet-600 text-white font-semibold hover:bg-violet-700 transition-colors",onClick:e[3]||(e[3]=l=>n.showAIModal=!1)},p(t.$t("footer.gotIt")),1)])):W("",!0),n.showContact?(b(),ts(o,{key:1,onClose:e[4]||(e[4]=l=>n.showContact=!1)})):W("",!0)])):W("",!0)])}const qQ=tt(_Q,[["render",VQ]]),BQ=void 0,CP=ut.create({baseURL:BQ,headers:{"Content-Type":"application/json"}}),jQ=()=>{const t=new Date;return`${t.getFullYear()}-${t.getMonth()}`},HQ=(t,e,s=!1)=>{const r={free:{messages:50,images:5},start:{messages:-1,images:20},pro:{messages:-1,images:-1}},n=r[t]||r.free;return n.messages!==-1&&e.messages>=n.messages?{allowed:!1,reason:"message_limit_exceeded",message:`   (${n.messages})   "${t}".    .`}:s&&n.images!==-1&&e.images>=n.images?{allowed:!1,reason:"image_limit_exceeded",message:`   (${n.images})   "${t}".    .`}:{allowed:!0,remaining:{messages:n.messages===-1?"":Math.max(0,n.messages-e.messages),images:n.images===-1?"":Math.max(0,n.images-e.images)}}};async function zQ(){try{const t=pe.currentUser;if(!t)throw new Error("   .");const e=await t.getIdToken(),s=await CP.get("/chat/usage",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,usage:s.data.usage||{messages:0,images:0},plan:s.data.plan||"free",limits:s.data.limits||{messages:50,images:5}}}catch(t){return{success:!1,error:t.message,usage:{messages:0,images:0},plan:"free"}}}async function AP(t,e=null,s=null){var r,n,i,o,l,c,u,h,f,m,g,v,I,C,U,D;try{const E=pe.currentUser;if(!E)throw new Error("   .");if(!t&&!e)return"     .";const L=await E.getIdToken(),$=await zQ();if(!$.success)throw new Error("    .");const M=HQ($.plan,$.usage,!!e);if(!M.allowed)return` ${M.message}`;const A=await CP.post("/chat",{userInput:t,imageUrl:e,lessonId:s,trackUsage:!0,monthKey:jQ(),hasImage:!!e},{headers:{Authorization:`Bearer ${L}`},timeout:3e4}),w=((r=A.data)==null?void 0:r.reply)||((l=(o=(i=(n=A.data)==null?void 0:n.choices)==null?void 0:i[0])==null?void 0:o.message)==null?void 0:l.content)||" AI   .";return(c=A.data)!=null&&c.updatedUsage,w}catch(E){if(((u=E.response)==null?void 0:u.status)===429)return"   .    .";if(((h=E.response)==null?void 0:h.status)===403)return"  .    .";if(E.code==="ECONNABORTED"||E.message.includes("timeout"))return"     .  .";if((g=(m=(f=E.response)==null?void 0:f.data)==null?void 0:m.error)!=null&&g.includes("limit")||(C=(I=(v=E.response)==null?void 0:v.data)==null?void 0:I.error)!=null&&C.includes(""))return` ${E.response.data.error}`;const L="       AI.";return(D=(U=E==null?void 0:E.response)==null?void 0:U.data)!=null&&D.error||E.message,L}}const WQ={data(){return{isOpen:!1,isLoggedIn:!1,messages:[],userInput:""}},mounted(){Bc(pe,t=>{this.isLoggedIn=!!t})},methods:{toggleChat(){this.isOpen=!this.isOpen},login(){window.dispatchEvent(new CustomEvent("open-Login-modal")),window.scrollTo({top:0,behavior:"smooth"})},async sendMessage(){if(!this.userInput.trim())return;const t={text:this.userInput,sender:"user"};this.messages.push(t),this.userInput="",this.$nextTick(()=>{this.$refs.messagesArea.scrollTop=this.$refs.messagesArea.scrollHeight});const e=await AP(t.text);this.messages.push({text:e,sender:"bot"}),this.$nextTick(()=>{this.$refs.messagesArea.scrollTop=this.$refs.messagesArea.scrollHeight})}}},GQ={class:"chat-body"},KQ={key:0,class:"login-prompt"},YQ={key:1,class:"chat-content"},QQ={class:"messages-area",ref:"messagesArea"},XQ={class:"input-area"};function JQ(t,e,s,r,n,i){return b(),S("div",null,[n.isOpen?W("",!0):(b(),S("button",{key:0,class:"chat-fab",onClick:e[0]||(e[0]=(...o)=>i.toggleChat&&i.toggleChat(...o))},"  ")),a("div",{class:ye(["chatbot-container",{open:n.isOpen}])},[a("div",{class:"chat-header",onClick:e[2]||(e[2]=(...o)=>i.toggleChat&&i.toggleChat(...o))},[e[7]||(e[7]=a("span",null,"AI Assistant",-1)),a("button",{class:"close-btn",onClick:e[1]||(e[1]=gt((...o)=>i.toggleChat&&i.toggleChat(...o),["stop"]))},"")]),a("div",GQ,[n.isLoggedIn?(b(),S("div",YQ,[a("div",QQ,[(b(!0),S(he,null,be(n.messages,(o,l)=>(b(),S("div",{key:l,class:ye(["message",o.sender])},p(o.text),3))),128))],512),a("div",XQ,[Pe(a("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>n.userInput=o),onKeyup:e[5]||(e[5]=tc((...o)=>i.sendMessage&&i.sendMessage(...o),["enter"])),placeholder:"Ask me anything..."},null,544),[[Ge,n.userInput]]),a("button",{onClick:e[6]||(e[6]=(...o)=>i.sendMessage&&i.sendMessage(...o))},"")])])):(b(),S("div",KQ,[e[8]||(e[8]=a("p",null,"Please log in to start a conversation.",-1)),a("button",{onClick:e[3]||(e[3]=(...o)=>i.login&&i.login(...o))},"Log In")]))])],2)])}const ZQ=tt(WQ,[["render",JQ],["__scopeId","data-v-ab3a2e29"]]),eX={class:"home-page"},tX={id:"hero",class:"hero-section"},sX={id:"about-us"},rX={id:"aced"},nX={id:"tariffs"},iX={id:"cards"},oX={__name:"HomePage",setup(t){return(e,s)=>(b(),S("div",eX,[a("section",tX,[xe(IW)]),a("section",sX,[xe(HC)]),a("section",rX,[xe(IY)]),a("section",nX,[xe(pQ)]),a("section",iX,[xe(qQ)]),xe(ZQ)]))}},aX=tt(oX,[["__scopeId","data-v-82f17b2d"]]),wf={data(){return{reactivityKey:0,lastStatusUpdate:Date.now(),componentMountTime:Date.now(),statusChangeHistory:[],eventCleanupFunctions:[],storeUnsubscribe:null,globalEventHandlers:{},lastSyncTime:Date.now(),syncCheckInterval:null,forceUpdateTimeout:null,statusChangeNotifications:[],lastNotificationTime:0}},computed:{reactiveUserStatus(){var t,e,s,r;this.reactivityKey,this.lastStatusUpdate,this.componentMountTime;try{const n=(t=this.$store)==null?void 0:t.getters["user/userStatus"],i=localStorage.getItem("userStatus"),o=(r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.subscriptionPlan;return n||i||o||"free"}catch{return"free"}},reactiveIsPremiumUser(){const t=this.reactiveUserStatus;return t==="start"||t==="pro"},reactiveIsStartUser(){return this.reactiveUserStatus==="start"},reactiveIsProUser(){return this.reactiveUserStatus==="pro"},reactiveIsFreeUser(){return this.reactiveUserStatus==="free"},userStatusLabel(){const t=this.reactiveUserStatus;return{pro:"Pro",start:"Start",free:"Free"}[t]||"Free"},subscriptionClass(){const t=this.reactiveUserStatus;return{pro:"badge-pro",start:"badge-start",free:"badge-free"}[t]||"badge-free"},subscriptionText(){const t=this.reactiveUserStatus;return{pro:"Pro subscription",start:"Start subscription",free:"Free access"}[t]||"Free access"},getStatusBadgeClass(){return()=>{const t=this.reactiveUserStatus;return{pro:"status-pro",start:"status-start",free:"status-free"}[t]||"status-free"}}},watch:{reactiveUserStatus:{handler(t,e){t!==e&&(this.recordStatusChange(t,e),this.onUserStatusChanged(t,e))},immediate:!0},"$store.state.user.userStatus":{handler(t,e){t!==e&&this.triggerReactivityUpdate()},immediate:!0},"$store.state.user":{handler(t,e){const s=t==null?void 0:t.subscriptionPlan,r=e==null?void 0:e.subscriptionPlan;s!==r&&this.handleUserObjectChange(t,e)},deep:!0,immediate:!0}},async mounted(){try{this.componentMountTime=Date.now(),await this.setupUniversalEventListeners(),this.setupStoreSubscription(),this.setupPeriodicStatusSync(),await this.syncStatusWithStore()}catch{}},beforeUnmount(){this.cleanupStatusMixin()},methods:{onUserStatusChanged(t,e){t&&t!=="free"&&e==="free"&&this.showStatusUpgradeNotification(t)},async setupUniversalEventListeners(){typeof window<"u"&&(this.globalEventHandlers.subscriptionChange=t=>{const{plan:e,source:s,oldPlan:r}=t.detail;this.handleSubscriptionChange(e,r,s)},this.globalEventHandlers.statusChange=t=>{const{newStatus:e,oldStatus:s,source:r}=t.detail;this.handleStatusChange(e,s,r)},this.globalEventHandlers.storageChange=t=>{t.key==="userStatus"&&t.newValue!==t.oldValue&&this.handleStatusChange(t.newValue,t.oldValue,"localStorage")},window.addEventListener("userSubscriptionChanged",this.globalEventHandlers.subscriptionChange),window.addEventListener("userStatusChanged",this.globalEventHandlers.statusChange),window.addEventListener("storage",this.globalEventHandlers.storageChange),this.eventCleanupFunctions.push(()=>window.removeEventListener("userSubscriptionChanged",this.globalEventHandlers.subscriptionChange),()=>window.removeEventListener("userStatusChanged",this.globalEventHandlers.statusChange),()=>window.removeEventListener("storage",this.globalEventHandlers.storageChange))),typeof window<"u"&&window.eventBus&&Object.entries({userStatusChanged:e=>{this.handleStatusChange(e.newStatus,e.oldStatus,"eventBus")},promocodeApplied:e=>{this.handlePromocodeApplied(e)},subscriptionUpdated:e=>{this.handleSubscriptionChange(e.plan,e.oldPlan,"subscription")},paymentCompleted:e=>{this.handlePaymentCompleted(e)},forceUpdate:e=>{this.triggerReactivityUpdate()},globalForceUpdate:e=>{this.triggerReactivityUpdate()}}).forEach(([e,s])=>{window.eventBus.on(e,s),this.eventCleanupFunctions.push(()=>{window.eventBus.off(e,s)})})},setupStoreSubscription(){this.$store&&typeof this.$store.subscribe=="function"&&(this.storeUnsubscribe=this.$store.subscribe(t=>{["setUser","user/SET_USER_STATUS","user/setUserStatus","user/UPDATE_SUBSCRIPTION","user/FORCE_UPDATE","user/ADD_PROMOCODE","user/SET_USER"].includes(t.type)&&this.handleStoreMutation(t)}),this.eventCleanupFunctions.push(()=>{this.storeUnsubscribe&&(this.storeUnsubscribe(),this.storeUnsubscribe=null)}))},setupPeriodicStatusSync(){this.syncCheckInterval&&clearInterval(this.syncCheckInterval),this.syncCheckInterval=setInterval(()=>{this.syncStatusWithStore()},3e4),this.eventCleanupFunctions.push(()=>{this.syncCheckInterval&&(clearInterval(this.syncCheckInterval),this.syncCheckInterval=null)})},handleSubscriptionChange(t,e,s){this.updateUserStatus(t,s),this.triggerReactivityUpdate(),this.recordStatusChange(t,e,s),this.onUserStatusChanged(t,e)},handleStatusChange(t,e,s){!t||t===e||(this.updateUserStatus(t,s),this.triggerReactivityUpdate(),this.onUserStatusChanged(t,e))},handlePromocodeApplied(t){const{newStatus:e,oldStatus:s,promocode:r,source:n="promocode"}=t;if(this.handleStatusChange(e,s,n),e&&e!=="free"){const i=e==="pro"?"Pro":"Start";this.showStatusNotification(` Promo code "${r}" applied! ${i} plan activated!`,"success")}},handlePaymentCompleted(t){const{plan:e,oldPlan:s,amount:r,source:n="payment"}=t;if(this.handleStatusChange(e,s,n),e&&e!=="free"){const i=e==="pro"?"Pro":"Start";this.showStatusNotification(` Payment successful! ${i} plan activated!`,"success")}},handleUserObjectChange(t,e){const s=t==null?void 0:t.subscriptionPlan,r=e==null?void 0:e.subscriptionPlan;s!==r&&this.handleStatusChange(s,r,"userObject"),this.triggerReactivityUpdate()},handleStoreMutation(t){var e;if(t.type==="setUser"&&((e=t.payload)!=null&&e.subscriptionPlan)){const s=t.payload.subscriptionPlan,r=this.reactiveUserStatus;s!==r&&this.handleStatusChange(s,r,"setUser")}this.triggerReactivityUpdate()},updateUserStatus(t,e){if(t)try{if(localStorage.setItem("userStatus",t),this.$store){if(this.$store.commit)try{this.$store.commit("user/SET_USER_STATUS",t)}catch{try{this.$store.commit("user/setUserStatus",t)}catch{try{this.$store.commit("setUserStatus",t)}catch{}}}if(this.$store.state.user){const s={...this.$store.state.user,subscriptionPlan:t};try{this.$store.commit("setUser",s)}catch{}}}}catch{}},async syncStatusWithStore(){var t,e,s,r,n,i,o;try{const l=((t=this.$store)==null?void 0:t.getters["user/userStatus"])||((r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.userStatus),c=localStorage.getItem("userStatus"),u=(o=(i=(n=this.$store)==null?void 0:n.state)==null?void 0:i.user)==null?void 0:o.subscriptionPlan,h=Date.now();let f=l||u||c||"free";const m={free:0,start:1,pro:2},g=[l,c,u].filter(Boolean);g.length>1&&(f=g.reduce((v,I)=>m[I]>m[v]?I:v)),f!==c&&localStorage.setItem("userStatus",f),f!==l&&this.updateUserStatus(f,"sync"),f!==this.reactiveUserStatus&&this.triggerReactivityUpdate(),this.lastSyncTime=h}catch{}},triggerReactivityUpdate(){this.reactivityKey++,this.lastStatusUpdate=Date.now(),this.$forceUpdate(),this.$nextTick(()=>{this.$forceUpdate(),this.forceUpdateTimeout&&clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=setTimeout(()=>{this.$forceUpdate()},100)})},recordStatusChange(t,e,s="unknown"){const r={timestamp:Date.now(),from:e,to:t,source:s,component:this.$options.name};this.statusChangeHistory.push(r),this.statusChangeHistory.length>10&&this.statusChangeHistory.shift()},showStatusUpgradeNotification(t){const r=` Congratulations! ${{start:"Start",pro:"Pro"}[t]||(t&&typeof t=="string"?t.toUpperCase():"Unknown")} subscription activated!`;this.showStatusNotification(r,"success")},showStatusNotification(t,e="info"){const s=Date.now();s-this.lastNotificationTime<2e3||(this.lastNotificationTime=s,this.$toast?this.$toast[e](t,{duration:5e3}):this.$notify?this.$notify({message:t,type:e,duration:5e3}):window.showToast?window.showToast(t,e):e&&typeof e=="string"&&e.toUpperCase())},getStatusHistory(){return{component:this.$options.name,currentStatus:this.reactiveUserStatus,history:this.statusChangeHistory,lastUpdate:this.lastStatusUpdate,mountTime:this.componentMountTime}},cleanupStatusMixin(){this.forceUpdateTimeout&&(clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=null),this.eventCleanupFunctions.forEach(t=>{try{t()}catch{}}),this.eventCleanupFunctions=[],this.globalEventHandlers={},this.statusChangeHistory=[],this.statusChangeNotifications=[]}}},lX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/></svg>'},cX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>'},uX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg>'},dX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="8" y="2" width="8" height="4" rx="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M9 14l2 2 4-4"/></svg>'},hX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>'},fX={name:"ModernSideBar",components:{HomeIcon:lX,BookOpenIcon:cX,FileTextIcon:uX,ClipboardCheckIcon:dX,SettingsIcon:hX,LanguageSwitcher:nv},mixins:[wf],props:{isOpen:{type:Boolean,default:!0}},data(){return{showLogoutModal:!1,showPremiumModal:!1,selectedFeature:null,isMobile:!1,tempSelectedMode:null,isSelectingMode:!1,userLevel:12,userStreak:7,navigationLinks:[{name:"main",label:"Dashboard",icon:"HomeIcon",description:"Overview & stats",path:"/profile/main",premium:!1},{name:"catalogue",label:"My Courses",icon:"BookOpenIcon",description:"Browse lessons",path:"/profile/catalogue",premium:!1},{name:"homeworks",label:"Assignments",icon:"FileTextIcon",description:"Practice & homework",path:"/profile/homeworks",premium:!1},{name:"tests",label:"Tests",icon:"ClipboardCheckIcon",description:"Assessment & analytics",path:"/profile/tests",premium:!0,requiredPlans:["start","pro"]},{name:"settings",label:"Settings",icon:"SettingsIcon",description:"Account & preferences",path:"/settings",premium:!1}]}},computed:{...zg(["user"]),...tn(["getUser"]),...tn("user",["userStatus"]),currentUser(){return this.getUser||this.user||{}},currentUserStatus(){var t,e,s,r;return this.userStatus||((s=(e=(t=this.$store)==null?void 0:t.state)==null?void 0:e.user)==null?void 0:s.userStatus)||((r=this.currentUser)==null?void 0:r.subscriptionPlan)||localStorage.getItem("userStatus")||"free"},planLabel(){const t=this.currentUserStatus;return t==="pro"?"Pro":t==="start"?"Start":"Free"},planClass(){return`plan-${this.currentUserStatus}`},userDisplayName(){var t;return this.user&&(this.user.name||this.user.displayName||((t=this.user.email)==null?void 0:t.split("@")[0]))||"User"},getUserInitials(){return this.userDisplayName.substring(0,2).toUpperCase()},hasSelectedMode(){return this.$store.getters["platformMode/hasSelectedMode"]},isSchoolMode(){return this.$store.getters["platformMode/isSchoolMode"]},isStudyCentreMode(){return this.$store.getters["platformMode/isStudyCentreMode"]}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile),Bc(pe,t=>{var e;if(t){const s={name:t.displayName||((e=t.email)==null?void 0:e.split("@")[0]),displayName:t.displayName,email:t.email,uid:t.uid};this.setUser(s)}else this.clearUser()}),window.addEventListener("userStatusChanged",this.handleStatusUpdate),window.addEventListener("subscriptionUpdated",this.handleStatusUpdate),window.addEventListener("forceUpdate",this.handleStatusUpdate)},beforeUnmount(){window.removeEventListener("resize",this.checkMobile),window.removeEventListener("userStatusChanged",this.handleStatusUpdate),window.removeEventListener("subscriptionUpdated",this.handleStatusUpdate),window.removeEventListener("forceUpdate",this.handleStatusUpdate)},methods:{...CE(["setUser","clearUser"]),handleStatusUpdate(){this.$forceUpdate()},hasAccess(t){if(!t.premium)return!0;const e=this.currentUserStatus;return t.requiredPlans?t.requiredPlans.includes(e):!0},handleNavClick(t){if(t.premium&&!this.hasAccess(t)){this.selectedFeature=t,this.showPremiumModal=!0;return}this.$router.push(t.path),this.closeSidebarOnMobile()},goToUpgrade(){this.showPremiumModal=!1,this.$router.push("/settings"),this.closeSidebarOnMobile()},async selectInitialMode(t){if(!this.isSelectingMode){this.tempSelectedMode=t,this.isSelectingMode=!0;try{const e=this.$store.getters.getFirebaseUserId;if(!e)return;try{await ov(e,t,"Initial mode selection")}catch{}await this.$store.dispatch("platformMode/switchMode",{newMode:t,reason:"Initial mode selection"}),this.closeSidebarOnMobile()}catch{this.tempSelectedMode=null}finally{this.isSelectingMode=!1}}},async switchToSchool(){if(!this.isSchoolMode)try{await this.$store.dispatch("platformMode/switchMode",{newMode:"school",reason:"User switched via sidebar"}),this.closeSidebarOnMobile()}catch{}},async switchToStudyCentre(){if(!this.isStudyCentreMode)try{await this.$store.dispatch("platformMode/switchMode",{newMode:"study_centre",reason:"User switched via sidebar"}),this.closeSidebarOnMobile()}catch{}},checkMobile(){this.isMobile=window.innerWidth<=768},closeSidebar(){this.$emit("toggle-sidebar",!1)},closeSidebarOnMobile(){this.isMobile&&this.closeSidebar()},async logout(){try{await jk(pe),this.clearUser(),localStorage.clear(),this.$router.push("/")}catch{}},isActive(t){const e=this.$route.path;return t==="main"?e==="/profile/main"||e==="/profile"||e==="/profile/":t==="settings"?e==="/settings":e.includes(`/profile/${t}`)},getNavLabel(t){return{main:this.$t("sidebar.dashboard"),catalogue:this.$t("sidebar.myCourses"),homeworks:this.$t("sidebar.assignments"),tests:this.$t("sidebar.tests"),settings:this.$t("sidebar.settings")}[t]||t},getNavDesc(t){return{main:this.$t("sidebar.overviewStats"),catalogue:this.$t("sidebar.browseLessons"),homeworks:this.$t("sidebar.practiceHomework"),tests:this.$t("sidebar.assessmentAnalytics"),settings:this.$t("sidebar.accountPreferences")}[t]||""}}},pX={class:"sidebar-wrapper"},mX={class:"sidebar-content"},gX={class:"sidebar-brand"},yX={class:"brand-info"},vX={class:"brand-tagline"},_X={class:"user-card"},bX={class:"user-avatar"},wX={class:"avatar-text"},SX={class:"user-info"},EX={class:"user-name"},TX={class:"user-stats"},kX={class:"stat-item"},IX={class:"stat-value"},CX={class:"stat-label"},AX={class:"stat-item"},PX={class:"stat-value"},xX={class:"stat-label"},LX={class:"mode-selector"},RX={class:"mode-label"},NX={class:"mode-toggle"},OX={class:"mode-text"},DX={class:"mode-text"},MX={class:"nav-menu"},$X={class:"nav-section"},UX={class:"nav-section-title"},FX=["onClick"],VX={class:"nav-icon"},qX={class:"nav-content"},BX={class:"nav-title"},jX={class:"nav-desc"},HX={key:0,class:"nav-badge"},zX={key:1,class:"nav-arrow"},WX={key:0,class:"upgrade-card"},GX={class:"upgrade-content"},KX={class:"upgrade-text"},YX={class:"sidebar-footer"},QX={class:"language-section"},XX={class:"modal-title"},JX={class:"modal-text"},ZX={class:"modal-actions"},eJ={class:"premium-header"},tJ={class:"premium-benefits"},sJ={class:"benefit"},rJ={class:"benefit"},nJ={class:"benefit"},iJ={class:"modal-actions"};function oJ(t,e,s,r,n,i){const o=es("LanguageSwitcher");return b(),S("div",pX,[a("aside",{class:ye(["sidebar",{open:s.isOpen}])},[e[26]||(e[26]=a("div",{class:"sidebar-bg"},null,-1)),a("div",mX,[a("div",gX,[e[16]||(e[16]=a("img",{src:Aa,alt:"ACED",class:"brand-logo-img"},null,-1)),a("div",yX,[e[14]||(e[14]=a("h1",{class:"brand-name"},"ACED",-1)),a("span",vX,p(t.$t("sidebar.learningPlatform")),1)]),a("button",{class:"close-btn",onClick:e[0]||(e[0]=(...l)=>i.closeSidebar&&i.closeSidebar(...l))},e[15]||(e[15]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),a("div",_X,[a("div",bX,[a("span",wX,p(i.getUserInitials),1)]),a("div",SX,[a("h3",EX,p(i.userDisplayName),1),a("span",{class:ye(["user-plan",i.planClass])},p(i.planLabel),3)]),a("div",TX,[a("div",kX,[a("span",IX,p(n.userLevel),1),a("span",CX,p(t.$t("sidebar.level")),1)]),e[17]||(e[17]=a("div",{class:"stat-divider"},null,-1)),a("div",AX,[a("span",PX,p(n.userStreak),1),a("span",xX,p(t.$t("sidebar.streak")),1)])])]),a("div",LX,[a("div",RX,p(t.$t("sidebar.learningMode")),1),a("div",NX,[a("button",{class:ye(["mode-option",{active:i.isSchoolMode}]),onClick:e[1]||(e[1]=(...l)=>i.switchToSchool&&i.switchToSchool(...l))},[e[18]||(e[18]=a("span",{class:"mode-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),a("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})])],-1)),a("span",OX,p(t.$t("sidebar.school")),1)],2),a("button",{class:ye(["mode-option",{active:i.isStudyCentreMode}]),onClick:e[2]||(e[2]=(...l)=>i.switchToStudyCentre&&i.switchToStudyCentre(...l))},[e[19]||(e[19]=a("span",{class:"mode-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),a("span",DX,p(t.$t("sidebar.studyCentre")),1)],2)])]),a("nav",MX,[a("div",$X,[a("span",UX,p(t.$t("sidebar.menu")),1),(b(!0),S(he,null,be(n.navigationLinks,l=>(b(),S("button",{key:l.name,onClick:c=>i.handleNavClick(l),class:ye(["nav-item",{active:i.isActive(l.name),locked:l.premium&&!i.hasAccess(l)}])},[a("div",VX,[(b(),ts(Sh(l.icon)))]),a("div",qX,[a("span",BX,p(i.getNavLabel(l.name)),1),a("span",jX,p(i.getNavDesc(l.name)),1)]),l.premium&&!i.hasAccess(l)?(b(),S("div",HX,e[20]||(e[20]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 20h20M4 16V8l4 4 4-6 4 6 4-4v8"})],-1)]))):(b(),S("div",zX,e[21]||(e[21]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 18l6-6-6-6"})],-1)])))],10,FX))),128))])]),i.currentUserStatus!=="pro"?(b(),S("div",WX,[e[24]||(e[24]=a("div",{class:"upgrade-bg"},null,-1)),a("div",GX,[e[23]||(e[23]=a("div",{class:"upgrade-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})])],-1)),a("div",KX,[a("h4",null,p(t.$t("sidebar.upgradeToPro")),1),a("p",null,p(t.$t("sidebar.unlockAllFeatures")),1)]),a("button",{class:"upgrade-btn",onClick:e[3]||(e[3]=(...l)=>i.goToUpgrade&&i.goToUpgrade(...l))},e[22]||(e[22]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)]))])])):W("",!0),a("div",YX,[a("button",{class:"footer-btn logout-btn",onClick:e[4]||(e[4]=l=>n.showLogoutModal=!0)},[e[25]||(e[25]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a("polyline",{points:"16 17 21 12 16 7"}),a("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)),a("span",null,p(t.$t("sidebar.logOut")),1)]),a("div",QX,[xe(o)])])])],2),s.isOpen&&n.isMobile?(b(),S("div",{key:0,class:"sidebar-overlay",onClick:e[5]||(e[5]=(...l)=>i.closeSidebar&&i.closeSidebar(...l))})):W("",!0),(b(),ts(md,{to:"body"},[n.showLogoutModal?(b(),S("div",{key:0,class:"modal-overlay",onClick:e[9]||(e[9]=l=>n.showLogoutModal=!1)},[a("div",{class:"modal-card",onClick:e[8]||(e[8]=gt(()=>{},["stop"]))},[e[27]||(e[27]=a("div",{class:"modal-icon warning"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a("polyline",{points:"16 17 21 12 16 7"}),a("line",{x1:"21",y1:"12",x2:"9",y2:"12"})])],-1)),a("h3",XX,p(t.$t("sidebar.logOut")),1),a("p",JX,p(t.$t("sidebar.confirmLogout")),1),a("div",ZX,[a("button",{class:"modal-btn secondary",onClick:e[6]||(e[6]=l=>n.showLogoutModal=!1)},p(t.$t("common.cancel")),1),a("button",{class:"modal-btn danger",onClick:e[7]||(e[7]=(...l)=>i.logout&&i.logout(...l))},p(t.$t("sidebar.logOut")),1)])])])):W("",!0)])),(b(),ts(md,{to:"body"},[n.showPremiumModal?(b(),S("div",{key:0,class:"modal-overlay",onClick:e[13]||(e[13]=l=>n.showPremiumModal=!1)},[a("div",{class:"modal-card premium",onClick:e[12]||(e[12]=gt(()=>{},["stop"]))},[a("div",eJ,[e[28]||(e[28]=a("div",{class:"premium-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 20h20M4 16V8l4 4 4-6 4 6 4-4v8"})])],-1)),a("h3",null,p(t.$t("sidebar.premiumFeature")),1),a("p",null,p(t.$t("sidebar.unlockWithPlan")),1)]),a("div",tJ,[a("div",sJ,[e[29]||(e[29]=a("span",{class:"benefit-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("span",null,p(t.$t("sidebar.unlimitedTests")),1)]),a("div",rJ,[e[30]||(e[30]=a("span",{class:"benefit-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("span",null,p(t.$t("sidebar.detailedAnalytics")),1)]),a("div",nJ,[e[31]||(e[31]=a("span",{class:"benefit-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("span",null,p(t.$t("sidebar.aiHomeworkHelp")),1)])]),a("div",iJ,[a("button",{class:"modal-btn secondary",onClick:e[10]||(e[10]=l=>n.showPremiumModal=!1)},p(t.$t("sidebar.maybeLater")),1),a("button",{class:"modal-btn primary",onClick:e[11]||(e[11]=(...l)=>i.goToUpgrade&&i.goToUpgrade(...l))},p(t.$t("sidebar.upgradeNow")),1)])])])):W("",!0)]))])}const aJ=tt(fX,[["render",oJ],["__scopeId","data-v-07c3fda0"]]),lJ={name:"ProfilePage",components:{SideBar:aJ},mixins:[wf],data(){return{sidebarOpen:!0,hasNotifications:!0,showFab:!0,componentKey:0,lastUpdate:Date.now()}},computed:{currentPageTitle(){const t=this.$route.name;return{"profile-main":this.$t("profilePage.dashboard"),"profile-catalogue":this.$t("profilePage.myCourses"),"profile-homeworks":this.$t("profilePage.assignments"),"profile-tests":this.$t("profilePage.testsAnalytics"),settings:this.$t("profilePage.settings")}[t]||this.$t("profilePage.dashboard")},mainContentClass(){return{"with-sidebar":this.sidebarOpen,[`user-${this.userStatus}`]:!0,"premium-user":this.isPremiumUser,updated:this.lastUpdate>Date.now()-5e3}}},watch:{userStatus:{handler(){this.triggerComponentUpdate()},immediate:!0}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile),this.setupProfileEventListeners()},beforeUnmount(){window.removeEventListener("resize",this.checkMobile),this.cleanupProfileEventListeners()},methods:{toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},handleSidebarToggle(t){this.sidebarOpen=t},checkMobile(){window.innerWidth<=768&&(this.sidebarOpen=!1)},triggerComponentUpdate(){this.componentKey++,this.lastUpdate=Date.now(),this.$forceUpdate()},setupProfileEventListeners(){typeof window<"u"&&window.eventBus&&(this.profileStatusHandler=()=>{this.triggerComponentUpdate()},window.eventBus.on("userStatusChanged",this.profileStatusHandler),window.eventBus.on("promocodeApplied",this.profileStatusHandler))},cleanupProfileEventListeners(){typeof window<"u"&&window.eventBus&&this.profileStatusHandler&&(window.eventBus.off("userStatusChanged",this.profileStatusHandler),window.eventBus.off("promocodeApplied",this.profileStatusHandler))},toggleNotifications(){},toggleSearch(){},openQuickActions(){}}},cJ={class:"profile-page"},uJ={class:"profile-header"},dJ=["aria-label"],hJ={class:"header-breadcrumb"},fJ={class:"breadcrumb-text"},pJ={class:"header-actions"},mJ={key:0,class:"notification-dot"},gJ={class:"profile-content"};function yJ(t,e,s,r,n,i){const o=es("SideBar"),l=es("router-link"),c=es("router-view");return b(),S("div",cJ,[xe(o,{isOpen:n.sidebarOpen,onToggleSidebar:i.handleSidebarToggle},null,8,["isOpen","onToggleSidebar"]),a("main",{class:ye(["profile-main",{"sidebar-collapsed":!n.sidebarOpen}])},[a("header",uJ,[a("button",{class:"menu-toggle",onClick:e[0]||(e[0]=(...u)=>i.toggleSidebar&&i.toggleSidebar(...u)),"aria-label":t.$t("common.toggleNavigation")},e[4]||(e[4]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)]),8,dJ),a("div",hJ,[xe(l,{to:"/profile/main",class:"breadcrumb-icon home-link"},{default:Qt(()=>e[5]||(e[5]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a("path",{d:"M9 22V12h6v10"})],-1)])),_:1}),a("span",fJ,p(i.currentPageTitle),1)]),a("div",pJ,[a("button",{class:"action-btn notification-btn",onClick:e[1]||(e[1]=(...u)=>i.toggleNotifications&&i.toggleNotifications(...u))},[e[6]||(e[6]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),n.hasNotifications?(b(),S("span",mJ)):W("",!0)]),a("button",{class:"action-btn search-btn",onClick:e[2]||(e[2]=(...u)=>i.toggleSearch&&i.toggleSearch(...u))},e[7]||(e[7]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1)]))])]),a("div",gJ,[xe(c,null,{default:Qt(({Component:u})=>[xe(ma,{name:"page-fade",mode:"out-in"},{default:Qt(()=>[(b(),ts(Sh(u)))]),_:2},1024)]),_:1})])],2),n.showFab?(b(),S("button",{key:0,class:"fab-button",onClick:e[3]||(e[3]=(...u)=>i.openQuickActions&&i.openQuickActions(...u))},e[8]||(e[8]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 8v8M8 12h8"})],-1)]))):W("",!0)])}const vJ=tt(lJ,[["render",yJ],["__scopeId","data-v-dce4b0cd"]]),Vr=Se(null),Er=Se(!0),ml=Se(!1),Gn=Se(null),Nt=Se(null),Ru=[];function _J(){const t=Ph(),e=_e(()=>Vr.value),s=_e(()=>Er.value),r=_e(()=>ml.value),n=_e(()=>Gn.value),i=_e(()=>Nt.value),o=()=>Bc(pe,async M=>{var A;Er.value=!0,Nt.value=null;try{if(M){Vr.value=M,ml.value=!0,Gn.value={uid:M.uid,email:M.email,displayName:M.displayName,photoURL:M.photoURL,emailVerified:M.emailVerified,phoneNumber:M.phoneNumber,createdAt:M.metadata.creationTime,lastLoginAt:M.metadata.lastSignInTime};try{const w=await M.getIdToken(),{saveUser:_}=await mt(async()=>{const{saveUser:P}=await Promise.resolve().then(()=>HK);return{saveUser:P}},void 0);await _({token:w,name:M.displayName||((A=M.email)==null?void 0:A.split("@")[0])||"User",email:M.email,subscriptionPlan:"free"})}catch{}}else Vr.value=null,ml.value=!1,Gn.value=null}catch(w){Nt.value=w.message}finally{Er.value=!1}Ru.forEach(w=>{try{w(M)}catch{}})}),l=async($,M)=>{try{return Er.value=!0,Nt.value=null,{success:!0,user:(await Bk(pe,$,M)).user}}catch(A){return Nt.value=E(A),{success:!1,error:Nt.value}}finally{Er.value=!1}},c=async($,M,A="")=>{try{Er.value=!0,Nt.value=null;const _=(await qk(pe,$,M)).user;A.trim()&&await pb(_,{displayName:A.trim()});try{await YU(_)}catch{}return{success:!0,user:_}}catch(w){return Nt.value=E(w),{success:!1,error:Nt.value}}finally{Er.value=!1}},u=async()=>{try{Er.value=!0,Nt.value=null;const $=new Wr;$.addScope("email"),$.addScope("profile");const M=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let A;return M?(await IF(pe,$),{success:!0,pending:!0}):(A=await eI(pe,$),{success:!0,user:A.user})}catch($){return Nt.value=E($),{success:!1,error:Nt.value}}finally{Er.value=!1}},h=async()=>{try{const $=await AF(pe);return $?{success:!0,user:$.user}:{success:!0,user:null}}catch($){return Nt.value=E($),{success:!1,error:Nt.value}}},f=async()=>{try{return Er.value=!0,Nt.value=null,await jk(pe),Vr.value=null,ml.value=!1,Gn.value=null,t.push("/auth/login"),{success:!0}}catch($){return Nt.value=E($),{success:!1,error:Nt.value}}finally{Er.value=!1}},m=async $=>{try{return Nt.value=null,await Vk(pe,$),{success:!0}}catch(M){return Nt.value=E(M),{success:!1,error:Nt.value}}},g=async $=>{try{if(!Vr.value)throw new Error("No authenticated user");return Nt.value=null,await pb(Vr.value,$),Gn.value&&(Gn.value={...Gn.value,...$}),{success:!0}}catch(M){return Nt.value=E(M),{success:!1,error:Nt.value}}},v=async()=>{try{if(!Vr.value)throw new Error("No authenticated user");return{success:!0,token:await Vr.value.getIdToken(!0)}}catch($){return{success:!1,error:$.message}}},I=async()=>{try{return Vr.value?await Vr.value.getIdToken():null}catch{return null}},C=$=>Gn.value?ml.value:!1,U=$=>(Ru.push($),()=>{const M=Ru.indexOf($);M>-1&&Ru.splice(M,1)}),D=()=>{Nt.value=null},E=$=>({"auth/user-not-found":"User with this email not found","auth/wrong-password":"Incorrect password","auth/email-already-in-use":"User with this email already exists","auth/weak-password":"Password must contain at least 6 characters","auth/invalid-email":"Invalid email format","auth/user-disabled":"Account disabled","auth/too-many-requests":"Too many login attempts. Please try again later","auth/network-request-failed":"Network error. Check your internet connection","auth/popup-closed-by-user":"Authorization window was closed","auth/popup-blocked":"Browser blocked the popup window","auth/invalid-credential":"Invalid credentials","auth/expired-action-code":"Link expired","auth/invalid-action-code":"Invalid link"})[$.code]||$.message||"An authorization error occurred";let L=null;return br(async()=>{L=o(),await h()}),Ri(()=>{L&&L()}),{currentUser:e,isLoading:s,isAuthenticated:r,userProfile:n,authError:i,signIn:l,signUp:c,signInWithGoogle:u,signOut:f,resetPassword:m,updateUserProfile:g,refreshToken:v,getToken:I,hasPermission:C,onAuthStateChange:U,clearError:D,initializeAuth:o,handleRedirectResult:h}}const bJ={class:"vocabulary-page"},wJ={class:"page-header"},SJ={class:"header-content"},EJ={class:"header-info"},TJ={class:"page-title"},kJ={key:0,class:"breadcrumb-text"},IJ={key:0,class:"loading-state"},CJ={key:1,class:"content-container"},AJ={key:0,class:"empty-state"},PJ={class:"empty-text"},xJ={class:"empty-subtext"},LJ={key:1,class:"cards-grid"},RJ=["onClick"],NJ={class:"card-icon"},OJ={class:"card-content"},DJ={class:"card-title"},MJ={class:"card-stats"},$J={class:"stat-item"},UJ={class:"stat-number"},FJ={class:"stat-label"},VJ={class:"stat-item"},qJ={class:"stat-number"},BJ={class:"stat-label"},jJ={class:"progress-section"},HJ={class:"progress-bar-container"},zJ={class:"progress-text"},WJ={key:2,class:"content-container"},GJ={class:"cards-grid"},KJ=["onClick"],YJ={class:"card-header-row"},QJ={class:"level-badge"},XJ={class:"level-icon"},JJ={class:"level-number"},ZJ={class:"card-description"},eZ={class:"card-stats-row"},tZ={class:"stat-group"},sZ={class:"stat-group"},rZ={key:3,class:"content-container"},nZ={class:"cards-grid"},iZ=["onClick"],oZ={class:"card-icon-wrapper"},aZ={class:"topic-emoji"},lZ={class:"card-content"},cZ={class:"card-title"},uZ={class:"card-subtitle"},dZ={class:"word-count"},hZ={key:4,class:"content-container"},fZ={class:"words-header"},pZ={class:"search-container"},mZ=["placeholder"],gZ={class:"words-grid"},yZ=["onClick"],vZ={class:"word-header"},_Z={class:"word-text"},bZ=["onClick"],wZ={class:"word-translation"},SZ={key:0,class:"word-definition"},EZ={class:"word-meta"},TZ={class:"meta-badge pos"},kZ={class:"word-progress"},IZ={class:"progress-bar-container small"},CZ={class:"progress-percent"},AZ={class:"modal-header"},PZ={class:"modal-title-row"},xZ={key:0,class:"pronunciation-row"},LZ={class:"pronunciation-text"},RZ={class:"modal-body"},NZ={class:"translation-section"},OZ={class:"translation-large"},DZ={class:"meta-tags"},MZ={class:"meta-badge pos"},$Z={key:0,class:"definition-section"},UZ={class:"definition-text"},FZ={key:1,class:"examples-section"},VZ={class:"example-sentence"},qZ={class:"example-translation"},BZ={class:"modal-footer"},jZ={class:"toast-content"},HZ={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},zZ={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},WZ={key:2,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},GZ={__name:"VocabularyPage",setup(t){const{currentUser:e}=_J(),s=Se(!1),r=Se("languages"),n=Se(null),i=Se(null),o=Se(null),l=Se(null),c=Se(""),u=Se(!1),h=Se([]),f=Se([]),m=Se([]),g=Se([]),v=Se({visible:!1,message:"",type:"success"}),I=_e(()=>r.value!=="languages"),C=_e(()=>{var T,q;switch(r.value){case"languages":return" My Vocabulary";case"levels":return((T=n.value)==null?void 0:T.name)||"Levels";case"topics":return`Level ${i.value} - Topics`;case"words":return((q=o.value)==null?void 0:q.name)||"Words";default:return"Vocabulary"}}),U=_e(()=>{const T=[];return n.value&&T.push(n.value.name),i.value&&T.push(`Level ${i.value}`),o.value&&T.push(o.value.name),T.join("  ")}),D=_e(()=>{let T=g.value;if(c.value){const q=c.value.toLowerCase();T=T.filter(Q=>Q.word.toLowerCase().includes(q)||Q.translation.toLowerCase().includes(q))}return u.value||(T=T.filter(q=>(q.progress||0)<90)),T}),E=async(T,q=null)=>{try{if(!T)return P(q);let Q;try{Q=await fetch(`https://api.aced.live/users/${T}/progress`)}catch{return await _(q)}if(!Q||!Q.ok)return await _(q);let H;try{H=await Q.json()}catch{return await _(q)}const J=(Array.isArray(H)?H:H.data||[]).filter(X=>X&&X.completed&&X.lessonId);if(J.length===0)return P(q);const O=[];for(const X of J.slice(0,20))try{if(!X||!X.lessonId)continue;const oe=await fetch(`https://api.aced.live/lessons/${X.lessonId}`);if(!oe.ok)continue;const ie=await oe.json(),z=ie.lesson||ie;if(!z||!z.steps||!Array.isArray(z.steps))continue;z.steps.forEach((K,Ce)=>{!K||!K.type||(K.type==="vocabulary"&&K.data&&(Array.isArray(K.data)?K.data:[K.data]).forEach((ft,wt)=>{if(L(ft)){const Et=$(ft,z,X,`${Ce}_${wt}`);Et&&O.push(Et)}}),K.vocabulary&&Array.isArray(K.vocabulary)&&K.vocabulary.forEach((Ae,ft)=>{if(L(Ae)){const wt=$(Ae,z,X,`vocab_${Ce}_${ft}`);wt&&O.push(wt)}}))})}catch{continue}const V=[],j=new Set;return O.forEach(X=>{if(!X||!X.word||!X.language)return;const oe=`${X.word.toLowerCase()}_${X.language.toLowerCase()}`;j.has(oe)||(j.add(oe),V.push(X))}),q?V.filter(X=>X&&X.language&&X.language.toLowerCase()===q.toLowerCase()):V}catch{return P(q)}},L=T=>{if(!T||typeof T!="object")return!1;const q=T.term&&T.definition,Q=T.word&&T.translation,H=T.front&&T.back,Y=T.question&&T.answer;return q||Q||H||Y},$=(T,q,Q,H)=>{try{if(!T||typeof T!="object")return null;let Y,J,O="",V=[];if(T.term&&T.definition)Y=T.term,J=T.definition,O=T.example||T.description||"";else if(T.word&&T.translation)Y=T.word,J=T.translation,O=T.definition||T.example||"";else if(T.front&&T.back)Y=T.front,J=T.back,O=T.hint||T.example||"";else if(T.question&&T.answer)Y=T.question,J=T.answer,O=T.explanation||"";else return null;if(!Y||!J||typeof Y!="string"||typeof J!="string")return null;T.example&&typeof T.example=="string"&&V.push({sentence:T.example,translation:J}),T.examples&&Array.isArray(T.examples)&&(V=[...V,...T.examples.filter(X=>X&&typeof X=="object")]);const j=A(q);return{id:`${Q.lessonId}_${H}_${Y}`,word:Y.trim(),translation:J.trim(),definition:(O||"").trim(),language:j,topic:q.topic||q.subject||"General",lessonName:M(q),level:q.level||1,partOfSpeech:T.partOfSpeech||T.type||"noun",difficulty:w(q.level||1),progress:Math.round(Q.progressPercent||0),examples:V,pronunciation:T.pronunciation||"",metadata:{source:"lesson_extraction",lessonId:q._id,stepType:"vocabulary",extractedAt:new Date().toISOString()}}}catch{return null}},M=T=>{if(!T)return"Unknown Lesson";const q=localStorage.getItem("lang")||"ru";if(T.title&&typeof T.title=="string")return T.title;if(T.lessonName){if(typeof T.lessonName=="string")return T.lessonName;if(typeof T.lessonName=="object")return T.lessonName[q]||T.lessonName.en||T.lessonName.ru||T.lessonName.uz||"Unknown Lesson"}return"Unknown Lesson"},A=T=>{const q=M(T).toLowerCase(),Q=(T.subject||"").toLowerCase(),H=(T.description||"").toLowerCase(),Y={english:["english","","","eng","vocabulary","words"],russian:["russian","","","rus"," "],spanish:["spanish","","espaol","esp"],french:["french","","franais","fr"],german:["german","","deutsch","de"],uzbek:["uzbek","","o'zbek","uz"],chinese:["chinese","","","zh"],arabic:["arabic","","","ar"],japanese:["japanese","","","jp"],korean:["korean","","","kr"]},J=`${q} ${Q} ${H}`.toLowerCase();for(const[O,V]of Object.entries(Y))if(V.some(j=>J.includes(j)))return O;return"english"},w=T=>T<=2?"beginner":T<=4?"intermediate":"advanced",_=async(T=null)=>{try{const q=await fetch("https://api.aced.live/lessons");if(!q.ok)return P(T);const Q=await q.json(),H=Array.isArray(Q)?Q:[],Y=[];return H.slice(0,10).forEach(J=>{!J||!J.steps||J.steps.forEach((O,V)=>{!O||!O.type||O.type==="vocabulary"&&O.data&&(Array.isArray(O.data)?O.data:[O.data]).forEach((X,oe)=>{if(L(X)){const ie={lessonId:J._id,progressPercent:0,updatedAt:new Date().toISOString()},z=$(X,J,ie,`${V}_${oe}`);z&&Y.push(z)}})})}),T?Y.filter(J=>J.language&&J.language.toLowerCase()===T.toLowerCase()):Y}catch{return P(T)}},P=(T=null)=>{const q=[{id:"hello_en",word:"Hello",translation:"Hello",language:"english",topic:"Greetings",level:1,progress:75,partOfSpeech:"interjection",difficulty:"beginner",definition:"A greeting used when meeting someone"},{id:"goodbye_en",word:"Goodbye",translation:"Goodbye",language:"english",topic:"Greetings",level:1,progress:50,partOfSpeech:"interjection",difficulty:"beginner",definition:"A farewell greeting"},{id:"house_en",word:"House",translation:"House",language:"english",topic:"Home",level:1,progress:90,partOfSpeech:"noun",difficulty:"beginner",definition:"A building for human habitation"},{id:"water_en",word:"Water",translation:"Water",language:"english",topic:"Nature",level:1,progress:100,partOfSpeech:"noun",difficulty:"beginner",definition:"A clear liquid that forms the seas, lakes, rivers, and rain"},{id:"computer_en",word:"Computer",translation:"Computer",language:"english",topic:"Technology",level:2,progress:25,partOfSpeech:"noun",difficulty:"intermediate",definition:"An electronic device for storing and processing data"},{id:"hola_es",word:"Hola",translation:"Hello",language:"spanish",topic:"Greetings",level:1,progress:60,partOfSpeech:"interjection",difficulty:"beginner",definition:"A Spanish greeting"},{id:"casa_es",word:"Casa",translation:"House",language:"spanish",topic:"Home",level:1,progress:80,partOfSpeech:"noun",difficulty:"beginner",definition:"A house or home in Spanish"},{id:"bonjour_fr",word:"Bonjour",translation:"Hello",language:"french",topic:"Greetings",level:1,progress:40,partOfSpeech:"interjection",difficulty:"beginner",definition:"A French greeting meaning good day"}];return T?q.filter(Q=>Q.language===T):q},R=async T=>{n.value=T,r.value="levels",await le(T)},x=async T=>{i.value=T.level,r.value="topics",await $e(n.value,T.level)},N=async T=>{o.value=T,r.value="words",await vt(n.value,i.value,T)},ue=T=>{l.value=T},de=()=>{l.value=null},ce=()=>{switch(r.value){case"levels":r.value="languages",n.value=null,f.value=[];break;case"topics":r.value="levels",i.value=null,m.value=[];break;case"words":r.value="topics",o.value=null,g.value=[];break}},te=async()=>{var T;s.value=!0;try{const q=((T=e.value)==null?void 0:T.uid)||"demo_user",Q=await E(q);if(!Q||Q.length===0){B("Vocabulary is empty. Start studying lessons to add words!","warning"),h.value=[];return}const H=new Map;Q.forEach(Y=>{var j;if(!Y||!Y.language)return;const J=Y.language||"english";if(!H.has(J)){const X=me(J);H.set(J,{code:J,name:X.name,flag:X.flag,totalWords:0,levels:new Set,mastered:0})}const O=H.get(J);O.totalWords++;const V=Y.level||((j=Y.metadata)==null?void 0:j.lessonLevel)||1;O.levels.add(V),Y.progress>=90&&O.mastered++}),h.value=Array.from(H.values()).map(Y=>({...Y,levels:Array.from(Y.levels).sort((J,O)=>J-O),progress:Y.totalWords>0?Math.round(Y.mastered/Y.totalWords*100):0})).filter(Y=>Y.totalWords>0),h.value.length===0&&B("No available languages in vocabulary","warning")}catch{B("Error loading languages","error"),h.value=[]}finally{s.value=!1}},le=async T=>{var q;s.value=!0;try{const Q=((q=e.value)==null?void 0:q.uid)||"demo_user",H=await E(Q,T.code),Y=new Map;H.forEach(J=>{var X;if(!J)return;const O=J.level||((X=J.metadata)==null?void 0:X.lessonLevel)||1;Y.has(O)||Y.set(O,{level:O,totalWords:0,topics:new Set});const V=Y.get(O);V.totalWords++;const j=J.topic||J.lessonName||"General";V.topics.add(j)}),f.value=Array.from(Y.values()).map(J=>({...J,topicCount:J.topics.size})).sort((J,O)=>J.level-O.level)}catch{B("Error loading levels","error")}finally{s.value=!1}},$e=async(T,q)=>{var Q;s.value=!0;try{const H=((Q=e.value)==null?void 0:Q.uid)||"demo_user",Y=await E(H,T.code),J=new Map;Y.filter(O=>O&&(O.level||1)===q).forEach(O=>{const V=O.topic||O.lessonName||"General";J.has(V)||J.set(V,{name:V,name:V,totalWords:0,words:[]});const j=J.get(V);j.totalWords++,j.words.push(O)}),m.value=Array.from(J.values()).sort((O,V)=>O.name.localeCompare(V.name))}catch{B("Error loading topics","error")}finally{s.value=!1}},vt=async(T,q,Q)=>{s.value=!0;try{const H=[],Y=new Set;Q.words.forEach(J=>{if(!J||!J.word)return;const O=J.word.toLowerCase();Y.has(O)||(Y.add(O),H.push({...J,id:J.id||`${J.word}_${J.language}`,isLearned:J.progress>=90}))}),g.value=H.sort((J,O)=>J.word.localeCompare(O.word))}finally{s.value=!1}},me=T=>({english:{name:"English",flag:""},spanish:{name:"Spanish",flag:""},french:{name:"French",flag:""},german:{name:"German",flag:""},chinese:{name:"Chinese",flag:""},arabic:{name:"Arabic",flag:""},japanese:{name:"Japanese",flag:""},korean:{name:"Korean",flag:""},uzbek:{name:"Uzbek",flag:""},russian:{name:"Russian",flag:""}})[T]||{name:T,flag:""},Oe=T=>["","","","","",""][T-1]||"",Be=T=>({1:"Basic words and phrases",2:"Everyday vocabulary",3:"Extended vocabulary",4:"Advanced topics",5:"Specialized vocabulary"})[T]||`Level ${T}`,Rt=T=>T<=2?"beginner":T<=4?"intermediate":"advanced",_t=T=>({beginner:"Easy",intermediate:"Medium",advanced:"Hard"})[T]||T,bt=T=>({Travel:"",Business:"",Food:"",Family:"",Education:"",Health:"",Technology:"",Sports:"",Music:"",Art:"",Nature:"",Animals:"",Greetings:"",Home:"",General:""})[T]||"",se=T=>T,we=T=>({Travel:"Words for travel",Business:"Business vocabulary",Food:"Food and drinks",Greetings:"Greetings and introductions",Home:"Home and family",Technology:"Computers and technology"})[T]||`Learn words about "${T}"`,ge=T=>({noun:"noun",verb:"verb",adjective:"adj.",adverb:"adv.",phrase:"phrase",interjection:"interj."})[T]||T,Ee=T=>{var q;if("speechSynthesis"in window){const Q=new SpeechSynthesisUtterance(T);Q.lang=((q=n.value)==null?void 0:q.code)==="russian"?"ru-RU":"en-US",speechSynthesis.speak(Q)}},ze=async T=>{try{T.progress=100,B("Word marked as learned"),de()}catch{B("Update error","error")}},Je=async T=>{try{T.progress=0,B("Word added for review"),de()}catch{B("Update error","error")}},B=(T,q="success")=>{v.value={visible:!0,message:T,type:q},setTimeout(()=>{v.value.visible=!1},3e3)};return br(()=>{te()}),(T,q)=>{var Q;return b(),S("div",bJ,[a("div",wJ,[a("div",SJ,[I.value?(b(),S("button",{key:0,onClick:ce,class:"back-button"},[q[6]||(q[6]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15 18 9 12 15 6"})],-1)),re(" "+p(T.$t("vocabulary.back")),1)])):W("",!0),a("div",EJ,[a("h1",TJ,p(C.value),1),U.value?(b(),S("p",kJ,p(U.value),1)):W("",!0)])])]),s.value?(b(),S("div",IJ,[q[7]||(q[7]=a("div",{class:"spinner"},null,-1)),a("p",null,p(T.$t("vocabulary.loading")),1)])):r.value==="languages"?(b(),S("div",CJ,[h.value.length===0?(b(),S("div",AJ,[q[8]||(q[8]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1)),a("p",PJ,p(T.$t("vocabulary.emptyText")),1),a("p",xJ,p(T.$t("vocabulary.emptySubtext")),1)])):(b(),S("div",LJ,[(b(!0),S(he,null,be(h.value,H=>{var Y;return b(),S("div",{key:H.code,class:"language-card",onClick:J=>R(H)},[a("div",NJ,p(H.flag),1),a("div",OJ,[a("h3",DJ,p(H.name),1),a("div",MJ,[a("div",$J,[a("span",UJ,p(H.totalWords),1),a("span",FJ,p(T.$t("vocabulary.words")),1)]),q[9]||(q[9]=a("div",{class:"stat-divider"},null,-1)),a("div",VJ,[a("span",qJ,p(((Y=H.levels)==null?void 0:Y.length)||0),1),a("span",BJ,p(T.$t("vocabulary.levels")),1)])]),a("div",jJ,[a("div",HJ,[a("div",{class:"progress-bar-fill",style:ct({width:H.progress+"%"})},null,4)]),a("span",zJ,p(H.progress)+p(T.$t("vocabulary.learned")),1)])])],8,RJ)}),128))]))])):r.value==="levels"?(b(),S("div",WJ,[a("div",GJ,[(b(!0),S(he,null,be(f.value,H=>(b(),S("div",{key:H.level,class:"level-card",onClick:Y=>x(H)},[a("div",YJ,[a("div",QJ,[a("span",XJ,p(Oe(H.level)),1),a("span",JJ,p(T.$t("vocabulary.level"))+" "+p(H.level),1)]),a("div",{class:ye(["difficulty-badge",Rt(H.level)])},p(_t(Rt(H.level))),3)]),a("p",ZJ,p(Be(H.level)),1),a("div",eZ,[a("div",tZ,[q[10]||(q[10]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1)),a("span",null,p(H.totalWords)+" "+p(T.$t("vocabulary.words")),1)]),a("div",sZ,[q[11]||(q[11]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})],-1)),a("span",null,p(H.topicCount)+" "+p(T.$t("vocabulary.topics")),1)])])],8,KJ))),128))])])):r.value==="topics"?(b(),S("div",rZ,[a("div",nZ,[(b(!0),S(he,null,be(m.value,H=>(b(),S("div",{key:H.name,class:"topic-card",onClick:Y=>N(H)},[a("div",oZ,[a("span",aZ,p(bt(H.name)),1)]),a("div",lZ,[a("h3",cZ,p(se(H.name)),1),a("p",uZ,p(we(H.name)),1),a("div",dZ,[q[12]||(q[12]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),a("span",null,p(H.totalWords)+" "+p(T.$t("vocabulary.words")),1)])])],8,iZ))),128))])])):r.value==="words"?(b(),S("div",hZ,[a("div",fZ,[a("div",pZ,[q[13]||(q[13]=a("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1)),Pe(a("input",{"onUpdate:modelValue":q[0]||(q[0]=H=>c.value=H),placeholder:T.$t("vocabulary.searchPlaceholder"),class:"search-input"},null,8,mZ),[[Ge,c.value]])]),a("button",{onClick:q[1]||(q[1]=H=>u.value=!u.value),class:ye(["filter-button",{active:u.value}])},[q[14]||(q[14]=kt('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-07cae1fc><line x1="4" y1="21" x2="4" y2="14" data-v-07cae1fc></line><line x1="4" y1="10" x2="4" y2="3" data-v-07cae1fc></line><line x1="12" y1="21" x2="12" y2="12" data-v-07cae1fc></line><line x1="12" y1="8" x2="12" y2="3" data-v-07cae1fc></line><line x1="20" y1="21" x2="20" y2="16" data-v-07cae1fc></line><line x1="20" y1="12" x2="20" y2="3" data-v-07cae1fc></line><line x1="1" y1="14" x2="7" y2="14" data-v-07cae1fc></line><line x1="9" y1="8" x2="15" y2="8" data-v-07cae1fc></line><line x1="17" y1="16" x2="23" y2="16" data-v-07cae1fc></line></svg>',1)),re(" "+p(u.value?T.$t("vocabulary.allWords"):T.$t("vocabulary.active")),1)],2)]),a("div",gZ,[(b(!0),S(he,null,be(D.value,H=>(b(),S("div",{key:H.id,class:"word-card",onClick:Y=>ue(H)},[a("div",vZ,[a("h4",_Z,p(H.word),1),a("button",{onClick:gt(Y=>Ee(H.word),["stop"]),class:"pronounce-button"},q[15]||(q[15]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),a("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})],-1)]),8,bZ)]),a("p",wZ,p(H.translation),1),H.definition?(b(),S("div",SZ,p(H.definition),1)):W("",!0),a("div",EZ,[a("span",TZ,p(ge(H.partOfSpeech)),1),a("span",{class:ye(["meta-badge difficulty",H.difficulty])},p(_t(H.difficulty)),3)]),a("div",kZ,[a("div",IZ,[a("div",{class:"progress-bar-fill",style:ct({width:(H.progress||0)+"%"})},null,4)]),a("span",CZ,p(H.progress||0)+"%",1)])],8,yZ))),128))])])):W("",!0),l.value?(b(),S("div",{key:5,class:"modal-overlay",onClick:de},[a("div",{class:"modal-card",onClick:q[5]||(q[5]=gt(()=>{},["stop"]))},[a("div",AZ,[a("div",PZ,[a("h3",null,p(l.value.word),1),a("button",{onClick:de,class:"close-button"},q[16]||(q[16]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),l.value.pronunciation?(b(),S("div",xZ,[a("span",LZ,"/"+p(l.value.pronunciation)+"/",1),a("button",{onClick:q[2]||(q[2]=H=>Ee(l.value.word)),class:"pronounce-button small"},q[17]||(q[17]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),a("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})],-1)]))])):W("",!0)]),a("div",RZ,[a("div",NZ,[a("p",OZ,p(l.value.translation),1),a("div",DZ,[a("span",MZ,p(ge(l.value.partOfSpeech)),1),a("span",{class:ye(["meta-badge difficulty",l.value.difficulty])},p(_t(l.value.difficulty)),3)])]),l.value.definition?(b(),S("div",$Z,[q[18]||(q[18]=a("h4",{class:"section-title"},"Definition",-1)),a("p",UZ,p(l.value.definition),1)])):W("",!0),(Q=l.value.examples)!=null&&Q.length?(b(),S("div",FZ,[q[19]||(q[19]=a("h4",{class:"section-title"},"Usage examples",-1)),(b(!0),S(he,null,be(l.value.examples,(H,Y)=>(b(),S("div",{key:Y,class:"example-item"},[a("p",VZ,p(H.sentence),1),a("p",qZ,p(H.translation),1)]))),128))])):W("",!0)]),a("div",BZ,[a("button",{onClick:q[3]||(q[3]=H=>Je(l.value)),class:"action-button secondary"},q[20]||(q[20]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 6L6 18M6 6l12 12"})],-1),re(" Review ")])),a("button",{onClick:q[4]||(q[4]=H=>ze(l.value)),class:"action-button primary"},q[21]||(q[21]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1),re(" I know ")]))])])])):W("",!0),v.value.visible?(b(),S("div",{key:6,class:ye(["toast-notification",v.value.type])},[a("div",jZ,[v.value.type==="success"?(b(),S("svg",HZ,q[22]||(q[22]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):v.value.type==="error"?(b(),S("svg",zZ,q[23]||(q[23]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))):(b(),S("svg",WZ,q[24]||(q[24]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),a("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)]))),a("span",null,p(v.value.message),1)])],2)):W("",!0)])}}},KZ=tt(GZ,[["__scopeId","data-v-07cae1fc"]]),YZ={name:"LessonPlayer",props:{course:{type:Object,required:!0,validator:t=>t&&(t.title||t._id)}},emits:["close","back-to-courses"],data(){return{lessons:[],structuredLessons:[],currentLessonIndex:0,quizAnswers:new Map,fullscreenPdf:null,loading:!0,error:null,courseData:null,isStructuredFormat:!1,structuredCourseData:null}},computed:{courseTitle(){var t,e;return this.structuredCourseData?this.structuredCourseData.courseTitle:((t=this.courseData)==null?void 0:t.title)||((e=this.course)==null?void 0:e.title)||""},currentLesson(){return this.isStructuredFormat?null:this.lessons[this.currentLessonIndex]||null},currentStructuredLesson(){return this.isStructuredFormat&&this.structuredLessons[this.currentLessonIndex]||null},currentLessonTitle(){if(this.isStructuredFormat&&this.currentStructuredLesson)return this.currentStructuredLesson.title||` ${this.currentLessonIndex+1}`;const t=this.currentLesson;if(!t)return" ...";if(t.title&&typeof t.title=="string")return t.title;if(t.lessonName){if(typeof t.lessonName=="string")return t.lessonName;if(typeof t.lessonName=="object"){const e=localStorage.getItem("lang")||"ru",s=t.lessonName[e]||t.lessonName.en||t.lessonName.ru||t.lessonName.uz;if(s&&typeof s=="string")return s}}return` ${this.currentLessonIndex+1}`},hasSteps(){return this.isStructuredFormat?!0:this.currentLesson&&this.currentLesson.steps&&this.currentLesson.steps.length>0},totalLessons(){return this.isStructuredFormat?this.structuredLessons.length:this.lessons.length},progressPercentage(){return this.totalLessons===0?0:(this.currentLessonIndex+1)/this.totalLessons*100},isFirstLesson(){return this.currentLessonIndex===0},isLastLesson(){return this.currentLessonIndex===this.totalLessons-1},learningObjectives(){var t;if(this.isStructuredFormat&&this.currentStructuredLesson){const e=this.currentStructuredLesson.content,s=[];return e.theory&&s.push("   "),e.practical_examples&&s.push("    "),e.homework&&s.push("     "),s.length>0?s:this.getDefaultObjectives()}return(t=this.courseData)!=null&&t.learningOutcomes&&Array.isArray(this.courseData.learningOutcomes)?this.courseData.learningOutcomes:this.getDefaultObjectives()}},watch:{course:{handler(){this.loadCourseContent()},deep:!0,immediate:!0}},methods:{async loadCourseContent(){if(!this.course||!this.course._id&&!this.course.id){this.error="  ",this.loading=!1;return}this.loading=!0,this.error=null;try{const t=this.course._id||this.course.id;let e=null,s=[];try{const n=await(await fetch(`/api/updated-courses/${t}?format=structured`)).json();if(n.success&&n.course&&(this.structuredCourseData=n.course,this.isStructuredFormat=!0,n.course.lessons&&Array.isArray(n.course.lessons))){this.structuredLessons=n.course.lessons,this.loading=!1;return}}catch{}try{const n=await(await fetch(`/api/updated-courses/${t}`)).json();n.success&&n.course&&(e=n.course,this.isStructuredFormat=!1,e.curriculum&&Array.isArray(e.curriculum)?s=this.processCurriculum(e.curriculum):e.lessons&&Array.isArray(e.lessons)&&(s=this.processStructuredLessonsToTraditional(e.lessons)))}catch{}if(!e&&s.length===0)try{const r=await uv();if(r&&r.success&&r.courses){const n=r.courses.find(i=>(i._id||i.id)===t||i.title===this.course.title);n&&(e=n,n.curriculum&&Array.isArray(n.curriculum)&&(s=this.processCurriculum(n.curriculum)))}}catch{}this.courseData=e||this.course,this.lessons=s,!this.isStructuredFormat&&s.length===0&&(this.error="      ")}catch{this.error="    . ,   ."}finally{this.loading=!1}},processStructuredLessonsToTraditional(t){return Array.isArray(t)?t.map((e,s)=>{try{return{id:e._id||`lesson_${s}`,_id:e._id||`lesson_${s}`,title:e.title||` ${s+1}`,lessonName:e.title||` ${s+1}`,description:this.extractLessonDescription(e.content),duration:e.duration||"30 ",order:e.lessonNumber-1||s,steps:this.convertStructuredContentToSteps(e.content,s)}}catch{return{id:`error_lesson_${s}`,title:` ${s+1} ()`,lessonName:` ${s+1} ()`,description:"   ",steps:[]}}}):[]},extractLessonDescription(t){var e,s,r,n,i,o;return t?(r=(s=(e=t.theory)==null?void 0:e.concepts)==null?void 0:s[0])!=null&&r.content?t.theory.concepts[0].content.substring(0,200)+"...":(o=(i=(n=t.practical_examples)==null?void 0:n.exercises)==null?void 0:i[0])!=null&&o.instructions?" : "+t.practical_examples.exercises[0].instructions.substring(0,150)+"...":" ":""},convertStructuredContentToSteps(t,e){var n,i,o,l;const s=[];let r=0;return(n=t.theory)!=null&&n.concepts?t.theory.concepts.forEach(c=>{s.push({id:`step_${e}_${r++}`,type:"explanation",title:c.title||"",content:c.content||"",data:{content:c.content||"",images:c.images||[]},images:c.images||[]})}):typeof t.theory=="object"&&t.theory&&Object.entries(t.theory).forEach(([c,u])=>{s.push({id:`step_${e}_${r++}`,type:"explanation",title:this.formatSectionTitle(c),content:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u,data:{content:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u}})}),(i=t.practical_examples)!=null&&i.exercises?t.practical_examples.exercises.forEach(c=>{s.push({id:`step_${e}_${r++}`,type:"practice",title:c.title||"",content:c.instructions||"",data:{instructions:c.instructions||"",type:"guided",images:c.images||[]},images:c.images||[]})}):typeof t.practical_examples=="object"&&t.practical_examples&&Object.entries(t.practical_examples).forEach(([c,u])=>{s.push({id:`step_${e}_${r++}`,type:"practice",title:this.formatSectionTitle(c),content:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u,data:{instructions:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u,type:"guided"}})}),((l=(o=t.homework)==null?void 0:o.theory_questions)==null?void 0:l.length)>0&&s.push({id:`step_${e}_${r++}`,type:"quiz",title:" ",content:t.homework.theory_questions[0],data:t.homework.theory_questions.map((c,u)=>({question:c,type:"multiple-choice",options:[{text:" A"},{text:" B"},{text:" C"}],correctAnswer:0,explanation:"     ."}))}),s},processCurriculum(t){return Array.isArray(t)?t.map((e,s)=>{try{return{id:e._id||e.id||`lesson_${s}`,_id:e._id||e.id||`lesson_${s}`,title:e.title||` ${s+1}`,lessonName:e.title||` ${s+1}`,description:e.description||"",duration:e.duration||"30 ",order:e.order!==void 0?e.order:s,steps:this.processSteps(e.steps||[])}}catch{return{id:`error_lesson_${s}`,title:` ${s+1} ()`,lessonName:` ${s+1} ()`,description:"   ",steps:[]}}}):[]},processSteps(t){return Array.isArray(t)?t.map((e,s)=>{try{const r={id:e.id||`step_${s}`,type:e.type||"explanation",title:e.title||"",description:e.description||"",content:e.content||"",data:e.data||{},order:e.order!==void 0?e.order:s,images:e.images||[]};return!r.data.content&&r.content&&(r.data.content=r.content),r}catch{return{id:`error_step_${s}`,type:"explanation",title:"  ",content:"     ",data:{content:"   "}}}}):[]},formatContent(t){return t?typeof t!="string"?typeof t=="object"?JSON.stringify(t,null,2):String(t):t.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^(?!<p>)/,"<p>").replace(new RegExp("(?<!<\\/p>)$"),"</p>"):""},formatSectionTitle(t){return t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()).replace(/([a-z])([A-Z])/g,"$1 $2")},getDefaultObjectives(){return["  ,    ","     ","     "]},goToPreviousLesson(){this.isFirstLesson||this.currentLessonIndex--},goToNextLesson(){this.isLastLesson||this.currentLessonIndex++},completeCourse(){confirm("!   .   ?")&&this.$emit("back-to-courses")},handleOverlayClick(){this.$emit("close")},handleQuizAnswer(t,e,s){this.quizAnswers.set(t,{answerIndex:e,isCorrect:s,answered:!0})},openPdfFullscreen(t){this.fullscreenPdf=t},closePdfFullscreen(){this.fullscreenPdf=null},getStepTitle(t){return t.title?t.title:{explanation:"",example:"",practice:"",quiz:"",video:"",pdf:"",image:""}[t.type]||""},getStepTypeLabel(t){return{explanation:"",example:"",practice:"",quiz:"",video:"",pdf:"",image:""}[t]||""},getStepComponent(t){return{explanation:"step-text",example:"step-text",reading:"step-text",text:"step-text",video:"step-video",pdf:"step-pdf",practice:"step-practice",quiz:"step-quiz",image:"step-text"}[t]||"step-text"}},components:{"step-text":{props:["step"],template:`
        <div class="step-text">
          <div class="text-content" v-html="formattedContent"></div>
          <template v-if="hasImages">
            <div class="step-images">
              <div v-for="image in step.images || []" :key="image.id || image.url" class="step-image">
                <img :src="image.url" :alt="image.alt || ' '" />
                <p v-if="image.caption" class="image-caption">{{ image.caption }}</p>
              </div>
            </div>
          </template>
        </div>
      `,computed:{formattedContent(){var e;let t=((e=this.step.data)==null?void 0:e.content)||this.step.content||"";return t||(t="<p>    .</p>"),typeof t=="string"&&(t=t.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>"),!t.includes("<p>")&&!t.includes("<div>")&&(t="<p>"+t+"</p>")),t},hasImages(){return this.step.images&&Array.isArray(this.step.images)&&this.step.images.length>0}}},"step-video":{props:["step"],template:`
        <div class="step-video">
          <div class="video-wrapper">
            <template v-if="videoUrl">
              <div class="video-container">
                <iframe v-if="isYouTube" :src="embedUrl" frameborder="0" allowfullscreen></iframe>
                <video v-else controls>
                  <source :src="videoUrl" type="video/mp4">
                       .
                </video>
              </div>
            </template>
            <template v-else>
              <div class="video-placeholder">
                <p>- </p>
              </div>
            </template>
          </div>
        </div>
      `,computed:{videoUrl(){var t;return((t=this.step.data)==null?void 0:t.url)||this.step.videoUrl||""},isYouTube(){return this.videoUrl.includes("youtube.com")||this.videoUrl.includes("youtu.be")},embedUrl(){var t;return this.videoUrl.includes("youtube.com/watch")?`https://www.youtube.com/embed/${(t=this.videoUrl.split("v=")[1])==null?void 0:t.split("&")[0]}`:this.videoUrl}}},"step-pdf":{props:["step"],emits:["pdf-fullscreen"],template:`
        <div class="step-pdf">
          <template v-if="pdfUrl">
            <div class="pdf-container">
              <iframe :src="pdfUrl" class="pdf-iframe"></iframe>
              <div class="pdf-actions">
                <button @click="$emit('pdf-fullscreen', pdfUrl)" class="pdf-fullscreen-btn">
                     
                </button>
              </div>
            </div>
          </template>
          <template v-else>
            <div class="pdf-placeholder">
              <p>PDF- </p>
            </div>
          </template>
        </div>
      `,computed:{pdfUrl(){var t;return((t=this.step.data)==null?void 0:t.url)||this.step.pdfUrl||""}}},"step-practice":{props:["step"],template:`
        <div class="step-practice">
          <div class="practice-content">
            <template v-if="instructions">
              <div v-html="formattedInstructions"></div>
            </template>
            <template v-else>
              <div>
                <p>    .</p>
              </div>
            </template>
          </div>
        </div>
      `,computed:{instructions(){var t;return((t=this.step.data)==null?void 0:t.instructions)||this.step.instructions||this.step.content||""},formattedInstructions(){return this.instructions.replace(/\n/g,"<br>")}}},"step-quiz":{props:["step","stepIndex"],emits:["quiz-answer"],data(){return{selectedAnswers:new Map}},template:`
        <div class="step-quiz">
          <template v-if="quizData && quizData.length > 0">
            <div v-for="(quiz, quizIndex) in quizData" :key="quizIndex" class="quiz-item">
              <h3 class="quiz-question">{{ quiz.question }}</h3>
              
              <template v-if="quiz.options && quiz.options.length > 0">
                <div class="quiz-options">
                  <button
                    v-for="(option, index) in quiz.options"
                    :key="index"
                    @click="selectAnswer(quizIndex, index)"
                    :class="getOptionClass(quizIndex, index)"
                    class="quiz-option"
                  >
                    <span class="option-letter">{{ String.fromCharCode(65 + index) }}</span>
                    <span class="option-text">{{ getOptionText(option) }}</span>
                    <span class="option-icon correct-icon">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    </span>
                    <span class="option-icon incorrect-icon">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </span>
                  </button>
                </div>
              </template>
              
              <template v-if="isAnswered(quizIndex) && quiz.explanation">
                <div class="quiz-explanation">
                  <strong>:</strong> {{ quiz.explanation }}
                </div>
              </template>
            </div>
          </template>
          
          <template v-else>
            <div class="no-quiz">
              <p> </p>
            </div>
          </template>
        </div>
      `,computed:{quizData(){return Array.isArray(this.step.data)?this.step.data:this.step.data&&this.step.data.question?[this.step.data]:[]}},methods:{selectAnswer(t,e){if(this.isAnswered(t))return;this.selectedAnswers.set(t,e);const r=this.quizData[t].correctAnswer===e;this.$emit("quiz-answer",this.stepIndex,e,r)},getOptionText(t){return typeof t=="string"?t:t.text||""},isAnswered(t){return this.selectedAnswers.has(t)},getOptionClass(t,e){if(!this.isAnswered(t))return"";const s=this.quizData[t],r=this.selectedAnswers.get(t);return e===s.correctAnswer?"correct":e===r&&e!==s.correctAnswer?"incorrect":"disabled"}}}}},QZ={class:"player-header"},XZ={class:"header-content"},JZ={class:"course-info"},ZZ={class:"course-badge"},eee={class:"lesson-title"},tee={key:0,class:"format-indicator"},see={class:"progress-section"},ree={class:"progress-info"},nee={class:"lesson-counter"},iee={class:"progress-text"},oee={class:"progress-bar"},aee={key:0,class:"objectives-container"},lee={class:"objectives-card"},cee={class:"objectives-header"},uee={class:"objectives-list"},dee={class:"player-content"},hee={key:0,class:"loading-state"},fee={key:1,class:"error-state"},pee={key:2,class:"structured-lesson-content"},mee={key:0,class:"content-section theory-section"},gee={class:"theory-content"},yee={key:0,class:"concept-title"},vee=["innerHTML"],_ee={key:1,class:"concept-images"},bee=["src","alt"],wee={key:0,class:"image-caption"},See={class:"subsection-title"},Eee={class:"subsection-content"},Tee={key:0,class:"structured-item"},kee={key:0,class:"item-title"},Iee=["innerHTML"],Cee=["innerHTML"],Aee=["innerHTML"],Pee={key:1,class:"content-section examples-section"},xee={class:"examples-content"},Lee={key:0,class:"exercise-title"},Ree=["innerHTML"],Nee={key:1,class:"exercise-images"},Oee=["src","alt"],Dee={key:0,class:"image-caption"},Mee={class:"subsection-title"},$ee={class:"subsection-content"},Uee={key:0,class:"structured-example"},Fee={key:0,class:"item-title"},Vee=["innerHTML"],qee=["innerHTML"],Bee=["innerHTML"],jee={key:2,class:"content-section homework-section"},Hee={class:"homework-content"},zee={key:0,class:"homework-subsection"},Wee={class:"theory-questions-list"},Gee={key:1,class:"homework-subsection"},Kee={class:"practical-tasks-list"},Yee={key:3,class:"lesson-content"},Qee={class:"step-header"},Xee={class:"step-number"},Jee={class:"step-info"},Zee={class:"step-title"},ete={class:"step-type"},tte={class:"step-content"},ste={key:4,class:"empty-state"},rte={key:1,class:"player-footer"},nte=["disabled"],ite={class:"lesson-nav-info"};function ote(t,e,s,r,n,i){return b(),S("div",{class:"lesson-player-overlay",onClick:e[6]||(e[6]=(...o)=>i.handleOverlayClick&&i.handleOverlayClick(...o))},[a("div",{class:"lesson-player",onClick:e[5]||(e[5]=gt(()=>{},["stop"]))},[a("header",QZ,[a("button",{class:"close-btn",onClick:e[0]||(e[0]=o=>t.$emit("close")),"aria-label":" "},e[7]||(e[7]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])),a("div",XZ,[a("div",JZ,[a("div",ZZ,p(i.courseTitle),1),a("h1",eee,p(i.currentLessonTitle),1),n.isStructuredFormat?(b(),S("div",tee,e[8]||(e[8]=[a("span",{class:"structured-badge"},"Structured Format",-1)]))):W("",!0)]),a("div",see,[a("div",ree,[a("span",nee," "+p(n.currentLessonIndex+1)+"  "+p(i.totalLessons),1),a("span",iee,p(Math.round(i.progressPercentage))+"% ",1)]),a("div",oee,[a("div",{class:"progress-fill",style:ct({width:`${i.progressPercentage}%`})},null,4)])])])]),i.learningObjectives.length>0?(b(),S("div",aee,[a("div",lee,[a("div",cee,[e[9]||(e[9]=a("div",{class:"objectives-icon"},[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-8.08"}),a("polyline",{points:"22 4 12 14.01l-3-3"})])],-1)),a("h2",null,p(n.isStructuredFormat?" ":" "),1)]),a("ul",uee,[(b(!0),S(he,null,be(i.learningObjectives,(o,l)=>(b(),S("li",{key:l},[e[10]||(e[10]=a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20,6 9,17 4,12"})],-1)),re(" "+p(o),1)]))),128))])])])):W("",!0),a("main",dee,[n.loading?(b(),S("div",hee,[e[11]||(e[11]=a("div",{class:"loading-spinner"},[a("div",{class:"spinner"})],-1)),e[12]||(e[12]=a("h3",null," ...",-1)),a("p",null,p(n.isStructuredFormat?"  ":"  "),1)])):n.error?(b(),S("div",fee,[e[13]||(e[13]=a("div",{class:"error-icon"},"",-1)),e[14]||(e[14]=a("h3",null,"   ",-1)),a("p",null,p(n.error),1),a("button",{onClick:e[1]||(e[1]=(...o)=>i.loadCourseContent&&i.loadCourseContent(...o)),class:"retry-btn"},"   ")])):n.isStructuredFormat&&i.currentStructuredLesson?(b(),S("div",pee,[i.currentStructuredLesson.content.theory?(b(),S("div",mee,[e[15]||(e[15]=kt('<div class="section-header" data-v-7edb5394><div class="section-icon theory-icon" data-v-7edb5394><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-7edb5394><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" data-v-7edb5394></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" data-v-7edb5394></path></svg></div><h2 data-v-7edb5394></h2></div>',1)),a("div",gee,[i.currentStructuredLesson.content.theory.concepts?(b(!0),S(he,{key:0},be(i.currentStructuredLesson.content.theory.concepts,(o,l)=>(b(),S("div",{key:`concept-${l}`,class:"concept-block"},[o.title?(b(),S("h3",yee,p(o.title),1)):W("",!0),a("div",{class:"concept-content",innerHTML:i.formatContent(o.content)},null,8,vee),o.images&&o.images.length>0?(b(),S("div",_ee,[(b(!0),S(he,null,be(o.images,c=>(b(),S("div",{key:c.id,class:"concept-image"},[a("img",{src:c.url,alt:c.alt||"Concept image"},null,8,bee),c.caption?(b(),S("p",wee,p(c.caption),1)):W("",!0)]))),128))])):W("",!0)]))),128)):typeof i.currentStructuredLesson.content.theory=="object"?(b(!0),S(he,{key:1},be(i.currentStructuredLesson.content.theory,(o,l)=>(b(),S("div",{key:l,class:"theory-subsection"},[a("h3",See,p(i.formatSectionTitle(l)),1),a("div",Eee,[Array.isArray(o)?(b(!0),S(he,{key:0},be(o,(c,u)=>(b(),S("div",{key:u,class:"theory-item"},[typeof c=="object"&&c.content?(b(),S("div",Tee,[c.title?(b(),S("h4",kee,p(c.title),1)):W("",!0),a("div",{innerHTML:i.formatContent(c.content)},null,8,Iee)])):(b(),S("div",{key:1,class:"simple-item",innerHTML:i.formatContent(c)},null,8,Cee))]))),128)):(b(),S("div",{key:1,innerHTML:i.formatContent(o)},null,8,Aee))])]))),128)):W("",!0)])])):W("",!0),i.currentStructuredLesson.content.practical_examples?(b(),S("div",Pee,[e[16]||(e[16]=kt('<div class="section-header" data-v-7edb5394><div class="section-icon examples-icon" data-v-7edb5394><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-7edb5394><rect x="2" y="7" width="20" height="14" rx="2" ry="2" data-v-7edb5394></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" data-v-7edb5394></path></svg></div><h2 data-v-7edb5394> </h2></div>',1)),a("div",xee,[i.currentStructuredLesson.content.practical_examples.exercises?(b(!0),S(he,{key:0},be(i.currentStructuredLesson.content.practical_examples.exercises,(o,l)=>(b(),S("div",{key:`exercise-${l}`,class:"exercise-block"},[o.title?(b(),S("h3",Lee,p(o.title),1)):W("",!0),a("div",{class:"exercise-instructions",innerHTML:i.formatContent(o.instructions)},null,8,Ree),o.images&&o.images.length>0?(b(),S("div",Nee,[(b(!0),S(he,null,be(o.images,c=>(b(),S("div",{key:c.id,class:"exercise-image"},[a("img",{src:c.url,alt:c.alt||"Exercise image"},null,8,Oee),c.caption?(b(),S("p",Dee,p(c.caption),1)):W("",!0)]))),128))])):W("",!0)]))),128)):typeof i.currentStructuredLesson.content.practical_examples=="object"?(b(!0),S(he,{key:1},be(i.currentStructuredLesson.content.practical_examples,(o,l)=>(b(),S("div",{key:l,class:"examples-subsection"},[a("h3",Mee,p(i.formatSectionTitle(l)),1),a("div",$ee,[Array.isArray(o)?(b(!0),S(he,{key:0},be(o,(c,u)=>(b(),S("div",{key:u,class:"example-item"},[typeof c=="object"&&c.instructions?(b(),S("div",Uee,[c.title?(b(),S("h4",Fee,p(c.title),1)):W("",!0),a("div",{innerHTML:i.formatContent(c.instructions)},null,8,Vee)])):(b(),S("div",{key:1,class:"simple-example",innerHTML:i.formatContent(c)},null,8,qee))]))),128)):(b(),S("div",{key:1,innerHTML:i.formatContent(o)},null,8,Bee))])]))),128)):W("",!0)])])):W("",!0),i.currentStructuredLesson.content.homework?(b(),S("div",jee,[e[19]||(e[19]=kt('<div class="section-header" data-v-7edb5394><div class="section-icon homework-icon" data-v-7edb5394><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-7edb5394><polygon points="14 2 18 6 7 17 3 17 3 13 14 2" data-v-7edb5394></polygon><line x1="3" y1="22" x2="21" y2="22" data-v-7edb5394></line></svg></div><h2 data-v-7edb5394> </h2></div>',1)),a("div",Hee,[i.currentStructuredLesson.content.homework.theory_questions&&i.currentStructuredLesson.content.homework.theory_questions.length>0?(b(),S("div",zee,[e[17]||(e[17]=a("h3",{class:"homework-subtitle"}," ",-1)),a("ol",Wee,[(b(!0),S(he,null,be(i.currentStructuredLesson.content.homework.theory_questions,(o,l)=>(b(),S("li",{key:`theory-q-${l}`,class:"theory-question"},p(o),1))),128))])])):W("",!0),i.currentStructuredLesson.content.homework.practical_tasks&&i.currentStructuredLesson.content.homework.practical_tasks.length>0?(b(),S("div",Gee,[e[18]||(e[18]=a("h3",{class:"homework-subtitle"}," ",-1)),a("ol",Kee,[(b(!0),S(he,null,be(i.currentStructuredLesson.content.homework.practical_tasks,(o,l)=>(b(),S("li",{key:`practical-task-${l}`,class:"practical-task"},p(o),1))),128))])])):W("",!0)])])):W("",!0)])):!n.isStructuredFormat&&i.currentLesson&&i.hasSteps?(b(),S("div",Yee,[(b(!0),S(he,null,be(i.currentLesson.steps,(o,l)=>(b(),S("div",{key:`step-${l}`,class:"step-container"},[a("div",Qee,[a("div",Xee,p(l+1),1),a("div",Jee,[a("h3",Zee,p(i.getStepTitle(o)),1),a("span",ete,p(i.getStepTypeLabel(o.type)),1)])]),a("div",tte,[(b(),ts(Sh(i.getStepComponent(o.type)),{step:o,"step-index":l,onQuizAnswer:i.handleQuizAnswer,onPdfFullscreen:i.openPdfFullscreen},null,40,["step","step-index","onQuizAnswer","onPdfFullscreen"]))])]))),128))])):(b(),S("div",ste,e[20]||(e[20]=[a("div",{class:"empty-icon"},"",-1),a("h3",null," ",-1),a("p",null,"    .",-1)])))]),!n.loading&&!n.error&&n.lessons.length>0?(b(),S("footer",rte,[a("button",{class:"nav-btn nav-btn--secondary",disabled:i.isFirstLesson,onClick:e[2]||(e[2]=(...o)=>i.goToPreviousLesson&&i.goToPreviousLesson(...o))},e[21]||(e[21]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15,18 9,12 15,6"})],-1),re("  ")]),8,nte),a("div",ite,[a("span",null,p(n.currentLessonIndex+1)+" / "+p(i.totalLessons),1)]),i.isLastLesson?(b(),S("button",{key:1,class:"nav-btn nav-btn--success",onClick:e[4]||(e[4]=(...o)=>i.completeCourse&&i.completeCourse(...o))},e[23]||(e[23]=[re("   "),a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20,6 9,17 4,12"})],-1)]))):(b(),S("button",{key:0,class:"nav-btn nav-btn--primary",onClick:e[3]||(e[3]=(...o)=>i.goToNextLesson&&i.goToNextLesson(...o))},e[22]||(e[22]=[re("  "),a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9,18 15,12 9,6"})],-1)])))])):W("",!0)])])}const ate=tt(YZ,[["render",ote],["__scopeId","data-v-7edb5394"]]),lte={name:"UpdatedCoursesPage",components:{LessonLoader:ate},data(){return{courses:[],availableCategories:[],availableLevels:[],selectedCourse:null,isModalOpen:!1,searchTerm:"",categoryFilter:"all",levelFilter:"all",typeFilter:"all",debounceTimeout:null,loading:!1,modalLoading:!1,error:null,showStudyInterface:!1,retryCount:0,maxRetries:3,cacheTimeout:5*60*1e3,lastFetchTime:0,componentKey:0,lastUpdateTime:Date.now(),forceUpdateCounter:0}},computed:{...tn("user",["userStatus"]),...zg(["user"]),...tn(["getUser"]),currentUser(){return this.getUser||this.user||{}},currentUserStatus(){var t;try{return((t=this.currentUser)==null?void 0:t.subscriptionPlan)||localStorage.getItem("userStatus")||localStorage.getItem("plan")||localStorage.getItem("subscriptionPlan")||"free"}catch{return"free"}},isPremiumUser(){const t=this.currentUserStatus;return t==="pro"||t==="start"},filteredCoursesCount(){return this.courses.length},hasValidCourses(){return Array.isArray(this.courses)&&this.courses.length>0},shouldShowEmptyState(){return!this.loading&&!this.error&&!this.hasValidCourses},shouldShowErrorState(){return!this.loading&&this.error},shouldRefreshCache(){return Date.now()-this.lastFetchTime>this.cacheTimeout}},watch:{user:{handler(t,e){if(!t||!e)return;const s=t==null?void 0:t.subscriptionPlan,r=e==null?void 0:e.subscriptionPlan;s!==r&&this.handleUserStatusChange(s,r)},deep:!0,immediate:!1},currentUserStatus:{handler(t,e){t!==e&&this.triggerReactivityUpdate()},immediate:!1}},async mounted(){try{await this.initializeComponent()}catch{this.error="  "}},beforeUnmount(){this.cleanup()},methods:{async initializeComponent(){try{(this.shouldRefreshCache||this.courses.length===0)&&await this.loadCoursesWithRetry(),this.setupEventListeners(),this.validateComponentState()}catch(t){this.handleInitializationError(t)}},async loadCoursesWithRetry(){for(let t=1;t<=this.maxRetries;t++)try{await this.loadCourses(),this.retryCount=0;break}catch(e){t===this.maxRetries?this.handleLoadError(e):await this.delay(1e3*Math.pow(2,t-1))}},validateComponentState(){Array.isArray(this.courses)||(this.courses=[]),Array.isArray(this.availableCategories)||(this.availableCategories=[]),Array.isArray(this.availableLevels)||(this.availableLevels=[])},handleInitializationError(t){this.error=this.getErrorMessage(t),this.loading=!1,this.provideFallbackData()},provideFallbackData(){this.courses=[],this.availableCategories=["  ","Web-","",""],this.availableLevels=["","",""]},async loadCourses(){this.loading=!0,this.error=null;try{const t=this.buildFilters();let e=await lP(t,"structured");if(this.validateResponse(e)||(e=await uv(t)),e&&e.success)this.processCoursesResponse(e),this.lastFetchTime=Date.now();else throw new Error((e==null?void 0:e.error)||"Failed to fetch courses")}catch(t){this.handleLoadError(t)}finally{this.loading=!1}},validateResponse(t){return t&&typeof t=="object"&&t.success!==!1&&Array.isArray(t.courses)},processCoursesResponse(t){this.courses=this.processCourses(t.courses||[]),this.availableCategories=this.processCategories(t.categories||[]),this.availableLevels=this.processLevels(t.difficulties||[]),this.storeCourseMetadata(t)},processCourses(t){return Array.isArray(t)?t.map((e,s)=>{try{return this.processSingleCourse(e,s)}catch{return this.createFallbackCourse(e,s)}}).filter(e=>e!==null):[]},processSingleCourse(t,e){return{...t,id:t._id||t.id||`course_${Date.now()}_${e}`,_id:t._id||t.id||`course_${Date.now()}_${e}`,title:this.validateString(t.title)||" ",description:this.validateString(t.description)||"  ",category:this.validateString(t.category)||"",level:this.validateString(t.level||t.difficulty)||"",duration:this.validateString(t.duration)||"30 ",isPremium:!!(t.isPremium||t.premium||t.type==="premium"),thumbnail:this.generateImageBackground(t.category),instructor:this.validateInstructor(t.instructor),studentsCount:this.validateNumber(t.studentsCount,0),rating:this.validateNumber(t.rating,0,5),curriculum:this.validateCurriculum(t.curriculum),structuredData:t.structuredData||null,format:t.format||"standard",isNew:this.isNewCourse(t.createdAt),hasHomework:this.hasHomeworkContent(t.curriculum),estimatedHours:this.extractHours(t.duration),totalLessons:(t.curriculum||[]).length,imageLoaded:!0,processedAt:Date.now(),isValid:!0}},createFallbackCourse(t,e){return{id:`fallback_${e}`,_id:`fallback_${e}`,title:" ",description:"   ",category:"",level:"",duration:"30 ",isPremium:!1,thumbnail:this.generateImageBackground("default"),instructor:{name:"ACED",avatar:this.getDefaultAvatar()},studentsCount:0,rating:0,curriculum:[],imageLoaded:!0,isValid:!1,isFallback:!0}},processCategories(t){const e=["  ",""," ","Web-"," "," ","","",""];return!Array.isArray(t)||t.length===0?e:[...new Set([...t,...e])].sort()},processLevels(t){const e=["","",""];return!Array.isArray(t)||t.length===0?e:[...new Set([...t,...e])].sort()},storeCourseMetadata(t){try{const e={totalCourses:this.courses.length,format:t.format,lastFetch:Date.now(),categories:this.availableCategories.length,levels:this.availableLevels.length,pagination:t.pagination||{}};sessionStorage.setItem("coursesMetadata",JSON.stringify(e))}catch{}},validateString(t,e=""){return typeof t=="string"&&t.trim()?t.trim():e},validateNumber(t,e=0,s=1/0){const r=parseFloat(t);return isNaN(r)?e:Math.max(e,Math.min(s,r))},validateInstructor(t){return!t||typeof t!="object"?{name:"ACED Instructor",avatar:this.getDefaultAvatar(),bio:"Experienced instructor"}:{name:this.validateString(t.name,"ACED Instructor"),avatar:this.getDefaultAvatar(),bio:this.validateString(t.bio,"Experienced instructor")}},validateCurriculum(t){return Array.isArray(t)?t.filter(e=>e&&typeof e=="object"&&e.title&&typeof e.title=="string"):[]},isNewCourse(t){if(!t)return!1;try{const e=new Date(t),s=new Date(Date.now()-7*24*60*60*1e3);return e>s}catch{return!1}},hasHomeworkContent(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>r.type==="quiz"||r.type==="practice")}):!1},extractHours(t){if(typeof t=="string"){const e=t.match(/(\d+)/);return e?parseInt(e[1]):10}return t!=null&&t.hours?t.hours:10},getCategoryIcon(t){const e=this.safeString(t),s='width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"',r={ai:`<svg ${s}><path d="M12 8V4H8"/><rect x="4" y="4" width="8" height="8" rx="2"/><path d="M12 12v4h4"/><rect x="10" y="10" width="8" height="8" rx="2"/></svg>`,web:`<svg ${s}><path d="m16 18-6-12 6-6m-12 18 6-12-6-6"/></svg>`,design:`<svg ${s}><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/><line x1="12" y1="22" x2="12" y2="12"/><line x1="22" y1="8.5" x2="2" y2="8.5"/><line x1="2" y1="15.5" x2="22" y2="15.5"/><line x1="12" y1="2" x2="12" y2="12"/></svg>`,mobile:`<svg ${s}><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>`,marketing:`<svg ${s}><path d="M12 22V12M12 12L8 16M12 12l4 4M12 12L8 8M12 12l4-4M12 2v4M20 12h-4M4 12h4M17.66 17.66l-2.83-2.83M6.34 6.34l2.83 2.83M17.66 6.34l-2.83 2.83M6.34 17.66l2.83-2.83"/></svg>`,default:`<svg ${s}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`};return e.includes("")||e.includes("")?r.ai:e.includes("web")||e.includes("")?r.web:e.includes("")?r.mobile:e.includes("")||e.includes("")?r.design:e.includes("")?r.marketing:r.default},getCourseImageStyle(t){return t?this.generateImageBackground(t.category):this.generateImageBackground("default")},generateImageBackground(t){const e={"  ":{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important"},:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important"}," ":{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important"},"Web-":{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%) !important"}," ":{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%) !important"}," ":{background:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%) !important"},:{background:"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%) !important"},:{background:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%) !important"},:{background:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%) !important"},default:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important"}},s={backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"600",textAlign:"center"},r=e[t]||e.default;return{...s,...r}},getDefaultAvatar(){return{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",width:"40px",height:"40px",borderRadius:"50%"}},handleImageError(t,e){},async openModal(t){if(!(!t||!t._id&&!t.id)){this.selectedCourse=null,this.isModalOpen=!0,this.modalLoading=!0;try{const e=t._id||t.id;let s=await cg(e);s&&s.success&&s.data?this.selectedCourse=this.enhanceCourseForModal(s.data,t):this.selectedCourse=this.enhanceCourseForModal(t,t)}catch{this.selectedCourse=this.enhanceCourseForModal(t,t)}finally{this.modalLoading=!1}}},enhanceCourseForModal(t,e){return{...e,...t,id:t._id||t.id||e.id,_id:t._id||e._id,title:t.title||e.title,isPremium:!!(t.isPremium||e.isPremium),skills:this.getSkillsList(t),modules:this.getModulesList(t),thumbnail:this.generateImageBackground(t.category||e.category),imageLoaded:!0,format:t.format||"standard",structuredData:t.structuredData||null,hasValidData:this.validateCourseData(t),isModalReady:!0,modalLoadedAt:Date.now()}},validateCourseData(t){return!!(t&&t.title&&t.description&&t.category)},async startCourse(t){if(t){if(t.isPremium&&!this.isPremiumUser){const e=this.getPremiumMessage(t);this.showToast(e,"error");return}try{let e=await this.ensureCompleteCourseData(t);this.selectedCourse=e,this.isModalOpen=!1,this.showStudyInterface=!0,this.trackCourseStart(e)}catch{this.showToast("   ","error")}}},async ensureCompleteCourseData(t){if(!t.structuredData&&(!t.curriculum||!t.curriculum.length))try{let e=await cg(t._id||t.id);if(e&&e.success&&e.data)return{...t,...e.data,_id:e.data._id||t._id,id:e.data.id||t.id||e.data._id,format:e.format,structuredData:e.format==="structured"?e.data:null,isEnhanced:!0}}catch{}return t},getPremiumMessage(t){const e=this.currentUserStatus;return e==="free"?`      Start/Pro.   : ${e}`:`    Pro.   : ${e}`},trackCourseStart(t){try{const e={courseId:t.id,title:t.title,category:t.category,isPremium:t.isPremium,startedAt:Date.now(),userStatus:this.currentUserStatus};sessionStorage.setItem("lastStartedCourse",JSON.stringify(e)),this.$emit("courseStarted",e)}catch{}},handleLoadError(t){this.error=this.getErrorMessage(t),this.retryCount++,this.retryCount>=this.maxRetries&&this.provideFallbackData()},getErrorMessage(t){return t?typeof t=="string"?t:t.message?t.message.includes("Network")?"    .  .":t.message.includes("404")?"   .  .":t.message.includes("500")?" .      .":t.message.includes("timeout")?"  .   .":t.message:"    ":" "},async delay(t){return new Promise(e=>setTimeout(e,t))},showToast(t,e="info"){this.$toast?this.$toast[e](t,{duration:4e3}):this.$notify&&this.$notify({type:e,message:t,duration:4e3})},goBackToCourses(){this.showStudyInterface=!1,this.selectedCourse=null,this.componentKey++},closeModal(){this.isModalOpen=!1,this.selectedCourse=null,this.modalLoading=!1},buildFilters(){const t={};return this.searchTerm&&this.searchTerm.trim()&&(t.search=this.searchTerm.trim()),this.categoryFilter&&this.categoryFilter!=="all"&&(t.category=this.categoryFilter),this.levelFilter&&this.levelFilter!=="all"&&(t.difficulty=this.levelFilter),this.typeFilter&&this.typeFilter!=="all"&&(t.type=this.typeFilter),t},debounceSearch(){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.loadCoursesWithRetry()},300)},applyFilters(){this.loadCoursesWithRetry()},setTypeFilter(t){this.typeFilter=t,this.loadCoursesWithRetry()},clearFilters(){this.searchTerm="",this.categoryFilter="all",this.levelFilter="all",this.typeFilter="all",this.loadCoursesWithRetry()},getSkillsList(t){return t?t.skills&&Array.isArray(t.skills)&&t.skills.length>0?t.skills:t.learningOutcomes&&Array.isArray(t.learningOutcomes)&&t.learningOutcomes.length>0?t.learningOutcomes:this.generateSkillsFromCourse(t):this.getDefaultSkills()},generateSkillsFromCourse(t){const e=this.safeString(t.title),s=this.safeString(t.category),r={javascript:["  JavaScript","  DOM "," ","  ES6+"],python:["    Python","- ","  "," -"],design:["   ","    ","  "," -"],:["  ","  ","  "," "],:["  "," "," ","  "]};for(const[n,i]of Object.entries(r))if(e.includes(n)||s.includes(n))return i;return this.getDefaultSkills()},getModulesList(t){return t?t.curriculum&&Array.isArray(t.curriculum)&&t.curriculum.length>0?t.curriculum.map(e=>{if(e.title&&typeof e.title=="string")return e.title;if(e.lessonName){if(typeof e.lessonName=="string")return e.lessonName;if(typeof e.lessonName=="object"){const s=localStorage.getItem("lang")||"ru";return e.lessonName[s]||e.lessonName.en||e.lessonName.ru||e.lessonName.uz||"  "}}return"  "}):t.modules&&Array.isArray(t.modules)&&t.modules.length>0?t.modules:this.generateModulesFromCourse(t):this.getDefaultModules()},generateModulesFromCourse(t){const e=this.safeString(t.title);return e.includes("javascript")?["  JavaScript","  ","  DOM","  "," "]:e.includes("design")||e.includes("")?[" ","  ","  ","UI/UX "," "]:this.getDefaultModules()},getDefaultSkills(){return["    ","   ","  "," "]},getDefaultModules(){return["  "," "," "," "," "]},safeString(t){return t==null?"":String(t).toLowerCase().trim()},cleanup(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),this.removeEventListeners(),this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)},setupEventListeners(){typeof window<"u"&&(this.handleOnline=()=>{this.shouldRefreshCache&&this.loadCoursesWithRetry()},this.handleOffline=()=>{},window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),this.handleVisibilityChange=()=>{!document.hidden&&this.shouldRefreshCache&&this.loadCoursesWithRetry()},document.addEventListener("visibilitychange",this.handleVisibilityChange))},removeEventListeners(){typeof window<"u"&&(this.handleOnline&&(window.removeEventListener("online",this.handleOnline),this.handleOnline=null),this.handleOffline&&(window.removeEventListener("offline",this.handleOffline),this.handleOffline=null),this.handleVisibilityChange&&(document.removeEventListener("visibilitychange",this.handleVisibilityChange),this.handleVisibilityChange=null))},triggerReactivityUpdate(){this.componentKey++,this.forceUpdateCounter++,this.lastUpdateTime=Date.now(),this.$forceUpdate()},handleUserStatusChange(t,e){!t||t===e||(this.triggerReactivityUpdate(),t&&t!=="free"&&e==="free"&&this.showToast(" Pro  !","success"))}}},cte={class:"content-wrapper"},ute={class:"container"},dte={class:"filter-bar"},hte={class:"filter-group-search"},fte={class:"filter-group-select"},pte=["value"],mte={class:"filter-group-select"},gte=["value"],yte={class:"filter-group-buttons"},vte={class:"results-info"},_te={class:"results-count"},bte={key:0,class:"empty-state"},wte={key:1,class:"empty-state"},Ste={class:"empty-state-description"},Ete={key:2,class:"courses-grid"},Tte=["onClick"],kte={class:"course-card-image-wrapper"},Ite=["onError"],Cte={key:0,class:"image-placeholder"},Ate={key:0,class:"badge badge-premium"},Pte={key:1,class:"badge badge-free"},xte={class:"course-card-content"},Lte={class:"course-card-meta"},Rte={class:"course-card-category"},Nte={class:"course-card-title"},Ote={class:"course-card-description"},Dte={class:"course-card-stats-and-provider"},Mte={class:"course-card-stats"},$te={class:"course-card-stat"},Ute={class:"course-card-level"},Fte={key:3,class:"empty-state"},Vte={key:0,class:"modal-loading-state"},qte={key:1,class:"modal-content"},Bte={class:"modal-header-section"},jte=["innerHTML"],Hte={key:0,class:"modal-image-placeholder"},zte={class:"modal-badge-container"},Wte={key:0,class:"modal-badge modal-badge-premium"},Gte={key:1,class:"modal-badge modal-badge-free"},Kte={class:"modal-meta-overlay"},Yte={class:"modal-duration"},Qte={class:"modal-body"},Xte={class:"modal-course-info"},Jte={class:"modal-tags"},Zte={class:"modal-tag modal-tag-category"},ese={class:"modal-tag modal-tag-level"},tse={class:"modal-title"},sse={class:"modal-description"},rse={class:"modal-details"},nse={class:"modal-details-grid"},ise={class:"modal-section"},ose={class:"modal-skills-list"},ase={class:"modal-section"},lse={class:"modal-modules-list"},cse={class:"module-number"},use={class:"module-text"},dse={class:"modal-actions"},hse=["disabled"],fse={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pse={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},mse={key:2},gse={key:3};function yse(t,e,s,r,n,i){const o=es("LessonLoader");return n.showStudyInterface?(b(),ts(o,{course:n.selectedCourse,onBackToCourses:i.goBackToCourses,key:`lesson-${n.componentKey}`},null,8,["course","onBackToCourses"])):(b(),S("div",{class:"courses-page",key:`courses-${n.componentKey}`},[e[43]||(e[43]=kt('<div class="header" data-v-73ceb31e><div class="container" data-v-73ceb31e><div class="header-content" data-v-73ceb31e><div class="header-badge" data-v-73ceb31e><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="header-badge-icon" data-v-73ceb31e><path d="M5.5 8.5L2 12l3.5 3.5" data-v-73ceb31e></path><path d="M18.5 8.5L22 12l-3.5 3.5" data-v-73ceb31e></path><path d="M12 2l-2 10l2 10l2-10z" data-v-73ceb31e></path></svg> New courses every week </div><h1 class="header-title" data-v-73ceb31e>Modern Professions</h1><h2 class="header-subtitle" data-v-73ceb31e> Learn relevant skills and grow with technology </h2><p class="header-description" data-v-73ceb31e> Discover courses in most in-demand areas: AI, blockchain, design, marketing and programming </p></div></div></div>',1)),a("div",cte,[a("div",ute,[a("div",dte,[a("div",hte,[e[15]||(e[15]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"search-icon"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.3-4.3"})],-1)),Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.searchTerm=l),onInput:e[1]||(e[1]=(...l)=>i.debounceSearch&&i.debounceSearch(...l)),placeholder:"Search courses...",class:"input-search"},null,544),[[Ge,n.searchTerm]])]),a("div",fte,[Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.categoryFilter=l),onChange:e[3]||(e[3]=(...l)=>i.applyFilters&&i.applyFilters(...l)),class:"select-field"},[e[16]||(e[16]=a("option",{value:"all"},"All categories",-1)),(b(!0),S(he,null,be(n.availableCategories,l=>(b(),S("option",{key:l,value:l},p(l),9,pte))),128))],544),[[Js,n.categoryFilter]]),e[17]||(e[17]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"select-arrow"},[a("path",{d:"m6 9 6 6 6-6"})],-1))]),a("div",mte,[Pe(a("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>n.levelFilter=l),onChange:e[5]||(e[5]=(...l)=>i.applyFilters&&i.applyFilters(...l)),class:"select-field"},[e[18]||(e[18]=a("option",{value:"all"},"All levels",-1)),(b(!0),S(he,null,be(n.availableLevels,l=>(b(),S("option",{key:l,value:l},p(l),9,gte))),128))],544),[[Js,n.levelFilter]]),e[19]||(e[19]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"select-arrow"},[a("path",{d:"m6 9 6 6 6-6"})],-1))]),a("div",yte,[a("button",{class:ye(["button-filter",{active:n.typeFilter==="all"}]),onClick:e[6]||(e[6]=l=>i.setTypeFilter("all"))}," All ",2),a("button",{class:ye(["button-filter",{active:n.typeFilter==="free"}]),onClick:e[7]||(e[7]=l=>i.setTypeFilter("free"))}," Free ",2),a("button",{class:ye(["button-filter",{active:n.typeFilter==="premium"}]),onClick:e[8]||(e[8]=l=>i.setTypeFilter("premium"))}," Premium ",2)])]),a("div",vte,[a("div",_te,[e[20]||(e[20]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"results-icon"},[a("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})],-1)),a("span",null,"Courses found: "+p(n.courses.length),1)]),e[21]||(e[21]=a("div",{class:"results-updated"},"Updated today",-1))]),n.loading?(b(),S("div",bte,e[22]||(e[22]=[a("div",{class:"spinner"},null,-1),a("h3",{class:"empty-state-title"},"Loading courses...",-1),a("p",{class:"empty-state-description"},"Preparing the best courses for you",-1)]))):n.error?(b(),S("div",wte,[e[23]||(e[23]=kt('<div class="empty-state-icon-wrapper" data-v-73ceb31e><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="empty-state-icon" data-v-73ceb31e><path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-73ceb31e></path><line x1="12" y1="9" x2="12" y2="13" data-v-73ceb31e></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-73ceb31e></line></svg></div><h3 class="empty-state-title" data-v-73ceb31e>Failed to load courses</h3>',2)),a("p",Ste,p(n.error),1),a("button",{onClick:e[9]||(e[9]=(...l)=>i.loadCourses&&i.loadCourses(...l)),class:"button-reset-filters"}," Try again ")])):n.courses.length>0?(b(),S("div",Ete,[(b(!0),S(he,null,be(n.courses,l=>(b(),S("div",{key:l.id||l._id,class:"course-card",onClick:c=>i.openModal(l)},[a("div",kte,[a("div",{class:"course-card-image",style:ct(i.getCourseImageStyle(l)),onError:c=>i.handleImageError(c,l)},[l.imageLoaded?W("",!0):(b(),S("div",Cte,e[24]||(e[24]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"placeholder-icon"},[a("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a("circle",{cx:"9",cy:"9",r:"2"}),a("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})],-1)])))],44,Ite),l.isPremium?(b(),S("div",Ate,e[25]||(e[25]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"badge-icon"},[a("path",{d:"m14 6 4 10L2 10"}),a("path",{d:"M5 14 2 12l10-2L9.5 2l.5 6"})],-1),re(" Premium ")]))):(b(),S("div",Pte,"Free"))]),a("div",xte,[a("div",Lte,[a("div",Rte,p(l.category||"General"),1)]),a("h3",Nte,p(l.title||"Untitled"),1),a("p",Ote,p(l.description||"No description provided"),1),a("div",Dte,[a("div",Mte,[a("div",$te,[e[26]||(e[26]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"course-card-stat-icon"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),a("span",null,p(l.duration||"30 min"),1)]),a("div",Ute,p(l.level||"Basic"),1)]),e[27]||(e[27]=a("div",{class:"course-card-provider"},[a("p",null,"from"),a("img",{src:Aa,alt:"ACED",class:"h-6 w-6 object-contain"})],-1))])])],8,Tte))),128))])):(b(),S("div",Fte,[e[28]||(e[28]=kt('<div class="empty-state-icon-wrapper" data-v-73ceb31e><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="empty-state-icon" data-v-73ceb31e><circle cx="11" cy="11" r="8" data-v-73ceb31e></circle><path d="m21 21-4.3-4.3" data-v-73ceb31e></path></svg></div><h3 class="empty-state-title" data-v-73ceb31e>No courses found</h3><p class="empty-state-description" data-v-73ceb31e> Try changing search parameters or choose another category </p>',3)),a("button",{onClick:e[10]||(e[10]=(...l)=>i.clearFilters&&i.clearFilters(...l)),class:"button-reset-filters"}," Reset filters ")]))])]),xe(ma,{name:"modal",appear:""},{default:Qt(()=>[n.isModalOpen&&n.selectedCourse?(b(),S("div",{key:0,class:"modal-overlay",onClick:e[14]||(e[14]=(...l)=>i.closeModal&&i.closeModal(...l))},[a("div",{class:"modal-container",onClick:e[13]||(e[13]=gt(()=>{},["stop"]))},[n.modalLoading?(b(),S("div",Vte,e[29]||(e[29]=[a("div",{class:"spinner"},null,-1),a("p",null,"Loading course info...",-1)]))):n.selectedCourse?(b(),S("div",qte,[a("button",{class:"modal-close",onClick:e[11]||(e[11]=(...l)=>i.closeModal&&i.closeModal(...l)),"aria-label":"Close"},e[30]||(e[30]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M18 6 6 18"}),a("path",{d:"m6 6 12 12"})],-1)])),a("div",Bte,[a("div",{class:"modal-image",style:ct(i.getCourseImageStyle(n.selectedCourse))},[a("div",{class:"modal-image-background-icon",innerHTML:i.getCategoryIcon(n.selectedCourse.category)},null,8,jte),n.selectedCourse.imageLoaded?W("",!0):(b(),S("div",Hte,e[31]||(e[31]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"placeholder-icon"},[a("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a("circle",{cx:"9",cy:"9",r:"2"}),a("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})],-1)])))],4),a("div",zte,[n.selectedCourse.isPremium?(b(),S("div",Wte,e[32]||(e[32]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"m14 6 4 10L2 10"}),a("path",{d:"M5 14 2 12l10-2L9.5 2l.5 6"})],-1),re(" Premium ")]))):(b(),S("div",Gte,e[33]||(e[33]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1),re(" Free ")])))]),a("div",Kte,[a("div",Yte,[e[34]||(e[34]=a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),re(" "+p(n.selectedCourse.duration||"30 "),1)]),e[35]||(e[35]=a("div",{class:"modal-provider"},[a("span",null,""),a("img",{src:Aa,alt:"ACED",class:"h-6 w-6 object-contain"})],-1))])]),a("div",Qte,[a("div",Xte,[a("div",Jte,[a("span",Zte,p(n.selectedCourse.category||""),1),a("span",ese,p(n.selectedCourse.level||""),1)]),a("h2",tse,p(n.selectedCourse.title||" "),1),a("p",sse,p(n.selectedCourse.fullDescription||n.selectedCourse.description||"   "),1)]),e[42]||(e[42]=a("div",{class:"modal-divider"},null,-1)),a("div",rse,[a("div",nse,[a("div",ise,[e[37]||(e[37]=a("h3",{class:"modal-section-title"},[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})]),re("   : ")],-1)),a("ul",ose,[(b(!0),S(he,null,be(i.getSkillsList(n.selectedCourse),(l,c)=>(b(),S("li",{key:`skill-${c}`,class:"modal-skill-item"},[e[36]||(e[36]=a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"skill-check-icon"},[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-8.08"}),a("path",{d:"M22 4L12 14.01l-3-3"})],-1)),re(" "+p(l),1)]))),128))])]),a("div",ase,[e[38]||(e[38]=a("h3",{class:"modal-section-title"},[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a("polyline",{points:"14 2 14 8 20 8"})]),re("  : ")],-1)),a("ul",lse,[(b(!0),S(he,null,be(i.getModulesList(n.selectedCourse),(l,c)=>(b(),S("li",{key:`module-${c}`,class:"modal-module-item"},[a("span",cse,p(c+1)+".",1),a("span",use,p(l),1)]))),128))])])])]),a("div",dse,[a("button",{class:ye(["modal-action-button",{premium:n.selectedCourse.isPremium&&!i.isPremiumUser,accessible:!n.selectedCourse.isPremium||i.isPremiumUser}]),onClick:e[12]||(e[12]=l=>i.startCourse(n.selectedCourse)),disabled:n.selectedCourse.isPremium&&!i.isPremiumUser},[n.selectedCourse.isPremium&&!i.isPremiumUser?(b(),S("svg",fse,e[39]||(e[39]=[a("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"},null,-1),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)]))):(b(),S("svg",pse,e[40]||(e[40]=[a("polygon",{points:"5 3 19 12 5 21 5 3"},null,-1)]))),n.selectedCourse.isPremium&&!i.isPremiumUser?(b(),S("span",mse,"   "+p(i.currentUserStatus==="free"?"Start/Pro":"Pro"),1)):(b(),S("span",gse," "))],10,hse),e[41]||(e[41]=a("p",{class:"modal-action-description"},"         ",-1))])])])):W("",!0)])])):W("",!0)]),_:1})]))}const vse=tt(lte,[["render",yse],["__scopeId","data-v-73ceb31e"]]);function bv(){const t=xh(),e={1:"A1",2:"A1",3:"A1",4:"A2",5:"A2",6:"A2",7:"B1",8:"B1",9:"B1",10:"B2",11:"B2",12:"B2",13:"C1",14:"C1",15:"C1",16:"C2",17:"C2",18:"C2",19:"Expert",20:"Master"},s={A1:"Beginner - Basic phrases and simple interactions",A2:"Elementary - Can describe familiar situations",B1:"Intermediate - Can handle most daily situations",B2:"Upper Intermediate - Can interact with native speakers",C1:"Advanced - Fluent and spontaneous communication",C2:"Proficient - Near-native mastery",Expert:"Expert - Professional level expertise",Master:"Master - Complete mastery of the subject"},r=_e(()=>t.getters["platformMode/learningMode"]),n=_e(()=>t.getters["platformMode/isSchoolMode"]),i=_e(()=>t.getters["platformMode/isStudyCentreMode"]),o=_e(()=>t.getters["platformMode/hasSelectedMode"]),l=_e(()=>t.getters["platformMode/currentGrade"]),c=_e(()=>t.getters["platformMode/currentLevelCap"]),u=_e(()=>t.getters["platformMode/accessibleLevels"]),h=_e(()=>t.getters["platformMode/placementTestTaken"]),f=_e(()=>t.getters["platformMode/levelProgress"]),m=te=>t.getters["platformMode/canAccessLevel"](te),g=te=>t.getters["platformMode/isLevelCompleted"](te),v=te=>i.value?!1:!m(te),I=te=>e[te]||"Unknown",C=te=>s[te]||"Unknown level",U=te=>Object.entries(e).filter(([le,$e])=>$e===te).map(([le,$e])=>parseInt(le)),D=(te,le=0,$e=1)=>$e===0?0:Math.round(le/$e*100),E=()=>i.value?null:c.value+1,L=()=>n.value&&!h.value,$=te=>i.value?"":h.value?te>c.value?`Complete Level ${te-1} to unlock this level`:"This level is currently locked":"Complete the placement test to unlock levels",M=te=>({A1:"#10b981",A2:"#3b82f6",B1:"#8b5cf6",B2:"#a855f7",C1:"#ec4899",C2:"#f43f5e",Expert:"#f59e0b",Master:"#eab308"})[te]||"#6b7280",A=(te,le)=>te<le?-1:te>le?1:0,w=()=>{const te=l.value;return!te||["A1","A2"].includes(te)?"beginner":["B1","B2"].includes(te)?"intermediate":"advanced"},_=(te,le=!0)=>{if(!le)return`Level ${te}`;const $e=I(te);return`Level ${te} (${$e})`},P=()=>l.value?U(l.value):[],R=te=>I(te)===l.value,x=()=>{const te=P(),le=te.filter(me=>g(me)).length,$e=te.length,vt=$e>0?Math.round(le/$e*100):0;return{completed:le,total:$e,percentage:vt}};return{learningMode:r,isSchoolMode:n,isStudyCentreMode:i,hasSelectedMode:o,currentGrade:l,currentLevelCap:c,accessibleLevels:u,placementTestTaken:h,levelProgress:f,canAccessLevel:m,isLevelCompleted:g,isLevelLocked:v,shouldTakePlacementTest:L,getLockReason:$,getLevelGrade:I,getGradeDescription:C,getLevelsForGrade:U,getAllGrades:()=>["A1","A2","B1","B2","C1","C2","Expert","Master"],getMinLevelForGrade:te=>{const le=U(te);return le.length>0?Math.min(...le):1},getMaxLevelForGrade:te=>{const le=U(te);return le.length>0?Math.max(...le):1},calculateLevelProgress:D,getNextUnlockableLevel:E,getCurrentGradeProgress:x,canProgressToNextGrade:()=>{const{completed:te,total:le}=x();return te===le},getGradeBadgeColor:M,compareLevels:A,getRecommendedDifficulty:w,formatLevel:_,getCurrentGradeLevels:P,isInCurrentGrade:R,LEVEL_GRADE_MAPPING:e,GRADE_DESCRIPTIONS:s}}function _se(){const{isSchoolMode:t}=bv(),e=Se({}),s=Se([]),r=Se(!1),n=Se(null),i=async(f={})=>{r.value=!0,n.value=null;try{if(t.value){const m=await dv();if(m.success)e.value=m.data;else throw new Error(m.error||"Failed to load content")}else{const m=await hv(f);if(m.success)s.value=m.courses;else throw new Error(m.error||"Failed to load courses")}}catch(m){n.value=m.message}finally{r.value=!1}},o=_e(()=>t.value?Object.keys(e.value).sort():[]),l=f=>!t.value||!e.value[f]?[]:Object.keys(e.value[f]).map(Number).sort((m,g)=>m-g),c=(f,m)=>{var g;return!t.value||!((g=e.value[f])!=null&&g[m])?[]:e.value[f][m]},u=_e(()=>{if(t.value){let f=0;for(const m in e.value)for(const g in e.value[m])f+=e.value[m][g].length;return f}else return s.value.length});return{groupedContent:e,courseCards:s,loading:r,error:n,subjects:o,totalTopicsCount:u,fetchContent:i,getLevelsForSubject:l,getTopicsForLevel:c,getTopicsCountForSubject:f=>{if(!t.value||!e.value[f])return 0;let m=0;for(const g in e.value[f])m+=e.value[f][g].length;return m}}}const bse={name:"PaymentModal",props:{isOpen:{type:Boolean,default:!1}},data(){return{selectedPlan:null,promoCode:"",promoLoading:!1,promoError:"",promoSuccess:"",isProcessing:!1}},methods:{close(){this.$emit("close"),this.resetState()},selectPlan(t){this.selectedPlan=t,this.promoError=""},async applyPromoCode(){if(this.promoCode){this.promoLoading=!0,this.promoError="",this.promoSuccess="";try{(await(await fetch("/api/promo/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:this.promoCode})})).json()).valid?(this.promoSuccess=this.$t("success.promocodeApplied"),this.selectedPlan=null):this.promoError=this.$t("settings.invalidPromocode")}catch{this.promoError=this.$t("payment.promoError")}finally{this.promoLoading=!1}}},async proceedToPayment(){if(!this.selectedPlan&&!this.promoSuccess){this.promoError=this.selectedPlan?"":this.$t("payment.selectPlanFirst");return}this.isProcessing=!0;try{const t=this.promoSuccess?{promoCode:this.promoCode}:{plan:this.selectedPlan},s=await(await fetch("/api/payment/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();s.paymentUrl&&(window.location.href=s.paymentUrl)}catch{this.promoError=this.$t("payment.paymentError")}finally{this.isProcessing=!1}},resetState(){this.selectedPlan=null,this.promoCode="",this.promoError="",this.promoSuccess="",this.isProcessing=!1}}},wse={class:"payment-modal"},Sse={class:"modal-header"},Ese={class:"modal-content"},Tse={class:"subtitle"},kse={class:"plans-section"},Ise={class:"plans-grid"},Cse={class:"plan-header"},Ase={class:"plan-price"},Pse={class:"plan-features"},xse={class:"recommended-badge"},Lse={class:"plan-header"},Rse={class:"plan-price"},Nse={class:"plan-features"},Ose={class:"promo-section"},Dse={class:"promo-input-wrapper"},Mse=["placeholder"],$se=["disabled"],Use={key:0,class:"error-message"},Fse={key:1,class:"success-message"},Vse={class:"modal-footer"},qse=["disabled"];function Bse(t,e,s,r,n,i){return s.isOpen?(b(),S("div",{key:0,class:"payment-modal-overlay",onClick:e[7]||(e[7]=gt((...o)=>i.close&&i.close(...o),["self"]))},[a("div",wse,[a("div",Sse,[a("h2",null,p(t.$t("payment.premiumAccess")),1),a("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>i.close&&i.close(...o))},e[8]||(e[8]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),a("div",Ese,[a("p",Tse,p(t.$t("payment.chooseAccessMethod")),1),a("div",kse,[a("h3",null,p(t.$t("payment.selectPlan")),1),a("div",Ise,[a("div",{class:ye(["plan-card",{selected:n.selectedPlan==="start"}]),onClick:e[1]||(e[1]=o=>i.selectPlan("start"))},[a("div",Cse,[e[9]||(e[9]=a("span",{class:"plan-name"},"Start",-1)),a("span",Ase,"260,000 "+p(t.$t("payment.sum")),1)]),a("ul",Pse,[a("li",null,p(t.$t("payment.basicCourses")),1),a("li",null,p(t.$t("payment.homework")),1),a("li",null,p(t.$t("payment.basicTests")),1)])],2),a("div",{class:ye(["plan-card pro",{selected:n.selectedPlan==="pro"}]),onClick:e[2]||(e[2]=o=>i.selectPlan("pro"))},[a("div",xse,p(t.$t("payment.recommended")),1),a("div",Lse,[e[10]||(e[10]=a("span",{class:"plan-name"},"Pro",-1)),a("span",Rse,"450,000 "+p(t.$t("payment.sum")),1)]),a("ul",Nse,[a("li",null,p(t.$t("payment.allStartCourses")),1),a("li",null,p(t.$t("payment.advancedCourses")),1),a("li",null,p(t.$t("payment.personalAnalytics")),1),a("li",null,p(t.$t("payment.prioritySupport")),1)])],2)])]),a("div",Ose,[a("h3",null,p(t.$t("payment.orEnterPromo")),1),a("div",Dse,[Pe(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.promoCode=o),type:"text",placeholder:t.$t("payment.enterPromoCode"),class:ye(["promo-input",{error:n.promoError,success:n.promoSuccess}])},null,10,Mse),[[Ge,n.promoCode]]),a("button",{class:"apply-btn",onClick:e[4]||(e[4]=(...o)=>i.applyPromoCode&&i.applyPromoCode(...o)),disabled:!n.promoCode||n.promoLoading},p(n.promoLoading?"...":t.$t("common.apply")),9,$se)]),n.promoError?(b(),S("p",Use,p(n.promoError),1)):W("",!0),n.promoSuccess?(b(),S("p",Fse,p(n.promoSuccess),1)):W("",!0)])]),a("div",Vse,[a("button",{class:"cancel-btn",onClick:e[5]||(e[5]=(...o)=>i.close&&i.close(...o))},p(t.$t("common.cancel")),1),a("button",{class:"pay-btn",onClick:e[6]||(e[6]=(...o)=>i.proceedToPayment&&i.proceedToPayment(...o)),disabled:!n.selectedPlan&&!n.promoSuccess||n.isProcessing},p(n.isProcessing?t.$t("payment.processing"):t.$t("payment.pay")),9,qse)])])])):W("",!0)}const PP=tt(bse,[["render",Bse],["__scopeId","data-v-e9617796"]]),jse={name:"CataloguePage",components:{PaymentModal:PP},mixins:[wf],setup(){const{isSchoolMode:t,isStudyCentreMode:e,canAccessLevel:s,currentLevelCap:r,placementTestTaken:n}=bv(),{groupedContent:i,courseCards:o,loading:l,error:c,subjects:u,fetchContent:h,getLevelsForSubject:f,getTopicsForLevel:m,totalTopicsCount:g}=_se();return{isSchoolMode:t,isStudyCentreMode:e,canAccessLevel:s,currentLevelCap:r,placementTestTaken:n,groupedContent:i,courseCards:o,modeLoading:l,modeError:c,subjects:u,fetchContent:h,getLevelsForSubject:f,getTopicsForLevel:m,totalTopicsCount:g}},data(){return{userId:null,lessons:[],userProgress:{},studyPlanTopics:[],isLoading:!0,courses:[],searchQuery:"",selectedSubjectFilter:null,selectedLevelFilter:null,typeFilter:"all",progressFilter:"all",currentPage:1,coursesPerPage:12,randomSeed:Math.random(),showAddModal:!1,showSuccessModal:!1,showPaywall:!1,selectedCourse:null,requestedTopicId:null}},computed:{...tn("user",{vuexUserStatus:"userStatus"}),userStatus(){return this.vuexUserStatus||localStorage.getItem("userStatus")||"free"},availableSubjects(){return[...new Set(this.courses.map(t=>t.subject))].sort()},availableLevels(){return[...new Set(this.courses.map(t=>t.level))].sort((t,e)=>Number(t)-Number(e))},coursesBySubject(){if(!this.isSchoolMode)return{};const t={};return this.filteredCourses.forEach(e=>{const s=e.subject||"Uncategorized";t[s]||(t[s]=[]),t[s].push(e)}),Object.keys(t).forEach(e=>t[e].sort((s,r)=>Number(s.level)-Number(r.level))),t},filteredCourses(){let t=this.courses;return this.isSchoolMode&&(t=t.filter(e=>this.canAccessLevel(Number(e.level||1)))),t.filter(e=>!(this.searchQuery&&!e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||this.selectedSubjectFilter&&e.subject!==this.selectedSubjectFilter||this.selectedLevelFilter&&e.level!==this.selectedLevelFilter||this.typeFilter==="free"&&e.type!=="free"||this.typeFilter==="premium"&&e.type==="free"))},totalPages(){return Math.max(1,Math.ceil(this.filteredCourses.length/this.coursesPerPage))},paginatedCourses(){return[...this.filteredCourses].sort((e,s)=>this.hashString(e.topicId+this.randomSeed)-this.hashString(s.topicId+this.randomSeed)).slice((this.currentPage-1)*this.coursesPerPage,this.currentPage*this.coursesPerPage)},hasActiveFilters(){return!!(this.searchQuery||this.selectedSubjectFilter||this.selectedLevelFilter||this.typeFilter!=="all")}},async mounted(){var t,e;if(this.userId=((e=(t=this.$store)==null?void 0:t.state)==null?void 0:e.firebaseUserId)||localStorage.getItem("firebaseUserId"),!this.userId){this.$router.push("/");return}await this.loadData()},methods:{async loadData(){this.isLoading=!0;try{const[t,e]=await Promise.all([pv(this.userId),mv(this.userId)]);t!=null&&t.success&&(this.userProgress=this.processProgressData(t.data)),e!=null&&e.success&&(this.studyPlanTopics=e.data.map(r=>this.extractTopicId(r.topicId)).filter(Boolean));try{if(this.isSchoolMode){const r=await dv();r.success&&r.data&&this.processModeContent(r.data,"school")}else{const r=await hv();r.success&&r.courses&&this.processModeContent(r.courses,"study-centre")}}catch{}const s=await fv();this.lessons=(s==null?void 0:s.data)||[],this.mergeOrphanLessons()}catch{}finally{this.isLoading=!1}},processProgressData(t){const e={},s={};this.lessons.forEach(n=>{const i=this.extractTopicId(n.topicId);i&&(s[i]||(s[i]=new Set),s[i].add(this.extractTopicId(n._id)))}),t.forEach(n=>{const i=this.extractTopicId(n.topicId);i&&n.completed&&(e[i]||(e[i]=0),e[i]++)});const r={};for(const n in s)r[n]=s[n].size>0?Math.round((e[n]||0)/s[n].size*100):0;return r},mergeOrphanLessons(){const t=new Set(this.courses.map(r=>r.topicId)),e=new Map;this.lessons.forEach(r=>{const n=this.extractTopicId(r.topicId);if(!n||t.has(n))return;e.has(n)||e.set(n,{topicId:n,name:this.getTopicName(r),level:String(r.level||"1"),subject:this.getSubjectName(r),lessonCount:0,totalTime:0,type:"free"});const i=e.get(n);i.lessonCount++,i.totalTime+=r.estimatedTime||r.duration||10,["premium","start","pro"].includes(r.type)&&(i.type="premium")});const s=Array.from(e.values()).map(r=>({...r,progress:this.userProgress[r.topicId]||0,inStudyPlan:this.studyPlanTopics.includes(r.topicId)}));this.courses=[...this.courses,...s]},processModeContent(t,e){if(e==="school"){const s=[];for(const r in t)for(const n in t[r])t[r][n].forEach(i=>s.push({topicId:i._id||i.id,name:this.getLocalizedName(i.name)||this.getLocalizedName(i.topicName)||this.getLocalizedName(i.title)||"Course",level:String(n),subject:r,lessonCount:i.lessonCount||0,totalTime:i.totalTime||10,type:i.type||"free",progress:this.userProgress[i._id||i.id]||0,inStudyPlan:this.studyPlanTopics.includes(i._id||i.id)}));this.courses=s}else this.courses=t.map(s=>({topicId:s._id||s.id||s.topicId,name:this.getLocalizedName(s.name)||this.getLocalizedName(s.topicName)||this.getLocalizedName(s.title)||"Course",level:String(s.level||1),subject:s.subject||"Uncategorized",lessonCount:s.lessonCount||0,totalTime:s.totalTime||10,type:s.type||"free",progress:this.userProgress[s._id||s.id||s.topicId]||0,inStudyPlan:this.studyPlanTopics.includes(s._id||s.id||s.topicId)}))},clearFilters(){this.searchQuery="",this.selectedSubjectFilter=null,this.selectedLevelFilter=null,this.typeFilter="all",this.currentPage=1},shuffleCourses(){this.randomSeed=Math.random(),this.currentPage=1},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,window.scrollTo({top:0,behavior:"smooth"}))},prevPage(){this.currentPage>1&&(this.currentPage--,window.scrollTo({top:0,behavior:"smooth"}))},handleCourseAccess(t,e){if(!this.hasTopicAccess(e)){this.requestedTopicId=t,this.showPaywall=!0;return}this.$router.push(`/topic/${t}/overview`)},addToStudyPlan(t){t.inStudyPlan||(this.selectedCourse=t,this.showAddModal=!0)},async confirmAddToStudyPlan(){if(!(!this.selectedCourse||!this.userId))try{let t=this.selectedCourse.topicId||this.selectedCourse._id||this.selectedCourse.id;t&&typeof t=="object"&&(t=t._id||t.id);const e=await wP(this.userId,{topicId:t,topic:this.selectedCourse.name,subject:this.selectedCourse.subject||"General",level:parseInt(this.selectedCourse.level)||1,lessonCount:this.selectedCourse.lessonCount||0,totalTime:this.selectedCourse.totalTime||10,type:this.selectedCourse.type||"free"});if(e!=null&&e.success){this.selectedCourse.inStudyPlan=!0,this.studyPlanTopics.push(this.selectedCourse.topicId);const s=this.courses.findIndex(r=>r.topicId===this.selectedCourse.topicId);s!==-1&&(this.courses[s].inStudyPlan=!0),window.eventBus&&window.eventBus.emit("studyListUpdated"),this.showAddModal=!1,this.showSuccessModal=!0}}catch(t){alert(t.message),this.showAddModal=!1}},handlePaymentSuccess(){this.showPaywall=!1,this.$forceUpdate()},hashString(t){let e=0;for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e=e&e;return Math.abs(e)},extractTopicId(t){return t?typeof t=="string"?t:typeof t=="object"&&t._id?t._id:String(t):null},getLocalizedName(t){if(!t)return"";if(typeof t=="string")return t.trim();if(typeof t=="object"){const e=localStorage.getItem("lang")||"ru",s=t[e]||t.en||t.ru||t.uz;if(s&&typeof s=="string")return s.trim();const r=Object.values(t);for(const n of r)if(n&&typeof n=="string")return n.trim()}return""},getSubjectName(t){return t!=null&&t.subjectName?this.getLocalizedName(t.subjectName):t!=null&&t.subject?String(t.subject):"Uncategorized"},getTopicName(t){var s,r;if(t!=null&&t.topic&&typeof t.topic=="string"&&t.topic.trim())return t.topic.trim();if(t!=null&&t.topicName&&typeof t.topicName=="string")return t.topicName.trim();if(t!=null&&t.title)return this.getLocalizedName(t.title);const e=localStorage.getItem("lang")||"ru";if((r=(s=t==null?void 0:t.translations)==null?void 0:s[e])!=null&&r.topic)return t.translations[e].topic.trim();if(t!=null&&t.lessonName){if(typeof t.lessonName=="string")return t.lessonName.trim();if(typeof t.lessonName=="object"){const n=t.lessonName[e]||t.lessonName.en||t.lessonName.ru||t.lessonName.uz;if(n&&typeof n=="string")return n.trim()}}return"Untitled"},getLevelDescription(t){const e={1:"catalogue.beginner",2:"catalogue.elementary",3:"catalogue.intermediate",4:"catalogue.intermediate",5:"catalogue.upperIntermediate",6:"catalogue.advanced"};return e[parseInt(t)]?this.$t(e[parseInt(t)]):`${this.$t("dashboard.level")} ${t}`},getProgressColor(t){return t>=80?"bg-green-500":t>=40?"bg-indigo-500":t>0?"bg-amber-500":"bg-gray-200"},getButtonText(t){return t===100?this.$t("catalogue.review"):t>0?this.$t("catalogue.continueBtn"):this.$t("catalogue.start")},hasTopicAccess(t){return t==="free"||this.userStatus==="pro"||this.userStatus==="start"},getSubjectEmoji(t){return{Mathematics:"",Math:"",English:"",Science:"",Physics:"",Chemistry:"",Biology:"",History:"",Geography:"","Computer Science":"",Programming:"",Art:"",Music:"",Languages:""}[t]||""}}},Hse={class:"min-h-screen bg-white"},zse={class:"max-w-6xl mx-auto px-6 pt-8 pb-6"},Wse={class:"flex items-center justify-between"},Gse={class:"flex items-center gap-4"},Kse={class:"text-2xl font-bold text-slate-800"},Yse={class:"text-slate-500 text-sm"},Qse={class:"hidden md:flex items-center gap-3"},Xse={class:"px-4 py-2 rounded-full bg-purple-50 text-purple-600 text-sm font-medium"},Jse={class:"max-w-6xl mx-auto px-6 pb-6"},Zse={class:"flex flex-wrap items-center gap-3"},ere={class:"relative flex-1 min-w-64"},tre=["placeholder"],sre={value:null},rre=["value"],nre={value:null},ire=["value"],ore={value:"all"},are={value:"free"},lre={value:"premium"},cre={key:0,class:"flex flex-col items-center justify-center py-24"},ure={class:"mt-4 text-slate-500 text-sm"},dre={key:1,class:"max-w-6xl mx-auto px-6 pb-12"},hre={key:0,class:"text-center py-24"},fre={class:"text-lg font-semibold text-slate-800 mb-2"},pre={class:"text-slate-500 text-sm"},mre={key:1,class:"space-y-10"},gre={class:"flex items-center gap-3 mb-4"},yre={class:"text-2xl"},vre={class:"text-xl font-bold text-slate-800"},_re={class:"px-2 py-0.5 rounded-full bg-gray-100 text-gray-500 text-xs font-medium"},bre={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},wre=["onClick"],Sre={class:"flex items-center justify-between mb-3"},Ere={class:"px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-xs font-medium"},Tre={class:"flex items-center gap-2"},kre=["onClick","disabled"],Ire=["fill"],Cre={class:"font-semibold text-slate-800 mb-3 line-clamp-2 group-hover:text-indigo-600 transition-colors"},Are={class:"flex items-center gap-4 text-xs text-slate-500 mb-4"},Pre={class:"flex items-center gap-1"},xre={class:"flex items-center gap-1"},Lre={class:"mb-3"},Rre={class:"flex justify-between text-xs mb-1"},Nre={class:"text-slate-400"},Ore={class:"font-medium text-slate-600"},Dre={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},Mre={class:"pt-3 border-t border-gray-50 flex justify-end"},$re={class:"text-sm font-medium text-indigo-500 group-hover:text-indigo-600 flex items-center gap-1"},Ure={key:2},Fre={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8"},Vre=["onClick"],qre={class:"flex items-center justify-between mb-3"},Bre={class:"flex items-center gap-2"},jre={class:"text-lg"},Hre={class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},zre={class:"flex items-center gap-2"},Wre=["onClick","disabled"],Gre=["fill"],Kre={class:"font-semibold text-slate-800 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors"},Yre={class:"text-xs text-slate-500 mb-3"},Qre={class:"flex items-center gap-4 text-xs text-slate-500 mb-4"},Xre={class:"flex items-center gap-1"},Jre={class:"flex items-center gap-1"},Zre={class:"mb-3"},ene={class:"flex justify-between text-xs mb-1"},tne={class:"text-slate-400"},sne={class:"font-medium text-slate-600"},rne={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},nne={class:"pt-3 border-t border-gray-50 flex justify-end"},ine={class:"text-sm font-medium text-indigo-500 group-hover:text-indigo-600 flex items-center gap-1"},one={key:0,class:"flex items-center justify-center gap-4"},ane=["disabled"],lne={class:"text-sm text-slate-600"},cne={class:"font-bold text-indigo-500"},une=["disabled"],dne={class:"text-center mb-4"},hne={class:"text-lg font-bold text-slate-800"},fne={key:0,class:"text-slate-500 text-sm text-center mb-6"},pne={class:"text-slate-800"},mne={class:"flex gap-3"},gne={class:"text-lg font-bold text-slate-800 mb-2"},yne={key:0,class:"text-slate-500 text-sm mb-6"};function vne(t,e,s,r,n,i){const o=es("PaymentModal");return b(),S("div",Hse,[a("div",zse,[a("div",Wse,[a("div",Gse,[e[16]||(e[16]=a("div",{class:"w-12 h-12 rounded-2xl bg-indigo-50 flex items-center justify-center"},[a("span",{class:"text-2xl"},"")],-1)),a("div",null,[a("h1",Kse,p(t.$t("catalogue.title")),1),a("p",Yse,p(i.filteredCourses.length)+" "+p(t.$t("catalogue.courses")),1)])]),a("div",Qse,[a("div",Xse,"  "+p(n.studyPlanTopics.length)+" "+p(t.$t("catalogue.inPlan")),1),a("div",{class:ye(["px-4 py-2 rounded-full text-sm font-bold",{"bg-gray-100 text-gray-600":i.userStatus==="free","bg-amber-100 text-amber-700":i.userStatus==="start"||i.userStatus==="pro"}])},p(i.userStatus==="pro"?" Pro":i.userStatus==="start"?" Start":" Free"),3)])])]),a("div",Jse,[a("div",Zse,[a("div",ere,[Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.searchQuery=l),type:"text",class:"w-full px-4 py-2.5 pl-10 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 transition-all",placeholder:t.$t("catalogue.findCourse")},null,8,tre),[[Ge,n.searchQuery]]),e[17]||(e[17]=a("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1))]),Pe(a("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>n.selectedSubjectFilter=l),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",sre,p(t.$t("catalogue.allSubjects")),1),(b(!0),S(he,null,be(i.availableSubjects,l=>(b(),S("option",{key:l,value:l},p(l),9,rre))),128))],512),[[Js,n.selectedSubjectFilter]]),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.selectedLevelFilter=l),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",nre,p(t.$t("catalogue.allLevels")),1),(b(!0),S(he,null,be(i.availableLevels,l=>(b(),S("option",{key:l,value:l},p(t.$t("dashboard.level"))+" "+p(l),9,ire))),128))],512),[[Js,n.selectedLevelFilter]]),Pe(a("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>n.typeFilter=l),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",ore,p(t.$t("catalogue.allTypes")),1),a("option",are,p(t.$t("catalogue.free")),1),a("option",lre,p(t.$t("catalogue.premium")),1)],512),[[Js,n.typeFilter]]),i.hasActiveFilters?(b(),S("button",{key:0,onClick:e[4]||(e[4]=(...l)=>i.clearFilters&&i.clearFilters(...l)),class:"px-4 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 transition-all"},p(t.$t("catalogue.clear")),1)):W("",!0),a("button",{onClick:e[5]||(e[5]=(...l)=>i.shuffleCourses&&i.shuffleCourses(...l)),class:"p-2.5 rounded-xl border border-gray-200 text-slate-500 hover:border-gray-300 hover:text-slate-700 transition-all",title:"Shuffle"},e[18]||(e[18]=[kt('<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-214c6b4e><polyline points="16 3 21 3 21 8" data-v-214c6b4e></polyline><line x1="4" y1="20" x2="21" y2="3" data-v-214c6b4e></line><polyline points="21 16 21 21 16 21" data-v-214c6b4e></polyline><line x1="15" y1="15" x2="21" y2="21" data-v-214c6b4e></line><line x1="4" y1="4" x2="9" y2="9" data-v-214c6b4e></line></svg>',1)]))])]),n.isLoading?(b(),S("div",cre,[e[19]||(e[19]=a("div",{class:"w-8 h-8 border-2 border-indigo-200 border-t-indigo-500 rounded-full animate-spin"},null,-1)),a("p",ure,p(t.$t("catalogue.loadingCourses")),1)])):(b(),S("main",dre,[i.filteredCourses.length?r.isSchoolMode?(b(),S("div",mre,[(b(!0),S(he,null,be(i.coursesBySubject,(l,c)=>(b(),S("section",{key:c},[a("div",gre,[a("span",yre,p(i.getSubjectEmoji(c)),1),a("h2",vre,p(c),1),a("span",_re,p(l.length),1)]),a("div",bre,[(b(!0),S(he,null,be(l,u=>(b(),S("article",{key:u.topicId,onClick:h=>i.handleCourseAccess(u.topicId,u.type),class:"group p-5 rounded-2xl border border-gray-100 hover:border-indigo-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white"},[a("div",Sre,[a("span",Ere,p(t.$t("catalogue.lvl"))+" "+p(u.level),1),a("div",Tre,[a("span",{class:ye(["px-2 py-1 rounded-lg text-xs font-bold",u.type==="free"?"bg-gray-100 text-gray-500":"bg-amber-100 text-amber-700"])},p(u.type==="free"?"FREE":"PRO"),3),a("button",{onClick:gt(h=>i.addToStudyPlan(u),["stop"]),disabled:u.inStudyPlan,class:ye(["p-1.5 rounded-lg transition-all",u.inStudyPlan?"bg-indigo-100 text-indigo-500":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"])},[(b(),S("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:u.inStudyPlan?"currentColor":"none",stroke:"currentColor","stroke-width":"2"},e[21]||(e[21]=[a("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},null,-1)]),8,Ire))],10,kre)])]),a("h3",Cre,p(u.name),1),a("div",Are,[a("span",Pre,[e[22]||(e[22]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"})],-1)),re(" "+p(u.lessonCount)+" "+p(t.$t("catalogue.lessons")),1)]),a("span",xre,[e[23]||(e[23]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),re(" "+p(u.totalTime)+"m ",1)])]),a("div",Lre,[a("div",Rre,[a("span",Nre,p(t.$t("catalogue.progress")),1),a("span",Ore,p(u.progress)+"%",1)]),a("div",Dre,[a("div",{class:ye(["h-full rounded-full transition-all duration-500",i.getProgressColor(u.progress)]),style:ct({width:u.progress+"%"})},null,6)])]),a("div",Mre,[a("span",$re,[re(p(i.getButtonText(u.progress))+" ",1),e[24]||(e[24]=a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])],8,wre))),128))])]))),128))])):(b(),S("div",Ure,[a("div",Fre,[(b(!0),S(he,null,be(i.paginatedCourses,l=>(b(),S("article",{key:l.topicId,onClick:c=>i.handleCourseAccess(l.topicId,l.type),class:"group p-5 rounded-2xl border border-gray-100 hover:border-indigo-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white"},[a("div",qre,[a("div",Bre,[a("span",jre,p(i.getSubjectEmoji(l.subject)),1),a("span",Hre,p(l.subject),1)]),a("div",zre,[a("span",{class:ye(["px-2 py-1 rounded-lg text-xs font-bold",l.type==="free"?"bg-gray-100 text-gray-500":"bg-amber-100 text-amber-700"])},p(l.type==="free"?"FREE":"PRO"),3),a("button",{onClick:gt(c=>i.addToStudyPlan(l),["stop"]),disabled:l.inStudyPlan,class:ye(["p-1.5 rounded-lg transition-all",l.inStudyPlan?"bg-indigo-100 text-indigo-500":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"])},[(b(),S("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:l.inStudyPlan?"currentColor":"none",stroke:"currentColor","stroke-width":"2"},e[25]||(e[25]=[a("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},null,-1)]),8,Gre))],10,Wre)])]),a("h3",Kre,p(l.name),1),a("div",Yre,p(t.$t("dashboard.level"))+" "+p(l.level)+"  "+p(i.getLevelDescription(l.level)),1),a("div",Qre,[a("span",Xre,[e[26]||(e[26]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"})],-1)),re(" "+p(l.lessonCount)+" "+p(t.$t("catalogue.lessons")),1)]),a("span",Jre,[e[27]||(e[27]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),re(" "+p(l.totalTime)+"m ",1)])]),a("div",Zre,[a("div",ene,[a("span",tne,p(t.$t("catalogue.progress")),1),a("span",sne,p(l.progress)+"%",1)]),a("div",rne,[a("div",{class:ye(["h-full rounded-full transition-all duration-500",i.getProgressColor(l.progress)]),style:ct({width:l.progress+"%"})},null,6)])]),a("div",nne,[a("span",ine,[re(p(i.getButtonText(l.progress))+" ",1),e[28]||(e[28]=a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])],8,Vre))),128))]),i.totalPages>1?(b(),S("div",one,[a("button",{onClick:e[6]||(e[6]=(...l)=>i.prevPage&&i.prevPage(...l)),disabled:n.currentPage===1,class:"w-10 h-10 rounded-xl border border-gray-200 flex items-center justify-center text-slate-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed transition-all"},e[29]||(e[29]=[a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15 18 9 12 15 6"})],-1)]),8,ane),a("span",lne,[a("span",cne,p(n.currentPage),1),re(" / "+p(i.totalPages),1)]),a("button",{onClick:e[7]||(e[7]=(...l)=>i.nextPage&&i.nextPage(...l)),disabled:n.currentPage===i.totalPages,class:"w-10 h-10 rounded-xl border border-gray-200 flex items-center justify-center text-slate-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed transition-all"},e[30]||(e[30]=[a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9 18 15 12 9 6"})],-1)]),8,une)])):W("",!0)])):(b(),S("div",hre,[e[20]||(e[20]=a("div",{class:"text-6xl mb-4"},"",-1)),a("h3",fre,p(t.$t("catalogue.noCoursesFound")),1),a("p",pre,p(t.$t("catalogue.tryAdjustingFilters")),1)]))])),xe(ma,{name:"fade"},{default:Qt(()=>[n.showAddModal?(b(),S("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e[11]||(e[11]=l=>n.showAddModal=!1)},[a("div",{class:"bg-white rounded-2xl shadow-xl max-w-sm w-full p-6",onClick:e[10]||(e[10]=gt(()=>{},["stop"]))},[a("div",dne,[e[31]||(e[31]=a("div",{class:"text-4xl mb-3"},"",-1)),a("h3",hne,p(t.$t("catalogue.addToStudyPlan")),1)]),n.selectedCourse?(b(),S("p",fne,[a("strong",pne,p(n.selectedCourse.name),1)])):W("",!0),a("div",mne,[a("button",{onClick:e[8]||(e[8]=l=>n.showAddModal=!1),class:"flex-1 py-2.5 border border-gray-200 rounded-xl font-medium text-slate-600 hover:bg-gray-50 transition-all"},p(t.$t("catalogue.cancel")),1),a("button",{onClick:e[9]||(e[9]=(...l)=>i.confirmAddToStudyPlan&&i.confirmAddToStudyPlan(...l)),class:"flex-1 py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-all"},p(t.$t("catalogue.add")),1)])])])):W("",!0)]),_:1}),xe(ma,{name:"fade"},{default:Qt(()=>[n.showSuccessModal?(b(),S("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e[14]||(e[14]=l=>n.showSuccessModal=!1)},[a("div",{class:"bg-white rounded-2xl shadow-xl max-w-sm w-full p-6 text-center",onClick:e[13]||(e[13]=gt(()=>{},["stop"]))},[e[32]||(e[32]=a("div",{class:"text-5xl mb-3"},"",-1)),a("h3",gne,p(t.$t("catalogue.added")),1),n.selectedCourse?(b(),S("p",yne,p(n.selectedCourse.name),1)):W("",!0),a("button",{onClick:e[12]||(e[12]=l=>n.showSuccessModal=!1),class:"w-full py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-all"},p(t.$t("catalogue.great")),1)])])):W("",!0)]),_:1}),n.showPaywall?(b(),ts(o,{key:2,"user-id":n.userId,visible:n.showPaywall,"requested-topic-id":n.requestedTopicId,onClose:e[15]||(e[15]=l=>n.showPaywall=!1),onUnlocked:i.handlePaymentSuccess},null,8,["user-id","visible","requested-topic-id","onUnlocked"])):W("",!0)])}const _ne=tt(jse,[["render",vne],["__scopeId","data-v-214c6b4e"]]),bne={name:"LevelPathway",props:{level:{type:Number,default:1},xp:{type:Number,default:0},streak:{type:Number,default:0},lessons:{type:Array,default:()=>[]}},computed:{pathwayNodes(){return this.lessons.length===0?[{title:this.$t("levelPathway.lessonNumber",{number:1}),completed:!0,current:!1,locked:!1},{title:this.$t("levelPathway.lessonNumber",{number:2}),completed:!0,current:!1,locked:!1},{title:this.$t("levelPathway.lessonNumber",{number:3}),completed:!1,current:!0,locked:!1},{title:this.$t("levelPathway.lessonNumber",{number:4}),completed:!1,current:!1,locked:!0},{title:this.$t("levelPathway.lessonNumber",{number:5}),completed:!1,current:!1,locked:!0}]:this.lessons.map((t,e)=>({title:this.getLocalizedTitle(t)||this.$t("levelPathway.lessonNumber",{number:e+1}),completed:t.completed||!1,current:t.current||!1,locked:!t.completed&&!t.current}))},hasCurrentLesson(){return this.pathwayNodes.some(t=>t.current)}},methods:{getLocalizedTitle(t){if(!t)return"";const e=localStorage.getItem("lang")||"ru";if(t.title&&typeof t.title=="string")return t.title;if(t.lessonName){if(typeof t.lessonName=="string")return t.lessonName;if(typeof t.lessonName=="object")return t.lessonName[e]||t.lessonName.en||t.lessonName.ru||t.lessonName.uz||""}return""},continueLesson(){const t=this.pathwayNodes.find(e=>e.current);t&&this.$emit("continue",t)}}},wne={class:"level-pathway"},Sne={class:"pathway-header"},Ene={class:"stat-item"},Tne={class:"stat-info"},kne={class:"stat-value"},Ine={class:"stat-label"},Cne={class:"stat-item"},Ane={class:"stat-info"},Pne={class:"stat-value"},xne={class:"stat-label"},Lne={class:"stat-item"},Rne={class:"stat-info"},Nne={class:"stat-value"},One={class:"stat-label"},Dne={class:"pathway-track"},Mne={key:0,class:"node-connector"},$ne={class:"node-circle"},Une={key:0},Fne={key:1},Vne={key:2},qne={class:"node-label"},Bne=["disabled"];function jne(t,e,s,r,n,i){return b(),S("div",wne,[a("div",Sne,[a("div",Ene,[e[1]||(e[1]=a("div",{class:"stat-icon level-icon"},"",-1)),a("div",Tne,[a("span",kne,p(s.level),1),a("span",Ine,p(t.$t("levelPathway.level")),1)])]),a("div",Cne,[e[2]||(e[2]=a("div",{class:"stat-icon xp-icon"},"",-1)),a("div",Ane,[a("span",Pne,p(s.xp),1),a("span",xne,p(t.$t("levelPathway.xp")),1)])]),a("div",Lne,[e[3]||(e[3]=a("div",{class:"stat-icon streak-icon"},"",-1)),a("div",Rne,[a("span",Nne,p(s.streak),1),a("span",One,p(t.$t("levelPathway.dayStreak")),1)])])]),a("div",Dne,[(b(!0),S(he,null,be(i.pathwayNodes,(o,l)=>(b(),S("div",{key:l,class:ye(["pathway-node",{completed:o.completed,current:o.current,locked:o.locked}])},[l>0?(b(),S("div",Mne)):W("",!0),a("div",$ne,[o.completed?(b(),S("span",Une,"")):o.current?(b(),S("span",Fne,p(l+1),1)):(b(),S("span",Vne,""))]),a("div",qne,p(o.title),1)],2))),128))]),a("button",{class:"continue-btn",onClick:e[0]||(e[0]=(...o)=>i.continueLesson&&i.continueLesson(...o)),disabled:!i.hasCurrentLesson},[a("span",null,p(t.$t("levelPathway.continue")),1),e[4]||(e[4]=a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))],8,Bne)])}const Hne=tt(bne,[["render",jne],["__scopeId","data-v-beba3c0c"]]),zne={name:"AppleTreeGoal",props:{completedLessons:{type:Number,default:0},goalLessons:{type:Number,default:7},currentWeek:{type:Number,default:1}},computed:{progressPercent(){return Math.round(this.completedLessons/this.goalLessons*100)},treeStage(){return this.progressPercent>=100?"full":this.progressPercent>=60?"apples":this.progressPercent>=30?"growing":"seedling"},crownColor(){return this.progressPercent>=60?"#22c55e":this.progressPercent>=30?"#4ade80":"#86efac"},encouragementMessage(){return this.progressPercent>=100?this.$t("dashboard.encouragement.done"):this.progressPercent>=80?this.$t("dashboard.encouragement.almost"):this.progressPercent>=60?this.$t("dashboard.encouragement.apples"):this.progressPercent>=40?this.$t("dashboard.encouragement.halfway"):this.progressPercent>=20?this.$t("dashboard.encouragement.growing"):this.$t("dashboard.encouragement.start")}}},Wne={class:"apple-tree-goal"},Gne={class:"goal-header"},Kne={class:"goal-title"},Yne={class:"week-label"},Qne={class:"tree-container"},Xne={viewBox:"0 0 200 200",class:"tree-svg"},Jne=["fill"],Zne={class:"apples"},eie={key:0,cx:"70",cy:"80",r:"8",fill:"#ef4444",class:"apple"},tie={key:1,cx:"130",cy:"85",r:"8",fill:"#ef4444",class:"apple"},sie={key:2,cx:"85",cy:"120",r:"8",fill:"#ef4444",class:"apple"},rie={key:3,cx:"115",cy:"115",r:"8",fill:"#ef4444",class:"apple"},nie={key:4,cx:"100",cy:"70",r:"10",fill:"#fbbf24",class:"apple golden"},iie={key:0,class:"sparkles"},oie={class:"progress-section"},aie={class:"progress-bar-container"},lie={class:"progress-bar"},cie={class:"progress-text"},uie={class:"encouragement"},die={key:1,class:"completed-badge"};function hie(t,e,s,r,n,i){return b(),S("div",Wne,[a("div",Gne,[a("h3",Kne,p(t.$t("dashboard.weeklyGoal")),1),a("span",Yne,p(t.$t("dashboard.week"))+" "+p(s.currentWeek),1)]),a("div",Qne,[a("div",{class:ye(["tree-visual",i.treeStage])},[(b(),S("svg",Xne,[e[1]||(e[1]=a("ellipse",{cx:"100",cy:"185",rx:"60",ry:"10",fill:"#4a3728",opacity:"0.3"},null,-1)),e[2]||(e[2]=a("path",{d:"M95 185 L90 140 L110 140 L105 185 Z",fill:"#8B4513"},null,-1)),i.progressPercent>=10?(b(),S("circle",{key:0,cx:"100",cy:"100",r:"55",fill:i.crownColor,class:"tree-crown"},null,8,Jne)):W("",!0),a("g",Zne,[i.progressPercent>=60?(b(),S("circle",eie)):W("",!0),i.progressPercent>=70?(b(),S("circle",tie)):W("",!0),i.progressPercent>=80?(b(),S("circle",sie)):W("",!0),i.progressPercent>=90?(b(),S("circle",rie)):W("",!0),i.progressPercent>=100?(b(),S("circle",nie)):W("",!0)])])),i.progressPercent>=100?(b(),S("div",iie,e[3]||(e[3]=[a("span",{class:"sparkle"},"",-1),a("span",{class:"sparkle"},"",-1),a("span",{class:"sparkle"},"",-1)]))):W("",!0)],2)]),a("div",oie,[a("div",aie,[a("div",lie,[a("div",{class:"progress-fill",style:ct({width:`${Math.min(i.progressPercent,100)}%`})},null,4)]),a("span",cie,p(t.$t("dashboard.lessonsCount",{current:s.completedLessons,total:s.goalLessons})),1)]),a("p",uie,p(i.encouragementMessage),1),i.progressPercent<100?(b(),S("button",{key:0,class:"action-btn",onClick:e[0]||(e[0]=o=>t.$emit("startLesson"))},p(t.$t("dashboard.startLesson")),1)):(b(),S("div",die,[e[4]||(e[4]=a("span",null,"",-1)),re(" "+p(t.$t("dashboard.goalCompleted")),1)]))])])}const fie=tt(zne,[["render",hie],["__scopeId","data-v-683cecd8"]]),Vp=t=>{const e=new Date(t);return e.setHours(0,0,0,0),e},pie={name:"ProfessionalMainPage",components:{PaymentModal:PP,LevelPathway:Hne,AppleTreeGoal:fie},setup(){const{isSchoolMode:t,isStudyCentreMode:e}=bv();return{isSchoolMode:t,isStudyCentreMode:e}},mixins:[wf],data(){return{userId:null,lang:localStorage.getItem("lang")||"en",studyList:[],userProgress:[],loadingStudyList:!0,learningProfile:null,recommendations:null,rewards:null,learningProfileRequirements:{current:0,required:3},loadingLearningData:!1,showPaywall:!1,requestedTopicId:null,currentDate:"",quickActionsBase:[{id:1,titleSchoolKey:"dashboard.myCurriculum",titleStudyCentreKey:"dashboard.courseCatalog",descriptionSchoolKey:"dashboard.viewLearningPath",descriptionStudyCentreKey:"dashboard.browseAllCourses",icon:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>',path:"/profile/catalogue",color:"purple",premium:!1},{id:2,titleKey:"analytics.title",descriptionKey:"dashboard.detailedStatistics",icon:'<line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>',path:"/profile/analytics",color:"blue",premium:!0},{id:3,titleKey:"homework.title",descriptionKey:"dashboard.practiceExercises",icon:'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>',path:"/profile/homeworks",color:"green",premium:!1},{id:4,titleKey:"dashboard.testsQuizzes",descriptionKey:"dashboard.testKnowledge",icon:'<polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>',path:"/profile/tests",color:"orange",premium:!0},{id:5,titleKey:"dashboard.myGoals",descriptionKey:"dashboard.trackProgress",icon:'<circle cx="12" cy="12" r="10"/><path d="M22 12h-4l-3 9L9 3l-3 9H2"/>',path:"/profile/goal",color:"pink",premium:!0},{id:6,titleKey:"dashboard.vocabulary",descriptionKey:"dashboard.learnedTerms",icon:'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>',path:"/profile/vocabulary",color:"indigo",premium:!0}],weeklyGoalsKeys:[{id:1,titleKey:"dashboard.complete5Lessons",current:0,target:5,progress:0},{id:2,titleKey:"dashboard.study2Hours",current:0,target:2,progress:0},{id:3,titleKey:"dashboard.pass3Tests",current:0,target:3,progress:0}],recentActivity:[]}},computed:{...tn("user",{vuexUserStatus:"userStatus"}),hasSelectedMode(){return this.$store.getters["platformMode/hasSelectedMode"]},currentUserStatus(){return this.vuexUserStatus||localStorage.getItem("userStatus")||"free"},filteredStudyList(){return this.studyList.filter(t=>t)},displayedCourses(){return this.filteredStudyList.slice(0,3)},completedCourses(){return this.studyList.filter(t=>{var e;return((e=t.progress)==null?void 0:e.percent)===100}).length},inProgressCourses(){return this.studyList.filter(t=>{var e,s;return((e=t.progress)==null?void 0:e.percent)>0&&((s=t.progress)==null?void 0:s.percent)<100}).length},totalHoursStudied(){return(this.studyList.reduce((e,s)=>{var r;return e+(((r=s.progress)==null?void 0:r.completedTime)||0)},0)/60).toFixed(1)},weekProgress(){if(this.studyList.length===0)return 0;const t=this.studyList.reduce((e,s)=>{var r;return e+(((r=s.progress)==null?void 0:r.percent)||0)},0);return Math.round(t/this.studyList.length)},userStreak(){if(this.userProgress.length===0)return 0;const t=[...new Set(this.userProgress.filter(i=>i.completedAt).map(i=>Vp(i.completedAt).getTime()))].sort((i,o)=>o-i);if(t.length===0)return 0;const e=Vp(new Date).getTime(),s=Vp(new Date(Date.now()-864e5)).getTime();if(t[0]<s)return 0;let r=0,n=t[0]===e?e:s;for(const i of t)if(i===n)r++,n-=864e5;else break;return r},totalPoints(){return this.userProgress.reduce((t,e)=>t+(e.points||0),0)},displayStreak(){var t;return((t=this.rewards)==null?void 0:t.streak)||this.userStreak||0},displayPoints(){var t;return((t=this.rewards)==null?void 0:t.totalPoints)||this.totalPoints||0},completedLessonsCount(){return this.userProgress.filter(t=>t.completed).length},quickActions(){return this.quickActionsBase.map(t=>t.id===1?{...t,title:this.isSchoolMode?this.$t(t.titleSchoolKey):this.$t(t.titleStudyCentreKey),description:this.isSchoolMode?this.$t(t.descriptionSchoolKey):this.$t(t.descriptionStudyCentreKey)}:{...t,title:this.$t(t.titleKey),description:this.$t(t.descriptionKey)})},weeklyGoals(){return this.weeklyGoalsKeys.map(t=>({...t,title:this.$t(t.titleKey)}))},averageTestScore(){const t=this.userProgress.filter(s=>s.testScore!=null).map(s=>s.testScore);if(t.length===0)return 0;const e=t.reduce((s,r)=>s+r,0);return Math.round(e/t.length)},completedGoals(){return this.weeklyGoals.filter(t=>t.progress>=100).length},weeklyLessonsCompleted(){return this.userProgress.filter(e=>this.isThisWeek(e.completedAt)).filter(e=>e.completed).length},currentCourse(){return this.studyList.find(t=>{var e,s;return((e=t.progress)==null?void 0:e.percent)>0&&((s=t.progress)==null?void 0:s.percent)<100})||this.studyList[0]||null},currentCourseLessons(){var t;return((t=this.currentCourse)==null?void 0:t.lessons)||[]}},watch:{"$i18n.locale"(){this.updateCurrentDate()}},async mounted(){await this.initialize(),window.eventBus&&window.eventBus.on("studyListUpdated",this.handleStudyListUpdate)},beforeUnmount(){window.eventBus&&window.eventBus.off("studyListUpdated",this.handleStudyListUpdate)},methods:{goToPlacementTest(){this.$router.push({name:"PlacementTest"})},handleStudyListUpdate(){this.loadData(!0)},async initialize(){var t,e;if(this.userId=((e=(t=this.$store)==null?void 0:t.state)==null?void 0:e.firebaseUserId)||localStorage.getItem("firebaseUserId")||localStorage.getItem("userId"),!this.userId){this.$router.push("/");return}this.updateCurrentDate(),setInterval(this.updateCurrentDate,6e4),await this.loadData(),await this.loadLearningData(),this.updateGoalsFromProgress(),this.generateRecentActivity()},async loadLearningData(){var t,e,s,r,n;this.loadingLearningData=!0;try{try{await _v(this.userId)}catch{}const[i,o,l]=await Promise.allSettled([gv(this.userId),vv(this.userId),yv(this.userId)]);i.status==="fulfilled"&&((t=i.value)!=null&&t.success)?i.value.profile?(this.learningProfile=i.value.profile,this.learningProfileRequirements={current:((e=i.value.profile.requirements)==null?void 0:e.required)||3,required:((s=i.value.profile.requirements)==null?void 0:s.required)||3}):(this.learningProfile=null,i.value.requirements&&(this.learningProfileRequirements=i.value.requirements)):this.learningProfile=null,o.status==="fulfilled"&&((r=o.value)!=null&&r.success)&&(this.rewards=o.value.rewards),l.status==="fulfilled"&&((n=l.value)!=null&&n.success)&&(l.value.recommendation?this.recommendations=l.value.recommendation:this.recommendations=null)}catch{}finally{this.loadingLearningData=!1}},async refreshLearningData(){await this.loadLearningData(),this.$forceUpdate()},formatCognitiveLabel(t){const s={processingSpeed:"Processing",workingMemory:"Memory",visualSpatial:"Visual",verbalLinguistic:"Verbal",logicalMathematical:"Logic"}[t]||t;return this.$t(`analytics.${s}`)},formatOptimalTime(t){if(!t)return this.$t("analytics.flexible");if(t.isOptimal)return this.$t("analytics.studyAnytime")+" ";if(t.nextOptimal!==void 0){const e=Math.abs(t.hoursUntilOptimal||0);return e===0?this.$t("analytics.studyAnytime"):`${t.nextOptimal}:00 (${e}h)`}return this.$t("analytics.studyAnytime")},getLearningStyleIcon(){var e,s;return{visual:"",auditory:"",kinesthetic:"","reading-writing":""}[(s=(e=this.learningProfile)==null?void 0:e.learningStyle)==null?void 0:s.primary]||""},getLearningStyleText(){var s,r;const e={visual:"visual",auditory:"auditory",kinesthetic:"kinesthetic","reading-writing":"readingWriting"}[(r=(s=this.learningProfile)==null?void 0:s.learningStyle)==null?void 0:r.primary]||"balanced";return this.$t(`analytics.${e}`)},getChronotypeIcon(){var e,s;return{lark:"",owl:"","third-bird":"",variable:""}[(s=(e=this.learningProfile)==null?void 0:e.chronotype)==null?void 0:s.type]||""},getChronotypeText(){var s,r;const t=(r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.peakHours;if(!(t!=null&&t.length))return this.$t("analytics.studyAnytime");const e=t[0];return e<12?this.$t("timeOfDay.morning"):e<17?this.$t("timeOfDay.afternoon"):this.$t("timeOfDay.evening")},formatNumber(t){return(t==null?void 0:t.toLocaleString())||"0"},capitalize(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},translatePreferredPath(t){if(!t)return"";const e=t.toLowerCase(),s=this.$t(`analytics.${e}`);return s===`analytics.${e}`?this.capitalize(t):s},updateCurrentDate(){var r;const t={weekday:"long",year:"numeric",month:"long",day:"numeric"},e=((r=this.$i18n)==null?void 0:r.locale)||"en",s={en:"en-US",ru:"ru-RU",uz:"uz-UZ"};this.currentDate=new Date().toLocaleDateString(s[e]||"en-US",t)},async loadData(t=!1){this.loadingStudyList=!0;try{const[e,s]=await Promise.all([mv(this.userId,t),pv(this.userId)]);s!=null&&s.success&&Array.isArray(s.data)&&(this.userProgress=s.data),e!=null&&e.success&&Array.isArray(e.data)&&(this.studyList=await this.enrichStudyList(e.data))}catch{}finally{this.loadingStudyList=!1}},async enrichStudyList(t){const e=t.filter(r=>r==null?void 0:r.topicId).map(async r=>{try{const n=await uP(r.topicId);let i=n!=null&&n.success?n.data:r;if(!i.lessons||i.lessons.length===0){const o=await dP(r.topicId);o!=null&&o.success&&o.data&&(i.lessons=o.data)}return{...i,progress:this.calculateProgress(i),lastAccessed:r.lastAccessed||new Date().toISOString()}}catch{return{...r,name:r.topic||r.name||"Unknown Course",lessons:[],progress:{percent:0,completedLessons:0,totalLessons:0},lastAccessed:r.lastAccessed||new Date().toISOString()}}});return(await Promise.all(e)).filter(Boolean)},calculateProgress(t){const e=t.lessons||[];if(e.length===0)return{percent:0,completedLessons:0,totalLessons:0,completedTime:0,totalTime:0};let s=0,r=0;const n=e.reduce((i,o)=>i+(o.estimatedTime||10),0);return e.forEach(i=>{const o=this.userProgress.find(l=>{var c;return(((c=l.lessonId)==null?void 0:c._id)||l.lessonId)===i._id});o!=null&&o.completed&&(s++,r+=i.estimatedTime||10)}),{percent:Math.round(s/e.length*100),completedLessons:s,totalLessons:e.length,completedTime:r,totalTime:n}},updateGoalsFromProgress(){const t=this.userProgress.filter(n=>this.isThisWeek(n.completedAt)),e=t.filter(n=>n.completed).length,s=t.filter(n=>n.testScore!=null).length,r=this.studyList.reduce((n,i)=>{const o=i.lessons.reduce((l,c)=>{const u=t.find(h=>{var f;return(((f=h.lessonId)==null?void 0:f._id)||h.lessonId)===c._id});return l+(u!=null&&u.completed?c.estimatedTime||10:0)},0);return n+o},0)/60;this.weeklyGoals[0].current=Math.min(e,this.weeklyGoals[0].target),this.weeklyGoals[0].progress=Math.min(this.weeklyGoals[0].current/this.weeklyGoals[0].target*100,100),this.weeklyGoals[1].current=parseFloat(Math.min(r,this.weeklyGoals[1].target).toFixed(1)),this.weeklyGoals[1].progress=Math.min(this.weeklyGoals[1].current/this.weeklyGoals[1].target*100,100),this.weeklyGoals[2].current=Math.min(s,this.weeklyGoals[2].target),this.weeklyGoals[2].progress=Math.min(this.weeklyGoals[2].current/this.weeklyGoals[2].target*100,100)},generateRecentActivity(){const e=[...this.userProgress].filter(s=>s.completedAt).sort((s,r)=>new Date(r.completedAt)-new Date(s.completedAt)).slice(0,5).map(s=>{if(s.testScore!=null)return{id:`test-${s._id}`,title:`Test result: ${s.testScore}%`,time:this.getTimeAgo(s.completedAt),iconPath:'<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>',color:"blue"};if(s.completed){const r=this.getLocalizedLessonName(s.lessonId)||this.$t("analytics.lesson");return{id:`lesson-${s._id}`,title:`${this.$t("dashboard.completed")}: ${r}`,time:this.getTimeAgo(s.completedAt),iconPath:'<polyline points="20 6 9 17 4 12"/>',color:"green"}}return null}).filter(Boolean);this.recentActivity=e.slice(0,3)},isThisWeek(t){if(!t)return!1;const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3);return new Date(t)>=s},pluralize(t,e,s,r){const n=t%10,i=t%100;return n===1&&i!==11?e:n>=2&&n<=4&&(i<10||i>=20)?s:r},getTimeAgo(t){if(!t)return this.$t("timeAgo.justNow");const e=new Date-new Date(t),s=Math.floor(e/6e4),r=Math.floor(s/60),n=Math.floor(r/24);return s<1?this.$t("timeAgo.justNow"):r<1?this.$t("timeAgo.minutesAgo",{count:s}):n<1?this.$t("timeAgo.hoursAgo",{count:r}):n<7?this.$t("timeAgo.daysAgo",{count:n}):this.$t("timeAgo.overWeekAgo")},getCourseName(t){return t.name||t.topicName||t.topic||t.title||"Untitled Course"},getTypeClass(t){return t.type||"free"},getTypeLabel(t){return{free:"Free",premium:"Start",pro:"Pro"}[t.type]||"Free"},formatTime(t){if(!t)return"0 h";const e=Math.floor(t/60),s=t%60;return e>0?`${e} h ${s>0?`${s} m`:""}`.trim():`${s} m`},getLastAccessed(t){return this.getTimeAgo(t.lastAccessed)},getNextLesson(t){var r,n;if(!((r=t.lessons)!=null&&r.length))return"No lessons";const e=((n=t.progress)==null?void 0:n.completedLessons)||0;if(e>=t.lessons.length)return"All completed";const s=t.lessons[e];return this.getLocalizedLessonName(s)||`Lesson ${e+1}`},getLocalizedLessonName(t){if(!t)return"";const e=localStorage.getItem("lang")||"ru";if(t.title&&typeof t.title=="string")return t.title;if(t.lessonName){if(typeof t.lessonName=="string")return t.lessonName;if(typeof t.lessonName=="object")return t.lessonName[e]||t.lessonName.en||t.lessonName.ru||t.lessonName.uz||""}return""},getProgressColorClass(t){return t>=80?"high":t>=50?"medium":t>=30?"low":"very-low"},navigateToCourse(t){this.$router.push(`/topic/${t._id}/overview`)},async startCourse(t){if(!this.hasTopicAccess(t)){this.requestedTopicId=t._id,this.showPaywall=!0;return}this.$router.push(`/topic/${t._id}/overview`)},hasTopicAccess(t){const e=t.type||"free",s=this.currentUserStatus;return e==="free"||s==="pro"||e==="premium"&&s==="start"},handleActionClick(t,e){t.premium&&!this.hasFeatureAccess(t.path)&&(e.preventDefault(),this.showPaywall=!0)},hasFeatureAccess(t){const e=this.currentUserStatus;return e==="pro"||e==="start"&&!t.includes("analytics")},handlePaymentSuccess(){this.showPaywall=!1,this.$forceUpdate()},handleLessonClick({lesson:t,index:e}){if(!this.currentCourse)return;const s=this.currentCourse._id,r=t._id||t.id;r?this.$router.push(`/lesson/${r}`):this.$router.push(`/topic/${s}/overview`)},handleContinueLesson(t){var s;if(!t||!this.currentCourse)return;const e=((s=t.lesson)==null?void 0:s._id)||t._id||t.id;e?this.$router.push(`/lesson/${e}`):this.$router.push(`/topic/${this.currentCourse._id}/overview`)}}},mie={class:"professional-dashboard"},gie={class:"dashboard-header"},yie={class:"header-content"},vie={class:"welcome-section"},_ie={class:"main-title"},bie={class:"date-text"},wie={class:"header-stats"},Sie={class:"stat-badge lessons"},Eie={class:"stat-info"},Tie={class:"stat-label"},kie={class:"stat-value"},Iie={class:"stat-badge streak"},Cie={class:"stat-info"},Aie={class:"stat-label"},Pie={class:"stat-value"},xie={class:"stat-badge points"},Lie={class:"stat-info"},Rie={class:"stat-label"},Nie={class:"stat-value"},Oie={class:"dashboard-grid"},Die={class:"main-column"},Mie={key:0,class:"section-card level-test-card"},$ie={class:"test-card-content"},Uie={class:"test-card-info"},Fie={class:"test-card-title"},Vie={class:"test-card-description"},qie={key:1,class:"level-pathway-section"},Bie={key:1,class:"empty-pathway-card"},jie={class:"empty-pathway-title"},Hie={class:"empty-pathway-text"},zie={key:2,class:"section-card learning-dna-card"},Wie={class:"section-header"},Gie={class:"header-left"},Kie={class:"section-title"},Yie={class:"section-subtitle"},Qie={key:0,class:"insights-list"},Xie={class:"dna-quick-stats"},Jie={class:"dna-stat"},Zie={class:"dna-icon"},eoe={class:"dna-stat-content"},toe={class:"dna-stat-label"},soe={class:"dna-stat-value"},roe={class:"dna-stat"},noe={class:"dna-icon"},ioe={class:"dna-stat-content"},ooe={class:"dna-stat-label"},aoe={class:"dna-stat-value"},loe={key:1,class:"cognitive-section"},coe={class:"cognitive-label"},uoe={class:"cognitive-progress"},doe={class:"cognitive-value"},hoe={key:2,class:"recommendations-section"},foe={class:"rec-grid"},poe={class:"rec-item"},moe={class:"rec-content"},goe={class:"rec-label"},yoe={class:"rec-value"},voe={class:"rec-item"},_oe={class:"rec-content"},boe={class:"rec-label"},woe={class:"rec-value"},Soe={class:"rec-item"},Eoe={class:"rec-content"},Toe={class:"rec-label"},koe={class:"rec-value"},Ioe={class:"rec-item"},Coe={class:"rec-content"},Aoe={class:"rec-label"},Poe={class:"rec-value"},xoe={key:0,class:"tips-section"},Loe={key:3,class:"section-card requirements-card"},Roe={class:"section-header"},Noe={class:"header-left"},Ooe={class:"section-title"},Doe={class:"section-subtitle"},Moe={class:"unlock-requirements"},$oe={class:"requirements-text"},Uoe={class:"requirements-progress"},Foe={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Voe={key:1},qoe={class:"requirement-label"},Boe={class:"quick-stats-grid"},joe={class:"stat-card"},Hoe={class:"stat-data"},zoe={class:"stat-number"},Woe={class:"stat-text"},Goe={class:"stat-card"},Koe={class:"stat-data"},Yoe={class:"stat-number"},Qoe={class:"stat-text"},Xoe={class:"stat-card"},Joe={class:"stat-data"},Zoe={class:"stat-number"},eae={class:"stat-text"},tae={class:"stat-card"},sae={class:"stat-data"},rae={class:"stat-number"},nae={class:"stat-text"},iae={class:"section-card"},oae={class:"section-header"},aae={class:"header-left"},lae={class:"section-title"},cae={class:"section-subtitle"},uae={key:0,class:"loading-state"},dae={key:1,class:"empty-state"},hae={class:"empty-text"},fae={key:2,class:"courses-list"},pae=["onClick"],mae={class:"course-header"},gae={class:"course-info"},yae={class:"course-title-row"},vae={class:"course-title"},_ae={class:"course-meta"},bae={class:"meta-item"},wae={class:"meta-item"},Sae={class:"meta-item"},Eae=["onClick"],Tae={class:"course-progress-section"},kae={class:"progress-header"},Iae={class:"next-lesson"},Cae={class:"lessons-count"},Aae={class:"progress-bar-container"},Pae={class:"course-footer"},xae={class:"progress-percent"},Lae=["onClick"],Rae={class:"section-card"},Nae={class:"section-title-standalone"},Oae={class:"quick-actions-grid"},Dae={key:0,class:"premium-badge"},Mae=["innerHTML"],$ae={class:"action-title"},Uae={class:"action-description"},Fae={class:"sidebar-column"},Vae={key:0,class:"section-card rewards-card-new"},qae={class:"section-header"},Bae={class:"header-left"},jae={class:"section-title"},Hae={class:"section-subtitle"},zae={class:"level-progress-section"},Wae={class:"level-header"},Gae={class:"current-level"},Kae={class:"next-level"},Yae={class:"progress-bar-container large"},Qae={class:"progress-text"},Xae={class:"rewards-stats-grid"},Jae={class:"reward-stat-card"},Zae={class:"reward-stat-content"},ele={class:"reward-stat-value"},tle={class:"reward-stat-label"},sle={class:"reward-stat-card"},rle={class:"reward-stat-content"},nle={class:"reward-stat-value"},ile={class:"reward-stat-label"},ole={class:"reward-stat-card"},ale={class:"reward-stat-content"},lle={class:"reward-stat-value"},cle={class:"reward-stat-label"},ule={key:0,class:"achievements-section-mini"},dle={class:"achievements-grid-mini"},hle=["title"],fle={class:"achievement-icon-mini"},ple={class:"achievement-name-mini"},mle={class:"section-card"},gle={class:"section-header small"},yle={class:"section-title small"},vle={class:"section-subtitle"},_le={class:"goals-list"},ble={class:"goal-header"},wle={class:"goal-title"},Sle={class:"goal-progress"},Ele={class:"progress-bar-container small"},Tle={class:"section-card"},kle={class:"section-header small"},Ile={class:"section-title small"},Cle={key:0,class:"empty-activity"},Ale={key:1,class:"activity-list"},Ple=["innerHTML"],xle={class:"activity-content"},Lle={class:"activity-title"},Rle={class:"activity-time"},Nle={class:"insights-card"},Ole={class:"insights-header"},Dle={class:"insights-title"},Mle={class:"insights-content"},$le={class:"insight-item"},Ule={class:"insight-header"},Fle={class:"insight-label"},Vle={class:"insight-value"},qle={class:"progress-bar-container"},Ble={class:"insight-stat"},jle={class:"insight-stat-label"},Hle={class:"insight-stat-value"};function zle(t,e,s,r,n,i){var h,f,m,g,v,I;const o=es("LevelPathway"),l=es("router-link"),c=es("AppleTreeGoal"),u=es("PaymentModal");return b(),S("div",mie,[a("div",gie,[a("div",yie,[a("div",vie,[a("h1",_ie,p(t.$t("dashboard.title")),1),a("p",bie,p(n.currentDate),1)]),a("div",wie,[a("div",Sie,[e[4]||(e[4]=a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 12l2 2 4-4"}),a("path",{d:"M12 3c7.2 0 9 1.8 9 9s-1.8 9-9 9-9-1.8-9-9 1.8-9 9-9z"})],-1)),a("div",Eie,[a("div",Tie,p(t.$t("dashboard.completed")),1),a("div",kie,p(i.completedLessonsCount),1)])]),a("div",Iie,[e[5]||(e[5]=a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})],-1)),a("div",Cie,[a("div",Aie,p(t.$t("dashboard.streak")),1),a("div",Pie,p(i.displayStreak)+" "+p(t.$t("dashboard.days")),1)])]),a("div",xie,[e[6]||(e[6]=a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)),a("div",Lie,[a("div",Rie,p(t.$t("dashboard.points")),1),a("div",Nie,p(i.displayPoints),1)])])])])]),a("div",Oie,[a("div",Die,[r.isSchoolMode?(b(),S("div",Mie,[a("div",$ie,[e[8]||(e[8]=a("div",{class:"test-card-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 11l3 3L22 4"}),a("path",{d:"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"})])],-1)),a("div",Uie,[a("h3",Fie,p(t.$t("dashboard.discoverLevel")),1),a("p",Vie,p(t.$t("dashboard.discoverLevelDesc")),1)]),a("button",{class:"take-test-action-btn",onClick:e[0]||(e[0]=(...C)=>i.goToPlacementTest&&i.goToPlacementTest(...C))},[a("span",null,p(t.$t("dashboard.takePlacementTest")),1),e[7]||(e[7]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])])):W("",!0),r.isSchoolMode?(b(),S("div",qie,[i.currentCourse&&i.currentCourseLessons.length>0?(b(),ts(o,{key:i.currentCourse._id||"pathway",lessons:i.currentCourseLessons,"user-progress":n.userProgress,"current-level-prop":((h=n.rewards)==null?void 0:h.level)||1,"current-x-p-prop":((f=n.rewards)==null?void 0:f.totalPoints)||0,"streak-prop":i.displayStreak,onLessonClick:i.handleLessonClick,onContinue:i.handleContinueLesson},null,8,["lessons","user-progress","current-level-prop","current-x-p-prop","streak-prop","onLessonClick","onContinue"])):(b(),S("div",Bie,[e[10]||(e[10]=a("div",{class:"empty-pathway-icon"},"",-1)),a("h3",jie,p(t.$t("dashboard.yourLearningJourney")),1),a("p",Hie,p(t.$t("dashboard.addCourseToSeePathway")),1),xe(l,{to:"/profile/catalogue",class:"add-course-pathway-btn"},{default:Qt(()=>[e[9]||(e[9]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)),re(" "+p(t.$t("dashboard.browseCourses")),1)]),_:1})]))])):W("",!0),n.learningProfile?(b(),S("div",zie,[a("div",Wie,[a("div",Gie,[e[11]||(e[11]=a("div",{class:"section-icon-badge dna"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),a("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})])],-1)),a("div",null,[a("h2",Kie," "+p(t.$t("dashboard.yourLearningDNA")),1),a("p",Yie,p(t.$t("dashboard.aiPoweredPersonalization")),1)])]),a("button",{onClick:e[1]||(e[1]=(...C)=>i.refreshLearningData&&i.refreshLearningData(...C)),class:"refresh-btn-small",title:"Refresh data"},e[12]||(e[12]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)]))]),(m=n.learningProfile.insights)!=null&&m.length?(b(),S("div",Qie,[(b(!0),S(he,null,be(n.learningProfile.insights,(C,U)=>(b(),S("div",{key:U,class:"insight-item"},p(C),1))),128))])):W("",!0),a("div",Xie,[a("div",Jie,[a("span",Zie,p(i.getLearningStyleIcon()),1),a("div",eoe,[a("span",toe,p(t.$t("dashboard.learningStyle")),1),a("span",soe,p(i.getLearningStyleText()),1)])]),a("div",roe,[a("span",noe,p(i.getChronotypeIcon()),1),a("div",ioe,[a("span",ooe,p(t.$t("dashboard.bestTime")),1),a("span",aoe,p(i.getChronotypeText()),1)])])]),n.learningProfile.cognitiveProfile?(b(),S("div",loe,[a("h4",null," "+p(t.$t("dashboard.cognitiveStrengths")),1),(b(!0),S(he,null,be(n.learningProfile.cognitiveProfile,(C,U)=>(b(),S("div",{key:U,class:"cognitive-bar"},[a("span",coe,p(i.formatCognitiveLabel(U)),1),a("div",uoe,[a("div",{class:"cognitive-fill",style:ct({width:C+"%"})},null,4)]),a("span",doe,p(C)+"%",1)]))),128))])):W("",!0),n.recommendations?(b(),S("div",hoe,[a("h4",null," "+p(t.$t("dashboard.smartTips")),1),a("div",foe,[a("div",poe,[e[13]||(e[13]=a("span",{class:"rec-icon"},"",-1)),a("div",moe,[a("span",goe,p(t.$t("dashboard.learningPath")),1),a("span",yoe,p(i.translatePreferredPath(n.recommendations.preferredPath)),1)])]),a("div",voe,[e[14]||(e[14]=a("span",{class:"rec-icon"},"",-1)),a("div",_oe,[a("span",boe,p(t.$t("dashboard.optimalTime")),1),a("span",woe,p(i.formatOptimalTime(n.recommendations.optimalTime)),1)])]),a("div",Soe,[e[15]||(e[15]=a("span",{class:"rec-icon"},"",-1)),a("div",Eoe,[a("span",Toe,p(t.$t("dashboard.sessionLength")),1),a("span",koe,p(n.recommendations.sessionLength)+" "+p(t.$t("dashboard.min")),1)])]),a("div",Ioe,[e[16]||(e[16]=a("span",{class:"rec-icon"},"",-1)),a("div",Coe,[a("span",Aoe,p(t.$t("dashboard.difficulty")),1),a("span",Poe,p((n.recommendations.difficultyLevel*100).toFixed(0))+"%",1)])])]),(g=n.recommendations.tips)!=null&&g.length?(b(),S("div",xoe,[(b(!0),S(he,null,be(n.recommendations.tips,(C,U)=>(b(),S("div",{key:U,class:"tip-item"},"  "+p(C),1))),128))])):W("",!0)])):W("",!0)])):!n.learningProfile&&!n.loadingLearningData?(b(),S("div",Loe,[a("div",Roe,[a("div",Noe,[e[17]||(e[17]=a("div",{class:"section-icon-badge locked"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})])],-1)),a("div",null,[a("h2",Ooe," "+p(t.$t("dashboard.unlockLearningDNA")),1),a("p",Doe,p(t.$t("dashboard.completeLessonsToReveal")),1)])])]),a("div",Moe,[a("p",$oe,p(t.$t("dashboard.completeAtLeast",{count:n.learningProfileRequirements.required})),1),a("div",Uoe,[(b(!0),S(he,null,be(n.learningProfileRequirements.required,C=>(b(),S("div",{class:"requirement-item",key:C},[a("div",{class:ye(["requirement-check",{completed:n.learningProfileRequirements.current>=C}])},[n.learningProfileRequirements.current>=C?(b(),S("svg",Foe,e[18]||(e[18]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):(b(),S("span",Voe,p(C),1))],2),a("span",qoe,p(t.$t("dashboard.lesson"))+" "+p(C),1)]))),128))]),xe(l,{to:"/profile/my-courses",class:"start-learning-btn"},{default:Qt(()=>[re(p(t.$t("dashboard.startLearning")),1)]),_:1})])])):W("",!0),a("div",Boe,[a("div",joe,[e[19]||(e[19]=a("div",{class:"stat-icon-wrapper purple"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})])],-1)),a("div",Hoe,[a("div",zoe,p(n.studyList.length),1),a("div",Woe,p(t.$t("dashboard.totalCourses")),1)])]),a("div",Goe,[e[20]||(e[20]=a("div",{class:"stat-icon-wrapper green"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("div",Koe,[a("div",Yoe,p(i.completedCourses),1),a("div",Qoe,p(t.$t("dashboard.completed")),1)])]),a("div",Xoe,[e[21]||(e[21]=a("div",{class:"stat-icon-wrapper blue"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})])],-1)),a("div",Joe,[a("div",Zoe,p(i.totalHoursStudied),1),a("div",eae,p(t.$t("dashboard.hoursStudied")),1)])]),a("div",tae,[e[22]||(e[22]=a("div",{class:"stat-icon-wrapper orange"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),a("polyline",{points:"17 6 23 6 23 12"})])],-1)),a("div",sae,[a("div",rae,p(i.weekProgress)+"%",1),a("div",nae,p(t.$t("dashboard.weeklyProgress")),1)])])]),a("div",iae,[a("div",oae,[a("div",aae,[e[23]||(e[23]=kt('<div class="section-icon-badge" data-v-1c5a4df0><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1c5a4df0><line x1="12" y1="20" x2="12" y2="10" data-v-1c5a4df0></line><line x1="18" y1="20" x2="18" y2="4" data-v-1c5a4df0></line><line x1="6" y1="20" x2="6" y2="16" data-v-1c5a4df0></line></svg></div>',1)),a("div",null,[a("h2",lae,p(r.isSchoolMode?t.$t("dashboard.currentLessons"):t.$t("dashboard.activeCourses")),1),a("p",cae,p(i.inProgressCourses)+" "+p(t.$t("dashboard.inProgress")),1)])]),xe(l,{to:"/profile/my-courses",class:"view-all-link"},{default:Qt(()=>[re(p(r.isSchoolMode?t.$t("dashboard.allLessons"):t.$t("dashboard.allCourses"))+" ",1),e[24]||(e[24]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9 18 15 12 9 6"})],-1))]),_:1})]),n.loadingStudyList?(b(),S("div",uae,[e[25]||(e[25]=a("div",{class:"spinner"},null,-1)),a("p",null,p(t.$t("dashboard.loadingCourses")),1)])):i.filteredStudyList.length===0?(b(),S("div",dae,[e[26]||(e[26]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1)),a("p",hae,p(t.$t("dashboard.noActiveCourses")),1),xe(l,{to:"/profile/catalogue",class:"add-course-btn"},{default:Qt(()=>[re(p(t.$t("dashboard.addCourse")),1)]),_:1})])):(b(),S("div",fae,[(b(!0),S(he,null,be(i.displayedCourses,C=>{var U,D,E,L,$;return b(),S("div",{key:C._id,class:"course-card",onClick:M=>i.navigateToCourse(C)},[a("div",mae,[a("div",gae,[a("div",yae,[a("h3",vae,p(i.getCourseName(C)),1),a("span",{class:ye(["type-badge",i.getTypeClass(C)])},p(i.getTypeLabel(C)),3)]),a("div",_ae,[a("span",bae,[e[27]||(e[27]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})],-1)),re(" "+p(t.$t("dashboard.level"))+" "+p(C.level||1),1)]),a("span",wae,[e[28]||(e[28]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),re(" "+p(i.formatTime(C.progress.totalTime)),1)]),a("span",Sae,[e[29]||(e[29]=kt('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1c5a4df0><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-1c5a4df0></rect><line x1="16" y1="2" x2="16" y2="6" data-v-1c5a4df0></line><line x1="8" y1="2" x2="8" y2="6" data-v-1c5a4df0></line><line x1="3" y1="10" x2="21" y2="10" data-v-1c5a4df0></line></svg>',1)),re(" "+p(i.getLastAccessed(C)),1)])])]),a("button",{class:"play-btn",onClick:gt(M=>i.startCourse(C),["stop"])},e[30]||(e[30]=[a("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[a("polygon",{points:"5 3 19 12 5 21 5 3"})],-1)]),8,Eae)]),a("div",Tae,[a("div",kae,[a("span",Iae,p(t.$t("dashboard.nextLesson"))+": "+p(i.getNextLesson(C)),1),a("span",Cae,p(((U=C.progress)==null?void 0:U.completedLessons)||0)+"/"+p(((D=C.lessons)==null?void 0:D.length)||0),1)]),a("div",Aae,[a("div",{class:ye(["progress-bar-fill",i.getProgressColorClass(((E=C.progress)==null?void 0:E.percent)||0)]),style:ct({width:`${((L=C.progress)==null?void 0:L.percent)||0}%`})},null,6)])]),a("div",Pae,[a("span",xae,p((($=C.progress)==null?void 0:$.percent)||0)+"% "+p(t.$t("dashboard.complete")),1),a("button",{class:"continue-btn",onClick:gt(M=>i.startCourse(C),["stop"])},[re(p(t.$t("dashboard.continue"))+" ",1),e[31]||(e[31]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9 18 15 12 9 6"})],-1))],8,Lae)])],8,pae)}),128))]))]),a("div",Rae,[a("h2",Nae,[e[32]||(e[32]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})],-1)),re(" "+p(t.$t("dashboard.quickAccess")),1)]),a("div",Oae,[(b(!0),S(he,null,be(i.quickActions,C=>(b(),ts(l,{key:C.id,to:C.path,class:ye(["action-card",C.color]),onClick:U=>i.handleActionClick(C,U)},{default:Qt(()=>[C.premium?(b(),S("div",Dae,e[33]||(e[33]=[a("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)]))):W("",!0),(b(),S("svg",{class:"action-icon",innerHTML:C.icon},null,8,Mae)),a("span",$ae,p(C.title),1),a("span",Uae,p(C.description),1)]),_:2},1032,["to","class","onClick"]))),128))])])]),a("div",Fae,[xe(c,{"completed-lessons":i.weeklyLessonsCompleted,"goal-lessons":20,class:"apple-tree-section"},null,8,["completed-lessons"]),n.rewards?(b(),S("div",Vae,[a("div",qae,[a("div",Bae,[e[34]||(e[34]=a("div",{class:"section-icon-badge rewards"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),a("div",null,[a("h2",jae," "+p(t.$t("dashboard.yourProgress")),1),a("p",Hae,p(t.$t("dashboard.level"))+" "+p(n.rewards.level)+"  "+p(i.formatNumber(n.rewards.totalPoints))+" "+p(t.$t("dashboard.points").toLowerCase()),1)])])]),a("div",zae,[a("div",Wae,[a("span",Gae,p(t.$t("dashboard.level"))+" "+p(n.rewards.level),1),a("span",Kae,p(t.$t("dashboard.level"))+" "+p(n.rewards.level+1),1)]),a("div",Yae,[a("div",{class:"progress-bar-fill gold",style:ct({width:n.rewards.currentLevelProgress+"%"})},null,4)]),a("span",Qae,p(Math.round(n.rewards.currentLevelProgress))+"% "+p(t.$t("dashboard.toNextLevel")),1)]),a("div",Xae,[a("div",Jae,[e[35]||(e[35]=a("div",{class:"reward-stat-icon fire"},"",-1)),a("div",Zae,[a("span",ele,p(n.rewards.streak||0),1),a("span",tle,p(t.$t("dashboard.dayStreak")),1)])]),a("div",sle,[e[36]||(e[36]=a("div",{class:"reward-stat-icon trophy"},"",-1)),a("div",rle,[a("span",nle,p(((v=n.rewards.achievements)==null?void 0:v.length)||0),1),a("span",ile,p(t.$t("dashboard.achievements")),1)])]),a("div",ole,[e[37]||(e[37]=a("div",{class:"reward-stat-icon target"},"",-1)),a("div",ale,[a("span",lle,p(n.rewards.nextRewardIn||0),1),a("span",cle,p(t.$t("dashboard.stepsToReward")),1)])])]),(I=n.rewards.achievements)!=null&&I.length?(b(),S("div",ule,[a("h4",null," "+p(t.$t("dashboard.recentAchievements")),1),a("div",dle,[(b(!0),S(he,null,be(n.rewards.achievements.slice(0,4),C=>(b(),S("div",{key:C.id,class:ye(["achievement-badge-mini",C.rarity]),title:C.name},[a("span",fle,p(C.icon),1),a("span",ple,p(C.name),1)],10,hle))),128))]),n.rewards.achievements.length>4?(b(),ts(l,{key:0,to:"/profile/achievements",class:"view-all-achievements"},{default:Qt(()=>[re(p(t.$t("dashboard.viewAllAchievements",{count:n.rewards.achievements.length}))+"  ",1)]),_:1})):W("",!0)])):W("",!0)])):W("",!0),a("div",mle,[a("div",gle,[e[38]||(e[38]=a("div",{class:"section-icon-badge green"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})])],-1)),a("div",null,[a("h3",yle,p(t.$t("dashboard.weeklyGoals")),1),a("p",vle,p(i.completedGoals)+"/"+p(i.weeklyGoals.length)+" "+p(t.$t("dashboard.completed").toLowerCase()),1)])]),a("div",_le,[(b(!0),S(he,null,be(i.weeklyGoals,C=>(b(),S("div",{key:C.id,class:"goal-item"},[a("div",ble,[a("span",wle,p(C.title),1),a("span",Sle,p(C.current)+"/"+p(C.target),1)]),a("div",Ele,[a("div",{class:"progress-bar-fill green",style:ct({width:`${C.progress}%`})},null,4)])]))),128))])]),a("div",Tle,[a("div",kle,[e[39]||(e[39]=a("div",{class:"section-icon-badge blue"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})])],-1)),a("h3",Ile,p(t.$t("dashboard.recentActivity")),1)]),n.recentActivity.length===0?(b(),S("div",Cle,[a("p",null,p(t.$t("dashboard.noRecentActivity")),1)])):(b(),S("div",Ale,[(b(!0),S(he,null,be(n.recentActivity,C=>(b(),S("div",{key:C.id,class:"activity-item"},[a("div",{class:ye(["activity-icon-wrapper",C.color])},[(b(),S("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",innerHTML:C.iconPath},null,8,Ple))],2),a("div",xle,[a("p",Lle,p(C.title),1),a("p",Rle,p(C.time),1)])]))),128))]))]),a("div",Nle,[a("div",Ole,[e[40]||(e[40]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),a("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})],-1)),a("h3",Dle,p(t.$t("dashboard.learningStatistics")),1)]),a("div",Mle,[a("div",$le,[a("div",Ule,[a("span",Fle,p(t.$t("dashboard.weeklyProgress")),1),a("span",Vle,p(i.weekProgress)+"%",1)]),a("div",qle,[a("div",{class:"progress-bar-fill white",style:ct({width:`${i.weekProgress}%`})},null,4)])]),e[41]||(e[41]=a("div",{class:"insight-divider"},null,-1)),a("div",Ble,[a("div",jle,p(t.$t("dashboard.averageTestScore")),1),a("div",Hle,p(i.averageTestScore)+"%",1)])])])])]),n.userId&&n.showPaywall?(b(),ts(u,{key:0,"user-id":n.userId,visible:n.showPaywall,"requested-topic-id":n.requestedTopicId,onClose:e[2]||(e[2]=C=>n.showPaywall=!1),onUnlocked:e[3]||(e[3]=C=>i.handlePaymentSuccess(C))},null,8,["user-id","visible","requested-topic-id"])):W("",!0)])}const Wle=tt(pie,[["render",zle],["__scopeId","data-v-1c5a4df0"]]),Gle={name:"UserAnalyticsPanel",data(){return{loading:!0,error:null,showModal:!1,selectedStats:["studyDays","completedLessons","totalPoints","streakDays"],period:30,lessonCache:new Map,learningProfile:null,recommendations:null,rewards:null,analytics:{studyDays:0,completedLessons:0,completedTopics:0,totalLessonsDone:0,streakDays:0,totalPoints:0,avgPointsPerDay:0,subjects:[],topics:[],recentActivity:[]}}},computed:{pdfStatOptions(){return[{key:"studyDays",label:this.$t("analytics.studyDays")},{key:"completedLessons",label:this.$t("analytics.completedLessons")},{key:"completedTopics",label:this.$t("analytics.completedTopics")},{key:"totalPoints",label:this.$t("analytics.totalPoints")},{key:"streakDays",label:this.$t("analytics.streakDays")},{key:"avgPointsPerDay",label:this.$t("analytics.avgPointsPerDay")}]},hasAnyData(){const{totalLessonsDone:t,studyDays:e,subjects:s}=this.analytics;return t>0||e>0||(s==null?void 0:s.length)>0},statCards(){const t=this.analytics;return[{id:"points",label:this.$t("analytics.totalPoints"),value:this.formatNumber(t.totalPoints),subtext:this.$t("analytics.points"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>',color:"purple"},{id:"avgPoints",label:this.$t("analytics.avgPointsPerDay"),value:this.formatNumber(t.avgPointsPerDay),subtext:this.$t("analytics.points"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>',color:"blue"},{id:"studyDays",label:this.$t("analytics.studyDays"),value:this.formatNumber(t.studyDays),subtext:this.formatDaysToHuman(t.studyDays),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>',color:"green"},{id:"lessons",label:this.$t("analytics.completedLessons"),value:this.formatNumber(t.completedLessons||t.totalLessonsDone),subtext:this.$t("analytics.lesson"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>',color:"orange"},{id:"topics",label:this.$t("analytics.completedTopics"),value:this.formatNumber(t.completedTopics),subtext:this.$t("analytics.topics"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>',color:"teal"},{id:"streak",label:this.$t("analytics.streak"),value:`${t.streakDays||0}`,subtext:t.streakDays>0?this.$t("analytics.daysStreak"):this.$t("analytics.startAgain"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>',color:"pink"}]}},async mounted(){await this.loadAllData()},methods:{getLocalizedLessonName(t){if(!t)return"";const e=localStorage.getItem("lang")||"ru";if(t.title&&typeof t.title=="string")return t.title;if(t.name&&typeof t.name=="string")return t.name;if(t.lessonName){if(typeof t.lessonName=="string")return t.lessonName;if(typeof t.lessonName=="object")return t.lessonName[e]||t.lessonName.en||t.lessonName.ru||t.lessonName.uz||""}return""},async loadAllData(){var t,e,s,r,n,i,o;this.loading=!0,this.error=null;try{const l=pe.currentUser||await new Promise(m=>setTimeout(()=>m(pe.currentUser),1e3));if(!l){this.error=this.$t("analytics.authRequired");return}try{await _v(l.uid)}catch{}const[c,u,h,f]=await Promise.allSettled([bP(l.uid),gv(l.uid),vv(l.uid),yv(l.uid)]);if(c.status==="fulfilled"){const m=((e=(t=c.value)==null?void 0:t.data)==null?void 0:e.data)||((s=c.value)==null?void 0:s.data);m&&typeof m=="object"&&(this.analytics={...this.analytics,...m},await this.resolveActivityLessonNames())}u.status==="fulfilled"&&((r=u.value)!=null&&r.success)&&(this.learningProfile=u.value.profile),h.status==="fulfilled"&&((n=h.value)!=null&&n.success)&&(this.rewards=h.value.rewards),f.status==="fulfilled"&&((i=f.value)!=null&&i.success)&&(this.recommendations=f.value.recommendation)}catch(l){const c=(o=l.response)==null?void 0:o.status;c===401?this.error=this.$t("analytics.authError"):c===404?this.error=this.$t("analytics.notFound"):c>=500?this.error=this.$t("analytics.serverError"):this.error=this.$t("analytics.loadError")}finally{this.loading=!1}},async loadAnalytics(){await this.loadAllData()},getLearningStyleIcon(){var e,s;return{visual:"",auditory:"",kinesthetic:"","reading-writing":""}[(s=(e=this.learningProfile)==null?void 0:e.learningStyle)==null?void 0:s.primary]||""},getLearningStyleText(){var s,r,n;const t={visual:this.$t("analytics.visual"),auditory:this.$t("analytics.auditory"),kinesthetic:this.$t("analytics.kinesthetic"),"reading-writing":this.$t("analytics.readingWriting")},e=(n=(r=(s=this.learningProfile)==null?void 0:s.learningStyle)==null?void 0:r.primary)==null?void 0:n.toLowerCase();return t[e]||this.$t("analytics.balanced")},getChronotypeIcon(){var e,s;return{lark:"",owl:"","third-bird":"",variable:""}[(s=(e=this.learningProfile)==null?void 0:e.chronotype)==null?void 0:s.type]||""},getChronotypeText(){var s,r,n;const t={lark:this.$t("analytics.lark"),owl:this.$t("analytics.owl"),"third-bird":this.$t("analytics.thirdBird"),variable:this.$t("analytics.variable")},e=(n=(r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.type)==null?void 0:n.toLowerCase();return t[e]||this.$t("analytics.flexible")},getOptimalTimesText(){var s,r;const t=(r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.peakHours;if(!(t!=null&&t.length))return this.$t("analytics.studyAnytime");const e=t.slice(0,2).map(n=>`${n}:00`).join(", ");return this.$t("analytics.betterAt",{hours:e})},getPreferredPathText(){var s,r;const t={storyteller:this.$t("analytics.storyteller"),builder:this.$t("analytics.builder"),scientist:this.$t("analytics.scientist"),artist:this.$t("analytics.artist"),gamer:this.$t("analytics.gamer"),social:this.$t("analytics.social"),debater:this.$t("analytics.debater")},e=(r=(s=this.learningProfile)==null?void 0:s.preferredPath)==null?void 0:r.toLowerCase();return t[e]||this.$t("analytics.universal")},getSessionLengthText(){var e,s,r;const t=((e=this.recommendations)==null?void 0:e.sessionLength)||((r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.optimalSessionLength);return t?this.$t("analytics.minutes",{count:t}):this.$t("analytics.minutes",{count:30})},formatCognitiveLabel(t){const e=t.charAt(0).toLowerCase()+t.slice(1),s={processingSpeed:this.$t("analytics.processingSpeed"),workingMemory:this.$t("analytics.workingMemory"),visualSpatial:this.$t("analytics.visualSpatial"),verbalLinguistic:this.$t("analytics.verbalLinguistic"),logicalMathematical:this.$t("analytics.logicalMathematical"),Processing:this.$t("analytics.Processing"),Memory:this.$t("analytics.Memory"),Visual:this.$t("analytics.Visual"),Verbal:this.$t("analytics.Verbal"),Logic:this.$t("analytics.Logic")};return s[t]||s[e]||t},async fetchLessonName(t){if(this.lessonCache.has(t))return this.lessonCache.get(t);try{const e=await hP(t),s=e==null?void 0:e.data,r=this.getLocalizedLessonName(s)||this.$t("analytics.lessonWithoutName");return this.lessonCache.set(t,r),r}catch{const s=`${this.$t("analytics.lesson")} (${t.slice(-6)})`;return this.lessonCache.set(t,s),s}},async resolveActivityLessonNames(){var r;const t=((r=this.analytics.recentActivity)==null?void 0:r.filter(n=>typeof n.lesson=="string"&&/^[a-f\d]{24}$/i.test(n.lesson)))||[];if(t.length===0)return;const s=[...new Set(t.map(n=>n.lesson))].map(n=>this.fetchLessonName(n));try{await Promise.allSettled(s),this.analytics.recentActivity.forEach(n=>{this.lessonCache.has(n.lesson)&&(n.lesson=this.lessonCache.get(n.lesson))})}catch{}},openModal(){this.showModal=!0},async downloadPDF(){const{default:t}=await mt(async()=>{const{default:r}=await import("./html2pdf-CI-32CXG.js").then(n=>n.h);return{default:r}},[]),e=this.pdfStatOptions.filter(r=>this.selectedStats.includes(r.key)).map(r=>{const n=this.analytics[r.key]??"";return`
                    <div style="margin: 12px 0; padding: 8px; border-left: 3px solid #a855f7; background: #f8f9fa;">
                        <strong>${r.label}:</strong> ${this.formatNumber(n)}
                    </div>`}).join(""),s=document.createElement("div");s.style.cssText="padding: 20px; font-family: Arial, sans-serif;",s.innerHTML=`
            <h2 style="text-align:center; margin-bottom:20px;"> ${this.$t("analytics.title")}</h2>
            ${e}
            <div style="margin-top:20px; padding-top:20px; border-top: 1px solid #ddd; font-size: 12px; color: #666;">
                <div style="margin-bottom: 8px;"><strong>${this.$t("analytics.period")}:</strong> ${this.period} ${this.$t("analytics.days")}</div>
                <div>${this.$t("analytics.generated")}: ${new Date().toLocaleString("ru-RU")}</div>
            </div>`,this.showModal=!1;try{await t().set({margin:.5,filename:`analytics-${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).from(s).save()}catch{alert(this.$t("analytics.loadError"))}},formatNumber:t=>{const e=Number(t);return t==null||isNaN(e)?"":e.toLocaleString("ru-RU")},formatDuration:t=>{const e=Number(t);return isNaN(e)?t:`${Math.round(e)} `},formatLessonName:t=>t?typeof t=="string"&&/^[a-f\d]{24}$/i.test(t)?`${(void 0).$t("analytics.lesson")} (${t.slice(-6)})`:t:(void 0).$t("analytics.lessonWithoutName"),formatDaysToHuman(t){if(!t)return`0 ${this.$t("analytics.days")}`;const e=[];return t>=365&&e.push(`${Math.floor(t/365)} ${this.$t("analytics.yearShort")}`),t%365>=30&&e.push(`${Math.floor(t%365/30)} ${this.$t("analytics.monthShort")}`),(t%30>0||e.length===0)&&e.push(`${t%30} ${this.$t("analytics.dayShort")}`),` ${e.join(" ")}`},formatDate(t){if(!t)return"";try{const e=new Date(t),s=new Date,r=new Date;return r.setDate(r.getDate()-1),e.toDateString()===s.toDateString()?`${this.$t("analytics.today")}, ${e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:e.toDateString()===r.toDateString()?`${this.$t("analytics.yesterday")}, ${e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:e.toLocaleDateString("ru-RU",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}}}},Kle={class:"analytics-page"},Yle={class:"page-header"},Qle={class:"header-content"},Xle={class:"header-info"},Jle={class:"page-title"},Zle={class:"page-subtitle"},ece={key:0,class:"loading-state"},tce={key:1,class:"error-state"},sce={key:2,class:"content-container"},rce={key:0,class:"section-card learning-dna-section"},nce={class:"section-header"},ice={class:"section-title"},oce={class:"section-subtitle"},ace={class:"dna-grid"},lce={class:"dna-card"},cce={class:"dna-card-header"},uce={class:"dna-icon"},dce={class:"dna-value"},hce={class:"dna-desc"},fce={class:"dna-card"},pce={class:"dna-card-header"},mce={class:"dna-icon"},gce={class:"dna-value"},yce={class:"dna-desc"},vce={class:"dna-card"},_ce={class:"dna-card-header"},bce={class:"dna-value"},wce={class:"dna-desc"},Sce={class:"dna-card"},Ece={class:"dna-card-header"},Tce={class:"dna-value"},kce={class:"dna-desc"},Ice={key:0,class:"cognitive-profile-section"},Cce={class:"subsection-title"},Ace={class:"cognitive-bars"},Pce={class:"cognitive-label"},xce={class:"cognitive-progress"},Lce={class:"cognitive-value"},Rce={key:1,class:"insights-section"},Nce={class:"subsection-title"},Oce={class:"insights-grid"},Dce={key:1,class:"section-card rewards-section"},Mce={class:"section-header"},$ce={class:"section-title"},Uce={class:"section-subtitle"},Fce={class:"level-section"},Vce={class:"level-info"},qce={class:"level-label"},Bce={class:"level-percent"},jce={class:"level-progress-bar"},Hce={class:"rewards-stats"},zce={class:"reward-stat"},Wce={class:"reward-stat-value"},Gce={class:"reward-stat-label"},Kce={class:"reward-stat"},Yce={class:"reward-stat-value"},Qce={class:"reward-stat-label"},Xce={class:"reward-stat"},Jce={class:"reward-stat-value"},Zce={class:"reward-stat-label"},eue={key:0,class:"achievements-showcase"},tue={class:"subsection-title"},sue={class:"achievements-list"},rue={class:"achievement-icon"},nue={class:"achievement-info"},iue={class:"achievement-name"},oue={class:"achievement-date"},aue={class:"stats-grid"},lue=["innerHTML"],cue={class:"stat-content"},uue={class:"stat-label"},due={class:"stat-value"},hue={class:"stat-subtext"},fue={key:2,class:"section-card"},pue={class:"section-header"},mue={class:"section-title"},gue={class:"section-subtitle"},yue={class:"activity-list"},vue={class:"activity-content"},_ue={class:"activity-title"},bue={class:"activity-meta"},wue={class:"activity-points"},Sue={key:0},Eue={key:3,class:"empty-state"},Tue={class:"modal-card"},kue={class:"modal-header"},Iue=["aria-label"],Cue={class:"modal-body"},Aue={class:"modal-section"},Pue={for:"period-select",class:"modal-label"},xue={value:"30"},Lue={value:"90"},Rue={value:"365"},Nue={class:"modal-section"},Oue={class:"modal-label"},Due={class:"options-grid"},Mue=["value"],$ue={class:"modal-footer"};function Uue(t,e,s,r,n,i){var o,l,c,u;return b(),S("div",Kle,[a("div",Yle,[a("div",Qle,[a("div",Xle,[a("h1",Jle," "+p(t.$t("analytics.title")),1),a("p",Zle,p(t.$t("analytics.subtitle")),1)]),a("button",{onClick:e[0]||(e[0]=(...h)=>i.openModal&&i.openModal(...h)),class:"download-button"},[e[9]||(e[9]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"7 10 12 15 17 10"}),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),re(" "+p(t.$t("analytics.downloadPdf")),1)])])]),n.loading?(b(),S("div",ece,[e[10]||(e[10]=a("div",{class:"spinner"},null,-1)),a("p",null,p(t.$t("analytics.loading")),1)])):n.error?(b(),S("div",tce,[e[12]||(e[12]=a("svg",{class:"error-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),a("h3",null,p(n.error),1),a("button",{onClick:e[1]||(e[1]=(...h)=>i.loadAllData&&i.loadAllData(...h)),class:"action-button primary"},[e[11]||(e[11]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)),re(" "+p(t.$t("analytics.tryAgain")),1)])])):(b(),S("div",sce,[n.learningProfile?(b(),S("div",rce,[a("div",nce,[e[13]||(e[13]=a("div",{class:"section-icon-badge dna"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),a("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})])],-1)),a("div",null,[a("h2",ice," "+p(t.$t("analytics.learningDna")),1),a("p",oce,p(t.$t("analytics.aiPersonalization")),1)])]),a("div",ace,[a("div",lce,[a("div",cce,[a("span",uce,p(i.getLearningStyleIcon()),1),a("h4",null,p(t.$t("analytics.learningStyle")),1)]),a("div",dce,p(i.getLearningStyleText()),1),a("p",hce,p(t.$t("analytics.primaryPerception")),1)]),a("div",fce,[a("div",pce,[a("span",mce,p(i.getChronotypeIcon()),1),a("h4",null,p(t.$t("analytics.chronotype")),1)]),a("div",gce,p(i.getChronotypeText()),1),a("p",yce,p(i.getOptimalTimesText()),1)]),a("div",vce,[a("div",_ce,[e[14]||(e[14]=a("span",{class:"dna-icon"},"",-1)),a("h4",null,p(t.$t("analytics.learningPath")),1)]),a("div",bce,p(i.getPreferredPathText()),1),a("p",wce,p(t.$t("analytics.recommendedApproach")),1)]),a("div",Sce,[a("div",Ece,[e[15]||(e[15]=a("span",{class:"dna-icon"},"",-1)),a("h4",null,p(t.$t("analytics.sessionLength")),1)]),a("div",Tce,p(i.getSessionLengthText()),1),a("p",kce,p(t.$t("analytics.optimalSession")),1)])]),n.learningProfile.cognitiveProfile?(b(),S("div",Ice,[a("h3",Cce," "+p(t.$t("analytics.cognitiveProfile")),1),a("div",Ace,[(b(!0),S(he,null,be(n.learningProfile.cognitiveProfile,(h,f)=>(b(),S("div",{key:f,class:"cognitive-bar"},[a("span",Pce,p(i.formatCognitiveLabel(f)),1),a("div",xce,[a("div",{class:"cognitive-fill",style:ct({width:h+"%"})},null,4)]),a("span",Lce,p(h)+"%",1)]))),128))])])):W("",!0),(o=n.learningProfile.insights)!=null&&o.length?(b(),S("div",Rce,[a("h3",Nce," "+p(t.$t("analytics.personalInsights")),1),a("div",Oce,[(b(!0),S(he,null,be(n.learningProfile.insights,(h,f)=>(b(),S("div",{key:f,class:"insight-card"},p(h),1))),128))])])):W("",!0)])):W("",!0),n.rewards?(b(),S("div",Dce,[a("div",Mce,[e[16]||(e[16]=a("div",{class:"section-icon-badge rewards"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),a("div",null,[a("h2",$ce," "+p(t.$t("analytics.gamification")),1),a("p",Uce,p(t.$t("analytics.level",{level:n.rewards.level}))+"  "+p(t.$t("analytics.pointsCount",{count:i.formatNumber(n.rewards.totalPoints)})),1)])]),a("div",Fce,[a("div",Vce,[a("span",qce,p(t.$t("analytics.level",{level:n.rewards.level})),1),a("span",Bce,p(Math.round(n.rewards.currentLevelProgress))+"%",1)]),a("div",jce,[a("div",{class:"level-progress-fill",style:ct({width:n.rewards.currentLevelProgress+"%"})},null,4)])]),a("div",Hce,[a("div",zce,[e[17]||(e[17]=a("span",{class:"reward-stat-icon"},"",-1)),a("span",Wce,p(n.rewards.streak||0),1),a("span",Gce,p(t.$t("analytics.daysStreak")),1)]),a("div",Kce,[e[18]||(e[18]=a("span",{class:"reward-stat-icon"},"",-1)),a("span",Yce,p(((l=n.rewards.achievements)==null?void 0:l.length)||0),1),a("span",Qce,p(t.$t("analytics.achievementsCount")),1)]),a("div",Xce,[e[19]||(e[19]=a("span",{class:"reward-stat-icon"},"",-1)),a("span",Jce,p(n.rewards.nextRewardIn||0),1),a("span",Zce,p(t.$t("analytics.toNextReward")),1)])]),(c=n.rewards.achievements)!=null&&c.length?(b(),S("div",eue,[a("h3",tue," "+p(t.$t("analytics.recentAchievements")),1),a("div",sue,[(b(!0),S(he,null,be(n.rewards.achievements.slice(0,6),h=>(b(),S("div",{key:h.id,class:ye(["achievement-item",h.rarity])},[a("span",rue,p(h.icon),1),a("div",nue,[a("span",iue,p(h.name),1),a("span",oue,p(i.formatDate(h.unlockedAt)),1)])],2))),128))])])):W("",!0)])):W("",!0),a("div",aue,[(b(!0),S(he,null,be(i.statCards,h=>(b(),S("div",{key:h.id,class:"stat-card"},[a("div",{class:ye(`stat-icon ${h.color}`),innerHTML:h.icon},null,10,lue),a("div",cue,[a("div",uue,p(h.label),1),a("div",due,p(h.value),1),a("div",hue,p(h.subtext),1)])]))),128))]),((u=n.analytics.recentActivity)==null?void 0:u.length)>0?(b(),S("div",fue,[a("div",pue,[e[20]||(e[20]=a("div",{class:"section-icon-badge"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})])],-1)),a("div",null,[a("h2",mue,p(t.$t("analytics.recentActivity")),1),a("p",gue,p(t.$t("analytics.recentActivityDesc")),1)])]),a("div",yue,[(b(!0),S(he,null,be(n.analytics.recentActivity.slice(0,5),(h,f)=>(b(),S("div",{key:`activity-${f}-${h.date}`,class:"activity-item"},[e[21]||(e[21]=a("div",{class:"activity-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("div",vue,[a("div",_ue,p(i.formatLessonName(h.lesson)),1),a("div",bue,[a("span",null,p(i.formatDate(h.date)),1),a("span",wue,p(t.$t("analytics.pointsCount",{count:i.formatNumber(h.points)})),1),h.duration?(b(),S("span",Sue,p(i.formatDuration(h.duration)),1)):W("",!0)])])]))),128))])])):W("",!0),i.hasAnyData?W("",!0):(b(),S("div",Eue,[e[23]||(e[23]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),a("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),a("line",{x1:"6",y1:"20",x2:"6",y2:"14"})],-1)),a("h3",null,p(t.$t("analytics.noData")),1),a("p",null,p(t.$t("analytics.startLearningDesc")),1),a("button",{onClick:e[2]||(e[2]=h=>t.$router.push("/catalogue")),class:"action-button primary"},[e[22]||(e[22]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)),re(" "+p(t.$t("analytics.startButton")),1)])]))])),n.showModal?(b(),S("div",{key:3,class:"modal-overlay",onClick:e[8]||(e[8]=gt(h=>n.showModal=!1,["self"]))},[a("div",Tue,[a("div",kue,[a("h3",null,p(t.$t("analytics.pdfSettings")),1),a("button",{onClick:e[3]||(e[3]=h=>n.showModal=!1),class:"close-button","aria-label":t.$t("common.close")},e[24]||(e[24]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,Iue)]),a("div",Cue,[a("div",Aue,[a("label",Pue,p(t.$t("analytics.period")),1),Pe(a("select",{id:"period-select","onUpdate:modelValue":e[4]||(e[4]=h=>n.period=h),class:"modal-select"},[a("option",xue,p(t.$t("analytics.oneMonth")),1),a("option",Lue,p(t.$t("analytics.threeMonths")),1),a("option",Rue,p(t.$t("analytics.oneYear")),1)],512),[[Js,n.period]])]),a("div",Nue,[a("label",Oue,p(t.$t("analytics.selectMetrics")),1),a("div",Due,[(b(!0),S(he,null,be(i.pdfStatOptions,h=>(b(),S("label",{key:h.key,class:"option-checkbox"},[Pe(a("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=f=>n.selectedStats=f),value:h.key},null,8,Mue),[[Ih,n.selectedStats]]),a("span",null,p(h.label),1)]))),128))])])]),a("div",$ue,[a("button",{onClick:e[6]||(e[6]=h=>n.showModal=!1),class:"action-button secondary"},p(t.$t("common.cancel")),1),a("button",{onClick:e[7]||(e[7]=(...h)=>i.downloadPDF&&i.downloadPDF(...h)),class:"action-button primary"},[e[25]||(e[25]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"7 10 12 15 17 10"}),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),re(" "+p(t.$t("common.download")),1)])])])])):W("",!0)])}const Fue=tt(Gle,[["render",Uue],["__scopeId","data-v-39e6485c"]]),Vue={name:"StudyGoal",setup(){const t=Se([]),e=Se(!1),s=Se(["","","","","","","","",""," ","","","","","","","","","",""]),r=xi({subject:"",customSubject:"",topic:"",timeline:"",total:0,done:0,comment:""});return{goals:t,addingGoal:e,subjects:s,newGoal:r,calculateProgress:C=>C.total>0?Math.round(C.done/C.total*100):0,daysLeft:C=>{const U=new Date,E=new Date(C.timeline)-U,L=Math.ceil(E/(1e3*60*60*24));return L>0?`${L} `:""},addGoal:()=>{if(!r.subject||!r.topic||!r.timeline||!r.total)return;const C={...r,id:Date.now(),updating:!1,updateAmount:0};t.value.push(C),Object.assign(r,{subject:"",customSubject:"",topic:"",timeline:"",total:0,done:0,comment:""}),e.value=!1},updateGoal:(C,U)=>{const D=t.value.findIndex(E=>E.id===C);if(D!==-1){const E=t.value[D];E.done=Math.min(E.done+U,E.total),E.updating=!1,E.updateAmount=0}},deleteGoal:C=>{t.value=t.value.filter(U=>U.id!==C)},markDone:C=>{const U=t.value.findIndex(D=>D.id===C);U!==-1&&(t.value[U].done=t.value[U].total)},toggleUpdate:C=>{const U=t.value.findIndex(D=>D.id===C);if(U!==-1){const D=t.value[U];D.updating=!D.updating,D.updateAmount=0}},getSubjectColor:C=>({:"red",:"blue",:"green",:"orange",:"teal",:"purple",:"gray",:"pink",:"amber"," ":"indigo"})[C]||"default",getDaysLeftColor:C=>{const U=new Date,D=new Date(C.timeline),E=Math.ceil((D-U)/(1e3*60*60*24));return E<0?"expired":E<=3?"urgent":E<=7?"warning":"good"},getProgressEmoji:C=>C===100?"":C>=80?"":C>=60?"":C>=40?"":C>=20?"":"",getRandomMotivation:()=>{const C=[" ! "," ! "," ! ","   ! "];return C[Math.floor(Math.random()*C.length)]},getSubjectName:C=>C.subject==="custom"?C.customSubject:C.subject}}},que={class:"goals-page"},Bue={class:"page-header"},jue={class:"header-content"},Hue={key:0,class:"form-card"},zue={class:"form-header"},Wue={class:"form-body"},Gue={class:"form-grid"},Kue={class:"form-group"},Yue=["value"],Que={key:0,class:"form-group"},Xue={class:"form-group"},Jue={class:"form-group"},Zue={class:"form-group"},ede={class:"form-group"},tde={class:"form-group full-width"},sde={class:"form-actions"},rde={key:1,class:"goals-container"},nde={class:"goal-header"},ide={class:"goal-info"},ode={class:"goal-details"},ade={class:"goal-subject"},lde={class:"goal-topic"},cde={class:"goal-actions"},ude=["onClick"],dde={class:"progress-section"},hde={class:"progress-header"},fde={class:"progress-label"},pde={class:"progress-value"},mde={class:"progress-bar-container"},gde={key:0,class:"motivation-text"},yde={key:0,class:"comment-section"},vde={class:"comment-content"},_de={key:1,class:"update-section"},bde=["onUpdate:modelValue"],wde=["onClick"],Sde=["onClick"],Ede={key:2,class:"goal-buttons"},Tde=["onClick"],kde=["onClick"],Ide={key:2,class:"empty-state"};function Cde(t,e,s,r,n,i){return b(),S("div",que,[a("div",Bue,[a("div",jue,[e[13]||(e[13]=a("div",{class:"header-info"},[a("h1",{class:"page-title"},"  "),a("p",{class:"page-subtitle"},"     !")],-1)),r.addingGoal?W("",!0):(b(),S("button",{key:0,onClick:e[0]||(e[0]=o=>r.addingGoal=!0),class:"add-button"},e[12]||(e[12]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),re("   ")])))])]),r.addingGoal?(b(),S("div",Hue,[a("div",zue,[e[15]||(e[15]=a("h2",{class:"form-title"},"  ",-1)),a("button",{onClick:e[1]||(e[1]=o=>r.addingGoal=!1),class:"close-button"},e[14]||(e[14]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),a("div",Wue,[a("div",Gue,[a("div",Kue,[e[18]||(e[18]=a("label",{class:"form-label"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]),re("  ")],-1)),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.newGoal.subject=o),class:"form-select"},[e[16]||(e[16]=a("option",{value:""}," ",-1)),(b(!0),S(he,null,be(r.subjects,o=>(b(),S("option",{key:o,value:o},p(o),9,Yue))),128)),e[17]||(e[17]=a("option",{value:"custom"},"...",-1))],512),[[Js,r.newGoal.subject]])]),r.newGoal.subject==="custom"?(b(),S("div",Que,[e[19]||(e[19]=a("label",{class:"form-label"}," ",-1)),Pe(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.newGoal.customSubject=o),class:"form-input",placeholder:" "},null,512),[[Ge,r.newGoal.customSubject]])])):W("",!0),a("div",Xue,[e[20]||(e[20]=a("label",{class:"form-label"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 6v6l4 2"})]),re("  ")],-1)),Pe(a("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.newGoal.topic=o),class:"form-input",placeholder:"  ?"},null,512),[[Ge,r.newGoal.topic]])]),a("div",Jue,[e[21]||(e[21]=kt('<label class="form-label" data-v-b11adc90><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-b11adc90><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-b11adc90></rect><line x1="16" y1="2" x2="16" y2="6" data-v-b11adc90></line><line x1="8" y1="2" x2="8" y2="6" data-v-b11adc90></line><line x1="3" y1="10" x2="21" y2="10" data-v-b11adc90></line></svg>   </label>',1)),Pe(a("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=o=>r.newGoal.timeline=o),class:"form-input"},null,512),[[Ge,r.newGoal.timeline]])]),a("div",Zue,[e[22]||(e[22]=a("label",{class:"form-label"},"",-1)),Pe(a("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>r.newGoal.total=o),class:"form-input",placeholder:"0",min:"0"},null,512),[[Ge,r.newGoal.total,void 0,{number:!0}]])]),a("div",ede,[e[23]||(e[23]=a("label",{class:"form-label"},"",-1)),Pe(a("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=o=>r.newGoal.done=o),class:"form-input",placeholder:"0",min:"0"},null,512),[[Ge,r.newGoal.done,void 0,{number:!0}]])])]),a("div",tde,[e[24]||(e[24]=a("label",{class:"form-label"}," ()",-1)),Pe(a("textarea",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.newGoal.comment=o),class:"form-textarea",rows:"3",placeholder:"   ..."},null,512),[[Ge,r.newGoal.comment]])]),a("div",sde,[a("button",{onClick:e[9]||(e[9]=o=>r.addingGoal=!1),class:"action-button secondary"},"  "),a("button",{onClick:e[10]||(e[10]=(...o)=>r.addGoal&&r.addGoal(...o)),class:"action-button primary"},e[25]||(e[25]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1),re("   ")]))])])])):W("",!0),r.goals.length>0?(b(),S("div",rde,[(b(!0),S(he,null,be(r.goals,o=>(b(),S("div",{key:o.id,class:"goal-card"},[a("div",nde,[a("div",ide,[a("div",{class:ye(["goal-badge",r.getSubjectColor(o.subject)])},p(r.getSubjectName(o).charAt(0)),3),a("div",ode,[a("h3",ade,p(r.getSubjectName(o)),1),a("p",lde,p(o.topic),1)])]),a("div",cde,[a("div",{class:ye(["deadline-badge",r.getDaysLeftColor(o)])},[e[26]||(e[26]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 6v6l4 2"})],-1)),re(" "+p(r.daysLeft(o)),1)],2),a("button",{onClick:l=>r.deleteGoal(o.id),class:"delete-button"},e[27]||(e[27]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"3 6 5 6 21 6"}),a("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,ude)])]),a("div",dde,[a("div",hde,[a("span",fde,"  "+p(r.getProgressEmoji(r.calculateProgress(o))),1),a("span",pde,p(o.done)+"/"+p(o.total)+" ("+p(r.calculateProgress(o))+"%) ",1)]),a("div",mde,[a("div",{class:ye(["progress-bar-fill",r.getSubjectColor(o.subject)]),style:ct({width:r.calculateProgress(o)+"%"})},null,6)]),r.calculateProgress(o)>0?(b(),S("p",gde,p(r.getRandomMotivation()),1)):W("",!0)]),o.comment?(b(),S("div",yde,[a("div",vde,[e[28]||(e[28]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),a("p",null,p(o.comment),1)])])):W("",!0),o.updating?(b(),S("div",_de,[Pe(a("input",{type:"number","onUpdate:modelValue":l=>o.updateAmount=l,class:"update-input",placeholder:" ",min:"0"},null,8,bde),[[Ge,o.updateAmount,void 0,{number:!0}]]),a("button",{onClick:l=>r.updateGoal(o.id,o.updateAmount||0),class:"action-button success"},e[29]||(e[29]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1)]),8,wde),a("button",{onClick:l=>r.toggleUpdate(o.id),class:"action-button secondary"},e[30]||(e[30]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,Sde)])):(b(),S("div",Ede,[a("button",{onClick:l=>r.toggleUpdate(o.id),class:"action-button secondary"},e[31]||(e[31]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),re("  ")]),8,Tde),r.calculateProgress(o)<100?(b(),S("button",{key:0,onClick:l=>r.markDone(o.id),class:"action-button success"},e[32]||(e[32]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1),re("  ")]),8,kde)):W("",!0)]))]))),128))])):r.addingGoal?W("",!0):(b(),S("div",Ide,[e[34]||(e[34]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 6v6l4 2"})],-1)),e[35]||(e[35]=a("h3",null,"  !",-1)),e[36]||(e[36]=a("p",null,"    ",-1)),a("button",{onClick:e[11]||(e[11]=o=>r.addingGoal=!0),class:"action-button primary large"},e[33]||(e[33]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),re("    ")]))]))])}const Ade=tt(Vue,[["render",Cde],["__scopeId","data-v-b11adc90"]]),Pde={data(){return{userInput:"",messages:[],image:"",imageAdded:!1,isLoading:!1,messageUsage:0,imageUsage:0,plan:"free",userId:null,currentMonth:new Date().getMonth(),currentYear:new Date().getFullYear(),lastResetCheck:null,planLimits:{free:{messages:50,images:5},start:{messages:-1,images:20},pro:{messages:-1,images:-1}}}},computed:{...tn("user",["userStatus","getUserId"]),remainingMessages(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.messages)||0;return t===-1?"":Math.max(0,t-this.messageUsage)},remainingImages(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.images)||0;return t===-1?"":Math.max(0,t-this.imageUsage)},nextResetDate(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,1).toLocaleDateString("en-US",{day:"numeric",month:"long"})},isMessageLimitReached(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.messages)||0;return t!==-1&&this.messageUsage>=t},isImageLimitReached(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.images)||0;return t!==-1&&this.imageUsage>=t},isInputDisabled(){return this.isMessageLimitReached||this.isLoading},isImageUploadDisabled(){return this.isImageLimitReached||this.isLoading},inputPlaceholder(){return this.isMessageLimitReached?"Message limit reached. Resets next month.":"Type a question..."},imageUploadTooltip(){return this.isImageLimitReached?"Image limit reached":"Attach image"},showUsageWarning(){return this.warningMessage!==""},warningType(){return this.isMessageLimitReached||this.isImageLimitReached?"error":this.remainingMessages<=5||this.remainingImages<=1?"warning":"info"},warningMessage(){if(this.plan==="free"){if(this.isMessageLimitReached&&this.isImageLimitReached)return"Message and image limits reached. Upgrade plan to continue.";if(this.isMessageLimitReached)return"Message limit reached. Upgrade plan for unlimited messaging.";if(this.isImageLimitReached)return"Image limit reached. Upgrade plan for more images.";if(this.remainingMessages<=5)return`${this.remainingMessages} messages remaining this month.`;if(this.remainingImages<=1)return`${this.remainingImages} image request(s) remaining this month.`}else if(this.plan==="start"){if(this.isImageLimitReached)return"Image limit reached. Upgrade to Pro for unlimited images.";if(this.remainingImages<=2)return`${this.remainingImages} images remaining this month.`}return""},canUpgrade(){return this.plan==="free"||this.plan==="start"&&this.isImageLimitReached}},async mounted(){await this.initializeComponent()},methods:{async initializeComponent(){try{const t=pe.currentUser;t&&(this.userId=t.uid,this.plan=this.userStatus||"free",await this.loadUsageData(),await this.checkMonthlyReset())}catch{}},async loadUsageData(){if(this.userId)try{const t=Tl(kl,"users",this.userId),e=await pk(t);if(e.exists()){const s=e.data(),r=`${this.currentYear}-${this.currentMonth}`,i=(s.homeworkUsage||{})[r]||{};this.messageUsage=i.messages||0,this.imageUsage=i.images||0,this.lastResetCheck=s.lastResetCheck||null}}catch{}},async checkMonthlyReset(){const t=new Date,e=t.getMonth(),s=t.getFullYear();if(this.lastResetCheck){const r=new Date(this.lastResetCheck),n=r.getMonth(),i=r.getFullYear();(s>i||e>n)&&await this.performMonthlyReset()}else await this.updateResetCheck()},async performMonthlyReset(){if(this.userId)try{this.messageUsage=0,this.imageUsage=0;const t=Tl(kl,"users",this.userId),e=`${this.currentYear}-${this.currentMonth}`;await Gu(t,{[`homeworkUsage.${e}.messages`]:0,[`homeworkUsage.${e}.images`]:0,lastResetCheck:new Date().toISOString()})}catch{}},async updateResetCheck(){if(this.userId)try{const t=Tl(kl,"users",this.userId);await Gu(t,{lastResetCheck:new Date().toISOString()})}catch{}},async sendMessage(){if(!(!this.userInput&&!this.image)){if(this.isMessageLimitReached){this.showLimitModal("messages");return}if(this.image&&this.isImageLimitReached){this.showLimitModal("images");return}this.isLoading=!0;try{const t={text:this.userInput,sender:"user",image:this.image,timestamp:new Date().toISOString()};this.messages.push(t);const e=await AP(t.text,t.image);this.messages.push({text:e,sender:"bot",timestamp:new Date().toISOString()}),this.messageUsage++,this.image&&this.imageUsage++,await this.saveUsageData(),this.userInput="",this.image="",this.imageAdded=!1}catch{this.messages.pop(),this.messages.push({text:" An error occurred. Please try again.",sender:"bot",timestamp:new Date().toISOString()})}finally{this.isLoading=!1}}},async saveUsageData(){if(this.userId)try{const t=Tl(kl,"users",this.userId),e=`${this.currentYear}-${this.currentMonth}`;await Gu(t,{[`homeworkUsage.${e}.messages`]:this.messageUsage,[`homeworkUsage.${e}.images`]:this.imageUsage,[`homeworkUsage.${e}.lastUsed`]:new Date().toISOString()})}catch{}},async handleFile(t){const e=t.target.files[0];if(!e||!e.type.startsWith("image"))return;if(this.isImageLimitReached){this.showLimitModal("images"),t.target.value="";return}const s=new FileReader;s.onload=async()=>{var i;const r=s.result.split(",")[1],n=new FormData;n.append("image",r);try{const l=await(await fetch("https://api.imgbb.com/1/upload?key=e428d4d8a427726409a1b7fbdb232ff1",{method:"POST",body:n})).json();(i=l==null?void 0:l.data)!=null&&i.url?(this.image=l.data.url,this.imageAdded=!0,setTimeout(()=>this.imageAdded=!1,3e3)):alert("Failed to upload image.")}catch{alert("Error uploading image.")}},s.readAsDataURL(e)},showLimitModal(t){confirm(`${{messages:"Message limit reached. Upgrade plan to continue chatting.",images:"Image limit reached. Upgrade plan to send more images."}[t]}

Go to plan selection?`)&&this.navigateToUpgrade()},navigateToUpgrade(){this.$router.push("/settings")},formatTimestamp(t){return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}},watch:{userStatus:{handler(t){t&&t!==this.plan&&(this.plan=t)},immediate:!0}}},xde={class:"homework-help"},Lde={class:"chat-header"},Rde={class:"usage-info"},Nde={key:0,class:"usage-counter free"},Ode={class:"usage-item"},Dde={class:"count"},Mde={class:"usage-item"},$de={class:"count"},Ude={key:1,class:"usage-counter start"},Fde={class:"usage-item"},Vde={class:"count"},qde={key:2,class:"usage-counter pro"},Bde={class:"reset-info"},jde={class:"warning-content"},Hde={class:"warning-text"},zde={class:"chat-window"},Wde={class:"message-bubble"},Gde={key:0},Kde=["src"],Yde={key:2,class:"message-timestamp"},Qde={key:0,class:"message bot"},Xde=["placeholder","disabled"],Jde=["title"],Zde=["disabled"],ehe=["disabled"],the={key:1,class:"image-added-msg"};function she(t,e,s,r,n,i){return b(),S("div",xde,[e[13]||(e[13]=a("div",{class:"instruction-box"},[a("h2",null," How to use the assistant"),a("ol",null,[a("li",null,"Choose a subject or topic."),a("li",null,"Formulate your question as clearly as possible."),a("li",null,"Attach an image and explain what is depicted."),a("li",null,'Click "Send" and get an answer!')])],-1)),a("div",Lde,[e[10]||(e[10]=a("h2",null," Homework Help",-1)),a("div",Rde,[n.plan==="free"?(b(),S("div",Nde,[a("div",Ode,[e[5]||(e[5]=a("span",{class:"label"},"Messages:",-1)),a("span",Dde,p(i.remainingMessages)+" of 50",1)]),a("div",Mde,[e[6]||(e[6]=a("span",{class:"label"},"Images:",-1)),a("span",$de,p(i.remainingImages)+" of 5",1)])])):n.plan==="start"?(b(),S("div",Ude,[e[8]||(e[8]=a("div",{class:"usage-item"},[a("span",{class:"label"},"Messages:"),a("span",{class:"count unlimited"}," Unlimited")],-1)),a("div",Fde,[e[7]||(e[7]=a("span",{class:"label"},"Images:",-1)),a("span",Vde,p(i.remainingImages)+" of 20",1)])])):n.plan==="pro"?(b(),S("div",qde,e[9]||(e[9]=[kt('<div class="usage-item" data-v-17466d04><span class="label" data-v-17466d04>Messages:</span><span class="count unlimited" data-v-17466d04> Unlimited</span></div><div class="usage-item" data-v-17466d04><span class="label" data-v-17466d04>Images:</span><span class="count unlimited" data-v-17466d04> Unlimited</span></div>',2)]))):W("",!0),a("div",Bde,[a("small",null,"Reset: "+p(i.nextResetDate),1)])])]),i.showUsageWarning?(b(),S("div",{key:0,class:ye(["usage-warning",i.warningType])},[a("div",jde,[e[11]||(e[11]=a("span",{class:"warning-icon"},"",-1)),a("span",Hde,p(i.warningMessage),1),i.canUpgrade?(b(),S("button",{key:0,onClick:e[0]||(e[0]=(...o)=>i.navigateToUpgrade&&i.navigateToUpgrade(...o)),class:"upgrade-btn"}," Upgrade Plan ")):W("",!0)])],2)):W("",!0),a("div",zde,[(b(!0),S(he,null,be(n.messages,(o,l)=>(b(),S("div",{key:l,class:ye(["message",o.sender])},[a("div",Wde,[o.text?(b(),S("p",Gde,p(o.text),1)):W("",!0),o.image?(b(),S("img",{key:1,src:o.image,class:"image-msg"},null,8,Kde)):W("",!0),o.timestamp?(b(),S("div",Yde,p(i.formatTimestamp(o.timestamp)),1)):W("",!0)])],2))),128)),n.isLoading?(b(),S("div",Qde,e[12]||(e[12]=[a("div",{class:"message-bubble loading"},[a("div",{class:"typing-indicator"},[a("span"),a("span"),a("span")])],-1)]))):W("",!0)]),a("div",{class:ye(["chat-input",{disabled:i.isInputDisabled}])},[Pe(a("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>n.userInput=o),placeholder:i.inputPlaceholder,disabled:i.isInputDisabled,onKeyup:e[2]||(e[2]=tc((...o)=>i.sendMessage&&i.sendMessage(...o),["enter"]))},null,40,Xde),[[Ge,n.userInput]]),a("label",{for:"file-upload",class:ye(["file-upload-btn",{disabled:i.isImageUploadDisabled}]),title:i.imageUploadTooltip}," + ",10,Jde),a("input",{id:"file-upload",type:"file",onChange:e[3]||(e[3]=(...o)=>i.handleFile&&i.handleFile(...o)),disabled:i.isImageUploadDisabled,hidden:""},null,40,Zde),a("button",{onClick:e[4]||(e[4]=(...o)=>i.sendMessage&&i.sendMessage(...o)),disabled:i.isInputDisabled,class:ye({disabled:i.isInputDisabled})}," Send ",10,ehe)],2),n.imageAdded?(b(),S("p",the," Image successfully added!")):W("",!0)])}const rhe=tt(Pde,[["render",she],["__scopeId","data-v-17466d04"]]),nhe={name:"HomeworkList",data(){return{homeworks:[],loading:!0,error:null,selectedSubject:"",selectedStatus:"",searchQuery:""}},computed:{subjects(){return[...new Set(this.validHomeworks.map(t=>t.subject).filter(Boolean))].sort()},validHomeworks(){return this.homeworks.filter(t=>{if(!t)return!1;const e=(t._id||t.lessonId)&&t._id!=="null"&&t.lessonId!=="null",s=t.title||t.lessonName,r=this.getExerciseCount(t)>0;return e&&s&&r})},filteredHomeworks(){return this.validHomeworks.filter(t=>{const e=!this.selectedSubject||t.subject===this.selectedSubject,s=!this.selectedStatus||this.getStatus(t)===this.selectedStatus,r=!this.searchQuery||this.getHomeworkTitle(t).toLowerCase().includes(this.searchQuery.toLowerCase());return e&&s&&r})},displayableHomeworks(){return this.filteredHomeworks},totalHomeworks(){return this.validHomeworks.length},completedHomeworks(){return this.validHomeworks.filter(t=>this.isCompleted(t)).length},inProgressHomeworks(){return this.validHomeworks.filter(t=>this.hasProgress(t)&&!this.isCompleted(t)).length},hasActiveFilters(){return!!(this.searchQuery||this.selectedSubject||this.selectedStatus)}},methods:{getSubjectEmoji(t){return{Mathematics:"",Math:"",English:"",Language:"",Science:"",Physics:"",Chemistry:"",Biology:"",History:"",Geography:"","Computer Science":"",Programming:""}[t]||""},getHomeworkKey(t){return t._id?`hw-${t._id}`:t.lessonId?`lesson-${t.lessonId}`:`temp-${Math.random()}`},getHomeworkTitle(t){if(t.title&&typeof t.title=="string")return t.title;if(t.lessonName){if(typeof t.lessonName=="string")return t.lessonName;if(typeof t.lessonName=="object"){const e=localStorage.getItem("lang")||"ru";return t.lessonName[e]||t.lessonName.en||t.lessonName.ru||t.lessonName.uz||"Homework"}}return"Homework"},getExerciseCount(t){return t.exerciseCount>0?t.exerciseCount:Array.isArray(t.exercises)?t.exercises.length:Array.isArray(t.homework)?t.homework.length:Array.isArray(t.questions)?t.questions.length:0},hasProgress(t){return!!(t.hasProgress||t.completed!==void 0||t.score!==void 0||t.userProgress||t.progress)},isCompleted(t){var e,s;return!!(t.completed||(e=t.userProgress)!=null&&e.completed||(s=t.progress)!=null&&s.completed)},getScore(t){var e,s;return t.score||((e=t.userProgress)==null?void 0:e.score)||((s=t.progress)==null?void 0:s.score)||0},async goToHomework(t){try{await this.$router.push({name:"HomeworkPage",params:{id:t._id||t.lessonId},query:{title:this.getHomeworkTitle(t),subject:t.subject||"Unknown",type:t.type||(t.lessonId?"lesson":"standalone")}})}catch(e){console.error(e)}},statusLabel(t){return this.hasProgress(t)?this.isCompleted(t)?this.$t("homeworkList.completed"):this.$t("homeworkList.statusInProgress"):this.$t("homeworkList.notStarted")},getStatus(t){return this.hasProgress(t)?this.isCompleted(t)?"completed":"in-progress":"pending"},getButtonText(t){return this.isCompleted(t)?this.$t("homeworkList.view"):this.hasProgress(t)?this.$t("homeworkList.continue"):this.$t("homeworkList.start")},clearFilters(){this.selectedSubject="",this.selectedStatus="",this.searchQuery=""},refreshHomeworks(){this.fetchHomeworks()},formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{day:"numeric",month:"short"}):""},isOverdue(t){return t.dueDate&&new Date(t.dueDate)<new Date&&!this.isCompleted(t)},isUrgent(t){if(!t.dueDate||this.isCompleted(t))return!1;const e=Math.ceil((new Date(t.dueDate)-new Date)/(1e3*60*60*24));return e<=3&&e>=0},async fetchHomeworks(){try{this.loading=!0,this.error=null;const t=pe.currentUser;if(!t)throw new Error("Not authorized");const e=await fP(t.uid);e.success&&e.data?this.homeworks=e.data.map(s=>{var r,n,i,o;return{...s,hasProgress:!!(s.hasProgress||s.userProgress||s.progress||s.completed!==void 0||s.score!==void 0),completed:!!(s.completed||(r=s.userProgress)!=null&&r.completed||(n=s.progress)!=null&&n.completed),score:s.score||((i=s.userProgress)==null?void 0:i.score)||((o=s.progress)==null?void 0:o.score)||0}}):(this.error=e.error||"Failed to load",this.homeworks=[])}catch(t){this.error=t.message,this.homeworks=[]}finally{this.loading=!1}}},async mounted(){await this.fetchHomeworks()}},ihe={class:"min-h-screen bg-white"},ohe={class:"max-w-6xl mx-auto px-6 pt-8 pb-6"},ahe={class:"flex items-center justify-between"},lhe={class:"flex items-center gap-4"},che={class:"text-2xl font-bold text-slate-800"},uhe={class:"text-slate-500 text-sm"},dhe={class:"hidden md:flex items-center gap-3"},hhe={class:"px-4 py-2 rounded-full bg-green-50 text-green-600 text-sm font-medium"},fhe={class:"px-4 py-2 rounded-full bg-amber-50 text-amber-600 text-sm font-medium"},phe={class:"max-w-6xl mx-auto px-6 pb-6"},mhe={class:"flex flex-wrap items-center gap-3"},ghe={class:"relative flex-1 min-w-64"},yhe=["placeholder"],vhe={value:""},_he=["value"],bhe={value:""},whe={value:"pending"},She={value:"in-progress"},Ehe={value:"completed"},The={key:0,class:"flex flex-col items-center justify-center py-24"},khe={class:"mt-4 text-slate-500 text-sm"},Ihe={key:1,class:"text-center py-24"},Che={class:"text-lg font-semibold text-slate-800 mb-2"},Ahe={class:"text-slate-500 text-sm mb-4"},Phe={key:2,class:"max-w-6xl mx-auto px-6 pb-12"},xhe={key:0,class:"text-center py-24"},Lhe={class:"text-6xl mb-4"},Rhe={class:"text-lg font-semibold text-slate-800 mb-2"},Nhe={class:"text-slate-500 text-sm"},Ohe={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Dhe=["onClick"],Mhe={key:0,class:"absolute -top-2 -right-2 px-2 py-0.5 rounded-full bg-red-500 text-white text-xs font-bold shadow-sm"},$he={class:"flex items-center justify-between mb-4"},Uhe={class:"flex items-center gap-2"},Fhe={class:"text-lg"},Vhe={class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},qhe={class:"font-semibold text-slate-800 mb-3 line-clamp-2 group-hover:text-purple-600 transition-colors"},Bhe={class:"flex items-center gap-4 text-xs text-slate-500 mb-4"},jhe={class:"flex items-center gap-1"},Hhe={class:"mb-4"},zhe={class:"flex justify-between text-xs mb-1"},Whe={class:"text-slate-400"},Ghe={class:"font-medium text-slate-600"},Khe={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},Yhe={class:"pt-4 border-t border-gray-50 flex justify-end"};function Qhe(t,e,s,r,n,i){return b(),S("div",ihe,[a("div",ohe,[a("div",ahe,[a("div",lhe,[e[6]||(e[6]=a("div",{class:"w-12 h-12 rounded-2xl bg-purple-50 flex items-center justify-center"},[a("span",{class:"text-2xl"},"")],-1)),a("div",null,[a("h1",che,p(t.$t("homeworkList.title")),1),a("p",uhe,p(i.validHomeworks.length)+" "+p(t.$t("homeworkList.assignments")),1)])]),a("div",dhe,[a("div",hhe,"  "+p(i.completedHomeworks)+" "+p(t.$t("homeworkList.done")),1),a("div",fhe,"  "+p(i.inProgressHomeworks)+" "+p(t.$t("homeworkList.inProgress")),1)])])]),a("div",phe,[a("div",mhe,[a("div",ghe,[Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.searchQuery=o),type:"text",class:"w-full px-4 py-2.5 pl-10 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 transition-all",placeholder:t.$t("homeworkList.searchPlaceholder")},null,8,yhe),[[Ge,n.searchQuery]]),e[7]||(e[7]=a("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1))]),Pe(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.selectedSubject=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",vhe,p(t.$t("homeworkList.allSubjects")),1),(b(!0),S(he,null,be(i.subjects,o=>(b(),S("option",{key:o,value:o},p(o),9,_he))),128))],512),[[Js,n.selectedSubject]]),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedStatus=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",bhe,p(t.$t("homeworkList.allStatus")),1),a("option",whe,p(t.$t("homeworkList.notStarted")),1),a("option",She,p(t.$t("homeworkList.statusInProgress")),1),a("option",Ehe,p(t.$t("homeworkList.completed")),1)],512),[[Js,n.selectedStatus]]),i.hasActiveFilters?(b(),S("button",{key:0,onClick:e[3]||(e[3]=(...o)=>i.clearFilters&&i.clearFilters(...o)),class:"px-4 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 transition-all"},p(t.$t("homeworkList.clear")),1)):W("",!0),a("button",{onClick:e[4]||(e[4]=(...o)=>i.refreshHomeworks&&i.refreshHomeworks(...o)),class:"p-2.5 rounded-xl border border-gray-200 text-slate-500 hover:border-gray-300 hover:text-slate-700 transition-all"},e[8]||(e[8]=[a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)]))])]),n.loading?(b(),S("div",The,[e[9]||(e[9]=a("div",{class:"w-8 h-8 border-2 border-purple-200 border-t-purple-500 rounded-full animate-spin"},null,-1)),a("p",khe,p(t.$t("homeworkList.loading")),1)])):n.error?(b(),S("div",Ihe,[e[10]||(e[10]=a("div",{class:"text-6xl mb-4"},"",-1)),a("h3",Che,p(t.$t("homeworkList.somethingWentWrong")),1),a("p",Ahe,p(n.error),1),a("button",{onClick:e[5]||(e[5]=(...o)=>i.refreshHomeworks&&i.refreshHomeworks(...o)),class:"px-4 py-2 bg-indigo-500 text-white rounded-xl text-sm font-medium hover:bg-indigo-600 transition-all"},p(t.$t("homeworkList.tryAgain")),1)])):(b(),S("div",Phe,[i.displayableHomeworks.length===0?(b(),S("div",xhe,[a("div",Lhe,p(i.validHomeworks.length===0?"":""),1),a("h3",Rhe,p(i.validHomeworks.length===0?t.$t("homeworkList.noHomeworkYet"):t.$t("homeworkList.noMatchesFound")),1),a("p",Nhe,p(i.validHomeworks.length===0?t.$t("homeworkList.startCourseToGet"):t.$t("homeworkList.tryDifferentFilters")),1)])):(b(),S("div",Ohe,[(b(!0),S(he,null,be(i.displayableHomeworks,o=>(b(),S("article",{key:i.getHomeworkKey(o),onClick:l=>i.goToHomework(o),class:"group p-5 rounded-2xl border border-gray-100 hover:border-purple-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white relative"},[i.isUrgent(o)?(b(),S("div",Mhe,p(t.$t("homeworkList.dueSoon")),1)):W("",!0),a("div",$he,[a("div",Uhe,[a("span",Fhe,p(i.getSubjectEmoji(o.subject)),1),a("span",Vhe,p(o.subject||"General"),1)]),a("span",{class:ye(["px-2 py-1 rounded-lg text-xs font-medium",{"bg-slate-100 text-slate-500":i.getStatus(o)==="pending","bg-amber-100 text-amber-600":i.getStatus(o)==="in-progress","bg-green-100 text-green-600":i.getStatus(o)==="completed"}])},p(i.statusLabel(o)),3)]),a("h3",qhe,p(i.getHomeworkTitle(o)),1),a("div",Bhe,[a("span",jhe,[e[11]||(e[11]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a("polyline",{points:"14 2 14 8 20 8"})],-1)),re(" "+p(i.getExerciseCount(o))+" "+p(t.$t("homeworkList.exercises")),1)]),o.dueDate?(b(),S("span",{key:0,class:ye(["flex items-center gap-1",i.isOverdue(o)?"text-red-500 font-medium":""])},[e[12]||(e[12]=kt('<svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fc187b72><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-fc187b72></rect><line x1="16" y1="2" x2="16" y2="6" data-v-fc187b72></line><line x1="8" y1="2" x2="8" y2="6" data-v-fc187b72></line><line x1="3" y1="10" x2="21" y2="10" data-v-fc187b72></line></svg>',1)),re(" "+p(i.formatDate(o.dueDate)),1)],2)):W("",!0)]),a("div",Hhe,[a("div",zhe,[a("span",Whe,p(t.$t("homeworkList.progress")),1),a("span",Ghe,p(i.getScore(o))+"%",1)]),a("div",Khe,[a("div",{class:ye(["h-full rounded-full transition-all duration-500",{"bg-green-500":i.getScore(o)>=80,"bg-purple-500":i.getScore(o)>=50&&i.getScore(o)<80,"bg-amber-500":i.getScore(o)>0&&i.getScore(o)<50,"bg-gray-200":i.getScore(o)===0}]),style:ct({width:i.getScore(o)+"%"})},null,6)])]),a("div",Yhe,[a("span",{class:ye(["text-sm font-medium flex items-center gap-1",i.isCompleted(o)?"text-green-500":"text-purple-500 group-hover:text-purple-600"])},[re(p(i.getButtonText(o))+" ",1),e[13]||(e[13]=a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))],2)])],8,Dhe))),128))]))]))])}const Xhe=tt(nhe,[["render",Qhe],["__scopeId","data-v-fc187b72"]]),Jhe={name:"HomeworkPage",props:{homeworkId:{type:String,required:!1,default:null},lessonId:{type:String,required:!1,default:null},homeworkType:{type:String,required:!1,default:null},title:{type:String,required:!1,default:null},subject:{type:String,required:!1,default:null}},data(){return{questions:[],homeworkTitle:"Homework",homeworkSubject:"",instructions:"",userAnswers:[],loading:!0,saving:!1,submitting:!1,error:null,errorDetails:null,isStandalone:!1,detectedHomeworkType:null,showDebug:!1,retryCount:0}},computed:{computedHomeworkId(){const t=[{name:"props.homeworkId",value:this.homeworkId},{name:"route.params.homeworkId",value:this.$route.params.homeworkId},{name:"route.params.id",value:this.$route.params.id},{name:"route.query.homeworkId",value:this.$route.query.homeworkId},{name:"url.path",value:this.extractIdFromPath()}];for(const e of t)if(e.value&&e.value!=="null"&&e.value!=="undefined")return e.value;return null},computedLessonId(){const t=[{name:"props.lessonId",value:this.lessonId},{name:"route.params.lessonId",value:this.$route.params.lessonId},{name:"route.params.id",value:this.$route.params.id},{name:"route.query.lessonId",value:this.$route.query.lessonId},{name:"url.path",value:this.extractIdFromPath()}];for(const e of t)if(e.value&&e.value!=="null"&&e.value!=="undefined")return e.value;return null},computedHomeworkType(){const t=[{name:"props.homeworkType",value:this.homeworkType},{name:"route.query.type",value:this.$route.query.type},{name:"route.query.homeworkType",value:this.$route.query.homeworkType},{name:"detected",value:this.detectedHomeworkType},{name:"url.path",value:this.extractTypeFromPath()}];for(const e of t)if(e.value)return e.value;return"unknown"},primaryId(){const t=this.computedHomeworkId,e=this.computedLessonId,s=this.computedHomeworkType;return s==="standalone"&&t?t:s==="lesson"&&e?e:t||e||null},answeredQuestions(){return this.userAnswers.filter(t=>t&&t.toString().trim()!=="").length},progressPercentage(){return this.questions.length===0?0:Math.round(this.answeredQuestions/this.questions.length*100)},canSubmit(){return this.answeredQuestions===this.questions.length&&!this.saving}},methods:{extractIdFromPath(){const e=(this.$route.path||window.location.pathname).split("/"),s=/^[a-f0-9]{24}$/i;return e.find(n=>s.test(n))||null},extractTypeFromPath(){const t=this.$route.path||window.location.pathname;return t.includes("/standalone/")?"standalone":t.includes("/lesson/")?"lesson":null},getQuestionKey(t,e){return t._id||t.id||`q-${e}`},getQuestionText(t){return t.question||t.text||t.title||"Question not found"},getQuestionInstruction(t){return t.instruction||t.instructions||t.description||""},getQuestionPoints(t){return t.points||1},isMultipleChoice(t){return t.type==="abc"||t.type==="multiple-choice"||t.options&&Array.isArray(t.options)&&t.options.length>0},getQuestionOptions(t){return t.options||[]},getOptionText(t){return typeof t=="string"?t:t.text||t.label||t.value||"Option"},getOptionValue(t){return typeof t=="string"?t:t.value||t.text||t.label||t},onAnswerChange(t,e){clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(()=>{this.answeredQuestions>0&&this.autoSave()},2e3)},async autoSave(){if(!this.saving&&this.answeredQuestions>0)try{await this.saveHomework(!0)}catch{}},async fetchHomework(){var t,e,s,r,n;try{this.loading=!0,this.error=null,this.errorDetails=null;const i=this.computedHomeworkId,o=this.computedLessonId,l=this.primaryId,c=this.computedHomeworkType;if(!l){this.error="Assignment ID not found",this.errorDetails="Check the link and try again";return}const u=pe.currentUser;if(!u)throw new Error("User not authenticated");const h=u.uid;if((c==="standalone"||!c||c==="unknown")&&l)try{const m=await mP(h,l);if(m.success&&m.data&&m.data.homework){const g=m.data.homework,v=m.data.userProgress;if(g&&(g.exercises||g.title)){this.isStandalone=!0,this.detectedHomeworkType="standalone",this.homeworkTitle=g.title||this.title||"Homework",this.homeworkSubject=g.subject||this.subject||"",this.instructions=g.instructions||"",this.questions=g.exercises||[],this.userAnswers=this.questions.map(()=>""),v&&v.answers&&this.loadUserAnswers(v.answers);return}}}catch(m){if(((t=m.response)==null?void 0:t.status)!==404&&((e=m.response)==null?void 0:e.status)>=500){this.error="Server error loading assignment",this.errorDetails=m.message;return}}try{const m=await pP(h,l);if(m.success&&m.data){const g=m.data.lessonInfo,v=m.data.questions,I=m.data.homework;if(!v||!Array.isArray(v)||v.length===0){this.error="No homework in this lesson",this.errorDetails="The assignment may not have been created yet";return}this.isStandalone=!1,this.detectedHomeworkType="lesson",this.homeworkTitle=(g==null?void 0:g.name)||`Homework: ${this.title||"Lesson"}`,this.homeworkSubject=(g==null?void 0:g.subject)||this.subject||"",this.instructions=(g==null?void 0:g.instructions)||"",this.questions=v,this.userAnswers=this.questions.map(()=>""),I&&I.answers&&this.loadUserAnswers(I.answers);return}}catch(m){((s=m.response)==null?void 0:s.status)===404?c==="standalone"?(this.error="Homework not found",this.errorDetails="It may have been deleted or not yet created"):(this.error="Lesson or homework not found",this.errorDetails="Check that the link is correct"):((r=m.response)==null?void 0:r.status)>=500?(this.error="Server error loading lesson",this.errorDetails="Try refreshing the page in a few minutes"):(this.error="Error loading homework",this.errorDetails=m.message||"Unknown error")}}catch(i){this.error="Error loading homework",this.errorDetails=i.message||"Try refreshing the page",(n=this.$toast)==null||n.error("Error loading homework")}finally{this.loading=!1}},loadUserAnswers(t){if(Array.isArray(t))for(const e of t)e.questionIndex!==void 0&&e.questionIndex>=0&&e.questionIndex<this.userAnswers.length&&(this.userAnswers[e.questionIndex]=e.userAnswer||e.answer||"");else typeof t=="object"&&Object.entries(t).forEach(([e,s])=>{const r=parseInt(e);!isNaN(r)&&r>=0&&r<this.userAnswers.length&&(this.userAnswers[r]=(s==null?void 0:s.userAnswer)||(s==null?void 0:s.answer)||s||"")})},async saveHomework(t=!1){var e,s,r,n,i,o;try{this.saving=!0;const l=pe.currentUser;if(!l)throw new Error("User not authenticated");const c=l.uid,u=this.userAnswers.map((f,m)=>({questionIndex:m,userAnswer:f||"",answer:f||""}));let h;this.isStandalone?h=await vP(c,this.primaryId,u):h=await gP(c,this.primaryId,u),t||(e=this.$toast)==null||e.success("Answers saved!")}catch(l){if(!t){let c="Failed to save answers";(r=(s=l.response)==null?void 0:s.data)!=null&&r.error?c=l.response.data.error:(i=(n=l.response)==null?void 0:n.data)!=null&&i.details?c=l.response.data.details:l.message&&(c=l.message),(o=this.$toast)==null||o.error(c)}throw l}finally{this.saving=!1}},async submitHomework(){var t,e,s,r,n,i,o,l,c,u,h,f;try{this.submitting=!0;const m=this.userAnswers.filter(A=>!A||A.toString().trim()==="");if(m.length>0){(t=this.$toast)==null||t.warning(`Please answer all questions. Remaining: ${m.length}`);return}const g=pe.currentUser;if(!g)throw new Error("User not authenticated");const v=g.uid,I=this.userAnswers.map((A,w)=>({questionIndex:w,userAnswer:A||"",answer:A||""}));let C;this.isStandalone?C=await _P(v,this.primaryId,I):C=await yP(v,this.primaryId,I);const U=((e=C.data)==null?void 0:e.data)||C.data||C,D=(U==null?void 0:U.score)||0,E=(U==null?void 0:U.stars)||0,L=(U==null?void 0:U.correctAnswers)||0,$=(U==null?void 0:U.totalQuestions)||this.questions.length;let M=` Homework completed!
`;M+=` Your score: ${D}%`,E>0&&(M+=`
 Stars: ${"".repeat(E)}`),L>0&&(M+=`
 Correct answers: ${L}/${$}`),(s=this.$toast)==null||s.success(M),setTimeout(()=>{this.$router.push("/profile/homeworks")},3e3)}catch(m){let g="Error submitting answers";((r=m.response)==null?void 0:r.status)===404?g="Assignment not found. It may have been deleted.":((n=m.response)==null?void 0:n.status)===403?g="Access denied. Check your permissions.":((i=m.response)==null?void 0:i.status)===400?g="Invalid data. Check your answers.":((o=m.response)==null?void 0:o.status)>=500?g="Server error. Try again later.":(c=(l=m.response)==null?void 0:l.data)!=null&&c.details?g=`Error: ${m.response.data.details}`:(h=(u=m.response)==null?void 0:u.data)!=null&&h.error?g=m.response.data.error:m.message&&(g=m.message),(f=this.$toast)==null||f.error(g)}finally{this.submitting=!1}},async retryFetch(){this.retryCount++,await this.fetchHomework()},getPointsText(t){return t===1?"point":"points"}},created(){console.group(" HomeworkPage Created"),console.groupEnd(),this.showDebug=this.$route.query.debug==="true"},async mounted(){this.primaryId?await this.fetchHomework():(this.loading=!1,this.error="Assignment ID not found",this.errorDetails="Check that the link is correct")},beforeUnmount(){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout)},watch:{$route(t,e){t.params!==e.params&&this.primaryId&&this.fetchHomework()},userAnswers:{handler(){this.$nextTick(()=>{})},deep:!0}}},Zhe={class:"homework-page"},efe={class:"page-header"},tfe={class:"header-content"},sfe={class:"header-info"},rfe={class:"page-title"},nfe={key:0,class:"subject-text"},ife={key:0,class:"debug-section"},ofe={class:"debug-grid"},afe={key:1,class:"loading-state"},lfe={key:2,class:"error-state"},cfe={key:0},ufe={class:"error-actions"},dfe={key:3,class:"empty-state"},hfe={key:4,class:"content-container"},ffe={key:0,class:"instructions-card"},pfe={class:"card-header"},mfe={class:"instructions-text"},gfe={class:"stats-grid"},yfe={class:"stat-card"},vfe={class:"stat-content"},_fe={class:"stat-label"},bfe={class:"stat-value"},wfe={class:"stat-card"},Sfe={class:"stat-content"},Efe={class:"stat-label"},Tfe={class:"stat-value"},kfe={class:"stat-card"},Ife={class:"stat-content"},Cfe={class:"stat-label"},Afe={class:"stat-value"},Pfe={class:"progress-card"},xfe={class:"progress-header"},Lfe={class:"progress-label"},Rfe={class:"progress-percentage"},Nfe={class:"progress-bar-container"},Ofe={class:"question-header"},Dfe={class:"question-number"},Mfe={class:"question-content"},$fe={class:"question-text"},Ufe={key:0,class:"question-instruction"},Ffe={key:0,class:"points-badge"},Vfe={key:0,class:"options-list"},qfe=["name","value","onUpdate:modelValue","onChange"],Bfe={class:"option-content"},jfe={class:"option-text"},Hfe={key:1,class:"text-answer"},zfe=["onUpdate:modelValue","onInput","placeholder"],Wfe={class:"answer-meta"},Gfe={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Kfe={key:1},Yfe={key:2},Qfe={class:"form-actions"},Xfe=["disabled"],Jfe={key:0,class:"button-content"},Zfe={key:1,class:"button-content"},epe=["disabled"],tpe={key:0,class:"button-content"},spe={key:1,class:"button-content"},rpe={class:"helper-text"},npe={key:0},ipe={key:1};function ope(t,e,s,r,n,i){const o=es("router-link");return b(),S("div",Zhe,[a("div",efe,[a("div",tfe,[xe(o,{to:"/profile/homeworks",class:"back-button"},{default:Qt(()=>[e[3]||(e[3]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15 18 9 12 15 6"})],-1)),re(" "+p(t.$t("homework.back")),1)]),_:1}),a("div",sfe,[a("h1",rfe,p(n.homeworkTitle),1),n.homeworkSubject?(b(),S("p",nfe,p(n.homeworkSubject),1)):W("",!0)])])]),n.showDebug?(b(),S("div",ife,[e[10]||(e[10]=a("h4",null," Debug Info",-1)),a("div",ofe,[a("div",null,[e[4]||(e[4]=a("strong",null,"Route params:",-1)),re(" "+p(JSON.stringify(t.$route.params)),1)]),a("div",null,[e[5]||(e[5]=a("strong",null,"Query params:",-1)),re(" "+p(JSON.stringify(t.$route.query)),1)]),a("div",null,[e[6]||(e[6]=a("strong",null,"Detected ID:",-1)),re(" "+p(i.primaryId),1)]),a("div",null,[e[7]||(e[7]=a("strong",null,"Detected Type:",-1)),re(" "+p(i.computedHomeworkType),1)]),a("div",null,[e[8]||(e[8]=a("strong",null,"Is Standalone:",-1)),re(" "+p(n.isStandalone),1)]),a("div",null,[e[9]||(e[9]=a("strong",null,"Questions:",-1)),re(" "+p(n.questions.length),1)])])])):W("",!0),n.loading?(b(),S("div",afe,[e[11]||(e[11]=a("div",{class:"spinner"},null,-1)),a("p",null,p(t.$t("homework.loading")),1)])):n.error?(b(),S("div",lfe,[e[13]||(e[13]=a("svg",{class:"error-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),a("h3",null,p(n.error),1),n.errorDetails?(b(),S("p",cfe,p(n.errorDetails),1)):W("",!0),a("div",ufe,[a("button",{onClick:e[0]||(e[0]=(...l)=>i.retryFetch&&i.retryFetch(...l)),class:"action-button secondary"},[e[12]||(e[12]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)),re(" "+p(t.$t("homework.tryAgain")),1)]),xe(o,{to:"/profile/homeworks",class:"action-button primary"},{default:Qt(()=>[re(p(t.$t("homework.backToList")),1)]),_:1})])])):n.questions.length===0&&!n.loading?(b(),S("div",dfe,[e[14]||(e[14]=kt('<svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0ee40f5a><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-0ee40f5a></path><polyline points="14 2 14 8 20 8" data-v-0ee40f5a></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-0ee40f5a></line><line x1="16" y1="17" x2="8" y2="17" data-v-0ee40f5a></line><polyline points="10 9 9 9 8 9" data-v-0ee40f5a></polyline></svg>',1)),a("h3",null,p(t.$t("homework.noQuestions")),1),a("p",null,p(t.$t("homework.contactTeacher")),1),xe(o,{to:"/profile/homeworks",class:"action-button primary"},{default:Qt(()=>[re(p(t.$t("homework.backToList")),1)]),_:1})])):(b(),S("div",hfe,[n.instructions?(b(),S("div",ffe,[a("div",pfe,[e[15]||(e[15]=kt('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0ee40f5a><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-0ee40f5a></path><polyline points="14 2 14 8 20 8" data-v-0ee40f5a></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-0ee40f5a></line><line x1="16" y1="17" x2="8" y2="17" data-v-0ee40f5a></line></svg>',1)),a("h3",null,p(t.$t("homework.instructions")),1)]),a("p",mfe,p(n.instructions),1)])):W("",!0),a("div",gfe,[a("div",yfe,[e[16]||(e[16]=a("div",{class:"stat-icon purple"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a("polyline",{points:"14 2 14 8 20 8"})])],-1)),a("div",vfe,[a("div",_fe,p(t.$t("homework.assignmentType")),1),a("div",bfe,p(n.isStandalone?t.$t("homework.standalone"):t.$t("homework.lesson")),1)])]),a("div",wfe,[e[17]||(e[17]=kt('<div class="stat-icon blue" data-v-0ee40f5a><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0ee40f5a><circle cx="12" cy="12" r="10" data-v-0ee40f5a></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-0ee40f5a></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-0ee40f5a></line></svg></div>',1)),a("div",Sfe,[a("div",Efe,p(t.$t("homework.totalQuestions")),1),a("div",Tfe,p(n.questions.length),1)])]),a("div",kfe,[e[18]||(e[18]=a("div",{class:"stat-icon green"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("div",Ife,[a("div",Cfe,p(t.$t("homework.answered")),1),a("div",Afe,p(i.answeredQuestions)+"/"+p(n.questions.length),1)])])]),a("div",Pfe,[a("div",xfe,[a("span",Lfe,p(t.$t("homework.completionProgress")),1),a("span",Rfe,p(i.progressPercentage)+"%",1)]),a("div",Nfe,[a("div",{class:ye(["progress-bar-fill",{complete:i.progressPercentage===100}]),style:ct({width:i.progressPercentage+"%"})},null,6)])]),a("form",{onSubmit:e[2]||(e[2]=gt((...l)=>i.submitHomework&&i.submitHomework(...l),["prevent"])),class:"questions-form"},[(b(!0),S(he,null,be(n.questions,(l,c)=>(b(),S("div",{key:i.getQuestionKey(l,c),class:"question-card"},[a("div",Ofe,[a("div",Dfe,p(c+1),1),a("div",Mfe,[a("h4",$fe,p(i.getQuestionText(l)),1),i.getQuestionInstruction(l)?(b(),S("p",Ufe,p(i.getQuestionInstruction(l)),1)):W("",!0)]),i.getQuestionPoints(l)>1?(b(),S("div",Ffe,p(i.getQuestionPoints(l))+" "+p(i.getPointsText(i.getQuestionPoints(l))),1)):W("",!0)]),i.isMultipleChoice(l)?(b(),S("div",Vfe,[(b(!0),S(he,null,be(i.getQuestionOptions(l),(u,h)=>(b(),S("label",{key:h,class:ye(["option-item",{selected:n.userAnswers[c]===i.getOptionValue(u)}])},[Pe(a("input",{type:"radio",name:"q"+c,value:i.getOptionValue(u),"onUpdate:modelValue":f=>n.userAnswers[c]=f,onChange:f=>i.onAnswerChange(c,i.getOptionValue(u)),class:"option-radio"},null,40,qfe),[[wn,n.userAnswers[c]]]),a("div",Bfe,[e[19]||(e[19]=a("div",{class:"option-indicator"},null,-1)),a("span",jfe,p(i.getOptionText(u)),1)])],2))),128))])):(b(),S("div",Hfe,[Pe(a("textarea",{"onUpdate:modelValue":u=>n.userAnswers[c]=u,onInput:u=>i.onAnswerChange(c,n.userAnswers[c]),placeholder:t.$t("homework.answerPlaceholder",{number:c+1}),rows:"4",class:"answer-textarea"},null,40,zfe),[[Ge,n.userAnswers[c]]]),a("div",Wfe,[n.userAnswers[c]?(b(),S("svg",Gfe,e[20]||(e[20]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):W("",!0),n.userAnswers[c]?(b(),S("span",Kfe,p(t.$t("homework.answerAdded")),1)):(b(),S("span",Yfe,p(t.$t("homework.awaitingAnswer")),1))])]))]))),128)),a("div",Qfe,[a("button",{type:"button",onClick:e[1]||(e[1]=(...l)=>i.saveHomework&&i.saveHomework(...l)),class:"action-button secondary",disabled:n.saving||i.answeredQuestions===0},[n.saving?(b(),S("span",Jfe,[e[21]||(e[21]=a("div",{class:"button-spinner"},null,-1)),re(" "+p(t.$t("homework.saving")),1)])):(b(),S("span",Zfe,[e[22]||(e[22]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),a("polyline",{points:"17 21 17 13 7 13 7 21"}),a("polyline",{points:"7 3 7 8 15 8"})],-1)),re(" "+p(t.$t("homework.saveDraft")),1)]))],8,Xfe),a("button",{type:"submit",class:"action-button primary",disabled:n.submitting||!i.canSubmit},[n.submitting?(b(),S("span",tpe,[e[23]||(e[23]=a("div",{class:"button-spinner"},null,-1)),re(" "+p(t.$t("homework.submitting")),1)])):(b(),S("span",spe,[e[24]||(e[24]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1)),re(" "+p(t.$t("homework.completeAssignment")),1)]))],8,epe)]),a("div",rpe,[e[25]||(e[25]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),i.canSubmit?(b(),S("span",npe,p(t.$t("homework.allAnswered")),1)):(b(),S("span",ipe,p(t.$t("homework.answerAllQuestions")),1))])],32)]))])}const ape=tt(Jhe,[["render",ope],["__scopeId","data-v-0ee40f5a"]]),Nu=void 0,lpe={name:"DiaryPage",data(){return{today:"",lessons:[],userProgress:{},lessonsToday:[],lessonsTomorrow:[],gradesThisWeek:[],completedToday:[],studyMinutes:0,diarySaved:!1,diaryLogs:[],loading:!0,saving:!1,error:"",timer:null,analytics:{totalStars:0,totalPoints:0,hintsUsed:0},saveMessage:"",saveMessageType:"success",toastMessage:"",toastType:"success"}},computed:{...zg(["firebaseUserId"]),progressPercent(){const t=this.completedToday.length+this.lessonsToday.length;return t>0?Math.round(this.completedToday.length/t*100):0},recentDiaryLogs(){return[...this.diaryLogs].sort((t,e)=>new Date(e.date)-new Date(t.date)).slice(0,7)}},mounted(){this.today=new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}),this.startTimer(),this.fetchData()},beforeUnmount(){this.timer&&clearInterval(this.timer)},methods:{startTimer(){this.timer=setInterval(()=>{this.studyMinutes++},6e4)},async fetchData(){var e,s,r,n;const t=this.firebaseUserId;if(!t){this.error="  . ,   .",this.loading=!1;return}try{this.loading=!0,this.error="";const i=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!i)throw new Error("    ");const o={Authorization:`Bearer ${i}`},l=[ut.get(`${Nu}/lessons`,{headers:o}).catch(f=>({data:[]})),ut.get(`${Nu}/users/${t}`,{headers:o}).catch(f=>({data:{progress:{},diary:[]}})),ut.get(`${Nu}/users/${t}/analytics`,{headers:o}).catch(f=>({data:{}}))],[c,u,h]=await Promise.all(l);this.lessons=c.data||[],this.userProgress=((s=u.data)==null?void 0:s.progress)||{},this.diaryLogs=((r=u.data)==null?void 0:r.diary)||[],this.analytics=((n=h.data)==null?void 0:n.data)||h.data||{},this.calculateToday(),this.showToast("  ","success")}catch(i){this.error=this.getErrorMessage(i),this.showToast("  ","error")}finally{this.loading=!1}},getErrorMessage(t){var e,s;if(t.response){const r=t.response.status,n=((e=t.response.data)==null?void 0:e.message)||((s=t.response.data)==null?void 0:s.error);switch(r){case 401:return" . ,    .";case 403:return"   .   .";case 404:return"  . ,   .";case 500:return" .  .";default:return n||` ${r}.   .`}}else return t.request?"    .  -.":t.message||"  ."},calculateToday(){const t=["explanation","examples","exercises","quiz"],e=[],s=[],r=[],n=[];this.lessons.forEach(i=>{const o=this.userProgress[i._id]||{},l=t.filter(u=>o[u]).length,c=Math.round(l/t.length*100);l===t.length?(r.push(`${i.topic} (${i.subject})`),n.push({lessonId:i._id,subject:i.subject,topic:i.topic,score:100})):l>0&&n.push({lessonId:i._id,subject:i.subject,topic:i.topic,score:c}),!o.explanation&&!o.examples&&!o.exercises&&!o.quiz?s.push(i):e.length<3&&l<t.length&&e.push(i)}),this.completedToday=r,this.lessonsToday=e,this.lessonsTomorrow=s.slice(0,3),this.gradesThisWeek=n},async saveDiary(){var e,s,r;const t=this.firebaseUserId;if(!t){this.showToast("  ","error");return}try{this.saving=!0,this.saveMessage="";const n=await((e=pe.currentUser)==null?void 0:e.getIdToken());if(!n)throw new Error("    ");const i={date:new Date().toISOString(),studyMinutes:this.studyMinutes,completedTopics:this.completedToday,averageGrade:this.gradesThisWeek.length>0?Math.round(this.gradesThisWeek.reduce((l,c)=>l+c.score,0)/this.gradesThisWeek.length):0,gradesToday:this.gradesThisWeek,stars:this.analytics.totalStars||0,mistakes:0},o=await ut.post(`${Nu}/users/${t}/diary`,i,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});this.diarySaved=!0,this.saveMessage="  !",this.saveMessageType="success",this.showToast("   !","success"),(r=(s=o.data)==null?void 0:s.data)!=null&&r.diary&&(this.diaryLogs=o.data.data.diary)}catch(n){const i=this.getErrorMessage(n);this.saveMessage=i,this.saveMessageType="error",this.showToast("  ","error")}finally{this.saving=!1,setTimeout(()=>{this.saveMessage=""},5e3)}},async exportDiary(){try{const t=JSON.stringify(this.diaryLogs,null,2),e="data:application/json;charset=utf-8,"+encodeURIComponent(t),s=`diary_${new Date().toISOString().split("T")[0]}.json`,r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",s),r.click(),this.showToast(" ","success")}catch{this.showToast(" ","error")}},formatDate(t){return new Date(t).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})},getGradeClass(t){return t>=90?"excellent":t>=80?"good":t>=70?"satisfactory":"poor"},getStreakDays(){if(!this.diaryLogs||this.diaryLogs.length===0)return 0;const t=this.diaryLogs.filter(n=>n.date).sort((n,i)=>new Date(i.date)-new Date(n.date));let e=0;const s=new Date;let r=new Date(s);r.setHours(0,0,0,0);for(const n of t){const i=new Date(n.date);i.setHours(0,0,0,0);const o=Math.floor((r-i)/(1e3*60*60*24));if(o===0||o===1)e++,r=new Date(i);else break}return e},getAverageTime(){if(!this.diaryLogs||this.diaryLogs.length===0)return"0";const t=this.diaryLogs.reduce((s,r)=>s+(r.studyMinutes||0),0),e=Math.round(t/this.diaryLogs.length);if(e>=60){const s=Math.floor(e/60),r=e%60;return r>0?`${s} ${r}`:`${s}`}return`${e}`},showToast(t,e="success"){this.toastMessage=t,this.toastType=e,setTimeout(()=>{this.toastMessage=""},3e3)}}},cpe={class:"diary-page"},upe={class:"diary-header"},dpe={class:"header-content"},hpe={class:"page-subtitle"},fpe={key:0,class:"loading-container"},ppe={key:1,class:"error-container"},mpe={class:"error-message"},gpe={key:2,class:"main-content"},ype={class:"today-summary"},vpe={class:"summary-header"},_pe={class:"today-date"},bpe={class:"summary-grid"},wpe={class:"summary-card primary"},Spe={class:"card-content"},Epe={class:"card-value"},Tpe={class:"card-progress"},kpe={class:"progress-bar"},Ipe={class:"summary-card success"},Cpe={class:"card-content"},Ape={class:"card-value"},Ppe={key:0,class:"card-trend"},xpe={class:"summary-card warning"},Lpe={class:"card-content"},Rpe={class:"card-value"},Npe={class:"progress-circle"},Ope={viewBox:"0 0 36 36",class:"circular-chart"},Dpe=["stroke-dasharray"],Mpe={x:"18",y:"20.35",class:"percentage"},$pe={class:"summary-card info"},Upe={class:"card-content"},Fpe={class:"card-value"},Vpe={class:"stars-display"},qpe={class:"study-cards"},Bpe={class:"cards-grid"},jpe={class:"study-card"},Hpe={class:"card-header"},zpe={class:"card-badge"},Wpe={class:"card-body"},Gpe={key:0,class:"lessons-list"},Kpe={class:"lesson-info"},Ype={class:"lesson-subject"},Qpe={class:"lesson-topic"},Xpe={key:1,class:"empty-state"},Jpe={class:"study-card"},Zpe={class:"card-header"},eme={class:"card-badge secondary"},tme={class:"card-body"},sme={key:0,class:"lessons-list"},rme={class:"lesson-info"},nme={class:"lesson-subject"},ime={class:"lesson-topic"},ome={key:1,class:"empty-state"},ame={class:"study-card"},lme={class:"card-header"},cme={class:"card-badge success"},ume={class:"card-body"},dme={key:0,class:"grades-list"},hme={class:"grade-info"},fme={class:"grade-subject"},pme={class:"grade-topic"},mme={key:1,class:"empty-state"},gme={class:"study-card analytics"},yme={class:"card-body"},vme={class:"analytics-grid"},_me={class:"analytics-item"},bme={class:"analytics-content"},wme={class:"analytics-value"},Sme={class:"analytics-item"},Eme={class:"analytics-content"},Tme={class:"analytics-value"},kme={class:"analytics-item"},Ime={class:"analytics-content"},Cme={class:"analytics-value"},Ame={class:"analytics-item"},Pme={class:"analytics-content"},xme={class:"analytics-value"},Lme={class:"action-section"},Rme={class:"action-buttons"},Nme=["disabled"],Ome={class:"button-icon"},Dme={class:"button-text"},Mme={class:"message-icon"},$me={class:"message-text"},Ume={key:0,class:"diary-history"},Fme={class:"section-header"},Vme={class:"history-stats"},qme={class:"history-timeline"},Bme={class:"timeline-marker"},jme={key:0,class:"marker-line"},Hme={class:"timeline-content"},zme={class:"timeline-header"},Wme={class:"timeline-date"},Gme={class:"timeline-badges"},Kme={key:0,class:"badge success"},Yme={key:1,class:"badge info"},Qme={class:"timeline-stats"},Xme={class:"stat-item"},Jme={class:"stat-text"},Zme={key:0,class:"stat-item"},ege={class:"stat-text"},tge={key:1,class:"stat-item"},sge={class:"stat-text"},rge={key:0,class:"timeline-details"},nge={key:0,class:"details-section"},ige={class:"topics-tags"},oge={key:0,class:"topic-tag more"},age={key:1,class:"details-section"},lge={class:"grades-list"},cge={class:"grade-subject"},uge={class:"toast-icon"},dge={class:"toast-text"};function hge(t,e,s,r,n,i){return b(),S("div",cpe,[a("header",upe,[a("div",dpe,[e[4]||(e[4]=a("div",{class:"header-icon"},"",-1)),e[5]||(e[5]=a("h1",{class:"page-title"}," ",-1)),a("p",hpe,p(n.today),1),e[6]||(e[6]=a("div",{class:"header-decoration"},null,-1))])]),n.loading?(b(),S("div",fpe,e[7]||(e[7]=[kt('<div class="loading-spinner" data-v-aeeaee05><div class="spinner-ring" data-v-aeeaee05></div><div class="spinner-ring" data-v-aeeaee05></div><div class="spinner-ring" data-v-aeeaee05></div></div><p class="loading-text" data-v-aeeaee05>  ...</p>',2)]))):n.error?(b(),S("div",ppe,[e[9]||(e[9]=a("div",{class:"error-icon"},"",-1)),e[10]||(e[10]=a("h3",{class:"error-title"}," ",-1)),a("p",mpe,p(n.error),1),a("button",{onClick:e[0]||(e[0]=(...o)=>i.fetchData&&i.fetchData(...o)),class:"retry-button"},e[8]||(e[8]=[a("span",{class:"button-icon"},"",-1),re("   ")]))])):(b(),S("div",gpe,[a("section",ype,[a("div",vpe,[e[11]||(e[11]=a("h2",{class:"section-title"},"",-1)),a("div",_pe,p(i.formatDate(new Date)),1)]),a("div",bpe,[a("div",wpe,[e[14]||(e[14]=a("div",{class:"card-icon"},"",-1)),a("div",Spe,[a("div",Epe,p(n.studyMinutes),1),e[13]||(e[13]=a("div",{class:"card-label"}," ",-1)),a("div",Tpe,[a("div",kpe,[a("div",{class:"progress-fill",style:ct({width:Math.min(n.studyMinutes/60*100,100)+"%"})},null,4)]),e[12]||(e[12]=a("span",{class:"progress-text"},": 60 ",-1))])])]),a("div",Ipe,[e[17]||(e[17]=a("div",{class:"card-icon"},"",-1)),a("div",Cpe,[a("div",Ape,p(n.completedToday.length),1),e[16]||(e[16]=a("div",{class:"card-label"}," ",-1)),n.completedToday.length>0?(b(),S("div",Ppe,e[15]||(e[15]=[a("span",{class:"trend-icon"},"",-1),a("span",{class:"trend-text"}," !",-1)]))):W("",!0)])]),a("div",xpe,[e[20]||(e[20]=a("div",{class:"card-icon"},"",-1)),a("div",Lpe,[a("div",Rpe,p(i.progressPercent)+"%",1),e[19]||(e[19]=a("div",{class:"card-label"}," ",-1)),a("div",Npe,[(b(),S("svg",Ope,[e[18]||(e[18]=a("path",{class:"circle-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,-1)),a("path",{class:"circle","stroke-dasharray":`${i.progressPercent}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,8,Dpe),a("text",Mpe,p(i.progressPercent)+"%",1)]))])])]),a("div",$pe,[e[22]||(e[22]=a("div",{class:"card-icon"},"",-1)),a("div",Upe,[a("div",Fpe,p(n.analytics.totalStars||0),1),e[21]||(e[21]=a("div",{class:"card-label"}," ",-1)),a("div",Vpe,[(b(!0),S(he,null,be(Math.min(n.analytics.totalStars||0,5),o=>(b(),S("span",{key:o,class:"star active"},""))),128)),(b(!0),S(he,null,be(Math.max(0,5-(n.analytics.totalStars||0)),o=>(b(),S("span",{key:`empty-${o}`,class:"star"},""))),128))])])])])]),a("section",qpe,[a("div",Bpe,[a("div",jpe,[a("div",Hpe,[e[23]||(e[23]=a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),re("    ")],-1)),a("div",zpe,p(n.lessonsToday.length),1)]),a("div",Wpe,[n.lessonsToday.length>0?(b(),S("div",Gpe,[(b(!0),S(he,null,be(n.lessonsToday,o=>(b(),S("div",{key:o._id,class:"lesson-item"},[a("div",Kpe,[a("div",Ype,p(o.subject),1),a("div",Qpe,p(o.topic),1)]),e[24]||(e[24]=a("div",{class:"lesson-status"},[a("span",{class:"status-dot pending"})],-1))]))),128))])):(b(),S("div",Xpe,e[25]||(e[25]=[a("div",{class:"empty-icon"},"",-1),a("p",{class:"empty-text"},"    !",-1)])))])]),a("div",Jpe,[a("div",Zpe,[e[26]||(e[26]=a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),re("    ")],-1)),a("div",eme,p(n.lessonsTomorrow.length),1)]),a("div",tme,[n.lessonsTomorrow.length>0?(b(),S("div",sme,[(b(!0),S(he,null,be(n.lessonsTomorrow,o=>(b(),S("div",{key:o._id,class:"lesson-item"},[a("div",rme,[a("div",nme,p(o.subject),1),a("div",ime,p(o.topic),1)]),e[27]||(e[27]=a("div",{class:"lesson-status"},[a("span",{class:"status-dot scheduled"})],-1))]))),128))])):(b(),S("div",ome,e[28]||(e[28]=[a("div",{class:"empty-icon"},"",-1),a("p",{class:"empty-text"},"   !",-1)])))])]),a("div",ame,[a("div",lme,[e[29]||(e[29]=a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),re("    ")],-1)),a("div",cme,p(n.gradesThisWeek.length),1)]),a("div",ume,[n.gradesThisWeek.length>0?(b(),S("div",dme,[(b(!0),S(he,null,be(n.gradesThisWeek,o=>(b(),S("div",{key:o.lessonId,class:"grade-item"},[a("div",hme,[a("div",fme,p(o.subject),1),a("div",pme,p(o.topic),1)]),a("div",{class:ye(["grade-score",i.getGradeClass(o.score)])},p(o.score)+"% ",3)]))),128))])):(b(),S("div",mme,e[30]||(e[30]=[a("div",{class:"empty-icon"},"",-1),a("p",{class:"empty-text"},"     ",-1)])))])]),a("div",gme,[e[39]||(e[39]=a("div",{class:"card-header"},[a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),re("  ")])],-1)),a("div",yme,[a("div",vme,[a("div",_me,[e[32]||(e[32]=a("div",{class:"analytics-icon"},"",-1)),a("div",bme,[a("div",wme,p(n.analytics.totalPoints||0),1),e[31]||(e[31]=a("div",{class:"analytics-label"},"",-1))])]),a("div",Sme,[e[34]||(e[34]=a("div",{class:"analytics-icon"},"",-1)),a("div",Eme,[a("div",Tme,p(n.analytics.hintsUsed||0),1),e[33]||(e[33]=a("div",{class:"analytics-label"},"",-1))])]),a("div",kme,[e[36]||(e[36]=a("div",{class:"analytics-icon"},"",-1)),a("div",Ime,[a("div",Cme,p(i.getStreakDays()),1),e[35]||(e[35]=a("div",{class:"analytics-label"}," ",-1))])]),a("div",Ame,[e[38]||(e[38]=a("div",{class:"analytics-icon"},"",-1)),a("div",Pme,[a("div",xme,p(i.getAverageTime()),1),e[37]||(e[37]=a("div",{class:"analytics-label"}," ",-1))])])])])])])]),a("section",Lme,[a("div",Rme,[a("button",{class:ye(["action-button primary",{saved:n.diarySaved,saving:n.saving}]),onClick:e[1]||(e[1]=(...o)=>i.saveDiary&&i.saveDiary(...o)),disabled:n.diarySaved||n.saving},[a("span",Ome,p(n.saving?"":n.diarySaved?"":""),1),a("span",Dme,p(n.saving?"...":n.diarySaved?"!":" "),1)],10,Nme),a("button",{class:"action-button secondary",onClick:e[2]||(e[2]=(...o)=>i.exportDiary&&i.exportDiary(...o))},e[40]||(e[40]=[a("span",{class:"button-icon"},"",-1),a("span",{class:"button-text"},"",-1)]))]),n.saveMessage?(b(),S("div",{key:0,class:ye(["save-message",n.saveMessageType])},[a("div",Mme,p(n.saveMessageType==="success"?"":n.saveMessageType==="error"?"":""),1),a("span",$me,p(n.saveMessage),1)],2)):W("",!0)]),i.recentDiaryLogs.length>0?(b(),S("section",Ume,[a("div",Fme,[e[41]||(e[41]=a("h2",{class:"section-title"},[a("span",{class:"title-icon"},""),re("   ")],-1)),a("div",Vme,p(i.recentDiaryLogs.length)+"  ",1)]),a("div",qme,[(b(!0),S(he,null,be(i.recentDiaryLogs,(o,l)=>{var c,u,h,f,m,g,v;return b(),S("div",{key:o.date,class:ye(["timeline-item",{latest:l===0}])},[a("div",Bme,[e[42]||(e[42]=a("div",{class:"marker-dot"},null,-1)),l<i.recentDiaryLogs.length-1?(b(),S("div",jme)):W("",!0)]),a("div",Hme,[a("div",zme,[a("h4",Wme,p(i.formatDate(o.date)),1),a("div",Gme,[o.studyMinutes>60?(b(),S("span",Kme," ")):W("",!0),((c=o.completedTopics)==null?void 0:c.length)>3?(b(),S("span",Yme,"")):W("",!0)])]),a("div",Qme,[a("div",Xme,[e[43]||(e[43]=a("span",{class:"stat-icon"},"",-1)),a("span",Jme,p(o.studyMinutes)+" ",1)]),(u=o.completedTopics)!=null&&u.length?(b(),S("div",Zme,[e[44]||(e[44]=a("span",{class:"stat-icon"},"",-1)),a("span",ege,p(o.completedTopics.length)+" ",1)])):W("",!0),(h=o.gradesToday)!=null&&h.length?(b(),S("div",tge,[e[45]||(e[45]=a("span",{class:"stat-icon"},"",-1)),a("span",sge,p(o.gradesToday.length)+" ",1)])):W("",!0)]),(f=o.completedTopics)!=null&&f.length||(m=o.gradesToday)!=null&&m.length?(b(),S("div",rge,[(g=o.completedTopics)!=null&&g.length?(b(),S("div",nge,[e[46]||(e[46]=a("h5",{class:"details-title"}," :",-1)),a("div",ige,[(b(!0),S(he,null,be(o.completedTopics.slice(0,3),I=>(b(),S("span",{key:I,class:"topic-tag"},p(I),1))),128)),o.completedTopics.length>3?(b(),S("span",oge," +"+p(o.completedTopics.length-3),1)):W("",!0)])])):W("",!0),(v=o.gradesToday)!=null&&v.length?(b(),S("div",age,[e[47]||(e[47]=a("h5",{class:"details-title"},":",-1)),a("div",lge,[(b(!0),S(he,null,be(o.gradesToday.slice(0,3),I=>(b(),S("div",{key:I.topic,class:"grade-item"},[a("span",cge,p(I.subject),1),a("span",{class:ye(["grade-score",i.getGradeClass(I.score)])},p(I.score)+"% ",3)]))),128))])])):W("",!0)])):W("",!0)])],2)}),128))])])):W("",!0)])),n.toastMessage?(b(),S("div",{key:3,class:ye(["toast",n.toastType])},[a("div",uge,p(n.toastType==="success"?"":n.toastType==="error"?"":""),1),a("span",dge,p(n.toastMessage),1),a("button",{onClick:e[3]||(e[3]=o=>n.toastMessage=""),class:"toast-close"},"")],2)):W("",!0)])}const fge=tt(lpe,[["render",hge],["__scopeId","data-v-aeeaee05"]]),pge={name:"TestsPage",setup(){const t=Se(!0),e=Se([]),s=Se(null),r=Se([]),n=Se(0),i=Se(""),o=Se(""),l=Se(""),c=Se(null),u=_e(()=>[...new Set(e.value.map(R=>R.subject).filter(Boolean))].sort()),h=_e(()=>[...new Set(e.value.map(R=>R.level).filter(Boolean))].sort((R,x)=>R-x)),f=_e(()=>e.value.filter(R=>{var de;const x=!o.value||R.subject===o.value,N=!l.value||R.level==l.value,ue=!i.value||((de=R.title)==null?void 0:de.toLowerCase().includes(i.value.toLowerCase()));return x&&N&&ue})),m=_e(()=>{var R;return(R=s.value)!=null&&R.questions?s.value.questions[n.value]:null}),g=_e(()=>{var R,x;return Math.round((n.value+1)/(((x=(R=s.value)==null?void 0:R.questions)==null?void 0:x.length)||1)*100)}),v=_e(()=>{var R,x;return n.value===(((x=(R=s.value)==null?void 0:R.questions)==null?void 0:x.length)||0)-1}),I=_e(()=>{var R;return s.value&&n.value>=((R=s.value.questions)==null?void 0:R.length)}),C=_e(()=>{var R;return(R=s.value)!=null&&R.questions?s.value.questions.reduce((x,N,ue)=>{const de=r.value[ue],ce=P(N,de);return x+(ce?1:0)},0):0}),U=_e(()=>{var R,x;return(x=(R=s.value)==null?void 0:R.questions)!=null&&x.length?Math.round(C.value/s.value.questions.length*100):0}),D=_e(()=>!!(i.value||o.value||l.value)),E=R=>({Mathematics:"",Math:"",English:"",Language:"",Science:"",Physics:"",Chemistry:"",Biology:"",History:"",Geography:"","Computer Science":"",Programming:"",Art:"",Music:""})[R]||"",L=async()=>{try{t.value=!0;const R=pe.currentUser;if(!R)throw new Error("Not authenticated");const x=await R.getIdToken(),N=R.uid;let ue=[];try{const{data:de}=await ae.get(`/users/${N}/tests`,{headers:{Authorization:`Bearer ${x}`}});ue=(de==null?void 0:de.tests)||[]}catch{const{data:de}=await ae.get("/tests",{headers:{Authorization:`Bearer ${x}`}});ue=Array.isArray((de==null?void 0:de.data)||de)?(de==null?void 0:de.data)||de:[]}e.value=ue.filter(de=>de.isActive!==!1)}catch(R){c.value=R.message}finally{t.value=!1}},$=async R=>{var x;if(R)try{t.value=!0;const N=pe.currentUser;if(!N)throw new Error("Not authenticated");const ue=await N.getIdToken(),de=N.uid;let ce;try{const{data:te}=await ae.get(`/users/${de}/tests/${R._id}`,{headers:{Authorization:`Bearer ${ue}`}});ce=(te==null?void 0:te.test)||(te==null?void 0:te.data)||te}catch{const{data:te}=await ae.get(`/tests/${R._id}`,{headers:{Authorization:`Bearer ${ue}`}});ce=(te==null?void 0:te.data)||te}if(!((x=ce==null?void 0:ce.questions)!=null&&x.length))throw new Error("No questions");s.value={...ce,questions:ce.questions.map(te=>({...te,text:te.text||te.question,type:te.type||"multiple-choice",options:te.options||[],correctAnswer:te.correctAnswer}))},r.value=Array(s.value.questions.length).fill(""),n.value=0}catch(N){c.value=N.message,s.value=null}finally{t.value=!1}},M=()=>{const R=r.value[n.value];!R||R.trim()===""||(n.value+1<s.value.questions.length?n.value++:Po(()=>A()))},A=async()=>{try{const R=pe.currentUser;if(!R)return;const x=await R.getIdToken(),N=r.value.map((ue,de)=>({questionIndex:de,answer:ue}));try{await ae.post(`/users/${R.uid}/tests/${s.value._id}/submit`,{answers:N},{headers:{Authorization:`Bearer ${x}`}})}catch{await ae.post(`/tests/${s.value._id}/submit`,{userId:R.uid,answers:N},{headers:{Authorization:`Bearer ${x}`}})}n.value=s.value.questions.length}catch(R){console.error(R)}},w=()=>{s.value=null,r.value=[],n.value=0},_=()=>{o.value="",l.value="",i.value=""},P=(R,x)=>{var ue;if(!x)return!1;const N=R.correctAnswer;return R.type==="multiple-choice"&&Array.isArray(R.options)?typeof N=="number"?x===(((ue=R.options[N])==null?void 0:ue.text)||R.options[N]):x===N:x.toString().toLowerCase().trim()===N.toString().toLowerCase().trim()};return br(()=>L()),Rc(()=>{s.value=null,r.value=[]}),{loading:t,tests:e,activeTest:s,userAnswers:r,currentQuestionIndex:n,searchQuery:i,selectedSubject:o,selectedLevel:l,error:c,uniqueSubjects:u,uniqueLevels:h,filteredTests:f,currentQuestion:m,progressPercentage:g,isLastQuestion:v,isTestCompleted:I,correctCount:C,score:U,hasActiveFilters:D,getSubjectEmoji:E,handleStartTest:$,handleNextQuestion:M,handleGoBack:w,clearFilters:_}}},mge={class:"min-h-screen bg-white"},gge={class:"max-w-6xl mx-auto px-6 pt-8 pb-6"},yge={class:"flex items-center justify-between"},vge={class:"flex items-center gap-4"},_ge={class:"text-2xl font-bold text-slate-800"},bge={class:"text-slate-500 text-sm"},wge={class:"hidden md:flex items-center gap-3"},Sge={class:"px-4 py-2 rounded-full bg-blue-50 text-blue-600 text-sm font-medium"},Ege={class:"px-4 py-2 rounded-full bg-purple-50 text-purple-600 text-sm font-medium"},Tge={key:0,class:"max-w-6xl mx-auto px-6 pb-6"},kge={class:"flex flex-wrap items-center gap-3"},Ige={class:"relative flex-1 min-w-64"},Cge=["placeholder"],Age={value:""},Pge=["value"],xge={value:""},Lge=["value"],Rge={key:1,class:"flex flex-col items-center justify-center py-24"},Nge={class:"mt-4 text-slate-500 text-sm"},Oge={key:2,class:"max-w-6xl mx-auto px-6 pb-12"},Dge={key:0,class:"text-center py-24"},Mge={class:"text-lg font-semibold text-slate-800 mb-2"},$ge={class:"text-slate-500 text-sm"},Uge={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Fge=["onClick"],Vge={class:"flex items-start justify-between mb-4"},qge={class:"flex items-center gap-2"},Bge={class:"text-lg"},jge={class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},Hge={class:"px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-xs font-medium"},zge={class:"font-semibold text-slate-800 mb-3 line-clamp-2 group-hover:text-indigo-600 transition-colors"},Wge={class:"flex items-center gap-4 text-xs text-slate-500"},Gge={class:"flex items-center gap-1"},Kge={key:0,class:"flex items-center gap-1"},Yge={class:"mt-4 pt-4 border-t border-gray-50 flex justify-end"},Qge={class:"text-sm font-medium text-indigo-500 group-hover:text-indigo-600 flex items-center gap-1"},Xge={key:3,class:"max-w-2xl mx-auto px-6 py-8"},Jge={class:"mb-8"},Zge={class:"flex items-center justify-between mb-2"},eye={class:"text-sm font-medium text-slate-600"},tye={class:"text-sm font-medium text-indigo-500"},sye={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},rye={class:"bg-white rounded-2xl border border-gray-100 p-6 mb-6"},nye={class:"text-lg font-semibold text-slate-800 mb-6"},iye={key:0,class:"space-y-3"},oye=["value"],aye={key:0,class:"w-2.5 h-2.5 rounded-full bg-indigo-500"},lye={class:"text-slate-700"},cye={key:1},uye=["placeholder"],dye={class:"flex justify-end"},hye=["disabled"],fye={key:4,class:"max-w-md mx-auto px-6 py-16 text-center"},pye={class:"text-6xl mb-6"},mye={class:"text-2xl font-bold text-slate-800 mb-2"},gye={class:"text-slate-500 mb-8"},yye={class:"relative w-32 h-32 mx-auto mb-8"},vye={class:"transform -rotate-90 w-full h-full"},_ye={class:"absolute inset-0 flex items-center justify-center"},bye={class:"text-3xl font-bold text-slate-800"},wye={class:"flex justify-center gap-6 mb-8"},Sye={class:"text-center"},Eye={class:"text-2xl font-bold text-green-500"},Tye={class:"text-xs text-slate-500"},kye={class:"text-center"},Iye={class:"text-2xl font-bold text-slate-800"},Cye={class:"text-xs text-slate-500"};function Aye(t,e,s,r,n,i){return b(),S("div",mge,[a("div",gge,[a("div",yge,[a("div",vge,[e[8]||(e[8]=a("div",{class:"w-12 h-12 rounded-2xl bg-indigo-50 flex items-center justify-center"},[a("span",{class:"text-2xl"},"")],-1)),a("div",null,[a("h1",_ge,p(t.$t("tests.title")),1),a("p",bge,p(r.filteredTests.length)+" "+p(t.$t("tests.available")),1)])]),a("div",wge,[a("div",Sge,"  "+p(r.uniqueSubjects.length)+" "+p(t.$t("tests.subjects")),1),a("div",Ege,"  "+p(r.uniqueLevels.length)+" "+p(t.$t("tests.levels")),1)])])]),r.activeTest?W("",!0):(b(),S("div",Tge,[a("div",kge,[a("div",Ige,[Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.searchQuery=o),type:"text",class:"w-full px-4 py-2.5 pl-10 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 transition-all",placeholder:t.$t("tests.searchPlaceholder")},null,8,Cge),[[Ge,r.searchQuery]]),e[9]||(e[9]=a("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1))]),Pe(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.selectedSubject=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",Age,p(t.$t("tests.allSubjects")),1),(b(!0),S(he,null,be(r.uniqueSubjects,o=>(b(),S("option",{key:o,value:o},p(o),9,Pge))),128))],512),[[Js,r.selectedSubject]]),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.selectedLevel=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",xge,p(t.$t("tests.allLevels")),1),(b(!0),S(he,null,be(r.uniqueLevels,o=>(b(),S("option",{key:o,value:o},p(t.$t("tests.level"))+" "+p(o),9,Lge))),128))],512),[[Js,r.selectedLevel]]),r.hasActiveFilters?(b(),S("button",{key:0,onClick:e[3]||(e[3]=(...o)=>r.clearFilters&&r.clearFilters(...o)),class:"px-4 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 transition-all"},p(t.$t("tests.clear")),1)):W("",!0)])])),r.loading?(b(),S("div",Rge,[e[10]||(e[10]=a("div",{class:"w-8 h-8 border-2 border-indigo-200 border-t-indigo-500 rounded-full animate-spin"},null,-1)),a("p",Nge,p(t.$t("tests.loading")),1)])):r.activeTest?r.isTestCompleted?(b(),S("div",fye,[a("div",pye,p(r.score>=70?"":r.score>=50?"":""),1),a("h2",mye,p(r.score>=70?t.$t("tests.greatJob"):r.score>=50?t.$t("tests.goodEffort"):t.$t("tests.keepPracticing")),1),a("p",gye,p(t.$t("tests.youScored",{score:r.score})),1),a("div",yye,[(b(),S("svg",vye,[e[16]||(e[16]=a("circle",{class:"text-gray-100","stroke-width":"8",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64"},null,-1)),a("circle",{class:ye(["transition-all duration-1000 ease-out",r.score>=70?"text-green-500":r.score>=50?"text-amber-500":"text-red-400"]),"stroke-width":"8","stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64",style:ct({strokeDasharray:352,strokeDashoffset:352-r.score/100*352})},null,6)])),a("div",_ye,[a("span",bye,p(r.score)+"%",1)])]),a("div",wye,[a("div",Sye,[a("div",Eye,p(r.correctCount),1),a("div",Tye,p(t.$t("tests.correct")),1)]),a("div",kye,[a("div",Iye,p(r.activeTest.questions.length),1),a("div",Cye,p(t.$t("tests.total")),1)])]),a("button",{onClick:e[7]||(e[7]=(...o)=>r.handleGoBack&&r.handleGoBack(...o)),class:"px-6 py-3 bg-slate-800 text-white font-medium rounded-xl hover:bg-slate-900 transition-all"},p(t.$t("tests.backToTests")),1)])):(b(),S("div",Xge,[a("div",Jge,[a("div",Zge,[a("span",eye,p(t.$t("tests.questionOf",{current:r.currentQuestionIndex+1,total:r.activeTest.questions.length})),1),a("span",tye,p(Math.round(r.progressPercentage))+"%",1)]),a("div",sye,[a("div",{class:"h-full bg-indigo-500 rounded-full transition-all duration-500 ease-out",style:ct({width:`${r.progressPercentage}%`})},null,4)])]),a("div",rye,[a("h2",nye,p(r.currentQuestion.text||r.currentQuestion.question),1),r.currentQuestion.type==="multiple-choice"||r.currentQuestion.options?(b(),S("div",iye,[(b(!0),S(he,null,be(r.currentQuestion.options||["true","false"],(o,l)=>(b(),S("label",{key:l,class:ye(["flex items-center p-4 rounded-xl border cursor-pointer transition-all hover:border-indigo-200 hover:bg-indigo-50/30",r.userAnswers[r.currentQuestionIndex]===(o.text||o)?"border-indigo-400 bg-indigo-50":"border-gray-200"])},[Pe(a("input",{type:"radio",value:o.text||o,"onUpdate:modelValue":e[4]||(e[4]=c=>r.userAnswers[r.currentQuestionIndex]=c),class:"sr-only"},null,8,oye),[[wn,r.userAnswers[r.currentQuestionIndex]]]),a("div",{class:ye(["w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center transition-colors",r.userAnswers[r.currentQuestionIndex]===(o.text||o)?"border-indigo-500":"border-gray-300"])},[r.userAnswers[r.currentQuestionIndex]===(o.text||o)?(b(),S("div",aye)):W("",!0)],2),a("span",lye,p(o.text||o),1)],2))),128))])):(b(),S("div",cye,[Pe(a("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.userAnswers[r.currentQuestionIndex]=o),class:"w-full p-4 rounded-xl border border-gray-200 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 outline-none transition-all text-slate-700 resize-none",placeholder:t.$t("tests.typeAnswer"),rows:"4"},null,8,uye),[[Ge,r.userAnswers[r.currentQuestionIndex]]])]))]),a("div",dye,[a("button",{onClick:e[6]||(e[6]=(...o)=>r.handleNextQuestion&&r.handleNextQuestion(...o)),disabled:!r.userAnswers[r.currentQuestionIndex]||r.userAnswers[r.currentQuestionIndex].trim()==="",class:"px-6 py-3 bg-indigo-500 text-white font-medium rounded-xl hover:bg-indigo-600 disabled:opacity-40 disabled:cursor-not-allowed transition-all flex items-center gap-2"},[re(p(r.isLastQuestion?t.$t("tests.finish"):t.$t("tests.next"))+" ",1),e[15]||(e[15]=a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))],8,hye)])])):(b(),S("div",Oge,[r.filteredTests.length===0?(b(),S("div",Dge,[e[11]||(e[11]=a("div",{class:"text-6xl mb-4"},"",-1)),a("h3",Mge,p(t.$t("tests.noTestsFound")),1),a("p",$ge,p(t.$t("tests.tryAdjusting")),1)])):(b(),S("div",Uge,[(b(!0),S(he,null,be(r.filteredTests,o=>{var l;return b(),S("article",{key:o._id,onClick:c=>r.handleStartTest(o),class:"group p-5 rounded-2xl border border-gray-100 hover:border-indigo-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white"},[a("div",Vge,[a("div",qge,[a("span",Bge,p(r.getSubjectEmoji(o.subject)),1),a("span",jge,p(o.subject||"General"),1)]),a("span",Hge,p(t.$t("tests.level"))+" "+p(o.level||1),1)]),a("h3",zge,p(o.title),1),a("div",Wge,[a("span",Gge,[e[12]||(e[12]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),re(" "+p(((l=o.questions)==null?void 0:l.length)||0)+" "+p(t.$t("tests.questions")),1)]),o.duration?(b(),S("span",Kge,[e[13]||(e[13]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),re(" "+p(o.duration)+"m ",1)])):W("",!0)]),a("div",Yge,[a("span",Qge,[re(p(t.$t("tests.start"))+" ",1),e[14]||(e[14]=a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])],8,Fge)}),128))]))]))])}const Pye=tt(pge,[["render",Aye],["__scopeId","data-v-ac07c252"]]),xye={name:"UniversalCheckout",props:{plan:{type:String,default:""},provider:{type:String,default:"multicard"},userId:{type:String,default:""},userName:{type:String,default:""},userEmail:{type:String,default:""},currentPlan:{type:String,default:"free"},amount:{type:[String,Number],default:0}},data(){return{loading:!1,processing:!1,error:"",paymentStatus:null,transactionId:null,failureReason:"",showOtpModal:!1,otpDigits:["","","","","",""],otpInputs:[],otpError:null,currentPaymentUuid:null,internalUserId:"",internalUserName:"",internalUserEmail:"",selectedDuration:3,selectedPlan:"pro",paymentProvider:"multicard",selectedCardToken:null,savedCards:[],selectedLanguage:"en",loadingMessage:"Processing your payment...",providers:{multicard:{name:"Bank Card",description:"Visa, Mastercard, UzCard, Humo",emoji:"",enabled:!0},payme:{name:"Payme",description:"Pay with Payme app",emoji:"",enabled:!0},click:{name:"Click",description:"Pay with Click app",emoji:"",enabled:!1}},promoCodeInput:"",promoApplying:!1,promoApplied:!1,promoError:!1,promoMessage:"",promoData:null,showDebugInfo:!1}},computed:{finalPlan(){return this.plan||this.selectedPlan||""},finalUserId(){var t;return this.internalUserId||this.userId||this.$route.query.userId||((t=pe.currentUser)==null?void 0:t.uid)||""},finalUserName(){var t;return this.internalUserName||this.userName||this.$route.query.userName||((t=pe.currentUser)==null?void 0:t.displayName)||"User"},finalUserEmail(){var t;return this.internalUserEmail||this.userEmail||this.$route.query.userEmail||((t=pe.currentUser)==null?void 0:t.email)||""},finalAmount(){if(this.promoApplied&&this.promoData)return 0;let t=parseInt(this.amount)||0;if(t>0)return t;const e={1:25e6,3:675e5,6:12e7};return e[this.selectedDuration]||e[3]},planName(){if(this.promoApplied&&this.promoData){const t=this.promoData.subscriptionDays||30;let e=this.promoData.durationText||(t<=31?"1 Month":t<=95?"3 Months":t<=185?"6 Months":`${t} Days`);return`${(this.promoData.grantsPlan||"Pro").toUpperCase()} Plan (via Promocode - ${e})`}return this.selectedDuration===1?"Pro Plan (1 Month)":this.selectedDuration===3?"Pro Plan (3 Months)":"Pro Plan (6 Months)"},canProceedToPayment(){var t;return this.promoApplied&&this.promoData?!!this.finalUserId:!!(this.finalUserId&&this.finalPlan&&this.finalAmount>0&&((t=this.providers[this.paymentProvider])!=null&&t.enabled))},validationMessage(){var t;return this.finalUserId?this.finalPlan?!this.finalAmount||this.finalAmount<=0?"Invalid payment amount":(t=this.providers[this.paymentProvider])!=null&&t.enabled?"Complete all required fields":"Please select an available payment method":"Please select a plan":"User ID not specified"},translatedValidationMessage(){var t;return this.finalUserId?this.finalPlan?!this.finalAmount||this.finalAmount<=0?this.$t("checkout.invalidAmount"):(t=this.providers[this.paymentProvider])!=null&&t.enabled?this.$t("checkout.completeFields"):this.$t("checkout.selectPaymentMethod"):this.$t("checkout.selectPlan"):this.$t("checkout.userIdRequired")},translatedProviders(){return{multicard:{name:this.$t("checkout.bankCard"),description:this.$t("checkout.bankCardDesc"),emoji:"",enabled:!0},payme:{name:this.$t("checkout.payme"),description:this.$t("checkout.paymeDesc"),emoji:"",enabled:!0},click:{name:this.$t("checkout.click"),description:this.$t("checkout.clickDesc"),emoji:"",enabled:!1}}},otp(){return this.otpDigits.join("")}},created(){this.$route.query.duration&&(this.selectedDuration=parseInt(this.$route.query.duration)||3),this.$route.query.plan&&(this.selectedPlan=this.$route.query.plan),this.$route.query.promoCode&&(this.promoCodeInput=this.$route.query.promoCode)},async mounted(){this.loadPaymentData(),this.validatePaymentData(),this.promoCodeInput&&await this.validatePromoCodeOnLoad()},methods:{loadSavedCards(){this.savedCards=[]},selectCard(t){this.selectedCardToken=t},getCardTypeName(t){return{"01":"UzCard","02":"Humo","03":"Visa","04":"Mastercard"}[t]||"Card"},loadPaymentData(){pe.currentUser&&(this.internalUserId||(this.internalUserId=pe.currentUser.uid),this.internalUserName||(this.internalUserName=pe.currentUser.displayName||""),this.internalUserEmail||(this.internalUserEmail=pe.currentUser.email||"")),!this.selectedPlan&&this.$route.params.plan&&(this.selectedPlan=this.$route.params.plan),this.selectedPlan||(this.selectedPlan="pro")},validatePaymentData(){return this.finalUserId?this.finalPlan?!0:(this.error="Please select a plan.",!1):(this.error="User authentication required.",!1)},handlePromoCodeInput(){this.promoApplied=!1,this.promoError=!1,this.promoMessage="",this.promoData=null},async validatePromoCodeOnLoad(){var t;if(this.promoCodeInput)try{const e=await lg(this.promoCodeInput.toUpperCase());e!=null&&e.valid&&(this.promoData=e.data,this.promoMessage=`Valid! ${(((t=e.data)==null?void 0:t.grantsPlan)||"Pro").toUpperCase()} Plan`)}catch(e){console.error("Error validating promo on load:",e)}},async applyPromoCode(){var t;if(!(!this.promoCodeInput||this.promoApplying)){this.promoApplying=!0,this.promoError=!1,this.promoMessage="";try{const e=await lg(this.promoCodeInput.toUpperCase());e!=null&&e.valid?(this.promoApplied=!0,this.promoData=e.data,this.promoMessage=`Promo code applied! ${(((t=e.data)==null?void 0:t.grantsPlan)||"Pro").toUpperCase()} Plan`):(this.promoError=!0,this.promoMessage=(e==null?void 0:e.error)||"Invalid promo code")}catch{this.promoError=!0,this.promoMessage="Error validating promo code."}finally{this.promoApplying=!1}}},async processPayment(){var t;if(!(!this.canProceedToPayment||this.processing)){this.processing=!0,this.error="";try{if(this.promoApplied&&this.promoData){const e=await aP(this.promoCodeInput.toUpperCase());if(e.success){localStorage.setItem("userStatus",e.plan||this.promoData.grantsPlan||"pro"),e.expiryDate&&localStorage.setItem("subscriptionExpiry",e.expiryDate),(t=this.$store)!=null&&t.dispatch&&(await this.$store.dispatch("user/loadUserStatus"),this.$store.commit("user/FORCE_UPDATE")),window.dispatchEvent(new CustomEvent("userStatusChanged",{detail:{source:"promocode"}})),this.handlePaymentSuccess({transactionId:"PROMO-"+Date.now(),plan:e.plan});return}else throw new Error(e.error||"Failed to apply promo code")}if(this.paymentProvider==="payme")await this.processPaymePayment();else if(this.paymentProvider==="multicard")await this.processMulticardPayment();else throw new Error("Please select a valid payment method")}catch(e){this.error=e.message||"An error occurred",this.processing=!1}}},async processPaymePayment(){var s;const t={userId:this.finalUserId,userName:this.finalUserName,userEmail:this.finalUserEmail,plan:this.finalPlan,amount:this.finalAmount,duration:this.selectedDuration,lang:this.selectedLanguage},e=await SP(t);if(e.success&&((s=e.data)!=null&&s.paymentUrl))window.location.href=e.data.paymentUrl;else throw new Error(e.error||"Failed to initiate payment")},async processMulticardPayment(){var s,r,n,i;const t={userId:this.finalUserId,userName:this.finalUserName,userEmail:this.finalUserEmail,plan:this.finalPlan,amount:this.finalAmount,duration:this.selectedDuration,lang:this.selectedLanguage};let e=this.selectedCardToken?await kP(this.selectedCardToken,t):await TP(t);if(e.success)(s=e.data)!=null&&s.paymentUrl||(r=e.data)!=null&&r.checkoutUrl?window.location.href=e.data.paymentUrl||e.data.checkoutUrl:(n=e.data)!=null&&n.requiresOtp?(this.currentPaymentUuid=e.data.uuid,this.showOtpModal=!0):((i=e.data)==null?void 0:i.status)==="success"&&this.handlePaymentSuccess(e.data);else throw new Error(e.error||"Failed to process payment")},handleOtpInput(t,e){e.target.value&&t<5&&this.$nextTick(()=>{var s;(s=this.otpInputs[t+1])==null||s.focus()})},handleOtpBackspace(t,e){!e.target.value&&t>0&&this.$nextTick(()=>{var s;(s=this.otpInputs[t-1])==null||s.focus()})},async submitOtp(){this.processing=!0,this.otpError=null;try{const t=await IP(this.currentPaymentUuid,this.otp);if(t.success&&t.data.status==="success")this.closeOtpModal(),this.handlePaymentSuccess(t.data);else throw new Error(t.error||"Payment not confirmed")}catch(t){this.otpError=t.message||"Invalid verification code"}finally{this.processing=!1}},closeOtpModal(){this.showOtpModal=!1,this.otpDigits=["","","","","",""],this.otpError=null},async handlePaymentSuccess(t){this.paymentStatus="success",this.transactionId=t.uuid||t.transactionId,this.loading=!1,this.processing=!1;try{await this.$store.dispatch("user/loadUserStatus"),this.$store.commit("user/FORCE_UPDATE"),window.dispatchEvent(new CustomEvent("userStatusChanged",{detail:{source:"payment"}})),setTimeout(()=>{this.$router.push("/settings")},3e3)}catch(e){console.error("Failed to update status:",e)}},formatAmount(t){if(!t)return"FREE";const e=Math.floor(t/100);return new Intl.NumberFormat("en-US").format(e)+" sum"},goBack(){this.paymentStatus?this.paymentStatus=null:this.$router.go(-1)},goToDashboard(){this.$router.push("/dashboard")},goToSettings(){this.$router.push("/settings")},goHome(){this.$router.push("/")},retryPayment(){this.error="",this.loading=!1,this.processing=!1,this.paymentStatus=null,this.loadPaymentData()}}},Lye={class:"min-h-screen bg-gradient-to-br from-slate-50 to-indigo-50/30 flex items-center justify-center p-4 md:p-8"},Rye={class:"bg-white rounded-2xl shadow-xl shadow-indigo-500/5 max-w-2xl w-full overflow-hidden"},Nye={key:0,class:"p-8 md:p-12 text-center"},Oye={class:"text-2xl font-bold text-slate-900 mb-2"},Dye={class:"text-slate-600 mb-8"},Mye={class:"bg-slate-50 rounded-xl p-5 mb-8 text-left space-y-3"},$ye={class:"flex justify-between items-center py-2 border-b border-slate-200"},Uye={class:"text-sm text-slate-500"},Fye={class:"font-semibold text-slate-900"},Vye={class:"flex justify-between items-center py-2 border-b border-slate-200"},qye={class:"text-sm text-slate-500"},Bye={class:"font-semibold text-indigo-600"},jye={key:0,class:"flex justify-between items-center py-2"},Hye={class:"text-sm text-slate-500"},zye={class:"font-mono text-sm text-slate-600"},Wye={class:"flex flex-col sm:flex-row gap-3 justify-center"},Gye={key:1,class:"p-8 md:p-12 text-center"},Kye={class:"text-2xl font-bold text-slate-900 mb-2"},Yye={class:"text-slate-600 mb-8"},Qye={class:"flex flex-col sm:flex-row gap-3 justify-center"},Xye={key:2,class:"p-8 md:p-12 text-center"},Jye={class:"text-2xl font-bold text-slate-900 mb-2"},Zye={class:"text-slate-600 mb-8"},eve={class:"flex flex-col sm:flex-row gap-3 justify-center"},tve={key:3,class:"p-8 md:p-12 text-center"},sve={class:"text-xl font-semibold text-slate-900 mb-2"},rve={key:0,class:"bg-slate-50 rounded-xl p-4 text-left space-y-2"},nve={class:"flex justify-between"},ive={class:"text-sm font-medium text-slate-700"},ove={class:"flex justify-between"},ave={class:"text-sm font-medium text-slate-700"},lve={class:"flex justify-between"},cve={class:"text-sm font-medium text-indigo-600"},uve={key:4,class:"p-8 md:p-12 text-center"},dve={class:"text-xl font-semibold text-slate-900 mb-2"},hve={class:"text-slate-600 mb-6"},fve={class:"flex flex-col sm:flex-row gap-3 justify-center"},pve={key:5,class:"p-6 md:p-8"},mve={class:"text-center mb-8 pb-6 border-b border-slate-100"},gve={class:"text-2xl font-bold text-slate-900 mb-1"},yve={class:"text-slate-500"},vve={class:"bg-slate-50 rounded-xl p-5 mb-6"},_ve={class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4"},bve={class:"grid grid-cols-2 gap-4 mb-4"},wve={class:"text-xs text-slate-500 uppercase"},Sve={class:"font-semibold text-slate-900 truncate"},Eve={class:"text-xs text-slate-500 uppercase"},Tve={class:"font-semibold text-slate-900 truncate"},kve={class:"text-xs text-slate-500 uppercase"},Ive={class:"inline-block px-3 py-1 bg-emerald-100 text-emerald-700 text-sm font-semibold rounded-lg"},Cve={key:0},Ave={class:"text-xs text-slate-500 uppercase"},Pve={class:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 text-sm font-semibold rounded-lg"},xve={class:"flex justify-between items-center p-4 bg-white rounded-lg"},Lve={class:"text-slate-600"},Rve={class:"text-2xl font-bold text-indigo-600"},Nve={class:"mb-6"},Ove={class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4"},Dve={class:"space-y-3"},Mve=["onClick"],$ve={class:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center text-2xl shrink-0"},Uve={class:"flex-1 min-w-0"},Fve={class:"font-semibold text-slate-900 block"},Vve={class:"text-sm text-slate-500"},qve={key:0,class:"text-xs text-amber-600 font-medium block"},Bve={key:0,class:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-white shrink-0"},jve=["value","disabled"],Hve={class:"mb-6"},zve={class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2"},Wve={class:"grid grid-cols-3 gap-3"},Gve={class:"block text-xs text-slate-500 uppercase"},Kve={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-indigo-500 rounded-full flex items-center justify-center text-white text-xs"},Yve={class:"absolute -top-2.5 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-[10px] font-bold rounded-full"},Qve={class:"block text-xs text-slate-500 uppercase"},Xve={class:"block text-[10px] text-emerald-500 font-medium"},Jve={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs"},Zve={class:"block text-xs text-slate-500 uppercase"},e0e={class:"block text-[10px] text-emerald-500 font-medium"},t0e={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center text-white text-xs"},s0e={class:"mb-6"},r0e={class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2"},n0e={class:"flex gap-2"},i0e={class:"flex-1 relative"},o0e=["placeholder","disabled"],a0e={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 text-emerald-500"},l0e=["disabled"],c0e={key:0,class:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},u0e={key:1},d0e={class:"mb-6"},h0e={class:"flex items-center gap-2 text-sm text-slate-600 mb-2"},f0e=["disabled"],p0e={key:0,class:"inline-flex items-center gap-2"},m0e={key:1},g0e={key:2},y0e={class:"flex items-center justify-center gap-2 mt-4 text-slate-400 text-sm"},v0e={class:"bg-white rounded-2xl p-6 max-w-sm w-full"},_0e={class:"flex justify-between items-center mb-4"},b0e={class:"text-lg font-bold text-slate-900"},w0e=["disabled"],S0e={class:"text-slate-600 text-sm mb-6"},E0e={class:"flex gap-2 justify-center mb-4"},T0e=["onUpdate:modelValue","onInput","onKeydown"],k0e={key:0,class:"text-red-500 text-sm text-center mb-4"},I0e={class:"flex gap-3"},C0e=["disabled"],A0e=["disabled"];function P0e(t,e,s,r,n,i){var o;return b(),S("div",Lye,[a("div",Rye,[n.paymentStatus==="success"?(b(),S("div",Nye,[e[25]||(e[25]=a("div",{class:"w-20 h-20 mx-auto mb-6 bg-emerald-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-10 h-10 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),a("h1",Oye,p(t.$t("checkout.paymentSuccessful")),1),a("p",Dye,p(t.$t("checkout.subscriptionActivated",{plan:i.planName})),1),a("div",Mye,[a("div",$ye,[a("span",Uye,p(t.$t("checkout.plan")),1),a("span",Fye,p(i.planName),1)]),a("div",Vye,[a("span",qye,p(t.$t("checkout.amount")),1),a("span",Bye,p(i.formatAmount(i.finalAmount)),1)]),n.transactionId?(b(),S("div",jye,[a("span",Hye,p(t.$t("checkout.transactionId")),1),a("span",zye,p(n.transactionId),1)])):W("",!0)]),a("div",Wye,[a("button",{onClick:e[0]||(e[0]=(...l)=>i.goToSettings&&i.goToSettings(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"},p(t.$t("checkout.viewSubscription")),1),a("button",{onClick:e[1]||(e[1]=(...l)=>i.goToDashboard&&i.goToDashboard(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"},p(t.$t("checkout.startLearning")),1)])])):n.paymentStatus==="failed"?(b(),S("div",Gye,[e[26]||(e[26]=a("div",{class:"w-20 h-20 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),a("h1",Kye,p(t.$t("checkout.paymentFailed")),1),a("p",Yye,p(n.failureReason||t.$t("checkout.couldNotProcess")),1),a("div",Qye,[a("button",{onClick:e[2]||(e[2]=(...l)=>i.retryPayment&&i.retryPayment(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"},p(t.$t("checkout.tryAgain")),1),a("button",{onClick:e[3]||(e[3]=(...l)=>i.goBack&&i.goBack(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"},p(t.$t("checkout.changeMethod")),1)])])):n.paymentStatus==="cancelled"?(b(),S("div",Xye,[e[27]||(e[27]=a("div",{class:"w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-10 h-10 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),a("h1",Jye,p(t.$t("checkout.paymentCancelled")),1),a("p",Zye,p(t.$t("checkout.cancelledMessage")),1),a("div",eve,[a("button",{onClick:e[4]||(e[4]=(...l)=>i.retryPayment&&i.retryPayment(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"},p(t.$t("checkout.returnToPayment")),1),a("button",{onClick:e[5]||(e[5]=(...l)=>i.goHome&&i.goHome(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"},p(t.$t("checkout.backToHome")),1)])])):n.loading?(b(),S("div",tve,[e[31]||(e[31]=a("div",{class:"w-16 h-16 mx-auto mb-6 relative"},[a("div",{class:"absolute inset-0 border-4 border-indigo-200 rounded-full"}),a("div",{class:"absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})],-1)),a("h2",sve,p(n.loadingMessage),1),e[32]||(e[32]=a("p",{class:"text-slate-500 mb-6"},"Please wait while we prepare your payment...",-1)),s.userName?(b(),S("div",rve,[a("div",nve,[e[28]||(e[28]=a("span",{class:"text-sm text-slate-500"},"User",-1)),a("span",ive,p(i.finalUserName),1)]),a("div",ove,[e[29]||(e[29]=a("span",{class:"text-sm text-slate-500"},"Plan",-1)),a("span",ave,p(i.planName),1)]),a("div",lve,[e[30]||(e[30]=a("span",{class:"text-sm text-slate-500"},"Amount",-1)),a("span",cve,p(i.formatAmount(i.finalAmount)),1)])])):W("",!0)])):n.error?(b(),S("div",uve,[e[33]||(e[33]=a("div",{class:"w-20 h-20 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("h2",dve,p(t.$t("checkout.unableToProcess")),1),a("p",hve,p(n.error),1),a("div",fve,[a("button",{onClick:e[6]||(e[6]=(...l)=>i.retryPayment&&i.retryPayment(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"},p(t.$t("checkout.tryAgain")),1),a("button",{onClick:e[7]||(e[7]=(...l)=>i.goBack&&i.goBack(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"},p(t.$t("checkout.goBack")),1)])])):(b(),S("div",pve,[a("div",mve,[e[34]||(e[34]=a("div",{class:"w-14 h-14 mx-auto mb-4 flex items-center justify-center"},[a("img",{src:Aa,alt:"ACED",class:"w-full h-full object-contain"})],-1)),a("h1",gve,p(t.$t("checkout.title")),1),a("p",yve,p(t.$t("checkout.subtitle")),1)]),a("div",vve,[a("h3",_ve,p(t.$t("checkout.paymentDetails")),1),a("div",bve,[a("div",null,[a("span",wve,p(t.$t("checkout.account")),1),a("p",Sve,p(i.finalUserName||t.$t("checkout.notSpecified")),1)]),a("div",null,[a("span",Eve,p(t.$t("checkout.email")),1),a("p",Tve,p(i.finalUserEmail||t.$t("checkout.notSpecified")),1)]),a("div",null,[a("span",kve,p(t.$t("checkout.currentPlan")),1),a("span",Ive,p(s.currentPlan||t.$t("checkout.free")),1)]),i.finalPlan?(b(),S("div",Cve,[a("span",Ave,p(t.$t("checkout.upgradingTo")),1),a("span",Pve,p(i.planName),1)])):W("",!0)]),a("div",xve,[a("span",Lve,p(t.$t("checkout.totalAmount")),1),a("span",Rve,p(i.formatAmount(i.finalAmount)),1)])]),a("div",Nve,[a("h3",Ove,p(t.$t("checkout.paymentMethod")),1),a("div",Dve,[(b(!0),S(he,null,be(i.translatedProviders,(l,c)=>(b(),S("label",{key:c,class:ye(["flex items-center gap-4 p-4 bg-white border-2 rounded-xl cursor-pointer transition-all",n.paymentProvider===c?"border-indigo-500 bg-indigo-50/50":"border-slate-200 hover:border-slate-300",!l.enabled&&"opacity-50 cursor-not-allowed"]),onClick:u=>l.enabled&&(n.paymentProvider=c)},[a("div",$ve,p(l.emoji),1),a("div",Uve,[a("span",Fve,p(l.name),1),a("span",Vve,p(l.description),1),l.enabled?W("",!0):(b(),S("span",qve,p(t.$t("checkout.comingSoon")),1))]),n.paymentProvider===c&&l.enabled?(b(),S("div",Bve,e[35]||(e[35]=[a("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):W("",!0),Pe(a("input",{type:"radio","onUpdate:modelValue":e[8]||(e[8]=u=>n.paymentProvider=u),value:c,disabled:!l.enabled,class:"hidden"},null,8,jve),[[wn,n.paymentProvider]])],10,Mve))),128))])]),a("div",Hve,[a("h3",zve,[e[36]||(e[36]=a("svg",{class:"w-4 h-4 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),re(" "+p(t.$t("checkout.selectDuration")),1)]),a("div",Wve,[a("label",{class:ye(["relative p-4 border-2 rounded-xl cursor-pointer transition-all text-center",n.selectedDuration===1?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300 bg-white"]),onClick:e[10]||(e[10]=l=>n.selectedDuration=1)},[Pe(a("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=l=>n.selectedDuration=l),value:1,class:"hidden"},null,512),[[wn,n.selectedDuration]]),e[37]||(e[37]=a("span",{class:"block text-xl font-bold text-slate-900"},"1",-1)),a("span",Gve,p(t.$t("checkout.month")),1),e[38]||(e[38]=a("span",{class:"block text-lg font-semibold text-indigo-600 mt-2"},"250,000",-1)),e[39]||(e[39]=a("span",{class:"text-xs text-slate-400"},"UZS",-1)),n.selectedDuration===1?(b(),S("div",Kve,"")):W("",!0)],2),a("label",{class:ye(["relative p-4 border-2 rounded-xl cursor-pointer transition-all text-center",n.selectedDuration===3?"border-purple-500 bg-purple-50":"border-purple-200 hover:border-purple-300 bg-white"]),onClick:e[12]||(e[12]=l=>n.selectedDuration=3)},[a("div",Yve,p(t.$t("checkout.popular")),1),Pe(a("input",{type:"radio","onUpdate:modelValue":e[11]||(e[11]=l=>n.selectedDuration=l),value:3,class:"hidden"},null,512),[[wn,n.selectedDuration]]),e[40]||(e[40]=a("span",{class:"block text-xl font-bold text-slate-900"},"3",-1)),a("span",Qve,p(t.$t("checkout.months")),1),e[41]||(e[41]=a("span",{class:"block text-lg font-semibold text-purple-600 mt-2"},"675,000",-1)),e[42]||(e[42]=a("span",{class:"text-xs text-slate-400"},"UZS",-1)),a("span",Xve,p(t.$t("checkout.save",{percent:10})),1),n.selectedDuration===3?(b(),S("div",Jve,"")):W("",!0)],2),a("label",{class:ye(["relative p-4 border-2 rounded-xl cursor-pointer transition-all text-center",n.selectedDuration===6?"border-emerald-500 bg-emerald-50":"border-slate-200 hover:border-slate-300 bg-white"]),onClick:e[14]||(e[14]=l=>n.selectedDuration=6)},[Pe(a("input",{type:"radio","onUpdate:modelValue":e[13]||(e[13]=l=>n.selectedDuration=l),value:6,class:"hidden"},null,512),[[wn,n.selectedDuration]]),e[43]||(e[43]=a("span",{class:"block text-xl font-bold text-slate-900"},"6",-1)),a("span",Zve,p(t.$t("checkout.months")),1),e[44]||(e[44]=a("span",{class:"block text-lg font-semibold text-emerald-600 mt-2"},"1,200,000",-1)),e[45]||(e[45]=a("span",{class:"text-xs text-slate-400"},"UZS",-1)),a("span",e0e,p(t.$t("checkout.save",{percent:20})),1),n.selectedDuration===6?(b(),S("div",t0e,"")):W("",!0)],2)])]),a("div",s0e,[a("h3",r0e,[e[46]||(e[46]=a("svg",{class:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),a("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)),re(" "+p(t.$t("checkout.havePromoCode")),1)]),a("div",n0e,[a("div",i0e,[Pe(a("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>n.promoCodeInput=l),type:"text",placeholder:t.$t("checkout.enterPromoCode"),disabled:n.promoApplying,onInput:e[16]||(e[16]=(...l)=>i.handlePromoCodeInput&&i.handlePromoCodeInput(...l)),onKeyup:e[17]||(e[17]=tc((...l)=>i.applyPromoCode&&i.applyPromoCode(...l),["enter"])),class:ye(["w-full px-4 py-3 border-2 rounded-xl text-sm uppercase tracking-wider font-medium transition-all focus:outline-none focus:ring-2 focus:ring-purple-500",n.promoApplied?"border-emerald-500 bg-emerald-50":n.promoError?"border-red-500 bg-red-50":"border-slate-200"])},null,42,o0e),[[Ge,n.promoCodeInput]]),n.promoApplied?(b(),S("div",a0e,e[47]||(e[47]=[a("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):W("",!0)]),a("button",{onClick:e[18]||(e[18]=(...l)=>i.applyPromoCode&&i.applyPromoCode(...l)),disabled:!n.promoCodeInput||n.promoApplying||n.promoApplied,class:"px-5 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-medium text-sm hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[n.promoApplying?(b(),S("span",c0e)):(b(),S("span",u0e,p(t.$t("checkout.apply")),1))],8,l0e)]),n.promoMessage?(b(),S("p",{key:0,class:ye(["mt-2 text-sm font-medium",n.promoError?"text-red-500":"text-emerald-600"])},p(n.promoMessage),3)):W("",!0)]),a("div",d0e,[a("label",h0e,[e[48]||(e[48]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})],-1)),re(" "+p(t.$t("checkout.paymentPageLanguage")),1)]),Pe(a("select",{"onUpdate:modelValue":e[19]||(e[19]=l=>n.selectedLanguage=l),class:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"},e[49]||(e[49]=[a("option",{value:"en"}," English",-1),a("option",{value:"ru"}," ",-1),a("option",{value:"uz"}," O'zbek",-1)]),512),[[Js,n.selectedLanguage]])]),a("button",{onClick:e[20]||(e[20]=(...l)=>i.processPayment&&i.processPayment(...l)),disabled:!i.canProceedToPayment||n.processing,class:"w-full py-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold text-lg rounded-xl hover:shadow-xl hover:shadow-indigo-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none"},[n.processing?(b(),S("span",p0e,[e[50]||(e[50]=a("span",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)),re(" "+p(t.$t("checkout.processing")),1)])):(o=n.providers[n.paymentProvider])!=null&&o.enabled&&i.canProceedToPayment?(b(),S("span",m0e,p(t.$t("checkout.continueToPayment"))+"  "+p(i.formatAmount(i.finalAmount)),1)):(b(),S("span",g0e,p(i.translatedValidationMessage),1))],8,f0e),a("div",y0e,[e[51]||(e[51]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)),a("span",null,p(t.$t("checkout.securePayment")),1)])])),n.showOtpModal?(b(),S("div",{key:6,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e[24]||(e[24]=gt((...l)=>i.closeOtpModal&&i.closeOtpModal(...l),["self"]))},[a("div",v0e,[a("div",_0e,[a("h3",b0e,p(t.$t("checkout.verifyPayment")),1),a("button",{onClick:e[21]||(e[21]=(...l)=>i.closeOtpModal&&i.closeOtpModal(...l)),disabled:n.processing,class:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600"},"",8,w0e)]),a("p",S0e,p(t.$t("checkout.enterCode")),1),a("div",E0e,[(b(!0),S(he,null,be(n.otpDigits,(l,c)=>Pe((b(),S("input",{key:c,"onUpdate:modelValue":u=>n.otpDigits[c]=u,type:"text",inputmode:"numeric",maxlength:"1",class:"w-12 h-14 text-center text-xl font-bold border-2 border-slate-200 rounded-xl focus:border-indigo-500 focus:outline-none",onInput:u=>i.handleOtpInput(c,u),onKeydown:tc(u=>i.handleOtpBackspace(c,u),["backspace"]),ref_for:!0,ref:u=>{u&&(n.otpInputs[c]=u)}},null,40,T0e)),[[Ge,n.otpDigits[c]]])),128))]),n.otpError?(b(),S("p",k0e,p(n.otpError),1)):W("",!0),a("div",I0e,[a("button",{onClick:e[22]||(e[22]=(...l)=>i.closeOtpModal&&i.closeOtpModal(...l)),disabled:n.processing,class:"flex-1 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"},p(t.$t("checkout.cancel")),9,C0e),a("button",{onClick:e[23]||(e[23]=(...l)=>i.submitOtp&&i.submitOtp(...l)),disabled:n.processing||i.otp.length<6,class:"flex-1 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all disabled:opacity-50"},p(n.processing?t.$t("checkout.verifying"):t.$t("checkout.confirm")),9,A0e)])])])):W("",!0)])])}const qp=tt(xye,[["render",P0e]]),x0e={name:"PaymentFailed",props:{transactionData:{type:Object,default:()=>({})},errorData:{type:Object,default:()=>({})}},data(){return{transactionId:"",error:"",source:""}},computed:{errorMessage(){var t,e,s,r;return(t=this.error)!=null&&t.toLowerCase().includes("insufficient")?"   .     .":(e=this.error)!=null&&e.toLowerCase().includes("blocked")?" .      .":(s=this.error)!=null&&s.toLowerCase().includes("expired")?"  .    .":(r=this.error)!=null&&r.toLowerCase().includes("cancelled")?"   .":this.error?this.error:null}},mounted(){this.loadPaymentData()},methods:{loadPaymentData(){var t,e,s;if((t=this.transactionData)!=null&&t.id&&(this.transactionId=this.transactionData.id),(e=this.errorData)!=null&&e.message&&(this.error=this.errorData.message),(s=this.errorData)!=null&&s.source&&(this.source=this.errorData.source),!this.transactionId||!this.error){const r=new URLSearchParams(window.location.search);this.transactionId=this.transactionId||r.get("transaction")||"",this.error=this.error||r.get("error")||"",this.source=this.source||r.get("source")||""}},formatDate(t){return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},tryAgain(){this.$router.push({name:"SettingsPage"})},goToSettings(){this.$router.push({name:"SettingsPage"})},goHome(){this.$router.push({name:"HomePage"})}}},L0e={class:"payment-failed"},R0e={class:"failed-container"},N0e={class:"failed-message"},O0e={key:0,class:"transaction-details"},D0e={class:"detail-row"},M0e={key:0,class:"detail-row"},$0e={class:"error-text"},U0e={class:"detail-row"},F0e={class:"actions"};function V0e(t,e,s,r,n,i){return b(),S("div",L0e,[a("div",R0e,[e[7]||(e[7]=a("div",{class:"failed-icon"},"",-1)),e[8]||(e[8]=a("h1",null,"  ",-1)),a("p",N0e,p(i.errorMessage||"    .   ."),1),n.transactionId?(b(),S("div",O0e,[e[6]||(e[6]=a("h3",null,"  ",-1)),a("div",D0e,[e[3]||(e[3]=a("span",null,"ID :",-1)),a("code",null,p(n.transactionId),1)]),n.error?(b(),S("div",M0e,[e[4]||(e[4]=a("span",null,":",-1)),a("span",$0e,p(n.error),1)])):W("",!0),a("div",U0e,[e[5]||(e[5]=a("span",null,":",-1)),a("span",null,p(i.formatDate(new Date)),1)])])):W("",!0),e[9]||(e[9]=a("div",{class:"common-issues"},[a("h3",null,"  :"),a("ul",null,[a("li",null,"   "),a("li",null,"  "),a("li",null,"   "),a("li",null,"  -"),a("li",null,"   ")])],-1)),a("div",F0e,[a("button",{onClick:e[0]||(e[0]=(...o)=>i.tryAgain&&i.tryAgain(...o)),class:"primary-btn"},"    "),a("button",{onClick:e[1]||(e[1]=(...o)=>i.goToSettings&&i.goToSettings(...o)),class:"secondary-btn"},"     "),a("button",{onClick:e[2]||(e[2]=(...o)=>i.goHome&&i.goHome(...o)),class:"tertiary-btn"},"    ")]),e[10]||(e[10]=kt('<div class="help-section" data-v-22c025b5><h3 data-v-22c025b5>  ?</h3><p data-v-22c025b5>  ,    :</p><div class="contact-info" data-v-22c025b5><a href="mailto:support@aced.live" class="contact-link" data-v-22c025b5>  support@aced.live </a><a href="https://t.me/aced_live" target="_blank" class="contact-link" data-v-22c025b5>  @aced_live  Telegram </a></div></div><div class="alternative-methods" data-v-22c025b5><h3 data-v-22c025b5>   </h3><p data-v-22c025b5>     :</p><ul data-v-22c025b5><li data-v-22c025b5> </li><li data-v-22c025b5>  </li><li data-v-22c025b5>  </li></ul></div>',2))])])}const Tw=tt(x0e,[["render",V0e],["__scopeId","data-v-22c025b5"]]),q0e={name:"PaymentSuccessModal",props:{visible:{type:Boolean,default:!1},transactionData:{type:Object,default:()=>({})},plan:{type:String,default:""}},emits:["close","go-to-courses","go-to-profile"],computed:{planName(){var s;const t=this.plan||((s=this.transactionData)==null?void 0:s.plan)||"";return{start:"Start",pro:"Pro",premium:"Premium"}[t]||"Premium"},unlockedFeatures(){var s;const t=this.plan||((s=this.transactionData)==null?void 0:s.plan)||"start",e={start:["   "," "," ","-"," "],pro:["  Start"," "," "," "," ","  "]};return e[t]||e.start}},watch:{visible(t){t?(this.updateUserStatus(),this.$nextTick(()=>{var e;(e=this.$el)==null||e.focus()}),document.body.style.overflow="hidden"):document.body.style.overflow=""}},mounted(){document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown),document.body.style.overflow=""},methods:{closeModal(){this.$emit("close")},async updateUserStatus(){var t,e;try{if(this.$store.getters["user/isAuthenticated"]){await this.$store.dispatch("user/checkPendingPayments");const s=await this.$store.dispatch("user/loadUserStatus");if(this.$store.commit("user/FORCE_UPDATE"),typeof window<"u"){const r={source:"payment-success",plan:s==null?void 0:s.status,transactionId:((t=this.transactionData)==null?void 0:t.id)||((e=this.transactionData)==null?void 0:e.transactionId),timestamp:Date.now()};window.dispatchEvent(new CustomEvent("userStatusChanged",{detail:r})),window.dispatchEvent(new CustomEvent("subscriptionUpdated",{detail:r}))}}}catch(s){console.error("Failed to update user status:",s)}},formatAmount(t){if(!t)return"";const e=t>1e4?t/100:t;return new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0}).format(e)},formatDate(t){return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},goToCourses(){this.$emit("go-to-courses"),this.closeModal(),this.$router.push({name:"CataloguePage"})},goToProfile(){this.$emit("go-to-profile"),this.closeModal(),this.$router.push({name:"MainPage"})},handleKeydown(t){t.key==="Escape"&&this.visible&&this.closeModal()}}},B0e={class:"modal-content"},j0e={class:"success-content"},H0e={class:"success-message"},z0e={class:"plan-name"},W0e={key:0,class:"transaction-details"},G0e={class:"detail-row"},K0e={key:0,class:"detail-row"},Y0e={class:"plan-badge"},Q0e={key:1,class:"detail-row"},X0e={class:"amount"},J0e={class:"detail-row"},Z0e={class:"features-unlocked"},e1e={class:"features-list"},t1e={class:"modal-actions"};function s1e(t,e,s,r,n,i){return s.visible?(b(),S("div",{key:0,class:"modal-overlay",onClick:e[3]||(e[3]=gt((...o)=>i.closeModal&&i.closeModal(...o),["self"]))},[a("div",B0e,[a("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>i.closeModal&&i.closeModal(...o)),"aria-label":""},e[4]||(e[4]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])),e[18]||(e[18]=kt('<div class="success-animation" data-v-d689fd10><div class="checkmark" data-v-d689fd10><svg viewBox="0 0 100 100" data-v-d689fd10><circle cx="50" cy="50" r="45" fill="none" stroke="#10b981" stroke-width="4" class="circle" data-v-d689fd10></circle><path d="M30 50 L45 65 L70 35" fill="none" stroke="#10b981" stroke-width="4" stroke-linecap="round" class="checkmark-path" data-v-d689fd10></path></svg></div></div>',1)),a("div",j0e,[e[16]||(e[16]=a("h1",null,"  !",-1)),a("p",H0e,[e[5]||(e[5]=re("   ")),a("span",z0e,p(i.planName),1),e[6]||(e[6]=re(" !")),e[7]||(e[7]=a("br",null,null,-1)),e[8]||(e[8]=re("        . "))]),s.transactionData?(b(),S("div",W0e,[e[13]||(e[13]=a("h3",null,"  ",-1)),a("div",G0e,[e[9]||(e[9]=a("span",null,":",-1)),a("code",null,p(s.transactionData.id||s.transactionData.transactionId||"N/A"),1)]),s.transactionData.plan||s.plan?(b(),S("div",K0e,[e[10]||(e[10]=a("span",null,":",-1)),a("span",Y0e,p(i.planName),1)])):W("",!0),s.transactionData.amount?(b(),S("div",Q0e,[e[11]||(e[11]=a("span",null,":",-1)),a("span",X0e,p(i.formatAmount(s.transactionData.amount)),1)])):W("",!0),a("div",J0e,[e[12]||(e[12]=a("span",null,":",-1)),a("span",null,p(i.formatDate(new Date)),1)])])):W("",!0),a("div",Z0e,[e[15]||(e[15]=a("h3",null,"   :",-1)),a("ul",e1e,[(b(!0),S(he,null,be(i.unlockedFeatures,o=>(b(),S("li",{key:o},[e[14]||(e[14]=a("span",{class:"check-icon"},"",-1)),re(" "+p(o),1)]))),128))])]),a("div",t1e,[a("button",{onClick:e[1]||(e[1]=(...o)=>i.goToCourses&&i.goToCourses(...o)),class:"primary-btn"},"    "),a("button",{onClick:e[2]||(e[2]=(...o)=>i.goToProfile&&i.goToProfile(...o)),class:"secondary-btn"},"    ")]),e[17]||(e[17]=a("div",{class:"help-section"},[a("p",null,[re("?  : "),a("a",{href:"mailto:support@aced.live"},"support@aced.live")])],-1))])])])):W("",!0)}const r1e=tt(q0e,[["render",s1e],["__scopeId","data-v-d689fd10"]]),n1e={name:"PaymentReturn",data(){return{loading:!0,error:null,pending:!1,transactionId:null,userId:null,retryCount:0,maxRetries:3}},async mounted(){await this.processReturn()},methods:{async processReturn(){try{this.loading=!0,this.error=null,this.pending=!1;const t=new URLSearchParams(window.location.search);if(this.transactionId=t.get("id")||t.get("transaction")||t.get("orderId")||this.$route.query.transaction||this.$route.query.id,this.userId=t.get("userId")||this.$route.query.userId||this.$store.getters["user/getUserId"]||localStorage.getItem("userId"),!this.transactionId){this.error="ID     URL ",this.loading=!1;return}const e=await EP(this.transactionId,this.userId);if(e.success&&e.transaction){const s=e.transaction.state;s===2?this.$router.replace({name:"PaymentSuccess",query:{transaction:this.transactionId,plan:e.transaction.subscription_plan||e.transaction.plan,amount:e.transaction.amount,userId:this.userId}}):s===-1||s===-2?this.$router.replace({name:"PaymentFailed",query:{transaction:this.transactionId,error:s===-1?"cancelled":"refunded",userId:this.userId}}):s===1?(this.pending=!0,this.loading=!1):(this.error=`  : ${s}`,this.loading=!1)}else this.error=e.error||"    ",this.loading=!1}catch(t){this.error=`  : ${t.message}`,this.loading=!1}},async retry(){if(this.retryCount>=this.maxRetries){this.error="   .   .";return}this.retryCount++,await new Promise(t=>setTimeout(t,1e3)),await this.processReturn()},goHome(){const t=this.$route.query.returnTo||"HomePage";this.$router.push({name:t})},contactSupport(){window.open("https://t.me/aced_support","_blank")}}},i1e={class:"payment-return"},o1e={class:"return-container"},a1e={key:0,class:"loading-state"},l1e={key:0,class:"transaction-info"},c1e={key:1,class:"error-state"},u1e={key:0,class:"transaction-details"},d1e={class:"actions"},h1e={key:2,class:"pending-state"},f1e={key:0,class:"transaction-details"},p1e={class:"actions"};function m1e(t,e,s,r,n,i){return b(),S("div",i1e,[a("div",o1e,[n.loading?(b(),S("div",a1e,[e[5]||(e[5]=a("div",{class:"spinner"},null,-1)),e[6]||(e[6]=a("h2",null," ...",-1)),e[7]||(e[7]=a("p",null,", ",-1)),n.transactionId?(b(),S("div",l1e,[a("p",null,[a("small",null,"ID : "+p(n.transactionId),1)])])):W("",!0)])):n.error?(b(),S("div",c1e,[e[9]||(e[9]=a("div",{class:"error-icon"},"",-1)),e[10]||(e[10]=a("h2",null,"  ",-1)),a("p",null,p(n.error),1),n.transactionId?(b(),S("div",u1e,[a("p",null,[e[8]||(e[8]=a("strong",null,"ID :",-1)),re(" "+p(n.transactionId),1)])])):W("",!0),a("div",d1e,[a("button",{onClick:e[0]||(e[0]=(...o)=>i.retry&&i.retry(...o)),class:"retry-btn"}," "),a("button",{onClick:e[1]||(e[1]=(...o)=>i.goHome&&i.goHome(...o)),class:"home-btn"}," "),a("button",{onClick:e[2]||(e[2]=(...o)=>i.contactSupport&&i.contactSupport(...o)),class:"support-btn"},"")])])):n.pending?(b(),S("div",h1e,[e[12]||(e[12]=a("div",{class:"pending-icon"},"",-1)),e[13]||(e[13]=a("h2",null,"  ",-1)),e[14]||(e[14]=a("p",null,"   .     .",-1)),n.transactionId?(b(),S("div",f1e,[a("p",null,[e[11]||(e[11]=a("strong",null,"ID :",-1)),re(" "+p(n.transactionId),1)])])):W("",!0),a("div",p1e,[a("button",{onClick:e[3]||(e[3]=(...o)=>i.retry&&i.retry(...o)),class:"retry-btn"}," "),a("button",{onClick:e[4]||(e[4]=(...o)=>i.goHome&&i.goHome(...o)),class:"home-btn"}," ")])])):W("",!0)])])}const g1e=tt(n1e,[["render",m1e],["__scopeId","data-v-42c6d42b"]]),y1e={name:"PlacementTest",setup(){Ph();const t=xh(),e=Se("subject-select"),s=Se(null),r=Se(0),n=Se(null),i=Se([]),o=[{id:"English",name:"English",icon:""},{id:"Mathematics",name:"Mathematics",icon:""},{id:"Science",name:"Science",icon:""},{id:"Literature",name:"Literature",icon:""},{id:"Physics",name:"Physics",icon:""},{id:"Chemistry",name:"Chemistry",icon:""},{id:"Biology",name:"Biology",icon:""}],l={English:[{question:"What is a noun?",options:["A person, place, or thing","An action word","A describing word","A connecting word"],correct:0,difficulty:1},{question:"Which sentence is correct?",options:["He don't like pizza","He doesn't likes pizza","He doesn't like pizza","He not like pizza"],correct:2,difficulty:2},{question:"What is a synonym for 'happy'?",options:["Sad","Joyful","Angry","Tired"],correct:1,difficulty:1},{question:"Identify the verb: 'The cat sleeps on the mat'",options:["cat","sleeps","mat","the"],correct:1,difficulty:2},{question:"What is an adjective?",options:["Action word","Describing word","Person or thing","Connecting word"],correct:1,difficulty:1},{question:"Choose the correct form: 'I ___ to school yesterday'",options:["go","goes","went","going"],correct:2,difficulty:2},{question:"What is a metaphor?",options:["Direct comparison using like/as","Exaggeration","Comparison without like/as","Sound words"],correct:2,difficulty:3},{question:"Which word is spelled correctly?",options:["recieve","receive","recive","receeve"],correct:1,difficulty:2},{question:"What is alliteration?",options:["Rhyming words","Repeated consonant sounds","Opposite meanings","Similar meanings"],correct:1,difficulty:3},{question:"Identify the subject: 'The quick brown fox jumps'",options:["quick","brown","fox","jumps"],correct:2,difficulty:2},{question:"What is an antonym for 'difficult'?",options:["Hard","Easy","Complex","Tough"],correct:1,difficulty:1},{question:"Which is a proper noun?",options:["city","London","building","street"],correct:1,difficulty:2},{question:"What tense is 'will go'?",options:["Past","Present","Future","Present perfect"],correct:2,difficulty:2},{question:"What is a simile?",options:["Direct comparison","Comparison using like/as","Exaggeration","Personification"],correct:1,difficulty:3},{question:"Choose the correct article: '___ apple a day'",options:["A","An","The","No article"],correct:1,difficulty:2},{question:"What is personification?",options:["Human qualities to non-human things","Comparison","Rhyme","Repetition"],correct:0,difficulty:3},{question:"Which is a compound word?",options:["Beautiful","Bookshelf","Running","Happiness"],correct:1,difficulty:2},{question:"What is an adverb?",options:["Describes a noun","Describes a verb","Action word","Naming word"],correct:1,difficulty:2},{question:"Choose the correct pronoun: 'John and ___ went'",options:["me","I","myself","mine"],correct:1,difficulty:3},{question:"What is onomatopoeia?",options:["Rhyming","Sound words","Repetition","Comparison"],correct:1,difficulty:3},{question:"Which sentence has correct punctuation?",options:["Hello, how are you","Hello how are you?","Hello, how are you?","Hello how, are you?"],correct:2,difficulty:2},{question:"What is a conjunction?",options:["Action word","Describing word","Connecting word","Naming word"],correct:2,difficulty:2},{question:"Choose the correct form: 'She ___ been waiting'",options:["have","has","had","having"],correct:1,difficulty:3},{question:"What is hyperbole?",options:["Comparison","Exaggeration","Sound words","Repetition"],correct:1,difficulty:3},{question:"Which is a plural noun?",options:["Child","Children","Mouse","Foot"],correct:1,difficulty:1},{question:"What is the past participle of 'go'?",options:["Went","Going","Gone","Goes"],correct:2,difficulty:3},{question:"Choose the correct form: 'Neither Jack nor Jill ___ here'",options:["is","are","was","were"],correct:0,difficulty:4},{question:"What is an oxymoron?",options:["Contradictory terms together","Exaggeration","Repetition","Rhyme"],correct:0,difficulty:4},{question:"Which sentence uses passive voice?",options:["I wrote the letter","The letter was written by me","I am writing","I will write"],correct:1,difficulty:4},{question:"What is euphemism?",options:["Harsh expression","Mild expression for harsh reality","Exaggeration","Comparison"],correct:1,difficulty:4},{question:"Choose the correct form: 'If I ___ rich, I would travel'",options:["am","was","were","be"],correct:2,difficulty:4},{question:"What is anaphora?",options:["Repetition at end","Repetition at beginning","No repetition","Random repetition"],correct:1,difficulty:5},{question:"Which is a gerund: 'Swimming is fun'",options:["is","fun","Swimming","None"],correct:2,difficulty:4},{question:"What is synecdoche?",options:["Part represents whole","Whole represents part","Direct comparison","Exaggeration"],correct:0,difficulty:5},{question:"Choose correct form: 'I wish I ___ studied harder'",options:["have","has","had","having"],correct:2,difficulty:4},{question:"What is metonymy?",options:["Using one thing to represent another related thing","Direct comparison","Exaggeration","Repetition"],correct:0,difficulty:5},{question:"Which shows correct comma use?",options:["I like apples oranges and pears","I like apples, oranges and pears","I like apples, oranges, and pears","I like, apples oranges and pears"],correct:2,difficulty:3},{question:"What is assonance?",options:["Consonant repetition","Vowel repetition","Word repetition","Phrase repetition"],correct:1,difficulty:4},{question:"Identify the infinitive: 'To learn is important'",options:["is","important","To learn","learn"],correct:2,difficulty:3},{question:"What is zeugma?",options:["Using word with two others in different senses","Repetition","Exaggeration","Comparison"],correct:0,difficulty:5}],Mathematics:[{question:"What is 5 + 7?",options:["10","11","12","13"],correct:2,difficulty:1},{question:"What is 15 - 8?",options:["6","7","8","9"],correct:1,difficulty:1},{question:"What is 6  4?",options:["20","22","24","26"],correct:2,difficulty:2},{question:"What is 36  6?",options:["5","6","7","8"],correct:1,difficulty:2},{question:"What is 25% of 80?",options:["15","20","25","30"],correct:1,difficulty:3},{question:"Solve: 3x + 5 = 20",options:["x = 3","x = 5","x = 10","x = 15"],correct:1,difficulty:4},{question:"What is the area of a rectangle 5cm  8cm?",options:["13 cm","26 cm","40 cm","80 cm"],correct:2,difficulty:3},{question:"What is 144?",options:["10","11","12","13"],correct:2,difficulty:3},{question:"If y = 2x + 3, what is y when x = 4?",options:["9","10","11","12"],correct:2,difficulty:4},{question:"What is the perimeter of a square with side 7cm?",options:["14 cm","21 cm","28 cm","49 cm"],correct:2,difficulty:2},{question:"What is 12 + 18?",options:["28","29","30","31"],correct:2,difficulty:1},{question:"What is 9  7?",options:["56","63","72","81"],correct:1,difficulty:2},{question:"What is 0.5 + 0.25?",options:["0.5","0.65","0.75","1.0"],correct:2,difficulty:2},{question:"What is 2?",options:["6","8","9","16"],correct:1,difficulty:2},{question:"What is the value of  (pi) approximately?",options:["2.14","3.14","4.14","5.14"],correct:1,difficulty:2},{question:"What is 40% of 200?",options:["60","70","80","90"],correct:2,difficulty:3},{question:"Solve: 2x - 4 = 10",options:["x = 3","x = 5","x = 7","x = 9"],correct:2,difficulty:3},{question:"What is the circumference of a circle with radius 7? (Use   22/7)",options:["22","44","88","154"],correct:1,difficulty:3},{question:"What is 81?",options:["7","8","9","10"],correct:2,difficulty:2},{question:"What is 5?",options:["10","15","20","25"],correct:3,difficulty:1},{question:"Simplify: 3/6",options:["1/3","1/2","2/3","3/4"],correct:1,difficulty:2},{question:"What is the volume of a cube with side 3cm?",options:["9 cm","18 cm","27 cm","81 cm"],correct:2,difficulty:3},{question:"Solve: x/5 = 4",options:["x = 10","x = 15","x = 20","x = 25"],correct:2,difficulty:3},{question:"What is 15% of 60?",options:["6","7","8","9"],correct:3,difficulty:3},{question:"If a = 3 and b = 4, what is a + b?",options:["7","12","25","49"],correct:2,difficulty:3},{question:"What is the slope of y = 3x + 2?",options:["2","3","5","-3"],correct:1,difficulty:4},{question:"Solve: (x + 3)(x - 2) = 0",options:["x = -3 or 2","x = 3 or -2","x = -3 or -2","x = 3 or 2"],correct:0,difficulty:4},{question:"What is the sum of angles in a triangle?",options:["90","180","270","360"],correct:1,difficulty:2},{question:"What is log(100)?",options:["1","2","10","100"],correct:1,difficulty:4},{question:"Solve quadratic: x - 5x + 6 = 0",options:["x = 1, 6","x = 2, 3","x = -2, -3","x = 1, 5"],correct:1,difficulty:4},{question:"What is sin(90)?",options:["0","0.5","1","2/2"],correct:2,difficulty:4},{question:"What is the derivative of x?",options:["x","2x","x","2"],correct:1,difficulty:5},{question:"What is the integral of 2x?",options:["2","x","x","2x"],correct:2,difficulty:5},{question:"Solve: 2 = 16",options:["x = 2","x = 3","x = 4","x = 8"],correct:2,difficulty:4},{question:"What is the determinant of [[2,3],[1,4]]?",options:["5","6","8","11"],correct:0,difficulty:5},{question:"What is lim(x0) (sin x)/x?",options:["0","1","","undefined"],correct:1,difficulty:5},{question:"What is cos(0)?",options:["0","0.5","1","-1"],correct:2,difficulty:3},{question:"Solve system: x+y=5, x-y=1",options:["x=2,y=3","x=3,y=2","x=4,y=1","x=1,y=4"],correct:1,difficulty:4},{question:"What is  x dx?",options:["0","1/2","1","2"],correct:1,difficulty:5},{question:"What is e^(ln 5)?",options:["1","e","5","ln 5"],correct:2,difficulty:5}],Science:[{question:"What is H2O?",options:["Oxygen","Water","Hydrogen","Carbon dioxide"],correct:1,difficulty:1},{question:"How many planets are in our solar system?",options:["7","8","9","10"],correct:1,difficulty:1},{question:"What gas do plants produce?",options:["Carbon dioxide","Nitrogen","Oxygen","Hydrogen"],correct:2,difficulty:2},{question:"What is the center of an atom called?",options:["Electron","Proton","Neutron","Nucleus"],correct:3,difficulty:3},{question:"What is the boiling point of water?",options:["0C","50C","100C","150C"],correct:2,difficulty:2},{question:"What is photosynthesis?",options:["Plant breathing","Plant eating","Plant making food","Plant growing"],correct:2,difficulty:2},{question:"What is the speed of light?",options:["300,000 km/s","150,000 km/s","500,000 km/s","1,000,000 km/s"],correct:0,difficulty:4},{question:"What is DNA?",options:["A type of protein","Genetic material","A cell part","An enzyme"],correct:1,difficulty:3},{question:"What causes seasons on Earth?",options:["Distance from sun","Earth's tilt","Moon phases","Solar flares"],correct:1,difficulty:3},{question:"What is an ecosystem?",options:["A type of animal","Living and non-living things interacting","A food chain","A habitat"],correct:1,difficulty:3},{question:"What is the freezing point of water?",options:["0C","-10C","10C","100C"],correct:0,difficulty:1},{question:"What gas do humans breathe in?",options:["Carbon dioxide","Nitrogen","Oxygen","Helium"],correct:2,difficulty:1},{question:"What is the largest planet?",options:["Earth","Mars","Jupiter","Saturn"],correct:2,difficulty:2},{question:"What is gravity?",options:["Force that pulls objects together","Type of energy","Form of light","Kind of gas"],correct:0,difficulty:2},{question:"What do plants need for photosynthesis?",options:["Sunlight, water, CO2","Only water","Only sunlight","Only CO2"],correct:0,difficulty:2},{question:"What is the closest star to Earth?",options:["Alpha Centauri","Sirius","The Sun","Polaris"],correct:2,difficulty:1},{question:"What is evaporation?",options:["Liquid to gas","Gas to liquid","Solid to liquid","Liquid to solid"],correct:0,difficulty:2},{question:"What are the three states of matter?",options:["Solid, liquid, gas","Hot, cold, warm","Big, small, medium","Hard, soft, medium"],correct:0,difficulty:1},{question:"What is a carnivore?",options:["Plant eater","Meat eater","Both eater","Neither"],correct:1,difficulty:2},{question:"What is the chemical formula for carbon dioxide?",options:["CO","CO2","C2O","O2C"],correct:1,difficulty:2},{question:"What is inertia?",options:["Resistance to change in motion","Type of energy","Form of matter","Kind of force"],correct:0,difficulty:3},{question:"What is the smallest particle of an element?",options:["Molecule","Atom","Electron","Proton"],correct:1,difficulty:2},{question:"What is a herbivore?",options:["Meat eater","Plant eater","Both eater","Neither"],correct:1,difficulty:1},{question:"What causes day and night?",options:["Earth's rotation","Moon's rotation","Sun's movement","Star movement"],correct:0,difficulty:2},{question:"What is the Milky Way?",options:["A planet","A star","Our galaxy","A constellation"],correct:2,difficulty:2},{question:"What is condensation?",options:["Gas to liquid","Liquid to gas","Solid to liquid","Liquid to solid"],correct:0,difficulty:2},{question:"What is Newton's Third Law?",options:["F=ma","Every action has equal opposite reaction","Objects at rest stay at rest","Energy is conserved"],correct:1,difficulty:3},{question:"What is the atomic number?",options:["Number of neutrons","Number of protons","Number of electrons","Total particles"],correct:1,difficulty:3},{question:"What is the greenhouse effect?",options:["Trapping heat in atmosphere","Plant growth","Cloud formation","Rain cycle"],correct:0,difficulty:3},{question:"What is a black hole?",options:["Empty space","Region of extreme gravity","Dark planet","Exploded star"],correct:1,difficulty:4},{question:"What is entropy?",options:["Order in system","Disorder in system","Energy type","Force type"],correct:1,difficulty:4},{question:"What is the Doppler effect?",options:["Change in frequency due to motion","Light bending","Sound reflection","Wave interference"],correct:0,difficulty:4},{question:"What is nuclear fusion?",options:["Splitting atoms","Combining atoms","Atom decay","Electron transfer"],correct:1,difficulty:4},{question:"What is dark matter?",options:["Black paint","Invisible matter affecting gravity","Dark energy","Empty space"],correct:1,difficulty:5},{question:"What is quantum entanglement?",options:["Particle correlation","Wave interference","Energy transfer","Matter creation"],correct:0,difficulty:5},{question:"What is Heisenberg's Uncertainty Principle?",options:["Cannot know position and momentum precisely","Energy is uncertain","Time is relative","Matter is uncertain"],correct:0,difficulty:5},{question:"What is antimatter?",options:["Dark matter","Opposite charge particles","Empty space","Negative energy"],correct:1,difficulty:5},{question:"What is the speed of sound (approx)?",options:["343 m/s","3000 m/s","300,000 km/s","1000 m/s"],correct:0,difficulty:3},{question:"What is Schrdinger's cat about?",options:["Quantum superposition","Pet care","Chemistry","Biology"],correct:0,difficulty:5},{question:"What is the half-life?",options:["Time for half decay","Time to live","Half mass","Half energy"],correct:0,difficulty:4}],Literature:[{question:"Who wrote 'Romeo and Juliet'?",options:["Charles Dickens","William Shakespeare","Jane Austen","Mark Twain"],correct:1,difficulty:2},{question:"What is a protagonist?",options:["Main character","Villain","Setting","Theme"],correct:0,difficulty:2},{question:"What is a haiku?",options:["Long story","Short poem","Play","Novel"],correct:1,difficulty:2},{question:"Who wrote '1984'?",options:["George Orwell","Aldous Huxley","Ray Bradbury","H.G. Wells"],correct:0,difficulty:3},{question:"What is an antagonist?",options:["Hero","Opponent of hero","Setting","Narrator"],correct:1,difficulty:2},{question:"What is foreshadowing?",options:["Past events","Hints about future","Character description","Setting details"],correct:1,difficulty:3},{question:"Who wrote 'Pride and Prejudice'?",options:["Emily Bront","Jane Austen","Charlotte Bront","Virginia Woolf"],correct:1,difficulty:3},{question:"What is a sonnet?",options:["14-line poem","Short story","Long novel","Three-act play"],correct:0,difficulty:3},{question:"What is irony?",options:["Rhyming words","Opposite of what's expected","Comparison","Repetition"],correct:1,difficulty:3},{question:"Who wrote 'The Great Gatsby'?",options:["Ernest Hemingway","F. Scott Fitzgerald","John Steinbeck","William Faulkner"],correct:1,difficulty:3},{question:"What is a theme?",options:["Main character","Central idea","Setting","Plot"],correct:1,difficulty:2},{question:"Who wrote 'To Kill a Mockingbird'?",options:["Harper Lee","Toni Morrison","Alice Walker","Maya Angelou"],correct:0,difficulty:2},{question:"What is a metaphor in literature?",options:["Direct comparison","Indirect comparison","Rhyme","Rhythm"],correct:1,difficulty:2},{question:"Who wrote 'Hamlet'?",options:["Christopher Marlowe","William Shakespeare","Ben Jonson","John Milton"],correct:1,difficulty:2},{question:"What is the climax of a story?",options:["Beginning","Turning point","End","Exposition"],correct:1,difficulty:2},{question:"Who wrote 'The Odyssey'?",options:["Virgil","Homer","Sophocles","Euripides"],correct:1,difficulty:3},{question:"What is stream of consciousness?",options:["River description","Narrative technique showing thoughts","Type of poem","Writing style"],correct:1,difficulty:4},{question:"Who wrote 'Brave New World'?",options:["George Orwell","Ray Bradbury","Aldous Huxley","Philip K. Dick"],correct:2,difficulty:3},{question:"What is magical realism?",options:["Pure fantasy","Blend of realistic and magical elements","Science fiction","Horror genre"],correct:1,difficulty:4},{question:"Who wrote 'Wuthering Heights'?",options:["Charlotte Bront","Emily Bront","Jane Austen","George Eliot"],correct:1,difficulty:3},{question:"What is blank verse?",options:["Unrhymed iambic pentameter","Free verse","Rhymed poetry","Prose"],correct:0,difficulty:4},{question:"Who wrote 'Moby Dick'?",options:["Herman Melville","Nathaniel Hawthorne","Edgar Allan Poe","Mark Twain"],correct:0,difficulty:3},{question:"What is an epic?",options:["Short story","Long narrative poem","Play","Novel"],correct:1,difficulty:2},{question:"Who wrote 'The Catcher in the Rye'?",options:["J.D. Salinger","Jack Kerouac","Allen Ginsberg","William Burroughs"],correct:0,difficulty:3},{question:"What is symbolism?",options:["Direct meaning","Using symbols for deeper meaning","Rhyme scheme","Plot device"],correct:1,difficulty:3},{question:"Who wrote 'Crime and Punishment'?",options:["Leo Tolstoy","Fyodor Dostoevsky","Anton Chekhov","Ivan Turgenev"],correct:1,difficulty:3},{question:"What is a bildungsroman?",options:["War novel","Coming-of-age story","Detective fiction","Romance"],correct:1,difficulty:4},{question:"Who wrote 'One Hundred Years of Solitude'?",options:["Jorge Luis Borges","Gabriel Garca Mrquez","Pablo Neruda","Octavio Paz"],correct:1,difficulty:4},{question:"What is dramatic irony?",options:["Audience knows more than characters","Characters know more","No one knows","Everyone knows"],correct:0,difficulty:3},{question:"Who wrote 'Mrs Dalloway'?",options:["Virginia Woolf","James Joyce","T.S. Eliot","Ezra Pound"],correct:0,difficulty:4},{question:"What is modernist literature?",options:["Traditional narrative","Experimental forms and consciousness","Medieval stories","Romantic poetry"],correct:1,difficulty:4},{question:"Who wrote 'The Divine Comedy'?",options:["Petrarch","Boccaccio","Dante","Chaucer"],correct:2,difficulty:3},{question:"What is postmodernism in literature?",options:["Before modernism","Skeptical of grand narratives","Traditional forms","Romantic style"],correct:1,difficulty:5},{question:"Who wrote 'Ulysses'?",options:["James Joyce","Samuel Beckett","Oscar Wilde","W.B. Yeats"],correct:0,difficulty:4},{question:"What is intertextuality?",options:["Writing within text","References to other texts","Text structure","Plot device"],correct:1,difficulty:5},{question:"Who wrote 'The Waste Land'?",options:["Ezra Pound","T.S. Eliot","W.H. Auden","Robert Frost"],correct:1,difficulty:4},{question:"What is the unreliable narrator?",options:["Narrator who tells truth","Narrator whose credibility is questionable","Third person narrator","Omniscient narrator"],correct:1,difficulty:4},{question:"Who won Nobel Prize for 'The Old Man and the Sea'?",options:["William Faulkner","Ernest Hemingway","John Steinbeck","Sinclair Lewis"],correct:1,difficulty:3},{question:"What is metafiction?",options:["About fiction itself","Science fiction","Historical fiction","Romance fiction"],correct:0,difficulty:5},{question:"Who wrote 'In Search of Lost Time'?",options:["Marcel Proust","Andr Gide","Albert Camus","Jean-Paul Sartre"],correct:0,difficulty:5}],Physics:[{question:"What is the SI unit of force?",options:["Joule","Newton","Watt","Pascal"],correct:1,difficulty:2},{question:"What is Newton's First Law?",options:["F = ma","Object at rest stays at rest","Action-reaction","Gravity"],correct:1,difficulty:3},{question:"What is the formula for velocity?",options:["v = d/t","v = m/t","v = f  ","v = at"],correct:0,difficulty:2},{question:"What is kinetic energy?",options:["Stored energy","Energy of motion","Heat energy","Light energy"],correct:1,difficulty:3},{question:"What is acceleration?",options:["Speed","Distance over time","Change in velocity","Force"],correct:2,difficulty:2},{question:"What is the unit of power?",options:["Joule","Watt","Newton","Ampere"],correct:1,difficulty:3},{question:"What is potential energy?",options:["Motion energy","Stored energy","Heat energy","Sound energy"],correct:1,difficulty:2},{question:"What is the speed of sound in air?",options:["343 m/s","3000 m/s","300,000 km/s","150 m/s"],correct:0,difficulty:4},{question:"What is momentum?",options:["Force","Mass  velocity","Energy","Acceleration"],correct:1,difficulty:3},{question:"What is gravity on Earth?",options:["8.8 m/s","9.8 m/s","10.8 m/s","11.8 m/s"],correct:1,difficulty:2},{question:"What is Newton's Second Law?",options:["Inertia","F = ma","Action-reaction","Gravity"],correct:1,difficulty:2},{question:"What is work in physics?",options:["Force  distance","Mass  velocity","Power  time","Energy  time"],correct:0,difficulty:2},{question:"What is the unit of energy?",options:["Newton","Watt","Joule","Pascal"],correct:2,difficulty:2},{question:"What is friction?",options:["Resistance to motion","Type of energy","Form of power","Kind of force"],correct:0,difficulty:2},{question:"What is electromagnetic radiation?",options:["Sound waves","Light and similar waves","Heat only","Mechanical waves"],correct:1,difficulty:3},{question:"What is Ohm's Law?",options:["V = IR","F = ma","E = mc","P = IV"],correct:0,difficulty:3},{question:"What is the formula for work?",options:["W = Fd","W = ma","W = Pt","W = mv"],correct:0,difficulty:2},{question:"What is centripetal force?",options:["Outward force","Inward force in circular motion","Gravitational force","Frictional force"],correct:1,difficulty:3},{question:"What is the law of conservation of energy?",options:["Energy can be created","Energy cannot be destroyed","Energy stays constant","Energy always increases"],correct:1,difficulty:3},{question:"What is thermal energy?",options:["Motion energy","Heat energy","Light energy","Sound energy"],correct:1,difficulty:2},{question:"What is refraction?",options:["Light bouncing","Light bending","Light absorption","Light emission"],correct:1,difficulty:3},{question:"What is the Doppler Effect?",options:["Change in frequency due to motion","Light diffraction","Sound absorption","Wave interference"],correct:0,difficulty:4},{question:"What is the unit of electric current?",options:["Volt","Ampere","Ohm","Watt"],correct:1,difficulty:2},{question:"What is the formula for kinetic energy?",options:["KE = mv","KE = 1/2 mv","KE = mgh","KE = Fd"],correct:1,difficulty:3},{question:"What is simple harmonic motion?",options:["Linear motion","Oscillatory motion","Circular motion","Random motion"],correct:1,difficulty:4},{question:"What is Young's modulus?",options:["Elasticity measure","Viscosity measure","Density measure","Pressure measure"],correct:0,difficulty:4},{question:"What is the photoelectric effect?",options:["Light creating current","Light bending","Light reflection","Light absorption"],correct:0,difficulty:4},{question:"What is wave-particle duality?",options:["Waves are particles","Light behaves as both wave and particle","Only waves exist","Only particles exist"],correct:1,difficulty:5},{question:"What is the Heisenberg Uncertainty Principle?",options:["Everything is certain","Position and momentum cannot both be precise","Energy is uncertain","Time is relative"],correct:1,difficulty:5},{question:"What is special relativity about?",options:["Gravity","Motion at high speeds","Quantum mechanics","Thermodynamics"],correct:1,difficulty:4},{question:"What is E=mc?",options:["Energy-mass equivalence","Force formula","Power formula","Work formula"],correct:0,difficulty:3},{question:"What is entropy?",options:["Order","Disorder in a system","Energy","Force"],correct:1,difficulty:4},{question:"What is the strong nuclear force?",options:["Gravity","Electromagnetic force","Force binding nucleus","Weak force"],correct:2,difficulty:4},{question:"What is superconductivity?",options:["Very high resistance","Zero electrical resistance","High conductivity","Low resistance"],correct:1,difficulty:5},{question:"What is quantum tunneling?",options:["Digging tunnels","Particle passing through barrier","Wave reflection","Energy absorption"],correct:1,difficulty:5},{question:"What is the Higgs boson?",options:["Type of atom","Particle giving mass","Energy particle","Force carrier"],correct:1,difficulty:5},{question:"What is string theory?",options:["Music theory","Fundamental particles as strings","Rope physics","Wave theory"],correct:1,difficulty:5},{question:"What is dark energy?",options:["Black holes","Energy causing universe expansion","Dark matter","Negative energy"],correct:1,difficulty:5},{question:"What is the Pauli Exclusion Principle?",options:["Fermions cannot occupy same state","Bosons repel","Energy quantization","Wave-particle duality"],correct:0,difficulty:5},{question:"What is Planck's constant used for?",options:["Gravity","Quantum mechanics","Relativity","Thermodynamics"],correct:1,difficulty:4}],Chemistry:[{question:"What is the chemical symbol for Gold?",options:["Go","Gd","Au","Ag"],correct:2,difficulty:2},{question:"What is an atom?",options:["Smallest unit of element","A molecule","A compound","An ion"],correct:0,difficulty:2},{question:"What is H2SO4?",options:["Hydrochloric acid","Sulfuric acid","Nitric acid","Carbonic acid"],correct:1,difficulty:3},{question:"What is a molecule?",options:["Single atom","Two or more atoms bonded","An ion","An element"],correct:1,difficulty:2},{question:"What is the pH of a neutral solution?",options:["0","7","14","1"],correct:1,difficulty:2},{question:"What is NaCl?",options:["Sugar","Salt","Water","Acid"],correct:1,difficulty:1},{question:"What is oxidation?",options:["Gain electrons","Lose electrons","Gain protons","Lose neutrons"],correct:1,difficulty:4},{question:"What is the symbol for Iron?",options:["Ir","Fe","In","Fr"],correct:1,difficulty:2},{question:"What is a catalyst?",options:["Speeds up reaction","Slows reaction","Stops reaction","Creates reaction"],correct:0,difficulty:3},{question:"What is CO2?",options:["Carbon monoxide","Carbon dioxide","Calcium oxide","Cobalt"],correct:1,difficulty:1},{question:"What is the symbol for Sodium?",options:["S","So","Na","Sd"],correct:2,difficulty:2},{question:"What is a covalent bond?",options:["Electron sharing","Electron transfer","Proton sharing","Neutron sharing"],correct:0,difficulty:3},{question:"What is an ionic bond?",options:["Electron sharing","Electron transfer","Proton transfer","Neutron transfer"],correct:1,difficulty:3},{question:"What is the symbol for Oxygen?",options:["O","Ox","Og","Om"],correct:0,difficulty:1},{question:"What is an acid?",options:["pH > 7","pH < 7","pH = 7","pH = 0"],correct:1,difficulty:2},{question:"What is a base?",options:["pH < 7","pH > 7","pH = 7","pH = 14"],correct:1,difficulty:2},{question:"What is the periodic table?",options:["Element organization","Compound list","Molecule chart","Atom diagram"],correct:0,difficulty:2},{question:"What is the symbol for Helium?",options:["H","He","Hl","Hm"],correct:1,difficulty:1},{question:"What is reduction?",options:["Lose electrons","Gain electrons","Lose protons","Gain protons"],correct:1,difficulty:4},{question:"What is the symbol for Carbon?",options:["Ca","C","Cb","Cr"],correct:1,difficulty:1},{question:"What is an endothermic reaction?",options:["Releases heat","Absorbs heat","No heat change","Creates heat"],correct:1,difficulty:3},{question:"What is an exothermic reaction?",options:["Absorbs heat","Releases heat","No heat change","Destroys heat"],correct:1,difficulty:3},{question:"What is the symbol for Nitrogen?",options:["Ni","N","Nt","Nr"],correct:1,difficulty:1},{question:"What is Avogadro's number?",options:["6.02  10","3.14  10","9.8  10","1.6  10"],correct:0,difficulty:4},{question:"What is a noble gas?",options:["Reactive gas","Inert gas","Toxic gas","Heavy gas"],correct:1,difficulty:3},{question:"What is the symbol for Silver?",options:["Si","Ag","Sr","Sv"],correct:1,difficulty:2},{question:"What is a chemical equation?",options:["Math formula","Representation of reaction","Chemical formula","Element list"],correct:1,difficulty:2},{question:"What is the molar mass of water (H2O)?",options:["16 g/mol","18 g/mol","20 g/mol","22 g/mol"],correct:1,difficulty:3},{question:"What is electronegativity?",options:["Atom's ability to attract electrons","Positive charge","Negative charge","Neutral charge"],correct:0,difficulty:4},{question:"What is the symbol for Copper?",options:["Co","Cp","Cu","Cr"],correct:2,difficulty:2},{question:"What is a polymer?",options:["Single molecule","Large molecule from repeating units","Small molecule","Atom chain"],correct:1,difficulty:3},{question:"What is equilibrium in chemistry?",options:["One direction","Forward and reverse rates equal","No reaction","Complete reaction"],correct:1,difficulty:4},{question:"What is the symbol for Potassium?",options:["P","K","Po","Pt"],correct:1,difficulty:2},{question:"What is Le Chatelier's principle?",options:["System responds to stress","Energy conservation","Mass conservation","Charge conservation"],correct:0,difficulty:4},{question:"What is organic chemistry?",options:["Study of metals","Study of carbon compounds","Study of gases","Study of acids"],correct:1,difficulty:3},{question:"What is the symbol for Lead?",options:["L","Ld","Pb","Pl"],correct:2,difficulty:3},{question:"What is quantum chemistry?",options:["Old chemistry","Chemistry using quantum mechanics","Classical chemistry","Basic chemistry"],correct:1,difficulty:5},{question:"What is a Lewis structure?",options:["Molecular geometry","Electron dot diagram","Orbital diagram","Energy diagram"],correct:1,difficulty:4},{question:"What is the Haber process?",options:["Making steel","Synthesizing ammonia","Refining oil","Producing acids"],correct:1,difficulty:4},{question:"What is spectroscopy?",options:["Study of spectra","Study of speed","Study of space","Study of species"],correct:0,difficulty:5}],Biology:[{question:"What is the powerhouse of the cell?",options:["Nucleus","Mitochondria","Ribosome","Chloroplast"],correct:1,difficulty:2},{question:"What is DNA short for?",options:["Deoxyribonucleic acid","Dinitrogen acid","Dynamic nuclear acid","Dextrose acid"],correct:0,difficulty:3},{question:"What do red blood cells carry?",options:["Nutrients","Oxygen","Waste","Hormones"],correct:1,difficulty:2},{question:"What is the largest organ?",options:["Heart","Brain","Skin","Liver"],correct:2,difficulty:2},{question:"What is photosynthesis?",options:["Cell division","Making food from sunlight","Respiration","Digestion"],correct:1,difficulty:2},{question:"How many chromosomes do humans have?",options:["23","46","48","52"],correct:1,difficulty:3},{question:"What is an enzyme?",options:["Protein that speeds reactions","Type of cell","Hormone","Vitamin"],correct:0,difficulty:3},{question:"What is evolution?",options:["Growth","Change over time","Reproduction","Adaptation"],correct:1,difficulty:3},{question:"What is osmosis?",options:["Cell division","Water movement across membrane","Protein synthesis","Energy production"],correct:1,difficulty:4},{question:"What are genes made of?",options:["Proteins","DNA","RNA","Lipids"],correct:1,difficulty:3},{question:"What is the function of the nucleus?",options:["Energy production","Contains genetic material","Protein synthesis","Waste removal"],correct:1,difficulty:2},{question:"What is cellular respiration?",options:["Breathing","Converting glucose to energy","Photosynthesis","Cell division"],correct:1,difficulty:3},{question:"What is a prokaryote?",options:["Cell with nucleus","Cell without nucleus","Plant cell","Animal cell"],correct:1,difficulty:3},{question:"What is a eukaryote?",options:["Cell without nucleus","Cell with nucleus","Bacteria","Virus"],correct:1,difficulty:3},{question:"What is mitosis?",options:["Sexual reproduction","Cell division for growth","Energy production","Protein synthesis"],correct:1,difficulty:3},{question:"What is meiosis?",options:["Cell division for growth","Cell division for sex cells","Energy production","Protein synthesis"],correct:1,difficulty:3},{question:"What is the function of ribosomes?",options:["Energy production","Protein synthesis","Genetic storage","Waste removal"],correct:1,difficulty:2},{question:"What is homeostasis?",options:["Cell division","Maintaining stable conditions","Energy production","Growth"],correct:1,difficulty:3},{question:"What are the four bases in DNA?",options:["A, B, C, D","A, T, G, C","A, U, G, C","W, X, Y, Z"],correct:1,difficulty:3},{question:"What is natural selection?",options:["Random change","Survival of fittest","Artificial breeding","Mutation"],correct:1,difficulty:3},{question:"What is an ecosystem?",options:["Single organism","Community of organisms and environment","Food chain","Population"],correct:1,difficulty:2},{question:"What is the difference between DNA and RNA?",options:["DNA has thymine, RNA has uracil","No difference","RNA is double-stranded","DNA is single-stranded"],correct:0,difficulty:4},{question:"What is the cell membrane?",options:["Cell powerhouse","Protective barrier around cell","Genetic material","Energy producer"],correct:1,difficulty:2},{question:"What is chlorophyll?",options:["Animal protein","Green pigment in plants","Type of cell","Enzyme"],correct:1,difficulty:2},{question:"What is a species?",options:["Group of similar individuals","Single organism","Type of cell","Ecosystem"],correct:0,difficulty:2},{question:"What is ATP?",options:["Type of DNA","Energy currency of cell","Protein","Enzyme"],correct:1,difficulty:3},{question:"What is mutation?",options:["Normal growth","Change in DNA sequence","Cell division","Energy production"],correct:1,difficulty:3},{question:"What is biodiversity?",options:["Single species","Variety of life","Population size","Food chain"],correct:1,difficulty:2},{question:"What is the function of chloroplasts?",options:["Energy from respiration","Photosynthesis","Protein synthesis","Waste removal"],correct:1,difficulty:2},{question:"What is a food chain?",options:["Energy flow through organisms","Cell structure","DNA sequence","Protein structure"],correct:0,difficulty:2},{question:"What is symbiosis?",options:["Competition","Close relationship between species","Predation","Parasitism only"],correct:1,difficulty:3},{question:"What is the endoplasmic reticulum?",options:["Energy producer","Protein and lipid synthesis network","Genetic material","Cell membrane"],correct:1,difficulty:4},{question:"What is the Golgi apparatus?",options:["Powerhouse","Packaging and shipping center","Genetic storage","Energy producer"],correct:1,difficulty:4},{question:"What is a genotype?",options:["Physical traits","Genetic makeup","Cell type","Organism size"],correct:1,difficulty:4},{question:"What is a phenotype?",options:["Genetic makeup","Observable characteristics","DNA sequence","Cell structure"],correct:1,difficulty:4},{question:"What is CRISPR?",options:["Gene editing tool","Protein","Cell part","Disease"],correct:0,difficulty:5},{question:"What is epigenetics?",options:["Gene changes without DNA sequence change","Mutation","Evolution","Natural selection"],correct:0,difficulty:5},{question:"What is the Central Dogma?",options:["DNA  RNA  Protein","Protein  RNA  DNA","RNA  DNA  Protein","DNA  Protein  RNA"],correct:0,difficulty:4},{question:"What are stem cells?",options:["Specialized cells","Undifferentiated cells","Dead cells","Cancer cells"],correct:1,difficulty:4},{question:"What is apoptosis?",options:["Cell growth","Programmed cell death","Cell division","Mutation"],correct:1,difficulty:5}]},c=Se([]),u=_e(()=>c.value.length),h=_e(()=>c.value[r.value]),f=_e(()=>(r.value+1)/u.value*100),m=_e(()=>i.value.filter(M=>M.correct).length),g=_e(()=>i.value.length-m.value),v=_e(()=>Math.round(m.value/i.value.length*100)),I=_e(()=>{const M=v.value;return M>=90?"Advanced":M>=75?"Intermediate":M>=60?"Pre-Intermediate":"Beginner"}),C=M=>{const A=o.find(w=>w.id===M);return A?A.icon:""},U=M=>{s.value=M,c.value=l[M],e.value="test"},D=M=>{n.value=M},E=()=>{if(n.value===null)return;const M=n.value===h.value.correct;i.value.push({questionIndex:r.value,selectedAnswer:n.value,correctAnswer:h.value.correct,correct:M}),r.value<u.value-1?(r.value++,n.value=null):L()},L=async()=>{var M;e.value="results";try{const A=await((M=pe.currentUser)==null?void 0:M.getIdToken()),w=t.state.firebaseUserId||localStorage.getItem("firebaseUserId");A&&w&&await ae.post(`learning-mode/placement-test/${w}/complete`,{subject:s.value,totalQuestions:u.value,correctAnswers:m.value,wrongAnswers:g.value,scorePercentage:v.value,recommendedLevel:I.value,answers:i.value},{headers:{Authorization:`Bearer ${A}`}})}catch{}};return{currentScreen:e,availableSubjects:o,selectedSubject:s,currentQuestion:h,currentQuestionIndex:r,totalQuestions:u,selectedAnswer:n,progressPercentage:f,correctAnswers:m,wrongAnswers:g,scorePercentage:v,recommendedLevel:I,getSubjectIcon:C,selectSubject:U,selectAnswer:D,nextQuestion:E,retakeTest:()=>{r.value=0,n.value=null,i.value=[],e.value="subject-select"}}}},v1e={class:"placement-test"},_1e={key:0,class:"screen"},b1e={class:"container"},w1e={class:"subjects-grid"},S1e=["onClick"],E1e={class:"subject-icon"},T1e={class:"subject-name"},k1e={key:1,class:"screen test-screen"},I1e={class:"test-wrapper"},C1e={class:"test-sidebar"},A1e={class:"test-info"},P1e={class:"subject-badge"},x1e={class:"badge-icon"},L1e={class:"badge-text"},R1e={class:"progress-section"},N1e={class:"progress-stats"},O1e={class:"progress-bar"},D1e={class:"test-main"},M1e={class:"question-container"},$1e={class:"question-header"},U1e={class:"question-number"},F1e={class:"question-text"},V1e={class:"options-list"},q1e=["onClick"],B1e={class:"option-radio"},j1e={key:0,class:"radio-dot"},H1e={class:"option-label"},z1e={class:"question-actions"},W1e=["disabled"],G1e={key:2,class:"screen"},K1e={class:"container results-container"},Y1e={class:"results-header"},Q1e={class:"results-content"},X1e={class:"score-card"},J1e={class:"score-circle"},Z1e={width:"200",height:"200",viewBox:"0 0 200 200"},e_e=["stroke-dashoffset"],t_e={x:"100",y:"95","text-anchor":"middle","font-size":"48","font-weight":"700",fill:"#111827"},s_e={class:"level-badge"},r_e={class:"level-value"},n_e={class:"stats-grid"},i_e={class:"stat-item"},o_e={class:"stat-info"},a_e={class:"stat-value"},l_e={class:"stat-item"},c_e={class:"stat-info"},u_e={class:"stat-value"},d_e={class:"stat-item"},h_e={class:"stat-info"},f_e={class:"stat-value"},p_e={class:"results-actions"};function m_e(t,e,s,r,n,i){return b(),S("div",v1e,[r.currentScreen==="subject-select"?(b(),S("div",_1e,[a("div",b1e,[e[4]||(e[4]=a("div",{class:"header"},[a("h1",null,"Placement Test"),a("p",null,"Choose a subject to assess your current level")],-1)),a("div",w1e,[(b(!0),S(he,null,be(r.availableSubjects,o=>(b(),S("button",{key:o.id,class:"subject-card",onClick:l=>r.selectSubject(o.id)},[a("div",E1e,p(o.icon),1),a("div",T1e,p(o.name),1),e[3]||(e[3]=a("div",{class:"subject-count"},"40 Questions",-1))],8,S1e))),128))])])])):r.currentScreen==="test"?(b(),S("div",k1e,[a("div",I1e,[a("div",C1e,[a("div",A1e,[a("div",P1e,[a("span",x1e,p(r.getSubjectIcon(r.selectedSubject)),1),a("span",L1e,p(r.selectedSubject),1)]),a("div",R1e,[e[5]||(e[5]=a("div",{class:"progress-label"},"Progress",-1)),a("div",N1e,p(r.currentQuestionIndex+1)+" / "+p(r.totalQuestions),1),a("div",O1e,[a("div",{class:"progress-fill",style:ct({width:r.progressPercentage+"%"})},null,4)])])])]),a("div",D1e,[a("div",M1e,[a("div",$1e,[a("span",U1e,"Question "+p(r.currentQuestionIndex+1),1)]),a("h2",F1e,p(r.currentQuestion.question),1),a("div",V1e,[(b(!0),S(he,null,be(r.currentQuestion.options,(o,l)=>(b(),S("button",{key:l,class:ye(["option-item",{selected:r.selectedAnswer===l}]),onClick:c=>r.selectAnswer(l)},[a("span",B1e,[r.selectedAnswer===l?(b(),S("span",j1e)):W("",!0)]),a("span",H1e,p(o),1)],10,q1e))),128))]),a("div",z1e,[a("button",{class:"btn-next",disabled:r.selectedAnswer===null,onClick:e[0]||(e[0]=(...o)=>r.nextQuestion&&r.nextQuestion(...o))},[re(p(r.currentQuestionIndex===r.totalQuestions-1?"Finish Test":"Next Question")+" ",1),e[6]||(e[6]=a("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[a("path",{d:"M7.5 15L12.5 10L7.5 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))],8,W1e)])])])])])):r.currentScreen==="results"?(b(),S("div",G1e,[a("div",K1e,[a("div",Y1e,[e[7]||(e[7]=a("div",{class:"results-icon"},[a("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none"},[a("circle",{cx:"32",cy:"32",r:"32",fill:"#10B981",opacity:"0.1"}),a("path",{d:"M20 32L28 40L44 24",stroke:"#10B981","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),e[8]||(e[8]=a("h1",null,"Test Complete!",-1)),a("p",null,"You've completed the "+p(r.selectedSubject)+" placement test",1)]),a("div",Q1e,[a("div",X1e,[a("div",J1e,[(b(),S("svg",Z1e,[e[9]||(e[9]=a("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#E5E7EB","stroke-width":"12"},null,-1)),a("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#3B82F6","stroke-width":"12","stroke-dasharray":"565.48","stroke-dashoffset":565.48-565.48*r.scorePercentage/100,transform:"rotate(-90 100 100)","stroke-linecap":"round"},null,8,e_e),a("text",t_e,p(r.scorePercentage)+"% ",1),e[10]||(e[10]=a("text",{x:"100",y:"115","text-anchor":"middle","font-size":"14",fill:"#6B7280"}," Your Score ",-1))]))]),a("div",s_e,[e[11]||(e[11]=a("span",{class:"level-label"},"Recommended Level:",-1)),a("span",r_e,p(r.recommendedLevel),1)])]),a("div",n_e,[a("div",i_e,[e[13]||(e[13]=a("div",{class:"stat-icon correct"},[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a("div",o_e,[a("div",a_e,p(r.correctAnswers),1),e[12]||(e[12]=a("div",{class:"stat-label"},"Correct",-1))])]),a("div",l_e,[e[15]||(e[15]=a("div",{class:"stat-icon wrong"},[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a("div",c_e,[a("div",u_e,p(r.wrongAnswers),1),e[14]||(e[14]=a("div",{class:"stat-label"},"Wrong",-1))])]),a("div",d_e,[e[17]||(e[17]=a("div",{class:"stat-icon total"},[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a("div",h_e,[a("div",f_e,p(r.totalQuestions),1),e[16]||(e[16]=a("div",{class:"stat-label"},"Total",-1))])])]),a("div",p_e,[a("button",{class:"btn-primary",onClick:e[1]||(e[1]=o=>t.$router.push("/profile/catalogue"))}," Start Learning "),a("button",{class:"btn-secondary",onClick:e[2]||(e[2]=(...o)=>r.retakeTest&&r.retakeTest(...o))}," Take Another Test ")])])])])):W("",!0)])}const g_e=tt(y1e,[["render",m_e],["__scopeId","data-v-eaab5d80"]]),y_e={name:"LevelTest",setup(){const t=Ph(),e=AD(),s=xh(),r=Se(e.query.subject||sessionStorage.getItem("testSubject")||"General"),n=Se(parseInt(e.query.level)||s.getters["platformMode/currentLevelCap"]||1),i=Se(0),o=Se(null),l=Se([]),c=Se(!1),u=Se([]),h=()=>{const A=[{question:"What is the main topic of this lesson?",answers:["Grammar","Vocabulary","Pronunciation","Writing"],correct:0},{question:"Which of the following is correct?",answers:["Option A","Option B","Option C","Option D"],correct:1},{question:"Select the best answer:",answers:["Answer 1","Answer 2","Answer 3","Answer 4"],correct:2},{question:"Choose the correct statement:",answers:["Statement A","Statement B","Statement C","Statement D"],correct:0},{question:"What does this concept mean?",answers:["Definition 1","Definition 2","Definition 3","Definition 4"],correct:3}],w=Math.min(20,A.length*4),_=[];for(let P=0;P<w;P++){const R=A[P%A.length];_.push({...R,id:P,question:`${r.value} Q${P+1}: ${R.question}`})}u.value=_},f=_e(()=>u.value[i.value]),m=_e(()=>i.value===u.value.length-1),g=_e(()=>(i.value+1)/u.value.length*100),v=_e(()=>l.value.filter((A,w)=>A===u.value[w].correct).length),I=_e(()=>Math.round(v.value/u.value.length*100)),C=_e(()=>I.value>=70),U=A=>{o.value=A},D=()=>{l.value[i.value]=o.value,m.value?(c.value=!0,E()):(i.value++,o.value=null)},E=()=>{try{const A={subject:r.value,level:n.value,score:I.value,passed:C.value,correctAnswers:v.value,totalQuestions:u.value.length,timestamp:Date.now()},w=JSON.parse(localStorage.getItem("levelTests")||"[]");w.push(A),localStorage.setItem("levelTests",JSON.stringify(w))}catch{}},L=()=>{i.value=0,o.value=null,l.value=[],c.value=!1,h()},$=()=>{t.back()},M=()=>{t.push({name:"CataloguePage"})};return br(()=>{h()}),{subject:r,targetLevel:n,currentQuestionIndex:i,selectedAnswer:o,showResults:c,questions:u,currentQuestion:f,isLastQuestion:m,progressPercentage:g,correctAnswers:v,score:I,passed:C,selectAnswer:U,nextQuestion:D,retakeTest:L,goBack:$,goToCourses:M}}},v_e={class:"level-test-container"},__e={class:"test-header"},b_e={class:"test-info"},w_e={class:"test-title"},S_e={class:"test-subtitle"},E_e={class:"progress-section"},T_e={class:"progress-bar"},k_e={class:"progress-text"},I_e={key:0,class:"test-content"},C_e={class:"question-card"},A_e={class:"question-number"},P_e={class:"question-text"},x_e={class:"answers-grid"},L_e=["onClick"],R_e={class:"answer-letter"},N_e={class:"answer-text"},O_e={class:"question-actions"},D_e=["disabled"],M_e={key:1,class:"results-screen"},$_e={class:"results-card"},U_e={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},F_e={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},V_e={class:"results-title"},q_e={class:"results-message"},B_e={class:"results-stats"},j_e={class:"stat-item"},H_e={class:"stat-value"},z_e={class:"stat-item"},W_e={class:"stat-value"},G_e={class:"stat-item"},K_e={class:"stat-value"},Y_e={class:"results-actions"};function Q_e(t,e,s,r,n,i){return b(),S("div",v_e,[a("div",__e,[a("button",{class:"back-btn",onClick:e[0]||(e[0]=(...o)=>r.goBack&&r.goBack(...o))},e[4]||(e[4]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),re(" Back ")])),a("div",b_e,[a("h1",w_e,p(r.subject)+" Level Test",1),a("p",S_e,"Level "+p(r.targetLevel)+" Assessment",1)])]),a("div",E_e,[a("div",T_e,[a("div",{class:"progress-fill",style:ct({width:r.progressPercentage+"%"})},null,4)]),a("div",k_e," Question "+p(r.currentQuestionIndex+1)+" of "+p(r.questions.length),1)]),r.showResults?(b(),S("div",M_e,[a("div",$_e,[a("div",{class:ye(["results-icon",r.passed?"success":"fail"])},[r.passed?(b(),S("svg",U_e,e[6]||(e[6]=[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),a("path",{d:"M22 4L12 14.01l-3-3"},null,-1)]))):(b(),S("svg",F_e,e[7]||(e[7]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)])))],2),a("h2",V_e,p(r.passed?"Congratulations!":"Keep Practicing!"),1),a("p",q_e,p(r.passed?`You've passed the Level ${r.targetLevel} test!`:`You scored ${r.score}%. Keep learning to improve!`),1),a("div",B_e,[a("div",j_e,[a("div",H_e,p(r.correctAnswers)+"/"+p(r.questions.length),1),e[8]||(e[8]=a("div",{class:"stat-label"},"Correct Answers",-1))]),a("div",z_e,[a("div",W_e,p(r.score)+"%",1),e[9]||(e[9]=a("div",{class:"stat-label"},"Score",-1))]),a("div",G_e,[a("div",K_e,p(r.passed?"Pass":"Fail"),1),e[10]||(e[10]=a("div",{class:"stat-label"},"Result",-1))])]),a("div",Y_e,[a("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...o)=>r.goToCourses&&r.goToCourses(...o))},p(r.passed?"Continue Learning":"Back to Courses"),1),r.passed?W("",!0):(b(),S("button",{key:0,class:"secondary-btn",onClick:e[3]||(e[3]=(...o)=>r.retakeTest&&r.retakeTest(...o))}," Retake Test "))])])])):(b(),S("div",I_e,[a("div",C_e,[a("div",A_e,"Question "+p(r.currentQuestionIndex+1),1),a("h2",P_e,p(r.currentQuestion.question),1),a("div",x_e,[(b(!0),S(he,null,be(r.currentQuestion.answers,(o,l)=>(b(),S("button",{key:l,class:ye(["answer-btn",{selected:r.selectedAnswer===l}]),onClick:c=>r.selectAnswer(l)},[a("span",R_e,p(String.fromCharCode(65+l)),1),a("span",N_e,p(o),1)],10,L_e))),128))]),a("div",O_e,[a("button",{class:"next-btn",disabled:r.selectedAnswer===null,onClick:e[1]||(e[1]=(...o)=>r.nextQuestion&&r.nextQuestion(...o))},[re(p(r.isLastQuestion?"Finish Test":"Next Question")+" ",1),e[5]||(e[5]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))],8,D_e)])])]))])}const X_e=tt(y_e,[["render",Q_e],["__scopeId","data-v-9f61e8d5"]]),J_e=()=>mt(()=>import("./MyCourses-CytMuQw6.js"),__vite__mapDeps([0,1])),Z_e=()=>mt(()=>import("./LessonPage-BuabhTMS.js"),__vite__mapDeps([2,3])),ebe=()=>mt(()=>import("./TopicFinished-DGhcAim0.js"),__vite__mapDeps([4,5])),tbe=()=>mt(()=>import("./TopicOverview-BdD0VZux.js"),__vite__mapDeps([6,7])),sbe=()=>mt(()=>Promise.resolve().then(()=>dG),void 0),rbe=()=>{const t=Jr.getters["user/userStatus"],e=localStorage.getItem("userStatus"),s=localStorage.getItem("subscriptionData");let r="free";if(s)try{const o=JSON.parse(s);o.plan&&o.expiryDate&&new Date<new Date(o.expiryDate)&&(r=o.plan)}catch{}const n=r!=="free"?r:t||e||"free";return["free","start","pro"].includes(n)?n:"free"},gl=(t,e,s)=>(r,n,i)=>{const o=rbe();if(e.includes(o))return i();sessionStorage.setItem("intendedRoute",JSON.stringify({path:r.path,query:r.query,params:r.params}));const c=e.includes("pro")?"pro":"start";return i({name:"PaymentSelection",params:{plan:c},query:{feature:t,requiredPlan:c,returnTo:r.path,message:s,provider:"multicard"}})},nbe=[{path:"/",name:"HomePage",component:aX,meta:{title:"Home"}},{path:"/about-us",name:"AboutUsPage",component:sbe,meta:{title:"About Us"}},{path:"/settings",name:"SettingsPage",component:jC,meta:{title:"Settings",requiresAuth:!0}},{path:"/placement-test",name:"PlacementTest",component:g_e,meta:{title:"Placement Test",requiresAuth:!0}},{path:"/level-test",name:"LevelTest",component:X_e,meta:{title:"Level Test",requiresAuth:!0}},{path:"/profile",component:vJ,meta:{requiresAuth:!0},children:[{path:"",redirect:"/profile/main"},{path:"main",name:"MainPage",component:Wle,meta:{title:"Home"}},{path:"catalogue",name:"CataloguePage",component:_ne,meta:{title:"Catalogue"}},{path:"my-courses",name:"MyCourses",component:J_e,meta:{title:"My Courses"}},{path:"updated-courses",name:"UpdatedCourses",component:vse,meta:{title:"Current Courses"}},{path:"diary",name:"DiaryPage",component:fge,meta:{title:"Diary"}},{path:"homeworks",name:"HomeworkList",component:Xhe,meta:{title:"Homework"}},{path:"analytics",name:"UserAnalyticsPanel",component:Fue,meta:{title:"Analytics"},beforeEnter:gl("analytics",["pro"],"Advanced analytics available with Pro subscription")},{path:"goal",name:"StudyGoal",component:Ade,meta:{title:"Study Goals"},beforeEnter:gl("goals",["start","pro"],"Goals available with Start subscription")},{path:"homework",name:"HomeworkHelp",component:rhe,meta:{title:"Homework Help"},beforeEnter:gl("homework_help",["start","pro"],"Homework help available with Start subscription")},{path:"tests",name:"ProfileTestsPage",component:Pye,meta:{title:"Tests"},beforeEnter:gl("tests",["start","pro"],"Tests available with Start subscription")},{path:"vocabulary",name:"ProfileVocabularyPage",component:KZ,meta:{title:"Vocabulary"},beforeEnter:gl("vocabulary",["start","pro"],"Vocabulary available with Start subscription")},{path:"homeworks/:id",name:"HomeworkPage",component:ape,props:t=>({homeworkId:t.params.id,...t.query}),meta:{title:"Complete Homework"}}]},{path:"/lesson/:id",name:"LessonPage",component:Z_e,props:!0,meta:{title:"Lesson"}},{path:"/topic/:id/overview",name:"TopicOverview",component:tbe,props:!0,meta:{title:"Topic Overview"}},{path:"/finished",name:"TopicFinished",component:ebe,meta:{requiresAuth:!0,title:"Topic Completed"}},{path:"/pay/:plan",name:"PaymentSelection",component:qp,props:t=>({plan:t.params.plan,userId:t.query.userId,userName:t.query.userName,userEmail:t.query.userEmail,currentPlan:t.query.currentPlan,provider:t.query.provider||"multicard",...t.query}),meta:{title:"Payment Method Selection",requiresAuth:!0},beforeEnter:(t,e,s)=>{if(!["start","pro"].includes(t.params.plan))return s({name:"SettingsPage",query:{error:"invalid_plan"}});s()}},{path:"/payment/checkout",name:"UniversalCheckout",component:qp,meta:{title:"Payment Checkout",requiresAuth:!0},props:t=>({plan:t.query.plan,userId:t.query.userId,userName:t.query.userName,userEmail:t.query.userEmail,currentPlan:t.query.currentPlan,provider:t.query.provider||"multicard",amount:t.query.amount,...t.query})},{path:"/payment/:provider/checkout",name:"ProviderCheckout",component:qp,props:t=>({provider:t.params.provider,plan:t.query.plan,userId:t.query.userId,userName:t.query.userName,userEmail:t.query.userEmail,currentPlan:t.query.currentPlan,amount:t.query.amount,...t.query}),meta:{title:"Payment Checkout",requiresAuth:!0},beforeEnter:(t,e,s)=>{if(!["payme","multicard","click","uzum"].includes(t.params.provider))return s({name:"PaymentSelection",params:{plan:t.query.plan||"start"}});s()}},{path:"/payment/success/:provider?",name:"UniversalPaymentSuccess",component:r1e,props:t=>({provider:t.params.provider||t.query.provider||"unknown",transactionId:t.query.transactionId||t.query.transaction_id,plan:t.query.plan,amount:t.query.amount,...t.query}),meta:{title:"Payment Successful"}},{path:"/payment/failed/:provider?",name:"UniversalPaymentFailed",component:Tw,props:t=>({provider:t.params.provider||t.query.provider||"unknown",error:t.query.error||t.query.errorMessage,transactionId:t.query.transactionId||t.query.transaction_id,...t.query}),meta:{title:"Payment Failed"}},{path:"/payment/return/:provider",name:"ProviderReturn",component:g1e,props:t=>({provider:t.params.provider,...t.query,...t.params}),meta:{title:"Processing Payment"},beforeEnter:(t,e,s)=>{if(!["payme","multicard","click","uzum"].includes(t.params.provider))return s({name:"UniversalPaymentFailed",params:{provider:"unknown"},query:{error:"Invalid payment provider"}});s()}},{path:"/payment/cancel/:provider?",name:"PaymentCancel",component:Tw,props:t=>({provider:t.params.provider||"unknown",error:"Payment was cancelled by user",cancelled:!0,...t.query}),meta:{title:"Payment Cancelled"}},{path:"/vocabulary/:language?",redirect:"/profile/vocabulary"},{path:"/payment/:plan?",redirect:t=>`/pay/${t.params.plan||"start"}`},{path:"/payme/:plan",redirect:t=>({name:"PaymentSelection",params:{plan:t.params.plan},query:{provider:"payme",...t.query}})},{path:"/:catchAll(.*)",name:"NotFound",redirect:"/"}],bc=ID({history:tD(),routes:nbe,scrollBehavior(t,e,s){return t.hash?{el:t.hash,behavior:"smooth",top:80}:s||{top:0}}});bc.beforeEach(async(t,e,s)=>{try{try{const{authInitPromise:i}=await mt(async()=>{const{authInitPromise:o}=await Promise.resolve().then(()=>T2e);return{authInitPromise:o}},void 0);await i}catch{}const r=Jr.getters.isLoggedIn,n=t.matched.some(i=>i.meta.requiresAuth);if(["LessonPage","TopicOverview"].includes(t.name))return s();if(n&&!r)return s({name:"HomePage",query:{redirect:t.fullPath,loginRequired:"true"}});if(t.name==="UniversalPaymentSuccess"){const i=sessionStorage.getItem("intendedRoute");if(i)try{const o=JSON.parse(i);sessionStorage.removeItem("intendedRoute"),setTimeout(()=>{bc.push(o)},3e3)}catch{}}s()}catch{s(!1)}});bc.afterEach((t,e)=>{const s="ACED - Educational Platform";if(document.title=t.meta.title?`${t.meta.title} - ACED`:s,Jr.getters.isLoggedIn&&!t.path.includes("/pay")){const r=Jr.getters["user/lastPaymentCheck"],n=5*60*1e3;(!r||Date.now()-r>n)&&Jr.dispatch("user/checkPendingPayments").catch(i=>{})}});bc.onError(t=>{t.name!=="NavigationDuplicated"&&(t.message.includes("Failed to fetch dynamically imported module")||t.message.includes("Loading chunk"))&&window.location.reload()});const xP=Object.freeze(Object.defineProperty({__proto__:null,default:bc},Symbol.toStringTag,{value:"Module"}));var H2e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ibe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wv(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var nd={exports:{}},Bp={exports:{}},jp={};/**
* @vue/compiler-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const xa=Symbol(""),da=Symbol(""),Sf=Symbol(""),wc=Symbol(""),Sv=Symbol(""),Ti=Symbol(""),Ev=Symbol(""),Tv=Symbol(""),Ef=Symbol(""),Tf=Symbol(""),Ka=Symbol(""),kf=Symbol(""),kv=Symbol(""),If=Symbol(""),Cf=Symbol(""),Af=Symbol(""),Pf=Symbol(""),xf=Symbol(""),Lf=Symbol(""),Iv=Symbol(""),Cv=Symbol(""),Wc=Symbol(""),Sc=Symbol(""),Rf=Symbol(""),Nf=Symbol(""),La=Symbol(""),Ya=Symbol(""),Of=Symbol(""),th=Symbol(""),LP=Symbol(""),sh=Symbol(""),Ec=Symbol(""),RP=Symbol(""),NP=Symbol(""),Df=Symbol(""),OP=Symbol(""),DP=Symbol(""),Mf=Symbol(""),Av=Symbol(""),Eo={[xa]:"Fragment",[da]:"Teleport",[Sf]:"Suspense",[wc]:"KeepAlive",[Sv]:"BaseTransition",[Ti]:"openBlock",[Ev]:"createBlock",[Tv]:"createElementBlock",[Ef]:"createVNode",[Tf]:"createElementVNode",[Ka]:"createCommentVNode",[kf]:"createTextVNode",[kv]:"createStaticVNode",[If]:"resolveComponent",[Cf]:"resolveDynamicComponent",[Af]:"resolveDirective",[Pf]:"resolveFilter",[xf]:"withDirectives",[Lf]:"renderList",[Iv]:"renderSlot",[Cv]:"createSlots",[Wc]:"toDisplayString",[Sc]:"mergeProps",[Rf]:"normalizeClass",[Nf]:"normalizeStyle",[La]:"normalizeProps",[Ya]:"guardReactiveProps",[Of]:"toHandlers",[th]:"camelize",[LP]:"capitalize",[sh]:"toHandlerKey",[Ec]:"setBlockTracking",[RP]:"pushScopeId",[NP]:"popScopeId",[Df]:"withCtx",[OP]:"unref",[DP]:"isRef",[Mf]:"withMemo",[Av]:"isMemoSame"};function MP(t){Object.getOwnPropertySymbols(t).forEach(e=>{Eo[e]=t[e]})}const obe={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},abe={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},lbe={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},cbe={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},is={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function $P(t,e=""){return{type:0,source:e,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:is}}function Ra(t,e,s,r,n,i,o,l=!1,c=!1,u=!1,h=is){return t&&(l?(t.helper(Ti),t.helper(Io(t.inSSR,u))):t.helper(ko(t.inSSR,u)),o&&t.helper(xf)),{type:13,tag:e,props:s,children:r,patchFlag:n,dynamicProps:i,directives:o,isBlock:l,disableTracking:c,isComponent:u,loc:h}}function fi(t,e=is){return{type:17,loc:e,elements:t}}function ar(t,e=is){return{type:15,loc:e,properties:t}}function qt(t,e){return{type:16,loc:is,key:Fe(t)?je(t,!0):t,value:e}}function je(t,e=!1,s=is,r=0){return{type:4,loc:s,content:t,isStatic:e,constType:e?3:r}}function ube(t,e){return{type:5,loc:e,content:Fe(t)?je(t,!1,e):t}}function yr(t,e=is){return{type:8,loc:e,children:t}}function Wt(t,e=[],s=is){return{type:14,loc:s,callee:t,arguments:e}}function To(t,e=void 0,s=!1,r=!1,n=is){return{type:18,params:t,returns:e,newline:s,isSlot:r,loc:n}}function rh(t,e,s,r=!0){return{type:19,test:t,consequent:e,alternate:s,newline:r,loc:is}}function UP(t,e,s=!1,r=!1){return{type:20,index:t,value:e,needPauseTracking:s,inVOnce:r,needArraySpread:!1,loc:is}}function FP(t){return{type:21,body:t,loc:is}}function dbe(t){return{type:22,elements:t,loc:is}}function hbe(t,e,s){return{type:23,test:t,consequent:e,alternate:s,loc:is}}function fbe(t,e){return{type:24,left:t,right:e,loc:is}}function pbe(t){return{type:25,expressions:t,loc:is}}function mbe(t){return{type:26,returns:t,loc:is}}function ko(t,e){return t||e?Ef:Tf}function Io(t,e){return t||e?Ev:Tv}function $f(t,{helper:e,removeHelper:s,inSSR:r}){t.isBlock||(t.isBlock=!0,s(ko(r,t.isComponent)),e(Ti),e(Io(r,t.isComponent)))}const kw=new Uint8Array([123,123]),Iw=new Uint8Array([125,125]);function Cw(t){return t>=97&&t<=122||t>=65&&t<=90}function ir(t){return t===32||t===10||t===9||t===12||t===13}function Kn(t){return t===47||t===62||ir(t)}function nh(t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++)e[s]=t.charCodeAt(s);return e}const Ss={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class gbe{constructor(e,s){this.stack=e,this.cbs=s,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=kw,this.delimiterClose=Iw,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=kw,this.delimiterClose=Iw}getPos(e){let s=1,r=e+1;for(let n=this.newlines.length-1;n>=0;n--){const i=this.newlines[n];if(e>i){s=n+2,r=e-i;break}}return{column:r,line:s,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const s=this.index+1-this.delimiterOpen.length;s>this.sectionStart&&this.cbs.ontext(this.sectionStart,s),this.state=3,this.sectionStart=s}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const s=this.sequenceIndex===this.currentSequence.length;if(!(s?Kn(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!s){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||ir(e)){const s=this.index-this.currentSequence.length;if(this.sectionStart<s){const r=this.index;this.index=s,this.cbs.ontext(this.sectionStart,s),this.index=r}this.sectionStart=s+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Ss.TitleEnd||this.currentSequence===Ss.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===Ss.Cdata[this.sequenceIndex]?++this.sequenceIndex===Ss.Cdata.length&&(this.state=28,this.currentSequence=Ss.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const s=this.buffer.charCodeAt(this.index);if(s===10&&this.newlines.push(this.index),s===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Ss.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,s){this.enterRCDATA(e,s),this.state=31}enterRCDATA(e,s){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=s}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):Cw(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){Kn(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(Kn(e)){const s=this.buffer.slice(this.sectionStart,this.index);s!=="template"&&this.enterRCDATA(nh("</"+s),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){ir(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=Cw(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||ir(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):ir(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):ir(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||Kn(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||Kn(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||Kn(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||Kn(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||Kn(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):ir(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):ir(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,s){(e===s||this.fastForwardTo(s))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){ir(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=Ss.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===Ss.ScriptEnd[3]?this.startSpecial(Ss.ScriptEnd,4):e===Ss.StyleEnd[3]?this.startSpecial(Ss.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===Ss.TitleEnd[3]?this.startSpecial(Ss.TitleEnd,4):e===Ss.TextareaEnd[3]?this.startSpecial(Ss.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const s=this.buffer.charCodeAt(this.index);switch(s===10&&this.newlines.push(this.index),this.state){case 1:{this.stateText(s);break}case 2:{this.stateInterpolationOpen(s);break}case 3:{this.stateInterpolation(s);break}case 4:{this.stateInterpolationClose(s);break}case 31:{this.stateSpecialStartSequence(s);break}case 32:{this.stateInRCDATA(s);break}case 26:{this.stateCDATASequence(s);break}case 19:{this.stateInAttrValueDoubleQuotes(s);break}case 12:{this.stateInAttrName(s);break}case 13:{this.stateInDirName(s);break}case 14:{this.stateInDirArg(s);break}case 15:{this.stateInDynamicDirArg(s);break}case 16:{this.stateInDirModifier(s);break}case 28:{this.stateInCommentLike(s);break}case 27:{this.stateInSpecialComment(s);break}case 11:{this.stateBeforeAttrName(s);break}case 6:{this.stateInTagName(s);break}case 34:{this.stateInSFCRootTagName(s);break}case 9:{this.stateInClosingTagName(s);break}case 5:{this.stateBeforeTagName(s);break}case 17:{this.stateAfterAttrName(s);break}case 20:{this.stateInAttrValueSingleQuotes(s);break}case 18:{this.stateBeforeAttrValue(s);break}case 8:{this.stateBeforeClosingTagName(s);break}case 10:{this.stateAfterClosingTagName(s);break}case 29:{this.stateBeforeSpecialS(s);break}case 30:{this.stateBeforeSpecialT(s);break}case 21:{this.stateInAttrValueNoQuotes(s);break}case 7:{this.stateInSelfClosingTag(s);break}case 23:{this.stateInDeclaration(s);break}case 22:{this.stateBeforeDeclaration(s);break}case 25:{this.stateBeforeComment(s);break}case 24:{this.stateInProcessingInstruction(s);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===Ss.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,s){}}const ybe={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},vbe={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:t=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${t}.sync\` should be changed to \`v-model:${t}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function ug(t,{compatConfig:e}){const s=e&&e[t];return t==="MODE"?s||3:s}function ho(t,e){const s=ug("MODE",e),r=ug(t,e);return s===3?r===!0:r!==!1}function Na(t,e,s,...r){return ho(t,e)}function _be(t,e,s,...r){if(ug(t,e)==="suppress-warning")return;const{message:i,link:o}=vbe[t],l=`(deprecation ${t}) ${typeof i=="function"?i(...r):i}${o?`
  Details: ${o}`:""}`,c=new SyntaxError(l);c.code=t,s&&(c.loc=s),e.onWarn(c)}function Pv(t){throw t}function VP(t){}function xt(t,e,s,r){const n=`https://vuejs.org/error-reference/#compiler-${t}`,i=new SyntaxError(String(n));return i.code=t,i.loc=e,i}const bbe={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},wbe={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function Sbe(t,e,s=!1,r=[],n=Object.create(null)){}function Ebe(t,e,s){return!1}function Tbe(t,e){if(t&&(t.type==="ObjectProperty"||t.type==="ArrayPattern")){let s=e.length;for(;s--;){const r=e[s];if(r.type==="AssignmentExpression")return!0;if(r.type!=="ObjectProperty"&&!r.type.endsWith("Pattern"))break}}return!1}function kbe(t){let e=t.length;for(;e--;){const s=t[e];if(s.type==="NewExpression")return!0;if(s.type!=="MemberExpression")break}return!1}function Ibe(t,e){for(const s of t.params)for(const r of bn(s))e(r)}function Cbe(t,e){for(const s of t.body)if(s.type==="VariableDeclaration"){if(s.declare)continue;for(const r of s.declarations)for(const n of bn(r.id))e(n)}else if(s.type==="FunctionDeclaration"||s.type==="ClassDeclaration"){if(s.declare||!s.id)continue;e(s.id)}else Abe(s)&&Pbe(s,!0,e)}function Abe(t){return t.type==="ForOfStatement"||t.type==="ForInStatement"||t.type==="ForStatement"}function Pbe(t,e,s){const r=t.type==="ForStatement"?t.init:t.left;if(r&&r.type==="VariableDeclaration"&&(r.kind==="var"&&e))for(const n of r.declarations)for(const i of bn(n.id))s(i)}function bn(t,e=[]){switch(t.type){case"Identifier":e.push(t);break;case"MemberExpression":let s=t;for(;s.type==="MemberExpression";)s=s.object;e.push(s);break;case"ObjectPattern":for(const r of t.properties)r.type==="RestElement"?bn(r.argument,e):bn(r.value,e);break;case"ArrayPattern":t.elements.forEach(r=>{r&&bn(r,e)});break;case"RestElement":bn(t.argument,e);break;case"AssignmentPattern":bn(t.left,e);break}return e}const xbe=t=>/Function(?:Expression|Declaration)$|Method$/.test(t.type),qP=t=>t&&(t.type==="ObjectProperty"||t.type==="ObjectMethod")&&!t.computed,Lbe=(t,e)=>qP(e)&&e.key===t,BP=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function jP(t){return BP.includes(t.type)?jP(t.expression):t}const Bs=t=>t.type===4&&t.isStatic;function xv(t){switch(t){case"Teleport":case"teleport":return da;case"Suspense":case"suspense":return Sf;case"KeepAlive":case"keep-alive":return wc;case"BaseTransition":case"base-transition":return Sv}}const Rbe=/^\d|[^\$\w\xA0-\uFFFF]/,Gc=t=>!Rbe.test(t),Nbe=/[A-Za-z_$\xA0-\uFFFF]/,Obe=/[\.\?\w$\xA0-\uFFFF]/,Dbe=/\s+[.[]\s*|\s*[.[]\s+/g,HP=t=>t.type===4?t.content:t.loc.source,zP=t=>{const e=HP(t).trim().replace(Dbe,l=>l.trim());let s=0,r=[],n=0,i=0,o=null;for(let l=0;l<e.length;l++){const c=e.charAt(l);switch(s){case 0:if(c==="[")r.push(s),s=1,n++;else if(c==="(")r.push(s),s=2,i++;else if(!(l===0?Nbe:Obe).test(c))return!1;break;case 1:c==="'"||c==='"'||c==="`"?(r.push(s),s=3,o=c):c==="["?n++:c==="]"&&(--n||(s=r.pop()));break;case 2:if(c==="'"||c==='"'||c==="`")r.push(s),s=3,o=c;else if(c==="(")i++;else if(c===")"){if(l===e.length-1)return!1;--i||(s=r.pop())}break;case 3:c===o&&(s=r.pop(),o=null);break}}return!n&&!i},Mbe=ls,Lv=zP,$be=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,WP=t=>$be.test(HP(t)),Ube=ls,GP=WP;function Fbe(t,e,s=e.length){return KP({offset:t.offset,line:t.line,column:t.column},e,s)}function KP(t,e,s=e.length){let r=0,n=-1;for(let i=0;i<s;i++)e.charCodeAt(i)===10&&(r++,n=i);return t.offset+=s,t.line+=r,t.column=n===-1?t.column+s:s-n,t}function Vbe(t,e){if(!t)throw new Error(e||"unexpected compiler condition")}function qs(t,e,s=!1){for(let r=0;r<t.props.length;r++){const n=t.props[r];if(n.type===7&&(s||n.exp)&&(Fe(e)?n.name===e:e.test(n.name)))return n}}function Kc(t,e,s=!1,r=!1){for(let n=0;n<t.props.length;n++){const i=t.props[n];if(i.type===6){if(s)continue;if(i.name===e&&(i.value||r))return i}else if(i.name==="bind"&&(i.exp||r)&&oi(i.arg,e))return i}}function oi(t,e){return!!(t&&Bs(t)&&t.content===e)}function YP(t){return t.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function id(t){return t.type===5||t.type===2}function Rv(t){return t.type===7&&t.name==="slot"}function Oa(t){return t.type===1&&t.tagType===3}function Tc(t){return t.type===1&&t.tagType===2}const qbe=new Set([La,Ya]);function QP(t,e=[]){if(t&&!Fe(t)&&t.type===14){const s=t.callee;if(!Fe(s)&&qbe.has(s))return QP(t.arguments[0],e.concat(t))}return[t,e]}function kc(t,e,s){let r,n=t.type===13?t.props:t.arguments[2],i=[],o;if(n&&!Fe(n)&&n.type===14){const l=QP(n);n=l[0],i=l[1],o=i[i.length-1]}if(n==null||Fe(n))r=ar([e]);else if(n.type===14){const l=n.arguments[0];!Fe(l)&&l.type===15?Aw(e,l)||l.properties.unshift(e):n.callee===Of?r=Wt(s.helper(Sc),[ar([e]),n]):n.arguments.unshift(ar([e])),!r&&(r=n)}else n.type===15?(Aw(e,n)||n.properties.unshift(e),r=n):(r=Wt(s.helper(Sc),[ar([e]),n]),o&&o.callee===Ya&&(o=i[i.length-2]));t.type===13?o?o.arguments[0]=r:t.props=r:o?o.arguments[0]=r:t.arguments[2]=r}function Aw(t,e){let s=!1;if(t.key.type===4){const r=t.key.content;s=e.properties.some(n=>n.key.type===4&&n.key.content===r)}return s}function Da(t,e){return`_${e}_${t.replace(/[^\w]/g,(s,r)=>s==="-"?"_":t.charCodeAt(r).toString())}`}function Tr(t,e){if(!t||Object.keys(e).length===0)return!1;switch(t.type){case 1:for(let s=0;s<t.props.length;s++){const r=t.props[s];if(r.type===7&&(Tr(r.arg,e)||Tr(r.exp,e)))return!0}return t.children.some(s=>Tr(s,e));case 11:return Tr(t.source,e)?!0:t.children.some(s=>Tr(s,e));case 9:return t.branches.some(s=>Tr(s,e));case 10:return Tr(t.condition,e)?!0:t.children.some(s=>Tr(s,e));case 4:return!t.isStatic&&Gc(t.content)&&!!e[t.content];case 8:return t.children.some(s=>dt(s)&&Tr(s,e));case 5:case 12:return Tr(t.content,e);case 2:case 3:case 20:return!1;default:return!1}}function XP(t){return t.type===14&&t.callee===Mf?t.arguments[1].returns:t}const JP=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,ZP={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:sa,isPreTag:sa,isIgnoreNewlineTag:sa,isCustomElement:sa,onError:Pv,onWarn:VP,comments:!1,prefixIdentifiers:!1};let lt=ZP,Ic=null,An="",Es=null,rt=null,zs="",pn=-1,Ki=-1,Nv=0,ti=!1,dg=null;const Dt=[],Vt=new gbe(Dt,{onerr:fn,ontext(t,e){Ou(fs(t,e),t,e)},ontextentity(t,e,s){Ou(t,e,s)},oninterpolation(t,e){if(ti)return Ou(fs(t,e),t,e);let s=t+Vt.delimiterOpen.length,r=e-Vt.delimiterClose.length;for(;ir(An.charCodeAt(s));)s++;for(;ir(An.charCodeAt(r-1));)r--;let n=fs(s,r);n.includes("&")&&(n=lt.decodeEntities(n,!1)),hg({type:5,content:ad(n,!1,Bt(s,r)),loc:Bt(t,e)})},onopentagname(t,e){const s=fs(t,e);Es={type:1,tag:s,ns:lt.getNamespace(s,Dt[0],lt.ns),tagType:0,props:[],children:[],loc:Bt(t-1,e),codegenNode:void 0}},onopentagend(t){xw(t)},onclosetag(t,e){const s=fs(t,e);if(!lt.isVoidTag(s)){let r=!1;for(let n=0;n<Dt.length;n++)if(Dt[n].tag.toLowerCase()===s.toLowerCase()){r=!0,n>0&&fn(24,Dt[0].loc.start.offset);for(let o=0;o<=n;o++){const l=Dt.shift();od(l,e,o<n)}break}r||fn(23,ex(t,60))}},onselfclosingtag(t){const e=Es.tag;Es.isSelfClosing=!0,xw(t),Dt[0]&&Dt[0].tag===e&&od(Dt.shift(),t)},onattribname(t,e){rt={type:6,name:fs(t,e),nameLoc:Bt(t,e),value:void 0,loc:Bt(t)}},ondirname(t,e){const s=fs(t,e),r=s==="."||s===":"?"bind":s==="@"?"on":s==="#"?"slot":s.slice(2);if(!ti&&r===""&&fn(26,t),ti||r==="")rt={type:6,name:s,nameLoc:Bt(t,e),value:void 0,loc:Bt(t)};else if(rt={type:7,name:r,rawName:s,exp:void 0,arg:void 0,modifiers:s==="."?[je("prop")]:[],loc:Bt(t)},r==="pre"){ti=Vt.inVPre=!0,dg=Es;const n=Es.props;for(let i=0;i<n.length;i++)n[i].type===7&&(n[i]=Jbe(n[i]))}},ondirarg(t,e){if(t===e)return;const s=fs(t,e);if(ti)rt.name+=s,so(rt.nameLoc,e);else{const r=s[0]!=="[";rt.arg=ad(r?s:s.slice(1,-1),r,Bt(t,e),r?3:0)}},ondirmodifier(t,e){const s=fs(t,e);if(ti)rt.name+="."+s,so(rt.nameLoc,e);else if(rt.name==="slot"){const r=rt.arg;r&&(r.content+="."+s,so(r.loc,e))}else{const r=je(s,!0,Bt(t,e));rt.modifiers.push(r)}},onattribdata(t,e){zs+=fs(t,e),pn<0&&(pn=t),Ki=e},onattribentity(t,e,s){zs+=t,pn<0&&(pn=e),Ki=s},onattribnameend(t){const e=rt.loc.start.offset,s=fs(e,t);rt.type===7&&(rt.rawName=s),Es.props.some(r=>(r.type===7?r.rawName:r.name)===s)&&fn(2,e)},onattribend(t,e){if(Es&&rt){if(so(rt.loc,e),t!==0)if(zs.includes("&")&&(zs=lt.decodeEntities(zs,!0)),rt.type===6)rt.name==="class"&&(zs=sx(zs).trim()),t===1&&!zs&&fn(13,e),rt.value={type:2,content:zs,loc:t===1?Bt(pn,Ki):Bt(pn-1,Ki+1)},Vt.inSFCRoot&&Es.tag==="template"&&rt.name==="lang"&&zs&&zs!=="html"&&Vt.enterRCDATA(nh("</template"),0);else{let s=0;rt.exp=ad(zs,!1,Bt(pn,Ki),0,s),rt.name==="for"&&(rt.forParseResult=jbe(rt.exp));let r=-1;rt.name==="bind"&&(r=rt.modifiers.findIndex(n=>n.content==="sync"))>-1&&Na("COMPILER_V_BIND_SYNC",lt,rt.loc,rt.rawName)&&(rt.name="model",rt.modifiers.splice(r,1))}(rt.type!==7||rt.name!=="pre")&&Es.props.push(rt)}zs="",pn=Ki=-1},oncomment(t,e){lt.comments&&hg({type:3,content:fs(t,e),loc:Bt(t-4,e+3)})},onend(){const t=An.length;for(let e=0;e<Dt.length;e++)od(Dt[e],t-1),fn(24,Dt[e].loc.start.offset)},oncdata(t,e){Dt[0].ns!==0?Ou(fs(t,e),t,e):fn(1,t-9)},onprocessinginstruction(t){(Dt[0]?Dt[0].ns:lt.ns)===0&&fn(21,t-1)}}),Pw=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Bbe=/^\(|\)$/g;function jbe(t){const e=t.loc,s=t.content,r=s.match(JP);if(!r)return;const[,n,i]=r,o=(f,m,g=!1)=>{const v=e.start.offset+m,I=v+f.length;return ad(f,!1,Bt(v,I),0,g?1:0)},l={source:o(i.trim(),s.indexOf(i,n.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let c=n.trim().replace(Bbe,"").trim();const u=n.indexOf(c),h=c.match(Pw);if(h){c=c.replace(Pw,"").trim();const f=h[1].trim();let m;if(f&&(m=s.indexOf(f,u+c.length),l.key=o(f,m,!0)),h[2]){const g=h[2].trim();g&&(l.index=o(g,s.indexOf(g,l.key?m+f.length:u+c.length),!0))}}return c&&(l.value=o(c,u,!0)),l}function fs(t,e){return An.slice(t,e)}function xw(t){Vt.inSFCRoot&&(Es.innerLoc=Bt(t+1,t+1)),hg(Es);const{tag:e,ns:s}=Es;s===0&&lt.isPreTag(e)&&Nv++,lt.isVoidTag(e)?od(Es,t):(Dt.unshift(Es),(s===1||s===2)&&(Vt.inXML=!0)),Es=null}function Ou(t,e,s){{const i=Dt[0]&&Dt[0].tag;i!=="script"&&i!=="style"&&t.includes("&")&&(t=lt.decodeEntities(t,!1))}const r=Dt[0]||Ic,n=r.children[r.children.length-1];n&&n.type===2?(n.content+=t,so(n.loc,s)):r.children.push({type:2,content:t,loc:Bt(e,s)})}function od(t,e,s=!1){s?so(t.loc,ex(e,60)):so(t.loc,Hbe(e,62)+1),Vt.inSFCRoot&&(t.children.length?t.innerLoc.end=Xe({},t.children[t.children.length-1].loc.end):t.innerLoc.end=Xe({},t.innerLoc.start),t.innerLoc.source=fs(t.innerLoc.start.offset,t.innerLoc.end.offset));const{tag:r,ns:n,children:i}=t;if(ti||(r==="slot"?t.tagType=2:Lw(t)?t.tagType=3:Wbe(t)&&(t.tagType=1)),Vt.inRCDATA||(t.children=tx(i)),n===0&&lt.isIgnoreNewlineTag(r)){const o=i[0];o&&o.type===2&&(o.content=o.content.replace(/^\r?\n/,""))}n===0&&lt.isPreTag(r)&&Nv--,dg===t&&(ti=Vt.inVPre=!1,dg=null),Vt.inXML&&(Dt[0]?Dt[0].ns:lt.ns)===0&&(Vt.inXML=!1);{const o=t.props;if(!Vt.inSFCRoot&&ho("COMPILER_NATIVE_TEMPLATE",lt)&&t.tag==="template"&&!Lw(t)){const c=Dt[0]||Ic,u=c.children.indexOf(t);c.children.splice(u,1,...t.children)}const l=o.find(c=>c.type===6&&c.name==="inline-template");l&&Na("COMPILER_INLINE_TEMPLATE",lt,l.loc)&&t.children.length&&(l.value={type:2,content:fs(t.children[0].loc.start.offset,t.children[t.children.length-1].loc.end.offset),loc:l.loc})}}function Hbe(t,e){let s=t;for(;An.charCodeAt(s)!==e&&s<An.length-1;)s++;return s}function ex(t,e){let s=t;for(;An.charCodeAt(s)!==e&&s>=0;)s--;return s}const zbe=new Set(["if","else","else-if","for","slot"]);function Lw({tag:t,props:e}){if(t==="template"){for(let s=0;s<e.length;s++)if(e[s].type===7&&zbe.has(e[s].name))return!0}return!1}function Wbe({tag:t,props:e}){if(lt.isCustomElement(t))return!1;if(t==="component"||Gbe(t.charCodeAt(0))||xv(t)||lt.isBuiltInComponent&&lt.isBuiltInComponent(t)||lt.isNativeTag&&!lt.isNativeTag(t))return!0;for(let s=0;s<e.length;s++){const r=e[s];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(Na("COMPILER_IS_ON_ELEMENT",lt,r.loc))return!0}}else if(r.name==="bind"&&oi(r.arg,"is")&&Na("COMPILER_IS_ON_ELEMENT",lt,r.loc))return!0}return!1}function Gbe(t){return t>64&&t<91}const Kbe=/\r\n/g;function tx(t,e){const s=lt.whitespace!=="preserve";let r=!1;for(let n=0;n<t.length;n++){const i=t[n];if(i.type===2)if(Nv)i.content=i.content.replace(Kbe,`
`);else if(Ybe(i.content)){const o=t[n-1]&&t[n-1].type,l=t[n+1]&&t[n+1].type;!o||!l||s&&(o===3&&(l===3||l===1)||o===1&&(l===3||l===1&&Qbe(i.content)))?(r=!0,t[n]=null):i.content=" "}else s&&(i.content=sx(i.content))}return r?t.filter(Boolean):t}function Ybe(t){for(let e=0;e<t.length;e++)if(!ir(t.charCodeAt(e)))return!1;return!0}function Qbe(t){for(let e=0;e<t.length;e++){const s=t.charCodeAt(e);if(s===10||s===13)return!0}return!1}function sx(t){let e="",s=!1;for(let r=0;r<t.length;r++)ir(t.charCodeAt(r))?s||(e+=" ",s=!0):(e+=t[r],s=!1);return e}function hg(t){(Dt[0]||Ic).children.push(t)}function Bt(t,e){return{start:Vt.getPos(t),end:e==null?e:Vt.getPos(e),source:e==null?e:fs(t,e)}}function Xbe(t){return Bt(t.start.offset,t.end.offset)}function so(t,e){t.end=Vt.getPos(e),t.source=fs(t.start.offset,e)}function Jbe(t){const e={type:6,name:t.rawName,nameLoc:Bt(t.loc.start.offset,t.loc.start.offset+t.rawName.length),value:void 0,loc:t.loc};if(t.exp){const s=t.exp.loc;s.end.offset<t.loc.end.offset&&(s.start.offset--,s.start.column--,s.end.offset++,s.end.column++),e.value={type:2,content:t.exp.content,loc:s}}return e}function ad(t,e=!1,s,r=0,n=0){return je(t,e,s,r)}function fn(t,e,s){lt.onError(xt(t,Bt(e,e)))}function Zbe(){Vt.reset(),Es=null,rt=null,zs="",pn=-1,Ki=-1,Dt.length=0}function Ov(t,e){if(Zbe(),An=t,lt=Xe({},ZP),e){let n;for(n in e)e[n]!=null&&(lt[n]=e[n])}Vt.mode=lt.parseMode==="html"?1:lt.parseMode==="sfc"?2:0,Vt.inXML=lt.ns===1||lt.ns===2;const s=e&&e.delimiters;s&&(Vt.delimiterOpen=nh(s[0]),Vt.delimiterClose=nh(s[1]));const r=Ic=$P([],t);return Vt.parse(An),r.loc=Bt(0,t.length),r.children=tx(r.children),Ic=null,r}function ewe(t,e){ld(t,void 0,e,rx(t,t.children[0]))}function rx(t,e){const{children:s}=t;return s.length===1&&e.type===1&&!Tc(e)}function ld(t,e,s,r=!1,n=!1){const{children:i}=t,o=[];for(let h=0;h<i.length;h++){const f=i[h];if(f.type===1&&f.tagType===0){const m=r?0:Qs(f,s);if(m>0){if(m>=2){f.codegenNode.patchFlag=-1,o.push(f);continue}}else{const g=f.codegenNode;if(g.type===13){const v=g.patchFlag;if((v===void 0||v===512||v===1)&&ix(f,s)>=2){const I=ox(f);I&&(g.props=s.hoist(I))}g.dynamicProps&&(g.dynamicProps=s.hoist(g.dynamicProps))}}}else if(f.type===12&&(r?0:Qs(f,s))>=2){o.push(f);continue}if(f.type===1){const m=f.tagType===1;m&&s.scopes.vSlot++,ld(f,t,s,!1,n),m&&s.scopes.vSlot--}else if(f.type===11)ld(f,t,s,f.children.length===1,!0);else if(f.type===9)for(let m=0;m<f.branches.length;m++)ld(f.branches[m],t,s,f.branches[m].children.length===1,n)}let l=!1;if(o.length===i.length&&t.type===1){if(t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&ke(t.codegenNode.children))t.codegenNode.children=c(fi(t.codegenNode.children)),l=!0;else if(t.tagType===1&&t.codegenNode&&t.codegenNode.type===13&&t.codegenNode.children&&!ke(t.codegenNode.children)&&t.codegenNode.children.type===15){const h=u(t.codegenNode,"default");h&&(h.returns=c(fi(h.returns)),l=!0)}else if(t.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!ke(e.codegenNode.children)&&e.codegenNode.children.type===15){const h=qs(t,"slot",!0),f=h&&h.arg&&u(e.codegenNode,h.arg);f&&(f.returns=c(fi(f.returns)),l=!0)}}if(!l)for(const h of o)h.codegenNode=s.cache(h.codegenNode);function c(h){const f=s.cache(h);return n&&s.hmr&&(f.needArraySpread=!0),f}function u(h,f){if(h.children&&!ke(h.children)&&h.children.type===15){const m=h.children.properties.find(g=>g.key===f||g.key.content===f);return m&&m.value}}o.length&&s.transformHoist&&s.transformHoist(i,s,t)}function Qs(t,e){const{constantCache:s}=e;switch(t.type){case 1:if(t.tagType!==0)return 0;const r=s.get(t);if(r!==void 0)return r;const n=t.codegenNode;if(n.type!==13||n.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject"&&t.tag!=="math")return 0;if(n.patchFlag===void 0){let o=3;const l=ix(t,e);if(l===0)return s.set(t,0),0;l<o&&(o=l);for(let c=0;c<t.children.length;c++){const u=Qs(t.children[c],e);if(u===0)return s.set(t,0),0;u<o&&(o=u)}if(o>1)for(let c=0;c<t.props.length;c++){const u=t.props[c];if(u.type===7&&u.name==="bind"&&u.exp){const h=Qs(u.exp,e);if(h===0)return s.set(t,0),0;h<o&&(o=h)}}if(n.isBlock){for(let c=0;c<t.props.length;c++)if(t.props[c].type===7)return s.set(t,0),0;e.removeHelper(Ti),e.removeHelper(Io(e.inSSR,n.isComponent)),n.isBlock=!1,e.helper(ko(e.inSSR,n.isComponent))}return s.set(t,o),o}else return s.set(t,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Qs(t.content,e);case 4:return t.constType;case 8:let i=3;for(let o=0;o<t.children.length;o++){const l=t.children[o];if(Fe(l)||js(l))continue;const c=Qs(l,e);if(c===0)return 0;c<i&&(i=c)}return i;case 20:return 2;default:return 0}}const twe=new Set([Rf,Nf,La,Ya]);function nx(t,e){if(t.type===14&&!Fe(t.callee)&&twe.has(t.callee)){const s=t.arguments[0];if(s.type===4)return Qs(s,e);if(s.type===14)return nx(s,e)}return 0}function ix(t,e){let s=3;const r=ox(t);if(r&&r.type===15){const{properties:n}=r;for(let i=0;i<n.length;i++){const{key:o,value:l}=n[i],c=Qs(o,e);if(c===0)return c;c<s&&(s=c);let u;if(l.type===4?u=Qs(l,e):l.type===14?u=nx(l,e):u=0,u===0)return u;u<s&&(s=u)}}return s}function ox(t){const e=t.codegenNode;if(e.type===13)return e.props}function ax(t,{filename:e="",prefixIdentifiers:s=!1,hoistStatic:r=!1,hmr:n=!1,cacheHandlers:i=!1,nodeTransforms:o=[],directiveTransforms:l={},transformHoist:c=null,isBuiltInComponent:u=ls,isCustomElement:h=ls,expressionPlugins:f=[],scopeId:m=null,slotted:g=!0,ssr:v=!1,inSSR:I=!1,ssrCssVars:C="",bindingMetadata:U=Qe,inline:D=!1,isTS:E=!1,onError:L=Pv,onWarn:$=VP,compatConfig:M}){const A=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),w={filename:e,selfName:A&&Ci(At(A[1])),prefixIdentifiers:s,hoistStatic:r,hmr:n,cacheHandlers:i,nodeTransforms:o,directiveTransforms:l,transformHoist:c,isBuiltInComponent:u,isCustomElement:h,expressionPlugins:f,scopeId:m,slotted:g,ssr:v,inSSR:I,ssrCssVars:C,bindingMetadata:U,inline:D,isTS:E,onError:L,onWarn:$,compatConfig:M,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(_){const P=w.helpers.get(_)||0;return w.helpers.set(_,P+1),_},removeHelper(_){const P=w.helpers.get(_);if(P){const R=P-1;R?w.helpers.set(_,R):w.helpers.delete(_)}},helperString(_){return`_${Eo[w.helper(_)]}`},replaceNode(_){w.parent.children[w.childIndex]=w.currentNode=_},removeNode(_){const P=w.parent.children,R=_?P.indexOf(_):w.currentNode?w.childIndex:-1;!_||_===w.currentNode?(w.currentNode=null,w.onNodeRemoved()):w.childIndex>R&&(w.childIndex--,w.onNodeRemoved()),w.parent.children.splice(R,1)},onNodeRemoved:ls,addIdentifiers(_){},removeIdentifiers(_){},hoist(_){Fe(_)&&(_=je(_)),w.hoists.push(_);const P=je(`_hoisted_${w.hoists.length}`,!1,_.loc,2);return P.hoisted=_,P},cache(_,P=!1,R=!1){const x=UP(w.cached.length,_,P,R);return w.cached.push(x),x}};return w.filters=new Set,w}function lx(t,e){const s=ax(t,e);Yc(t,s),e.hoistStatic&&ewe(t,s),e.ssr||swe(t,s),t.helpers=new Set([...s.helpers.keys()]),t.components=[...s.components],t.directives=[...s.directives],t.imports=s.imports,t.hoists=s.hoists,t.temps=s.temps,t.cached=s.cached,t.transformed=!0,t.filters=[...s.filters]}function swe(t,e){const{helper:s}=e,{children:r}=t;if(r.length===1){const n=r[0];if(rx(t,n)&&n.codegenNode){const i=n.codegenNode;i.type===13&&$f(i,e),t.codegenNode=i}else t.codegenNode=n}else if(r.length>1){let n=64;t.codegenNode=Ra(e,s(xa),void 0,t.children,n,void 0,void 0,!0,void 0,!1)}}function rwe(t,e){let s=0;const r=()=>{s--};for(;s<t.children.length;s++){const n=t.children[s];Fe(n)||(e.grandParent=e.parent,e.parent=t,e.childIndex=s,e.onNodeRemoved=r,Yc(n,e))}}function Yc(t,e){e.currentNode=t;const{nodeTransforms:s}=e,r=[];for(let i=0;i<s.length;i++){const o=s[i](t,e);if(o&&(ke(o)?r.push(...o):r.push(o)),e.currentNode)t=e.currentNode;else return}switch(t.type){case 3:e.ssr||e.helper(Ka);break;case 5:e.ssr||e.helper(Wc);break;case 9:for(let i=0;i<t.branches.length;i++)Yc(t.branches[i],e);break;case 10:case 11:case 1:case 0:rwe(t,e);break}e.currentNode=t;let n=r.length;for(;n--;)r[n]()}function Dv(t,e){const s=Fe(t)?r=>r===t:r=>t.test(r);return(r,n)=>{if(r.type===1){const{props:i}=r;if(r.tagType===3&&i.some(Rv))return;const o=[];for(let l=0;l<i.length;l++){const c=i[l];if(c.type===7&&s(c.name)){i.splice(l,1),l--;const u=e(r,c,n);u&&o.push(u)}}return o}}}const Uf="/*@__PURE__*/",cx=t=>`${Eo[t]}: _${Eo[t]}`;function nwe(t,{mode:e="function",prefixIdentifiers:s=e==="module",sourceMap:r=!1,filename:n="template.vue.html",scopeId:i=null,optimizeImports:o=!1,runtimeGlobalName:l="Vue",runtimeModuleName:c="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:h=!1,isTS:f=!1,inSSR:m=!1}){const g={mode:e,prefixIdentifiers:s,sourceMap:r,filename:n,scopeId:i,optimizeImports:o,runtimeGlobalName:l,runtimeModuleName:c,ssrRuntimeModuleName:u,ssr:h,isTS:f,inSSR:m,source:t.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(I){return`_${Eo[I]}`},push(I,C=-2,U){g.code+=I},indent(){v(++g.indentLevel)},deindent(I=!1){I?--g.indentLevel:v(--g.indentLevel)},newline(){v(g.indentLevel)}};function v(I){g.push(`
`+"  ".repeat(I),0)}return g}function ux(t,e={}){const s=nwe(t,e);e.onContextCreated&&e.onContextCreated(s);const{mode:r,push:n,prefixIdentifiers:i,indent:o,deindent:l,newline:c,scopeId:u,ssr:h}=s,f=Array.from(t.helpers),m=f.length>0,g=!i&&r!=="module";iwe(t,s);const I=h?"ssrRender":"render",U=(h?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(n(`function ${I}(${U}) {`),o(),g&&(n("with (_ctx) {"),o(),m&&(n(`const { ${f.map(cx).join(", ")} } = _Vue
`,-1),c())),t.components.length&&(Hp(t.components,"component",s),(t.directives.length||t.temps>0)&&c()),t.directives.length&&(Hp(t.directives,"directive",s),t.temps>0&&c()),t.filters&&t.filters.length&&(c(),Hp(t.filters,"filter",s),c()),t.temps>0){n("let ");for(let D=0;D<t.temps;D++)n(`${D>0?", ":""}_temp${D}`)}return(t.components.length||t.directives.length||t.temps)&&(n(`
`,0),c()),h||n("return "),t.codegenNode?Ns(t.codegenNode,s):n("null"),g&&(l(),n("}")),l(),n("}"),{ast:t,code:s.code,preamble:"",map:s.map?s.map.toJSON():void 0}}function iwe(t,e){const{ssr:s,prefixIdentifiers:r,push:n,newline:i,runtimeModuleName:o,runtimeGlobalName:l,ssrRuntimeModuleName:c}=e,u=l,h=Array.from(t.helpers);if(h.length>0&&(n(`const _Vue = ${u}
`,-1),t.hoists.length)){const f=[Ef,Tf,Ka,kf,kv].filter(m=>h.includes(m)).map(cx).join(", ");n(`const { ${f} } = _Vue
`,-1)}owe(t.hoists,e),i(),n("return ")}function Hp(t,e,{helper:s,push:r,newline:n,isTS:i}){const o=s(e==="filter"?Pf:e==="component"?If:Af);for(let l=0;l<t.length;l++){let c=t[l];const u=c.endsWith("__self");u&&(c=c.slice(0,-6)),r(`const ${Da(c,e)} = ${o}(${JSON.stringify(c)}${u?", true":""})${i?"!":""}`),l<t.length-1&&n()}}function owe(t,e){if(!t.length)return;e.pure=!0;const{push:s,newline:r}=e;r();for(let n=0;n<t.length;n++){const i=t[n];i&&(s(`const _hoisted_${n+1} = `),Ns(i,e),r())}e.pure=!1}function Mv(t,e){const s=t.length>3||!1;e.push("["),s&&e.indent(),Qc(t,e,s),s&&e.deindent(),e.push("]")}function Qc(t,e,s=!1,r=!0){const{push:n,newline:i}=e;for(let o=0;o<t.length;o++){const l=t[o];Fe(l)?n(l,-3):ke(l)?Mv(l,e):Ns(l,e),o<t.length-1&&(s?(r&&n(","),i()):r&&n(", "))}}function Ns(t,e){if(Fe(t)){e.push(t,-3);return}if(js(t)){e.push(e.helper(t));return}switch(t.type){case 1:case 9:case 11:Ns(t.codegenNode,e);break;case 2:awe(t,e);break;case 4:dx(t,e);break;case 5:lwe(t,e);break;case 12:Ns(t.codegenNode,e);break;case 8:hx(t,e);break;case 3:uwe(t,e);break;case 13:dwe(t,e);break;case 14:fwe(t,e);break;case 15:pwe(t,e);break;case 17:mwe(t,e);break;case 18:gwe(t,e);break;case 19:ywe(t,e);break;case 20:vwe(t,e);break;case 21:Qc(t.body,e,!0,!1);break}}function awe(t,e){e.push(JSON.stringify(t.content),-3,t)}function dx(t,e){const{content:s,isStatic:r}=t;e.push(r?JSON.stringify(s):s,-3,t)}function lwe(t,e){const{push:s,helper:r,pure:n}=e;n&&s(Uf),s(`${r(Wc)}(`),Ns(t.content,e),s(")")}function hx(t,e){for(let s=0;s<t.children.length;s++){const r=t.children[s];Fe(r)?e.push(r,-3):Ns(r,e)}}function cwe(t,e){const{push:s}=e;if(t.type===8)s("["),hx(t,e),s("]");else if(t.isStatic){const r=Gc(t.content)?t.content:JSON.stringify(t.content);s(r,-2,t)}else s(`[${t.content}]`,-3,t)}function uwe(t,e){const{push:s,helper:r,pure:n}=e;n&&s(Uf),s(`${r(Ka)}(${JSON.stringify(t.content)})`,-3,t)}function dwe(t,e){const{push:s,helper:r,pure:n}=e,{tag:i,props:o,children:l,patchFlag:c,dynamicProps:u,directives:h,isBlock:f,disableTracking:m,isComponent:g}=t;let v;c&&(v=String(c)),h&&s(r(xf)+"("),f&&s(`(${r(Ti)}(${m?"true":""}), `),n&&s(Uf);const I=f?Io(e.inSSR,g):ko(e.inSSR,g);s(r(I)+"(",-2,t),Qc(hwe([i,o,l,v,u]),e),s(")"),f&&s(")"),h&&(s(", "),Ns(h,e),s(")"))}function hwe(t){let e=t.length;for(;e--&&t[e]==null;);return t.slice(0,e+1).map(s=>s||"null")}function fwe(t,e){const{push:s,helper:r,pure:n}=e,i=Fe(t.callee)?t.callee:r(t.callee);n&&s(Uf),s(i+"(",-2,t),Qc(t.arguments,e),s(")")}function pwe(t,e){const{push:s,indent:r,deindent:n,newline:i}=e,{properties:o}=t;if(!o.length){s("{}",-2,t);return}const l=o.length>1||!1;s(l?"{":"{ "),l&&r();for(let c=0;c<o.length;c++){const{key:u,value:h}=o[c];cwe(u,e),s(": "),Ns(h,e),c<o.length-1&&(s(","),i())}l&&n(),s(l?"}":" }")}function mwe(t,e){Mv(t.elements,e)}function gwe(t,e){const{push:s,indent:r,deindent:n}=e,{params:i,returns:o,body:l,newline:c,isSlot:u}=t;u&&s(`_${Eo[Df]}(`),s("(",-2,t),ke(i)?Qc(i,e):i&&Ns(i,e),s(") => "),(c||l)&&(s("{"),r()),o?(c&&s("return "),ke(o)?Mv(o,e):Ns(o,e)):l&&Ns(l,e),(c||l)&&(n(),s("}")),u&&(t.isNonScopedSlot&&s(", undefined, true"),s(")"))}function ywe(t,e){const{test:s,consequent:r,alternate:n,newline:i}=t,{push:o,indent:l,deindent:c,newline:u}=e;if(s.type===4){const f=!Gc(s.content);f&&o("("),dx(s,e),f&&o(")")}else o("("),Ns(s,e),o(")");i&&l(),e.indentLevel++,i||o(" "),o("? "),Ns(r,e),e.indentLevel--,i&&u(),i||o(" "),o(": ");const h=n.type===19;h||e.indentLevel++,Ns(n,e),h||e.indentLevel--,i&&c(!0)}function vwe(t,e){const{push:s,helper:r,indent:n,deindent:i,newline:o}=e,{needPauseTracking:l,needArraySpread:c}=t;c&&s("[...("),s(`_cache[${t.index}] || (`),l&&(n(),s(`${r(Ec)}(-1`),t.inVOnce&&s(", true"),s("),"),o(),s("(")),s(`_cache[${t.index}] = `),Ns(t.value,e),l&&(s(`).cacheIndex = ${t.index},`),o(),s(`${r(Ec)}(1),`),o(),s(`_cache[${t.index}]`),i()),s(")"),c&&s(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const _we=(t,e)=>{if(t.type===5)t.content=cd(t.content,e);else if(t.type===1){const s=qs(t,"memo");for(let r=0;r<t.props.length;r++){const n=t.props[r];if(n.type===7&&n.name!=="for"){const i=n.exp,o=n.arg;i&&i.type===4&&!(n.name==="on"&&o)&&!(s&&o&&o.type===4&&o.content==="key")&&(n.exp=cd(i,e,n.name==="slot")),o&&o.type===4&&!o.isStatic&&(n.arg=cd(o,e))}}}};function cd(t,e,s=!1,r=!1,n=Object.create(e.identifiers)){return t}function fx(t){return Fe(t)?t:t.type===4?t.content:t.children.map(fx).join("")}const bwe=Dv(/^(if|else|else-if)$/,(t,e,s)=>px(t,e,s,(r,n,i)=>{const o=s.parent.children;let l=o.indexOf(r),c=0;for(;l-->=0;){const u=o[l];u&&u.type===9&&(c+=u.branches.length)}return()=>{if(i)r.codegenNode=Nw(n,c,s);else{const u=wwe(r.codegenNode);u.alternate=Nw(n,c+r.branches.length-1,s)}}}));function px(t,e,s,r){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const n=e.exp?e.exp.loc:t.loc;s.onError(xt(28,e.loc)),e.exp=je("true",!1,n)}if(e.name==="if"){const n=Rw(t,e),i={type:9,loc:Xbe(t.loc),branches:[n]};if(s.replaceNode(i),r)return r(i,n,!0)}else{const n=s.parent.children;let i=n.indexOf(t);for(;i-->=-1;){const o=n[i];if(o&&o.type===3){s.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){s.removeNode(o);continue}if(o&&o.type===9){e.name==="else-if"&&o.branches[o.branches.length-1].condition===void 0&&s.onError(xt(30,t.loc)),s.removeNode();const l=Rw(t,e);o.branches.push(l);const c=r&&r(o,l,!1);Yc(l,s),c&&c(),s.currentNode=null}else s.onError(xt(30,t.loc));break}}}function Rw(t,e){const s=t.tagType===3;return{type:10,loc:t.loc,condition:e.name==="else"?void 0:e.exp,children:s&&!qs(t,"for")?t.children:[t],userKey:Kc(t,"key"),isTemplateIf:s}}function Nw(t,e,s){return t.condition?rh(t.condition,Ow(t,e,s),Wt(s.helper(Ka),['""',"true"])):Ow(t,e,s)}function Ow(t,e,s){const{helper:r}=s,n=qt("key",je(`${e}`,!1,is,2)),{children:i}=t,o=i[0];if(i.length!==1||o.type!==1)if(i.length===1&&o.type===11){const c=o.codegenNode;return kc(c,n,s),c}else return Ra(s,r(xa),ar([n]),i,64,void 0,void 0,!0,!1,!1,t.loc);else{const c=o.codegenNode,u=XP(c);return u.type===13&&$f(u,s),kc(u,n,s),c}}function wwe(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const mx=(t,e,s)=>{const{modifiers:r,loc:n}=t,i=t.arg;let{exp:o}=t;if(o&&o.type===4&&!o.content.trim()&&(o=void 0),!o){if(i.type!==4||!i.isStatic)return s.onError(xt(52,i.loc)),{props:[qt(i,je("",!0,n))]};gx(t),o=t.exp}return i.type!==4?(i.children.unshift("("),i.children.push(') || ""')):i.isStatic||(i.content=`${i.content} || ""`),r.some(l=>l.content==="camel")&&(i.type===4?i.isStatic?i.content=At(i.content):i.content=`${s.helperString(th)}(${i.content})`:(i.children.unshift(`${s.helperString(th)}(`),i.children.push(")"))),s.inSSR||(r.some(l=>l.content==="prop")&&Dw(i,"."),r.some(l=>l.content==="attr")&&Dw(i,"^")),{props:[qt(i,o)]}},gx=(t,e)=>{const s=t.arg,r=At(s.content);t.exp=je(r,!1,s.loc)},Dw=(t,e)=>{t.type===4?t.isStatic?t.content=e+t.content:t.content=`\`${e}\${${t.content}}\``:(t.children.unshift(`'${e}' + (`),t.children.push(")"))},Swe=Dv("for",(t,e,s)=>{const{helper:r,removeHelper:n}=s;return yx(t,e,s,i=>{const o=Wt(r(Lf),[i.source]),l=Oa(t),c=qs(t,"memo"),u=Kc(t,"key",!1,!0);u&&u.type===7&&!u.exp&&gx(u);let f=u&&(u.type===6?u.value?je(u.value.content,!0):void 0:u.exp);const m=u&&f?qt("key",f):null,g=i.source.type===4&&i.source.constType>0,v=g?64:u?128:256;return i.codegenNode=Ra(s,r(xa),void 0,o,v,void 0,void 0,!0,!g,!1,t.loc),()=>{let I;const{children:C}=i,U=C.length!==1||C[0].type!==1,D=Tc(t)?t:l&&t.children.length===1&&Tc(t.children[0])?t.children[0]:null;if(D?(I=D.codegenNode,l&&m&&kc(I,m,s)):U?I=Ra(s,r(xa),m?ar([m]):void 0,t.children,64,void 0,void 0,!0,void 0,!1):(I=C[0].codegenNode,l&&m&&kc(I,m,s),I.isBlock!==!g&&(I.isBlock?(n(Ti),n(Io(s.inSSR,I.isComponent))):n(ko(s.inSSR,I.isComponent))),I.isBlock=!g,I.isBlock?(r(Ti),r(Io(s.inSSR,I.isComponent))):r(ko(s.inSSR,I.isComponent))),c){const E=To(ih(i.parseResult,[je("_cached")]));E.body=FP([yr(["const _memo = (",c.exp,")"]),yr(["if (_cached",...f?[" && _cached.key === ",f]:[],` && ${s.helperString(Av)}(_cached, _memo)) return _cached`]),yr(["const _item = ",I]),je("_item.memo = _memo"),je("return _item")]),o.arguments.push(E,je("_cache"),je(String(s.cached.length))),s.cached.push(null)}else o.arguments.push(To(ih(i.parseResult),I,!0))}})});function yx(t,e,s,r){if(!e.exp){s.onError(xt(31,e.loc));return}const n=e.forParseResult;if(!n){s.onError(xt(32,e.loc));return}$v(n);const{addIdentifiers:i,removeIdentifiers:o,scopes:l}=s,{source:c,value:u,key:h,index:f}=n,m={type:11,loc:e.loc,source:c,valueAlias:u,keyAlias:h,objectIndexAlias:f,parseResult:n,children:Oa(t)?t.children:[t]};s.replaceNode(m),l.vFor++;const g=r&&r(m);return()=>{l.vFor--,g&&g()}}function $v(t,e){t.finalized||(t.finalized=!0)}function ih({value:t,key:e,index:s},r=[]){return Ewe([t,e,s,...r])}function Ewe(t){let e=t.length;for(;e--&&!t[e];);return t.slice(0,e+1).map((s,r)=>s||je("_".repeat(r+1),!1))}const Mw=je("undefined",!1),vx=(t,e)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const s=qs(t,"slot");if(s)return s.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},Twe=(t,e)=>{let s;if(Oa(t)&&t.props.some(Rv)&&(s=qs(t,"for"))){const r=s.forParseResult;if(r){$v(r);const{value:n,key:i,index:o}=r,{addIdentifiers:l,removeIdentifiers:c}=e;return n&&l(n),i&&l(i),o&&l(o),()=>{n&&c(n),i&&c(i),o&&c(o)}}}},kwe=(t,e,s,r)=>To(t,s,!1,!0,s.length?s[0].loc:r);function _x(t,e,s=kwe){e.helper(Df);const{children:r,loc:n}=t,i=[],o=[];let l=e.scopes.vSlot>0||e.scopes.vFor>0;const c=qs(t,"slot",!0);if(c){const{arg:C,exp:U}=c;C&&!Bs(C)&&(l=!0),i.push(qt(C||je("default",!0),s(U,void 0,r,n)))}let u=!1,h=!1;const f=[],m=new Set;let g=0;for(let C=0;C<r.length;C++){const U=r[C];let D;if(!Oa(U)||!(D=qs(U,"slot",!0))){U.type!==3&&f.push(U);continue}if(c){e.onError(xt(37,D.loc));break}u=!0;const{children:E,loc:L}=U,{arg:$=je("default",!0),exp:M,loc:A}=D;let w;Bs($)?w=$?$.content:"default":l=!0;const _=qs(U,"for"),P=s(M,_,E,L);let R,x;if(R=qs(U,"if"))l=!0,o.push(rh(R.exp,Du($,P,g++),Mw));else if(x=qs(U,/^else(-if)?$/,!0)){let N=C,ue;for(;N--&&(ue=r[N],ue.type===3););if(ue&&Oa(ue)&&qs(ue,/^(else-)?if$/)){let de=o[o.length-1];for(;de.alternate.type===19;)de=de.alternate;de.alternate=x.exp?rh(x.exp,Du($,P,g++),Mw):Du($,P,g++)}else e.onError(xt(30,x.loc))}else if(_){l=!0;const N=_.forParseResult;N?($v(N),o.push(Wt(e.helper(Lf),[N.source,To(ih(N),Du($,P),!0)]))):e.onError(xt(32,_.loc))}else{if(w){if(m.has(w)){e.onError(xt(38,A));continue}m.add(w),w==="default"&&(h=!0)}i.push(qt($,P))}}if(!c){const C=(U,D)=>{const E=s(U,void 0,D,n);return e.compatConfig&&(E.isNonScopedSlot=!0),qt("default",E)};u?f.length&&f.some(U=>bx(U))&&(h?e.onError(xt(39,f[0].loc)):i.push(C(void 0,f))):i.push(C(void 0,r))}const v=l?2:ud(t.children)?3:1;let I=ar(i.concat(qt("_",je(v+"",!1))),n);return o.length&&(I=Wt(e.helper(Cv),[I,fi(o)])),{slots:I,hasDynamicSlots:l}}function Du(t,e,s){const r=[qt("name",t),qt("fn",e)];return s!=null&&r.push(qt("key",je(String(s),!0))),ar(r)}function ud(t){for(let e=0;e<t.length;e++){const s=t[e];switch(s.type){case 1:if(s.tagType===2||ud(s.children))return!0;break;case 9:if(ud(s.branches))return!0;break;case 10:case 11:if(ud(s.children))return!0;break}}return!1}function bx(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():bx(t.content)}const wx=new WeakMap,Sx=(t,e)=>function(){if(t=e.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:r,props:n}=t,i=t.tagType===1;let o=i?Ex(t,e):`"${r}"`;const l=dt(o)&&o.callee===Cf;let c,u,h=0,f,m,g,v=l||o===da||o===Sf||!i&&(r==="svg"||r==="foreignObject"||r==="math");if(n.length>0){const I=Uv(t,e,void 0,i,l);c=I.props,h=I.patchFlag,m=I.dynamicPropNames;const C=I.directives;g=C&&C.length?fi(C.map(U=>Tx(U,e))):void 0,I.shouldUseBlock&&(v=!0)}if(t.children.length>0)if(o===wc&&(v=!0,h|=1024),i&&o!==da&&o!==wc){const{slots:C,hasDynamicSlots:U}=_x(t,e);u=C,U&&(h|=1024)}else if(t.children.length===1&&o!==da){const C=t.children[0],U=C.type,D=U===5||U===8;D&&Qs(C,e)===0&&(h|=1),D||U===2?u=C:u=t.children}else u=t.children;m&&m.length&&(f=Cwe(m)),t.codegenNode=Ra(e,o,c,u,h===0?void 0:h,f,g,!!v,!1,i,t.loc)};function Ex(t,e,s=!1){let{tag:r}=t;const n=fg(r),i=Kc(t,"is",!1,!0);if(i)if(n||ho("COMPILER_IS_ON_ELEMENT",e)){let l;if(i.type===6?l=i.value&&je(i.value.content,!0):(l=i.exp,l||(l=je("is",!1,i.arg.loc))),l)return Wt(e.helper(Cf),[l])}else i.type===6&&i.value.content.startsWith("vue:")&&(r=i.value.content.slice(4));const o=xv(r)||e.isBuiltInComponent(r);return o?(s||e.helper(o),o):(e.helper(If),e.components.add(r),Da(r,"component"))}function Uv(t,e,s=t.props,r,n,i=!1){const{tag:o,loc:l,children:c}=t;let u=[];const h=[],f=[],m=c.length>0;let g=!1,v=0,I=!1,C=!1,U=!1,D=!1,E=!1,L=!1;const $=[],M=P=>{u.length&&(h.push(ar($w(u),l)),u=[]),P&&h.push(P)},A=()=>{e.scopes.vFor>0&&u.push(qt(je("ref_for",!0),je("true")))},w=({key:P,value:R})=>{if(Bs(P)){const x=P.content,N=ki(x);if(N&&(!r||n)&&x.toLowerCase()!=="onclick"&&x!=="onUpdate:modelValue"&&!Tn(x)&&(D=!0),N&&Tn(x)&&(L=!0),N&&R.type===14&&(R=R.arguments[0]),R.type===20||(R.type===4||R.type===8)&&Qs(R,e)>0)return;x==="ref"?I=!0:x==="class"?C=!0:x==="style"?U=!0:x!=="key"&&!$.includes(x)&&$.push(x),r&&(x==="class"||x==="style")&&!$.includes(x)&&$.push(x)}else E=!0};for(let P=0;P<s.length;P++){const R=s[P];if(R.type===6){const{loc:x,name:N,nameLoc:ue,value:de}=R;let ce=!0;if(N==="ref"&&(I=!0,A()),N==="is"&&(fg(o)||de&&de.content.startsWith("vue:")||ho("COMPILER_IS_ON_ELEMENT",e)))continue;u.push(qt(je(N,!0,ue),je(de?de.content:"",ce,de?de.loc:x)))}else{const{name:x,arg:N,exp:ue,loc:de,modifiers:ce}=R,te=x==="bind",le=x==="on";if(x==="slot"){r||e.onError(xt(40,de));continue}if(x==="once"||x==="memo"||x==="is"||te&&oi(N,"is")&&(fg(o)||ho("COMPILER_IS_ON_ELEMENT",e))||le&&i)continue;if((te&&oi(N,"key")||le&&m&&oi(N,"vue:before-update"))&&(g=!0),te&&oi(N,"ref")&&A(),!N&&(te||le)){if(E=!0,ue)if(te){if(A(),M(),ho("COMPILER_V_BIND_OBJECT_ORDER",e)){h.unshift(ue);continue}h.push(ue)}else M({type:14,loc:de,callee:e.helper(Of),arguments:r?[ue]:[ue,"true"]});else e.onError(xt(te?34:35,de));continue}te&&ce.some(vt=>vt.content==="prop")&&(v|=32);const $e=e.directiveTransforms[x];if($e){const{props:vt,needRuntime:me}=$e(R,t,e);!i&&vt.forEach(w),le&&N&&!Bs(N)?M(ar(vt,l)):u.push(...vt),me&&(f.push(R),js(me)&&wx.set(R,me))}else Xw(x)||(f.push(R),m&&(g=!0))}}let _;if(h.length?(M(),h.length>1?_=Wt(e.helper(Sc),h,l):_=h[0]):u.length&&(_=ar($w(u),l)),E?v|=16:(C&&!r&&(v|=2),U&&!r&&(v|=4),$.length&&(v|=8),D&&(v|=32)),!g&&(v===0||v===32)&&(I||L||f.length>0)&&(v|=512),!e.inSSR&&_)switch(_.type){case 15:let P=-1,R=-1,x=!1;for(let de=0;de<_.properties.length;de++){const ce=_.properties[de].key;Bs(ce)?ce.content==="class"?P=de:ce.content==="style"&&(R=de):ce.isHandlerKey||(x=!0)}const N=_.properties[P],ue=_.properties[R];x?_=Wt(e.helper(La),[_]):(N&&!Bs(N.value)&&(N.value=Wt(e.helper(Rf),[N.value])),ue&&(U||ue.value.type===4&&ue.value.content.trim()[0]==="["||ue.value.type===17)&&(ue.value=Wt(e.helper(Nf),[ue.value])));break;case 14:break;default:_=Wt(e.helper(La),[Wt(e.helper(Ya),[_])]);break}return{props:_,directives:f,patchFlag:v,dynamicPropNames:$,shouldUseBlock:g}}function $w(t){const e=new Map,s=[];for(let r=0;r<t.length;r++){const n=t[r];if(n.key.type===8||!n.key.isStatic){s.push(n);continue}const i=n.key.content,o=e.get(i);o?(i==="style"||i==="class"||ki(i))&&Iwe(o,n):(e.set(i,n),s.push(n))}return s}function Iwe(t,e){t.value.type===17?t.value.elements.push(e.value):t.value=fi([t.value,e.value],t.loc)}function Tx(t,e){const s=[],r=wx.get(t);r?s.push(e.helperString(r)):(e.helper(Af),e.directives.add(t.name),s.push(Da(t.name,"directive")));const{loc:n}=t;if(t.exp&&s.push(t.exp),t.arg&&(t.exp||s.push("void 0"),s.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||s.push("void 0"),s.push("void 0"));const i=je("true",!1,n);s.push(ar(t.modifiers.map(o=>qt(o,i)),n))}return fi(s,t.loc)}function Cwe(t){let e="[";for(let s=0,r=t.length;s<r;s++)e+=JSON.stringify(t[s]),s<r-1&&(e+=", ");return e+"]"}function fg(t){return t==="component"||t==="Component"}const Awe=(t,e)=>{if(Tc(t)){const{children:s,loc:r}=t,{slotName:n,slotProps:i}=kx(t,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",n,"{}","undefined","true"];let l=2;i&&(o[2]=i,l=3),s.length&&(o[3]=To([],s,!1,!1,r),l=4),e.scopeId&&!e.slotted&&(l=5),o.splice(l),t.codegenNode=Wt(e.helper(Iv),o,r)}};function kx(t,e){let s='"default"',r;const n=[];for(let i=0;i<t.props.length;i++){const o=t.props[i];if(o.type===6)o.value&&(o.name==="name"?s=JSON.stringify(o.value.content):(o.name=At(o.name),n.push(o)));else if(o.name==="bind"&&oi(o.arg,"name")){if(o.exp)s=o.exp;else if(o.arg&&o.arg.type===4){const l=At(o.arg.content);s=o.exp=je(l,!1,o.arg.loc)}}else o.name==="bind"&&o.arg&&Bs(o.arg)&&(o.arg.content=At(o.arg.content)),n.push(o)}if(n.length>0){const{props:i,directives:o}=Uv(t,e,n,!1,!1);r=i,o.length&&e.onError(xt(36,o[0].loc))}return{slotName:s,slotProps:r}}const Fv=(t,e,s,r)=>{const{loc:n,modifiers:i,arg:o}=t;!t.exp&&!i.length&&s.onError(xt(35,n));let l;if(o.type===4)if(o.isStatic){let f=o.content;f.startsWith("vue:")&&(f=`vnode-${f.slice(4)}`);const m=e.tagType!==0||f.startsWith("vnode")||!/[A-Z]/.test(f)?io(At(f)):`on:${f}`;l=je(m,!0,o.loc)}else l=yr([`${s.helperString(sh)}(`,o,")"]);else l=o,l.children.unshift(`${s.helperString(sh)}(`),l.children.push(")");let c=t.exp;c&&!c.content.trim()&&(c=void 0);let u=s.cacheHandlers&&!c&&!s.inVOnce;if(c){const f=Lv(c),m=!(f||GP(c)),g=c.content.includes(";");(m||u&&f)&&(c=yr([`${m?"$event":"(...args)"} => ${g?"{":"("}`,c,g?"}":")"]))}let h={props:[qt(l,c||je("() => {}",!1,n))]};return r&&(h=r(h)),u&&(h.props[0].value=s.cache(h.props[0].value)),h.props.forEach(f=>f.key.isHandlerKey=!0),h},Pwe=(t,e)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const s=t.children;let r,n=!1;for(let i=0;i<s.length;i++){const o=s[i];if(id(o)){n=!0;for(let l=i+1;l<s.length;l++){const c=s[l];if(id(c))r||(r=s[i]=yr([o],o.loc)),r.children.push(" + ",c),s.splice(l,1),l--;else{r=void 0;break}}}}if(!(!n||s.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(i=>i.type===7&&!e.directiveTransforms[i.name])&&t.tag!=="template")))for(let i=0;i<s.length;i++){const o=s[i];if(id(o)||o.type===8){const l=[];(o.type!==2||o.content!==" ")&&l.push(o),!e.ssr&&Qs(o,e)===0&&l.push("1"),s[i]={type:12,content:o,loc:o.loc,codegenNode:Wt(e.helper(kf),l)}}}}},Uw=new WeakSet,xwe=(t,e)=>{if(t.type===1&&qs(t,"once",!0))return Uw.has(t)||e.inVOnce||e.inSSR?void 0:(Uw.add(t),e.inVOnce=!0,e.helper(Ec),()=>{e.inVOnce=!1;const s=e.currentNode;s.codegenNode&&(s.codegenNode=e.cache(s.codegenNode,!0,!0))})},Vv=(t,e,s)=>{const{exp:r,arg:n}=t;if(!r)return s.onError(xt(41,t.loc)),Mu();const i=r.loc.source.trim(),o=r.type===4?r.content:i,l=s.bindingMetadata[i];if(l==="props"||l==="props-aliased")return s.onError(xt(44,r.loc)),Mu();if(!o.trim()||!Lv(r))return s.onError(xt(42,r.loc)),Mu();const c=n||je("modelValue",!0),u=n?Bs(n)?`onUpdate:${At(n.content)}`:yr(['"onUpdate:" + ',n]):"onUpdate:modelValue";let h;const f=s.isTS?"($event: any)":"$event";h=yr([`${f} => ((`,r,") = $event)"]);const m=[qt(c,t.exp),qt(u,h)];if(t.modifiers.length&&e.tagType===1){const g=t.modifiers.map(I=>I.content).map(I=>(Gc(I)?I:JSON.stringify(I))+": true").join(", "),v=n?Bs(n)?`${n.content}Modifiers`:yr([n,' + "Modifiers"']):"modelModifiers";m.push(qt(v,je(`{ ${g} }`,!1,t.loc,2)))}return Mu(m)};function Mu(t=[]){return{props:t}}const Lwe=/[\w).+\-_$\]]/,Rwe=(t,e)=>{ho("COMPILER_FILTERS",e)&&(t.type===5?oh(t.content,e):t.type===1&&t.props.forEach(s=>{s.type===7&&s.name!=="for"&&s.exp&&oh(s.exp,e)}))};function oh(t,e){if(t.type===4)Fw(t,e);else for(let s=0;s<t.children.length;s++){const r=t.children[s];typeof r=="object"&&(r.type===4?Fw(r,e):r.type===8?oh(t,e):r.type===5&&oh(r.content,e))}}function Fw(t,e){const s=t.content;let r=!1,n=!1,i=!1,o=!1,l=0,c=0,u=0,h=0,f,m,g,v,I=[];for(g=0;g<s.length;g++)if(m=f,f=s.charCodeAt(g),r)f===39&&m!==92&&(r=!1);else if(n)f===34&&m!==92&&(n=!1);else if(i)f===96&&m!==92&&(i=!1);else if(o)f===47&&m!==92&&(o=!1);else if(f===124&&s.charCodeAt(g+1)!==124&&s.charCodeAt(g-1)!==124&&!l&&!c&&!u)v===void 0?(h=g+1,v=s.slice(0,g).trim()):C();else{switch(f){case 34:n=!0;break;case 39:r=!0;break;case 96:i=!0;break;case 40:u++;break;case 41:u--;break;case 91:c++;break;case 93:c--;break;case 123:l++;break;case 125:l--;break}if(f===47){let U=g-1,D;for(;U>=0&&(D=s.charAt(U),D===" ");U--);(!D||!Lwe.test(D))&&(o=!0)}}v===void 0?v=s.slice(0,g).trim():h!==0&&C();function C(){I.push(s.slice(h,g).trim()),h=g+1}if(I.length){for(g=0;g<I.length;g++)v=Nwe(v,I[g],e);t.content=v,t.ast=void 0}}function Nwe(t,e,s){s.helper(Pf);const r=e.indexOf("(");if(r<0)return s.filters.add(e),`${Da(e,"filter")}(${t})`;{const n=e.slice(0,r),i=e.slice(r+1);return s.filters.add(n),`${Da(n,"filter")}(${t}${i!==")"?","+i:i}`}}const Vw=new WeakSet,Owe=(t,e)=>{if(t.type===1){const s=qs(t,"memo");return!s||Vw.has(t)?void 0:(Vw.add(t),()=>{const r=t.codegenNode||e.currentNode.codegenNode;r&&r.type===13&&(t.tagType!==1&&$f(r,e),t.codegenNode=Wt(e.helper(Mf),[s.exp,To(void 0,r),"_cache",String(e.cached.length)]),e.cached.push(null))})}};function Ix(t){return[[xwe,bwe,Owe,Swe,Rwe,Awe,Sx,vx,Pwe],{on:Fv,bind:mx,model:Vv}]}function Cx(t,e={}){const s=e.onError||Pv,r=e.mode==="module";e.prefixIdentifiers===!0?s(xt(47)):r&&s(xt(48));const n=!1;e.cacheHandlers&&s(xt(49)),e.scopeId&&!r&&s(xt(50));const i=Xe({},e,{prefixIdentifiers:n}),o=Fe(t)?Ov(t,i):t,[l,c]=Ix();return lx(o,Xe({},i,{nodeTransforms:[...l,...e.nodeTransforms||[]],directiveTransforms:Xe({},c,e.directiveTransforms||{})})),ux(o,i)}const Dwe={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},Ax=()=>({props:[]});/**
* @vue/compiler-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const qv=Symbol(""),Bv=Symbol(""),jv=Symbol(""),Hv=Symbol(""),ah=Symbol(""),zv=Symbol(""),Wv=Symbol(""),Gv=Symbol(""),Kv=Symbol(""),Yv=Symbol("");MP({[qv]:"vModelRadio",[Bv]:"vModelCheckbox",[jv]:"vModelText",[Hv]:"vModelSelect",[ah]:"vModelDynamic",[zv]:"withModifiers",[Wv]:"withKeys",[Gv]:"vShow",[Kv]:"Transition",[Yv]:"TransitionGroup"});let Go;function Mwe(t,e=!1){return Go||(Go=document.createElement("div")),e?(Go.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,Go.children[0].getAttribute("foo")):(Go.innerHTML=t,Go.textContent)}const Qv={parseMode:"html",isVoidTag:r2,isNativeTag:t=>e2(t)||t2(t)||s2(t),isPreTag:t=>t==="pre",isIgnoreNewlineTag:t=>t==="pre"||t==="textarea",decodeEntities:Mwe,isBuiltInComponent:t=>{if(t==="Transition"||t==="transition")return Kv;if(t==="TransitionGroup"||t==="transition-group")return Yv},getNamespace(t,e,s){let r=e?e.ns:s;if(e&&r===2)if(e.tag==="annotation-xml"){if(t==="svg")return 1;e.props.some(n=>n.type===6&&n.name==="encoding"&&n.value!=null&&(n.value.content==="text/html"||n.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&t!=="mglyph"&&t!=="malignmark"&&(r=0);else e&&r===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(r=0);if(r===0){if(t==="svg")return 1;if(t==="math")return 2}return r}},Px=t=>{t.type===1&&t.props.forEach((e,s)=>{e.type===6&&e.name==="style"&&e.value&&(t.props[s]={type:7,name:"bind",arg:je("style",!0,e.loc),exp:$we(e.value.content,e.loc),modifiers:[],loc:e.loc})})},$we=(t,e)=>{const s=yg(t);return je(JSON.stringify(s),!1,e,3)};function Pn(t,e){return xt(t,e)}const Uwe={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},Fwe={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},Vwe=(t,e,s)=>{const{exp:r,loc:n}=t;return r||s.onError(Pn(53,n)),e.children.length&&(s.onError(Pn(54,n)),e.children.length=0),{props:[qt(je("innerHTML",!0,n),r||je("",!0))]}},qwe=(t,e,s)=>{const{exp:r,loc:n}=t;return r||s.onError(Pn(55,n)),e.children.length&&(s.onError(Pn(56,n)),e.children.length=0),{props:[qt(je("textContent",!0),r?Qs(r,s)>0?r:Wt(s.helperString(Wc),[r],n):je("",!0))]}},Bwe=(t,e,s)=>{const r=Vv(t,e,s);if(!r.props.length||e.tagType===1)return r;t.arg&&s.onError(Pn(58,t.arg.loc));const{tag:n}=e,i=s.isCustomElement(n);if(n==="input"||n==="textarea"||n==="select"||i){let o=jv,l=!1;if(n==="input"||i){const c=Kc(e,"type");if(c){if(c.type===7)o=ah;else if(c.value)switch(c.value.content){case"radio":o=qv;break;case"checkbox":o=Bv;break;case"file":l=!0,s.onError(Pn(59,t.loc));break}}else YP(e)&&(o=ah)}else n==="select"&&(o=Hv);l||(r.needRuntime=s.helper(o))}else s.onError(Pn(57,t.loc));return r.props=r.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),r},jwe=us("passive,once,capture"),Hwe=us("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),zwe=us("left,right"),xx=us("onkeyup,onkeydown,onkeypress"),Wwe=(t,e,s,r)=>{const n=[],i=[],o=[];for(let l=0;l<e.length;l++){const c=e[l].content;c==="native"&&Na("COMPILER_V_ON_NATIVE",s)||jwe(c)?o.push(c):zwe(c)?Bs(t)?xx(t.content.toLowerCase())?n.push(c):i.push(c):(n.push(c),i.push(c)):Hwe(c)?i.push(c):n.push(c)}return{keyModifiers:n,nonKeyModifiers:i,eventOptionModifiers:o}},qw=(t,e)=>Bs(t)&&t.content.toLowerCase()==="onclick"?je(e,!0):t.type!==4?yr(["(",t,`) === "onClick" ? "${e}" : (`,t,")"]):t,Gwe=(t,e,s)=>Fv(t,e,s,r=>{const{modifiers:n}=t;if(!n.length)return r;let{key:i,value:o}=r.props[0];const{keyModifiers:l,nonKeyModifiers:c,eventOptionModifiers:u}=Wwe(i,n,s,t.loc);if(c.includes("right")&&(i=qw(i,"onContextmenu")),c.includes("middle")&&(i=qw(i,"onMouseup")),c.length&&(o=Wt(s.helper(zv),[o,JSON.stringify(c)])),l.length&&(!Bs(i)||xx(i.content.toLowerCase()))&&(o=Wt(s.helper(Wv),[o,JSON.stringify(l)])),u.length){const h=u.map(Ci).join("");i=Bs(i)?je(`${i.content}${h}`,!0):yr(["(",i,`) + "${h}"`])}return{props:[qt(i,o)]}}),Kwe=(t,e,s)=>{const{exp:r,loc:n}=t;return r||s.onError(Pn(61,n)),{props:[],needRuntime:s.helper(Gv)}},Ywe=(t,e)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&e.removeNode()},Lx=[Px],Rx={cloak:Ax,html:Vwe,text:qwe,model:Bwe,on:Gwe,show:Kwe};function Qwe(t,e={}){return Cx(t,Xe({},Qv,e,{nodeTransforms:[Ywe,...Lx,...e.nodeTransforms||[]],directiveTransforms:Xe({},Rx,e.directiveTransforms||{}),transformHoist:null}))}function Xwe(t,e={}){return Ov(t,Xe({},Qv,e))}const Jwe=Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION:Sv,BindingTypes:Dwe,CAMELIZE:th,CAPITALIZE:LP,CREATE_BLOCK:Ev,CREATE_COMMENT:Ka,CREATE_ELEMENT_BLOCK:Tv,CREATE_ELEMENT_VNODE:Tf,CREATE_SLOTS:Cv,CREATE_STATIC:kv,CREATE_TEXT:kf,CREATE_VNODE:Ef,CompilerDeprecationTypes:ybe,ConstantTypes:cbe,DOMDirectiveTransforms:Rx,DOMErrorCodes:Uwe,DOMErrorMessages:Fwe,DOMNodeTransforms:Lx,ElementTypes:lbe,ErrorCodes:bbe,FRAGMENT:xa,GUARD_REACTIVE_PROPS:Ya,IS_MEMO_SAME:Av,IS_REF:DP,KEEP_ALIVE:wc,MERGE_PROPS:Sc,NORMALIZE_CLASS:Rf,NORMALIZE_PROPS:La,NORMALIZE_STYLE:Nf,Namespaces:obe,NodeTypes:abe,OPEN_BLOCK:Ti,POP_SCOPE_ID:NP,PUSH_SCOPE_ID:RP,RENDER_LIST:Lf,RENDER_SLOT:Iv,RESOLVE_COMPONENT:If,RESOLVE_DIRECTIVE:Af,RESOLVE_DYNAMIC_COMPONENT:Cf,RESOLVE_FILTER:Pf,SET_BLOCK_TRACKING:Ec,SUSPENSE:Sf,TELEPORT:da,TO_DISPLAY_STRING:Wc,TO_HANDLERS:Of,TO_HANDLER_KEY:sh,TRANSITION:Kv,TRANSITION_GROUP:Yv,TS_NODE_TYPES:BP,UNREF:OP,V_MODEL_CHECKBOX:Bv,V_MODEL_DYNAMIC:ah,V_MODEL_RADIO:qv,V_MODEL_SELECT:Hv,V_MODEL_TEXT:jv,V_ON_WITH_KEYS:Wv,V_ON_WITH_MODIFIERS:zv,V_SHOW:Gv,WITH_CTX:Df,WITH_DIRECTIVES:xf,WITH_MEMO:Mf,advancePositionWithClone:Fbe,advancePositionWithMutation:KP,assert:Vbe,baseCompile:Cx,baseParse:Ov,buildDirectiveArgs:Tx,buildProps:Uv,buildSlots:_x,checkCompatEnabled:Na,compile:Qwe,convertToBlock:$f,createArrayExpression:fi,createAssignmentExpression:fbe,createBlockStatement:FP,createCacheExpression:UP,createCallExpression:Wt,createCompilerError:xt,createCompoundExpression:yr,createConditionalExpression:rh,createDOMCompilerError:Pn,createForLoopParams:ih,createFunctionExpression:To,createIfStatement:hbe,createInterpolation:ube,createObjectExpression:ar,createObjectProperty:qt,createReturnStatement:mbe,createRoot:$P,createSequenceExpression:pbe,createSimpleExpression:je,createStructuralDirectiveTransform:Dv,createTemplateLiteral:dbe,createTransformContext:ax,createVNodeCall:Ra,errorMessages:wbe,extractIdentifiers:bn,findDir:qs,findProp:Kc,forAliasRE:JP,generate:ux,generateCodeFrame:Jw,getBaseTransformPreset:Ix,getConstantType:Qs,getMemoedVNodeCall:XP,getVNodeBlockHelper:Io,getVNodeHelper:ko,hasDynamicKeyVBind:YP,hasScopeRef:Tr,helperNameMap:Eo,injectProp:kc,isCoreComponent:xv,isFnExpression:GP,isFnExpressionBrowser:WP,isFnExpressionNode:Ube,isFunctionType:xbe,isInDestructureAssignment:Tbe,isInNewExpression:kbe,isMemberExpression:Lv,isMemberExpressionBrowser:zP,isMemberExpressionNode:Mbe,isReferencedIdentifier:Ebe,isSimpleIdentifier:Gc,isSlotOutlet:Tc,isStaticArgOf:oi,isStaticExp:Bs,isStaticProperty:qP,isStaticPropertyKey:Lbe,isTemplateNode:Oa,isText:id,isVSlot:Rv,locStub:is,noopDirectiveTransform:Ax,parse:Xwe,parserOptions:Qv,processExpression:cd,processFor:yx,processIf:px,processSlotOutlet:kx,registerRuntimeHelpers:MP,resolveComponentType:Ex,stringifyExpression:fx,toValidAssetId:Da,trackSlotScopes:vx,trackVForSlotScopes:Twe,transform:lx,transformBind:mx,transformElement:Sx,transformExpression:_we,transformModel:Vv,transformOn:Fv,transformStyle:Px,traverseNode:Yc,unwrapTSNode:jP,walkBlockDeclarations:Cbe,walkFunctionParams:Ibe,walkIdentifiers:Sbe,warnDeprecation:_be},Symbol.toStringTag,{value:"Module"})),Zwe=wv(Jwe),e2e=wv(aO),t2e=wv(z4);/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var Bw;function s2e(){return Bw||(Bw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Zwe,s=e2e,r=t2e;function n(c){var u=Object.create(null);if(c)for(var h in c)u[h]=c[h];return u.default=c,Object.freeze(u)}var i=n(s);const o=Object.create(null);function l(c,u){if(!r.isString(c))if(c.nodeType)c=c.innerHTML;else return r.NOOP;const h=r.genCacheKey(c,u),f=o[h];if(f)return f;if(c[0]==="#"){const I=document.querySelector(c);c=I?I.innerHTML:""}const m=r.extend({hoistStatic:!0,onError:void 0,onWarn:r.NOOP},u);!m.isCustomElement&&typeof customElements<"u"&&(m.isCustomElement=I=>!!customElements.get(I));const{code:g}=e.compile(c,m),v=new Function("Vue",g)(i);return v._rc=!0,o[h]=v}s.registerRuntimeCompiler(l),t.compile=l,Object.keys(s).forEach(function(c){c!=="default"&&!Object.prototype.hasOwnProperty.call(t,c)&&(t[c]=s[c])})}(jp)),jp}var jw;function r2e(){return jw||(jw=1,Bp.exports=s2e()),Bp.exports}var n2e=nd.exports,Hw;function i2e(){return Hw||(Hw=1,function(t,e){(function(r,n){t.exports=n(r2e())})(n2e,s=>(()=>{var r={113:(w,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=(P,R)=>{const x=P.__vccOpts||P;for(const[N,ue]of R)x[N]=ue;return x}},594:w=>{w.exports=s}},n={};function i(w){var _=n[w];if(_!==void 0)return _.exports;var P=n[w]={exports:{}};return r[w](P,P.exports,i),P.exports}i.d=(w,_)=>{for(var P in _)i.o(_,P)&&!i.o(w,P)&&Object.defineProperty(w,P,{enumerable:!0,get:_[P]})},i.o=(w,_)=>Object.prototype.hasOwnProperty.call(w,_),i.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{ToastComponent:()=>L,ToastPlugin:()=>M,ToastPositions:()=>g,default:()=>A,useToast:()=>$});var l=i(594);const c=["innerHTML"];function u(w,_,P,R,x,N){return(0,l.openBlock)(),(0,l.createBlock)(l.Transition,{"enter-active-class":w.transition.enter,"leave-active-class":w.transition.leave},{default:(0,l.withCtx)(()=>[(0,l.withDirectives)((0,l.createElementVNode)("div",{ref:"root",role:"alert",class:(0,l.normalizeClass)(["v-toast__item",[`v-toast__item--${w.type}`,`v-toast__item--${w.position}`]]),onMouseover:_[0]||(_[0]=ue=>w.toggleTimer(!0)),onMouseleave:_[1]||(_[1]=ue=>w.toggleTimer(!1)),onClick:_[2]||(_[2]=function(){return w.whenClicked&&w.whenClicked(...arguments)})},[_[3]||(_[3]=(0,l.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,l.createElementVNode)("p",{class:"v-toast__text",innerHTML:w.message},null,8,c)],34),[[l.vShow,w.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function h(w){var _;typeof w.remove<"u"?w.remove():(_=w.parentNode)==null||_.removeChild(w)}function f(w,_,P){let R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const x=(0,l.h)(w,_,R),N=document.createElement("div");return N.classList.add("v-toast--pending"),P.appendChild(N),(0,l.render)(x,N),x.component}class m{constructor(_,P){this.startedAt=Date.now(),this.callback=_,this.delay=P,this.timer=setTimeout(_,P)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const g=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function v(w){return{all:w=w||new Map,on:function(_,P){var R=w.get(_);R?R.push(P):w.set(_,[P])},off:function(_,P){var R=w.get(_);R&&(P?R.splice(R.indexOf(P)>>>0,1):w.set(_,[]))},emit:function(_,P){var R=w.get(_);R&&R.slice().map(function(x){x(P)}),(R=w.get("*"))&&R.slice().map(function(x){x(_,P)})}}}const C=v(),U=(0,l.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:g.BOTTOM_RIGHT,validator(w){return Object.values(g).includes(w)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),C.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const w=document.body;w.appendChild(this.parentTop),w.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const w=this.$refs.root;(0,l.render)(null,w),h(w)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const w=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),h(w),this.isActive=!0,this.duration&&(this.timer=new m(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(w){!this.pauseOnHover||!this.timer||(w?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return this.parentTop;case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){C.off("toast-clear",this.dismiss)}});var D=i(113);const L=(0,D.default)(U,[["render",u]]),$=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(_){let P=null;typeof _=="string"&&(P=_);const x=Object.assign({},{message:P},w,_);return{dismiss:f(L,x,document.body).ctx.dismiss}},clear(){C.emit("toast-clear")},success(_){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"success"},P))},error(_){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"error"},P))},info(_){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"info"},P))},warning(_){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"warning"},P))},default(_){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"default"},P))}}},M={install:function(w){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=$(_);w.config.globalProperties.$toast=P,w.provide("$toast",P)}},A=M;return o})())}(nd)),nd.exports}var o2e=i2e();const a2e=ibe(o2e),Nx=JSON.parse(`{"common":{"login":"Login","register":"Register","logout":"Log Out","save":"Save","cancel":"Cancel","back":"Back","continue":"Continue","loading":"Loading...","or":"or","yes":"Yes","no":"No","free":"Free","pro":"Pro","start":"Start","close":"Close","search":"Search","apply":"Apply","update":"Update","delete":"Delete","edit":"Edit","verified":"Verified","active":"Active","language":"Language","selectLanguage":"Select Language","english":"English","russian":"","uzbek":"O'zbekcha"},"userSection":{"login":"Login","register":"Register","profile":"Profile","settings":"Settings","logout":"Logout","greeting":"Hello, {name}","createAccount":"Create an Account","startJourney":"Start your learning journey","firstName":"First Name","lastName":"Last Name","email":"Email","password":"Password","confirmPassword":"Confirm Password","signUp":"Sign Up","registering":"Registering...","continueWithGoogle":"Continue with Google","alreadyHaveAccount":"Already have an account?","signIn":"Sign In","welcomeBack":"Welcome Back!","continuelearning":"Continue your learning","signingIn":"Signing in...","dontHaveAccount":"Don't have an account?"},"heroSection":{"studentsLearning":"{count}+ students already learning","headline":"The smarter way to","headlineHighlight":"learn anything","subtitle":"Interactive lessons with AI-powered help. Learn at your own pace.","startFree":"Start Free - No Registration","registerAndSave":"Register & Save Progress","courses":"Courses","aiSupport":"AI Support","completion":"Completion","learners":"learners","mathematics":"Mathematics","mathLessons":"12 lessons  Beginner","languages":"Languages","langLessons":"24 lessons  Intermediate","science":"Science","sciLessons":"18 lessons  Advanced"},"sidebar":{"learningPlatform":"Learning Platform","level":"Level","streak":"Streak","learningMode":"Learning Mode","school":"School","studyCentre":"Study Centre","chooseYourPath":"Choose Your Path","selectHowToLearn":"Select how you want to learn","schoolMode":"School Mode","structuredCurriculum":"Structured curriculum","freeExploration":"Free exploration","menu":"Menu","dashboard":"Dashboard","overviewStats":"Overview & stats","myCourses":"My Courses","browseLessons":"Browse lessons","assignments":"Assignments","practiceHomework":"Practice & homework","tests":"Tests","assessmentAnalytics":"Assessment & analytics","settings":"Settings","accountPreferences":"Account & preferences","upgradeToPro":"Upgrade to Pro","unlockAllFeatures":"Unlock all features","logOut":"Log Out","confirmLogout":"Are you sure you want to log out of your account?","premiumFeature":"Premium Feature","unlockWithPlan":"Unlock with Start or Pro plan","unlimitedTests":"Unlimited practice tests","detailedAnalytics":"Detailed analytics","aiHomeworkHelp":"AI-powered homework help","maybeLater":"Maybe Later","upgradeNow":"Upgrade Now"},"footer":{"slogan":"Making education simple, interactive, and accessible for everyone.","navigation":"Navigation","aboutUs":"About Us","courses":"Courses","pricing":"Pricing","aiAssistant":"AI Assistant","contact":"Contact","contactUs":"Contact Us","allRights":"2025 ACED. All rights reserved.","privacyPolicy":"Privacy Policy","termsOfService":"Terms of Service","aiHelperTitle":"AI Assistant","aiHelperText":"Look for the chat bubble in the bottom right corner. Our AI is ready to help!","gotIt":"Got it"},"tariffs":{"pricing":"Pricing","simpleTitle":"Simple","pricingTitle":"pricing","noHiddenFees":"No hidden fees. Cancel anytime.","monthly":"Monthly","quarterly":"Quarterly","biannual":"Biannual","tryingOut":"Great for trying out","bestValue":"Best value","maxSavings":"Maximum savings","month":"mo","months":"months","forMonths":"for {count} months","getStarted":"Get Started","startLearning":"Start Learning","subscribe":"Subscribe","popular":"POPULAR","save":"Save {percent}%","allSubjects":"All subjects included","unlimitedAI":"Unlimited AI help","progressTracking":"Progress tracking","homeworkAssistance":"Homework assistance","prioritySupport":"Priority support","securePayment":"Secure payment","cancelAnytime":"Cancel anytime","instantAccess":"Instant access"},"mainPage":{"welcomeBack":"Welcome back!","searchPlaceholder":"Search for topics or courses...","allSubjects":"All subjects","recommended":"Recommended for you","refresh":"Refresh","noRecommendations":"No suitable recommendations.","myCourses":"My courses","noCourses":"You have no active courses yet."},"dashboard":{"title":"Dashboard","streak":"Streak","days":"days","points":"Points","discoverLevel":"Discover Your Level","discoverLevelDesc":"Take a quick test to determine your knowledge level and unlock appropriate courses","takePlacementTest":"Take Placement Test","yourLearningJourney":"Your Learning Journey","addCourseToSeePathway":"Add a course to see your interactive lesson pathway!","browseCourses":"Browse Courses","yourLearningDNA":"Your Learning DNA","aiPoweredPersonalization":"AI-powered personalization","learningStyle":"Learning Style","bestTime":"Best Time","cognitiveStrengths":"Cognitive Strengths","smartTips":"Smart Tips for You","learningPath":"Learning Path","optimalTime":"Optimal Time","sessionLength":"Session Length","difficulty":"Difficulty","unlockLearningDNA":"Unlock Your Learning DNA","completeLessonsToReveal":"Complete lessons to reveal your profile","completeAtLeast":"Complete at least {count} lessons to unlock your personalized Learning DNA and AI-powered recommendations.","lesson":"Lesson","startLearning":"Start Learning","yourProgress":"Your Progress","level":"Level","toNextLevel":"to next level","dayStreak":"Day Streak","achievements":"Achievements","stepsToReward":"Steps to Reward","recentAchievements":"Recent Achievements","viewAllAchievements":"View all {count} achievements","totalCourses":"Total Courses","completed":"Completed","hoursStudied":"Hours Studied","weeklyProgress":"Weekly Progress","currentLessons":"Current Lessons","activeCourses":"Active Courses","inProgress":"in progress","allLessons":"All Lessons","allCourses":"All Courses","loadingCourses":"Loading courses...","noActiveCourses":"You don't have any active courses yet","addCourse":"Add Course","nextLesson":"Next lesson","complete":"complete","continue":"Continue","quickAccess":"Quick Access","weeklyGoals":"Weekly Goals","recentActivity":"Recent Activity","noRecentActivity":"No recent activity","learningStatistics":"Learning Statistics","averageTestScore":"Average Test Score","myCurriculum":"My Curriculum","courseCatalog":"Course Catalog","viewLearningPath":"View your learning path","browseAllCourses":"Browse all available courses","detailedStatistics":"Detailed learning statistics","practiceExercises":"Practice problems and exercises","testsQuizzes":"Tests & Quizzes","testKnowledge":"Test your knowledge","myGoals":"My Goals","trackProgress":"Track your progress","vocabulary":"Vocabulary","learnedTerms":"Learned terms and concepts","complete5Lessons":"Complete 5 lessons","study2Hours":"Study 2 hours","pass3Tests":"Pass 3 tests","min":"min","weeklyGoal":"Weekly Goal","week":"Week","lessonsCount":"{current} / {total} Lessons","startLesson":"Start a Lesson","goalCompleted":"Goal Completed!","grade":"Grade","unlimitedAccess":"Unlimited Access","selectMode":"Select Your Mode","notAvailable":"N/A","encouragement":{"start":" Plant the seeds of knowledge!","growing":" Your tree is starting to grow!","halfway":" Keep it up! Halfway there!","apples":" Amazing progress! Apples appearing!","almost":" Almost there! The tree is flourishing!","done":" Incredible! Your tree is full of fruit!"}},"catalogue":{"title":"Catalogue","courses":"courses","inPlan":"in plan","findCourse":"Find a course...","allSubjects":"All Subjects","allLevels":"All Levels","allTypes":"All Types","free":"Free","premium":"Premium","clear":"Clear","shuffle":"Shuffle","loadingCourses":"Loading courses...","noCoursesFound":"No courses found","tryAdjustingFilters":"Try adjusting your filters","lessons":"lessons","progress":"Progress","addToStudyPlan":"Add to Study Plan?","cancel":"Cancel","add":"Add","added":"Added!","great":"Great","start":"Start","continueBtn":"Continue","review":"Review","lvl":"Lvl","beginner":"Beginner","elementary":"Elementary","intermediate":"Intermediate","upperIntermediate":"Upper-Intermediate","advanced":"Advanced","proficient":"Proficient"},"chatBot":{"title":"AI Chat","loginPrompt":"To start a conversation, log in.","logIn":"Log in","placeholder":"Enter message...","send":"Send","endConversation":"End Conversation"},"topics":{"title":"Topics to study","loading":"Loading topics...","loadError":"Error loading topics:","added":"Topic added to the list!","addError":"Error adding topic:"},"topicCard":{"add":"Add","start":"Start","subjectMissing":"Subject not specified."},"aboutUs":{"title":"About ACED","desc1":"We create next-generation educational technologies that make knowledge accessible to everyone in the world.","desc2":"Our goal is to break down barriers and make learning flexible, personalized, and inspiring.","desc3":"With ACED, you're not just learning. You become freer, stronger, and ready to change your reality.","chartTitle":"How ACED changed my life","happiness":"Happiness level","confidence":"Self-confidence","motivation":"Motivation to learn","freedom":"Sense of freedom","changeWorld":"Readiness to change the world"},"lesson":{"backToTests":"Back to Tests","continueLearning":"Continue Learning","lessonComplete":"Lesson Complete!","greatJob":"Great job! You've completed this lesson.","nextLesson":"Next Lesson","tryAgain":"Try Again","correctAnswer":"Correct!","wrongAnswer":"Not quite right. Try again!","hint":"Hint","showAnswer":"Show Answer","submit":"Submit","skip":"Skip","progress":"Progress","aiHelp":"AI Help","askQuestion":"Ask a question...","vocabulary":"Vocabulary"},"games":{"score":"Score","time":"Time","lives":"Lives","level":"Level","gameOver":"Game Over","youWin":"You Win!","playAgain":"Play Again","pause":"Pause","resume":"Resume","quit":"Quit","highScore":"High Score","newHighScore":"New High Score!","tapToStart":"Tap to Start","getReady":"Get Ready!","go":"Go!"},"errors":{"loginError":"Login error","userNotFound":"User not found","invalidPassword":"Invalid password or email","invalidEmail":"Invalid email format","tooManyAttempts":"Too many attempts. Please try later","accountDisabled":"Account disabled","networkError":"Internet connection problem","registrationError":"Registration error","emailInUse":"Email already in use","weakPassword":"Password too weak","passwordsMismatch":"Passwords don't match","fillAllFields":"Please fill all required fields","googleSignInError":"Google sign-in error","popupClosed":"Sign-in window was closed","popupBlocked":"Popup window blocked","passwordMinLength":"Password must be at least 6 characters"},"success":{"signedIn":"Successfully signed in!","signedInGoogle":"Successfully signed in with Google!","registrationSuccess":"Registration successful!","profileUpdated":"Profile updated successfully!","passwordChanged":"Password changed successfully!","promocodeApplied":"Promocode applied!"},"platformMode":{"levelTest":"Level Test","testYourLevel":"Test your level to get personalized recommendations","startTest":"Start Test","skipTest":"Skip Test","yourLevel":"Your Level","beginner":"Beginner","intermediate":"Intermediate","advanced":"Advanced","expert":"Expert"},"diary":{"saving":"Saving...","saved":"Saved!","finishDay":"Finish Day","todaysNotes":"Today's Notes","addNote":"Add a note...","noNotes":"No notes yet"},"homework":{"title":"Homework Help","uploadPhoto":"Upload Photo","typeQuestion":"Type your question","getHelp":"Get Help","solution":"Solution","explanation":"Explanation","similarProblems":"Similar Problems","back":"Back","loading":"Loading assignment...","assignmentType":"Assignment Type","standalone":"Standalone","lesson":"Lesson","totalQuestions":"Total Questions","answered":"Answered","completionProgress":"Completion Progress","instructions":"Instructions","points":"points","point":"point","answerPlaceholder":"Enter your answer to question {number}","answerAdded":"Answer added","awaitingAnswer":"Awaiting answer","saveDraft":"Save Draft","saving":"Saving...","completeAssignment":"Complete Assignment","submitting":"Submitting...","allAnswered":"All questions answered! You can complete the assignment.","answerAllQuestions":"Answer all questions to complete the assignment.","tryAgain":"Try Again","backToList":"Back to List","noQuestions":"No questions in this assignment","contactTeacher":"Contact your teacher for more information","assignmentIdNotFound":"Assignment ID not found","checkLink":"Check the link and try again","userNotAuthenticated":"User not authenticated","homeworkNotFound":"Homework not found","lessonNotFound":"Lesson or homework not found","serverError":"Server error","errorLoading":"Error loading homework","answersSaved":"Answers saved!","failedToSave":"Failed to save answers","homeworkCompleted":"Homework completed!","yourScore":"Your score","stars":"Stars","correctAnswers":"Correct answers","errorSubmitting":"Error submitting answers","pleaseAnswerAll":"Please answer all questions. Remaining: {count}"},"homeworkList":{"title":"Homework","assignments":"assignments","done":"done","inProgress":"in progress","searchPlaceholder":"Search homework...","allSubjects":"All Subjects","allStatus":"All Status","notStarted":"Not Started","statusInProgress":"In Progress","completed":"Completed","clear":"Clear","loading":"Loading...","somethingWentWrong":"Something went wrong","tryAgain":"Try Again","noHomeworkYet":"No homework yet","noMatchesFound":"No matches found","startCourseToGet":"Start a course to get assignments","tryDifferentFilters":"Try different filters","dueSoon":"DUE SOON","exercises":"exercises","progress":"Progress","view":"View","continue":"Continue","start":"Start"},"vocabulary":{"title":"Vocabulary","loading":"Loading vocabulary...","emptyTitle":"No words yet","emptyText":"You don't have any words in your vocabulary yet","emptySubtext":"Start studying lessons to add new words","learned":"% learned","words":"words","topics":"topics","searchPlaceholder":"Search words...","allWords":"All words","active":"Active","progress":"Progress","back":"Back","levels":"levels","level":"Level"},"tests":{"title":"Tests","available":"available","subjects":"subjects","levels":"levels","searchPlaceholder":"Search tests...","allSubjects":"All Subjects","allLevels":"All Levels","level":"Level","clear":"Clear","loading":"Loading...","noTestsFound":"No tests found","tryAdjusting":"Try adjusting your filters","questions":"questions","start":"Start","questionOf":"Question {current} of {total}","next":"Next","finish":"Finish","greatJob":"Great job!","goodEffort":"Good effort!","keepPracticing":"Keep practicing!","youScored":"You scored {score}% on this test","correct":"Correct","total":"Total","backToTests":"Back to Tests","typeAnswer":"Type your answer..."},"checkout":{"title":"Complete Your Payment","subtitle":"Subscribe to ACED and unlock premium features","paymentDetails":"Payment Details","account":"Account","email":"Email","currentPlan":"Current Plan","upgradingTo":"Upgrading To","notSpecified":"Not specified","totalAmount":"Total Amount","paymentMethod":"Payment Method","bankCard":"Bank Card","bankCardDesc":"Visa, Mastercard, UzCard, Humo","payme":"Payme","paymeDesc":"Pay with Payme app","click":"Click","clickDesc":"Pay with Click app","comingSoon":"Coming Soon","selectDuration":"Select Duration","month":"Month","months":"Months","popular":"POPULAR","save":"Save {percent}%","havePromoCode":"Have a Promo Code?","enterPromoCode":"Enter promo code","apply":"Apply","promoApplied":"Promo code applied!","invalidPromo":"Invalid promo code","validatingPromo":"Validating promo code...","paymentPageLanguage":"Payment Page Language","continueToPayment":"Continue to Payment","processing":"Processing...","securePayment":"Secure Payment  Encrypted & Protected","verifyPayment":"Verify Payment","enterCode":"Enter the 6-digit code sent to your phone","cancel":"Cancel","confirm":"Confirm","verifying":"Verifying...","paymentSuccessful":"Payment Successful!","subscriptionActivated":"Your {plan} subscription has been activated","plan":"Plan","amount":"Amount","transactionId":"Transaction ID","viewSubscription":"View Subscription","startLearning":"Start Learning","paymentFailed":"Payment Failed","couldNotProcess":"We couldn't process your payment. Please try again.","tryAgain":"Try Again","changeMethod":"Change Method","paymentCancelled":"Payment Cancelled","cancelledMessage":"You cancelled the payment. Your subscription remains unchanged.","returnToPayment":"Return to Payment","backToHome":"Back to Home","unableToProcess":"Unable to Process Payment","goBack":"Go Back","userIdRequired":"User ID not specified","selectPlan":"Please select a plan","invalidAmount":"Invalid payment amount","selectPaymentMethod":"Please select an available payment method","completeFields":"Complete all required fields","free":"Free"},"topicFinished":{"congratulations":"Congratulations!","completed":"You have completed all lessons in this topic!","returnToDashboard":"Return to Dashboard","goldMedal":"Gold Medal! Magnificent!","silverMedal":"Silver Medal! Great job!","bronzeMedal":"Bronze Medal! Well done!","keepLearning":"Keep learning and you will get a medal!"},"payments":{"successTitle":"Payment Successful!","subscriptionActivated":"Your subscription {plan} is activated!","enjoyLearning":"Enjoy unlimited learning without restrictions.","transactionDetails":"Transaction Details","amount":"Amount","date":"Date","whatNowAvailable":"What's now available:","unlimitedLessons":"Unlimited access to all lessons","aiAssistant":"AI assistant for learning","progressTracking":"Progress and analytics tracking","allSubjects":"Access to all subjects","startLearning":"Start Learning","questions":"Questions? Contact us:","failedTitle":"Payment Failed","failedMessage":"Unfortunately, the payment could not be processed.","tryAgain":"Try Again","contactSupport":"Contact Support"},"profilePage":{"dashboard":"Dashboard","myCourses":"My Courses","assignments":"Assignments","testsAnalytics":"Tests & Analytics","settings":"Settings"},"loadingStates":{"lesson":"Loading lesson...","courses":"Loading courses...","courseInfo":"Loading course info...","course":"Loading course information...","errorLoading":"Error Loading","processing":"Processing...","update":"Update"},"settings":{"accountSettings":"Account Settings","manageProfile":"Update your personal details","plan":"Plan","messages":"Messages","images":"Images","daysLeft":"Days Left","subscriptionPlans":"Subscription Plans","chooseBestPlan":"Choose the best plan for you","oneMonth":"1 Month","threeMonths":"3 Months","sixMonths":"6 Months","uzs":"UZS","unlimitedMessages":"Unlimited messages","unlimitedImages":"Unlimited images","aiTutorAccess":"AI tutor access","aiTutorAnalytics":"AI tutor + Analytics","unlimitedEverything":"Unlimited everything","prioritySupportPlan":"Priority support","customCourses":"Custom courses","bestDeal":"Best Deal","getPro":"Get Pro","enterPromocode":"Enter promocode","applyCode":"Apply Code","applying":"Applying...","invalidPromocode":"Invalid promocode","promocodeApplied":"Promocode applied!","personalInformation":"Personal Information","personalInfo":"Personal Information","updatePersonal":"Update your personal details","notSpecified":"Not specified","security":"Security","changePassword":"Change your password","currentPassword":"Current Password","newPassword":"New Password","confirmPassword":"Confirm Password","confirmNewPassword":"Confirm Password","forgotPassword":"Forgot Password?","updating":"Updating...","dangerZone":"Danger Zone","irreversibleActions":"Irreversible actions","signOut":"Sign Out","signOutDesc":"Sign out from your account","deleteAccount":"Delete Account","deleteAccountDesc":"Permanently delete account","deleteModalTitle":"Delete Account","deleteModalText":"Are you sure you want to delete your account? This action cannot be undone.","deleteModalWarning":"All your data, progress, and subscription will be permanently deleted.","deleteConfirmTitle":"Delete Account","deleteConfirmText":"Are you sure you want to delete your account? This action cannot be undone.","deleteWarning":"All your data, progress, and subscription will be permanently deleted.","deleteForever":"Delete Forever","cancel":"Cancel","save":"Save","update":"Update","toggleNavigation":"Toggle navigation"},"analytics":{"pageTitle":"Learning Analytics","pageSubtitle":"Track your progress and achievements","title":"Your learning analytics","downloadPdf":"Download PDF","downloadPDF":"Download as PDF","configureExport":"Configure PDF export","choosePeriod":"Choose period:","lastWeek":"Last week","twoWeeks":"2 weeks","threeWeeks":"3 weeks","oneMonth":"1 Month","threeMonths":"3 Months","oneYear":"1 Year","studyDays":"Study Days","completedSubjects":"Subjects completed","weeklyLessons":"Lessons per week","monthlyLessons":"Lessons per month","streakDays":"Streak Days","activeDay":"Active day","mostActiveDay":"Most active day","totalLessons":"Total lessons","download":"Download","currentPace":"This is your current pace","consistency":"Consistency is key to success","onARoll":"You're on a roll","startAgain":"Start again","keepItUp":"Keep it up on this day","overallProgress":"Overall progress","loading":"Loading analytics...","error":"Error loading data","tryAgain":"Try Again","learningDna":"Your Learning DNA","aiPersonalization":"AI-powered personalization","learningStyle":"Learning Style","chronotype":"Chronotype","learningPath":"Learning Path","sessionLength":"Session Length","cognitiveProfile":"Cognitive Profile","personalInsights":"Personal Insights","gamification":"Gamification","level":"Level","points":"points","streak":"Streak","achievements":"Achievements","recentActivity":"Recent Activity","emptyState":"No analytics data yet","startLearning":"Start Learning","exportSettings":"PDF Export Settings","period":"Period","selectMetrics":"Select Metrics","completedLessons":"Completed Lessons","completedTopics":"Completed Topics","totalPoints":"Total Points","avgPointsPerDay":"Avg Points/Day","daysInRow":"days in a row","recentAchievements":"Recent Achievements","untilReward":"Until reward","authRequired":"Authorization required","authError":"Authorization error","notFound":"Data not found. Start learning lessons!","serverError":"Server error","loadError":"Error loading data","visual":"Visual","auditory":"Auditory","kinesthetic":"Kinesthetic","readingWriting":"Reading/Writing","balanced":"Balanced","lark":"Lark","owl":"Owl","thirdBird":"Third Bird","variable":"Variable","flexible":"Flexible","storyteller":"Storyteller","builder":"Builder","scientist":"Scientist","artist":"Artist","gamer":"Gamer","social":"Social","debater":"Debater","universal":"Universal","minutes":"minutes","processingSpeed":"Processing Speed","workingMemory":"Working Memory","visualSpatial":"Visual-Spatial","verbalLinguistic":"Verbal-Linguistic","logicalMathematical":"Logical-Mathematical","Processing":"Processing Speed","Memory":"Working Memory","Visual":"Visual-Spatial","Verbal":"Verbal-Linguistic","Logic":"Logical-Mathematical","lessonWithoutName":"Untitled Lesson","lesson":"Lesson","today":"Today","yesterday":"Yesterday","generated":"Generated","studyAnytime":"Study anytime","betterAt":"Better at {hours}","days":"days","yearShort":"y","monthShort":"mo","dayShort":"d","passedLessons":"Passed lessons","studiedSections":"Studied sections","activityPoints":"Activity points","avgEarnings":"Avg earnings"},"acedSection":{"exploreCourses":"Explore Courses","startLearning":"Start learning","today":"today","chooseCourse":"Choose a course and begin your learning journey","lessons":"lessons","start":"Start","noCoursesFound":"No courses found","loadingContent":"We're loading content for you","tryAgain":"Try Again","unlockCourse":"Unlock This Course","createFreeAccount":"Create a free account to access premium content","createAccount":"Create Free Account","maybeLater":"Maybe Later","lvl":"Lvl","errorLoading":"Error loading courses"},"homepage":{"whyChooseUs":"Why Choose Us","learningMadeSimple":"Learning made simple","learningMadeSimpleDesc":"We've built an education platform that's effective, engaging, and easy to use","interactiveLearning":"Interactive Learning","interactiveLearningDesc":"Hands-on exercises with instant feedback. No boring lectures.","aiPoweredHelp":"AI-Powered Help","aiPoweredHelpDesc":"Our AI tutor is available 24/7 to explain concepts clearly.","trackProgress":"Track Progress","trackProgressDesc":"See your growth with analytics. Earn badges as you level up.","richContent":"Rich Content","richContentDesc":"100+ courses in math, science, languages. New content weekly.","learnAnytime":"Learn Anytime","learnAnytimeDesc":"Access on any device. Progress syncs automatically.","actuallyFun":"Actually Fun","actuallyFunDesc":"Learning that doesn't feel like a chore. Stay motivated.","activeStudents":"Active Students","courses":"Courses","completionRate":"Completion Rate","aiSupport":"AI Support"},"tariffSection":{"pricing":"Pricing","simplePricing":"Simple pricing","noHiddenFees":"No hidden fees. Cancel anytime.","monthly":"Monthly","quarterly":"Quarterly","biannual":"Biannual","greatForTrying":"Great for trying out","bestValue":"Best value","maximumSavings":"Maximum savings","perMonth":"/mo","forMonths":"for {months} months","getStarted":"Get Started","startLearning":"Start Learning","subscribe":"Subscribe","popular":"POPULAR","save":"Save {percent}%","securePayment":"Secure payment","cancelAnytime":"Cancel anytime","instantAccess":"Instant access","allSubjectsIncluded":"All subjects included","unlimitedAiHelp":"Unlimited AI help","progressTracking":"Progress tracking","homeworkAssistance":"Homework assistance","prioritySupport":"Priority support"},"timeOfDay":{"morning":"Morning","afternoon":"Afternoon","evening":"Evening"},"timeAgo":{"recently":"recently","justNow":"just now","minutesAgo":"{count} minutes ago","hoursAgo":"{count} hours ago","daysAgo":"{count} days ago","overWeekAgo":"over a week ago"},"course":{"untitled":"Untitled Course","noLessons":"No lessons","allCompleted":"All completed"},"time":{"hours":"h","minutes":"m"},"activity":{"testResult":"Test result","completedLesson":"Completed lesson"},"payment":{"premiumAccess":"Premium Content Access","chooseAccessMethod":"Choose how to get access","selectPlan":"Select a plan:","recommended":"Recommended","basicCourses":"Basic courses","homework":"Homework","basicTests":"Basic tests","allStartCourses":"All Start courses","advancedCourses":"Advanced courses","personalAnalytics":"Personal analytics","prioritySupport":"Priority support","orEnterPromo":"Or enter a promo code:","enterPromoCode":"Enter promo code","pay":"Pay","processing":"Processing...","selectPlanFirst":"Please select a plan","enterPromoFirst":"Enter a promo code","promoError":"An error occurred while applying the promo code","paymentError":"Error proceeding to payment","sum":"sum"},"levelPathway":{"level":"Level","xp":"XP","dayStreak":"day streak","continue":"Continue","lessonNumber":"Lesson {number}"},"modeChoice":{"chooseYourPath":"Choose Your Learning Path","selectHowToLearn":"Select how you'd like to learn on ACED","acedSchool":"ACED School","structuredCurriculum":"Structured curriculum with level progression","acedStudyCentre":"ACED Study Centre","freeExploration":"Free exploration, learn anything anytime","settingUp":"Setting up...","continue":"Continue"}}`),Ox=JSON.parse(`{"common":{"login":"","register":"","logout":"","save":"","cancel":"","back":"","continue":"","loading":"...","or":"","yes":"","no":"","free":"","pro":"","start":"","close":"","search":"","apply":"","update":"","delete":"","edit":"","verified":"","active":"","language":"","selectLanguage":" ","english":"English","russian":"","uzbek":"O'zbekcha","toggleNavigation":" "},"userSection":{"login":"","register":"","profile":"","settings":"","logout":"","greeting":", {name}","createAccount":" ","startJourney":"   ","firstName":"","lastName":"","email":"Email","password":"","confirmPassword":" ","signUp":"","registering":"...","continueWithGoogle":"  Google","alreadyHaveAccount":"  ?","signIn":"","welcomeBack":" !","continuelearning":" ","signingIn":"...","dontHaveAccount":" ?"},"heroSection":{"studentsLearning":"{count}+   ","headline":" ","headlineHighlight":" ","subtitle":"    .    .","startFree":" ","registerAndSave":"  ","courses":"","aiSupport":" ","completion":"","learners":"","mathematics":"","mathLessons":"12   ","languages":"","langLessons":"24   ","science":"","sciLessons":"18   "},"sidebar":{"learningPlatform":" ","level":"","streak":"","learningMode":" ","school":"","studyCentre":" ","chooseYourPath":"  ","selectHowToLearn":"  ","schoolMode":" ","structuredCurriculum":" ","freeExploration":" ","menu":"","dashboard":"","overviewStats":"  ","myCourses":" ","browseLessons":" ","assignments":"","practiceHomework":"  ","tests":"","assessmentAnalytics":"  ","settings":"","accountPreferences":"  ","upgradeToPro":"  Pro","unlockAllFeatures":"  ","logOut":"","confirmLogout":" ,     ?","premiumFeature":" ","unlockWithPlan":"   Start  Pro","unlimitedTests":" ","detailedAnalytics":" ","aiHomeworkHelp":"   ","maybeLater":" ","upgradeNow":" "},"footer":{"slogan":"  ,     .","navigation":"","aboutUs":" ","courses":"","pricing":"","aiAssistant":" ","contact":"","contactUs":"  ","allRights":"2025 ACED.   .","privacyPolicy":" ","termsOfService":" ","aiHelperTitle":" ","aiHelperText":"      .    !","gotIt":""},"tariffs":{"pricing":"","simpleTitle":"","pricingTitle":"","noHiddenFees":"  .    .","monthly":"","quarterly":"","biannual":"","tryingOut":"  ","bestValue":" ","maxSavings":" ","month":"","months":"","forMonths":" {count} ","getStarted":"","startLearning":" ","subscribe":"","popular":"","save":" {percent}%","allSubjects":"  ","unlimitedAI":"  ","progressTracking":" ","homeworkAssistance":"  ","prioritySupport":" ","securePayment":" ","cancelAnytime":"   ","instantAccess":" "},"mainPage":{"welcomeBack":" !","searchPlaceholder":"   ...","allSubjects":" ","recommended":"  ","refresh":"","noRecommendations":"  .","myCourses":" ","noCourses":"     ."},"dashboard":{"title":" ","streak":"","days":"","points":"","discoverLevel":"  ","discoverLevelDesc":"  ,        ","takePlacementTest":"  ","yourLearningJourney":"  ","addCourseToSeePathway":" ,     !","browseCourses":" ","yourLearningDNA":"  ","aiPoweredPersonalization":"   ","learningStyle":" ","bestTime":" ","cognitiveStrengths":" ","smartTips":"   ","learningPath":" ","optimalTime":" ","sessionLength":" ","difficulty":"","unlockLearningDNA":"   ","completeLessonsToReveal":" ,   ","completeAtLeast":"  {count} ,        .","lesson":"","startLearning":" ","yourProgress":" ","level":"","toNextLevel":"  ","dayStreak":" ","achievements":"","stepsToReward":"  ","recentAchievements":" ","viewAllAchievements":"  {count} ","totalCourses":" ","completed":"","hoursStudied":" ","weeklyProgress":" ","currentLessons":" ","activeCourses":" ","inProgress":" ","allLessons":" ","allCourses":" ","loadingCourses":" ...","noActiveCourses":"     ","addCourse":" ","nextLesson":" ","complete":"","continue":"","quickAccess":" ","weeklyGoals":" ","recentActivity":" ","noRecentActivity":"  ","learningStatistics":" ","averageTestScore":"  ","myCurriculum":" ","courseCatalog":" ","viewLearningPath":"  ","browseAllCourses":"   ","detailedStatistics":"  ","practiceExercises":"   ","testsQuizzes":"  ","testKnowledge":"  ","myGoals":" ","trackProgress":" ","vocabulary":"","learnedTerms":"   ","complete5Lessons":" 5 ","study2Hours":" 2 ","pass3Tests":" 3 ","min":"","weeklyGoal":" ","week":"","lessonsCount":"{current} / {total} ","startLesson":" ","goalCompleted":" !","grade":"","unlimitedAccess":" ","selectMode":" ","notAvailable":"/","encouragement":{"start":"   !","growing":"    !","halfway":"  !   !","apples":"  !  !","almost":"  !  !","done":" !    !"}},"catalogue":{"title":"","courses":"","inPlan":" ","findCourse":" ...","allSubjects":" ","allLevels":" ","allTypes":" ","free":"","premium":"","clear":"","shuffle":"","loadingCourses":" ...","noCoursesFound":"  ","tryAdjustingFilters":"  ","lessons":"","progress":"","addToStudyPlan":"   ?","cancel":"","add":"","added":"!","great":"","start":"","continueBtn":"","review":"","lvl":"","beginner":"","elementary":"","intermediate":"","upperIntermediate":" ","advanced":"","proficient":""},"chatBot":{"title":" ","loginPrompt":"  ,   .","logIn":"","placeholder":" ...","send":"","endConversation":" "},"topics":{"title":"  ","loading":" ...","loadError":"  :","added":"   !","addError":"   :"},"topicCard":{"add":"","start":"","subjectMissing":"  ."},"aboutUs":{"title":"  ACED","desc1":"     ,        .","desc2":"    ,   ,   .","desc3":" ACED    .   ,      .","chartTitle":" ACED   ","happiness":" ","confidence":"  ","motivation":" ","freedom":" ","changeWorld":"  "},"lesson":{"backToTests":"  ","continueLearning":" ","lessonComplete":" !","greatJob":"!    .","nextLesson":" ","tryAgain":" ","correctAnswer":"!","wrongAnswer":"  .  !","hint":"","showAnswer":" ","submit":"","skip":"","progress":"","aiHelp":" ","askQuestion":" ...","vocabulary":""},"games":{"score":"","time":"","lives":"","level":"","gameOver":" ","youWin":" !","playAgain":" ","pause":"","resume":"","quit":"","highScore":"","newHighScore":" !","tapToStart":"  ","getReady":"!","go":"!"},"errors":{"loginError":" ","userNotFound":"  ","invalidPassword":"   email","invalidEmail":"  email","tooManyAttempts":"  .  ","accountDisabled":" ","networkError":"   ","registrationError":" ","emailInUse":"Email  ","weakPassword":"  ","passwordsMismatch":"  ","fillAllFields":",    ","googleSignInError":"   Google","popupClosed":"   ","popupBlocked":"  ","passwordMinLength":"    6 "},"success":{"signedIn":" !","signedInGoogle":"   Google!","registrationSuccess":" !","profileUpdated":"  !","passwordChanged":"  !","promocodeApplied":" !"},"platformMode":{"levelTest":" ","testYourLevel":"     ","startTest":" ","skipTest":" ","yourLevel":" ","beginner":"","intermediate":"","advanced":"","expert":""},"diary":{"saving":"...","saved":"!","finishDay":" ","todaysNotes":"  ","addNote":" ...","noNotes":"  "},"homework":{"title":"  ","uploadPhoto":" ","typeQuestion":"  ","getHelp":" ","solution":"","explanation":"","similarProblems":" ","back":"","loading":" ...","assignmentType":" ","standalone":"","lesson":"","totalQuestions":" ","answered":"","completionProgress":" ","instructions":"","points":"","point":"","answerPlaceholder":"     {number}","answerAdded":" ","awaitingAnswer":" ","saveDraft":" ","saving":"...","completeAssignment":" ","submitting":"...","allAnswered":"   !    .","answerAllQuestions":"   ,   .","tryAgain":" ","backToList":"  ","noQuestions":"    ","contactTeacher":"     ","assignmentIdNotFound":"ID   ","checkLink":"    ","userNotAuthenticated":"  ","homeworkNotFound":"   ","lessonNotFound":"    ","serverError":" ","errorLoading":"  ","answersSaved":" !","failedToSave":"   ","homeworkCompleted":"  !","yourScore":" ","stars":"","correctAnswers":" ","errorSubmitting":"  ","pleaseAnswerAll":"   . : {count}"},"homeworkList":{"title":" ","assignments":"","done":"","inProgress":" ","searchPlaceholder":" ...","allSubjects":" ","allStatus":" ","notStarted":" ","statusInProgress":" ","completed":"","clear":"","loading":"...","somethingWentWrong":"-   ","tryAgain":" ","noHomeworkYet":"  ","noMatchesFound":"  ","startCourseToGet":" ,   ","tryDifferentFilters":"  ","dueSoon":"","exercises":"","progress":"","view":"","continue":"","start":""},"vocabulary":{"title":"","loading":" ...","emptyTitle":"  ","emptyText":"     ","emptySubtext":"  ,    ","learned":"% ","words":"","topics":"","searchPlaceholder":" ...","allWords":" ","active":"","progress":"","back":"","levels":"","level":""},"tests":{"title":"","available":"","subjects":"","levels":"","searchPlaceholder":" ...","allSubjects":" ","allLevels":" ","level":"","clear":"","loading":"...","noTestsFound":"  ","tryAdjusting":"  ","questions":"","start":"","questionOf":" {current}  {total}","next":"","finish":"","greatJob":" !","goodEffort":" !","keepPracticing":" !","youScored":" : {score}%","correct":"","total":"","backToTests":"  ","typeAnswer":"  ..."},"checkout":{"title":" ","subtitle":"  ACED   -","paymentDetails":" ","account":"","email":"Email","currentPlan":" ","upgradingTo":" ","notSpecified":" ","totalAmount":"","paymentMethod":" ","bankCard":" ","bankCardDesc":"Visa, Mastercard, UzCard, Humo","payme":"Payme","paymeDesc":"  Payme","click":"Click","clickDesc":"  Click","comingSoon":"","selectDuration":" ","month":"","months":"","popular":"","save":" {percent}%","havePromoCode":" ?","enterPromoCode":" ","apply":"","promoApplied":" !","invalidPromo":" ","validatingPromo":" ...","paymentPageLanguage":"  ","continueToPayment":"  ","processing":"...","securePayment":"     ","verifyPayment":" ","enterCode":" 6- ,    ","cancel":"","confirm":"","verifying":"...","paymentSuccessful":" !","subscriptionActivated":"  {plan} ","plan":"","amount":"","transactionId":"ID ","viewSubscription":" ","startLearning":" ","paymentFailed":" ","couldNotProcess":"   .  .","tryAgain":" ","changeMethod":" ","paymentCancelled":" ","cancelledMessage":"  .    .","returnToPayment":"  ","backToHome":" ","unableToProcess":"   ","goBack":"","userIdRequired":"ID   ","selectPlan":" ","invalidAmount":" ","selectPaymentMethod":"   ","completeFields":"   ","free":""},"topicFinished":{"congratulations":"!","completed":"     !","returnToDashboard":"  ","goldMedal":" ! !","silverMedal":" !  !","bronzeMedal":" ! !","keepLearning":"    !"},"payments":{"successTitle":" !","subscriptionActivated":"  {plan} !","enjoyLearning":"    .","transactionDetails":" ","amount":"","date":"","whatNowAvailable":"  :","unlimitedLessons":"    ","aiAssistant":"   ","progressTracking":"   ","allSubjects":"   ","startLearning":" ","questions":"?  :","failedTitle":" ","failedMessage":" ,    .","tryAgain":" ","contactSupport":"  "},"profilePage":{"dashboard":" ","myCourses":" ","assignments":"","testsAnalytics":"  ","settings":""},"loadingStates":{"lesson":" ...","courses":" ...","courseInfo":"   ...","course":"   ...","errorLoading":" ","processing":"...","update":""},"settings":{"accountSettings":" ","manageProfile":"   ","plan":"","messages":"","images":"","daysLeft":" ","subscriptionPlans":" ","chooseBestPlan":"    ","oneMonth":"1 ","threeMonths":"3 ","sixMonths":"6 ","uzs":"","unlimitedMessages":" ","unlimitedImages":" ","aiTutorAccess":"   ","aiTutorAnalytics":"  + ","unlimitedEverything":"   ","prioritySupportPlan":" ","customCourses":" ","bestDeal":" ","getPro":" Pro","enterPromocode":" ","applyCode":" ","applying":"...","invalidPromocode":" ","promocodeApplied":" !","personalInformation":" ","personalInfo":" ","updatePersonal":"   ","notSpecified":" ","security":"","changePassword":" ","currentPassword":" ","newPassword":" ","confirmPassword":" ","confirmNewPassword":" ","forgotPassword":" ?","updating":"...","dangerZone":" ","irreversibleActions":" ","signOut":"","signOutDesc":"  ","deleteAccount":" ","deleteAccountDesc":"  ","deleteModalTitle":" ","deleteModalText":" ,    ?    .","deleteModalWarning":"  ,      .","deleteConfirmTitle":" ","deleteConfirmText":" ,    ?    .","deleteWarning":"  ,      .","deleteForever":" ","cancel":"","save":"","update":""},"analytics":{"pageTitle":" ","pageSubtitle":"    ","title":"  ","downloadPdf":" PDF","downloadPDF":"  PDF","configureExport":"  PDF","choosePeriod":" :","lastWeek":" ","twoWeeks":"2 ","threeWeeks":"3 ","oneMonth":"1 ","threeMonths":"3 ","oneYear":"1 ","studyDays":"  ","completedSubjects":" ","weeklyLessons":"  ","monthlyLessons":"  ","streakDays":" ","activeDay":" ","mostActiveDay":"  ","totalLessons":" ","download":"","currentPace":"   ","consistency":"    ","onARoll":"  ","startAgain":"  ","keepItUp":"   ","overallProgress":" ","loading":" ...","error":"  ","tryAgain":" ","learningDna":"  ","aiPersonalization":"AI-","learningStyle":" ","chronotype":"","learningPath":" ","sessionLength":" ","cognitiveProfile":" ","personalInsights":" ","gamification":"","level":"","points":"","streak":"","achievements":"","recentActivity":" ","emptyState":"    ","startLearning":" ","exportSettings":"  PDF","period":"","selectMetrics":" ","completedLessons":" ","completedTopics":" ","totalPoints":" ","avgPointsPerDay":"  ","daysInRow":" ","recentAchievements":" ","untilReward":" ","authRequired":" ","authError":" ","notFound":"  .   !","serverError":"  ","loadError":"  ","visual":"","auditory":"","kinesthetic":"","readingWriting":"/","balanced":"","lark":"","owl":"","thirdBird":"","variable":"","flexible":"","storyteller":"","builder":"","scientist":"","artist":"","gamer":"","social":"","debater":"","universal":"","minutes":"","processingSpeed":" ","workingMemory":" ","visualSpatial":"-","verbalLinguistic":"-","logicalMathematical":"-","Processing":" ","Memory":" ","Visual":"-","Verbal":"-","Logic":"-","lessonWithoutName":"  ","lesson":"","today":"","yesterday":"","generated":"","studyAnytime":"   ","betterAt":"  {hours}","days":"","yearShort":".","monthShort":".","dayShort":".","passedLessons":" ","studiedSections":" ","activityPoints":"  ","avgEarnings":" "},"acedSection":{"exploreCourses":"","startLearning":" ","today":"","chooseCourse":"     ","lessons":"","start":"","noCoursesFound":"  ","loadingContent":"   ","tryAgain":" ","unlockCourse":" ","createFreeAccount":"       ","createAccount":"  ","maybeLater":"","lvl":".","errorLoading":"  "},"homepage":{"whyChooseUs":" ","learningMadeSimple":" ","learningMadeSimpleDesc":"   ,  ,     ","interactiveLearning":" ","interactiveLearningDesc":"     .   .","aiPoweredHelp":"-","aiPoweredHelpDesc":" -  24/7   .","trackProgress":" ","trackProgressDesc":"     .  .","richContent":" ","richContentDesc":"100+   , , .   .","learnAnytime":"   ","learnAnytimeDesc":"   .   .","actuallyFun":" ","actuallyFunDesc":",    .  .","activeStudents":" ","courses":"","completionRate":"","aiSupport":"-"},"tariffSection":{"pricing":"","simplePricing":" ","noHiddenFees":"  .    .","monthly":"","quarterly":"","biannual":"","greatForTrying":"  ","bestValue":" ","maximumSavings":" ","perMonth":"/","forMonths":" {months} ","getStarted":"","startLearning":" ","subscribe":"","popular":"","save":" {percent}%","securePayment":" ","cancelAnytime":"   ","instantAccess":" ","allSubjectsIncluded":"  ","unlimitedAiHelp":" -","progressTracking":" ","homeworkAssistance":"  ","prioritySupport":" "},"timeOfDay":{"morning":"","afternoon":"","evening":""},"timeAgo":{"recently":"","justNow":" ","minutesAgo":"{count} . ","hoursAgo":"{count} . ","daysAgo":"{count} . ","overWeekAgo":"  "},"course":{"untitled":"  ","noLessons":" ","allCompleted":" "},"time":{"hours":"","minutes":""},"activity":{"testResult":" ","completedLesson":" "},"payment":{"premiumAccess":"  -","chooseAccessMethod":"   ","selectPlan":" :","recommended":"","basicCourses":" ","homework":" ","basicTests":" ","allStartCourses":"  Start","advancedCourses":" ","personalAnalytics":" ","prioritySupport":" ","orEnterPromo":"  :","enterPromoCode":" ","pay":"","processing":"...","selectPlanFirst":",  ","enterPromoFirst":" ","promoError":"    ","paymentError":"    ","sum":""},"levelPathway":{"level":"","xp":"XP","dayStreak":" ","continue":"","lessonNumber":" {number}"},"modeChoice":{"chooseYourPath":"  ","selectHowToLearn":",      ACED","acedSchool":"ACED ","structuredCurriculum":"   ","acedStudyCentre":"ACED  ","freeExploration":" ,   ","settingUp":"...","continue":""}}`),Dx=JSON.parse(`{"common":{"login":"Kirish","register":"Ro'yxatdan o'tish","logout":"Chiqish","save":"Saqlash","cancel":"Bekor qilish","back":"Orqaga","continue":"Davom etish","loading":"Yuklanmoqda...","or":"yoki","yes":"Ha","no":"Yo'q","free":"Bepul","pro":"Pro","start":"Boshlash","close":"Yopish","search":"Qidirish","apply":"Qo'llash","update":"Yangilash","delete":"O'chirish","edit":"Tahrirlash","verified":"Tasdiqlangan","active":"Faol","language":"Til","selectLanguage":"Tilni tanlang","english":"English","russian":"","uzbek":"O'zbekcha","toggleNavigation":"Navigatsiyani o'zgartirish"},"userSection":{"login":"Kirish","register":"Ro'yxatdan o'tish","profile":"Profil","settings":"Sozlamalar","logout":"Chiqish","greeting":"Salom, {name}","createAccount":"Hisob yaratish","startJourney":"O'qish sayohatingizni boshlang","firstName":"Ism","lastName":"Familiya","email":"Email","password":"Parol","confirmPassword":"Parolni tasdiqlang","signUp":"Ro'yxatdan o'tish","registering":"Ro'yxatdan o'tilmoqda...","continueWithGoogle":"Google bilan davom etish","alreadyHaveAccount":"Hisobingiz bormi?","signIn":"Kirish","welcomeBack":"Qaytib kelganingiz bilan!","continuelearning":"O'qishni davom ettiring","signingIn":"Kirilmoqda...","dontHaveAccount":"Hisobingiz yo'qmi?"},"heroSection":{"studentsLearning":"{count}+ talaba allaqachon o'qimoqda","headline":"Hamma narsani o'rganishning","headlineHighlight":"aqlli usuli","subtitle":"AI yordami bilan interaktiv darslar. O'z sur'atingizda o'rganing.","startFree":"Bepul boshlash","registerAndSave":"Ro'yxatdan o'tish va saqlash","courses":"Kurslar","aiSupport":"AI yordam","completion":"Yakunlash","learners":"o'quvchilar","mathematics":"Matematika","mathLessons":"12 dars  Boshlang'ich","languages":"Tillar","langLessons":"24 dars  O'rta","science":"Fan","sciLessons":"18 dars  Yuqori"},"sidebar":{"learningPlatform":"O'quv platformasi","level":"Daraja","streak":"Ketma-ketlik","learningMode":"O'qish rejimi","school":"Maktab","studyCentre":"O'quv markazi","chooseYourPath":"Yo'lingizni tanlang","selectHowToLearn":"Qanday o'qishni tanlang","schoolMode":"Maktab rejimi","structuredCurriculum":"Tuzilgan dastur","freeExploration":"Erkin o'rganish","menu":"Menyu","dashboard":"Bosh sahifa","overviewStats":"Umumiy ko'rinish va statistika","myCourses":"Mening kurslarim","browseLessons":"Darslarni ko'rish","assignments":"Topshiriqlar","practiceHomework":"Amaliyot va uy vazifasi","tests":"Testlar","assessmentAnalytics":"Baholash va tahlil","settings":"Sozlamalar","accountPreferences":"Hisob va sozlamalar","upgradeToPro":"Pro ga yangilash","unlockAllFeatures":"Barcha funksiyalarni ochish","logOut":"Chiqish","confirmLogout":"Hisobingizdan chiqmoqchimisiz?","premiumFeature":"Premium funksiya","unlockWithPlan":"Start yoki Pro rejasi bilan oching","unlimitedTests":"Cheksiz testlar","detailedAnalytics":"Batafsil tahlil","aiHomeworkHelp":"AI uy vazifasi yordami","maybeLater":"Keyinroq","upgradeNow":"Hozir yangilash"},"footer":{"slogan":"Ta'limni oddiy, interaktiv va hamma uchun qulay qilish.","navigation":"Navigatsiya","aboutUs":"Biz haqimizda","courses":"Kurslar","pricing":"Narxlar","aiAssistant":"AI Yordamchi","contact":"Aloqa","contactUs":"Biz bilan bog'laning","allRights":"2025 ACED. Barcha huquqlar himoyalangan.","privacyPolicy":"Maxfiylik siyosati","termsOfService":"Foydalanish shartlari","aiHelperTitle":"AI Yordamchi","aiHelperText":"Pastki o'ng burchakdagi chat tugmasini toping. Bizning AI yordam berishga tayyor!","gotIt":"Tushundim"},"tariffs":{"pricing":"Narxlar","simpleTitle":"Oddiy","pricingTitle":"narxlar","noHiddenFees":"Yashirin to'lovlar yo'q. Istalgan vaqtda bekor qilish.","monthly":"Oylik","quarterly":"Choraklik","biannual":"Yarim yillik","tryingOut":"Sinash uchun ajoyib","bestValue":"Eng yaxshi narx","maxSavings":"Maksimal tejash","month":"oy","months":"oy","forMonths":"{count} oy uchun","getStarted":"Boshlash","startLearning":"O'qishni boshlash","subscribe":"Obuna bo'lish","popular":"MASHHUR","save":"{percent}% tejash","allSubjects":"Barcha fanlar kiritilgan","unlimitedAI":"Cheksiz AI yordam","progressTracking":"Progress kuzatuvi","homeworkAssistance":"Uy vazifasi yordami","prioritySupport":"Ustuvor qo'llab-quvvatlash","securePayment":"Xavfsiz to'lov","cancelAnytime":"Istalgan vaqtda bekor qilish","instantAccess":"Tezkor kirish"},"mainPage":{"welcomeBack":"Qaytib kelganingiz bilan!","searchPlaceholder":"Mavzular yoki kurslarni qidirish...","allSubjects":"Barcha fanlar","recommended":"Siz uchun tavsiya etilgan","refresh":"Yangilash","noRecommendations":"Mos tavsiyalar yo'q.","myCourses":"Mening kurslarim","noCourses":"Sizda hali faol kurslar yo'q."},"dashboard":{"title":"Boshqaruv paneli","streak":"Ketma-ketlik","days":"kun","points":"Ballar","discoverLevel":"Darajangizni aniqlang","discoverLevelDesc":"Bilim darajangizni aniqlash va mos kurslarni ochish uchun tezkor test topshiring","takePlacementTest":"Daraja testini topshirish","yourLearningJourney":"O'qish sayohatingiz","addCourseToSeePathway":"Interaktiv dars yo'lini ko'rish uchun kurs qo'shing!","browseCourses":"Kurslarni ko'rish","yourLearningDNA":"O'qish DNKingiz","aiPoweredPersonalization":"AI yordamida shaxsiylashtirish","learningStyle":"O'qish uslubi","bestTime":"Eng yaxshi vaqt","cognitiveStrengths":"Kognitiv kuchli tomonlar","smartTips":"Siz uchun aqlli maslahatlar","learningPath":"O'qish yo'li","optimalTime":"Optimal vaqt","sessionLength":"Sessiya davomiyligi","difficulty":"Qiyinlik","unlockLearningDNA":"O'qish DNKingizni oching","completeLessonsToReveal":"Profilingizni ochish uchun darslarni yakunlang","completeAtLeast":"Shaxsiylashtirilgan O'qish DNK va AI tavsiyalarini ochish uchun kamida {count} ta darsni yakunlang.","lesson":"Dars","startLearning":"O'qishni boshlash","yourProgress":"Sizning progressingiz","level":"Daraja","toNextLevel":"keyingi darajagacha","dayStreak":"Kunlik ketma-ketlik","achievements":"Yutuqlar","stepsToReward":"Mukofotgacha qadamlar","recentAchievements":"So'nggi yutuqlar","viewAllAchievements":"Barcha {count} yutuqni ko'rish","totalCourses":"Jami kurslar","completed":"Yakunlangan","hoursStudied":"O'qilgan soatlar","weeklyProgress":"Haftalik progress","currentLessons":"Joriy darslar","activeCourses":"Faol kurslar","inProgress":"jarayonda","allLessons":"Barcha darslar","allCourses":"Barcha kurslar","loadingCourses":"Kurslar yuklanmoqda...","noActiveCourses":"Sizda hali faol kurslar yo'q","addCourse":"Kurs qo'shish","nextLesson":"Keyingi dars","complete":"yakunlangan","continue":"Davom etish","quickAccess":"Tezkor kirish","weeklyGoals":"Haftalik maqsadlar","recentActivity":"So'nggi faoliyat","noRecentActivity":"So'nggi faoliyat yo'q","learningStatistics":"O'qish statistikasi","averageTestScore":"O'rtacha test balli","myCurriculum":"Mening dasturim","courseCatalog":"Kurslar katalogi","viewLearningPath":"O'qish yo'lini ko'rish","browseAllCourses":"Barcha mavjud kurslarni ko'rish","detailedStatistics":"Batafsil o'qish statistikasi","practiceExercises":"Amaliy mashqlar va topshiriqlar","testsQuizzes":"Testlar va viktorinalar","testKnowledge":"Bilimingizni tekshiring","myGoals":"Mening maqsadlarim","trackProgress":"Progressni kuzatish","vocabulary":"Lug'at","learnedTerms":"O'rganilgan atamalar va tushunchalar","complete5Lessons":"5 ta darsni yakunlash","study2Hours":"2 soat o'qish","pass3Tests":"3 ta testni topshirish","min":"daqiqa","weeklyGoal":"Haftalik maqsad","week":"Hafta","lessonsCount":"{current} / {total} Dars","startLesson":"Darsni boshlash","goalCompleted":"Maqsad bajarildi!","grade":"Sinf","unlimitedAccess":"Cheksiz kirish","selectMode":"Rejimni tanlang","notAvailable":"N/A","encouragement":{"start":" Bilim urug'larini eking!","growing":" Daraxtingiz o'sishni boshladi!","halfway":" Shunday davom eting! Yarmi ortda qoldi!","apples":" Ajoyib natija! Olmalar paydo bo'lmoqda!","almost":" Oz qoldi! Daraxt gullab-yashnamoqda!","done":" Aql bovar qilmas! Daraxtingiz mevalarga to'la!"}},"catalogue":{"title":"Katalog","courses":"kurslar","inPlan":"rejada","findCourse":"Kurs topish...","allSubjects":"Barcha fanlar","allLevels":"Barcha darajalar","allTypes":"Barcha turlar","free":"Bepul","premium":"Premium","clear":"Tozalash","shuffle":"Aralashtirish","loadingCourses":"Kurslar yuklanmoqda...","noCoursesFound":"Kurslar topilmadi","tryAdjustingFilters":"Filtrlarni o'zgartirib ko'ring","lessons":"darslar","progress":"Progress","addToStudyPlan":"O'qish rejasiga qo'shilsinmi?","cancel":"Bekor qilish","add":"Qo'shish","added":"Qo'shildi!","great":"Ajoyib","start":"Boshlash","continueBtn":"Davom etish","review":"Takrorlash","lvl":"Drj","beginner":"Boshlang'ich","elementary":"Elementar","intermediate":"O'rta","upperIntermediate":"O'rtadan yuqori","advanced":"Yuqori","proficient":"Professional"},"chatBot":{"title":"AI Chat","loginPrompt":"Suhbatni boshlash uchun tizimga kiring.","logIn":"Kirish","placeholder":"Xabar kiriting...","send":"Yuborish","endConversation":"Suhbatni yakunlash"},"topics":{"title":"O'rganish mavzulari","loading":"Mavzular yuklanmoqda...","loadError":"Mavzularni yuklashda xato:","added":"Mavzu ro'yxatga qo'shildi!","addError":"Mavzuni qo'shishda xato:"},"topicCard":{"add":"Qo'shish","start":"Boshlash","subjectMissing":"Fan ko'rsatilmagan."},"aboutUs":{"title":"ACED haqida","desc1":"Biz bilimni dunyodagi har bir inson uchun qulay qiladigan yangi avlod ta'lim texnologiyalarini yaratamiz.","desc2":"Maqsadimiz to'siqlarni yo'q qilish va ta'limni moslashuvchan, shaxsiylashtirilgan va ilhomlantiruvchi qilish.","desc3":"ACED bilan siz faqat o'rganib qolmaysiz. Siz erkinroq, kuchliroq bo'lib, o'z hayotingizni o'zgartirishga tayyor bo'lasiz.","chartTitle":"ACED hayotimni qanday o'zgartirdi","happiness":"Baxt darajasi","confidence":"O'ziga ishonch","motivation":"O'qishga motivatsiya","freedom":"Erkinlik hissi","changeWorld":"Dunyoni o'zgartirishga tayyorlik"},"lesson":{"backToTests":"Testlarga qaytish","continueLearning":"O'qishni davom ettirish","lessonComplete":"Dars yakunlandi!","greatJob":"Ajoyib! Siz bu darsni tugatdingiz.","nextLesson":"Keyingi dars","tryAgain":"Qaytadan urinish","correctAnswer":"To'g'ri!","wrongAnswer":"Mutlaqo to'g'ri emas. Qaytadan urining!","hint":"Maslahat","showAnswer":"Javobni ko'rsatish","submit":"Yuborish","skip":"O'tkazib yuborish","progress":"Progress","aiHelp":"AI Yordam","askQuestion":"Savol bering...","vocabulary":"Lug'at"},"games":{"score":"Ball","time":"Vaqt","lives":"Hayotlar","level":"Daraja","gameOver":"O'yin tugadi","youWin":"Siz yutdingiz!","playAgain":"Qayta o'ynash","pause":"Pauza","resume":"Davom etish","quit":"Chiqish","highScore":"Rekord","newHighScore":"Yangi rekord!","tapToStart":"Boshlash uchun bosing","getReady":"Tayyorlaning!","go":"Oldinga!"},"errors":{"loginError":"Kirish xatosi","userNotFound":"Foydalanuvchi topilmadi","invalidPassword":"Noto'g'ri parol yoki email","invalidEmail":"Noto'g'ri email formati","tooManyAttempts":"Juda ko'p urinish. Keyinroq qaytadan urinib ko'ring","accountDisabled":"Hisob o'chirilgan","networkError":"Internet aloqasi muammosi","registrationError":"Ro'yxatdan o'tish xatosi","emailInUse":"Email allaqachon ishlatilmoqda","weakPassword":"Parol juda zaif","passwordsMismatch":"Parollar mos kelmaydi","fillAllFields":"Iltimos, barcha majburiy maydonlarni to'ldiring","googleSignInError":"Google orqali kirish xatosi","popupClosed":"Kirish oynasi yopildi","popupBlocked":"Ochiluvchi oyna bloklandi","passwordMinLength":"Parol kamida 6 ta belgidan iborat bo'lishi kerak"},"success":{"signedIn":"Muvaffaqiyatli kirish!","signedInGoogle":"Google orqali muvaffaqiyatli kirish!","registrationSuccess":"Ro'yxatdan o'tish muvaffaqiyatli!","profileUpdated":"Profil muvaffaqiyatli yangilandi!","passwordChanged":"Parol muvaffaqiyatli o'zgartirildi!","promocodeApplied":"Promokod qo'llandi!"},"platformMode":{"levelTest":"Daraja testi","testYourLevel":"Shaxsiy tavsiyalar uchun darajangizni tekshiring","startTest":"Testni boshlash","skipTest":"Testni o'tkazib yuborish","yourLevel":"Sizning darajangiz","beginner":"Boshlang'ich","intermediate":"O'rta","advanced":"Yuqori","expert":"Ekspert"},"diary":{"saving":"Saqlanmoqda...","saved":"Saqlandi!","finishDay":"Kunni yakunlash","todaysNotes":"Bugungi yozuvlar","addNote":"Yozuv qo'shing...","noNotes":"Hali yozuvlar yo'q"},"homework":{"title":"Uy vazifasi yordami","uploadPhoto":"Rasm yuklash","typeQuestion":"Savolingizni yozing","getHelp":"Yordam olish","solution":"Yechim","explanation":"Tushuntirish","similarProblems":"O'xshash masalalar","back":"Orqaga","loading":"Topshiriq yuklanmoqda...","assignmentType":"Topshiriq turi","standalone":"Mustaqil","lesson":"Dars","totalQuestions":"Jami savollar","answered":"Javob berildi","completionProgress":"Bajarilish darajasi","instructions":"Ko'rsatmalar","points":"ball","point":"ball","answerPlaceholder":"{number}-savolga javobingizni kiriting","answerAdded":"Javob qo'shildi","awaitingAnswer":"Javob kutilmoqda","saveDraft":"Qoralamani saqlash","saving":"Saqlanmoqda...","completeAssignment":"Topshiriqni yakunlash","submitting":"Yuborilmoqda...","allAnswered":"Barcha savollarga javob berildi! Topshiriqni yakunlashingiz mumkin.","answerAllQuestions":"Topshiriqni yakunlash uchun barcha savollarga javob bering.","tryAgain":"Qayta urinib ko'ring","backToList":"Ro'yxatga qaytish","noQuestions":"Bu topshiriqda savollar yo'q","contactTeacher":"Ko'proq ma'lumot uchun o'qituvchingiz bilan bog'laning","assignmentIdNotFound":"Topshiriq ID topilmadi","checkLink":"Havolani tekshiring va qayta urining","userNotAuthenticated":"Foydalanuvchi tizimga kirmagan","homeworkNotFound":"Uy vazifasi topilmadi","lessonNotFound":"Dars yoki topshiriq topilmadi","serverError":"Server xatosi","errorLoading":"Topshiriqni yuklashda xato","answersSaved":"Javoblar saqlandi!","failedToSave":"Javoblarni saqlab bo'lmadi","homeworkCompleted":"Uy vazifasi bajarildi!","yourScore":"Sizning natijangiz","stars":"Yulduzlar","correctAnswers":"To'g'ri javoblar","errorSubmitting":"Javoblarni yuborishda xato","pleaseAnswerAll":"Barcha savollarga javob bering. Qoldi: {count}"},"homeworkList":{"title":"Uy vazifalari","assignments":"topshiriq","done":"bajarildi","inProgress":"jarayonda","searchPlaceholder":"Topshiriqlarni qidirish...","allSubjects":"Barcha fanlar","allStatus":"Barcha holatlar","notStarted":"Boshlanmagan","statusInProgress":"Jarayonda","completed":"Bajarildi","clear":"Tozalash","loading":"Yuklanmoqda...","somethingWentWrong":"Nimadir noto'g'ri ketdi","tryAgain":"Qayta urining","noHomeworkYet":"Hali topshiriqlar yo'q","noMatchesFound":"Hech narsa topilmadi","startCourseToGet":"Topshiriqlar olish uchun kursni boshlang","tryDifferentFilters":"Boshqa filtrlarni sinab ko'ring","dueSoon":"TEZDA","exercises":"mashq","progress":"Progress","view":"Ko'rish","continue":"Davom etish","start":"Boshlash"},"vocabulary":{"title":"Lug'at","loading":"Lug'at yuklanmoqda...","emptyTitle":"Hali so'zlar yo'q","emptyText":"Lug'atingizda hali so'zlar yo'q","emptySubtext":"Yangi so'zlar qo'shish uchun darslarni o'rganishni boshlang","learned":"% o'rganildi","words":"so'z","topics":"mavzu","searchPlaceholder":"So'zlarni qidirish...","allWords":"Barcha so'zlar","active":"Faol","progress":"Progress","back":"Orqaga","levels":"daraja","level":"Daraja"},"tests":{"title":"Testlar","available":"mavjud","subjects":"fan","levels":"daraja","searchPlaceholder":"Testlarni qidirish...","allSubjects":"Barcha fanlar","allLevels":"Barcha darajalar","level":"Daraja","clear":"Tozalash","loading":"Yuklanmoqda...","noTestsFound":"Testlar topilmadi","tryAdjusting":"Filtrlarni o'zgartirib ko'ring","questions":"savol","start":"Boshlash","questionOf":"{total} dan {current}-savol","next":"Keyingi","finish":"Yakunlash","greatJob":"Ajoyib ish!","goodEffort":"Yaxshi harakat!","keepPracticing":"Mashq qilishni davom eting!","youScored":"Sizning natijangiz: {score}%","correct":"To'g'ri","total":"Jami","backToTests":"Testlarga qaytish","typeAnswer":"Javobingizni yozing..."},"checkout":{"title":"To'lovni yakunlash","subtitle":"ACED ga obuna bo'ling va premium imkoniyatlarni oching","paymentDetails":"To'lov tafsilotlari","account":"Hisob","email":"Email","currentPlan":"Joriy reja","upgradingTo":"O'tish","notSpecified":"Ko'rsatilmagan","totalAmount":"Jami summa","paymentMethod":"To'lov usuli","bankCard":"Bank kartasi","bankCardDesc":"Visa, Mastercard, UzCard, Humo","payme":"Payme","paymeDesc":"Payme orqali to'lash","click":"Click","clickDesc":"Click orqali to'lash","comingSoon":"Tez orada","selectDuration":"Muddatni tanlang","month":"Oy","months":"Oy","popular":"MASHHUR","save":"{percent}% tejash","havePromoCode":"Promokodingiz bormi?","enterPromoCode":"Promokodni kiriting","apply":"Qo'llash","promoApplied":"Promokod qo'llandi!","invalidPromo":"Noto'g'ri promokod","validatingPromo":"Promokod tekshirilmoqda...","paymentPageLanguage":"To'lov sahifasi tili","continueToPayment":"To'lovga o'tish","processing":"Jarayonda...","securePayment":"Xavfsiz to'lov  Shifrlangan va himoyalangan","verifyPayment":"To'lovni tasdiqlash","enterCode":"Telefoningizga yuborilgan 6 raqamli kodni kiriting","cancel":"Bekor qilish","confirm":"Tasdiqlash","verifying":"Tekshirilmoqda...","paymentSuccessful":"To'lov muvaffaqiyatli!","subscriptionActivated":"Sizning {plan} obunangiz faollashtirildi","plan":"Reja","amount":"Summa","transactionId":"Tranzaksiya ID","viewSubscription":"Obunani ko'rish","startLearning":"O'qishni boshlash","paymentFailed":"To'lov xatosi","couldNotProcess":"To'lovni amalga oshirib bo'lmadi. Qayta urinib ko'ring.","tryAgain":"Qayta urinib ko'ring","changeMethod":"Usulni o'zgartirish","paymentCancelled":"To'lov bekor qilindi","cancelledMessage":"Siz to'lovni bekor qildingiz. Obunangiz o'zgarmadi.","returnToPayment":"To'lovga qaytish","backToHome":"Bosh sahifaga","unableToProcess":"To'lovni amalga oshirib bo'lmadi","goBack":"Orqaga","userIdRequired":"Foydalanuvchi ID ko'rsatilmagan","selectPlan":"Iltimos, reja tanlang","invalidAmount":"Noto'g'ri summa","selectPaymentMethod":"Iltimos, mavjud to'lov usulini tanlang","completeFields":"Barcha majburiy maydonlarni to'ldiring","free":"Bepul"},"topicFinished":{"congratulations":"Tabriklaymiz!","completed":"Siz bu mavzudagi barcha darslarni tugatdingiz!","returnToDashboard":"Bosh sahifaga qaytish","goldMedal":"Oltin medal! Ajoyib!","silverMedal":"Kumush medal! Zo'r ish!","bronzeMedal":"Bronza medal! Barakalla!","keepLearning":"O'qishni davom ettiring va medal oling!"},"payments":{"successTitle":"To'lov muvaffaqiyatli!","subscriptionActivated":"Sizning {plan} obunangiz faollashtirildi!","enjoyLearning":"Cheklovsiz o'qishdan bahramand bo'ling.","transactionDetails":"Tranzaksiya tafsilotlari","amount":"Summa","date":"Sana","whatNowAvailable":"Endi nima mavjud:","unlimitedLessons":"Barcha darslarga cheksiz kirish","aiAssistant":"O'qish uchun AI yordamchi","progressTracking":"Progress va tahlil kuzatuvi","allSubjects":"Barcha fanlarga kirish","startLearning":"O'qishni boshlash","questions":"Savollar bormi? Biz bilan bog'laning:","failedTitle":"To'lov xatosi","failedMessage":"Afsuski, to'lovni amalga oshirib bo'lmadi.","tryAgain":"Qaytadan urinish","contactSupport":"Qo'llab-quvvatlash bilan bog'lanish"},"profilePage":{"dashboard":"Boshqaruv paneli","myCourses":"Mening kurslarim","assignments":"Topshiriqlar","testsAnalytics":"Testlar va tahlil","settings":"Sozlamalar"},"loadingStates":{"lesson":"Dars yuklanmoqda...","courses":"Kurslar yuklanmoqda...","courseInfo":"Kurs ma'lumotlari yuklanmoqda...","course":"Kurs ma'lumotlari yuklanmoqda...","errorLoading":"Yuklash xatosi","processing":"Jarayonda...","update":"Yangilash"},"settings":{"accountSettings":"Hisob sozlamalari","manageProfile":"Profil va obunani boshqarish","plan":"Reja","messages":"Xabarlar","images":"Rasmlar","daysLeft":"Kunlar qoldi","subscriptionPlans":"Obuna rejalari","chooseBestPlan":"Siz uchun eng yaxshi rejani tanlang","oneMonth":"1 Oy","threeMonths":"3 Oy","sixMonths":"6 Oy","uzs":"so'm","unlimitedMessages":"Cheksiz xabarlar","unlimitedImages":"Cheksiz rasmlar","aiTutorAccess":"AI o'qituvchi kirish","aiTutorAnalytics":"AI o'qituvchi + Tahlil","unlimitedEverything":"Hammaga cheksiz kirish","prioritySupportPlan":"Ustuvor qo'llab-quvvatlash","customCourses":"Shaxsiy kurslar","bestDeal":"Eng yaxshi taklif","getPro":"Pro olish","enterPromocode":"Promokodni kiriting","applyCode":"Kodni qo'llash","applying":"Qo'llanmoqda...","invalidPromocode":"Noto'g'ri promokod","promocodeApplied":"Promokod qo'llanildi!","personalInformation":"Shaxsiy ma'lumotlar","personalInfo":"Shaxsiy ma'lumotlar","updatePersonal":"Shaxsiy ma'lumotlaringizni yangilang","notSpecified":"Ko'rsatilmagan","security":"Xavfsizlik","changePassword":"Parolni o'zgartirish","currentPassword":"Joriy parol","newPassword":"Yangi parol","confirmPassword":"Parolni tasdiqlang","confirmNewPassword":"Parolni tasdiqlang","forgotPassword":"Parolni unutdingizmi?","updating":"Yangilanmoqda...","dangerZone":"Xavfli zona","irreversibleActions":"Qaytarib bo'lmaydigan harakatlar","signOut":"Chiqish","signOutDesc":"Hisobdan chiqish","deleteAccount":"Hisobni o'chirish","deleteAccountDesc":"Hisobni butunlay o'chirish","deleteModalTitle":"Hisobni o'chirish","deleteModalText":"Hisobingizni o'chirishni xohlaysizmi? Bu amalni bekor qilib bo'lmaydi.","deleteModalWarning":"Barcha ma'lumotlaringiz, yutuqlaringiz va obunangiz butunlay o'chiriladi.","deleteConfirmTitle":"Hisobni o'chirish","deleteConfirmText":"Hisobingizni o'chirmoqchimisiz? Bu harakatni bekor qilib bo'lmaydi.","deleteWarning":"Barcha ma'lumotlaringiz, progressingiz va obunangiz butunlay o'chiriladi.","deleteForever":"Butunlay o'chirish","cancel":"Bekor qilish","save":"Saqlash","update":"Yangilash"},"analytics":{"pageTitle":"O'quv tahlili","pageSubtitle":"Yutuqlaringiz va rivojlanishingizni kuzatib boring","title":"O'qish tahlillari","downloadPdf":"PDF yuklab olish","downloadPDF":"PDF sifatida yuklab olish","configureExport":"PDF eksportini sozlash","choosePeriod":"Davrni tanlang:","lastWeek":"O'tgan hafta","twoWeeks":"2 hafta","threeWeeks":"3 hafta","oneMonth":"1 oy","threeMonths":"3 oy","oneYear":"1 yil","studyDays":"O'qish kunlari","completedSubjects":"Tugatilgan fanlar","weeklyLessons":"Haftalik darslar","monthlyLessons":"Oylik darslar","streakDays":"O'qish ketma-ketligi","activeDay":"Faol kun","mostActiveDay":"Eng faol kun","totalLessons":"Jami darslar","download":"Yuklab olish","currentPace":"Bu sizning joriy sur'atingiz","consistency":"Barqarorlik muvaffaqiyat kaliti","onARoll":"Juda yaxshi ketayapsiz","startAgain":"Qayta boshlash vaqti keldi","keepItUp":"Bu kunda davom eting","overallProgress":"Umumiy progress","loading":"Tahlillar yuklanmoqda...","error":"Ma'lumotlarni yuklashda xatolik","tryAgain":"Qayta urinib ko'ring","learningDna":"Sizning o'quv DNK","aiPersonalization":"AI-shaxsiylashtirish","learningStyle":"O'rganish uslubi","chronotype":"Xronotip","learningPath":"O'rganish yo'li","sessionLength":"Sessiya davomiyligi","cognitiveProfile":"Kognitiv profil","personalInsights":"Shaxsiy tushunchalar","gamification":"O'yinlashtirish","level":"Daraja","points":"ball","streak":"Ketma-ketlik","achievements":"Yutuqlar","recentActivity":"So'nggi faollik","emptyState":"Hozircha tahlil ma'lumotlari yo'q","startLearning":"O'qishni boshlash","exportSettings":"PDF eksport sozlamalari","period":"Davr","selectMetrics":"Metriklarni tanlang","completedLessons":"Tugatilgan darslar","completedTopics":"Tugatilgan mavzular","totalPoints":"Jami ballar","avgPointsPerDay":"O'rtacha ball/kun","daysInRow":"kun ketma-ket","recentAchievements":"So'nggi yutuqlar","untilReward":"Mukofotgacha","authRequired":"Avtorizatsiya talab qilinadi","authError":"Avtorizatsiya xatosi","notFound":"Ma'lumot topilmadi. Darslarni o'rganishni boshlang!","serverError":"Server xatosi","loadError":"Ma'lumotlarni yuklashda xatolik","visual":"Vizual","auditory":"Eshitish","kinesthetic":"Kinestetik","readingWriting":"O'qish/Yozish","balanced":"Muvozanatli","lark":"To'rg'ay","owl":"Boyqush","thirdBird":"Kabutar","variable":"O'zgaruvchan","flexible":"Moslashuvchan","storyteller":"Hikoyachi","builder":"Quruvchi","scientist":"Olim","artist":"Rassom","gamer":"O'yinchi","social":"Ijtimoiy","debater":"Bahschi","universal":"Universal","minutes":"daqiqa","processingSpeed":"Qayta ishlash tezligi","workingMemory":"Ishchi xotira","visualSpatial":"Vizual-fazoviy","verbalLinguistic":"Verbal-lingvistik","logicalMathematical":"Mantiqiy-matematik","Processing":"Qayta ishlash tezligi","Memory":"Ishchi xotira","Visual":"Vizual-fazoviy","Verbal":"Verbal-lingvistik","Logic":"Mantiqiy-matematik","lessonWithoutName":"Nomsiz dars","lesson":"Dars","today":"Bugun","yesterday":"Kecha","generated":"Yaratildi","studyAnytime":"Istalgan vaqtda o'rganing","betterAt":"{hours} da yaxshiroq","days":"kun","yearShort":"y","monthShort":"oy","dayShort":"k","passedLessons":"O'tilgan darslar","studiedSections":"O'rganilgan bo'limlar","activityPoints":"Faollik ballari","avgEarnings":"O'rtacha daromad"},"acedSection":{"exploreCourses":"Kurslarni ko'rish","startLearning":"O'qishni boshlang","today":"bugun","chooseCourse":"Kurs tanlang va o'qish sayohatingizni boshlang","lessons":"dars","start":"Boshlash","noCoursesFound":"Kurslar topilmadi","loadingContent":"Siz uchun kontent yuklanmoqda","tryAgain":"Qayta urinish","unlockCourse":"Kursni ochish","createFreeAccount":"Premium kontentga kirish uchun bepul hisob yarating","createAccount":"Bepul hisob yaratish","maybeLater":"Keyinroq","lvl":"Dar.","errorLoading":"Kurslarni yuklashda xatolik"},"homepage":{"whyChooseUs":"Nega biz","learningMadeSimple":"O'qish oddiy","learningMadeSimpleDesc":"Biz samarali, qiziqarli va ishlatish oson ta'lim platformasini yaratdik","interactiveLearning":"Interaktiv o'qish","interactiveLearningDesc":"Amaliy mashqlar tezkor qayta aloqa bilan. Zerikarli ma'ruzalar yo'q.","aiPoweredHelp":"AI yordamchi","aiPoweredHelpDesc":"Bizning AI-o'qituvchimiz tushunchalarni tushuntirish uchun 24/7 mavjud.","trackProgress":"Progressni kuzatish","trackProgressDesc":"Tahlil orqali o'sishingizni ko'ring. Nishonlar oling.","richContent":"Boy kontent","richContentDesc":"100+ kurs matematika, fan, tillar bo'yicha. Har hafta yangi kontent.","learnAnytime":"Istalgan vaqtda o'rganing","learnAnytimeDesc":"Har qanday qurilmadan kirish. Progress avtomatik sinxronlanadi.","actuallyFun":"Haqiqatan qiziqarli","actuallyFunDesc":"Charchatmaydigan o'qish. Motivatsiyani saqlang.","activeStudents":"Faol o'quvchilar","courses":"Kurslar","completionRate":"Yakunlash darajasi","aiSupport":"AI qo'llab-quvvatlash"},"tariffSection":{"pricing":"Narxlar","simplePricing":"Oddiy narxlar","noHiddenFees":"Yashirin to'lovlar yo'q. Istalgan vaqtda bekor qilish.","monthly":"Oylik","quarterly":"Chorak","biannual":"Yarim yillik","greatForTrying":"Sinab ko'rish uchun ajoyib","bestValue":"Eng yaxshi taklif","maximumSavings":"Maksimal tejash","perMonth":"/oy","forMonths":"{months} oy uchun","getStarted":"Boshlash","startLearning":"O'qishni boshlash","subscribe":"Obuna bo'lish","popular":"MASHHUR","save":"{percent}% tejash","securePayment":"Xavfsiz to'lov","cancelAnytime":"Istalgan vaqtda bekor qilish","instantAccess":"Tezkor kirish","allSubjectsIncluded":"Barcha fanlar kiritilgan","unlimitedAiHelp":"Cheksiz AI yordam","progressTracking":"Progress kuzatuvi","homeworkAssistance":"Uy vazifasi yordami","prioritySupport":"Ustuvor qo'llab-quvvatlash"},"timeOfDay":{"morning":"Ertalab","afternoon":"Kunduzi","evening":"Kechqurun"},"timeAgo":{"recently":"yaqinda","justNow":"hozirgina","minutesAgo":"{count} daqiqa oldin","hoursAgo":"{count} soat oldin","daysAgo":"{count} kun oldin","overWeekAgo":"bir haftadan ko'proq oldin"},"course":{"untitled":"Nomsiz kurs","noLessons":"Darslar yo'q","allCompleted":"Hammasi tugallandi"},"time":{"hours":"s","minutes":"d"},"activity":{"testResult":"Test natijasi","completedLesson":"Dars tugallandi"},"payment":{"premiumAccess":"Premium kontentga kirish","chooseAccessMethod":"Kirish usulini tanlang","selectPlan":"Tarifni tanlang:","recommended":"Tavsiya etiladi","basicCourses":"Asosiy kurslar","homework":"Uy vazifalari","basicTests":"Asosiy testlar","allStartCourses":"Barcha Start kurslari","advancedCourses":"Ilg'or kurslar","personalAnalytics":"Shaxsiy tahlil","prioritySupport":"Ustuvor yordam","orEnterPromo":"Yoki promokod kiriting:","enterPromoCode":"Promokodni kiriting","pay":"To'lash","processing":"Qayta ishlanmoqda...","selectPlanFirst":"Iltimos, tarifni tanlang","enterPromoFirst":"Promokodni kiriting","promoError":"Promokodni qo'llashda xato yuz berdi","paymentError":"To'lovga o'tishda xato","sum":"so'm"},"levelPathway":{"level":"Daraja","xp":"XP","dayStreak":"kun ketma-ketlik","continue":"Davom etish","lessonNumber":"Dars {number}"},"modeChoice":{"chooseYourPath":"O'qish yo'lingizni tanlang","selectHowToLearn":"ACED da qanday o'qishni xohlaysiz","acedSchool":"ACED Maktab","structuredCurriculum":"Darajali tuzilgan dastur","acedStudyCentre":"ACED O'quv markazi","freeExploration":"Erkin o'rganish, istalgan narsani o'rganing","settingUp":"Sozlanmoqda...","continue":"Davom etish"}}`),Mx={en:Nx,ru:Ox,uz:Dx},$x=Object.freeze(Object.defineProperty({__proto__:null,default:Mx,en:Nx,ru:Ox,uz:Dx},Symbol.toStringTag,{value:"Module"}));class l2e{constructor(){this.events={},this.debugMode=!1,this.subscriptionListeners=new Set,this.errorHandlers=new Set,this.statusChangeListeners=new Set}emit(e,s){this.debugMode,this.events[e]&&this.events[e].forEach(r=>{try{r(s)}catch(n){this.handleEventError(e,n,s)}}),(e.includes("status")||e.includes("Status")||e.includes("subscription"))&&(this.notifyStatusChangeListeners(e,s),this.notifySubscriptionListeners(e,s)),(e.includes("subscription")||e.includes("promocode")||e.includes("payment"))&&this.notifySubscriptionListeners(e,s)}on(e,s){this.events[e]||(this.events[e]=[]),this.events[e].push(s)}off(e,s){this.events[e]&&(this.events[e]=this.events[e].filter(r=>r!==s))}once(e,s){const r=n=>{s(n),this.off(e,r)};this.on(e,r)}onStatusChange(e){return this.statusChangeListeners.add(e),()=>this.statusChangeListeners.delete(e)}notifyStatusChangeListeners(e,s){this.statusChangeListeners.forEach(r=>{try{r(e,s)}catch{}})}onSubscriptionChange(e){return this.subscriptionListeners.add(e),()=>this.subscriptionListeners.delete(e)}notifySubscriptionListeners(e,s){this.subscriptionListeners.forEach(r=>{try{r(e,s)}catch{}})}onError(e){return this.errorHandlers.add(e),()=>this.errorHandlers.delete(e)}handleEventError(e,s,r){this.errorHandlers.forEach(n=>{try{n(e,s,r)}catch{}})}clear(){this.events={},this.subscriptionListeners.clear(),this.errorHandlers.clear(),this.statusChangeListeners.clear()}}const Ff=new l2e;window.triggerGlobalEvent=(t,e={})=>{var s;if(!(typeof window>"u"))try{const{newStatus:r,plan:n,userStatus:i,subscriptionPlan:o,oldStatus:l}=e,c=g=>g&&g!==""&&g!=="undefined"&&g!==void 0&&g!==null&&["free","start","pro","premium"].includes(g);let u=null;const h=[r,n,i,o];for(const g of h)if(c(g)){u=g;break}if(!u){const g=localStorage.getItem("userStatus");c(g)?u=g:u="free"}const f={...e,eventName:t,source:e.source||"global-trigger",timestamp:e.timestamp||Date.now(),version:"2.0",newStatus:u,plan:u,userStatus:u,subscriptionPlan:u,oldStatus:l||"free"},m=new CustomEvent(t,{detail:f,bubbles:!0,cancelable:!0});if(window.dispatchEvent(m),(s=window.eventBus)!=null&&s.emit&&window.eventBus.emit(t,f),t.includes("Status")||t.includes("Subscription"))try{const g=new CustomEvent("userSubscriptionChanged",{detail:f,bubbles:!0});window.dispatchEvent(g),localStorage.setItem("lastGlobalEvent",JSON.stringify({eventName:t,data:f,timestamp:Date.now()}))}catch{}}catch{}};function c2e(t){setInterval(()=>{try{const e=t.getters["user/userStatus"],s=localStorage.getItem("userStatus");e&&s&&e!==s&&(localStorage.setItem("userStatus",e),window.triggerGlobalEvent("userStatusChanged",{oldStatus:s,newStatus:e,source:"periodic-sync",timestamp:Date.now()}))}catch{}},3e4)}function u2e(){try{const t=localStorage.getItem("subscriptionData");if(t){const e=JSON.parse(t),s=new Date,r=new Date(e.expiryDate),n=s<r;if(n&&e.plan!=="free")return localStorage.setItem("userStatus",e.plan),localStorage.setItem("userPlan",e.plan),localStorage.setItem("subscriptionPlan",e.plan),localStorage.setItem("preservedStatus",e.plan),localStorage.setItem("validSubscriptionDetected","true"),localStorage.setItem("preserveStatusDuringAuth",e.plan),e.plan;n||(localStorage.removeItem("subscriptionData"),localStorage.removeItem("validSubscriptionDetected"),localStorage.removeItem("preserveStatusDuringAuth"))}return"free"}catch{return"free"}}function d2e(){let t=!0;const e=()=>{if(t){try{const s=localStorage.getItem("subscriptionData"),r=localStorage.getItem("userStatus");if(s){const n=JSON.parse(s),i=new Date,o=new Date(n.expiryDate);i<o&&n.plan!=="free"&&r!==n.plan&&(localStorage.setItem("userStatus",n.plan),localStorage.setItem("userPlan",n.plan),localStorage.setItem("subscriptionPlan",n.plan),window.triggerGlobalEvent&&window.triggerGlobalEvent("userStatusChanged",{oldStatus:r,newStatus:n.plan,source:"auth-monitoring-restore",timestamp:Date.now()}))}}catch{}setTimeout(e,100)}};e(),setTimeout(()=>{t=!1},1e4)}async function Xv(t,e="manual"){if(!t||t==="free")return;const s=new Date,r=new Date(s.getTime()+30*24*60*60*1e3),n=Xc();let i;n&&n.plan===t&&n.expiryDate&&new Date(n.expiryDate)>s?i={...n,lastUpdated:s.toISOString(),source:e,serverConfirmed:!0}:i=zw(t,s,r,e);try{localStorage.setItem("subscriptionData",JSON.stringify(i)),localStorage.setItem("subscriptionPlan",t),localStorage.setItem("subscriptionExpiry",i.expiryDate),localStorage.setItem("subscriptionActivated",i.activatedAt),localStorage.setItem("userStatus",t),localStorage.setItem("userPlan",t),localStorage.setItem("plan",t),localStorage.setItem("subscriptionStatus","active"),localStorage.setItem("serverConfirmedSubscription","true")}catch{}return i}function zw(t,e,s,r){return{plan:t,activatedAt:e.toISOString(),expiryDate:s.toISOString(),lastUpdated:e.toISOString(),source:r,status:"active",serverConfirmed:!0,duration:30}}function Xc(){try{const t=localStorage.getItem("subscriptionData");if(t){const n=JSON.parse(t);if(n&&n.plan&&n.expiryDate)return n;localStorage.removeItem("subscriptionData")}const e=localStorage.getItem("subscriptionPlan")||localStorage.getItem("userStatus"),s=localStorage.getItem("subscriptionExpiry"),r=localStorage.getItem("subscriptionActivated");if(e&&e!=="free"&&s){const n={plan:e,expiryDate:s,activatedAt:r||new Date().toISOString(),status:"active",source:"fallback-reconstruction"};return localStorage.setItem("subscriptionData",JSON.stringify(n)),n}}catch{localStorage.removeItem("subscriptionData")}return null}function Jv(){const t=Xc();if(!t||!t.expiryDate)return!1;const e=new Date,s=new Date(t.expiryDate);return e<s}function Ux(t){localStorage.setItem("userStatus","free"),localStorage.setItem("userPlan","free"),localStorage.setItem("subscriptionPlan","free"),localStorage.setItem("plan","free"),localStorage.removeItem("subscriptionData"),localStorage.removeItem("subscriptionExpiry"),localStorage.removeItem("subscriptionActivated"),localStorage.removeItem("serverConfirmedSubscription");try{mt(async()=>{const{default:e}=await Promise.resolve().then(()=>Oi);return{default:e}},void 0).then(({default:e})=>{e.commit("user/SET_USER_STATUS","free"),e.commit("user/FORCE_UPDATE")}).catch(e=>{})}catch{}window.triggerGlobalEvent("userStatusChanged",{oldStatus:t.plan,newStatus:"free",source:"subscription-expired",timestamp:Date.now()}),window.triggerGlobalEvent("subscriptionExpired",{expiredPlan:t.plan,expiryDate:t.expiryDate,timestamp:Date.now()}),window.eventBus&&window.eventBus.emit("subscriptionExpired",{plan:t.plan,message:`Your ${t.plan==="pro"?"Pro":"Start"} subscription has expired. Please update your plan to continue using premium features.`,timestamp:Date.now()})}function h2e(){window.subscriptionCheckInterval&&clearInterval(window.subscriptionCheckInterval);const t=()=>{const e=Xc();if(!(!e||e.plan==="free"))if(!Jv())Ux(e);else{const s=new Date,r=new Date(e.expiryDate),n=Math.ceil((r-s)/(1e3*60*60*24));n<=3&&n>0&&window.eventBus&&window.eventBus.emit("subscriptionExpiringSoon",{plan:e.plan,daysRemaining:n,expiryDate:e.expiryDate,message:`Your ${e.plan} subscription will expire in ${n} ${n===1?"day":"days"}`,timestamp:Date.now()})}};window.subscriptionCheckInterval=setInterval(t,60*60*1e3),document.addEventListener("visibilitychange",()=>{document.hidden||t()}),setTimeout(t,1e4)}function f2e(t,e){h2e();const s=Xc();s&&s.plan!=="free"&&(Jv()?(localStorage.setItem("userStatus",s.plan),localStorage.setItem("userPlan",s.plan),localStorage.setItem("subscriptionPlan",s.plan)):Ux(s)),window.applyPromocodeGlobally=async(r,n)=>{try{const i=pe.currentUser;if(!i)throw new Error("User not authenticated");const o=i.uid,l=await i.getIdToken(),h=await(await fetch("undefined/api/payments/promo-code",{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({userId:o,promoCode:r.toUpperCase(),plan:n})})).json();if(h!=null&&h.success){const f=await Xv(n,"promocode");localStorage.setItem("userStatus",n),localStorage.setItem("userPlan",n),localStorage.setItem("subscriptionPlan",n),localStorage.setItem("plan",n),localStorage.setItem("promocodeApplied",r.toUpperCase());try{const v=localStorage.getItem("user");if(v){const I=JSON.parse(v);I.subscriptionPlan=n,I.userStatus=n,I.plan=n,I.promocodeApplied=r.toUpperCase(),I.lastStatusUpdate=new Date().toISOString(),localStorage.setItem("user",JSON.stringify(I))}}catch{}if(window.store||t){const v=window.store||t;v.commit("user/SET_USER_STATUS",n),v.commit("user/UPDATE_SUBSCRIPTION",f),v.commit("user/FORCE_UPDATE")}const m={promocode:r.toUpperCase(),oldStatus:"free",newStatus:n,plan:n,userStatus:n,subscriptionPlan:n,expiryDate:f.expiryDate,activatedAt:f.activatedAt,source:"promocode",timestamp:Date.now(),message:`Promocode applied! Plan ${n.toUpperCase()} active until ${new Date(f.expiryDate).toLocaleDateString()}`};return["userStatusChanged","userSubscriptionChanged","subscriptionUpdated","promocodeApplied","globalForceUpdate","planChanged"].forEach(v=>{try{window.triggerGlobalEvent(v,{...m,eventType:v})}catch{}}),{success:!0,message:m.message,plan:n,expiryDate:f.expiryDate,serverConfirmed:!0}}return h}catch(i){return{success:!1,error:i.message}}}}function p2e(t,e,s){const r=i=>{const{plan:o,newStatus:l,userStatus:c,subscriptionPlan:u,message:h,source:f,oldPlan:m,timestamp:g}=i.detail||{};let v=o||l||c||u;if((!v||v===""||v==="undefined")&&h&&(h.includes("START")||h.includes("start")?v="start":h.includes("PRO")||h.includes("pro")?v="pro":(h.includes("FREE")||h.includes("free"))&&(v="free")),f==="promocode"&&(!v||v==="")){const E=localStorage.getItem("userStatus"),L=localStorage.getItem("userPlan"),$=localStorage.getItem("subscriptionPlan"),M=[E,L,$];for(const A of M)if(A&&A!=="free"&&["start","pro"].includes(A)){v=A;break}}(!v||v===""||v==="undefined")&&(v="free"),["free","start","pro","premium"].includes(v)||(v="free");const I=v==="pro"?"Pro":v==="start"?"Start":"Free";document.title&&!document.title.includes("|")&&(document.title=`ACED | ${I}`),document.body.className=document.body.className.replace(/user-plan-\w+/g,""),document.body.classList.add(`user-plan-${v}`),localStorage.setItem("userStatus",v),localStorage.setItem("userPlan",v),localStorage.setItem("subscriptionPlan",v);const C=JSON.parse(localStorage.getItem("subscriptionData")||"{}");C.plan!==v&&(C.plan=v,C.status=v!=="free"?"active":"inactive",localStorage.setItem("subscriptionData",JSON.stringify(C))),localStorage.setItem("statusUpdateTime",Date.now().toString());try{if(t.getters["user/userStatus"]!==v){t.commit("user/SET_USER_STATUS",v);try{t.commit("user/setUserStatus",v)}catch{}t.state.user&&(t.state.user.userStatus=v,t.state.user.subscriptionPlan=v,t.state.user.plan=v)}}catch{}if(s!=null&&s._instance)try{s._instance.proxy.$forceUpdate()}catch{}const U={reason:"subscription-change",plan:v,newStatus:v,userStatus:v,subscriptionPlan:v,source:f||"global-change",oldPlan:m||"free",timestamp:g||Date.now(),message:h};if(["globalForceUpdate","reactivityUpdate","subscriptionUpdated","userStatusChanged","planChanged"].forEach(E=>{e.emit(E,U)}),v!=="free"&&(m==="free"||!m)){const E=f==="promocode"?"promocode":"payment";e.emit("subscriptionUpgrade",{plan:v,newStatus:v,source:f||"upgrade",message:h||`Congratulations! ${I} subscription activated via ${E}!`,timestamp:Date.now()})}};["userSubscriptionChanged","userStatusChanged","subscriptionUpdated","globalForceUpdate","reactivityUpdate"].forEach(i=>{window.addEventListener(i,r)}),window.globalEventHandlers||(window.globalEventHandlers={subscriptionHandlers:[],statusHandlers:[]}),window.globalEventHandlers.subscriptionHandlers.push(r),e.on("userStatusChanged",i=>{const{newStatus:o,plan:l,userStatus:c,subscriptionPlan:u}=i||{};let h=o||l||c||u||"free";["free","start","pro","premium"].includes(h)||(h="free");try{localStorage.setItem("userStatus",h),localStorage.setItem("userPlan",h),localStorage.setItem("subscriptionPlan",h);const f=JSON.parse(localStorage.getItem("subscriptionData")||"{}");f.plan!==h&&(f.plan=h,f.status=h!=="free"?"active":"inactive",localStorage.setItem("subscriptionData",JSON.stringify(f))),localStorage.setItem("statusUpdateTime",Date.now().toString())}catch{}try{if(t.getters["user/userStatus"]!==h){t.commit("user/SET_USER_STATUS",h);try{t.commit("user/setUserStatus",h)}catch{}}}catch{}if(s!=null&&s._instance)try{s._instance.proxy.$forceUpdate(),s._instance.proxy.$nextTick(()=>{})}catch{}}),e.on("promocodeApplied",i=>{const o=new CustomEvent("userSubscriptionChanged",{detail:{plan:i.newStatus,source:"promocode",oldPlan:i.oldStatus,promocode:i.promocode,timestamp:Date.now()}});window.dispatchEvent(o)}),e.on("paymentCompleted",i=>{const o=new CustomEvent("userSubscriptionChanged",{detail:{plan:i.plan,source:"payment",oldPlan:"free",transactionId:i.transactionId,amount:i.amount,timestamp:Date.now()}});window.dispatchEvent(o)})}let Ot,Fx=!1;const Al={initialized:!1,mounted:!1,authReady:!1,storeReady:!1};async function m2e(){const{default:t}=await mt(async()=>{const{default:n}=await Promise.resolve().then(()=>Oi);return{default:n}},void 0),{default:e}=await mt(async()=>{const{default:n}=await Promise.resolve().then(()=>xP);return{default:n}},void 0),{createI18n:s}=await mt(async()=>{const{createI18n:n}=await Promise.resolve().then(()=>$C);return{createI18n:n}},void 0),r=(await mt(async()=>{const{default:n}=await Promise.resolve().then(()=>$x);return{default:n}},void 0)).default;try{Ot=sc(sE);const n=s({legacy:!1,locale:localStorage.getItem("lang")||"ru",fallbackLocale:"en",messages:r,globalInjection:!0});return rv(n),Ot.config.globalProperties.$eventBus=window.eventBus,Ot.config.globalProperties.$userStore=t,Ot.config.globalProperties.$userStatus=()=>t.getters["user/userStatus"],Ot.config.globalProperties.$hasFeature=i=>t.getters["user/hasFeatureAccess"](i),Ot.config.globalProperties.$isPremiumUser=()=>t.getters["user/isPremiumUser"],Ot.config.globalProperties.$triggerGlobalEvent=window.triggerGlobalEvent,Ot.config.globalProperties.$onUserStatusChange=i=>window.eventBus.onStatusChange(i),Ot.config.globalProperties.$setLanguage=Jd,Ot.config.globalProperties.$getLanguage=BC,Ot.use(t),t.dispatch("platformMode/loadFromLocalStorage"),Ot.use(e),Ot.use(a2e,{position:"top-center",duration:4e3,dismissible:!0}),Ot.use(n),Ot.config.errorHandler=(i,o,l)=>{var c,u,h;if((c=i.message)!=null&&c.includes("Cannot read properties of undefined (reading 'length')")){window.eventBus.emit("lengthPropertyError",{error:i.message,component:((u=o==null?void 0:o.$options)==null?void 0:u.name)||"Unknown",info:l,timestamp:Date.now()});try{t.commit("user/FORCE_UPDATE"),window.triggerGlobalEvent("globalForceUpdate",{reason:"length-error-recovery",timestamp:Date.now()})}catch{}}window.eventBus.emit("vueError",{error:i.message,component:((h=o==null?void 0:o.$options)==null?void 0:h.name)||"Unknown",info:l,timestamp:Date.now()})},Ot.mount("#app"),Fx=!0,Al.mounted=!0,p2e(t,window.eventBus,Ot),Al.initialized=!0,Al.authReady=!0,Al.storeReady=!0,window.eventBus.emit("appReady",{userAuthenticated:!!t.getters["user/isAuthenticated"],userStatus:t.getters["user/userStatus"],timestamp:Date.now()}),setTimeout(()=>{const i=t.getters["user/userStatus"]||"free";window.triggerGlobalEvent("userStatusChanged",{oldStatus:null,newStatus:i,source:"app-mount-complete",timestamp:Date.now()})},200),!0}catch(n){throw window.eventBus.emit("appMountError",{error:n.message,timestamp:Date.now()}),n}}async function Ww(){const{default:t}=await mt(async()=>{const{default:n}=await Promise.resolve().then(()=>Oi);return{default:n}},void 0),{default:e}=await mt(async()=>{const{default:n}=await Promise.resolve().then(()=>xP);return{default:n}},void 0),{createI18n:s}=await mt(async()=>{const{createI18n:n}=await Promise.resolve().then(()=>$C);return{createI18n:n}},void 0),r=(await mt(async()=>{const{default:n}=await Promise.resolve().then(()=>$x);return{default:n}},void 0)).default;try{Ot=sc(sE);const n=s({legacy:!1,locale:localStorage.getItem("lang")||"ru",fallbackLocale:"en",messages:r,globalInjection:!0});return rv(n),Ot.use(t),Ot.use(e),Ot.use(n),Ot.config.errorHandler=(i,o,l)=>{console.error("Vue Error:",i)},Ot.mount("#app"),Fx=!0,Al.mounted=!0,!0}catch(n){throw n}}function g2e(){return Ot}let $u=!1;const y2e=new Promise(t=>{const s=(()=>{try{const n=localStorage.getItem("subscriptionData");if(n){const i=JSON.parse(n),o=new Date,l=new Date(i.expiryDate);if(o<l&&i.plan!=="free")return localStorage.setItem("userStatus",i.plan),localStorage.setItem("userPlan",i.plan),localStorage.setItem("subscriptionPlan",i.plan),localStorage.setItem("authPreserveStatus",i.plan),i.plan}}catch{}return"free"})(),r=Bc(pe,async n=>{if(!$u){$u=!0,r();try{await Gw(),n?await v2e(n):await Kw(),await m2e(),localStorage.removeItem("authPreserveStatus"),setTimeout(()=>{t({authenticated:!!n,user:n,appReady:!0,preservedStatus:s,timestamp:Date.now()})},50)}catch(i){try{await Ww()}catch{}setTimeout(()=>{t({authenticated:!1,user:null,appReady:!1,error:i.message,preservedStatus:s,timestamp:Date.now()})},50)}}});setTimeout(()=>{$u||($u=!0,r(),Promise.resolve().then(()=>Gw()).then(()=>Kw()).then(()=>Ww()).then(()=>{t({authenticated:!1,user:null,appReady:!0,timedOut:!0,timestamp:Date.now()})}).catch(n=>{t({authenticated:!1,user:null,appReady:!1,error:n.message,fallbackFailed:!0,timestamp:Date.now()})}))},8e3)});async function Gw(){const{default:t}=await mt(async()=>{const{default:e}=await Promise.resolve().then(()=>Oi);return{default:e}},void 0);try{if(t.getters["user/isInitialized"]){const s=localStorage.getItem("lastServerLoad"),r=Date.now()-5*60*1e3;return(!s||parseInt(s)<r)&&await t.dispatch("user/loadUserFromServer"),!0}return await t.dispatch("user/initialize"),pe.currentUser&&await t.dispatch("user/loadUserFromServer"),!0}catch(e){throw e}}async function v2e(t){var s,r;const{default:e}=await mt(async()=>{const{default:n}=await Promise.resolve().then(()=>Oi);return{default:n}},void 0);try{const n=await t.getIdToken(!0),i=t.uid;let o=null,l="free";try{const m=await fetch(`undefined/api/users/${i}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(m.ok){const g=await m.json();o=g.user||g,l=o.subscriptionPlan||o.userStatus||"free",localStorage.setItem("userStatus",l),localStorage.setItem("userPlan",l),localStorage.setItem("subscriptionPlan",l),localStorage.setItem("plan",l),localStorage.setItem("serverStatus",l),localStorage.setItem("serverStatusConfirmed","true"),localStorage.setItem("lastServerFetch",Date.now().toString());const v={uid:t.uid,email:t.email,displayName:t.displayName||o.name,photoURL:t.photoURL};e.dispatch("user/saveUser",{userData:v,token:n}).catch(I=>console.error("Background sync failed",I))}}catch{}if(!o){const f={uid:t.uid,email:t.email,displayName:t.displayName,name:t.displayName||((s=t.email)==null?void 0:s.split("@")[0])||"User",emailVerified:t.emailVerified,photoURL:t.photoURL,lastLoginAt:new Date().toISOString()};try{const m=await e.dispatch("user/saveUser",{userData:f,token:n});m&&m.success&&m.user&&(o=m.user,l=o.subscriptionPlan||o.userStatus||"free",localStorage.setItem("userStatus",l),localStorage.setItem("userPlan",l),localStorage.setItem("subscriptionPlan",l),localStorage.setItem("plan",l))}catch{}}const c={...o,firebaseId:t.uid,_id:(o==null?void 0:o._id)||t.uid,uid:t.uid,email:t.email,name:(o==null?void 0:o.name)||t.displayName||((r=t.email)==null?void 0:r.split("@")[0])||"User",subscriptionPlan:l,userStatus:l,plan:l,lastLoginAt:new Date().toISOString(),serverStatus:l,fetchedFromServer:!0,serverStatusConfirmed:!0,lastServerSync:new Date().toISOString()};e.commit("setUser",c),e.commit("setFirebaseUserId",c.firebaseId),e.commit("setToken",n),e.commit("user/SET_USER",c),e.commit("user/SET_USER_STATUS",l),e.commit("user/FORCE_UPDATE"),localStorage.setItem("user",JSON.stringify(c)),localStorage.setItem("firebaseUserId",c.firebaseId),localStorage.setItem("userId",c.firebaseId),localStorage.setItem("token",n),localStorage.setItem("userStatus",l),localStorage.setItem("userPlan",l),localStorage.setItem("subscriptionPlan",l),localStorage.setItem("plan",l),localStorage.setItem("authMode","server-authenticated"),l!=="free"&&await Xv(l,"server-auth");const u={oldStatus:"free",newStatus:l,plan:l,userStatus:l,subscriptionPlan:l,source:"server-auth-fetch",user:c,timestamp:Date.now(),serverFetched:!0,serverStatusConfirmed:!0};["userStatusChanged","userSubscriptionChanged","subscriptionUpdated","userLoggedIn","serverStatusLoaded","globalForceUpdate","authStatusSynced"].forEach(f=>{try{window.triggerGlobalEvent(f,{...u,eventType:f})}catch{}}),setTimeout(()=>{window.triggerGlobalEvent("delayedStatusSync",u)},100)}catch{await _2e(t,null,"free")}}async function _2e(t,e=null,s="free"){var n;const{default:r}=await mt(async()=>{const{default:i}=await Promise.resolve().then(()=>Oi);return{default:i}},void 0);try{let i=s;if(i==="free"){const c=Xc();c&&c.plan!=="free"&&Jv()&&(i=c.plan)}const o={firebaseId:t.uid,_id:t.uid,uid:t.uid,email:t.email,name:t.displayName||((n=t.email)==null?void 0:n.split("@")[0])||"User",displayName:t.displayName||"",subscriptionPlan:i,userStatus:i,plan:i,subscription:i,emailVerified:t.emailVerified,photoURL:t.photoURL,lastLoginAt:new Date().toISOString(),lastSyncTime:new Date().toISOString(),metadata:{lastSync:new Date().toISOString(),syncSource:"basic-auth-with-server",serverStatusUsed:s!=="free"}};i&&i!=="free"&&await Xv(i,"basic-auth-server"),r.commit("setUser",o),r.commit("setFirebaseUserId",o.firebaseId),e&&r.commit("setToken",e),r.commit("user/SET_USER",o),r.commit("user/SET_USER_STATUS",i);try{localStorage.setItem("user",JSON.stringify(o)),localStorage.setItem("firebaseUserId",o.firebaseId),localStorage.setItem("userId",o.firebaseId),e&&localStorage.setItem("token",e),localStorage.setItem("userStatus",i),localStorage.setItem("userPlan",i),localStorage.setItem("subscriptionPlan",i),localStorage.setItem("plan",i),localStorage.setItem("lastLoginTime",new Date().toISOString()),localStorage.setItem("authMode","basic-with-server"),localStorage.setItem("serverStatusConfirmed",s!=="free"?"true":"false")}catch{}const l={oldStatus:"free",newStatus:i,source:"basic-auth-server-sync",user:o,timestamp:Date.now(),serverStatus:s,deviceSync:!0};window.triggerGlobalEvent("userStatusChanged",l),window.triggerGlobalEvent("userSubscriptionChanged",l),window.triggerGlobalEvent("userLoggedIn",{user:o,userStatus:i,source:"basic-server",timestamp:Date.now()}),setTimeout(()=>{window.triggerGlobalEvent("deviceStatusSynced",l),window.triggerGlobalEvent("globalForceUpdate",{reason:"basic-auth-server-status",plan:i,timestamp:Date.now()})},100)}catch(i){throw i}}async function Kw(){const{default:t}=await mt(async()=>{const{default:e}=await Promise.resolve().then(()=>Oi);return{default:e}},void 0);try{const e=localStorage.getItem("validSubscriptionDetected"),s=localStorage.getItem("preserveStatusDuringAuth");e==="true"&&s&&s!=="free"?(["user","firebaseUserId","userId","token","lastLoginTime"].forEach(i=>{try{localStorage.removeItem(i)}catch{}}),t.commit("user/SET_USER_STATUS",s),localStorage.removeItem("validSubscriptionDetected"),localStorage.removeItem("preserveStatusDuringAuth")):(await t.dispatch("user/logout"),t.commit("logout"),["user","firebaseUserId","userId","token","userStatus","lastLoginTime","subscriptionDetails"].forEach(i=>{try{localStorage.removeItem(i)}catch{}}),t.commit("user/SET_USER_STATUS","free"));const r=localStorage.getItem("userStatus")||"free";setTimeout(()=>{window.triggerGlobalEvent("userStatusChanged",{oldStatus:"free",newStatus:r,source:"not-authenticated-preserved",timestamp:Date.now()})},100)}catch{try{const s=localStorage.getItem("preserveStatusDuringAuth");s&&s!=="free"?(t.commit("user/SET_USER_STATUS",s),localStorage.setItem("userStatus",s)):(t.commit("user/CLEAR_USER"),localStorage.setItem("userStatus","free"))}catch{}}}function b2e(t,e){window.emitUserStatusChange=(s,r,n="unknown")=>{if(!["free","start","pro","premium"].includes(r))return;try{t.commit("user/SET_USER_STATUS",r)}catch{}try{localStorage.setItem("userStatus",r),localStorage.setItem("userPlan",r),localStorage.setItem("subscriptionPlan",r),localStorage.setItem("statusUpdateTime",Date.now().toString())}catch{}const o={oldStatus:s,newStatus:r,source:n,timestamp:Date.now()};window.triggerGlobalEvent("userStatusChanged",o),window.triggerGlobalEvent("userSubscriptionChanged",o),window.triggerGlobalEvent("subscriptionUpdated",o),window.triggerGlobalEvent("globalForceUpdate",{reason:"manual-status-change",plan:r,timestamp:Date.now()});const l=g2e();if(l!=null&&l._instance)try{l._instance.proxy.$forceUpdate()}catch{}},window.emitForceUpdate=(s="manual")=>{window.triggerGlobalEvent("globalForceUpdate",{reason:s,timestamp:Date.now()});try{t.commit("user/FORCE_UPDATE")}catch{}},window.listenToUserChanges=s=>{const r=["userStatusChanged","promocodeApplied","featuresUpdated","globalForceUpdate","subscriptionUpdated","reactivityUpdate"];return r.forEach(n=>e.on(n,s)),window.addEventListener("userSubscriptionChanged",s),()=>{r.forEach(n=>e.off(n,s)),window.removeEventListener("userSubscriptionChanged",s)}},window.getCurrentUserStatus=()=>{try{const s=t.getters["user/userStatus"],r=localStorage.getItem("userStatus");return s||r||"free"}catch{return localStorage.getItem("userStatus")||"free"}},window.repairStoreStatus=()=>{const s=localStorage.getItem("userStatus")||localStorage.getItem("userPlan")||localStorage.getItem("subscriptionPlan")||"free";try{if(!t.state.user)try{t.registerModule("user",{namespaced:!0,state:{user:null,userStatus:s,subscriptionPlan:s,isAuthenticated:!1,isInitialized:!0},getters:{userStatus:i=>i.userStatus,getUser:i=>i.user,isAuthenticated:i=>!!i.user,isInitialized:i=>i.isInitialized},mutations:{SET_USER_STATUS:(i,o)=>{i.userStatus=o},SET_USER:(i,o)=>{i.user=o},CLEAR_USER:i=>{i.user=null,i.userStatus="free"}}})}catch{t.state.user={user:null,userStatus:s,subscriptionPlan:s,isAuthenticated:!1,isInitialized:!0}}["user/SET_USER_STATUS","user/setUserStatus","user/SET_STATUS","user/UPDATE_USER_STATUS","setUserStatus"].forEach(i=>{try{t.commit(i,s)}catch{}}),t.state.user&&(t.state.user.userStatus=s,t.state.user.subscriptionPlan=s,t.state.user.plan=s);const n=t.getters["user/userStatus"];return(!n||n==="undefined")&&(window.getWorkingUserStatus=()=>{var i;return((i=t.state.user)==null?void 0:i.userStatus)||localStorage.getItem("userStatus")||"free"}),n||s}catch{return s}},window.syncUserStatus=()=>{try{const s=t.getters["user/userStatus"],r=localStorage.getItem("userStatus");return s&&r&&s!==r&&(localStorage.setItem("userStatus",s),window.triggerGlobalEvent("userStatusChanged",{oldStatus:r,newStatus:s,source:"sync-helper",timestamp:Date.now()})),s||r||"free"}catch{return"free"}},window.forceUserStatusSync=()=>{try{const s=t.getters["user/userStatus"]||"free";window.triggerGlobalEvent("userStatusChanged",{oldStatus:null,newStatus:s,source:"emergency-sync",timestamp:Date.now()})}catch{}},window.updateUserSubscription=(s,r="external")=>{if(!["free","start","pro"].includes(s))return!1;const n=window.getCurrentUserStatus();return window.emitUserStatusChange(n,s,r),!0},window.applyPromocode=(s,r)=>{if(!r||!["free","start","pro"].includes(r))return!1;const n=window.getCurrentUserStatus();window.emitUserStatusChange(n,r,"promocode");const i={promocode:s,oldStatus:n,newStatus:r,plan:r,userStatus:r,subscriptionPlan:r,source:"promocode",timestamp:Date.now()};return e.emit("promocodeApplied",i),window.triggerGlobalEvent("userSubscriptionChanged",i),window.triggerGlobalEvent("subscriptionUpdated",i),!0},window.paymentCompleted=(s,r,n)=>{if(!["start","pro"].includes(r))return!1;const i=window.getCurrentUserStatus();return window.emitUserStatusChange(i,r,"payment"),e.emit("paymentCompleted",{transactionId:s,plan:r,amount:n,oldStatus:i,newStatus:r,timestamp:Date.now()}),!0},window.smartPromocodeDetection=()=>{const r=(()=>{const n=["userStatus","userPlan","subscriptionPlan"];for(const i of n){const o=localStorage.getItem(i);if(o&&["start","pro"].includes(o))return o}return null})();if(r&&r!=="free"){const n=t.getters["user/userStatus"];(!n||n==="undefined"||n!==r)&&window.repairStoreStatus()}return null},setInterval(()=>{window.smartPromocodeDetection()},5e3)}function w2e(t){t.subscribe((e,s)=>{var n,i,o;if(["user/SET_USER_STATUS","user/setUserStatus","user/UPDATE_SUBSCRIPTION","user/ADD_PROMOCODE","user/FORCE_UPDATE","user/SET_USER"].includes(e.type)){const l=((n=s.user)==null?void 0:n.userStatus)||"free";let c="free";e.type==="user/SET_USER_STATUS"&&e.payload&&(c=l);const u={oldStatus:c,newStatus:l,source:"store-mutation",mutation:{type:e.type,payload:e.payload},timestamp:Date.now(),forceCounter:((o=(i=s.user)==null?void 0:i.system)==null?void 0:o.forceUpdateCounter)||0};["userStatusChanged","subscriptionUpdated","userSubscriptionChanged","globalForceUpdate","reactivityUpdate","storeChanged"].forEach(f=>{window.triggerGlobalEvent(f,{...u,eventType:f})}),setTimeout(()=>{window.triggerGlobalEvent("delayedStatusUpdate",u)},100)}})}function S2e(t){console.log(" Setting up global error handling"),window.addEventListener("error",e=>{var s,r,n;if(console.error(" Global error:",e.error),(r=(s=e.error)==null?void 0:s.message)!=null&&r.includes("Cannot read properties of undefined (reading 'length')")){console.warn(" Length property error detected, attempting recovery...");try{mt(async()=>{const{default:i}=await Promise.resolve().then(()=>Oi);return{default:i}},void 0).then(({default:i})=>{var o;i.commit("user/FORCE_UPDATE"),window.triggerGlobalEvent("globalForceUpdate",{reason:"global-error-recovery",originalError:(o=e.error)==null?void 0:o.message,timestamp:Date.now()}),console.log(" Recovery attempt completed")}).catch(i=>{console.error(" Store import failed:",i)})}catch(i){console.error(" Recovery failed:",i)}}t.emit("globalJavaScriptError",{error:((n=e.error)==null?void 0:n.message)||"Unknown error",filename:e.filename,lineno:e.lineno,colno:e.colno,timestamp:Date.now()})}),window.addEventListener("unhandledrejection",e=>{var s,r,n,i,o,l;if(console.error(" Unhandled promise rejection:",e.reason),(r=(s=e.reason)==null?void 0:s.message)!=null&&r.includes("userStatus")||(i=(n=e.reason)==null?void 0:n.message)!=null&&i.includes("subscription")){console.warn(" Status-related promise rejection, attempting recovery...");try{window.triggerGlobalEvent("globalForceUpdate",{reason:"promise-rejection-recovery",originalError:(o=e.reason)==null?void 0:o.message,timestamp:Date.now()}),console.log(" Recovery event triggered")}catch(c){console.error(" Recovery failed:",c)}}t.emit("unhandledPromiseRejection",{reason:((l=e.reason)==null?void 0:l.message)||e.reason,timestamp:Date.now()})}),window.addEventListener("storage",e=>{if(e.key==="userStatus"&&e.newValue!==e.oldValue){console.log(" Cross-tab status change detected");const s=e.newValue||"free",r=e.oldValue||"free";window.triggerGlobalEvent("userStatusChanged",{oldStatus:r,newStatus:s,source:"cross-tab-sync",timestamp:Date.now()})}if(e.key==="subscriptionData"&&e.newValue!==e.oldValue){console.log(" Cross-tab subscription change detected");try{const s=e.newValue?JSON.parse(e.newValue):null,r=e.oldValue?JSON.parse(e.oldValue):null;s&&s.plan&&window.triggerGlobalEvent("userSubscriptionChanged",{oldStatus:(r==null?void 0:r.plan)||"free",newStatus:s.plan,source:"cross-tab-subscription-sync",timestamp:Date.now()})}catch(s){console.error(" Failed to parse subscription data:",s)}}}),console.log(" Global error handling configured")}u2e();d2e();const E2e=MC({legacy:!1,locale:localStorage.getItem("lang")||"ru",fallbackLocale:"en",messages:Mx,globalInjection:!0});rv(E2e);ZU(pe,Wk).then(()=>{console.log(" Firebase auth persistence set to LOCAL")}).catch(t=>{console.error(" Firebase persistence setup failed:",t)});const Vx={initialized:!1,mounted:!1,authReady:!1,storeReady:!1};window.eventBus=Ff;window.appLifecycle=Vx;c2e(Jr);S2e(Ff);f2e(Jr);w2e(Jr);b2e(Jr,Ff);const T2e=Object.freeze(Object.defineProperty({__proto__:null,appLifecycle:Vx,authInitPromise:y2e,eventBus:Ff},Symbol.toStringTag,{value:"Module"}));export{VK as $,xi as A,_e as B,kn as C,fr as D,br as E,he as F,Ri as G,kt as H,Li as I,$a as J,Sh as K,jK as L,tc as M,YN as N,Kt as O,PP as P,cR as Q,ae as R,Ga as S,ma as T,md as U,Js as V,AD as W,FG as X,Ph as Y,pe as Z,tt as _,a,FK as a0,mt as a1,wv as a2,H2e as a3,ibe as a4,xe as b,S as c,ts as d,W as e,re as f,Pe as g,be as h,gt as i,ct as j,BK as k,uP as l,tn as m,ye as n,dP as o,mv as p,pv as q,es as r,b as s,p as t,wf as u,Ge as v,Qt as w,IB as x,Ff as y,Se as z};
