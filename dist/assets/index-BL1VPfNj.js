const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MyCourses-Oj9Fjkgb.js","assets/MyCourses-CeQoCSv9.css","assets/LessonPage-DdzCT28f.js","assets/LessonPage-BmQdJDC1.css","assets/TopicFinished-B6S1am6j.js","assets/TopicFinished-CzyDKW_t.css","assets/TopicOverview-BBDCaTDg.js","assets/TopicOverview-B1f-3OPf.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function us(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Ze={},so=[],ls=()=>{},sa=()=>!1,ki=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ch=t=>t.startsWith("onUpdate:"),et=Object.assign,uh=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},p4=Object.prototype.hasOwnProperty,ct=(t,e)=>p4.call(t,e),ke=Array.isArray,ro=t=>Io(t)==="[object Map]",Ii=t=>Io(t)==="[object Set]",zp=t=>Io(t)==="[object Date]",Qw=t=>Io(t)==="[object RegExp]",Le=t=>typeof t=="function",Fe=t=>typeof t=="string",js=t=>typeof t=="symbol",ft=t=>t!==null&&typeof t=="object",dh=t=>(ft(t)||Le(t))&&Le(t.then)&&Le(t.catch),gg=Object.prototype.toString,Io=t=>gg.call(t),Xw=t=>Io(t).slice(8,-1),Cc=t=>Io(t)==="[object Object]",hh=t=>Fe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Tn=us(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jw=us("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),fh=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},m4=/-(\w)/g,It=fh(t=>t.replace(m4,(e,s)=>s?s.toUpperCase():"")),g4=/\B([A-Z])/g,xs=fh(t=>t.replace(g4,"-$1").toLowerCase()),Ci=fh(t=>t.charAt(0).toUpperCase()+t.slice(1)),no=fh(t=>t?`on${Ci(t)}`:""),Is=(t,e)=>!Object.is(t,e),io=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},yg=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},Wl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},zl=t=>{const e=Fe(t)?Number(t):NaN;return isNaN(e)?t:e};let W0;const Ac=()=>W0||(W0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),y4=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function v4(t){return y4.test(t)?`__props.${t}`:`__props[${JSON.stringify(t)}]`}function _4(t,e){return t+JSON.stringify(e,(s,r)=>typeof r=="function"?r.toString():r)}const b4={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},w4={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},S4={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},E4={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},T4={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},k4="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",vg=us(k4),I4=vg,z0=2;function Zw(t,e=0,s=t.length){if(e=Math.max(0,Math.min(e,t.length)),s=Math.max(0,Math.min(s,t.length)),e>s)return"";let r=t.split(/(\r?\n)/);const n=r.filter((l,c)=>c%2===1);r=r.filter((l,c)=>c%2===0);let i=0;const o=[];for(let l=0;l<r.length;l++)if(i+=r[l].length+(n[l]&&n[l].length||0),i>=e){for(let c=l-z0;c<=l+z0||s>i;c++){if(c<0||c>=r.length)continue;const u=c+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${r[c]}`);const d=r[c].length,f=n[c]&&n[c].length||0;if(c===l){const p=e-(i-(d+f)),g=Math.max(1,s>i?d-p:s-e);o.push("   |  "+" ".repeat(p)+"^".repeat(g))}else if(c>l){if(s>i){const p=Math.max(Math.min(s-i,d),1);o.push("   |  "+"^".repeat(p))}i+=d+f}}break}return o.join(`
`)}function rt(t){if(ke(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=Fe(r)?_g(r):rt(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(Fe(t)||ft(t))return t}const C4=/;(?![^(]*\))/g,A4=/:([^]+)/,P4=/\/\*[^]*?\*\//g;function _g(t){const e={};return t.replace(P4,"").split(C4).forEach(s=>{if(s){const r=s.split(A4);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function x4(t){if(!t)return"";if(Fe(t))return t;let e="";for(const s in t){const r=t[s];if(Fe(r)||typeof r=="number"){const n=s.startsWith("--")?s:xs(s);e+=`${n}:${r};`}}return e}function ge(t){let e="";if(Fe(t))e=t;else if(ke(t))for(let s=0;s<t.length;s++){const r=ge(t[s]);r&&(e+=r+" ")}else if(ft(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}function e2(t){if(!t)return null;let{class:e,style:s}=t;return e&&!Fe(e)&&(t.class=ge(e)),s&&(t.style=rt(s)),t}const L4="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",R4="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",N4="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",O4="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",t2=us(L4),s2=us(R4),r2=us(N4),n2=us(O4),i2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o2=us(i2),M4=us(i2+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function bg(t){return!!t||t===""}const D4=/[>/="'\u0009\u000a\u000c\u0020]/,tp={};function $4(t){if(tp.hasOwnProperty(t))return tp[t];const e=D4.test(t);return e&&console.error(`unsafe attribute name: ${t}`),tp[t]=!e}const U4={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},F4=us("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),V4=us("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),B4=us("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function q4(t){if(t==null)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"}const j4=/["'&<>]/;function H4(t){const e=""+t,s=j4.exec(e);if(!s)return e;let r="",n,i,o=0;for(i=s.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}o!==i&&(r+=e.slice(o,i)),o=i+1,r+=n}return o!==i?r+e.slice(o,i):r}const W4=/^-?>|<!--|-->|--!>|<!-$/g;function z4(t){return t.replace(W4,"")}const a2=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function G4(t,e){return t.replace(a2,s=>e?s==='"'?'\\\\\\"':`\\\\${s}`:`\\${s}`)}function K4(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=xn(t[r],e[r]);return s}function xn(t,e){if(t===e)return!0;let s=zp(t),r=zp(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=js(t),r=js(e),s||r)return t===e;if(s=ke(t),r=ke(e),s||r)return s&&r?K4(t,e):!1;if(s=ft(t),r=ft(e),s||r){if(!s||!r)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!xn(t[o],e[o]))return!1}}return String(t)===String(e)}function Pc(t,e){return t.findIndex(s=>xn(s,e))}const l2=t=>!!(t&&t.__v_isRef===!0),m=t=>Fe(t)?t:t==null?"":ke(t)||ft(t)&&(t.toString===gg||!Le(t.toString))?l2(t)?m(t.value):JSON.stringify(t,c2,2):String(t),c2=(t,e)=>l2(e)?c2(t,e.value):ro(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[sp(r,i)+" =>"]=n,s),{})}:Ii(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>sp(s))}:js(e)?sp(e):ft(e)&&!ke(e)&&!Cc(e)?String(e):e,sp=(t,e="")=>{var s;return js(t)?`Symbol(${(s=t.description)!=null?s:e})`:t},Y4=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:so,EMPTY_OBJ:Ze,NO:sa,NOOP:ls,PatchFlagNames:w4,PatchFlags:b4,ShapeFlags:S4,SlotFlags:E4,camelize:It,capitalize:Ci,cssVarNameEscapeSymbolsRE:a2,def:yg,escapeHtml:H4,escapeHtmlComment:z4,extend:et,genCacheKey:_4,genPropsAccessExp:v4,generateCodeFrame:Zw,getEscapedCssVarName:G4,getGlobalThis:Ac,hasChanged:Is,hasOwn:ct,hyphenate:xs,includeBooleanAttr:bg,invokeArrayFns:io,isArray:ke,isBooleanAttr:M4,isBuiltInDirective:Jw,isDate:zp,isFunction:Le,isGloballyAllowed:vg,isGloballyWhitelisted:I4,isHTMLTag:t2,isIntegerKey:hh,isKnownHtmlAttr:F4,isKnownMathMLAttr:B4,isKnownSvgAttr:V4,isMap:ro,isMathMLTag:r2,isModelListener:ch,isObject:ft,isOn:ki,isPlainObject:Cc,isPromise:dh,isRegExp:Qw,isRenderableAttrValue:q4,isReservedProp:Tn,isSSRSafeAttrName:$4,isSVGTag:s2,isSet:Ii,isSpecialBooleanAttr:o2,isString:Fe,isSymbol:js,isVoidTag:n2,looseEqual:xn,looseIndexOf:Pc,looseToNumber:Wl,makeMap:us,normalizeClass:ge,normalizeProps:e2,normalizeStyle:rt,objectToString:gg,parseStringStyle:_g,propsToAttrMap:U4,remove:uh,slotFlagsText:T4,stringifyStyle:x4,toDisplayString:m,toHandlerKey:no,toNumber:zl,toRawType:Xw,toTypeString:Io},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fs;class wg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fs,!e&&Fs&&(this.index=(Fs.scopes||(Fs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Fs;try{return Fs=this,e()}finally{Fs=s}}}on(){Fs=this}off(){Fs=this.parent}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Sg(t){return new wg(t)}function u2(){return Fs}function Q4(t,e=!1){Fs&&Fs.cleanups.push(t)}let Tt;const rp=new WeakSet;class Gl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fs&&Fs.active&&Fs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rp.has(this)&&(rp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||h2(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,G0(this),f2(this);const e=Tt,s=xr;Tt=this,xr=!0;try{return this.fn()}finally{p2(this),Tt=e,xr=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)kg(e);this.deps=this.depsTail=void 0,G0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gp(this)&&this.run()}get dirty(){return Gp(this)}}let d2=0,xl,Ll;function h2(t,e=!1){if(t.flags|=8,e){t.next=Ll,Ll=t;return}t.next=xl,xl=t}function Eg(){d2++}function Tg(){if(--d2>0)return;if(Ll){let e=Ll;for(Ll=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;xl;){let e=xl;for(xl=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function f2(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function p2(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),kg(r),X4(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function Gp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(m2(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function m2(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Kl))return;t.globalVersion=Kl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Gp(t)){t.flags&=-3;return}const s=Tt,r=xr;Tt=t,xr=!0;try{f2(t);const n=t.fn(t._value);(e.version===0||Is(n,t._value))&&(t._value=n,e.version++)}catch(n){throw e.version++,n}finally{Tt=s,xr=r,p2(t),t.flags&=-3}}function kg(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)kg(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function X4(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}function J4(t,e){t.effect instanceof Gl&&(t=t.effect.fn);const s=new Gl(t);e&&et(s,e);try{s.run()}catch(n){throw s.stop(),n}const r=s.run.bind(s);return r.effect=s,r}function Z4(t){t.effect.stop()}let xr=!0;const g2=[];function Ai(){g2.push(xr),xr=!1}function Pi(){const t=g2.pop();xr=t===void 0?!0:t}function G0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Tt;Tt=void 0;try{e()}finally{Tt=s}}}let Kl=0;class eL{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ph{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Tt||!xr||Tt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Tt)s=this.activeLink=new eL(Tt,this),Tt.deps?(s.prevDep=Tt.depsTail,Tt.depsTail.nextDep=s,Tt.depsTail=s):Tt.deps=Tt.depsTail=s,y2(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=Tt.depsTail,s.nextDep=void 0,Tt.depsTail.nextDep=s,Tt.depsTail=s,Tt.deps===s&&(Tt.deps=r)}return s}trigger(e){this.version++,Kl++,this.notify(e)}notify(e){Eg();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Tg()}}}function y2(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)y2(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const fd=new WeakMap,oo=Symbol(""),Kp=Symbol(""),Yl=Symbol("");function Cs(t,e,s){if(xr&&Tt){let r=fd.get(t);r||fd.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new ph),n.map=r,n.key=s),n.track()}}function gn(t,e,s,r,n,i){const o=fd.get(t);if(!o){Kl++;return}const l=c=>{c&&c.trigger()};if(Eg(),e==="clear")o.forEach(l);else{const c=ke(t),u=c&&hh(s);if(c&&s==="length"){const d=Number(r);o.forEach((f,p)=>{(p==="length"||p===Yl||!js(p)&&p>=d)&&l(f)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),u&&l(o.get(Yl)),e){case"add":c?u&&l(o.get("length")):(l(o.get(oo)),ro(t)&&l(o.get(Kp)));break;case"delete":c||(l(o.get(oo)),ro(t)&&l(o.get(Kp)));break;case"set":ro(t)&&l(o.get(oo));break}}Tg()}function tL(t,e){const s=fd.get(t);return s&&s.get(e)}function jo(t){const e=ot(t);return e===t?e:(Cs(e,"iterate",Yl),lr(t)?e:e.map(As))}function mh(t){return Cs(t=ot(t),"iterate",Yl),t}const sL={__proto__:null,[Symbol.iterator](){return np(this,Symbol.iterator,As)},concat(...t){return jo(this).concat(...t.map(e=>ke(e)?jo(e):e))},entries(){return np(this,"entries",t=>(t[1]=As(t[1]),t))},every(t,e){return cn(this,"every",t,e,void 0,arguments)},filter(t,e){return cn(this,"filter",t,e,s=>s.map(As),arguments)},find(t,e){return cn(this,"find",t,e,As,arguments)},findIndex(t,e){return cn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return cn(this,"findLast",t,e,As,arguments)},findLastIndex(t,e){return cn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return cn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ip(this,"includes",t)},indexOf(...t){return ip(this,"indexOf",t)},join(t){return jo(this).join(t)},lastIndexOf(...t){return ip(this,"lastIndexOf",t)},map(t,e){return cn(this,"map",t,e,void 0,arguments)},pop(){return cl(this,"pop")},push(...t){return cl(this,"push",t)},reduce(t,...e){return K0(this,"reduce",t,e)},reduceRight(t,...e){return K0(this,"reduceRight",t,e)},shift(){return cl(this,"shift")},some(t,e){return cn(this,"some",t,e,void 0,arguments)},splice(...t){return cl(this,"splice",t)},toReversed(){return jo(this).toReversed()},toSorted(t){return jo(this).toSorted(t)},toSpliced(...t){return jo(this).toSpliced(...t)},unshift(...t){return cl(this,"unshift",t)},values(){return np(this,"values",As)}};function np(t,e,s){const r=mh(t),n=r[e]();return r!==t&&!lr(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const rL=Array.prototype;function cn(t,e,s,r,n,i){const o=mh(t),l=o!==t&&!lr(t),c=o[e];if(c!==rL[e]){const f=c.apply(t,i);return l?As(f):f}let u=s;o!==t&&(l?u=function(f,p){return s.call(this,As(f),p,t)}:s.length>2&&(u=function(f,p){return s.call(this,f,p,t)}));const d=c.call(o,u,r);return l&&n?n(d):d}function K0(t,e,s,r){const n=mh(t);let i=s;return n!==t&&(lr(t)?s.length>3&&(i=function(o,l,c){return s.call(this,o,l,c,t)}):i=function(o,l,c){return s.call(this,o,As(l),c,t)}),n[e](i,...r)}function ip(t,e,s){const r=ot(t);Cs(r,"iterate",Yl);const n=r[e](...s);return(n===-1||n===!1)&&vh(s[0])?(s[0]=ot(s[0]),r[e](...s)):n}function cl(t,e,s=[]){Ai(),Eg();const r=ot(t)[e].apply(t,s);return Tg(),Pi(),r}const nL=us("__proto__,__v_isRef,__isVue"),v2=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(js));function iL(t){js(t)||(t=String(t));const e=ot(this);return Cs(e,"has",t),e.hasOwnProperty(t)}class _2{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?k2:T2:i?E2:S2).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ke(e);if(!n){let c;if(o&&(c=sL[s]))return c;if(s==="hasOwnProperty")return iL}const l=Reflect.get(e,s,Qt(e)?e:r);return(js(s)?v2.has(s):nL(s))||(n||Cs(e,"get",s),i)?l:Qt(l)?o&&hh(s)?l:l.value:ft(l)?n?Cg(l):Co(l):l}}class b2 extends _2{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];if(!this._isShallow){const c=pi(i);if(!lr(r)&&!pi(r)&&(i=ot(i),r=ot(r)),!ke(e)&&Qt(i)&&!Qt(r))return c?!1:(i.value=r,!0)}const o=ke(e)&&hh(s)?Number(s)<e.length:ct(e,s),l=Reflect.set(e,s,r,Qt(e)?e:n);return e===ot(n)&&(o?Is(r,i)&&gn(e,"set",s,r):gn(e,"add",s,r)),l}deleteProperty(e,s){const r=ct(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&gn(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!js(s)||!v2.has(s))&&Cs(e,"has",s),r}ownKeys(e){return Cs(e,"iterate",ke(e)?"length":oo),Reflect.ownKeys(e)}}class w2 extends _2{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const oL=new b2,aL=new w2,lL=new b2(!0),cL=new w2(!0),Yp=t=>t,mu=t=>Reflect.getPrototypeOf(t);function uL(t,e,s){return function(...r){const n=this.__v_raw,i=ot(n),o=ro(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=n[t](...r),d=s?Yp:e?Qp:As;return!e&&Cs(i,"iterate",c?Kp:oo),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:l?[d(f[0]),d(f[1])]:d(f),done:p}},[Symbol.iterator](){return this}}}}function gu(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function dL(t,e){const s={get(n){const i=this.__v_raw,o=ot(i),l=ot(n);t||(Is(n,l)&&Cs(o,"get",n),Cs(o,"get",l));const{has:c}=mu(o),u=e?Yp:t?Qp:As;if(c.call(o,n))return u(i.get(n));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&Cs(ot(n),"iterate",oo),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,o=ot(i),l=ot(n);return t||(Is(n,l)&&Cs(o,"has",n),Cs(o,"has",l)),n===l?i.has(n):i.has(n)||i.has(l)},forEach(n,i){const o=this,l=o.__v_raw,c=ot(l),u=e?Yp:t?Qp:As;return!t&&Cs(c,"iterate",oo),l.forEach((d,f)=>n.call(i,u(d),u(f),o))}};return et(s,t?{add:gu("add"),set:gu("set"),delete:gu("delete"),clear:gu("clear")}:{add(n){!e&&!lr(n)&&!pi(n)&&(n=ot(n));const i=ot(this);return mu(i).has.call(i,n)||(i.add(n),gn(i,"add",n,n)),this},set(n,i){!e&&!lr(i)&&!pi(i)&&(i=ot(i));const o=ot(this),{has:l,get:c}=mu(o);let u=l.call(o,n);u||(n=ot(n),u=l.call(o,n));const d=c.call(o,n);return o.set(n,i),u?Is(i,d)&&gn(o,"set",n,i):gn(o,"add",n,i),this},delete(n){const i=ot(this),{has:o,get:l}=mu(i);let c=o.call(i,n);c||(n=ot(n),c=o.call(i,n)),l&&l.call(i,n);const u=i.delete(n);return c&&gn(i,"delete",n,void 0),u},clear(){const n=ot(this),i=n.size!==0,o=n.clear();return i&&gn(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=uL(n,t,e)}),s}function gh(t,e){const s=dL(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(ct(s,n)&&n in r?s:r,n,i)}const hL={get:gh(!1,!1)},fL={get:gh(!1,!0)},pL={get:gh(!0,!1)},mL={get:gh(!0,!0)},S2=new WeakMap,E2=new WeakMap,T2=new WeakMap,k2=new WeakMap;function gL(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yL(t){return t.__v_skip||!Object.isExtensible(t)?0:gL(Xw(t))}function Co(t){return pi(t)?t:yh(t,!1,oL,hL,S2)}function Ig(t){return yh(t,!1,lL,fL,E2)}function Cg(t){return yh(t,!0,aL,pL,T2)}function vL(t){return yh(t,!0,cL,mL,k2)}function yh(t,e,s,r,n){if(!ft(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=n.get(t);if(i)return i;const o=yL(t);if(o===0)return t;const l=new Proxy(t,o===2?r:s);return n.set(t,l),l}function ai(t){return pi(t)?ai(t.__v_raw):!!(t&&t.__v_isReactive)}function pi(t){return!!(t&&t.__v_isReadonly)}function lr(t){return!!(t&&t.__v_isShallow)}function vh(t){return t?!!t.__v_raw:!1}function ot(t){const e=t&&t.__v_raw;return e?ot(e):t}function I2(t){return!ct(t,"__v_skip")&&Object.isExtensible(t)&&yg(t,"__v_skip",!0),t}const As=t=>ft(t)?Co(t):t,Qp=t=>ft(t)?Cg(t):t;function Qt(t){return t?t.__v_isRef===!0:!1}function Se(t){return C2(t,!1)}function xc(t){return C2(t,!0)}function C2(t,e){return Qt(t)?t:new _L(t,e)}class _L{constructor(e,s){this.dep=new ph,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:ot(e),this._value=s?e:As(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||lr(e)||pi(e);e=r?e:ot(e),Is(e,s)&&(this._rawValue=e,this._value=r?e:As(e),this.dep.trigger())}}function bL(t){t.dep&&t.dep.trigger()}function kn(t){return Qt(t)?t.value:t}function wL(t){return Le(t)?t():kn(t)}const SL={get:(t,e,s)=>e==="__v_raw"?t:kn(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return Qt(n)&&!Qt(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function Ag(t){return ai(t)?t:new Proxy(t,SL)}class EL{constructor(e){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new ph,{get:r,set:n}=e(s.track.bind(s),s.trigger.bind(s));this._get=r,this._set=n}get value(){return this._value=this._get()}set value(e){this._set(e)}}function A2(t){return new EL(t)}function TL(t){const e=ke(t)?new Array(t.length):{};for(const s in t)e[s]=P2(t,s);return e}class kL{constructor(e,s,r){this._object=e,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return tL(ot(this._object),this._key)}}class IL{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function CL(t,e,s){return Qt(t)?t:Le(t)?new IL(t):ft(t)&&arguments.length>1?P2(t,e,s):Se(t)}function P2(t,e,s){const r=t[e];return Qt(r)?r:new kL(t,e,s)}class AL{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new ph(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Kl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return h2(this,!0),!0}get value(){const e=this.dep.track();return m2(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function PL(t,e,s=!1){let r,n;return Le(t)?r=t:(r=t.get,n=t.set),new AL(r,n,s)}const xL={GET:"get",HAS:"has",ITERATE:"iterate"},LL={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},yu={},pd=new WeakMap;let Qn;function RL(){return Qn}function x2(t,e=!1,s=Qn){if(s){let r=pd.get(s);r||pd.set(s,r=[]),r.push(t)}}function NL(t,e,s=Ze){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:l,call:c}=s,u=N=>n?N:lr(N)||n===!1||n===0?yn(N,1):yn(N);let d,f,p,g,b=!1,k=!1;if(Qt(t)?(f=()=>t.value,b=lr(t)):ai(t)?(f=()=>u(t),b=!0):ke(t)?(k=!0,b=t.some(N=>ai(N)||lr(N)),f=()=>t.map(N=>{if(Qt(N))return N.value;if(ai(N))return u(N);if(Le(N))return c?c(N,2):N()})):Le(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){Ai();try{p()}finally{Pi()}}const N=Qn;Qn=d;try{return c?c(t,3,[g]):t(g)}finally{Qn=N}}:f=ls,e&&n){const N=f,D=n===!0?1/0:n;f=()=>yn(N(),D)}const L=u2(),V=()=>{d.stop(),L&&L.active&&uh(L.effects,d)};if(i&&e){const N=e;e=(...D)=>{N(...D),V()}}let R=k?new Array(t.length).fill(yu):yu;const E=N=>{if(!(!(d.flags&1)||!d.dirty&&!N))if(e){const D=d.run();if(n||b||(k?D.some((U,C)=>Is(U,R[C])):Is(D,R))){p&&p();const U=Qn;Qn=d;try{const C=[D,R===yu?void 0:k&&R[0]===yu?[]:R,g];c?c(e,3,C):e(...C),R=D}finally{Qn=U}}}else d.run()};return l&&l(E),d=new Gl(f),d.scheduler=o?()=>o(E,!1):E,g=N=>x2(N,!1,d),p=d.onStop=()=>{const N=pd.get(d);if(N){if(c)c(N,4);else for(const D of N)D();pd.delete(d)}},e?r?E(!0):R=d.run():o?o(E.bind(null,!0),!0):d.run(),V.pause=d.pause.bind(d),V.resume=d.resume.bind(d),V.stop=V,V}function yn(t,e=1/0,s){if(e<=0||!ft(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Qt(t))yn(t.value,e,s);else if(ke(t))for(let r=0;r<t.length;r++)yn(t[r],e,s);else if(Ii(t)||ro(t))t.forEach(r=>{yn(r,e,s)});else if(Cc(t)){for(const r in t)yn(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&yn(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const L2=[];function OL(t){L2.push(t)}function ML(){L2.pop()}function DL(t,e){}const $L={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},UL={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Da(t,e,s,r){try{return r?t(...r):t()}catch(n){Ao(n,e,s)}}function vr(t,e,s,r){if(Le(t)){const n=Da(t,e,s,r);return n&&dh(n)&&n.catch(i=>{Ao(i,e,s)}),n}if(ke(t)){const n=[];for(let i=0;i<t.length;i++)n.push(vr(t[i],e,s,r));return n}}function Ao(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ze;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const d=l.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,c,u)===!1)return}l=l.parent}if(i){Ai(),Da(i,null,10,[t,c,u]),Pi();return}}FL(t,s,n,r,o)}function FL(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const Vs=[];let jr=-1;const ia=[];let Xn=null,Ko=0;const R2=Promise.resolve();let md=null;function $a(t){const e=md||R2;return t?e.then(this?t.bind(this):t):e}function VL(t){let e=jr+1,s=Vs.length;for(;e<s;){const r=e+s>>>1,n=Vs[r],i=Xl(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function Pg(t){if(!(t.flags&1)){const e=Xl(t),s=Vs[Vs.length-1];!s||!(t.flags&2)&&e>=Xl(s)?Vs.push(t):Vs.splice(VL(e),0,t),t.flags|=1,N2()}}function N2(){md||(md=R2.then(O2))}function Ql(t){ke(t)?ia.push(...t):Xn&&t.id===-1?Xn.splice(Ko+1,0,t):t.flags&1||(ia.push(t),t.flags|=1),N2()}function Y0(t,e,s=jr+1){for(;s<Vs.length;s++){const r=Vs[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Vs.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function gd(t){if(ia.length){const e=[...new Set(ia)].sort((s,r)=>Xl(s)-Xl(r));if(ia.length=0,Xn){Xn.push(...e);return}for(Xn=e,Ko=0;Ko<Xn.length;Ko++){const s=Xn[Ko];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Xn=null,Ko=0}}const Xl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function O2(t){try{for(jr=0;jr<Vs.length;jr++){const e=Vs[jr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Da(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;jr<Vs.length;jr++){const e=Vs[jr];e&&(e.flags&=-2)}jr=-1,Vs.length=0,gd(),md=null,(Vs.length||ia.length)&&O2()}}let Yo,vu=[];function M2(t,e){var s,r;Yo=t,Yo?(Yo.enabled=!0,vu.forEach(({event:n,args:i})=>Yo.emit(n,...i)),vu=[]):typeof window<"u"&&window.HTMLElement&&!((r=(s=window.navigator)==null?void 0:s.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{M2(i,e)}),setTimeout(()=>{Yo||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,vu=[])},3e3)):vu=[]}let ts=null,_h=null;function Jl(t){const e=ts;return ts=t,_h=t&&t.type.__scopeId||null,e}function BL(t){_h=t}function qL(){_h=null}const jL=t=>Jt;function Jt(t,e=ts,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&im(-1);const i=Jl(e);let o;try{o=t(...n)}finally{Jl(i),r._d&&im(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Pe(t,e){if(ts===null)return t;const s=Oc(ts),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,l,c=Ze]=e[n];i&&(Le(i)&&(i={mounted:i,updated:i}),i.deep&&yn(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Hr(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(Ai(),vr(c,s,8,[t.el,l,t,e]),Pi())}}const D2=Symbol("_vte"),$2=t=>t.__isTeleport,Rl=t=>t&&(t.disabled||t.disabled===""),Q0=t=>t&&(t.defer||t.defer===""),X0=t=>typeof SVGElement<"u"&&t instanceof SVGElement,J0=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Xp=(t,e)=>{const s=t&&t.to;return Fe(s)?e?e(s):null:s},U2={name:"Teleport",__isTeleport:!0,process(t,e,s,r,n,i,o,l,c,u){const{mc:d,pc:f,pbc:p,o:{insert:g,querySelector:b,createText:k,createComment:L}}=u,V=Rl(e.props);let{shapeFlag:R,children:E,dynamicChildren:N}=e;if(t==null){const D=e.el=k(""),U=e.anchor=k("");g(D,s,r),g(U,s,r);const C=(_,x)=>{R&16&&(n&&n.isCE&&(n.ce._teleportTarget=_),d(E,_,x,n,i,o,l,c))},w=()=>{const _=e.target=Xp(e.props,b),x=F2(_,e,k,g);_&&(o!=="svg"&&X0(_)?o="svg":o!=="mathml"&&J0(_)&&(o="mathml"),V||(C(_,x),Vu(e,!1)))};V&&(C(s,U),Vu(e,!0)),Q0(e.props)?Xt(()=>{w(),e.el.__isMounted=!0},i):w()}else{if(Q0(e.props)&&!t.el.__isMounted){Xt(()=>{U2.process(t,e,s,r,n,i,o,l,c,u),delete t.el.__isMounted},i);return}e.el=t.el,e.targetStart=t.targetStart;const D=e.anchor=t.anchor,U=e.target=t.target,C=e.targetAnchor=t.targetAnchor,w=Rl(t.props),_=w?s:U,x=w?D:C;if(o==="svg"||X0(U)?o="svg":(o==="mathml"||J0(U))&&(o="mathml"),N?(p(t.dynamicChildren,N,_,n,i,o,l),Vg(t,e,!0)):c||f(t,e,_,x,n,i,o,l,!1),V)w?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):_u(e,s,D,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const P=e.target=Xp(e.props,b);P&&_u(e,P,null,u,0)}else w&&_u(e,U,C,u,1);Vu(e,V)}},remove(t,e,s,{um:r,o:{remove:n}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:d,target:f,props:p}=t;if(f&&(n(u),n(d)),i&&n(c),o&16){const g=i||!Rl(p);for(let b=0;b<l.length;b++){const k=l[b];r(k,e,s,g,!!k.dynamicChildren)}}},move:_u,hydrate:HL};function _u(t,e,s,{o:{insert:r},m:n},i=2){i===0&&r(t.targetAnchor,e,s);const{el:o,anchor:l,shapeFlag:c,children:u,props:d}=t,f=i===2;if(f&&r(o,e,s),(!f||Rl(d))&&c&16)for(let p=0;p<u.length;p++)n(u[p],e,s,2);f&&r(l,e,s)}function HL(t,e,s,r,n,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:d}},f){const p=e.target=Xp(e.props,c);if(p){const g=Rl(e.props),b=p._lpa||p.firstChild;if(e.shapeFlag&16)if(g)e.anchor=f(o(t),e,l(t),s,r,n,i),e.targetStart=b,e.targetAnchor=b&&o(b);else{e.anchor=o(t);let k=b;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||F2(p,e,d,u),f(b&&o(b),e,p,s,r,n,i)}Vu(e,g)}return e.anchor&&o(e.anchor)}const Jp=U2;function Vu(t,e){const s=t.ctx;if(s&&s.ut){let r,n;for(e?(r=t.el,n=t.anchor):(r=t.targetStart,n=t.targetAnchor);r&&r!==n;)r.nodeType===1&&r.setAttribute("data-v-owner",s.uid),r=r.nextSibling;s.ut()}}function F2(t,e,s,r){const n=e.targetStart=s(""),i=e.targetAnchor=s("");return n[D2]=i,t&&(r(n,t),r(i,t)),i}const Jn=Symbol("_leaveCb"),bu=Symbol("_enterCb");function xg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return br(()=>{t.isMounted=!0}),Rc(()=>{t.isUnmounting=!0}),t}const dr=[Function,Array],Lg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:dr,onEnter:dr,onAfterEnter:dr,onEnterCancelled:dr,onBeforeLeave:dr,onLeave:dr,onAfterLeave:dr,onLeaveCancelled:dr,onBeforeAppear:dr,onAppear:dr,onAfterAppear:dr,onAppearCancelled:dr},V2=t=>{const e=t.subTree;return e.component?V2(e.component):e},WL={name:"BaseTransition",props:Lg,setup(t,{slots:e}){const s=ys(),r=xg();return()=>{const n=e.default&&bh(e.default(),!0);if(!n||!n.length)return;const i=B2(n),o=ot(t),{mode:l}=o;if(r.isLeaving)return op(i);const c=Z0(i);if(!c)return op(i);let u=ha(c,o,r,s,f=>u=f);c.type!==Kt&&Ln(c,u);let d=s.subTree&&Z0(s.subTree);if(d&&d.type!==Kt&&!kr(c,d)&&V2(s).type!==Kt){let f=ha(d,o,r,s);if(Ln(d,f),l==="out-in"&&c.type!==Kt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,d=void 0},op(i);l==="in-out"&&c.type!==Kt?f.delayLeave=(p,g,b)=>{const k=j2(r,d);k[String(d.key)]=d,p[Jn]=()=>{g(),p[Jn]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function B2(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Kt){e=s;break}}return e}const q2=WL;function j2(t,e){const{leavingVNodes:s}=t;let r=s.get(e.type);return r||(r=Object.create(null),s.set(e.type,r)),r}function ha(t,e,s,r,n){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:b,onLeaveCancelled:k,onBeforeAppear:L,onAppear:V,onAfterAppear:R,onAppearCancelled:E}=e,N=String(t.key),D=j2(s,t),U=(_,x)=>{_&&vr(_,r,9,x)},C=(_,x)=>{const P=x[1];U(_,x),ke(_)?_.every(O=>O.length<=1)&&P():_.length<=1&&P()},w={mode:o,persisted:l,beforeEnter(_){let x=c;if(!s.isMounted)if(i)x=L||c;else return;_[Jn]&&_[Jn](!0);const P=D[N];P&&kr(t,P)&&P.el[Jn]&&P.el[Jn](),U(x,[_])},enter(_){let x=u,P=d,O=f;if(!s.isMounted)if(i)x=V||u,P=R||d,O=E||f;else return;let M=!1;const ae=_[bu]=fe=>{M||(M=!0,fe?U(O,[_]):U(P,[_]),w.delayedLeave&&w.delayedLeave(),_[bu]=void 0)};x?C(x,[_,ae]):ae()},leave(_,x){const P=String(t.key);if(_[bu]&&_[bu](!0),s.isUnmounting)return x();U(p,[_]);let O=!1;const M=_[Jn]=ae=>{O||(O=!0,x(),ae?U(k,[_]):U(b,[_]),_[Jn]=void 0,D[P]===t&&delete D[P])};D[P]=t,g?C(g,[_,M]):M()},clone(_){const x=ha(_,e,s,r,n);return n&&n(x),x}};return w}function op(t){if(Lc(t))return t=en(t),t.children=null,t}function Z0(t){if(!Lc(t))return $2(t.type)&&t.children?B2(t.children):t;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&Le(s.default))return s.default()}}function Ln(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ln(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function bh(t,e=!1,s){let r=[],n=0;for(let i=0;i<t.length;i++){let o=t[i];const l=s==null?o.key:String(s)+String(o.key!=null?o.key:i);o.type===he?(o.patchFlag&128&&n++,r=r.concat(bh(o.children,e,l))):(e||o.type!==Kt)&&r.push(l!=null?en(o,{key:l}):o)}if(n>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function xi(t,e){return Le(t)?et({name:t.name},e,{setup:t}):t}function zL(){const t=ys();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Rg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function GL(t){const e=ys(),s=xc(null);if(e){const n=e.refs===Ze?e.refs={}:e.refs;Object.defineProperty(n,t,{enumerable:!0,get:()=>s.value,set:i=>s.value=i})}return s}function Zl(t,e,s,r,n=!1){if(ke(t)){t.forEach((b,k)=>Zl(b,e&&(ke(e)?e[k]:e),s,r,n));return}if(li(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Zl(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?Oc(r.component):r.el,o=n?null:i,{i:l,r:c}=t,u=e&&e.r,d=l.refs===Ze?l.refs={}:l.refs,f=l.setupState,p=ot(f),g=f===Ze?()=>!1:b=>ct(p,b);if(u!=null&&u!==c&&(Fe(u)?(d[u]=null,g(u)&&(f[u]=null)):Qt(u)&&(u.value=null)),Le(c))Da(c,l,12,[o,d]);else{const b=Fe(c),k=Qt(c);if(b||k){const L=()=>{if(t.f){const V=b?g(c)?f[c]:d[c]:c.value;n?ke(V)&&uh(V,i):ke(V)?V.includes(i)||V.push(i):b?(d[c]=[i],g(c)&&(f[c]=d[c])):(c.value=[i],t.k&&(d[t.k]=c.value))}else b?(d[c]=o,g(c)&&(f[c]=o)):k&&(c.value=o,t.k&&(d[t.k]=o))};o?(L.id=-1,Xt(L,s)):L()}}}let e1=!1;const Ho=()=>{e1||(console.error("Hydration completed but contains mismatches."),e1=!0)},KL=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",YL=t=>t.namespaceURI.includes("MathML"),wu=t=>{if(t.nodeType===1){if(KL(t))return"svg";if(YL(t))return"mathml"}},ra=t=>t.nodeType===8;function QL(t){const{mt:e,p:s,o:{patchProp:r,createText:n,nextSibling:i,parentNode:o,remove:l,insert:c,createComment:u}}=t,d=(E,N)=>{if(!N.hasChildNodes()){s(null,E,N),gd(),N._vnode=E;return}f(N.firstChild,E,null,null,null),gd(),N._vnode=E},f=(E,N,D,U,C,w=!1)=>{w=w||!!N.dynamicChildren;const _=ra(E)&&E.data==="[",x=()=>k(E,N,D,U,C,_),{type:P,ref:O,shapeFlag:M,patchFlag:ae}=N;let fe=E.nodeType;N.el=E,ae===-2&&(w=!1,N.dynamicChildren=null);let de=null;switch(P){case In:fe!==3?N.children===""?(c(N.el=n(""),o(E),E),de=E):de=x():(E.data!==N.children&&(Ho(),E.data=N.children),de=i(E));break;case Kt:R(E)?(de=i(E),V(N.el=E.content.firstChild,E,D)):fe!==8||_?de=x():de=i(E);break;case lo:if(_&&(E=i(E),fe=E.nodeType),fe===1||fe===3){de=E;const Z=!N.children.length;for(let ue=0;ue<N.staticCount;ue++)Z&&(N.children+=de.nodeType===1?de.outerHTML:de.data),ue===N.staticCount-1&&(N.anchor=de),de=i(de);return _?i(de):de}else x();break;case he:_?de=b(E,N,D,U,C,w):de=x();break;default:if(M&1)(fe!==1||N.type.toLowerCase()!==E.tagName.toLowerCase())&&!R(E)?de=x():de=p(E,N,D,U,C,w);else if(M&6){N.slotScopeIds=C;const Z=o(E);if(_?de=L(E):ra(E)&&E.data==="teleport start"?de=L(E,E.data,"teleport end"):de=i(E),e(N,Z,null,D,U,wu(Z),w),li(N)&&!N.type.__asyncResolved){let ue;_?(ue=xe(he),ue.anchor=de?de.previousSibling:Z.lastChild):ue=E.nodeType===3?se(""):xe("div"),ue.el=E,N.component.subTree=ue}}else M&64?fe!==8?de=x():de=N.type.hydrate(E,N,D,U,C,w,t,g):M&128&&(de=N.type.hydrate(E,N,D,U,wu(o(E)),C,w,t,f))}return O!=null&&Zl(O,null,U,N),de},p=(E,N,D,U,C,w)=>{w=w||!!N.dynamicChildren;const{type:_,props:x,patchFlag:P,shapeFlag:O,dirs:M,transition:ae}=N,fe=_==="input"||_==="option";if(fe||P!==-1){M&&Hr(N,null,D,"created");let de=!1;if(R(E)){de=fS(null,ae)&&D&&D.vnode.props&&D.vnode.props.appear;const ue=E.content.firstChild;de&&ae.beforeEnter(ue),V(ue,E,D),N.el=E=ue}if(O&16&&!(x&&(x.innerHTML||x.textContent))){let ue=g(E.firstChild,N,E,D,U,C,w);for(;ue;){Su(E,1)||Ho();const $e=ue;ue=ue.nextSibling,l($e)}}else if(O&8){let ue=N.children;ue[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(ue=ue.slice(1)),E.textContent!==ue&&(Su(E,0)||Ho(),E.textContent=N.children)}if(x){if(fe||!w||P&48){const ue=E.tagName.includes("-");for(const $e in x)(fe&&($e.endsWith("value")||$e==="indeterminate")||ki($e)&&!Tn($e)||$e[0]==="."||ue)&&r(E,$e,null,x[$e],void 0,D)}else if(x.onClick)r(E,"onClick",null,x.onClick,void 0,D);else if(P&4&&ai(x.style))for(const ue in x.style)x.style[ue]}let Z;(Z=x&&x.onVnodeBeforeMount)&&zs(Z,D,N),M&&Hr(N,null,D,"beforeMount"),((Z=x&&x.onVnodeMounted)||M||de)&&SS(()=>{Z&&zs(Z,D,N),de&&ae.enter(E),M&&Hr(N,null,D,"mounted")},U)}return E.nextSibling},g=(E,N,D,U,C,w,_)=>{_=_||!!N.dynamicChildren;const x=N.children,P=x.length;for(let O=0;O<P;O++){const M=_?x[O]:x[O]=Ks(x[O]),ae=M.type===In;E?(ae&&!_&&O+1<P&&Ks(x[O+1]).type===In&&(c(n(E.data.slice(M.children.length)),D,i(E)),E.data=M.children),E=f(E,M,U,C,w,_)):ae&&!M.children?c(M.el=n(""),D):(Su(D,1)||Ho(),s(null,M,D,null,U,C,wu(D),w))}return E},b=(E,N,D,U,C,w)=>{const{slotScopeIds:_}=N;_&&(C=C?C.concat(_):_);const x=o(E),P=g(i(E),N,x,D,U,C,w);return P&&ra(P)&&P.data==="]"?i(N.anchor=P):(Ho(),c(N.anchor=u("]"),x,P),P)},k=(E,N,D,U,C,w)=>{if(Su(E.parentElement,1)||Ho(),N.el=null,w){const P=L(E);for(;;){const O=i(E);if(O&&O!==P)l(O);else break}}const _=i(E),x=o(E);return l(E),s(null,N,x,_,D,U,wu(x),C),D&&(D.vnode.el=N.el,kh(D,N.el)),_},L=(E,N="[",D="]")=>{let U=0;for(;E;)if(E=i(E),E&&ra(E)&&(E.data===N&&U++,E.data===D)){if(U===0)return i(E);U--}return E},V=(E,N,D)=>{const U=N.parentNode;U&&U.replaceChild(E,N);let C=D;for(;C;)C.vnode.el===N&&(C.vnode.el=C.subTree.el=E),C=C.parent},R=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[d,f]}const t1="data-allow-mismatch",XL={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Su(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(t1);)t=t.parentElement;const s=t&&t.getAttribute(t1);if(s==null)return!1;if(s==="")return!0;{const r=s.split(",");return e===0&&r.includes("children")?!0:s.split(",").includes(XL[e])}}const JL=Ac().requestIdleCallback||(t=>setTimeout(t,1)),ZL=Ac().cancelIdleCallback||(t=>clearTimeout(t)),eR=(t=1e4)=>e=>{const s=JL(e,{timeout:t});return()=>ZL(s)};function tR(t){const{top:e,left:s,bottom:r,right:n}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:o}=window;return(e>0&&e<i||r>0&&r<i)&&(s>0&&s<o||n>0&&n<o)}const sR=t=>(e,s)=>{const r=new IntersectionObserver(n=>{for(const i of n)if(i.isIntersecting){r.disconnect(),e();break}},t);return s(n=>{if(n instanceof Element){if(tR(n))return e(),r.disconnect(),!1;r.observe(n)}}),()=>r.disconnect()},rR=t=>e=>{if(t){const s=matchMedia(t);if(s.matches)e();else return s.addEventListener("change",e,{once:!0}),()=>s.removeEventListener("change",e)}},nR=(t=[])=>(e,s)=>{Fe(t)&&(t=[t]);let r=!1;const n=o=>{r||(r=!0,i(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},i=()=>{s(o=>{for(const l of t)o.removeEventListener(l,n)})};return s(o=>{for(const l of t)o.addEventListener(l,n,{once:!0})}),i};function iR(t,e){if(ra(t)&&t.data==="["){let s=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(ra(r))if(r.data==="]"){if(--s===0)break}else r.data==="["&&s++;r=r.nextSibling}}else e(t)}const li=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function oR(t){Le(t)&&(t={loader:t});const{loader:e,loadingComponent:s,errorComponent:r,delay:n=200,hydrate:i,timeout:o,suspensible:l=!0,onError:c}=t;let u=null,d,f=0;const p=()=>(f++,u=null,g()),g=()=>{let b;return u||(b=u=e().catch(k=>{if(k=k instanceof Error?k:new Error(String(k)),c)return new Promise((L,V)=>{c(k,()=>L(p()),()=>V(k),f+1)});throw k}).then(k=>b!==u&&u?u:(k&&(k.__esModule||k[Symbol.toStringTag]==="Module")&&(k=k.default),d=k,k)))};return xi({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(b,k,L){const V=i?()=>{const R=i(L,E=>iR(b,E));R&&(k.bum||(k.bum=[])).push(R)}:L;d?V():g().then(()=>!k.isUnmounted&&V())},get __asyncResolved(){return d},setup(){const b=Zt;if(Rg(b),d)return()=>ap(d,b);const k=E=>{u=null,Ao(E,b,13,!r)};if(l&&b.suspense||fa)return g().then(E=>()=>ap(E,b)).catch(E=>(k(E),()=>r?xe(r,{error:E}):null));const L=Se(!1),V=Se(),R=Se(!!n);return n&&setTimeout(()=>{R.value=!1},n),o!=null&&setTimeout(()=>{if(!L.value&&!V.value){const E=new Error(`Async component timed out after ${o}ms.`);k(E),V.value=E}},o),g().then(()=>{L.value=!0,b.parent&&Lc(b.parent.vnode)&&b.parent.update()}).catch(E=>{k(E),V.value=E}),()=>{if(L.value&&d)return ap(d,b);if(V.value&&r)return xe(r,{error:V.value});if(s&&!R.value)return xe(s)}}})}function ap(t,e){const{ref:s,props:r,children:n,ce:i}=e.vnode,o=xe(t,r,n);return o.ref=s,o.ce=i,delete e.vnode.ce,o}const Lc=t=>t.type.__isKeepAlive,aR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const s=ys(),r=s.ctx;if(!r.renderer)return()=>{const R=e.default&&e.default();return R&&R.length===1?R[0]:R};const n=new Map,i=new Set;let o=null;const l=s.suspense,{renderer:{p:c,m:u,um:d,o:{createElement:f}}}=r,p=f("div");r.activate=(R,E,N,D,U)=>{const C=R.component;u(R,E,N,0,l),c(C.vnode,R,E,N,C,l,D,R.slotScopeIds,U),Xt(()=>{C.isDeactivated=!1,C.a&&io(C.a);const w=R.props&&R.props.onVnodeMounted;w&&zs(w,C.parent,R)},l)},r.deactivate=R=>{const E=R.component;vd(E.m),vd(E.a),u(R,p,null,1,l),Xt(()=>{E.da&&io(E.da);const N=R.props&&R.props.onVnodeUnmounted;N&&zs(N,E.parent,R),E.isDeactivated=!0},l)};function g(R){lp(R),d(R,s,l,!0)}function b(R){n.forEach((E,N)=>{const D=um(E.type);D&&!R(D)&&k(N)})}function k(R){const E=n.get(R);E&&(!o||!kr(E,o))?g(E):o&&lp(o),n.delete(R),i.delete(R)}fr(()=>[t.include,t.exclude],([R,E])=>{R&&b(N=>vl(R,N)),E&&b(N=>!vl(E,N))},{flush:"post",deep:!0});let L=null;const V=()=>{L!=null&&(_d(s.subTree.type)?Xt(()=>{n.set(L,Eu(s.subTree))},s.subTree.suspense):n.set(L,Eu(s.subTree)))};return br(V),Sh(V),Rc(()=>{n.forEach(R=>{const{subTree:E,suspense:N}=s,D=Eu(E);if(R.type===D.type&&R.key===D.key){lp(D);const U=D.component.da;U&&Xt(U,N);return}g(R)})}),()=>{if(L=null,!e.default)return o=null;const R=e.default(),E=R[0];if(R.length>1)return o=null,R;if(!Rn(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return o=null,E;let N=Eu(E);if(N.type===Kt)return o=null,N;const D=N.type,U=um(li(N)?N.type.__asyncResolved||{}:D),{include:C,exclude:w,max:_}=t;if(C&&(!U||!vl(C,U))||w&&U&&vl(w,U))return N.shapeFlag&=-257,o=N,E;const x=N.key==null?D:N.key,P=n.get(x);return N.el&&(N=en(N),E.shapeFlag&128&&(E.ssContent=N)),L=x,P?(N.el=P.el,N.component=P.component,N.transition&&Ln(N,N.transition),N.shapeFlag|=512,i.delete(x),i.add(x)):(i.add(x),_&&i.size>parseInt(_,10)&&k(i.values().next().value)),N.shapeFlag|=256,o=N,_d(E.type)?E:N}}},lR=aR;function vl(t,e){return ke(t)?t.some(s=>vl(s,e)):Fe(t)?t.split(",").includes(e):Qw(t)?(t.lastIndex=0,t.test(e)):!1}function H2(t,e){z2(t,"a",e)}function W2(t,e){z2(t,"da",e)}function z2(t,e,s=Zt){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(wh(e,r,s),s){let n=s.parent;for(;n&&n.parent;)Lc(n.parent.vnode)&&cR(r,e,s,n),n=n.parent}}function cR(t,e,s,r){const n=wh(e,t,r,!0);Li(()=>{uh(r[e],n)},s)}function lp(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Eu(t){return t.shapeFlag&128?t.ssContent:t}function wh(t,e,s=Zt,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ai();const l=fo(s),c=vr(e,s,t,o);return l(),Pi(),c});return r?n.unshift(i):n.push(i),i}}const Un=t=>(e,s=Zt)=>{(!fa||t==="sp")&&wh(t,(...r)=>e(...r),s)},Ng=Un("bm"),br=Un("m"),Og=Un("bu"),Sh=Un("u"),Rc=Un("bum"),Li=Un("um"),G2=Un("sp"),K2=Un("rtg"),Y2=Un("rtc");function Q2(t,e=Zt){wh("ec",t,e)}const Mg="components",uR="directives";function Ht(t,e){return Dg(Mg,t,!0,e)||t}const X2=Symbol.for("v-ndc");function Eh(t){return Fe(t)?Dg(Mg,t,!1)||t:t||X2}function dR(t){return Dg(uR,t)}function Dg(t,e,s=!0,r=!1){const n=ts||Zt;if(n){const i=n.type;if(t===Mg){const l=um(i,!1);if(l&&(l===e||l===It(e)||l===Ci(It(e))))return i}const o=s1(n[t]||i[t],e)||s1(n.appContext[t],e);return!o&&r?i:o}}function s1(t,e){return t&&(t[e]||t[It(e)]||t[Ci(It(e))])}function be(t,e,s,r){let n;const i=s&&s[r],o=ke(t);if(o||Fe(t)){const l=o&&ai(t);let c=!1;l&&(c=!lr(t),t=mh(t)),n=new Array(t.length);for(let u=0,d=t.length;u<d;u++)n[u]=e(c?As(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,i&&i[l])}else if(ft(t))if(t[Symbol.iterator])n=Array.from(t,(l,c)=>e(l,c,void 0,i&&i[c]));else{const l=Object.keys(t);n=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];n[c]=e(t[d],d,c,i&&i[c])}}else n=[];return s&&(s[r]=n),n}function hR(t,e){for(let s=0;s<e.length;s++){const r=e[s];if(ke(r))for(let n=0;n<r.length;n++)t[r[n].name]=r[n].fn;else r&&(t[r.name]=r.key?(...n)=>{const i=r.fn(...n);return i&&(i.key=r.key),i}:r.fn)}return t}function fR(t,e,s={},r,n){if(ts.ce||ts.parent&&li(ts.parent)&&ts.parent.ce)return e!=="default"&&(s.name=e),v(),Yt(he,null,[xe("slot",s,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),v();const o=i&&$g(i(s)),l=s.key||o&&o.key,c=Yt(he,{key:(l&&!js(l)?l:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!n&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function $g(t){return t.some(e=>Rn(e)?!(e.type===Kt||e.type===he&&!$g(e.children)):!0)?t:null}function pR(t,e){const s={};for(const r in t)s[e&&/[A-Z]/.test(r)?`on:${r}`:no(r)]=t[r];return s}const Zp=t=>t?PS(t)?Oc(t):Zp(t.parent):null,Nl=et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zp(t.parent),$root:t=>Zp(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ug(t),$forceUpdate:t=>t.f||(t.f=()=>{Pg(t.update)}),$nextTick:t=>t.n||(t.n=$a.bind(t.proxy)),$watch:t=>zR.bind(t)}),cp=(t,e)=>t!==Ze&&!t.__isScriptSetup&&ct(t,e),em={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(cp(r,e))return o[e]=1,r[e];if(n!==Ze&&ct(n,e))return o[e]=2,n[e];if((u=t.propsOptions[0])&&ct(u,e))return o[e]=3,i[e];if(s!==Ze&&ct(s,e))return o[e]=4,s[e];tm&&(o[e]=0)}}const d=Nl[e];let f,p;if(d)return e==="$attrs"&&Cs(t.attrs,"get",""),d(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==Ze&&ct(s,e))return o[e]=4,s[e];if(p=c.config.globalProperties,ct(p,e))return p[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return cp(n,e)?(n[e]=s,!0):r!==Ze&&ct(r,e)?(r[e]=s,!0):ct(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,propsOptions:i}},o){let l;return!!s[o]||t!==Ze&&ct(t,o)||cp(e,o)||(l=i[0])&&ct(l,o)||ct(r,o)||ct(Nl,o)||ct(n.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ct(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}},mR=et({},em,{get(t,e){if(e!==Symbol.unscopables)return em.get(t,e,t)},has(t,e){return e[0]!=="_"&&!vg(e)}});function gR(){return null}function yR(){return null}function vR(t){}function _R(t){}function bR(){return null}function wR(){}function SR(t,e){return null}function ER(){return J2().slots}function TR(){return J2().attrs}function J2(){const t=ys();return t.setupContext||(t.setupContext=RS(t))}function ec(t){return ke(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}function kR(t,e){const s=ec(t);for(const r in e){if(r.startsWith("__skip"))continue;let n=s[r];n?ke(n)||Le(n)?n=s[r]={type:n,default:e[r]}:n.default=e[r]:n===null&&(n=s[r]={default:e[r]}),n&&e[`__skip_${r}`]&&(n.skipFactory=!0)}return s}function IR(t,e){return!t||!e?t||e:ke(t)&&ke(e)?t.concat(e):et({},ec(t),ec(e))}function CR(t,e){const s={};for(const r in t)e.includes(r)||Object.defineProperty(s,r,{enumerable:!0,get:()=>t[r]});return s}function AR(t){const e=ys();let s=t();return am(),dh(s)&&(s=s.catch(r=>{throw fo(e),r})),[s,()=>fo(e)]}let tm=!0;function PR(t){const e=Ug(t),s=t.proxy,r=t.ctx;tm=!1,e.beforeCreate&&r1(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:b,activated:k,deactivated:L,beforeDestroy:V,beforeUnmount:R,destroyed:E,unmounted:N,render:D,renderTracked:U,renderTriggered:C,errorCaptured:w,serverPrefetch:_,expose:x,inheritAttrs:P,components:O,directives:M,filters:ae}=e;if(u&&xR(u,r,null),o)for(const Z in o){const ue=o[Z];Le(ue)&&(r[Z]=ue.bind(s))}if(n){const Z=n.call(s,s);ft(Z)&&(t.data=Co(Z))}if(tm=!0,i)for(const Z in i){const ue=i[Z],$e=Le(ue)?ue.bind(s,s):Le(ue.get)?ue.get.bind(s,s):ls,_e=!Le(ue)&&Le(ue.set)?ue.set.bind(s):ls,Oe=oe({get:$e,set:_e});Object.defineProperty(r,Z,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:Ve=>Oe.value=Ve})}if(l)for(const Z in l)Z2(l[Z],r,s,Z);if(c){const Z=Le(c)?c.call(s):c;Reflect.ownKeys(Z).forEach(ue=>{Ol(ue,Z[ue])})}d&&r1(d,t,"c");function de(Z,ue){ke(ue)?ue.forEach($e=>Z($e.bind(s))):ue&&Z(ue.bind(s))}if(de(Ng,f),de(br,p),de(Og,g),de(Sh,b),de(H2,k),de(W2,L),de(Q2,w),de(Y2,U),de(K2,C),de(Rc,R),de(Li,N),de(G2,_),ke(x))if(x.length){const Z=t.exposed||(t.exposed={});x.forEach(ue=>{Object.defineProperty(Z,ue,{get:()=>s[ue],set:$e=>s[ue]=$e})})}else t.exposed||(t.exposed={});D&&t.render===ls&&(t.render=D),P!=null&&(t.inheritAttrs=P),O&&(t.components=O),M&&(t.directives=M),_&&Rg(t)}function xR(t,e,s=ls){ke(t)&&(t=sm(t));for(const r in t){const n=t[r];let i;ft(n)?"default"in n?i=Xs(n.from||r,n.default,!0):i=Xs(n.from||r):i=Xs(n),Qt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function r1(t,e,s){vr(ke(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function Z2(t,e,s,r){let n=r.includes(".")?vS(s,r):()=>s[r];if(Fe(t)){const i=e[t];Le(i)&&fr(n,i)}else if(Le(t))fr(n,t.bind(s));else if(ft(t))if(ke(t))t.forEach(i=>Z2(i,e,s,r));else{const i=Le(t.handler)?t.handler.bind(s):e[t.handler];Le(i)&&fr(n,i,t)}}function Ug(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!n.length&&!s&&!r?c=e:(c={},n.length&&n.forEach(u=>yd(c,u,o,!0)),yd(c,e,o)),ft(e)&&i.set(e,c),c}function yd(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&yd(t,i,s,!0),n&&n.forEach(o=>yd(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const l=LR[o]||s&&s[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const LR={data:n1,props:i1,emits:i1,methods:_l,computed:_l,beforeCreate:$s,created:$s,beforeMount:$s,mounted:$s,beforeUpdate:$s,updated:$s,beforeDestroy:$s,beforeUnmount:$s,destroyed:$s,unmounted:$s,activated:$s,deactivated:$s,errorCaptured:$s,serverPrefetch:$s,components:_l,directives:_l,watch:NR,provide:n1,inject:RR};function n1(t,e){return e?t?function(){return et(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function RR(t,e){return _l(sm(t),sm(e))}function sm(t){if(ke(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function $s(t,e){return t?[...new Set([].concat(t,e))]:e}function _l(t,e){return t?et(Object.create(null),t,e):e}function i1(t,e){return t?ke(t)&&ke(e)?[...new Set([...t,...e])]:et(Object.create(null),ec(t),ec(e??{})):e}function NR(t,e){if(!t)return e;if(!e)return t;const s=et(Object.create(null),t);for(const r in e)s[r]=$s(t[r],e[r]);return s}function eS(){return{app:null,config:{isNativeTag:sa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OR=0;function MR(t,e){return function(r,n=null){Le(r)||(r=et({},r)),n!=null&&!ft(n)&&(n=null);const i=eS(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:OR++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:OS,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&Le(d.install)?(o.add(d),d.install(u,...f)):Le(d)&&(o.add(d),d(u,...f))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,f){return f?(i.components[d]=f,u):i.components[d]},directive(d,f){return f?(i.directives[d]=f,u):i.directives[d]},mount(d,f,p){if(!c){const g=u._ceVNode||xe(r,n);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),f&&e?e(g,d):t(g,d,p),c=!0,u._container=d,d.__vue_app__=u,Oc(g.component)}},onUnmount(d){l.push(d)},unmount(){c&&(vr(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,f){return i.provides[d]=f,u},runWithContext(d){const f=ao;ao=u;try{return d()}finally{ao=f}}};return u}}let ao=null;function Ol(t,e){if(Zt){let s=Zt.provides;const r=Zt.parent&&Zt.parent.provides;r===s&&(s=Zt.provides=Object.create(r)),s[t]=e}}function Xs(t,e,s=!1){const r=Zt||ts;if(r||ao){const n=ao?ao._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&Le(e)?e.call(r&&r.proxy):e}}function DR(){return!!(Zt||ts||ao)}const tS={},sS=()=>Object.create(tS),rS=t=>Object.getPrototypeOf(t)===tS;function $R(t,e,s,r=!1){const n={},i=sS();t.propsDefaults=Object.create(null),nS(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Ig(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function UR(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,l=ot(n),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Th(t.emitsOptions,p))continue;const g=e[p];if(c)if(ct(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const b=It(p);n[b]=rm(c,l,b,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{nS(t,e,n,i)&&(u=!0);let d;for(const f in l)(!e||!ct(e,f)&&((d=xs(f))===f||!ct(e,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(n[f]=rm(c,l,f,void 0,t,!0)):delete n[f]);if(i!==l)for(const f in i)(!e||!ct(e,f))&&(delete i[f],u=!0)}u&&gn(t.attrs,"set","")}function nS(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Tn(c))continue;const u=e[c];let d;n&&ct(n,d=It(c))?!i||!i.includes(d)?s[d]=u:(l||(l={}))[d]=u:Th(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=ot(s),u=l||Ze;for(let d=0;d<i.length;d++){const f=i[d];s[f]=rm(n,c,f,u[f],t,!ct(u,f))}}return o}function rm(t,e,s,r,n,i){const o=t[s];if(o!=null){const l=ct(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Le(c)){const{propsDefaults:u}=n;if(s in u)r=u[s];else{const d=fo(n);r=u[s]=c.call(null,e),d()}}else r=c;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===xs(s))&&(r=!0))}return r}const FR=new WeakMap;function iS(t,e,s=!1){const r=s?FR:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},l=[];let c=!1;if(!Le(t)){const d=f=>{c=!0;const[p,g]=iS(f,e,!0);et(o,p),g&&l.push(...g)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return ft(t)&&r.set(t,so),so;if(ke(i))for(let d=0;d<i.length;d++){const f=It(i[d]);o1(f)&&(o[f]=Ze)}else if(i)for(const d in i){const f=It(d);if(o1(f)){const p=i[d],g=o[f]=ke(p)||Le(p)?{type:p}:et({},p),b=g.type;let k=!1,L=!0;if(ke(b))for(let V=0;V<b.length;++V){const R=b[V],E=Le(R)&&R.name;if(E==="Boolean"){k=!0;break}else E==="String"&&(L=!1)}else k=Le(b)&&b.name==="Boolean";g[0]=k,g[1]=L,(k||ct(g,"default"))&&l.push(f)}}const u=[o,l];return ft(t)&&r.set(t,u),u}function o1(t){return t[0]!=="$"&&!Tn(t)}const oS=t=>t[0]==="_"||t==="$stable",Fg=t=>ke(t)?t.map(Ks):[Ks(t)],VR=(t,e,s)=>{if(e._n)return e;const r=Jt((...n)=>Fg(e(...n)),s);return r._c=!1,r},aS=(t,e,s)=>{const r=t._ctx;for(const n in t){if(oS(n))continue;const i=t[n];if(Le(i))e[n]=VR(n,i,r);else if(i!=null){const o=Fg(i);e[n]=()=>o}}},lS=(t,e)=>{const s=Fg(e);t.slots.default=()=>s},cS=(t,e,s)=>{for(const r in e)(s||r!=="_")&&(t[r]=e[r])},BR=(t,e,s)=>{const r=t.slots=sS();if(t.vnode.shapeFlag&32){const n=e._;n?(cS(r,e,s),s&&yg(r,"_",n,!0)):aS(e,r)}else e&&lS(t,e)},qR=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=Ze;if(r.shapeFlag&32){const l=e._;l?s&&l===1?i=!1:cS(n,e,s):(i=!e.$stable,aS(e,n)),o=e}else e&&(lS(t,e),o={default:1});if(i)for(const l in n)!oS(l)&&o[l]==null&&delete n[l]},Xt=SS;function uS(t){return hS(t)}function dS(t){return hS(t,QL)}function hS(t,e){const s=Ac();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=ls,insertStaticContent:b}=t,k=(A,I,j,W=null,z=null,Y=null,ee=void 0,$=null,B=!!I.dynamicChildren)=>{if(A===I)return;A&&!kr(A,I)&&(W=te(A),Ve(A,z,Y,!0),A=null),I.patchFlag===-2&&(B=!1,I.dynamicChildren=null);const{type:q,ref:re,shapeFlag:le}=I;switch(q){case In:L(A,I,j,W);break;case Kt:V(A,I,j,W);break;case lo:A==null&&R(I,j,W,ee);break;case he:O(A,I,j,W,z,Y,ee,$,B);break;default:le&1?D(A,I,j,W,z,Y,ee,$,B):le&6?M(A,I,j,W,z,Y,ee,$,B):(le&64||le&128)&&q.process(A,I,j,W,z,Y,ee,$,B,Te)}re!=null&&z&&Zl(re,A&&A.ref,Y,I||A,!I)},L=(A,I,j,W)=>{if(A==null)r(I.el=l(I.children),j,W);else{const z=I.el=A.el;I.children!==A.children&&u(z,I.children)}},V=(A,I,j,W)=>{A==null?r(I.el=c(I.children||""),j,W):I.el=A.el},R=(A,I,j,W)=>{[A.el,A.anchor]=b(A.children,I,j,W,A.el,A.anchor)},E=({el:A,anchor:I},j,W)=>{let z;for(;A&&A!==I;)z=p(A),r(A,j,W),A=z;r(I,j,W)},N=({el:A,anchor:I})=>{let j;for(;A&&A!==I;)j=p(A),n(A),A=j;n(I)},D=(A,I,j,W,z,Y,ee,$,B)=>{I.type==="svg"?ee="svg":I.type==="math"&&(ee="mathml"),A==null?U(I,j,W,z,Y,ee,$,B):_(A,I,z,Y,ee,$,B)},U=(A,I,j,W,z,Y,ee,$)=>{let B,q;const{props:re,shapeFlag:le,transition:ne,dirs:H}=A;if(B=A.el=o(A.type,Y,re&&re.is,re),le&8?d(B,A.children):le&16&&w(A.children,B,null,W,z,up(A,Y),ee,$),H&&Hr(A,null,W,"created"),C(B,A,A.scopeId,ee,W),re){for(const Ce in re)Ce!=="value"&&!Tn(Ce)&&i(B,Ce,null,re[Ce],Y,W);"value"in re&&i(B,"value",null,re.value,Y),(q=re.onVnodeBeforeMount)&&zs(q,W,A)}H&&Hr(A,null,W,"beforeMount");const Q=fS(z,ne);Q&&ne.beforeEnter(B),r(B,I,j),((q=re&&re.onVnodeMounted)||Q||H)&&Xt(()=>{q&&zs(q,W,A),Q&&ne.enter(B),H&&Hr(A,null,W,"mounted")},z)},C=(A,I,j,W,z)=>{if(j&&g(A,j),W)for(let Y=0;Y<W.length;Y++)g(A,W[Y]);if(z){let Y=z.subTree;if(I===Y||_d(Y.type)&&(Y.ssContent===I||Y.ssFallback===I)){const ee=z.vnode;C(A,ee,ee.scopeId,ee.slotScopeIds,z.parent)}}},w=(A,I,j,W,z,Y,ee,$,B=0)=>{for(let q=B;q<A.length;q++){const re=A[q]=$?Zn(A[q]):Ks(A[q]);k(null,re,I,j,W,z,Y,ee,$)}},_=(A,I,j,W,z,Y,ee)=>{const $=I.el=A.el;let{patchFlag:B,dynamicChildren:q,dirs:re}=I;B|=A.patchFlag&16;const le=A.props||Ze,ne=I.props||Ze;let H;if(j&&Bi(j,!1),(H=ne.onVnodeBeforeUpdate)&&zs(H,j,I,A),re&&Hr(I,A,j,"beforeUpdate"),j&&Bi(j,!0),(le.innerHTML&&ne.innerHTML==null||le.textContent&&ne.textContent==null)&&d($,""),q?x(A.dynamicChildren,q,$,j,W,up(I,z),Y):ee||ue(A,I,$,null,j,W,up(I,z),Y,!1),B>0){if(B&16)P($,le,ne,j,z);else if(B&2&&le.class!==ne.class&&i($,"class",null,ne.class,z),B&4&&i($,"style",le.style,ne.style,z),B&8){const Q=I.dynamicProps;for(let Ce=0;Ce<Q.length;Ce++){const Ae=Q[Ce],mt=le[Ae],Et=ne[Ae];(Et!==mt||Ae==="value")&&i($,Ae,mt,Et,z,j)}}B&1&&A.children!==I.children&&d($,I.children)}else!ee&&q==null&&P($,le,ne,j,z);((H=ne.onVnodeUpdated)||re)&&Xt(()=>{H&&zs(H,j,I,A),re&&Hr(I,A,j,"updated")},W)},x=(A,I,j,W,z,Y,ee)=>{for(let $=0;$<I.length;$++){const B=A[$],q=I[$],re=B.el&&(B.type===he||!kr(B,q)||B.shapeFlag&70)?f(B.el):j;k(B,q,re,null,W,z,Y,ee,!0)}},P=(A,I,j,W,z)=>{if(I!==j){if(I!==Ze)for(const Y in I)!Tn(Y)&&!(Y in j)&&i(A,Y,I[Y],null,z,W);for(const Y in j){if(Tn(Y))continue;const ee=j[Y],$=I[Y];ee!==$&&Y!=="value"&&i(A,Y,$,ee,z,W)}"value"in j&&i(A,"value",I.value,j.value,z)}},O=(A,I,j,W,z,Y,ee,$,B)=>{const q=I.el=A?A.el:l(""),re=I.anchor=A?A.anchor:l("");let{patchFlag:le,dynamicChildren:ne,slotScopeIds:H}=I;H&&($=$?$.concat(H):H),A==null?(r(q,j,W),r(re,j,W),w(I.children||[],j,re,z,Y,ee,$,B)):le>0&&le&64&&ne&&A.dynamicChildren?(x(A.dynamicChildren,ne,j,z,Y,ee,$),(I.key!=null||z&&I===z.subTree)&&Vg(A,I,!0)):ue(A,I,j,re,z,Y,ee,$,B)},M=(A,I,j,W,z,Y,ee,$,B)=>{I.slotScopeIds=$,A==null?I.shapeFlag&512?z.ctx.activate(I,j,W,ee,B):ae(I,j,W,z,Y,ee,B):fe(A,I,B)},ae=(A,I,j,W,z,Y,ee)=>{const $=A.component=AS(A,W,z);if(Lc(A)&&($.ctx.renderer=Te),xS($,!1,ee),$.asyncDep){if(z&&z.registerDep($,de,ee),!A.el){const B=$.subTree=xe(Kt);V(null,B,I,j)}}else de($,A,I,j,z,Y,ee)},fe=(A,I,j)=>{const W=I.component=A.component;if(JR(A,I,j))if(W.asyncDep&&!W.asyncResolved){Z(W,I,j);return}else W.next=I,W.update();else I.el=A.el,W.vnode=I},de=(A,I,j,W,z,Y,ee)=>{const $=()=>{if(A.isMounted){let{next:le,bu:ne,u:H,parent:Q,vnode:Ce}=A;{const os=pS(A);if(os){le&&(le.el=Ce.el,Z(A,le,ee)),os.asyncDep.then(()=>{A.isUnmounted||$()});return}}let Ae=le,mt;Bi(A,!1),le?(le.el=Ce.el,Z(A,le,ee)):le=Ce,ne&&io(ne),(mt=le.props&&le.props.onVnodeBeforeUpdate)&&zs(mt,Q,le,Ce),Bi(A,!0);const Et=Bu(A),Lt=A.subTree;A.subTree=Et,k(Lt,Et,f(Lt.el),te(Lt),A,z,Y),le.el=Et.el,Ae===null&&kh(A,Et.el),H&&Xt(H,z),(mt=le.props&&le.props.onVnodeUpdated)&&Xt(()=>zs(mt,Q,le,Ce),z)}else{let le;const{el:ne,props:H}=I,{bm:Q,m:Ce,parent:Ae,root:mt,type:Et}=A,Lt=li(I);if(Bi(A,!1),Q&&io(Q),!Lt&&(le=H&&H.onVnodeBeforeMount)&&zs(le,Ae,I),Bi(A,!0),ne&&je){const os=()=>{A.subTree=Bu(A),je(ne,A.subTree,A,z,null)};Lt&&Et.__asyncHydrate?Et.__asyncHydrate(ne,A,os):os()}else{mt.ce&&mt.ce._injectChildStyle(Et);const os=A.subTree=Bu(A);k(null,os,j,W,A,z,Y),I.el=os.el}if(Ce&&Xt(Ce,z),!Lt&&(le=H&&H.onVnodeMounted)){const os=I;Xt(()=>zs(le,Ae,os),z)}(I.shapeFlag&256||Ae&&li(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&A.a&&Xt(A.a,z),A.isMounted=!0,I=j=W=null}};A.scope.on();const B=A.effect=new Gl($);A.scope.off();const q=A.update=B.run.bind(B),re=A.job=B.runIfDirty.bind(B);re.i=A,re.id=A.uid,B.scheduler=()=>Pg(re),Bi(A,!0),q()},Z=(A,I,j)=>{I.component=A;const W=A.vnode.props;A.vnode=I,A.next=null,UR(A,I.props,W,j),qR(A,I.children,j),Ai(),Y0(A),Pi()},ue=(A,I,j,W,z,Y,ee,$,B=!1)=>{const q=A&&A.children,re=A?A.shapeFlag:0,le=I.children,{patchFlag:ne,shapeFlag:H}=I;if(ne>0){if(ne&128){_e(q,le,j,W,z,Y,ee,$,B);return}else if(ne&256){$e(q,le,j,W,z,Y,ee,$,B);return}}H&8?(re&16&&$t(q,z,Y),le!==q&&d(j,le)):re&16?H&16?_e(q,le,j,W,z,Y,ee,$,B):$t(q,z,Y,!0):(re&8&&d(j,""),H&16&&w(le,j,W,z,Y,ee,$,B))},$e=(A,I,j,W,z,Y,ee,$,B)=>{A=A||so,I=I||so;const q=A.length,re=I.length,le=Math.min(q,re);let ne;for(ne=0;ne<le;ne++){const H=I[ne]=B?Zn(I[ne]):Ks(I[ne]);k(A[ne],H,j,null,z,Y,ee,$,B)}q>re?$t(A,z,Y,!0,!1,le):w(I,j,W,z,Y,ee,$,B,le)},_e=(A,I,j,W,z,Y,ee,$,B)=>{let q=0;const re=I.length;let le=A.length-1,ne=re-1;for(;q<=le&&q<=ne;){const H=A[q],Q=I[q]=B?Zn(I[q]):Ks(I[q]);if(kr(H,Q))k(H,Q,j,null,z,Y,ee,$,B);else break;q++}for(;q<=le&&q<=ne;){const H=A[le],Q=I[ne]=B?Zn(I[ne]):Ks(I[ne]);if(kr(H,Q))k(H,Q,j,null,z,Y,ee,$,B);else break;le--,ne--}if(q>le){if(q<=ne){const H=ne+1,Q=H<re?I[H].el:W;for(;q<=ne;)k(null,I[q]=B?Zn(I[q]):Ks(I[q]),j,Q,z,Y,ee,$,B),q++}}else if(q>ne)for(;q<=le;)Ve(A[q],z,Y,!0),q++;else{const H=q,Q=q,Ce=new Map;for(q=Q;q<=ne;q++){const Ms=I[q]=B?Zn(I[q]):Ks(I[q]);Ms.key!=null&&Ce.set(Ms.key,q)}let Ae,mt=0;const Et=ne-Q+1;let Lt=!1,os=0;const on=new Array(Et);for(q=0;q<Et;q++)on[q]=0;for(q=H;q<=le;q++){const Ms=A[q];if(mt>=Et){Ve(Ms,z,Y,!0);continue}let ur;if(Ms.key!=null)ur=Ce.get(Ms.key);else for(Ae=Q;Ae<=ne;Ae++)if(on[Ae-Q]===0&&kr(Ms,I[Ae])){ur=Ae;break}ur===void 0?Ve(Ms,z,Y,!0):(on[ur-Q]=q+1,ur>=os?os=ur:Lt=!0,k(Ms,I[ur],j,null,z,Y,ee,$,B),mt++)}const $o=Lt?jR(on):so;for(Ae=$o.length-1,q=Et-1;q>=0;q--){const Ms=Q+q,ur=I[Ms],Uo=Ms+1<re?I[Ms+1].el:W;on[q]===0?k(null,ur,j,Uo,z,Y,ee,$,B):Lt&&(Ae<0||q!==$o[Ae]?Oe(ur,j,Uo,2):Ae--)}}},Oe=(A,I,j,W,z=null)=>{const{el:Y,type:ee,transition:$,children:B,shapeFlag:q}=A;if(q&6){Oe(A.component.subTree,I,j,W);return}if(q&128){A.suspense.move(I,j,W);return}if(q&64){ee.move(A,I,j,Te);return}if(ee===he){r(Y,I,j);for(let le=0;le<B.length;le++)Oe(B[le],I,j,W);r(A.anchor,I,j);return}if(ee===lo){E(A,I,j);return}if(W!==2&&q&1&&$)if(W===0)$.beforeEnter(Y),r(Y,I,j),Xt(()=>$.enter(Y),z);else{const{leave:le,delayLeave:ne,afterLeave:H}=$,Q=()=>r(Y,I,j),Ce=()=>{le(Y,()=>{Q(),H&&H()})};ne?ne(Y,Q,Ce):Ce()}else r(Y,I,j)},Ve=(A,I,j,W=!1,z=!1)=>{const{type:Y,props:ee,ref:$,children:B,dynamicChildren:q,shapeFlag:re,patchFlag:le,dirs:ne,cacheIndex:H}=A;if(le===-2&&(z=!1),$!=null&&Zl($,null,j,A,!0),H!=null&&(I.renderCache[H]=void 0),re&256){I.ctx.deactivate(A);return}const Q=re&1&&ne,Ce=!li(A);let Ae;if(Ce&&(Ae=ee&&ee.onVnodeBeforeUnmount)&&zs(Ae,I,A),re&6)Ct(A.component,j,W);else{if(re&128){A.suspense.unmount(j,W);return}Q&&Hr(A,null,I,"beforeUnmount"),re&64?A.type.remove(A,I,j,Te,W):q&&!q.hasOnce&&(Y!==he||le>0&&le&64)?$t(q,I,j,!1,!0):(Y===he&&le&384||!z&&re&16)&&$t(B,I,j),W&&Qe(A)}(Ce&&(Ae=ee&&ee.onVnodeUnmounted)||Q)&&Xt(()=>{Ae&&zs(Ae,I,A),Q&&Hr(A,null,I,"unmounted")},j)},Qe=A=>{const{type:I,el:j,anchor:W,transition:z}=A;if(I===he){bt(j,W);return}if(I===lo){N(A);return}const Y=()=>{n(j),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(A.shapeFlag&1&&z&&!z.persisted){const{leave:ee,delayLeave:$}=z,B=()=>ee(j,Y);$?$(A.el,Y,B):B()}else Y()},bt=(A,I)=>{let j;for(;A!==I;)j=p(A),n(A),A=j;n(I)},Ct=(A,I,j)=>{const{bum:W,scope:z,job:Y,subTree:ee,um:$,m:B,a:q}=A;vd(B),vd(q),W&&io(W),z.stop(),Y&&(Y.flags|=8,Ve(ee,A,I,j)),$&&Xt($,I),Xt(()=>{A.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},$t=(A,I,j,W=!1,z=!1,Y=0)=>{for(let ee=Y;ee<A.length;ee++)Ve(A[ee],I,j,W,z)},te=A=>{if(A.shapeFlag&6)return te(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const I=p(A.anchor||A.el),j=I&&I[D2];return j?p(j):I};let we=!1;const ye=(A,I,j)=>{A==null?I._vnode&&Ve(I._vnode,null,null,!0):k(I._vnode||null,A,I,null,null,null,j),I._vnode=A,we||(we=!0,Y0(),gd(),we=!1)},Te={p:k,um:Ve,m:Oe,r:Qe,mt:ae,mc:w,pc:ue,pbc:x,n:te,o:t};let ze,je;return e&&([ze,je]=e(Te)),{render:ye,hydrate:ze,createApp:MR(ye,ze)}}function up({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Bi({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function fS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vg(t,e,s=!1){const r=t.children,n=e.children;if(ke(r)&&ke(n))for(let i=0;i<r.length;i++){const o=r[i];let l=n[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[i]=Zn(n[i]),l.el=o.el),!s&&l.patchFlag!==-2&&Vg(o,l)),l.type===In&&(l.el=o.el)}}function jR(t){const e=t.slice(),s=[0];let r,n,i,o,l;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(n=s[s.length-1],t[n]<u){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)l=i+o>>1,t[s[l]]<u?i=l+1:o=l;u<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function pS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:pS(e)}function vd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const mS=Symbol.for("v-scx"),gS=()=>Xs(mS);function HR(t,e){return Nc(t,null,e)}function WR(t,e){return Nc(t,null,{flush:"post"})}function yS(t,e){return Nc(t,null,{flush:"sync"})}function fr(t,e,s){return Nc(t,e,s)}function Nc(t,e,s=Ze){const{immediate:r,deep:n,flush:i,once:o}=s,l=et({},s),c=e&&r||!e&&i!=="post";let u;if(fa){if(i==="sync"){const g=gS();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=ls,g.resume=ls,g.pause=ls,g}}const d=Zt;l.call=(g,b,k)=>vr(g,d,b,k);let f=!1;i==="post"?l.scheduler=g=>{Xt(g,d&&d.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(g,b)=>{b?g():Pg(g)}),l.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,d&&(g.id=d.uid,g.i=d))};const p=NL(t,e,l);return fa&&(u?u.push(p):c&&p()),p}function zR(t,e,s){const r=this.proxy,n=Fe(t)?t.includes(".")?vS(r,t):()=>r[t]:t.bind(r,r);let i;Le(e)?i=e:(i=e.handler,s=e);const o=fo(this),l=Nc(n,i.bind(r),s);return o(),l}function vS(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}function GR(t,e,s=Ze){const r=ys(),n=It(e),i=xs(e),o=_S(t,n),l=A2((c,u)=>{let d,f=Ze,p;return yS(()=>{const g=t[n];Is(d,g)&&(d=g,u())}),{get(){return c(),s.get?s.get(d):d},set(g){const b=s.set?s.set(g):g;if(!Is(b,d)&&!(f!==Ze&&Is(g,f)))return;const k=r.vnode.props;k&&(e in k||n in k||i in k)&&(`onUpdate:${e}`in k||`onUpdate:${n}`in k||`onUpdate:${i}`in k)||(d=g,u()),r.emit(`update:${e}`,b),Is(g,b)&&Is(g,f)&&!Is(b,p)&&u(),f=g,p=b}}});return l[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?o||Ze:l,done:!1}:{done:!0}}}},l}const _S=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${It(e)}Modifiers`]||t[`${xs(e)}Modifiers`];function KR(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||Ze;let n=s;const i=e.startsWith("update:"),o=i&&_S(r,e.slice(7));o&&(o.trim&&(n=s.map(d=>Fe(d)?d.trim():d)),o.number&&(n=s.map(Wl)));let l,c=r[l=no(e)]||r[l=no(It(e))];!c&&i&&(c=r[l=no(xs(e))]),c&&vr(c,t,6,n);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,vr(u,t,6,n)}}function bS(t,e,s=!1){const r=e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},l=!1;if(!Le(t)){const c=u=>{const d=bS(u,e,!0);d&&(l=!0,et(o,d))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(ft(t)&&r.set(t,null),null):(ke(i)?i.forEach(c=>o[c]=null):et(o,i),ft(t)&&r.set(t,o),o)}function Th(t,e){return!t||!ki(e)?!1:(e=e.slice(2).replace(/Once$/,""),ct(t,e[0].toLowerCase()+e.slice(1))||ct(t,xs(e))||ct(t,e))}function Bu(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:d,props:f,data:p,setupState:g,ctx:b,inheritAttrs:k}=t,L=Jl(t);let V,R;try{if(s.shapeFlag&4){const N=n||r,D=N;V=Ks(u.call(D,N,d,f,g,p,b)),R=l}else{const N=e;V=Ks(N.length>1?N(f,{attrs:l,slots:o,emit:c}):N(f,null)),R=e.props?l:QR(l)}}catch(N){Ml.length=0,Ao(N,t,1),V=xe(Kt)}let E=V;if(R&&k!==!1){const N=Object.keys(R),{shapeFlag:D}=E;N.length&&D&7&&(i&&N.some(ch)&&(R=XR(R,i)),E=en(E,R,!1,!0))}return s.dirs&&(E=en(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(s.dirs):s.dirs),s.transition&&Ln(E,s.transition),V=E,Jl(L),V}function YR(t,e=!0){let s;for(let r=0;r<t.length;r++){const n=t[r];if(Rn(n)){if(n.type!==Kt||n.children==="v-if"){if(s)return;s=n}}else return}return s}const QR=t=>{let e;for(const s in t)(s==="class"||s==="style"||ki(s))&&((e||(e={}))[s]=t[s]);return e},XR=(t,e)=>{const s={};for(const r in t)(!ch(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function JR(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return r?a1(r,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(o[p]!==r[p]&&!Th(u,p))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?a1(r,o,u):!0:!!o;return!1}function a1(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!Th(s,i))return!0}return!1}function kh({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const _d=t=>t.__isSuspense;let nm=0;const ZR={name:"Suspense",__isSuspense:!0,process(t,e,s,r,n,i,o,l,c,u){if(t==null)tN(e,s,r,n,i,o,l,c,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}sN(t,e,s,r,n,o,l,c,u)}},hydrate:rN,normalize:nN},eN=ZR;function tc(t,e){const s=t.props&&t.props[e];Le(s)&&s()}function tN(t,e,s,r,n,i,o,l,c){const{p:u,o:{createElement:d}}=c,f=d("div"),p=t.suspense=wS(t,n,r,e,f,s,i,o,l,c);u(null,p.pendingBranch=t.ssContent,f,null,r,p,i,o),p.deps>0?(tc(t,"onPending"),tc(t,"onFallback"),u(null,t.ssFallback,e,s,r,null,i,o),oa(p,t.ssFallback)):p.resolve(!1,!0)}function sN(t,e,s,r,n,i,o,l,{p:c,um:u,o:{createElement:d}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,g=e.ssFallback,{activeBranch:b,pendingBranch:k,isInFallback:L,isHydrating:V}=f;if(k)f.pendingBranch=p,kr(p,k)?(c(k,p,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0?f.resolve():L&&(V||(c(b,g,s,r,n,null,i,o,l),oa(f,g)))):(f.pendingId=nm++,V?(f.isHydrating=!1,f.activeBranch=k):u(k,n,f),f.deps=0,f.effects.length=0,f.hiddenContainer=d("div"),L?(c(null,p,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0?f.resolve():(c(b,g,s,r,n,null,i,o,l),oa(f,g))):b&&kr(p,b)?(c(b,p,s,r,n,f,i,o,l),f.resolve(!0)):(c(null,p,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0&&f.resolve()));else if(b&&kr(p,b))c(b,p,s,r,n,f,i,o,l),oa(f,p);else if(tc(e,"onPending"),f.pendingBranch=p,p.shapeFlag&512?f.pendingId=p.component.suspenseId:f.pendingId=nm++,c(null,p,f.hiddenContainer,null,n,f,i,o,l),f.deps<=0)f.resolve();else{const{timeout:R,pendingId:E}=f;R>0?setTimeout(()=>{f.pendingId===E&&f.fallback(g)},R):R===0&&f.fallback(g)}}function wS(t,e,s,r,n,i,o,l,c,u,d=!1){const{p:f,m:p,um:g,n:b,o:{parentNode:k,remove:L}}=u;let V;const R=iN(t);R&&e&&e.pendingBranch&&(V=e.pendingId,e.deps++);const E=t.props?zl(t.props.timeout):void 0,N=i,D={vnode:t,parent:e,parentComponent:s,namespace:o,container:r,hiddenContainer:n,deps:0,pendingId:nm++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(U=!1,C=!1){const{vnode:w,activeBranch:_,pendingBranch:x,pendingId:P,effects:O,parentComponent:M,container:ae}=D;let fe=!1;D.isHydrating?D.isHydrating=!1:U||(fe=_&&x.transition&&x.transition.mode==="out-in",fe&&(_.transition.afterLeave=()=>{P===D.pendingId&&(p(x,ae,i===N?b(_):i,0),Ql(O))}),_&&(k(_.el)===ae&&(i=b(_)),g(_,M,D,!0)),fe||p(x,ae,i,0)),oa(D,x),D.pendingBranch=null,D.isInFallback=!1;let de=D.parent,Z=!1;for(;de;){if(de.pendingBranch){de.effects.push(...O),Z=!0;break}de=de.parent}!Z&&!fe&&Ql(O),D.effects=[],R&&e&&e.pendingBranch&&V===e.pendingId&&(e.deps--,e.deps===0&&!C&&e.resolve()),tc(w,"onResolve")},fallback(U){if(!D.pendingBranch)return;const{vnode:C,activeBranch:w,parentComponent:_,container:x,namespace:P}=D;tc(C,"onFallback");const O=b(w),M=()=>{D.isInFallback&&(f(null,U,x,O,_,null,P,l,c),oa(D,U))},ae=U.transition&&U.transition.mode==="out-in";ae&&(w.transition.afterLeave=M),D.isInFallback=!0,g(w,_,null,!0),ae||M()},move(U,C,w){D.activeBranch&&p(D.activeBranch,U,C,w),D.container=U},next(){return D.activeBranch&&b(D.activeBranch)},registerDep(U,C,w){const _=!!D.pendingBranch;_&&D.deps++;const x=U.vnode.el;U.asyncDep.catch(P=>{Ao(P,U,0)}).then(P=>{if(U.isUnmounted||D.isUnmounted||D.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:O}=U;lm(U,P,!1),x&&(O.el=x);const M=!x&&U.subTree.el;C(U,O,k(x||U.subTree.el),x?null:b(U.subTree),D,o,w),M&&L(M),kh(U,O.el),_&&--D.deps===0&&D.resolve()})},unmount(U,C){D.isUnmounted=!0,D.activeBranch&&g(D.activeBranch,s,U,C),D.pendingBranch&&g(D.pendingBranch,s,U,C)}};return D}function rN(t,e,s,r,n,i,o,l,c){const u=e.suspense=wS(e,r,s,t.parentNode,document.createElement("div"),null,n,i,o,l,!0),d=c(t,u.pendingBranch=e.ssContent,s,u,i,o);return u.deps===0&&u.resolve(!1,!0),d}function nN(t){const{shapeFlag:e,children:s}=t,r=e&32;t.ssContent=l1(r?s.default:s),t.ssFallback=r?l1(s.fallback):xe(Kt)}function l1(t){let e;if(Le(t)){const s=ho&&t._c;s&&(t._d=!1,v()),t=t(),s&&(t._d=!0,e=Rs,ES())}return ke(t)&&(t=YR(t)),t=Ks(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(s=>s!==t)),t}function SS(t,e){e&&e.pendingBranch?ke(t)?e.effects.push(...t):e.effects.push(t):Ql(t)}function oa(t,e){t.activeBranch=e;const{vnode:s,parentComponent:r}=t;let n=e.el;for(;!n&&e.component;)e=e.component.subTree,n=e.el;s.el=n,r&&r.subTree===s&&(r.vnode.el=n,kh(r,n))}function iN(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const he=Symbol.for("v-fgt"),In=Symbol.for("v-txt"),Kt=Symbol.for("v-cmt"),lo=Symbol.for("v-stc"),Ml=[];let Rs=null;function v(t=!1){Ml.push(Rs=t?null:[])}function ES(){Ml.pop(),Rs=Ml[Ml.length-1]||null}let ho=1;function im(t,e=!1){ho+=t,t<0&&Rs&&e&&(Rs.hasOnce=!0)}function TS(t){return t.dynamicChildren=ho>0?Rs||so:null,ES(),ho>0&&Rs&&Rs.push(t),t}function S(t,e,s,r,n,i){return TS(a(t,e,s,r,n,i,!0))}function Yt(t,e,s,r,n){return TS(xe(t,e,s,r,n,!0))}function Rn(t){return t?t.__v_isVNode===!0:!1}function kr(t,e){return t.type===e.type&&t.key===e.key}function oN(t){}const kS=({key:t})=>t??null,qu=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Fe(t)||Qt(t)||Le(t)?{i:ts,r:t,k:e,f:!!s}:t:null);function a(t,e=null,s=null,r=0,n=null,i=t===he?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kS(e),ref:e&&qu(e),scopeId:_h,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:ts};return l?(Bg(c,s),i&128&&t.normalize(c)):s&&(c.shapeFlag|=Fe(s)?8:16),ho>0&&!o&&Rs&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Rs.push(c),c}const xe=aN;function aN(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===X2)&&(t=Kt),Rn(t)){const l=en(t,e,!0);return s&&Bg(l,s),ho>0&&!i&&Rs&&(l.shapeFlag&6?Rs[Rs.indexOf(t)]=l:Rs.push(l)),l.patchFlag=-2,l}if(pN(t)&&(t=t.__vccOpts),e){e=IS(e);let{class:l,style:c}=e;l&&!Fe(l)&&(e.class=ge(l)),ft(c)&&(vh(c)&&!ke(c)&&(c=et({},c)),e.style=rt(c))}const o=Fe(t)?1:_d(t)?128:$2(t)?64:ft(t)?4:Le(t)?2:0;return a(t,e,s,r,n,o,i,!0)}function IS(t){return t?vh(t)||rS(t)?et({},t):t:null}function en(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?CS(n||{},e):n,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&kS(u),ref:e&&e.ref?s&&i?ke(i)?i.concat(qu(e)):[i,qu(e)]:qu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==he?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&en(t.ssContent),ssFallback:t.ssFallback&&en(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Ln(d,c.clone(d)),d}function se(t=" ",e=0){return xe(In,null,t,e)}function at(t,e){const s=xe(lo,null,t);return s.staticCount=e,s}function G(t="",e=!1){return e?(v(),Yt(Kt,null,t)):xe(Kt,null,t)}function Ks(t){return t==null||typeof t=="boolean"?xe(Kt):ke(t)?xe(he,null,t.slice()):Rn(t)?Zn(t):xe(In,null,String(t))}function Zn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:en(t)}function Bg(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ke(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Bg(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!rS(e)?e._ctx=ts:n===3&&ts&&(ts.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Le(e)?(e={default:e,_ctx:ts},s=32):(e=String(e),r&64?(s=16,e=[se(e)]):s=8);t.children=e,t.shapeFlag|=s}function CS(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=ge([e.class,r.class]));else if(n==="style")e.style=rt([e.style,r.style]);else if(ki(n)){const i=e[n],o=r[n];o&&i!==o&&!(ke(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function zs(t,e,s,r=null){vr(t,e,7,[s,r])}const lN=eS();let cN=0;function AS(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||lN,i={uid:cN++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new wg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:iS(r,n),emitsOptions:bS(r,n),emit:null,emitted:null,propsDefaults:Ze,inheritAttrs:r.inheritAttrs,ctx:Ze,data:Ze,props:Ze,attrs:Ze,slots:Ze,refs:Ze,setupState:Ze,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=KR.bind(null,i),t.ce&&t.ce(i),i}let Zt=null;const ys=()=>Zt||ts;let bd,om;{const t=Ac(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};bd=e("__VUE_INSTANCE_SETTERS__",s=>Zt=s),om=e("__VUE_SSR_SETTERS__",s=>fa=s)}const fo=t=>{const e=Zt;return bd(t),t.scope.on(),()=>{t.scope.off(),bd(e)}},am=()=>{Zt&&Zt.scope.off(),bd(null)};function PS(t){return t.vnode.shapeFlag&4}let fa=!1;function xS(t,e=!1,s=!1){e&&om(e);const{props:r,children:n}=t.vnode,i=PS(t);$R(t,r,i,e),BR(t,n,s);const o=i?uN(t,e):void 0;return e&&om(!1),o}function uN(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,em);const{setup:r}=s;if(r){Ai();const n=t.setupContext=r.length>1?RS(t):null,i=fo(t),o=Da(r,t,0,[t.props,n]),l=dh(o);if(Pi(),i(),(l||t.sp)&&!li(t)&&Rg(t),l){if(o.then(am,am),e)return o.then(c=>{lm(t,c,e)}).catch(c=>{Ao(c,t,0)});t.asyncDep=o}else lm(t,o,e)}else LS(t,e)}function lm(t,e,s){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ft(e)&&(t.setupState=Ag(e)),LS(t,s)}let wd,cm;function dN(t){wd=t,cm=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,mR))}}const hN=()=>!wd;function LS(t,e,s){const r=t.type;if(!t.render){if(!e&&wd&&!r.render){const n=r.template||Ug(t).template;if(n){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:l,compilerOptions:c}=r,u=et(et({isCustomElement:i,delimiters:l},o),c);r.render=wd(n,u)}}t.render=r.render||ls,cm&&cm(t)}{const n=fo(t);Ai();try{PR(t)}finally{Pi(),n()}}}const fN={get(t,e){return Cs(t,"get",""),t[e]}};function RS(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,fN),slots:t.slots,emit:t.emit,expose:e}}function Oc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ag(I2(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Nl)return Nl[s](t)},has(e,s){return s in e||s in Nl}})):t.proxy}function um(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function pN(t){return Le(t)&&"__vccOpts"in t}const oe=(t,e)=>PL(t,e,fa);function Ua(t,e,s){const r=arguments.length;return r===2?ft(e)&&!ke(e)?Rn(e)?xe(t,null,[e]):xe(t,e):xe(t,null,e):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&Rn(s)&&(s=[s]),xe(t,e,s))}function mN(){}function gN(t,e,s,r){const n=s[r];if(n&&NS(n,t))return n;const i=e();return i.memo=t.slice(),i.cacheIndex=r,s[r]=i}function NS(t,e){const s=t.memo;if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++)if(Is(s[r],e[r]))return!1;return ho>0&&Rs&&Rs.push(t),!0}const OS="3.5.13",yN=ls,vN=UL,_N=Yo,bN=M2,wN={createComponentInstance:AS,setupComponent:xS,renderComponentRoot:Bu,setCurrentRenderingInstance:Jl,isVNode:Rn,normalizeVNode:Ks,getComponentPublicInstance:Oc,ensureValidVNode:$g,pushWarningContext:OL,popWarningContext:ML},SN=wN,EN=null,TN=null,kN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dm;const c1=typeof window<"u"&&window.trustedTypes;if(c1)try{dm=c1.createPolicy("vue",{createHTML:t=>t})}catch{}const MS=dm?t=>dm.createHTML(t):t=>t,IN="http://www.w3.org/2000/svg",CN="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,u1=mn&&mn.createElement("template"),AN={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?mn.createElementNS(IN,t):e==="mathml"?mn.createElementNS(CN,t):s?mn.createElement(t,{is:s}):mn.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>mn.createTextNode(t),createComment:t=>mn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>mn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{u1.innerHTML=MS(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=u1.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},jn="transition",ul="animation",pa=Symbol("_vtc"),DS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},$S=et({},Lg,DS),PN=t=>(t.displayName="Transition",t.props=$S,t),ma=PN((t,{slots:e})=>Ua(q2,US(t),e)),qi=(t,e=[])=>{ke(t)?t.forEach(s=>s(...e)):t&&t(...e)},d1=t=>t?ke(t)?t.some(e=>e.length>1):t.length>1:!1;function US(t){const e={};for(const O in t)O in DS||(e[O]=t[O]);if(t.css===!1)return e;const{name:s="v",type:r,duration:n,enterFromClass:i=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:p=`${s}-leave-active`,leaveToClass:g=`${s}-leave-to`}=t,b=xN(n),k=b&&b[0],L=b&&b[1],{onBeforeEnter:V,onEnter:R,onEnterCancelled:E,onLeave:N,onLeaveCancelled:D,onBeforeAppear:U=V,onAppear:C=R,onAppearCancelled:w=E}=e,_=(O,M,ae,fe)=>{O._enterCancelled=fe,Yn(O,M?d:l),Yn(O,M?u:o),ae&&ae()},x=(O,M)=>{O._isLeaving=!1,Yn(O,f),Yn(O,g),Yn(O,p),M&&M()},P=O=>(M,ae)=>{const fe=O?C:R,de=()=>_(M,O,ae);qi(fe,[M,de]),h1(()=>{Yn(M,O?c:i),Br(M,O?d:l),d1(fe)||f1(M,r,k,de)})};return et(e,{onBeforeEnter(O){qi(V,[O]),Br(O,i),Br(O,o)},onBeforeAppear(O){qi(U,[O]),Br(O,c),Br(O,u)},onEnter:P(!1),onAppear:P(!0),onLeave(O,M){O._isLeaving=!0;const ae=()=>x(O,M);Br(O,f),O._enterCancelled?(Br(O,p),hm()):(hm(),Br(O,p)),h1(()=>{O._isLeaving&&(Yn(O,f),Br(O,g),d1(N)||f1(O,r,L,ae))}),qi(N,[O,ae])},onEnterCancelled(O){_(O,!1,void 0,!0),qi(E,[O])},onAppearCancelled(O){_(O,!0,void 0,!0),qi(w,[O])},onLeaveCancelled(O){x(O),qi(D,[O])}})}function xN(t){if(t==null)return null;if(ft(t))return[dp(t.enter),dp(t.leave)];{const e=dp(t);return[e,e]}}function dp(t){return zl(t)}function Br(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[pa]||(t[pa]=new Set)).add(e)}function Yn(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const s=t[pa];s&&(s.delete(e),s.size||(t[pa]=void 0))}function h1(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let LN=0;function f1(t,e,s,r){const n=t._endId=++LN,i=()=>{n===t._endId&&r()};if(s!=null)return setTimeout(i,s);const{type:o,timeout:l,propCount:c}=FS(t,e);if(!o)return r();const u=o+"end";let d=0;const f=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},l+1),t.addEventListener(u,p)}function FS(t,e){const s=window.getComputedStyle(t),r=b=>(s[b]||"").split(", "),n=r(`${jn}Delay`),i=r(`${jn}Duration`),o=p1(n,i),l=r(`${ul}Delay`),c=r(`${ul}Duration`),u=p1(l,c);let d=null,f=0,p=0;e===jn?o>0&&(d=jn,f=o,p=i.length):e===ul?u>0&&(d=ul,f=u,p=c.length):(f=Math.max(o,u),d=f>0?o>u?jn:ul:null,p=d?d===jn?i.length:c.length:0);const g=d===jn&&/\b(transform|all)(,|$)/.test(r(`${jn}Property`).toString());return{type:d,timeout:f,propCount:p,hasTransform:g}}function p1(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,r)=>m1(s)+m1(t[r])))}function m1(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function hm(){return document.body.offsetHeight}function RN(t,e,s){const r=t[pa];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Sd=Symbol("_vod"),VS=Symbol("_vsh"),BS={beforeMount(t,{value:e},{transition:s}){t[Sd]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):dl(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:r}){!e!=!s&&(r?e?(r.beforeEnter(t),dl(t,!0),r.enter(t)):r.leave(t,()=>{dl(t,!1)}):dl(t,e))},beforeUnmount(t,{value:e}){dl(t,e)}};function dl(t,e){t.style.display=e?t[Sd]:"none",t[VS]=!e}function NN(){BS.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const qS=Symbol("");function ON(t){const e=ys();if(!e)return;const s=e.ut=(n=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>Ed(i,n))},r=()=>{const n=t(e.proxy);e.ce?Ed(e.ce,n):fm(e.subTree,n),s(n)};Og(()=>{Ql(r)}),br(()=>{fr(r,ls,{flush:"post"});const n=new MutationObserver(r);n.observe(e.subTree.el.parentNode,{childList:!0}),Li(()=>n.disconnect())})}function fm(t,e){if(t.shapeFlag&128){const s=t.suspense;t=s.activeBranch,s.pendingBranch&&!s.isHydrating&&s.effects.push(()=>{fm(s.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Ed(t.el,e);else if(t.type===he)t.children.forEach(s=>fm(s,e));else if(t.type===lo){let{el:s,anchor:r}=t;for(;s&&(Ed(s,e),s!==r);)s=s.nextSibling}}function Ed(t,e){if(t.nodeType===1){const s=t.style;let r="";for(const n in e)s.setProperty(`--${n}`,e[n]),r+=`--${n}: ${e[n]};`;s[qS]=r}}const MN=/(^|;)\s*display\s*:/;function DN(t,e,s){const r=t.style,n=Fe(s);let i=!1;if(s&&!n){if(e)if(Fe(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&ju(r,l,"")}else for(const o in e)s[o]==null&&ju(r,o,"");for(const o in s)o==="display"&&(i=!0),ju(r,o,s[o])}else if(n){if(e!==s){const o=r[qS];o&&(s+=";"+o),r.cssText=s,i=MN.test(s)}}else e&&t.removeAttribute("style");Sd in t&&(t[Sd]=i?r.display:"",t[VS]&&(r.display="none"))}const g1=/\s*!important$/;function ju(t,e,s){if(ke(s))s.forEach(r=>ju(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=$N(t,e);g1.test(s)?t.setProperty(xs(r),s.replace(g1,""),"important"):t[r]=s}}const y1=["Webkit","Moz","ms"],hp={};function $N(t,e){const s=hp[e];if(s)return s;let r=It(e);if(r!=="filter"&&r in t)return hp[e]=r;r=Ci(r);for(let n=0;n<y1.length;n++){const i=y1[n]+r;if(i in t)return hp[e]=i}return e}const v1="http://www.w3.org/1999/xlink";function _1(t,e,s,r,n,i=o2(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(v1,e.slice(6,e.length)):t.setAttributeNS(v1,e,s):s==null||i&&!bg(s)?t.removeAttribute(e):t.setAttribute(e,i?"":js(s)?String(s):s)}function b1(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?MS(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=bg(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function vn(t,e,s,r){t.addEventListener(e,s,r)}function UN(t,e,s,r){t.removeEventListener(e,s,r)}const w1=Symbol("_vei");function FN(t,e,s,r,n=null){const i=t[w1]||(t[w1]={}),o=i[e];if(r&&o)o.value=r;else{const[l,c]=VN(e);if(r){const u=i[e]=jN(r,n);vn(t,l,u,c)}else o&&(UN(t,l,o,c),i[e]=void 0)}}const S1=/(?:Once|Passive|Capture)$/;function VN(t){let e;if(S1.test(t)){e={};let r;for(;r=t.match(S1);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xs(t.slice(2)),e]}let fp=0;const BN=Promise.resolve(),qN=()=>fp||(BN.then(()=>fp=0),fp=Date.now());function jN(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;vr(HN(r,s.value),e,5,[r])};return s.value=t,s.attached=qN(),s}function HN(t,e){if(ke(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const E1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,WN=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?RN(t,r,o):e==="style"?DN(t,s,r):ki(e)?ch(e)||FN(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):zN(t,e,r,o))?(b1(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_1(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Fe(r))?b1(t,It(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),_1(t,e,r,o))};function zN(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&E1(e)&&Le(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return E1(e)&&Fe(s)?!1:e in t}const T1={};/*! #__NO_SIDE_EFFECTS__ */function jS(t,e,s){const r=xi(t,e);Cc(r)&&et(r,e);class n extends Ih{constructor(o){super(r,o,s)}}return n.def=r,n}/*! #__NO_SIDE_EFFECTS__ */const GN=(t,e)=>jS(t,e,eE),KN=typeof HTMLElement<"u"?HTMLElement:class{};class Ih extends KN{constructor(e,s={},r=sc){super(),this._def=e,this._props=s,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==sc?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ih){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,$a(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const n of r)this._setAttr(n.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,n=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:o}=r;let l;if(i&&!ke(i))for(const c in i){const u=i[c];(u===Number||u&&u.type===Number)&&(c in this._props&&(this._props[c]=zl(this._props[c])),(l||(l=Object.create(null)))[It(c)]=!0)}this._numberProps=l,n&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},s=this._def.__asyncLoader;s?this._pendingResolve=s().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const s=this._instance&&this._instance.exposed;if(s)for(const r in s)ct(this,r)||Object.defineProperty(this,r,{get:()=>kn(s[r])})}_resolveProps(e){const{props:s}=e,r=ke(s)?s:Object.keys(s||{});for(const n of Object.keys(this))n[0]!=="_"&&r.includes(n)&&this._setProp(n,this[n]);for(const n of r.map(It))Object.defineProperty(this,n,{get(){return this._getProp(n)},set(i){this._setProp(n,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const s=this.hasAttribute(e);let r=s?this.getAttribute(e):T1;const n=It(e);s&&this._numberProps&&this._numberProps[n]&&(r=zl(r)),this._setProp(n,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,s,r=!0,n=!1){if(s!==this._props[e]&&(s===T1?delete this._props[e]:(this._props[e]=s,e==="key"&&this._app&&(this._app._ceVNode.key=s)),n&&this._instance&&this._update(),r)){const i=this._ob;i&&i.disconnect(),s===!0?this.setAttribute(xs(e),""):typeof s=="string"||typeof s=="number"?this.setAttribute(xs(e),s+""):s||this.removeAttribute(xs(e)),i&&i.observe(this,{attributes:!0})}}_update(){ZS(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const s=xe(this._def,et(e,this._props));return this._instance||(s.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const n=(i,o)=>{this.dispatchEvent(new CustomEvent(i,Cc(o[0])?et({detail:o},o[0]):{detail:o}))};r.emit=(i,...o)=>{n(i,o),xs(i)!==i&&n(xs(i),o)},this._setParent()}),s}_applyStyles(e,s){if(!e)return;if(s){if(s===this._def||this._styleChildren.has(s))return;this._styleChildren.add(s)}const r=this._nonce;for(let n=e.length-1;n>=0;n--){const i=document.createElement("style");r&&i.setAttribute("nonce",r),i.textContent=e[n],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let s;for(;s=this.firstChild;){const r=s.nodeType===1&&s.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(s),this.removeChild(s)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),s=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const n=e[r],i=n.getAttribute("name")||"default",o=this._slots[i],l=n.parentNode;if(o)for(const c of o){if(s&&c.nodeType===1){const u=s+"-s",d=document.createTreeWalker(c,1);c.setAttribute(u,"");let f;for(;f=d.nextNode();)f.setAttribute(u,"")}l.insertBefore(c,n)}else for(;n.firstChild;)l.insertBefore(n.firstChild,n);l.removeChild(n)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function HS(t){const e=ys(),s=e&&e.ce;return s||null}function YN(){const t=HS();return t&&t.shadowRoot}function QN(t="$style"){{const e=ys();if(!e)return Ze;const s=e.type.__cssModules;if(!s)return Ze;const r=s[t];return r||Ze}}const WS=new WeakMap,zS=new WeakMap,Td=Symbol("_moveCb"),k1=Symbol("_enterCb"),XN=t=>(delete t.props.mode,t),JN=XN({name:"TransitionGroup",props:et({},$S,{tag:String,moveClass:String}),setup(t,{slots:e}){const s=ys(),r=xg();let n,i;return Sh(()=>{if(!n.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!rO(n[0].el,s.vnode.el,o))return;n.forEach(eO),n.forEach(tO);const l=n.filter(sO);hm(),l.forEach(c=>{const u=c.el,d=u.style;Br(u,o),d.transform=d.webkitTransform=d.transitionDuration="";const f=u[Td]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",f),u[Td]=null,Yn(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=ot(t),l=US(o);let c=o.tag||he;if(n=[],i)for(let u=0;u<i.length;u++){const d=i[u];d.el&&d.el instanceof Element&&(n.push(d),Ln(d,ha(d,l,r,s)),WS.set(d,d.el.getBoundingClientRect()))}i=e.default?bh(e.default()):[];for(let u=0;u<i.length;u++){const d=i[u];d.key!=null&&Ln(d,ha(d,l,r,s))}return xe(c,null,i)}}}),ZN=JN;function eO(t){const e=t.el;e[Td]&&e[Td](),e[k1]&&e[k1]()}function tO(t){zS.set(t,t.el.getBoundingClientRect())}function sO(t){const e=WS.get(t),s=zS.get(t),r=e.left-s.left,n=e.top-s.top;if(r||n){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${n}px)`,i.transitionDuration="0s",t}}function rO(t,e,s){const r=t.cloneNode(),n=t[pa];n&&n.forEach(l=>{l.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),s.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=FS(r);return i.removeChild(r),o}const mi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ke(e)?s=>io(e,s):e};function nO(t){t.target.composing=!0}function I1(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const pr=Symbol("_assign"),Ke={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[pr]=mi(n);const i=r||n.props&&n.props.type==="number";vn(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;s&&(l=l.trim()),i&&(l=Wl(l)),t[pr](l)}),s&&vn(t,"change",()=>{t.value=t.value.trim()}),e||(vn(t,"compositionstart",nO),vn(t,"compositionend",I1),vn(t,"change",I1))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[pr]=mi(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Wl(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===c)||(t.value=c))}},Ch={deep:!0,created(t,e,s){t[pr]=mi(s),vn(t,"change",()=>{const r=t._modelValue,n=ga(t),i=t.checked,o=t[pr];if(ke(r)){const l=Pc(r,n),c=l!==-1;if(i&&!c)o(r.concat(n));else if(!i&&c){const u=[...r];u.splice(l,1),o(u)}}else if(Ii(r)){const l=new Set(r);i?l.add(n):l.delete(n),o(l)}else o(GS(t,i))})},mounted:C1,beforeUpdate(t,e,s){t[pr]=mi(s),C1(t,e,s)}};function C1(t,{value:e,oldValue:s},r){t._modelValue=e;let n;if(ke(e))n=Pc(e,r.props.value)>-1;else if(Ii(e))n=e.has(r.props.value);else{if(e===s)return;n=xn(e,GS(t,!0))}t.checked!==n&&(t.checked=n)}const wn={created(t,{value:e},s){t.checked=xn(e,s.props.value),t[pr]=mi(s),vn(t,"change",()=>{t[pr](ga(t))})},beforeUpdate(t,{value:e,oldValue:s},r){t[pr]=mi(r),e!==s&&(t.checked=xn(e,r.props.value))}},Js={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const n=Ii(e);vn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Wl(ga(o)):ga(o));t[pr](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,$a(()=>{t._assigning=!1})}),t[pr]=mi(r)},mounted(t,{value:e}){A1(t,e)},beforeUpdate(t,e,s){t[pr]=mi(s)},updated(t,{value:e}){t._assigning||A1(t,e)}};function A1(t,e){const s=t.multiple,r=ke(e);if(!(s&&!r&&!Ii(e))){for(let n=0,i=t.options.length;n<i;n++){const o=t.options[n],l=ga(o);if(s)if(r){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=Pc(e,l)>-1}else o.selected=e.has(l);else if(xn(ga(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ga(t){return"_value"in t?t._value:t.value}function GS(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const KS={created(t,e,s){Tu(t,e,s,null,"created")},mounted(t,e,s){Tu(t,e,s,null,"mounted")},beforeUpdate(t,e,s,r){Tu(t,e,s,r,"beforeUpdate")},updated(t,e,s,r){Tu(t,e,s,r,"updated")}};function YS(t,e){switch(t){case"SELECT":return Js;case"TEXTAREA":return Ke;default:switch(e){case"checkbox":return Ch;case"radio":return wn;default:return Ke}}}function Tu(t,e,s,r,n){const o=YS(t.tagName,s.props&&s.props.type)[n];o&&o(t,e,s,r)}function iO(){Ke.getSSRProps=({value:t})=>({value:t}),wn.getSSRProps=({value:t},e)=>{if(e.props&&xn(e.props.value,t))return{checked:!0}},Ch.getSSRProps=({value:t},e)=>{if(ke(t)){if(e.props&&Pc(t,e.props.value)>-1)return{checked:!0}}else if(Ii(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},KS.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const s=YS(e.type.toUpperCase(),e.props&&e.props.type);if(s.getSSRProps)return s.getSSRProps(t,e)}}const oO=["ctrl","shift","alt","meta"],aO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>oO.some(s=>t[`${s}Key`]&&!e.includes(s))},vt=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<e.length;o++){const l=aO[e[o]];if(l&&l(n,e))return}return t(n,...i)})},lO={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ya=(t,e)=>{const s=t._withKeys||(t._withKeys={}),r=e.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const i=xs(n.key);if(e.some(o=>o===i||lO[o]===i))return t(n)})},QS=et({patchProp:WN},AN);let Dl,P1=!1;function XS(){return Dl||(Dl=uS(QS))}function JS(){return Dl=P1?Dl:dS(QS),P1=!0,Dl}const ZS=(...t)=>{XS().render(...t)},cO=(...t)=>{JS().hydrate(...t)},sc=(...t)=>{const e=XS().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=sE(r);if(!n)return;const i=e._component;!Le(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,tE(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e},eE=(...t)=>{const e=JS().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=sE(r);if(n)return s(n,!0,tE(n))},e};function tE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function sE(t){return Fe(t)?document.querySelector(t):t}let x1=!1;const uO=()=>{x1||(x1=!0,iO(),NN())},dO=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:q2,BaseTransitionPropsValidators:Lg,Comment:Kt,DeprecationTypes:kN,EffectScope:wg,ErrorCodes:$L,ErrorTypeStrings:vN,Fragment:he,KeepAlive:lR,ReactiveEffect:Gl,Static:lo,Suspense:eN,Teleport:Jp,Text:In,TrackOpTypes:xL,Transition:ma,TransitionGroup:ZN,TriggerOpTypes:LL,VueElement:Ih,assertNumber:DL,callWithAsyncErrorHandling:vr,callWithErrorHandling:Da,camelize:It,capitalize:Ci,cloneVNode:en,compatUtils:TN,computed:oe,createApp:sc,createBlock:Yt,createCommentVNode:G,createElementBlock:S,createElementVNode:a,createHydrationRenderer:dS,createPropsRestProxy:CR,createRenderer:uS,createSSRApp:eE,createSlots:hR,createStaticVNode:at,createTextVNode:se,createVNode:xe,customRef:A2,defineAsyncComponent:oR,defineComponent:xi,defineCustomElement:jS,defineEmits:yR,defineExpose:vR,defineModel:wR,defineOptions:_R,defineProps:gR,defineSSRCustomElement:GN,defineSlots:bR,devtools:_N,effect:J4,effectScope:Sg,getCurrentInstance:ys,getCurrentScope:u2,getCurrentWatcher:RL,getTransitionRawChildren:bh,guardReactiveProps:IS,h:Ua,handleError:Ao,hasInjectionContext:DR,hydrate:cO,hydrateOnIdle:eR,hydrateOnInteraction:nR,hydrateOnMediaQuery:rR,hydrateOnVisible:sR,initCustomFormatter:mN,initDirectivesForSSR:uO,inject:Xs,isMemoSame:NS,isProxy:vh,isReactive:ai,isReadonly:pi,isRef:Qt,isRuntimeOnly:hN,isShallow:lr,isVNode:Rn,markRaw:I2,mergeDefaults:kR,mergeModels:IR,mergeProps:CS,nextTick:$a,normalizeClass:ge,normalizeProps:e2,normalizeStyle:rt,onActivated:H2,onBeforeMount:Ng,onBeforeUnmount:Rc,onBeforeUpdate:Og,onDeactivated:W2,onErrorCaptured:Q2,onMounted:br,onRenderTracked:Y2,onRenderTriggered:K2,onScopeDispose:Q4,onServerPrefetch:G2,onUnmounted:Li,onUpdated:Sh,onWatcherCleanup:x2,openBlock:v,popScopeId:qL,provide:Ol,proxyRefs:Ag,pushScopeId:BL,queuePostFlushCb:Ql,reactive:Co,readonly:Cg,ref:Se,registerRuntimeCompiler:dN,render:ZS,renderList:be,renderSlot:fR,resolveComponent:Ht,resolveDirective:dR,resolveDynamicComponent:Eh,resolveFilter:EN,resolveTransitionHooks:ha,setBlockTracking:im,setDevtoolsHook:bN,setTransitionHooks:Ln,shallowReactive:Ig,shallowReadonly:vL,shallowRef:xc,ssrContextKey:mS,ssrUtils:SN,stop:Z4,toDisplayString:m,toHandlerKey:no,toHandlers:pR,toRaw:ot,toRef:CL,toRefs:TL,toValue:wL,transformVNodeArgs:oN,triggerRef:bL,unref:kn,useAttrs:TR,useCssModule:QN,useCssVars:ON,useHost:HS,useId:zL,useModel:GR,useSSRContext:gS,useShadowRoot:YN,useSlots:ER,useTemplateRef:GL,useTransitionState:xg,vModelCheckbox:Ch,vModelDynamic:KS,vModelRadio:wn,vModelSelect:Js,vModelText:Ke,vShow:BS,version:OS,warn:yN,watch:fr,watchEffect:HR,watchPostEffect:WR,watchSyncEffect:yS,withAsyncContext:AR,withCtx:Jt,withDefaults:SR,withDirectives:Pe,withKeys:ya,withMemo:gN,withModifiers:vt,withScopeId:jL},Symbol.toStringTag,{value:"Module"})),Je=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},hO={name:"GlobalLoader",props:{visible:Boolean}},fO={key:0,class:"global-loader"};function pO(t,e,s,r,n,i){return s.visible?(v(),S("div",fO,e[0]||(e[0]=[a("div",{class:"spinner"},null,-1)]))):G("",!0)}const mO=Je(hO,[["render",pO],["__scopeId","data-v-6ce91e32"]]),gO={name:"App",components:{GlobalLoader:mO}},yO={id:"app"};function vO(t,e,s,r,n,i){const o=Ht("GlobalLoader"),l=Ht("router-view");return v(),S("div",yO,[t.$store.state.global.loading?(v(),Yt(o,{key:0})):G("",!0),xe(l)])}const rE=Je(gO,[["render",vO]]),_O="modulepreload",bO=function(t){return"/"+t},L1={},yt=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(s.map(u=>{if(u=bO(u),u in L1)return;L1[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":_O,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function wO(){return nE().__VUE_DEVTOOLS_GLOBAL_HOOK__}function nE(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const SO=typeof Proxy=="function",EO="devtools-plugin:setup",TO="plugin:settings:set";let Wo,pm;function kO(){var t;return Wo!==void 0||(typeof window<"u"&&window.performance?(Wo=!0,pm=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Wo=!0,pm=globalThis.perf_hooks.performance):Wo=!1),Wo}function IO(){return kO()?pm.now():Date.now()}class CO{constructor(e,s){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=s;const r={};if(e.settings)for(const o in e.settings){const l=e.settings[o];r[o]=l.defaultValue}const n=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(n),l=JSON.parse(o);Object.assign(i,l)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(n,JSON.stringify(o))}catch{}i=o},now(){return IO()}},s&&s.on(TO,(o,l)=>{o===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(o,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:l,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const s of this.onQueue)this.target.on[s.method](...s.args);for(const s of this.targetQueue)s.resolve(await this.target[s.method](...s.args))}}function AO(t,e){const s=t,r=nE(),n=wO(),i=SO&&s.enableEarlyProxy;if(n&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))n.emit(EO,t,e);else{const o=i?new CO(s,n):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:s,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Qo=typeof document<"u";function iE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function PO(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&iE(t.default)}const gt=Object.assign;function pp(t,e){const s={};for(const r in e){const n=e[r];s[r]=Rr(n)?n.map(t):t(n)}return s}const $l=()=>{},Rr=Array.isArray,oE=/#/g,xO=/&/g,LO=/\//g,RO=/=/g,NO=/\?/g,aE=/\+/g,OO=/%5B/g,MO=/%5D/g,lE=/%5E/g,DO=/%60/g,cE=/%7B/g,$O=/%7C/g,uE=/%7D/g,UO=/%20/g;function qg(t){return encodeURI(""+t).replace($O,"|").replace(OO,"[").replace(MO,"]")}function FO(t){return qg(t).replace(cE,"{").replace(uE,"}").replace(lE,"^")}function mm(t){return qg(t).replace(aE,"%2B").replace(UO,"+").replace(oE,"%23").replace(xO,"%26").replace(DO,"`").replace(cE,"{").replace(uE,"}").replace(lE,"^")}function VO(t){return mm(t).replace(RO,"%3D")}function BO(t){return qg(t).replace(oE,"%23").replace(NO,"%3F")}function qO(t){return t==null?"":BO(t).replace(LO,"%2F")}function rc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const jO=/\/$/,HO=t=>t.replace(jO,"");function mp(t,e,s="/"){let r,n={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),n=t(i)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=KO(r??e,s),{fullPath:r+(i&&"?")+i+o,path:r,query:n,hash:rc(o)}}function WO(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function R1(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function zO(t,e,s){const r=e.matched.length-1,n=s.matched.length-1;return r>-1&&r===n&&va(e.matched[r],s.matched[n])&&dE(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function va(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function dE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!GO(t[s],e[s]))return!1;return!0}function GO(t,e){return Rr(t)?N1(t,e):Rr(e)?N1(e,t):t===e}function N1(t,e){return Rr(e)?t.length===e.length&&t.every((s,r)=>s===e[r]):t.length===1&&t[0]===e}function KO(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),r=t.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=s.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var nc;(function(t){t.pop="pop",t.push="push"})(nc||(nc={}));var Ul;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ul||(Ul={}));function YO(t){if(!t)if(Qo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),HO(t)}const QO=/^[^#]+#/;function XO(t,e){return t.replace(QO,"#")+e}function JO(t,e){const s=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-s.left-(e.left||0),top:r.top-s.top-(e.top||0)}}const Ah=()=>({left:window.scrollX,top:window.scrollY});function ZO(t){let e;if("el"in t){const s=t.el,r=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=JO(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function O1(t,e){return(history.state?history.state.position-e:-1)+t}const gm=new Map;function eM(t,e){gm.set(t,e)}function tM(t){const e=gm.get(t);return gm.delete(t),e}let sM=()=>location.protocol+"//"+location.host;function hE(t,e){const{pathname:s,search:r,hash:n}=e,i=t.indexOf("#");if(i>-1){let l=n.includes(t.slice(i))?t.slice(i).length:1,c=n.slice(l);return c[0]!=="/"&&(c="/"+c),R1(c,"")}return R1(s,t)+r+n}function rM(t,e,s,r){let n=[],i=[],o=null;const l=({state:p})=>{const g=hE(t,location),b=s.value,k=e.value;let L=0;if(p){if(s.value=g,e.value=p,o&&o===b){o=null;return}L=k?p.position-k.position:0}else r(g);n.forEach(V=>{V(s.value,b,{delta:L,type:nc.pop,direction:L?L>0?Ul.forward:Ul.back:Ul.unknown})})};function c(){o=s.value}function u(p){n.push(p);const g=()=>{const b=n.indexOf(p);b>-1&&n.splice(b,1)};return i.push(g),g}function d(){const{history:p}=window;p.state&&p.replaceState(gt({},p.state,{scroll:Ah()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function M1(t,e,s,r=!1,n=!1){return{back:t,current:e,forward:s,replaced:r,position:window.history.length,scroll:n?Ah():null}}function nM(t){const{history:e,location:s}=window,r={value:hE(t,s)},n={value:e.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const f=t.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+c:sM()+t+c;try{e[d?"replaceState":"pushState"](u,"",p),n.value=u}catch(g){console.error(g),s[d?"replace":"assign"](p)}}function o(c,u){const d=gt({},e.state,M1(n.value.back,c,n.value.forward,!0),u,{position:n.value.position});i(c,d,!0),r.value=c}function l(c,u){const d=gt({},n.value,e.state,{forward:c,scroll:Ah()});i(d.current,d,!0);const f=gt({},M1(r.value,c,null),{position:d.position+1},u);i(c,f,!1),r.value=c}return{location:r,state:n,push:l,replace:o}}function iM(t){t=YO(t);const e=nM(t),s=rM(t,e.state,e.location,e.replace);function r(i,o=!0){o||s.pauseListeners(),history.go(i)}const n=gt({location:"",base:t,go:r,createHref:XO.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function oM(t){return typeof t=="string"||t&&typeof t=="object"}function fE(t){return typeof t=="string"||typeof t=="symbol"}const pE=Symbol("");var D1;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(D1||(D1={}));function _a(t,e){return gt(new Error,{type:t,[pE]:!0},e)}function un(t,e){return t instanceof Error&&pE in t&&(e==null||!!(t.type&e))}const $1="[^/]+?",aM={sensitive:!1,strict:!1,start:!0,end:!0},lM=/[.+*?^${}()[\]/\\]/g;function cM(t,e){const s=gt({},aM,e),r=[];let n=s.start?"^":"";const i=[];for(const u of t){const d=u.length?[]:[90];s.strict&&!u.length&&(n+="/");for(let f=0;f<u.length;f++){const p=u[f];let g=40+(s.sensitive?.25:0);if(p.type===0)f||(n+="/"),n+=p.value.replace(lM,"\\$&"),g+=40;else if(p.type===1){const{value:b,repeatable:k,optional:L,regexp:V}=p;i.push({name:b,repeatable:k,optional:L});const R=V||$1;if(R!==$1){g+=10;try{new RegExp(`(${R})`)}catch(N){throw new Error(`Invalid custom RegExp for param "${b}" (${R}): `+N.message)}}let E=k?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;f||(E=L&&u.length<2?`(?:/${E})`:"/"+E),L&&(E+="?"),n+=E,g+=20,L&&(g+=-8),k&&(g+=-20),R===".*"&&(g+=-50)}d.push(g)}r.push(d)}if(s.strict&&s.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function l(u){const d=u.match(o),f={};if(!d)return null;for(let p=1;p<d.length;p++){const g=d[p]||"",b=i[p-1];f[b.name]=g&&b.repeatable?g.split("/"):g}return f}function c(u){let d="",f=!1;for(const p of t){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const g of p)if(g.type===0)d+=g.value;else if(g.type===1){const{value:b,repeatable:k,optional:L}=g,V=b in u?u[b]:"";if(Rr(V)&&!k)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const R=Rr(V)?V.join("/"):V;if(!R)if(L)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${b}"`);d+=R}}return d||"/"}return{re:o,score:r,keys:i,parse:l,stringify:c}}function uM(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=e[s]-t[s];if(r)return r;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function mE(t,e){let s=0;const r=t.score,n=e.score;for(;s<r.length&&s<n.length;){const i=uM(r[s],n[s]);if(i)return i;s++}if(Math.abs(n.length-r.length)===1){if(U1(r))return 1;if(U1(n))return-1}return n.length-r.length}function U1(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const dM={type:0,value:""},hM=/[a-zA-Z0-9_]/;function fM(t){if(!t)return[[]];if(t==="/")return[[dM]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${s})/"${u}": ${g}`)}let s=0,r=s;const n=[];let i;function o(){i&&n.push(i),i=[]}let l=0,c,u="",d="";function f(){u&&(s===0?i.push({type:0,value:u}):s===1||s===2||s===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&s!==2){r=s,s=4;continue}switch(s){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),s=1):p();break;case 4:p(),s=r;break;case 1:c==="("?s=2:hM.test(c)?p():(f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:s=3:d+=c;break;case 3:f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),n}function pM(t,e,s){const r=cM(fM(t.path),s),n=gt(r,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function mM(t,e){const s=[],r=new Map;e=q1({strict:!1,end:!0,sensitive:!1},e);function n(f){return r.get(f)}function i(f,p,g){const b=!g,k=V1(f);k.aliasOf=g&&g.record;const L=q1(e,f),V=[k];if("alias"in f){const N=typeof f.alias=="string"?[f.alias]:f.alias;for(const D of N)V.push(V1(gt({},k,{components:g?g.record.components:k.components,path:D,aliasOf:g?g.record:k})))}let R,E;for(const N of V){const{path:D}=N;if(p&&D[0]!=="/"){const U=p.record.path,C=U[U.length-1]==="/"?"":"/";N.path=p.record.path+(D&&C+D)}if(R=pM(N,p,L),g?g.alias.push(R):(E=E||R,E!==R&&E.alias.push(R),b&&f.name&&!B1(R)&&o(f.name)),gE(R)&&c(R),k.children){const U=k.children;for(let C=0;C<U.length;C++)i(U[C],R,g&&g.children[C])}g=g||R}return E?()=>{o(E)}:$l}function o(f){if(fE(f)){const p=r.get(f);p&&(r.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return s}function c(f){const p=vM(f,s);s.splice(p,0,f),f.record.name&&!B1(f)&&r.set(f.record.name,f)}function u(f,p){let g,b={},k,L;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw _a(1,{location:f});L=g.record.name,b=gt(F1(p.params,g.keys.filter(E=>!E.optional).concat(g.parent?g.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),f.params&&F1(f.params,g.keys.map(E=>E.name))),k=g.stringify(b)}else if(f.path!=null)k=f.path,g=s.find(E=>E.re.test(k)),g&&(b=g.parse(k),L=g.record.name);else{if(g=p.name?r.get(p.name):s.find(E=>E.re.test(p.path)),!g)throw _a(1,{location:f,currentLocation:p});L=g.record.name,b=gt({},p.params,f.params),k=g.stringify(b)}const V=[];let R=g;for(;R;)V.unshift(R.record),R=R.parent;return{name:L,path:k,params:b,matched:V,meta:yM(V)}}t.forEach(f=>i(f));function d(){s.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:n}}function F1(t,e){const s={};for(const r of e)r in t&&(s[r]=t[r]);return s}function V1(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:gM(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function gM(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const r in t.components)e[r]=typeof s=="object"?s[r]:s;return e}function B1(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function yM(t){return t.reduce((e,s)=>gt(e,s.meta),{})}function q1(t,e){const s={};for(const r in t)s[r]=r in e?e[r]:t[r];return s}function vM(t,e){let s=0,r=e.length;for(;s!==r;){const i=s+r>>1;mE(t,e[i])<0?r=i:s=i+1}const n=_M(t);return n&&(r=e.lastIndexOf(n,r-1)),r}function _M(t){let e=t;for(;e=e.parent;)if(gE(e)&&mE(t,e)===0)return e}function gE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function bM(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(aE," "),o=i.indexOf("="),l=rc(o<0?i:i.slice(0,o)),c=o<0?null:rc(i.slice(o+1));if(l in e){let u=e[l];Rr(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function j1(t){let e="";for(let s in t){const r=t[s];if(s=VO(s),r==null){r!==void 0&&(e+=(e.length?"&":"")+s);continue}(Rr(r)?r.map(i=>i&&mm(i)):[r&&mm(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+s,i!=null&&(e+="="+i))})}return e}function wM(t){const e={};for(const s in t){const r=t[s];r!==void 0&&(e[s]=Rr(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return e}const SM=Symbol(""),H1=Symbol(""),Ph=Symbol(""),jg=Symbol(""),ym=Symbol("");function hl(){let t=[];function e(r){return t.push(r),()=>{const n=t.indexOf(r);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function ei(t,e,s,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((l,c)=>{const u=p=>{p===!1?c(_a(4,{from:s,to:e})):p instanceof Error?c(p):oM(p)?c(_a(2,{from:e,to:p})):(o&&r.enterCallbacks[n]===o&&typeof p=="function"&&o.push(p),l())},d=i(()=>t.call(r&&r.instances[n],e,s,u));let f=Promise.resolve(d);t.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function gp(t,e,s,r,n=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(iE(c)){const d=(c.__vccOpts||c)[e];d&&i.push(ei(d,s,r,o,l,n))}else{let u=c();i.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=PO(d)?d.default:d;o.mods[l]=d,o.components[l]=f;const g=(f.__vccOpts||f)[e];return g&&ei(g,s,r,o,l,n)()}))}}return i}function W1(t){const e=Xs(Ph),s=Xs(jg),r=oe(()=>{const c=kn(t.to);return e.resolve(c)}),n=oe(()=>{const{matched:c}=r.value,{length:u}=c,d=c[u-1],f=s.matched;if(!d||!f.length)return-1;const p=f.findIndex(va.bind(null,d));if(p>-1)return p;const g=z1(c[u-2]);return u>1&&z1(d)===g&&f[f.length-1].path!==g?f.findIndex(va.bind(null,c[u-2])):p}),i=oe(()=>n.value>-1&&CM(s.params,r.value.params)),o=oe(()=>n.value>-1&&n.value===s.matched.length-1&&dE(s.params,r.value.params));function l(c={}){if(IM(c)){const u=e[kn(t.replace)?"replace":"push"](kn(t.to)).catch($l);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:oe(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}function EM(t){return t.length===1?t[0]:t}const TM=xi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:W1,setup(t,{slots:e}){const s=Co(W1(t)),{options:r}=Xs(Ph),n=oe(()=>({[G1(t.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[G1(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&EM(e.default(s));return t.custom?i:Ua("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},i)}}}),kM=TM;function IM(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function CM(t,e){for(const s in e){const r=e[s],n=t[s];if(typeof r=="string"){if(r!==n)return!1}else if(!Rr(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function z1(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const G1=(t,e,s)=>t??e??s,AM=xi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const r=Xs(ym),n=oe(()=>t.route||r.value),i=Xs(H1,0),o=oe(()=>{let u=kn(i);const{matched:d}=n.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),l=oe(()=>n.value.matched[o.value]);Ol(H1,oe(()=>o.value+1)),Ol(SM,l),Ol(ym,n);const c=Se();return fr(()=>[c.value,l.value,t.name],([u,d,f],[p,g,b])=>{d&&(d.instances[f]=u,g&&g!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),u&&d&&(!g||!va(d,g)||!p)&&(d.enterCallbacks[f]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=n.value,d=t.name,f=l.value,p=f&&f.components[d];if(!p)return K1(s.default,{Component:p,route:u});const g=f.props[d],b=g?g===!0?u.params:typeof g=="function"?g(u):g:null,L=Ua(p,gt({},b,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return K1(s.default,{Component:L,route:u})||L}}});function K1(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const PM=AM;function xM(t){const e=mM(t.routes,t),s=t.parseQuery||bM,r=t.stringifyQuery||j1,n=t.history,i=hl(),o=hl(),l=hl(),c=xc(Hn);let u=Hn;Qo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=pp.bind(null,te=>""+te),f=pp.bind(null,qO),p=pp.bind(null,rc);function g(te,we){let ye,Te;return fE(te)?(ye=e.getRecordMatcher(te),Te=we):Te=te,e.addRoute(Te,ye)}function b(te){const we=e.getRecordMatcher(te);we&&e.removeRoute(we)}function k(){return e.getRoutes().map(te=>te.record)}function L(te){return!!e.getRecordMatcher(te)}function V(te,we){if(we=gt({},we||c.value),typeof te=="string"){const I=mp(s,te,we.path),j=e.resolve({path:I.path},we),W=n.createHref(I.fullPath);return gt(I,j,{params:p(j.params),hash:rc(I.hash),redirectedFrom:void 0,href:W})}let ye;if(te.path!=null)ye=gt({},te,{path:mp(s,te.path,we.path).path});else{const I=gt({},te.params);for(const j in I)I[j]==null&&delete I[j];ye=gt({},te,{params:f(I)}),we.params=f(we.params)}const Te=e.resolve(ye,we),ze=te.hash||"";Te.params=d(p(Te.params));const je=WO(r,gt({},te,{hash:FO(ze),path:Te.path})),A=n.createHref(je);return gt({fullPath:je,hash:ze,query:r===j1?wM(te.query):te.query||{}},Te,{redirectedFrom:void 0,href:A})}function R(te){return typeof te=="string"?mp(s,te,c.value.path):gt({},te)}function E(te,we){if(u!==te)return _a(8,{from:we,to:te})}function N(te){return C(te)}function D(te){return N(gt(R(te),{replace:!0}))}function U(te){const we=te.matched[te.matched.length-1];if(we&&we.redirect){const{redirect:ye}=we;let Te=typeof ye=="function"?ye(te):ye;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=R(Te):{path:Te},Te.params={}),gt({query:te.query,hash:te.hash,params:Te.path!=null?{}:te.params},Te)}}function C(te,we){const ye=u=V(te),Te=c.value,ze=te.state,je=te.force,A=te.replace===!0,I=U(ye);if(I)return C(gt(R(I),{state:typeof I=="object"?gt({},ze,I.state):ze,force:je,replace:A}),we||ye);const j=ye;j.redirectedFrom=we;let W;return!je&&zO(r,Te,ye)&&(W=_a(16,{to:j,from:Te}),Oe(Te,Te,!0,!1)),(W?Promise.resolve(W):x(j,Te)).catch(z=>un(z)?un(z,2)?z:_e(z):ue(z,j,Te)).then(z=>{if(z){if(un(z,2))return C(gt({replace:A},R(z.to),{state:typeof z.to=="object"?gt({},ze,z.to.state):ze,force:je}),we||j)}else z=O(j,Te,!0,A,ze);return P(j,Te,z),z})}function w(te,we){const ye=E(te,we);return ye?Promise.reject(ye):Promise.resolve()}function _(te){const we=bt.values().next().value;return we&&typeof we.runWithContext=="function"?we.runWithContext(te):te()}function x(te,we){let ye;const[Te,ze,je]=LM(te,we);ye=gp(Te.reverse(),"beforeRouteLeave",te,we);for(const I of Te)I.leaveGuards.forEach(j=>{ye.push(ei(j,te,we))});const A=w.bind(null,te,we);return ye.push(A),$t(ye).then(()=>{ye=[];for(const I of i.list())ye.push(ei(I,te,we));return ye.push(A),$t(ye)}).then(()=>{ye=gp(ze,"beforeRouteUpdate",te,we);for(const I of ze)I.updateGuards.forEach(j=>{ye.push(ei(j,te,we))});return ye.push(A),$t(ye)}).then(()=>{ye=[];for(const I of je)if(I.beforeEnter)if(Rr(I.beforeEnter))for(const j of I.beforeEnter)ye.push(ei(j,te,we));else ye.push(ei(I.beforeEnter,te,we));return ye.push(A),$t(ye)}).then(()=>(te.matched.forEach(I=>I.enterCallbacks={}),ye=gp(je,"beforeRouteEnter",te,we,_),ye.push(A),$t(ye))).then(()=>{ye=[];for(const I of o.list())ye.push(ei(I,te,we));return ye.push(A),$t(ye)}).catch(I=>un(I,8)?I:Promise.reject(I))}function P(te,we,ye){l.list().forEach(Te=>_(()=>Te(te,we,ye)))}function O(te,we,ye,Te,ze){const je=E(te,we);if(je)return je;const A=we===Hn,I=Qo?history.state:{};ye&&(Te||A?n.replace(te.fullPath,gt({scroll:A&&I&&I.scroll},ze)):n.push(te.fullPath,ze)),c.value=te,Oe(te,we,ye,A),_e()}let M;function ae(){M||(M=n.listen((te,we,ye)=>{if(!Ct.listening)return;const Te=V(te),ze=U(Te);if(ze){C(gt(ze,{replace:!0,force:!0}),Te).catch($l);return}u=Te;const je=c.value;Qo&&eM(O1(je.fullPath,ye.delta),Ah()),x(Te,je).catch(A=>un(A,12)?A:un(A,2)?(C(gt(R(A.to),{force:!0}),Te).then(I=>{un(I,20)&&!ye.delta&&ye.type===nc.pop&&n.go(-1,!1)}).catch($l),Promise.reject()):(ye.delta&&n.go(-ye.delta,!1),ue(A,Te,je))).then(A=>{A=A||O(Te,je,!1),A&&(ye.delta&&!un(A,8)?n.go(-ye.delta,!1):ye.type===nc.pop&&un(A,20)&&n.go(-1,!1)),P(Te,je,A)}).catch($l)}))}let fe=hl(),de=hl(),Z;function ue(te,we,ye){_e(te);const Te=de.list();return Te.length?Te.forEach(ze=>ze(te,we,ye)):console.error(te),Promise.reject(te)}function $e(){return Z&&c.value!==Hn?Promise.resolve():new Promise((te,we)=>{fe.add([te,we])})}function _e(te){return Z||(Z=!te,ae(),fe.list().forEach(([we,ye])=>te?ye(te):we()),fe.reset()),te}function Oe(te,we,ye,Te){const{scrollBehavior:ze}=t;if(!Qo||!ze)return Promise.resolve();const je=!ye&&tM(O1(te.fullPath,0))||(Te||!ye)&&history.state&&history.state.scroll||null;return $a().then(()=>ze(te,we,je)).then(A=>A&&ZO(A)).catch(A=>ue(A,te,we))}const Ve=te=>n.go(te);let Qe;const bt=new Set,Ct={currentRoute:c,listening:!0,addRoute:g,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:L,getRoutes:k,resolve:V,options:t,push:N,replace:D,go:Ve,back:()=>Ve(-1),forward:()=>Ve(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:de.add,isReady:$e,install(te){const we=this;te.component("RouterLink",kM),te.component("RouterView",PM),te.config.globalProperties.$router=we,Object.defineProperty(te.config.globalProperties,"$route",{enumerable:!0,get:()=>kn(c)}),Qo&&!Qe&&c.value===Hn&&(Qe=!0,N(n.location).catch(ze=>{}));const ye={};for(const ze in Hn)Object.defineProperty(ye,ze,{get:()=>c.value[ze],enumerable:!0});te.provide(Ph,we),te.provide(jg,Ig(ye)),te.provide(ym,c);const Te=te.unmount;bt.add(te),te.unmount=function(){bt.delete(te),bt.size<1&&(u=Hn,M&&M(),M=null,c.value=Hn,Qe=!1,Z=!1),Te()}}};function $t(te){return te.reduce((we,ye)=>we.then(()=>_(ye)),Promise.resolve())}return Ct}function LM(t,e){const s=[],r=[],n=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>va(u,l))?r.push(l):s.push(l));const c=t.matched[o];c&&(e.matched.find(u=>va(u,c))||n.push(c))}return[s,r,n]}function Mc(){return Xs(Ph)}function RM(t){return Xs(jg)}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var yE="store";function Po(t){return t===void 0&&(t=null),Xs(t!==null?t:yE)}function Fa(t,e){Object.keys(t).forEach(function(s){return e(t[s],s)})}function vE(t){return t!==null&&typeof t=="object"}function NM(t){return t&&typeof t.then=="function"}function OM(t,e){return function(){return t(e)}}function _E(t,e,s){return e.indexOf(t)<0&&(s&&s.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function bE(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var s=t.state;xh(t,s,[],t._modules.root,!0),Hg(t,s,e)}function Hg(t,e,s){var r=t._state,n=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},l={},c=Sg(!0);c.run(function(){Fa(i,function(u,d){o[d]=OM(u,t),l[d]=oe(function(){return o[d]()}),Object.defineProperty(t.getters,d,{get:function(){return l[d].value},enumerable:!0})})}),t._state=Co({data:e}),t._scope=c,t.strict&&FM(t),r&&s&&t._withCommit(function(){r.data=null}),n&&n.stop()}function xh(t,e,s,r,n){var i=!s.length,o=t._modules.getNamespace(s);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!n){var l=Wg(e,s.slice(0,-1)),c=s[s.length-1];t._withCommit(function(){l[c]=r.state})}var u=r.context=MM(t,o,s);r.forEachMutation(function(d,f){var p=o+f;DM(t,p,d,u)}),r.forEachAction(function(d,f){var p=d.root?f:o+f,g=d.handler||d;$M(t,p,g,u)}),r.forEachGetter(function(d,f){var p=o+f;UM(t,p,d,u)}),r.forEachChild(function(d,f){xh(t,e,s.concat(f),d,n)})}function MM(t,e,s){var r=e==="",n={dispatch:r?t.dispatch:function(i,o,l){var c=kd(i,o,l),u=c.payload,d=c.options,f=c.type;return(!d||!d.root)&&(f=e+f),t.dispatch(f,u)},commit:r?t.commit:function(i,o,l){var c=kd(i,o,l),u=c.payload,d=c.options,f=c.type;(!d||!d.root)&&(f=e+f),t.commit(f,u,d)}};return Object.defineProperties(n,{getters:{get:r?function(){return t.getters}:function(){return wE(t,e)}},state:{get:function(){return Wg(t.state,s)}}}),n}function wE(t,e){if(!t._makeLocalGettersCache[e]){var s={},r=e.length;Object.keys(t.getters).forEach(function(n){if(n.slice(0,r)===e){var i=n.slice(r);Object.defineProperty(s,i,{get:function(){return t.getters[n]},enumerable:!0})}}),t._makeLocalGettersCache[e]=s}return t._makeLocalGettersCache[e]}function DM(t,e,s,r){var n=t._mutations[e]||(t._mutations[e]=[]);n.push(function(o){s.call(t,r.state,o)})}function $M(t,e,s,r){var n=t._actions[e]||(t._actions[e]=[]);n.push(function(o){var l=s.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return NM(l)||(l=Promise.resolve(l)),t._devtoolHook?l.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):l})}function UM(t,e,s,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return s(r.state,r.getters,i.state,i.getters)})}function FM(t){fr(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Wg(t,e){return e.reduce(function(s,r){return s[r]},t)}function kd(t,e,s){return vE(t)&&t.type&&(s=e,e=t,t=t.type),{type:t,payload:e,options:s}}var VM="vuex bindings",Y1="vuex:mutations",yp="vuex:actions",zo="vuex",BM=0;function qM(t,e){AO({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[VM]},function(s){s.addTimelineLayer({id:Y1,label:"Vuex Mutations",color:Q1}),s.addTimelineLayer({id:yp,label:"Vuex Actions",color:Q1}),s.addInspector({id:zo,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),s.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===zo)if(r.filter){var n=[];kE(n,e._modules.root,r.filter,""),r.rootNodes=n}else r.rootNodes=[TE(e._modules.root,"")]}),s.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===zo){var n=r.nodeId;wE(e,n),r.state=WM(GM(e._modules,n),n==="root"?e.getters:e._makeLocalGettersCache,n)}}),s.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===zo){var n=r.nodeId,i=r.path;n!=="root"&&(i=n.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,n){var i={};r.payload&&(i.payload=r.payload),i.state=n,s.notifyComponentUpdate(),s.sendInspectorTree(zo),s.sendInspectorState(zo),s.addTimelineEvent({layerId:Y1,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,n){var i={};r.payload&&(i.payload=r.payload),r._id=BM++,r._time=Date.now(),i.state=n,s.addTimelineEvent({layerId:yp,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,n){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=n,s.addTimelineEvent({layerId:yp,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var Q1=8702998,jM=6710886,HM=16777215,SE={label:"namespaced",textColor:HM,backgroundColor:jM};function EE(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function TE(t,e){return{id:e||"root",label:EE(e),tags:t.namespaced?[SE]:[],children:Object.keys(t._children).map(function(s){return TE(t._children[s],e+s+"/")})}}function kE(t,e,s,r){r.includes(s)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[SE]:[]}),Object.keys(e._children).forEach(function(n){kE(t,e._children[n],s,r+n+"/")})}function WM(t,e,s){e=s==="root"?e:e[s];var r=Object.keys(e),n={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=zM(e);n.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?EE(o):o,editable:!1,value:vm(function(){return i[o]})}})}return n}function zM(t){var e={};return Object.keys(t).forEach(function(s){var r=s.split("/");if(r.length>1){var n=e,i=r.pop();r.forEach(function(o){n[o]||(n[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),n=n[o]._custom.value}),n[i]=vm(function(){return t[s]})}else e[s]=vm(function(){return t[s]})}),e}function GM(t,e){var s=e.split("/").filter(function(r){return r});return s.reduce(function(r,n,i){var o=r[n];if(!o)throw new Error('Missing module "'+n+'" for path "'+e+'".');return i===s.length-1?o:o._children},e==="root"?t:t.root._children)}function vm(t){try{return t()}catch(e){return e}}var Or=function(e,s){this.runtime=s,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},IE={namespaced:{configurable:!0}};IE.namespaced.get=function(){return!!this._rawModule.namespaced};Or.prototype.addChild=function(e,s){this._children[e]=s};Or.prototype.removeChild=function(e){delete this._children[e]};Or.prototype.getChild=function(e){return this._children[e]};Or.prototype.hasChild=function(e){return e in this._children};Or.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Or.prototype.forEachChild=function(e){Fa(this._children,e)};Or.prototype.forEachGetter=function(e){this._rawModule.getters&&Fa(this._rawModule.getters,e)};Or.prototype.forEachAction=function(e){this._rawModule.actions&&Fa(this._rawModule.actions,e)};Or.prototype.forEachMutation=function(e){this._rawModule.mutations&&Fa(this._rawModule.mutations,e)};Object.defineProperties(Or.prototype,IE);var xo=function(e){this.register([],e,!1)};xo.prototype.get=function(e){return e.reduce(function(s,r){return s.getChild(r)},this.root)};xo.prototype.getNamespace=function(e){var s=this.root;return e.reduce(function(r,n){return s=s.getChild(n),r+(s.namespaced?n+"/":"")},"")};xo.prototype.update=function(e){CE([],this.root,e)};xo.prototype.register=function(e,s,r){var n=this;r===void 0&&(r=!0);var i=new Or(s,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}s.modules&&Fa(s.modules,function(l,c){n.register(e.concat(c),l,r)})};xo.prototype.unregister=function(e){var s=this.get(e.slice(0,-1)),r=e[e.length-1],n=s.getChild(r);n&&n.runtime&&s.removeChild(r)};xo.prototype.isRegistered=function(e){var s=this.get(e.slice(0,-1)),r=e[e.length-1];return s?s.hasChild(r):!1};function CE(t,e,s){if(e.update(s),s.modules)for(var r in s.modules){if(!e.getChild(r))return;CE(t.concat(r),e.getChild(r),s.modules[r])}}function KM(t){return new sr(t)}var sr=function(e){var s=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var n=e.strict;n===void 0&&(n=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new xo(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,l=this,c=l.dispatch,u=l.commit;this.dispatch=function(p,g){return c.call(o,p,g)},this.commit=function(p,g,b){return u.call(o,p,g,b)},this.strict=n;var d=this._modules.root.state;xh(this,d,[],this._modules.root),Hg(this,d),r.forEach(function(f){return f(s)})},zg={state:{configurable:!0}};sr.prototype.install=function(e,s){e.provide(s||yE,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&qM(e,this)};zg.state.get=function(){return this._state.data};zg.state.set=function(t){};sr.prototype.commit=function(e,s,r){var n=this,i=kd(e,s,r),o=i.type,l=i.payload,c={type:o,payload:l},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(f){f(l)})}),this._subscribers.slice().forEach(function(d){return d(c,n.state)}))};sr.prototype.dispatch=function(e,s){var r=this,n=kd(e,s),i=n.type,o=n.payload,l={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(l,r.state)})}catch{}var u=c.length>1?Promise.all(c.map(function(d){return d(o)})):c[0](o);return new Promise(function(d,f){u.then(function(p){try{r._actionSubscribers.filter(function(g){return g.after}).forEach(function(g){return g.after(l,r.state)})}catch{}d(p)},function(p){try{r._actionSubscribers.filter(function(g){return g.error}).forEach(function(g){return g.error(l,r.state,p)})}catch{}f(p)})})}};sr.prototype.subscribe=function(e,s){return _E(e,this._subscribers,s)};sr.prototype.subscribeAction=function(e,s){var r=typeof e=="function"?{before:e}:e;return _E(r,this._actionSubscribers,s)};sr.prototype.watch=function(e,s,r){var n=this;return fr(function(){return e(n.state,n.getters)},s,Object.assign({},r))};sr.prototype.replaceState=function(e){var s=this;this._withCommit(function(){s._state.data=e})};sr.prototype.registerModule=function(e,s,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,s),xh(this,this.state,e,this._modules.get(e),r.preserveState),Hg(this,this.state)};sr.prototype.unregisterModule=function(e){var s=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Wg(s.state,e.slice(0,-1));delete r[e[e.length-1]]}),bE(this)};sr.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};sr.prototype.hotUpdate=function(e){this._modules.update(e),bE(this,!0)};sr.prototype._withCommit=function(e){var s=this._committing;this._committing=!0,e(),this._committing=s};Object.defineProperties(sr.prototype,zg);var Gg=Rh(function(t,e){var s={};return Lh(e).forEach(function(r){var n=r.key,i=r.val;s[n]=function(){var l=this.$store.state,c=this.$store.getters;if(t){var u=Nh(this.$store,"mapState",t);if(!u)return;l=u.context.state,c=u.context.getters}return typeof i=="function"?i.call(this,l,c):l[i]},s[n].vuex=!0}),s}),AE=Rh(function(t,e){var s={};return Lh(e).forEach(function(r){var n=r.key,i=r.val;s[n]=function(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];var u=this.$store.commit;if(t){var d=Nh(this.$store,"mapMutations",t);if(!d)return;u=d.context.commit}return typeof i=="function"?i.apply(this,[u].concat(l)):u.apply(this.$store,[i].concat(l))}}),s}),tn=Rh(function(t,e){var s={};return Lh(e).forEach(function(r){var n=r.key,i=r.val;i=t+i,s[n]=function(){if(!(t&&!Nh(this.$store,"mapGetters",t)))return this.$store.getters[i]},s[n].vuex=!0}),s}),YM=Rh(function(t,e){var s={};return Lh(e).forEach(function(r){var n=r.key,i=r.val;s[n]=function(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];var u=this.$store.dispatch;if(t){var d=Nh(this.$store,"mapActions",t);if(!d)return;u=d.context.dispatch}return typeof i=="function"?i.apply(this,[u].concat(l)):u.apply(this.$store,[i].concat(l))}}),s});function Lh(t){return QM(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function QM(t){return Array.isArray(t)||vE(t)}function Rh(t){return function(e,s){return typeof e!="string"?(s=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,s)}}function Nh(t,e,s){var r=t._modulesNamespaceMap[s];return r}const XM={namespaced:!0,state:()=>({loading:!1}),mutations:{setLoading(t,e){t.loading=e}},getters:{isLoading:t=>t.loading}},JM={namespaced:!0,state:{learningMode:localStorage.getItem("learningMode")||null,schoolProfile:{placementTestTaken:!1,placementTestDate:null,placementTestScore:null,assignedLevel:null,currentGrade:null,currentLevelCap:1,progressLocked:!0,accessibleLevels:[1],lockedLevels:[],completedLevels:[],mandatoryCourses:[],curriculum:"standard",minPassingScore:70},studyCentreProfile:{explorationHistory:[],bookmarkedCourses:[],personalPaths:[],preferences:{showAllLevels:!0,allowJumping:!0,explorationMode:!0}},modeHistory:[],levelGradeMapping:{1:"A1",2:"A1",3:"A1",4:"A2",5:"A2",6:"A2",7:"B1",8:"B1",9:"B1",10:"B2",11:"B2",12:"B2",13:"C1",14:"C1",15:"C1",16:"C2",17:"C2",18:"C2",19:"Expert",20:"Master"}},mutations:{SET_LEARNING_MODE(t,e){t.learningMode=e,localStorage.setItem("learningMode",e)},SET_SCHOOL_PROFILE(t,e){t.schoolProfile={...t.schoolProfile,...e},localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},SET_STUDY_CENTRE_PROFILE(t,e){t.studyCentreProfile={...t.studyCentreProfile,...e},localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},SET_PLACEMENT_TEST_TAKEN(t,e){t.schoolProfile.placementTestTaken=e,localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},SET_PLACEMENT_TEST_RESULTS(t,e){t.schoolProfile.placementTestDate=new Date().toISOString(),t.schoolProfile.placementTestScore=e.overallScore,t.schoolProfile.assignedLevel=e.level,t.schoolProfile.currentGrade=t.levelGradeMapping[e.level],t.schoolProfile.currentLevelCap=e.level,t.schoolProfile.accessibleLevels=Array.from({length:e.level},(s,r)=>r+1),localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},UNLOCK_LEVEL(t,e){t.schoolProfile.accessibleLevels.includes(e)||(t.schoolProfile.accessibleLevels.push(e),t.schoolProfile.accessibleLevels.sort((r,n)=>r-n));const s=t.schoolProfile.lockedLevels.indexOf(e);s>-1&&t.schoolProfile.lockedLevels.splice(s,1),e>t.schoolProfile.currentLevelCap&&(t.schoolProfile.currentLevelCap=e),localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},COMPLETE_LEVEL(t,{level:e,score:s,certificate:r}){const n={level:e,completedDate:new Date().toISOString(),finalScore:s,certificate:r,unlockedNext:[e+1]};t.schoolProfile.completedLevels.push(n),e+1<=20&&(t.schoolProfile.accessibleLevels.push(e+1),t.schoolProfile.currentLevelCap=e+1,t.schoolProfile.currentGrade=t.levelGradeMapping[e+1]),localStorage.setItem("schoolProfile",JSON.stringify(t.schoolProfile))},ADD_TO_EXPLORATION_HISTORY(t,e){t.studyCentreProfile.explorationHistory.push({...e,accessedAt:new Date().toISOString()}),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},ADD_BOOKMARK(t,{courseId:e,notes:s}){t.studyCentreProfile.bookmarkedCourses.push({courseId:e,notes:s,bookmarkedAt:new Date().toISOString()}),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},REMOVE_BOOKMARK(t,e){t.studyCentreProfile.bookmarkedCourses=t.studyCentreProfile.bookmarkedCourses.filter(s=>s.courseId!==e),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},CREATE_PERSONAL_PATH(t,e){t.studyCentreProfile.personalPaths.push({...e,createdAt:new Date().toISOString(),progress:0}),localStorage.setItem("studyCentreProfile",JSON.stringify(t.studyCentreProfile))},ADD_MODE_HISTORY(t,{fromMode:e,toMode:s,reason:r}){t.modeHistory.push({fromMode:e,toMode:s,switchedAt:new Date().toISOString(),reason:r})},LOAD_FROM_LOCALSTORAGE(t){try{const e=localStorage.getItem("learningMode"),s=JSON.parse(localStorage.getItem("schoolProfile")||"{}"),r=JSON.parse(localStorage.getItem("studyCentreProfile")||"{}");e&&(t.learningMode=e),Object.keys(s).length>0&&(t.schoolProfile={...t.schoolProfile,...s}),Object.keys(r).length>0&&(t.studyCentreProfile={...t.studyCentreProfile,...r})}catch{}},RESET_PLATFORM_MODE(t){t.learningMode=null,t.schoolProfile={placementTestTaken:!1,placementTestDate:null,placementTestScore:null,assignedLevel:null,currentGrade:null,currentLevelCap:1,progressLocked:!0,accessibleLevels:[1],lockedLevels:[],completedLevels:[],mandatoryCourses:[],curriculum:"standard",minPassingScore:70},t.studyCentreProfile={explorationHistory:[],bookmarkedCourses:[],personalPaths:[],preferences:{showAllLevels:!0,allowJumping:!0,explorationMode:!0}},localStorage.removeItem("learningMode"),localStorage.removeItem("schoolProfile"),localStorage.removeItem("studyCentreProfile")}},actions:{async switchMode({commit:t,state:e},{newMode:s,reason:r=""}){const n=e.learningMode;return t("ADD_MODE_HISTORY",{fromMode:n,toMode:s,reason:r}),t("SET_LEARNING_MODE",s),s==="school"?t("SET_SCHOOL_PROFILE",{progressLocked:!0}):s==="study_centre"&&t("SET_STUDY_CENTRE_PROFILE",{preferences:{...e.studyCentreProfile.preferences,showAllLevels:!0}}),{success:!0,newMode:s}},setPlacementTestResults({commit:t},e){t("SET_PLACEMENT_TEST_TAKEN",!0),t("SET_PLACEMENT_TEST_RESULTS",e)},unlockLevel({commit:t},e){t("UNLOCK_LEVEL",e)},completeLevel({commit:t},e){t("COMPLETE_LEVEL",e)},addToExplorationHistory({commit:t},e){t("ADD_TO_EXPLORATION_HISTORY",e)},addBookmark({commit:t},e){t("ADD_BOOKMARK",e)},removeBookmark({commit:t},e){t("REMOVE_BOOKMARK",e)},createPersonalPath({commit:t},e){t("CREATE_PERSONAL_PATH",e)},loadFromLocalStorage({commit:t}){t("LOAD_FROM_LOCALSTORAGE")},resetPlatformMode({commit:t}){t("RESET_PLATFORM_MODE")}},getters:{learningMode:t=>t.learningMode,isSchoolMode:t=>t.learningMode==="school",isStudyCentreMode:t=>t.learningMode==="study_centre",isHybridMode:t=>t.learningMode==="hybrid",hasSelectedMode:t=>t.learningMode!==null,schoolProfile:t=>t.schoolProfile,studyCentreProfile:t=>t.studyCentreProfile,currentGrade:t=>t.schoolProfile.currentGrade,currentLevelCap:t=>t.schoolProfile.currentLevelCap,accessibleLevels:t=>t.schoolProfile.accessibleLevels,placementTestTaken:t=>t.schoolProfile.placementTestTaken,placementTestResults:t=>({score:t.schoolProfile.placementTestScore,level:t.schoolProfile.assignedLevel,grade:t.schoolProfile.currentGrade,date:t.schoolProfile.placementTestDate}),canAccessLevel:t=>e=>{if(t.learningMode==="study_centre")return!0;if(t.learningMode==="school"){const s=t.schoolProfile.accessibleLevels.includes(e),r=!t.schoolProfile.lockedLevels.includes(e),n=e<=t.schoolProfile.currentLevelCap;return s||r&&n}return t.studyCentreProfile.preferences.showAllLevels||t.schoolProfile.accessibleLevels.includes(e)},isLevelCompleted:t=>e=>t.schoolProfile.completedLevels.some(s=>s.level===e),nextUnlockableLevel:t=>t.learningMode==="study_centre"?null:t.schoolProfile.currentLevelCap+1,levelProgress:t=>{const s=t.schoolProfile.completedLevels.length;return Math.round(s/20*100)},bookmarkedCourses:t=>t.studyCentreProfile.bookmarkedCourses,isBookmarked:t=>e=>t.studyCentreProfile.bookmarkedCourses.some(s=>s.courseId===e),personalPaths:t=>t.studyCentreProfile.personalPaths,modeHistory:t=>t.modeHistory,getLevelGrade:t=>e=>t.levelGradeMapping[e]||"Unknown"}},ZM=()=>{};var X1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e[s++]=n:n<2048?(e[s++]=n>>6|192,e[s++]=n&63|128):(n&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=n>>18|240,e[s++]=n>>12&63|128,e[s++]=n>>6&63|128,e[s++]=n&63|128):(e[s++]=n>>12|224,e[s++]=n>>6&63|128,e[s++]=n&63|128)}return e},eD=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const n=t[s++];if(n<128)e[r++]=String.fromCharCode(n);else if(n>191&&n<224){const i=t[s++];e[r++]=String.fromCharCode((n&31)<<6|i&63)}else if(n>239&&n<365){const i=t[s++],o=t[s++],l=t[s++],c=((n&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[s++],o=t[s++];e[r++]=String.fromCharCode((n&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<t.length;n+=3){const i=t[n],o=n+1<t.length,l=o?t[n+1]:0,c=n+2<t.length,u=c?t[n+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(s[d],s[f],s[p],s[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<t.length;){const i=s[t.charAt(n++)],l=n<t.length?s[t.charAt(n)]:0;++n;const u=n<t.length?s[t.charAt(n)]:64;++n;const f=n<t.length?s[t.charAt(n)]:64;if(++n,i==null||l==null||u==null||f==null)throw new tD;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sD=function(t){const e=PE(t);return xE.encodeByteArray(e,!0)},Id=function(t){return sD(t).replace(/\./g,"")},LE=function(t){try{return xE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=()=>rD().__FIREBASE_DEFAULTS__,iD=()=>{if(typeof process>"u"||typeof X1>"u")return;const t=X1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},Oh=()=>{try{return ZM()||nD()||iD()||oD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RE=t=>{var e,s;return(s=(e=Oh())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},aD=t=>{const e=RE(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},NE=()=>{var t;return(t=Oh())===null||t===void 0?void 0:t.config},OE=t=>{var e;return(e=Oh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",n=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Id(JSON.stringify(s)),Id(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Os())}function dD(){var t;const e=(t=Oh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pD(){const t=Os();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mD(){return!dD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yg(){try{return typeof indexedDB=="object"}catch{return!1}}function Qg(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},n.onupgradeneeded=()=>{s=!1},n.onerror=()=>{var i;e(((i=n.error)===null||i===void 0?void 0:i.message)||"")}}catch(s){e(s)}})}function ME(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="FirebaseError";class Mr extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=gD,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},n=`${this.service}/${e}`,i=this.errors[e],o=i?yD(i,r):"Error",l=`${this.serviceName}: ${o} (${n}).`;return new Mr(n,l,r)}}function yD(t,e){return t.replace(vD,(s,r)=>{const n=e[r];return n!=null?String(n):`<${r}?>`})}const vD=/\{\$([^}]+)}/g;function _D(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gi(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const n of s){if(!r.includes(n))return!1;const i=t[n],o=e[n];if(J1(i)&&J1(o)){if(!gi(i,o))return!1}else if(i!==o)return!1}for(const n of r)if(!s.includes(n))return!1;return!0}function J1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(n=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[n,i]=r.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}}),e}function wl(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function bD(t,e){const s=new wD(t,e);return s.subscribe.bind(s)}class wD{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let n;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");SD(e,["next","error","complete"])?n=e:n={next:e,error:s,complete:r},n.next===void 0&&(n.next=vp),n.error===void 0&&(n.error=vp),n.complete===void 0&&(n.complete=vp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SD(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function vp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=1e3,TD=2,kD=4*60*60*1e3,ID=.5;function Z1(t,e=ED,s=TD){const r=e*Math.pow(s,t),n=Math.round(ID*r*(Math.random()-.5)*2);return Math.min(kD,r+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){return t.endsWith(".cloudworkstations.dev")}async function DE(t){return(await fetch(t,{credentials:"include"})).ok}class Nr{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new lD;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:s});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PD(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:n});r.resolve(i)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(n)}return n}onInit(e,s){var r;const n=this.normalizeInstanceIdentifier(s),i=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const n of r)try{n(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AD(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AD(t){return t===Wi?void 0:t}function PD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new CD(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const LD={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},RD=tt.INFO,ND={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},OD=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),n=ND[e];if(n)console[n](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dh{constructor(e){this.name=e,this._logLevel=RD,this._logHandler=OD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const MD=(t,e)=>e.some(s=>t instanceof s);let e_,t_;function DD(){return e_||(e_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $D(){return t_||(t_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $E=new WeakMap,_m=new WeakMap,UE=new WeakMap,_p=new WeakMap,Xg=new WeakMap;function UD(t){const e=new Promise((s,r)=>{const n=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{s(ci(t.result)),n()},o=()=>{r(t.error),n()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(s=>{s instanceof IDBCursor&&$E.set(s,t)}).catch(()=>{}),Xg.set(e,t),e}function FD(t){if(_m.has(t))return;const e=new Promise((s,r)=>{const n=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{s(),n()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_m.set(t,e)}let bm={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return _m.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UE.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ci(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VD(t){bm=t(bm)}function BD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(bp(this),e,...s);return UE.set(r,e.sort?e.sort():[e]),ci(r)}:$D().includes(t)?function(...e){return t.apply(bp(this),e),ci($E.get(this))}:function(...e){return ci(t.apply(bp(this),e))}}function qD(t){return typeof t=="function"?BD(t):(t instanceof IDBTransaction&&FD(t),MD(t,DD())?new Proxy(t,bm):t)}function ci(t){if(t instanceof IDBRequest)return UD(t);if(_p.has(t))return _p.get(t);const e=qD(t);return e!==t&&(_p.set(t,e),Xg.set(e,t)),e}const bp=t=>Xg.get(t);function FE(t,e,{blocked:s,upgrade:r,blocking:n,terminated:i}={}){const o=indexedDB.open(t,e),l=ci(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ci(o.result),c.oldVersion,c.newVersion,ci(o.transaction),c)}),s&&o.addEventListener("blocked",c=>s(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),n&&c.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const jD=["get","getKey","getAll","getAllKeys","count"],HD=["put","add","delete","clear"],wp=new Map;function s_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wp.get(e))return wp.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,n=HD.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(n||jD.includes(s)))return;const i=async function(o,...l){const c=this.transaction(o,n?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[s](...l),n&&c.done]))[0]};return wp.set(e,i),i}VD(t=>({...t,get:(e,s,r)=>s_(e,s)||t.get(e,s,r),has:(e,s)=>!!s_(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(zD(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function zD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wm="@firebase/app",r_="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new Dh("@firebase/app"),GD="@firebase/app-compat",KD="@firebase/analytics-compat",YD="@firebase/analytics",QD="@firebase/app-check-compat",XD="@firebase/app-check",JD="@firebase/auth",ZD="@firebase/auth-compat",e3="@firebase/database",t3="@firebase/data-connect",s3="@firebase/database-compat",r3="@firebase/functions",n3="@firebase/functions-compat",i3="@firebase/installations",o3="@firebase/installations-compat",a3="@firebase/messaging",l3="@firebase/messaging-compat",c3="@firebase/performance",u3="@firebase/performance-compat",d3="@firebase/remote-config",h3="@firebase/remote-config-compat",f3="@firebase/storage",p3="@firebase/storage-compat",m3="@firebase/firestore",g3="@firebase/vertexai",y3="@firebase/firestore-compat",v3="firebase",_3="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="[DEFAULT]",b3={[wm]:"fire-core",[GD]:"fire-core-compat",[YD]:"fire-analytics",[KD]:"fire-analytics-compat",[XD]:"fire-app-check",[QD]:"fire-app-check-compat",[JD]:"fire-auth",[ZD]:"fire-auth-compat",[e3]:"fire-rtdb",[t3]:"fire-data-connect",[s3]:"fire-rtdb-compat",[r3]:"fire-fn",[n3]:"fire-fn-compat",[i3]:"fire-iid",[o3]:"fire-iid-compat",[a3]:"fire-fcm",[l3]:"fire-fcm-compat",[c3]:"fire-perf",[u3]:"fire-perf-compat",[d3]:"fire-rc",[h3]:"fire-rc-compat",[f3]:"fire-gcs",[p3]:"fire-gcs-compat",[m3]:"fire-fst",[y3]:"fire-fst-compat",[g3]:"fire-vertex","fire-js":"fire-js",[v3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,w3=new Map,Em=new Map;function n_(t,e){try{t.container.addComponent(e)}catch(s){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function sn(t){const e=t.name;if(Em.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,t);for(const s of Cd.values())n_(s,t);for(const s of w3.values())n_(s,t);return!0}function Ro(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function Ys(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Lo("app","Firebase",S3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=_3;function VE(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sm,automaticDataCollectionEnabled:!1},e),n=r.name;if(typeof n!="string"||!n)throw ui.create("bad-app-name",{appName:String(n)});if(s||(s=NE()),!s)throw ui.create("no-options");const i=Cd.get(n);if(i){if(gi(s,i.options)&&gi(r,i.config))return i;throw ui.create("duplicate-app",{appName:n})}const o=new xD(n);for(const c of Em.values())o.addComponent(c);const l=new E3(s,r,o);return Cd.set(n,l),l}function Jg(t=Sm){const e=Cd.get(t);if(!e&&t===Sm&&NE())return VE();if(!e)throw ui.create("no-app",{appName:t});return e}function mr(t,e,s){var r;let n=(r=b3[t])!==null&&r!==void 0?r:t;s&&(n+=`-${s}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${n}" with version "${e}":`];i&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(l.join(" "));return}sn(new Nr(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="firebase-heartbeat-database",k3=1,ic="firebase-heartbeat-store";let Sp=null;function BE(){return Sp||(Sp=FE(T3,k3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ic)}catch(s){console.warn(s)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),Sp}async function I3(t){try{const s=(await BE()).transaction(ic),r=await s.objectStore(ic).get(qE(t));return await s.done,r}catch(e){if(e instanceof Mr)Nn.warn(e.message);else{const s=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(s.message)}}}async function i_(t,e){try{const r=(await BE()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,qE(t)),await r.done}catch(s){if(s instanceof Mr)Nn.warn(s.message);else{const r=ui.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Nn.warn(r.message)}}}function qE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=1024,A3=30;class P3{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new L3(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=o_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>A3){const o=R3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=o_(),{heartbeatsToSend:r,unsentEntries:n}=x3(this._heartbeatsCache.heartbeats),i=Id(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return Nn.warn(s),""}}}function o_(){return new Date().toISOString().substring(0,10)}function x3(t,e=C3){const s=[];let r=t.slice();for(const n of t){const i=s.find(o=>o.agent===n.agent);if(i){if(i.dates.push(n.date),a_(s)>e){i.dates.pop();break}}else if(s.push({agent:n.agent,dates:[n.date]}),a_(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class L3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yg()?Qg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await I3(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const n=await this.read();return i_(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const n=await this.read();return i_(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function a_(t){return Id(JSON.stringify({version:2,heartbeats:t})).length}function R3(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let r=1;r<t.length;r++)t[r].date<s&&(s=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){sn(new Nr("platform-logger",e=>new WD(e),"PRIVATE")),sn(new Nr("heartbeat",e=>new P3(e),"PRIVATE")),mr(wm,r_,t),mr(wm,r_,"esm2017"),mr("fire-js","")}N3("");var O3="firebase",M3="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(O3,M3,"app");var l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,jE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,w){function _(){}_.prototype=w.prototype,C.D=w.prototype,C.prototype=new _,C.prototype.constructor=C,C.C=function(x,P,O){for(var M=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)M[ae-2]=arguments[ae];return w.prototype[P].apply(x,M)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(C,w,_){_||(_=0);var x=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)x[P]=w.charCodeAt(_++)|w.charCodeAt(_++)<<8|w.charCodeAt(_++)<<16|w.charCodeAt(_++)<<24;else for(P=0;16>P;++P)x[P]=w[_++]|w[_++]<<8|w[_++]<<16|w[_++]<<24;w=C.g[0],_=C.g[1],P=C.g[2];var O=C.g[3],M=w+(O^_&(P^O))+x[0]+3614090360&4294967295;w=_+(M<<7&4294967295|M>>>25),M=O+(P^w&(_^P))+x[1]+3905402710&4294967295,O=w+(M<<12&4294967295|M>>>20),M=P+(_^O&(w^_))+x[2]+606105819&4294967295,P=O+(M<<17&4294967295|M>>>15),M=_+(w^P&(O^w))+x[3]+3250441966&4294967295,_=P+(M<<22&4294967295|M>>>10),M=w+(O^_&(P^O))+x[4]+4118548399&4294967295,w=_+(M<<7&4294967295|M>>>25),M=O+(P^w&(_^P))+x[5]+1200080426&4294967295,O=w+(M<<12&4294967295|M>>>20),M=P+(_^O&(w^_))+x[6]+2821735955&4294967295,P=O+(M<<17&4294967295|M>>>15),M=_+(w^P&(O^w))+x[7]+4249261313&4294967295,_=P+(M<<22&4294967295|M>>>10),M=w+(O^_&(P^O))+x[8]+1770035416&4294967295,w=_+(M<<7&4294967295|M>>>25),M=O+(P^w&(_^P))+x[9]+2336552879&4294967295,O=w+(M<<12&4294967295|M>>>20),M=P+(_^O&(w^_))+x[10]+4294925233&4294967295,P=O+(M<<17&4294967295|M>>>15),M=_+(w^P&(O^w))+x[11]+2304563134&4294967295,_=P+(M<<22&4294967295|M>>>10),M=w+(O^_&(P^O))+x[12]+1804603682&4294967295,w=_+(M<<7&4294967295|M>>>25),M=O+(P^w&(_^P))+x[13]+4254626195&4294967295,O=w+(M<<12&4294967295|M>>>20),M=P+(_^O&(w^_))+x[14]+2792965006&4294967295,P=O+(M<<17&4294967295|M>>>15),M=_+(w^P&(O^w))+x[15]+1236535329&4294967295,_=P+(M<<22&4294967295|M>>>10),M=w+(P^O&(_^P))+x[1]+4129170786&4294967295,w=_+(M<<5&4294967295|M>>>27),M=O+(_^P&(w^_))+x[6]+3225465664&4294967295,O=w+(M<<9&4294967295|M>>>23),M=P+(w^_&(O^w))+x[11]+643717713&4294967295,P=O+(M<<14&4294967295|M>>>18),M=_+(O^w&(P^O))+x[0]+3921069994&4294967295,_=P+(M<<20&4294967295|M>>>12),M=w+(P^O&(_^P))+x[5]+3593408605&4294967295,w=_+(M<<5&4294967295|M>>>27),M=O+(_^P&(w^_))+x[10]+38016083&4294967295,O=w+(M<<9&4294967295|M>>>23),M=P+(w^_&(O^w))+x[15]+3634488961&4294967295,P=O+(M<<14&4294967295|M>>>18),M=_+(O^w&(P^O))+x[4]+3889429448&4294967295,_=P+(M<<20&4294967295|M>>>12),M=w+(P^O&(_^P))+x[9]+568446438&4294967295,w=_+(M<<5&4294967295|M>>>27),M=O+(_^P&(w^_))+x[14]+3275163606&4294967295,O=w+(M<<9&4294967295|M>>>23),M=P+(w^_&(O^w))+x[3]+4107603335&4294967295,P=O+(M<<14&4294967295|M>>>18),M=_+(O^w&(P^O))+x[8]+1163531501&4294967295,_=P+(M<<20&4294967295|M>>>12),M=w+(P^O&(_^P))+x[13]+2850285829&4294967295,w=_+(M<<5&4294967295|M>>>27),M=O+(_^P&(w^_))+x[2]+4243563512&4294967295,O=w+(M<<9&4294967295|M>>>23),M=P+(w^_&(O^w))+x[7]+1735328473&4294967295,P=O+(M<<14&4294967295|M>>>18),M=_+(O^w&(P^O))+x[12]+2368359562&4294967295,_=P+(M<<20&4294967295|M>>>12),M=w+(_^P^O)+x[5]+4294588738&4294967295,w=_+(M<<4&4294967295|M>>>28),M=O+(w^_^P)+x[8]+2272392833&4294967295,O=w+(M<<11&4294967295|M>>>21),M=P+(O^w^_)+x[11]+1839030562&4294967295,P=O+(M<<16&4294967295|M>>>16),M=_+(P^O^w)+x[14]+4259657740&4294967295,_=P+(M<<23&4294967295|M>>>9),M=w+(_^P^O)+x[1]+2763975236&4294967295,w=_+(M<<4&4294967295|M>>>28),M=O+(w^_^P)+x[4]+1272893353&4294967295,O=w+(M<<11&4294967295|M>>>21),M=P+(O^w^_)+x[7]+4139469664&4294967295,P=O+(M<<16&4294967295|M>>>16),M=_+(P^O^w)+x[10]+3200236656&4294967295,_=P+(M<<23&4294967295|M>>>9),M=w+(_^P^O)+x[13]+681279174&4294967295,w=_+(M<<4&4294967295|M>>>28),M=O+(w^_^P)+x[0]+3936430074&4294967295,O=w+(M<<11&4294967295|M>>>21),M=P+(O^w^_)+x[3]+3572445317&4294967295,P=O+(M<<16&4294967295|M>>>16),M=_+(P^O^w)+x[6]+76029189&4294967295,_=P+(M<<23&4294967295|M>>>9),M=w+(_^P^O)+x[9]+3654602809&4294967295,w=_+(M<<4&4294967295|M>>>28),M=O+(w^_^P)+x[12]+3873151461&4294967295,O=w+(M<<11&4294967295|M>>>21),M=P+(O^w^_)+x[15]+530742520&4294967295,P=O+(M<<16&4294967295|M>>>16),M=_+(P^O^w)+x[2]+3299628645&4294967295,_=P+(M<<23&4294967295|M>>>9),M=w+(P^(_|~O))+x[0]+4096336452&4294967295,w=_+(M<<6&4294967295|M>>>26),M=O+(_^(w|~P))+x[7]+1126891415&4294967295,O=w+(M<<10&4294967295|M>>>22),M=P+(w^(O|~_))+x[14]+2878612391&4294967295,P=O+(M<<15&4294967295|M>>>17),M=_+(O^(P|~w))+x[5]+4237533241&4294967295,_=P+(M<<21&4294967295|M>>>11),M=w+(P^(_|~O))+x[12]+1700485571&4294967295,w=_+(M<<6&4294967295|M>>>26),M=O+(_^(w|~P))+x[3]+2399980690&4294967295,O=w+(M<<10&4294967295|M>>>22),M=P+(w^(O|~_))+x[10]+4293915773&4294967295,P=O+(M<<15&4294967295|M>>>17),M=_+(O^(P|~w))+x[1]+2240044497&4294967295,_=P+(M<<21&4294967295|M>>>11),M=w+(P^(_|~O))+x[8]+1873313359&4294967295,w=_+(M<<6&4294967295|M>>>26),M=O+(_^(w|~P))+x[15]+4264355552&4294967295,O=w+(M<<10&4294967295|M>>>22),M=P+(w^(O|~_))+x[6]+2734768916&4294967295,P=O+(M<<15&4294967295|M>>>17),M=_+(O^(P|~w))+x[13]+1309151649&4294967295,_=P+(M<<21&4294967295|M>>>11),M=w+(P^(_|~O))+x[4]+4149444226&4294967295,w=_+(M<<6&4294967295|M>>>26),M=O+(_^(w|~P))+x[11]+3174756917&4294967295,O=w+(M<<10&4294967295|M>>>22),M=P+(w^(O|~_))+x[2]+718787259&4294967295,P=O+(M<<15&4294967295|M>>>17),M=_+(O^(P|~w))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+O&4294967295}r.prototype.u=function(C,w){w===void 0&&(w=C.length);for(var _=w-this.blockSize,x=this.B,P=this.h,O=0;O<w;){if(P==0)for(;O<=_;)n(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<w;)if(x[P++]=C.charCodeAt(O++),P==this.blockSize){n(this,x),P=0;break}}else for(;O<w;)if(x[P++]=C[O++],P==this.blockSize){n(this,x),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;var _=8*this.o;for(w=C.length-8;w<C.length;++w)C[w]=_&255,_/=256;for(this.u(C),C=Array(16),w=_=0;4>w;++w)for(var x=0;32>x;x+=8)C[_++]=this.g[w]>>>x&255;return C};function i(C,w){var _=l;return Object.prototype.hasOwnProperty.call(_,C)?_[C]:_[C]=w(C)}function o(C,w){this.h=w;for(var _=[],x=!0,P=C.length-1;0<=P;P--){var O=C[P]|0;x&&O==w||(_[P]=O,x=!1)}this.g=_}var l={};function c(C){return-128<=C&&128>C?i(C,function(w){return new o([w|0],0>w?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return L(u(-C));for(var w=[],_=1,x=0;C>=_;x++)w[x]=C/_|0,_*=4294967296;return new o(w,0)}function d(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return L(d(C.substring(1),w));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(w,8)),x=f,P=0;P<C.length;P+=8){var O=Math.min(8,C.length-P),M=parseInt(C.substring(P,P+O),w);8>O?(O=u(Math.pow(w,O)),x=x.j(O).add(u(M))):(x=x.j(_),x=x.add(u(M)))}return x}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-L(this).m();for(var C=0,w=1,_=0;_<this.g.length;_++){var x=this.i(_);C+=(0<=x?x:4294967296+x)*w,w*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(k(this))return"-"+L(this).toString(C);for(var w=u(Math.pow(C,6)),_=this,x="";;){var P=N(_,w).g;_=V(_,P.j(w));var O=((0<_.g.length?_.g[0]:_.h)>>>0).toString(C);if(_=P,b(_))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function k(C){return C.h==-1}t.l=function(C){return C=V(this,C),k(C)?-1:b(C)?0:1};function L(C){for(var w=C.g.length,_=[],x=0;x<w;x++)_[x]=~C.g[x];return new o(_,~C.h).add(p)}t.abs=function(){return k(this)?L(this):this},t.add=function(C){for(var w=Math.max(this.g.length,C.g.length),_=[],x=0,P=0;P<=w;P++){var O=x+(this.i(P)&65535)+(C.i(P)&65535),M=(O>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);x=M>>>16,O&=65535,M&=65535,_[P]=M<<16|O}return new o(_,_[_.length-1]&-2147483648?-1:0)};function V(C,w){return C.add(L(w))}t.j=function(C){if(b(this)||b(C))return f;if(k(this))return k(C)?L(this).j(L(C)):L(L(this).j(C));if(k(C))return L(this.j(L(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var w=this.g.length+C.g.length,_=[],x=0;x<2*w;x++)_[x]=0;for(x=0;x<this.g.length;x++)for(var P=0;P<C.g.length;P++){var O=this.i(x)>>>16,M=this.i(x)&65535,ae=C.i(P)>>>16,fe=C.i(P)&65535;_[2*x+2*P]+=M*fe,R(_,2*x+2*P),_[2*x+2*P+1]+=O*fe,R(_,2*x+2*P+1),_[2*x+2*P+1]+=M*ae,R(_,2*x+2*P+1),_[2*x+2*P+2]+=O*ae,R(_,2*x+2*P+2)}for(x=0;x<w;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=w;x<2*w;x++)_[x]=0;return new o(_,0)};function R(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function E(C,w){this.g=C,this.h=w}function N(C,w){if(b(w))throw Error("division by zero");if(b(C))return new E(f,f);if(k(C))return w=N(L(C),w),new E(L(w.g),L(w.h));if(k(w))return w=N(C,L(w)),new E(L(w.g),w.h);if(30<C.g.length){if(k(C)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var _=p,x=w;0>=x.l(C);)_=D(_),x=D(x);var P=U(_,1),O=U(x,1);for(x=U(x,2),_=U(_,2);!b(x);){var M=O.add(x);0>=M.l(C)&&(P=P.add(_),O=M),x=U(x,1),_=U(_,1)}return w=V(C,P.j(w)),new E(P,w)}for(P=f;0<=C.l(w);){for(_=Math.max(1,Math.floor(C.m()/w.m())),x=Math.ceil(Math.log(_)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=u(_),M=O.j(w);k(M)||0<M.l(C);)_-=x,O=u(_),M=O.j(w);b(O)&&(O=p),P=P.add(O),C=V(C,M)}return new E(P,C)}t.A=function(C){return N(this,C).h},t.and=function(C){for(var w=Math.max(this.g.length,C.g.length),_=[],x=0;x<w;x++)_[x]=this.i(x)&C.i(x);return new o(_,this.h&C.h)},t.or=function(C){for(var w=Math.max(this.g.length,C.g.length),_=[],x=0;x<w;x++)_[x]=this.i(x)|C.i(x);return new o(_,this.h|C.h)},t.xor=function(C){for(var w=Math.max(this.g.length,C.g.length),_=[],x=0;x<w;x++)_[x]=this.i(x)^C.i(x);return new o(_,this.h^C.h)};function D(C){for(var w=C.g.length+1,_=[],x=0;x<w;x++)_[x]=C.i(x)<<1|C.i(x-1)>>>31;return new o(_,C.h)}function U(C,w){var _=w>>5;w%=32;for(var x=C.g.length-_,P=[],O=0;O<x;O++)P[O]=0<w?C.i(O+_)>>>w|C.i(O+_+1)<<32-w:C.i(O+_);return new o(P,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,di=o}).apply(typeof l_<"u"?l_:typeof self<"u"?self:typeof window<"u"?window:{});var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HE,Sl,WE,Hu,Tm,zE,GE,KE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,T){return h==Array.prototype||h==Object.prototype||(h[y]=T.value),h};function s(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ku=="object"&&ku];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=s(this);function n(h,y){if(y)e:{var T=r;h=h.split(".");for(var F=0;F<h.length-1;F++){var K=h[F];if(!(K in T))break e;T=T[K]}h=h[h.length-1],F=T[h],y=y(F),y!=F&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}function i(h,y){h instanceof String&&(h+="");var T=0,F=!1,K={next:function(){if(!F&&T<h.length){var J=T++;return{value:y(J,h[J]),done:!1}}return F=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}n("Array.prototype.values",function(h){return h||function(){return i(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function u(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function d(h,y,T){return h.call.apply(h.bind,arguments)}function f(h,y,T){if(!h)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,F),h.apply(y,K)}}return function(){return h.apply(y,arguments)}}function p(h,y,T){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function g(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var F=T.slice();return F.push.apply(F,arguments),h.apply(this,F)}}function b(h,y){function T(){}T.prototype=y.prototype,h.aa=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(F,K,J){for(var ve=Array(arguments.length-2),St=2;St<arguments.length;St++)ve[St-2]=arguments[St];return y.prototype[K].apply(F,ve)}}function k(h){const y=h.length;if(0<y){const T=Array(y);for(let F=0;F<y;F++)T[F]=h[F];return T}return[]}function L(h,y){for(let T=1;T<arguments.length;T++){const F=arguments[T];if(c(F)){const K=h.length||0,J=F.length||0;h.length=K+J;for(let ve=0;ve<J;ve++)h[K+ve]=F[ve]}else h.push(F)}}class V{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function R(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function N(h){return N[" "](h),h}N[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function U(h,y,T){for(const F in h)y.call(T,h[F],F,h)}function C(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function w(h){const y={};for(const T in h)y[T]=h[T];return y}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(h,y){let T,F;for(let K=1;K<arguments.length;K++){F=arguments[K];for(T in F)h[T]=F[T];for(let J=0;J<_.length;J++)T=_[J],Object.prototype.hasOwnProperty.call(F,T)&&(h[T]=F[T])}}function P(h){var y=1;h=h.split(":");const T=[];for(;0<y&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function O(h){l.setTimeout(()=>{throw h},0)}function M(){var h=$e;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,T){const F=fe.get();F.set(y,T),this.h?this.h.next=F:this.g=F,this.h=F}}var fe=new V(()=>new de,h=>h.reset());class de{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ue=!1,$e=new ae,_e=()=>{const h=l.Promise.resolve(void 0);Z=()=>{h.then(Oe)}};var Oe=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(T){O(T)}var y=fe;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ue=!1};function Ve(){this.s=this.s,this.C=this.C}Ve.prototype.s=!1,Ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Qe(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var bt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};l.addEventListener("test",T,y),l.removeEventListener("test",T,y)}catch{}return h}();function Ct(h,y){if(Qe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,F=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(D){e:{try{N(y.nodeName);var K=!0;break e}catch{}K=!1}K||(y=null)}}else T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement);this.relatedTarget=y,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:$t[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ct.aa.h.call(this)}}b(Ct,Qe);var $t={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),we=0;function ye(h,y,T,F,K){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!F,this.ha=K,this.key=++we,this.da=this.fa=!1}function Te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h){this.src=h,this.g={},this.h=0}ze.prototype.add=function(h,y,T,F,K){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var ve=A(h,y,F,K);return-1<ve?(y=h[ve],T||(y.fa=!1)):(y=new ye(y,this.src,J,!!F,K),y.fa=T,h.push(y)),y};function je(h,y){var T=y.type;if(T in h.g){var F=h.g[T],K=Array.prototype.indexOf.call(F,y,void 0),J;(J=0<=K)&&Array.prototype.splice.call(F,K,1),J&&(Te(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function A(h,y,T,F){for(var K=0;K<h.length;++K){var J=h[K];if(!J.da&&J.listener==y&&J.capture==!!T&&J.ha==F)return K}return-1}var I="closure_lm_"+(1e6*Math.random()|0),j={};function W(h,y,T,F,K){if(Array.isArray(y)){for(var J=0;J<y.length;J++)W(h,y[J],T,F,K);return null}return T=ne(T),h&&h[te]?h.K(y,T,u(F)?!!F.capture:!1,K):z(h,y,T,!1,F,K)}function z(h,y,T,F,K,J){if(!y)throw Error("Invalid event type");var ve=u(K)?!!K.capture:!!K,St=re(h);if(St||(h[I]=St=new ze(h)),T=St.add(y,T,F,ve,J),T.proxy)return T;if(F=Y(),T.proxy=F,F.src=h,F.listener=T,h.addEventListener)bt||(K=ve),K===void 0&&(K=!1),h.addEventListener(y.toString(),F,K);else if(h.attachEvent)h.attachEvent(B(y.toString()),F);else if(h.addListener&&h.removeListener)h.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Y(){function h(T){return y.call(h.src,h.listener,T)}const y=q;return h}function ee(h,y,T,F,K){if(Array.isArray(y))for(var J=0;J<y.length;J++)ee(h,y[J],T,F,K);else F=u(F)?!!F.capture:!!F,T=ne(T),h&&h[te]?(h=h.i,y=String(y).toString(),y in h.g&&(J=h.g[y],T=A(J,T,F,K),-1<T&&(Te(J[T]),Array.prototype.splice.call(J,T,1),J.length==0&&(delete h.g[y],h.h--)))):h&&(h=re(h))&&(y=h.g[y.toString()],h=-1,y&&(h=A(y,T,F,K)),(T=-1<h?y[h]:null)&&$(T))}function $(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[te])je(y.i,h);else{var T=h.type,F=h.proxy;y.removeEventListener?y.removeEventListener(T,F,h.capture):y.detachEvent?y.detachEvent(B(T),F):y.addListener&&y.removeListener&&y.removeListener(F),(T=re(y))?(je(T,h),T.h==0&&(T.src=null,y[I]=null)):Te(h)}}}function B(h){return h in j?j[h]:j[h]="on"+h}function q(h,y){if(h.da)h=!0;else{y=new Ct(y,this);var T=h.listener,F=h.ha||h.src;h.fa&&$(h),h=T.call(F,y)}return h}function re(h){return h=h[I],h instanceof ze?h:null}var le="__closure_events_fn_"+(1e9*Math.random()>>>0);function ne(h){return typeof h=="function"?h:(h[le]||(h[le]=function(y){return h.handleEvent(y)}),h[le])}function H(){Ve.call(this),this.i=new ze(this),this.M=this,this.F=null}b(H,Ve),H.prototype[te]=!0,H.prototype.removeEventListener=function(h,y,T,F){ee(this,h,y,T,F)};function Q(h,y){var T,F=h.F;if(F)for(T=[];F;F=F.F)T.push(F);if(h=h.M,F=y.type||y,typeof y=="string")y=new Qe(y,h);else if(y instanceof Qe)y.target=y.target||h;else{var K=y;y=new Qe(F,h),x(y,K)}if(K=!0,T)for(var J=T.length-1;0<=J;J--){var ve=y.g=T[J];K=Ce(ve,F,!0,y)&&K}if(ve=y.g=h,K=Ce(ve,F,!0,y)&&K,K=Ce(ve,F,!1,y)&&K,T)for(J=0;J<T.length;J++)ve=y.g=T[J],K=Ce(ve,F,!1,y)&&K}H.prototype.N=function(){if(H.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var T=h.g[y],F=0;F<T.length;F++)Te(T[F]);delete h.g[y],h.h--}}this.F=null},H.prototype.K=function(h,y,T,F){return this.i.add(String(h),y,!1,T,F)},H.prototype.L=function(h,y,T,F){return this.i.add(String(h),y,!0,T,F)};function Ce(h,y,T,F){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var K=!0,J=0;J<y.length;++J){var ve=y[J];if(ve&&!ve.da&&ve.capture==T){var St=ve.listener,hs=ve.ha||ve.src;ve.fa&&je(h.i,ve),K=St.call(hs,F)!==!1&&K}}return K&&!F.defaultPrevented}function Ae(h,y,T){if(typeof h=="function")T&&(h=p(h,T));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:l.setTimeout(h,y||0)}function mt(h){h.g=Ae(()=>{h.g=null,h.i&&(h.i=!1,mt(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Et extends Ve{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(h){Ve.call(this),this.h=h,this.g={}}b(Lt,Ve);var os=[];function on(h){U(h.g,function(y,T){this.g.hasOwnProperty(T)&&$(y)},h),h.g={}}Lt.prototype.N=function(){Lt.aa.N.call(this),on(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $o=l.JSON.stringify,Ms=l.JSON.parse,ur=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Uo(){}Uo.prototype.h=null;function e0(h){return h.h||(h.h=h.i())}function t0(){}var Xa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bf(){Qe.call(this,"d")}b(Bf,Qe);function qf(){Qe.call(this,"c")}b(qf,Qe);var $i={},s0=null;function eu(){return s0=s0||new H}$i.La="serverreachability";function r0(h){Qe.call(this,$i.La,h)}b(r0,Qe);function Ja(h){const y=eu();Q(y,new r0(y))}$i.STAT_EVENT="statevent";function n0(h,y){Qe.call(this,$i.STAT_EVENT,h),this.stat=y}b(n0,Qe);function Ds(h){const y=eu();Q(y,new n0(y,h))}$i.Ma="timingevent";function i0(h,y){Qe.call(this,$i.Ma,h),this.size=y}b(i0,Qe);function Za(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},y)}function el(){this.g=!0}el.prototype.xa=function(){this.g=!1};function Wx(h,y,T,F,K,J){h.info(function(){if(h.g)if(J)for(var ve="",St=J.split("&"),hs=0;hs<St.length;hs++){var lt=St[hs].split("=");if(1<lt.length){var _s=lt[0];lt=lt[1];var bs=_s.split("_");ve=2<=bs.length&&bs[1]=="type"?ve+(_s+"="+lt+"&"):ve+(_s+"=redacted&")}}else ve=null;else ve=J;return"XMLHTTP REQ ("+F+") [attempt "+K+"]: "+y+`
`+T+`
`+ve})}function zx(h,y,T,F,K,J,ve){h.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+K+"]: "+y+`
`+T+`
`+J+" "+ve})}function Fo(h,y,T,F){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Kx(h,T)+(F?" "+F:"")})}function Gx(h,y){h.info(function(){return"TIMEOUT: "+y})}el.prototype.info=function(){};function Kx(h,y){if(!h.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var F=T[h];if(!(2>F.length)){var K=F[1];if(Array.isArray(K)&&!(1>K.length)){var J=K[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ve=1;ve<K.length;ve++)K[ve]=""}}}}return $o(T)}catch{return y}}var tu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},o0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jf;function su(){}b(su,Uo),su.prototype.g=function(){return new XMLHttpRequest},su.prototype.i=function(){return{}},jf=new su;function Vn(h,y,T,F){this.j=h,this.i=y,this.l=T,this.R=F||1,this.U=new Lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new a0}function a0(){this.i=null,this.g="",this.h=!1}var l0={},Hf={};function Wf(h,y,T){h.L=1,h.v=ou(an(y)),h.m=T,h.P=!0,c0(h,null)}function c0(h,y){h.F=Date.now(),ru(h),h.A=an(h.v);var T=h.A,F=h.R;Array.isArray(F)||(F=[String(F)]),E0(T.i,"t",F),h.C=0,T=h.j.J,h.h=new a0,h.g=B0(h.j,T?y:null,!h.m),0<h.O&&(h.M=new Et(p(h.Y,h,h.g),h.O)),y=h.U,T=h.g,F=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(os[0]=K.toString()),K=os);for(var J=0;J<K.length;J++){var ve=W(T,K[J],F||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ja(),Wx(h.i,h.u,h.A,h.l,h.R,h.m)}Vn.prototype.ca=function(h){h=h.target;const y=this.M;y&&ln(h)==3?y.j():this.Y(h)},Vn.prototype.Y=function(h){try{if(h==this.g)e:{const bs=ln(this.g);var y=this.g.Ba();const qo=this.g.Z();if(!(3>bs)&&(bs!=3||this.g&&(this.h.h||this.g.oa()||x0(this.g)))){this.J||bs!=4||y==7||(y==8||0>=qo?Ja(3):Ja(2)),zf(this);var T=this.g.Z();this.X=T;t:if(u0(this)){var F=x0(this.g);h="";var K=F.length,J=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),tl(this);var ve="";break t}this.h.i=new l.TextDecoder}for(y=0;y<K;y++)this.h.h=!0,h+=this.h.i.decode(F[y],{stream:!(J&&y==K-1)});F.length=0,this.h.g+=h,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=T==200,zx(this.i,this.u,this.A,this.l,this.R,bs,T),this.o){if(this.T&&!this.K){t:{if(this.g){var St,hs=this.g;if((St=hs.g?hs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(St)){var lt=St;break t}}lt=null}if(T=lt)Fo(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gf(this,T);else{this.o=!1,this.s=3,Ds(12),Ui(this),tl(this);break e}}if(this.P){T=!0;let wr;for(;!this.J&&this.C<ve.length;)if(wr=Yx(this,ve),wr==Hf){bs==4&&(this.s=4,Ds(14),T=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(wr==l0){this.s=4,Ds(15),Fo(this.i,this.l,ve,"[Invalid Chunk]"),T=!1;break}else Fo(this.i,this.l,wr,null),Gf(this,wr);if(u0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bs!=4||ve.length!=0||this.h.h||(this.s=1,Ds(16),T=!1),this.o=this.o&&T,!T)Fo(this.i,this.l,ve,"[Invalid Chunked Response]"),Ui(this),tl(this);else if(0<ve.length&&!this.W){this.W=!0;var _s=this.j;_s.g==this&&_s.ba&&!_s.M&&(_s.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Zf(_s),_s.M=!0,Ds(11))}}else Fo(this.i,this.l,ve,null),Gf(this,ve);bs==4&&Ui(this),this.o&&!this.J&&(bs==4?$0(this.j,this):(this.o=!1,ru(this)))}else h4(this.g),T==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Ds(12)):(this.s=0,Ds(13)),Ui(this),tl(this)}}}catch{}finally{}};function u0(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Yx(h,y){var T=h.C,F=y.indexOf(`
`,T);return F==-1?Hf:(T=Number(y.substring(T,F)),isNaN(T)?l0:(F+=1,F+T>y.length?Hf:(y=y.slice(F,F+T),h.C=F+T,y)))}Vn.prototype.cancel=function(){this.J=!0,Ui(this)};function ru(h){h.S=Date.now()+h.I,d0(h,h.I)}function d0(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Za(p(h.ba,h),y)}function zf(h){h.B&&(l.clearTimeout(h.B),h.B=null)}Vn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Gx(this.i,this.A),this.L!=2&&(Ja(),Ds(17)),Ui(this),this.s=2,tl(this)):d0(this,this.S-h)};function tl(h){h.j.G==0||h.J||$0(h.j,h)}function Ui(h){zf(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,on(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Gf(h,y){try{var T=h.j;if(T.G!=0&&(T.g==h||Kf(T.h,h))){if(!h.K&&Kf(T.h,h)&&T.G==3){try{var F=T.Da.g.parse(y)}catch{F=null}if(Array.isArray(F)&&F.length==3){var K=F;if(K[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)hu(T),uu(T);else break e;Jf(T),Ds(18)}}else T.za=K[1],0<T.za-T.T&&37500>K[2]&&T.F&&T.v==0&&!T.C&&(T.C=Za(p(T.Za,T),6e3));if(1>=p0(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Vi(T,11)}else if((h.K||T.g==h)&&hu(T),!R(y))for(K=T.Da.g.parse(y),y=0;y<K.length;y++){let lt=K[y];if(T.T=lt[0],lt=lt[1],T.G==2)if(lt[0]=="c"){T.K=lt[1],T.ia=lt[2];const _s=lt[3];_s!=null&&(T.la=_s,T.j.info("VER="+T.la));const bs=lt[4];bs!=null&&(T.Aa=bs,T.j.info("SVER="+T.Aa));const qo=lt[5];qo!=null&&typeof qo=="number"&&0<qo&&(F=1.5*qo,T.L=F,T.j.info("backChannelRequestTimeoutMs_="+F)),F=T;const wr=h.g;if(wr){const pu=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pu){var J=F.h;J.g||pu.indexOf("spdy")==-1&&pu.indexOf("quic")==-1&&pu.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Yf(J,J.h),J.h=null))}if(F.D){const ep=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;ep&&(F.ya=ep,At(F.I,F.D,ep))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),F=T;var ve=h;if(F.qa=V0(F,F.J?F.ia:null,F.W),ve.K){m0(F.h,ve);var St=ve,hs=F.L;hs&&(St.I=hs),St.B&&(zf(St),ru(St)),F.g=ve}else M0(F);0<T.i.length&&du(T)}else lt[0]!="stop"&&lt[0]!="close"||Vi(T,7);else T.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Vi(T,7):Xf(T):lt[0]!="noop"&&T.l&&T.l.ta(lt),T.v=0)}}Ja(4)}catch{}}var Qx=class{constructor(h,y){this.g=h,this.map=y}};function h0(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function f0(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function p0(h){return h.h?1:h.g?h.g.size:0}function Kf(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Yf(h,y){h.g?h.g.add(y):h.h=y}function m0(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}h0.prototype.cancel=function(){if(this.i=g0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function g0(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.D);return y}return k(h.i)}function Xx(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var y=[],T=h.length,F=0;F<T;F++)y.push(h[F]);return y}y=[],T=0;for(F in h)y[T++]=h[F];return y}function Jx(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var y=[];h=h.length;for(var T=0;T<h;T++)y.push(T);return y}y=[],T=0;for(const F in h)y[T++]=F;return y}}}function y0(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var T=Jx(h),F=Xx(h),K=F.length,J=0;J<K;J++)y.call(void 0,F[J],T&&T[J],h)}var v0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zx(h,y){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var F=h[T].indexOf("="),K=null;if(0<=F){var J=h[T].substring(0,F);K=h[T].substring(F+1)}else J=h[T];y(J,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Fi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Fi){this.h=h.h,nu(this,h.j),this.o=h.o,this.g=h.g,iu(this,h.s),this.l=h.l;var y=h.i,T=new nl;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),_0(this,T),this.m=h.m}else h&&(y=String(h).match(v0))?(this.h=!1,nu(this,y[1]||"",!0),this.o=sl(y[2]||""),this.g=sl(y[3]||"",!0),iu(this,y[4]),this.l=sl(y[5]||"",!0),_0(this,y[6]||"",!0),this.m=sl(y[7]||"")):(this.h=!1,this.i=new nl(null,this.h))}Fi.prototype.toString=function(){var h=[],y=this.j;y&&h.push(rl(y,b0,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(rl(y,b0,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(rl(T,T.charAt(0)=="/"?s4:t4,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",rl(T,n4)),h.join("")};function an(h){return new Fi(h)}function nu(h,y,T){h.j=T?sl(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function iu(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function _0(h,y,T){y instanceof nl?(h.i=y,i4(h.i,h.h)):(T||(y=rl(y,r4)),h.i=new nl(y,h.h))}function At(h,y,T){h.i.set(y,T)}function ou(h){return At(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function sl(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function rl(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,e4),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function e4(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var b0=/[#\/\?@]/g,t4=/[#\?:]/g,s4=/[#\?]/g,r4=/[#\?@]/g,n4=/#/g;function nl(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Bn(h){h.g||(h.g=new Map,h.h=0,h.i&&Zx(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}t=nl.prototype,t.add=function(h,y){Bn(this),this.i=null,h=Vo(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function w0(h,y){Bn(h),y=Vo(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function S0(h,y){return Bn(h),y=Vo(h,y),h.g.has(y)}t.forEach=function(h,y){Bn(this),this.g.forEach(function(T,F){T.forEach(function(K){h.call(y,K,F,this)},this)},this)},t.na=function(){Bn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let F=0;F<y.length;F++){const K=h[F];for(let J=0;J<K.length;J++)T.push(y[F])}return T},t.V=function(h){Bn(this);let y=[];if(typeof h=="string")S0(this,h)&&(y=y.concat(this.g.get(Vo(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)y=y.concat(h[T])}return y},t.set=function(h,y){return Bn(this),this.i=null,h=Vo(this,h),S0(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function E0(h,y,T){w0(h,y),0<T.length&&(h.i=null,h.g.set(Vo(h,y),k(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var F=y[T];const J=encodeURIComponent(String(F)),ve=this.V(F);for(F=0;F<ve.length;F++){var K=J;ve[F]!==""&&(K+="="+encodeURIComponent(String(ve[F]))),h.push(K)}}return this.i=h.join("&")};function Vo(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function i4(h,y){y&&!h.j&&(Bn(h),h.i=null,h.g.forEach(function(T,F){var K=F.toLowerCase();F!=K&&(w0(this,F),E0(this,K,T))},h)),h.j=y}function o4(h,y){const T=new el;if(l.Image){const F=new Image;F.onload=g(qn,T,"TestLoadImage: loaded",!0,y,F),F.onerror=g(qn,T,"TestLoadImage: error",!1,y,F),F.onabort=g(qn,T,"TestLoadImage: abort",!1,y,F),F.ontimeout=g(qn,T,"TestLoadImage: timeout",!1,y,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=h}else y(!1)}function a4(h,y){const T=new el,F=new AbortController,K=setTimeout(()=>{F.abort(),qn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:F.signal}).then(J=>{clearTimeout(K),J.ok?qn(T,"TestPingServer: ok",!0,y):qn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),qn(T,"TestPingServer: error",!1,y)})}function qn(h,y,T,F,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),F(T)}catch{}}function l4(){this.g=new ur}function c4(h,y,T){const F=T||"";try{y0(h,function(K,J){let ve=K;u(K)&&(ve=$o(K)),y.push(F+J+"="+encodeURIComponent(ve))})}catch(K){throw y.push(F+"type="+encodeURIComponent("_badmap")),K}}function au(h){this.l=h.Ub||null,this.j=h.eb||!1}b(au,Uo),au.prototype.g=function(){return new lu(this.l,this.j)},au.prototype.i=function(h){return function(){return h}}({});function lu(h,y){H.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(lu,H),t=lu.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,ol(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||l).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,il(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;T0(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function T0(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?il(this):ol(this),this.readyState==3&&T0(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,il(this))},t.Qa=function(h){this.g&&(this.response=h,il(this))},t.ga=function(){this.g&&il(this)};function il(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ol(h)}t.setRequestHeader=function(h,y){this.u.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function ol(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function k0(h){let y="";return U(h,function(T,F){y+=F,y+=":",y+=T,y+=`\r
`}),y}function Qf(h,y,T){e:{for(F in T){var F=!1;break e}F=!0}F||(T=k0(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):At(h,y,T))}function Ut(h){H.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ut,H);var u4=/^https?$/i,d4=["POST","PUT"];t=Ut.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,y,T,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jf.g(),this.v=this.o?e0(this.o):e0(jf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){I0(this,J);return}if(h=T||"",T=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var K in F)T.set(K,F[K]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const J of F.keys())T.set(J,F.get(J));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(T.keys()).find(J=>J.toLowerCase()=="content-type"),K=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(d4,y,void 0))||F||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ve]of T)this.g.setRequestHeader(J,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{P0(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){I0(this,J)}};function I0(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,C0(h),cu(h)}function C0(h){h.A||(h.A=!0,Q(h,"complete"),Q(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Q(this,"complete"),Q(this,"abort"),cu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cu(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?A0(this):this.bb())},t.bb=function(){A0(this)};function A0(h){if(h.h&&typeof o<"u"&&(!h.v[1]||ln(h)!=4||h.Z()!=2)){if(h.u&&ln(h)==4)Ae(h.Ea,0,h);else if(Q(h,"readystatechange"),ln(h)==4){h.h=!1;try{const ve=h.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var F;if(F=ve===0){var K=String(h.D).match(v0)[1]||null;!K&&l.self&&l.self.location&&(K=l.self.location.protocol.slice(0,-1)),F=!u4.test(K?K.toLowerCase():"")}T=F}if(T)Q(h,"complete"),Q(h,"success");else{h.m=6;try{var J=2<ln(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",C0(h)}}finally{cu(h)}}}}function cu(h,y){if(h.g){P0(h);const T=h.g,F=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Q(h,"ready");try{T.onreadystatechange=F}catch{}}}function P0(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function ln(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ms(y)}};function x0(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function h4(h){const y={};h=(h.g&&2<=ln(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<h.length;F++){if(R(h[F]))continue;var T=P(h[F]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const J=y[K]||[];y[K]=J,J.push(T)}C(y,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function al(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function L0(h){this.Aa=0,this.i=[],this.j=new el,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=al("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=al("baseRetryDelayMs",5e3,h),this.cb=al("retryDelaySeedMs",1e4,h),this.Wa=al("forwardChannelMaxRetries",2,h),this.wa=al("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new h0(h&&h.concurrentRequestLimit),this.Da=new l4,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=L0.prototype,t.la=8,t.G=1,t.connect=function(h,y,T,F){Ds(0),this.W=h,this.H=y||{},T&&F!==void 0&&(this.H.OSID=T,this.H.OAID=F),this.F=this.X,this.I=V0(this,null,this.W),du(this)};function Xf(h){if(R0(h),h.G==3){var y=h.U++,T=an(h.I);if(At(T,"SID",h.K),At(T,"RID",y),At(T,"TYPE","terminate"),ll(h,T),y=new Vn(h,h.j,y),y.L=2,y.v=ou(an(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=y.v,T=!0),T||(y.g=B0(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ru(y)}F0(h)}function uu(h){h.g&&(Zf(h),h.g.cancel(),h.g=null)}function R0(h){uu(h),h.u&&(l.clearTimeout(h.u),h.u=null),hu(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function du(h){if(!f0(h.h)&&!h.s){h.s=!0;var y=h.Ga;Z||_e(),ue||(Z(),ue=!0),$e.add(y,h),h.B=0}}function f4(h,y){return p0(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Za(p(h.Ga,h,y),U0(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new Vn(this,this.j,h);let J=this.o;if(this.S&&(J?(J=w(J),x(J,this.S)):J=this.S),this.m!==null||this.O||(K.H=J,J=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var F=this.i[T];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(y+=F,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=O0(this,K,y),T=an(this.I),At(T,"RID",h),At(T,"CVER",22),this.D&&At(T,"X-HTTP-Session-Id",this.D),ll(this,T),J&&(this.O?y="headers="+encodeURIComponent(String(k0(J)))+"&"+y:this.m&&Qf(T,this.m,J)),Yf(this.h,K),this.Ua&&At(T,"TYPE","init"),this.P?(At(T,"$req",y),At(T,"SID","null"),K.T=!0,Wf(K,T,null)):Wf(K,T,y),this.G=2}}else this.G==3&&(h?N0(this,h):this.i.length==0||f0(this.h)||N0(this))};function N0(h,y){var T;y?T=y.l:T=h.U++;const F=an(h.I);At(F,"SID",h.K),At(F,"RID",T),At(F,"AID",h.T),ll(h,F),h.m&&h.o&&Qf(F,h.m,h.o),T=new Vn(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),y&&(h.i=y.D.concat(h.i)),y=O0(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Yf(h.h,T),Wf(T,F,y)}function ll(h,y){h.H&&U(h.H,function(T,F){At(y,F,T)}),h.l&&y0({},function(T,F){At(y,F,T)})}function O0(h,y,T){T=Math.min(h.i.length,T);var F=h.l?p(h.l.Na,h.l,h):null;e:{var K=h.i;let J=-1;for(;;){const ve=["count="+T];J==-1?0<T?(J=K[0].g,ve.push("ofs="+J)):J=0:ve.push("ofs="+J);let St=!0;for(let hs=0;hs<T;hs++){let lt=K[hs].g;const _s=K[hs].map;if(lt-=J,0>lt)J=Math.max(0,K[hs].g-100),St=!1;else try{c4(_s,ve,"req"+lt+"_")}catch{F&&F(_s)}}if(St){F=ve.join("&");break e}}}return h=h.i.splice(0,T),y.D=h,F}function M0(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;Z||_e(),ue||(Z(),ue=!0),$e.add(y,h),h.v=0}}function Jf(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Za(p(h.Fa,h),U0(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,D0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Za(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ds(10),uu(this),D0(this))};function Zf(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function D0(h){h.g=new Vn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=an(h.qa);At(y,"RID","rpc"),At(y,"SID",h.K),At(y,"AID",h.T),At(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&At(y,"TO",h.ja),At(y,"TYPE","xmlhttp"),ll(h,y),h.m&&h.o&&Qf(y,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=ou(an(y)),T.m=null,T.P=!0,c0(T,h)}t.Za=function(){this.C!=null&&(this.C=null,uu(this),Jf(this),Ds(19))};function hu(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function $0(h,y){var T=null;if(h.g==y){hu(h),Zf(h),h.g=null;var F=2}else if(Kf(h.h,y))T=y.D,m0(h.h,y),F=1;else return;if(h.G!=0){if(y.o)if(F==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var K=h.B;F=eu(),Q(F,new i0(F,T)),du(h)}else M0(h);else if(K=y.s,K==3||K==0&&0<y.X||!(F==1&&f4(h,y)||F==2&&Jf(h)))switch(T&&0<T.length&&(y=h.h,y.i=y.i.concat(T)),K){case 1:Vi(h,5);break;case 4:Vi(h,10);break;case 3:Vi(h,6);break;default:Vi(h,2)}}}function U0(h,y){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*y}function Vi(h,y){if(h.j.info("Error code "+y),y==2){var T=p(h.fb,h),F=h.Xa;const K=!F;F=new Fi(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||nu(F,"https"),ou(F),K?o4(F.toString(),T):a4(F.toString(),T)}else Ds(2);h.G=0,h.l&&h.l.sa(y),F0(h),R0(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ds(2)):(this.j.info("Failed to ping google.com"),Ds(1))};function F0(h){if(h.G=0,h.ka=[],h.l){const y=g0(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ka,y),L(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function V0(h,y,T){var F=T instanceof Fi?an(T):new Fi(T);if(F.g!="")y&&(F.g=y+"."+F.g),iu(F,F.s);else{var K=l.location;F=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;var J=new Fi(null);F&&nu(J,F),y&&(J.g=y),K&&iu(J,K),T&&(J.l=T),F=J}return T=h.D,y=h.ya,T&&y&&At(F,T,y),At(F,"VER",h.la),ll(h,F),F}function B0(h,y,T){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Ut(new au({eb:T})):new Ut(h.pa),y.Ha(h.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function q0(){}t=q0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fu(){}fu.prototype.g=function(h,y){return new rr(h,y)};function rr(h,y){H.call(this),this.g=new L0(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!R(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Bo(this)}b(rr,H),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){Xf(this.g)},rr.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=$o(h),h=T);y.i.push(new Qx(y.Ya++,h)),y.G==3&&du(y)},rr.prototype.N=function(){this.g.l=null,delete this.j,Xf(this.g),delete this.g,rr.aa.N.call(this)};function j0(h){Bf.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(j0,Bf);function H0(){qf.call(this),this.status=1}b(H0,qf);function Bo(h){this.g=h}b(Bo,q0),Bo.prototype.ua=function(){Q(this.g,"a")},Bo.prototype.ta=function(h){Q(this.g,new j0(h))},Bo.prototype.sa=function(h){Q(this.g,new H0)},Bo.prototype.ra=function(){Q(this.g,"b")},fu.prototype.createWebChannel=fu.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,KE=function(){return new fu},GE=function(){return eu()},zE=$i,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tu.NO_ERROR=0,tu.TIMEOUT=8,tu.HTTP_ERROR=6,Hu=tu,o0.COMPLETE="complete",WE=o0,t0.EventType=Xa,Xa.OPEN="a",Xa.CLOSE="b",Xa.ERROR="c",Xa.MESSAGE="d",H.prototype.listen=H.prototype.K,Sl=t0,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,HE=Ut}).apply(typeof ku<"u"?ku:typeof self<"u"?self:typeof window<"u"?window:{});const c_="@firebase/firestore",u_="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Dh("@firebase/firestore");function Xo(){return po.logLevel}function Ie(t,...e){if(po.logLevel<=tt.DEBUG){const s=e.map(Zg);po.debug(`Firestore (${Ba}): ${t}`,...s)}}function On(t,...e){if(po.logLevel<=tt.ERROR){const s=e.map(Zg);po.error(`Firestore (${Ba}): ${t}`,...s)}}function ba(t,...e){if(po.logLevel<=tt.WARN){const s=e.map(Zg);po.warn(`Firestore (${Ba}): ${t}`,...s)}}function Zg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,YE(t,r,s)}function YE(t,e,s){let r=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw On(r),new Error(r)}function _t(t,e,s,r){let n="Unexpected state";typeof s=="string"?n=s:r=s,t||YE(e,n,r)}function We(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Mr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Ts.UNAUTHENTICATED))}shutdown(){}}class $3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class U3{constructor(e){this.t=e,this.currentUser=Ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){_t(this.o===void 0,42304);let r=this.i;const n=c=>this.i!==r?(r=this.i,s(c)):Promise.resolve();let i=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hi,e.enqueueRetryable(()=>n(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await n(this.currentUser)})},l=c=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hi)}},0),o()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new QE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new Ts(e)}}class F3{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=Ts.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V3{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new F3(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable(()=>s(Ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B3{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ys(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){_t(this.o===void 0,3512);const r=i=>{i.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const n=i=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?n(i):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new d_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(_t(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new d_(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=q3(40);for(let i=0;i<n.length;++i)r.length<20&&n[i]<s&&(r+=e.charAt(n[i]%62))}return r}}function Ye(t,e){return t<e?-1:t>e?1:0}function km(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=t.codePointAt(s),n=e.codePointAt(s);if(r!==n){if(r<128&&n<128)return Ye(r,n);{const i=XE(),o=j3(i.encode(h_(t,s)),i.encode(h_(e,s)));return o!==0?o:Ye(r,n)}}s+=r>65535?2:1}return Ye(t.length,e.length)}function h_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function j3(t,e){for(let s=0;s<t.length&&s<e.length;++s)if(t[s]!==e[s])return Ye(t[s],e[s]);return Ye(t.length,e.length)}function wa(t,e,s){return t.length===e.length&&t.every((r,n)=>s(r,e[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=-62135596800,p_=1e6;class ss{static now(){return ss.fromMillis(Date.now())}static fromDate(e){return ss.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*p_);return new ss(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Re(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Re(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<f_)throw new Re(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p_}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-f_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new ss(0,0))}static max(){return new Be(new ss(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__name__";class Wr{constructor(e,s,r){s===void 0?s=0:s>e.length&&Ue(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&Ue(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach(r=>{s.push(r)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let n=0;n<r;n++){const i=Wr.compareSegments(e.get(n),s.get(n));if(i!==0)return i}return Ye(e.length,s.length)}static compareSegments(e,s){const r=Wr.isNumericId(e),n=Wr.isNumericId(s);return r&&!n?-1:!r&&n?1:r&&n?Wr.extractNumericId(e).compare(Wr.extractNumericId(s)):km(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return di.fromString(e.substring(4,e.length-2))}}class Ft extends Wr{construct(e,s,r){return new Ft(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter(n=>n.length>0))}return new Ft(s)}static emptyPath(){return new Ft([])}}const H3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ms extends Wr{construct(e,s,r){return new ms(e,s,r)}static isValidIdentifier(e){return H3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m_}static keyField(){return new ms([m_])}static fromServerFormat(e){const s=[];let r="",n=0;const i=()=>{if(r.length===0)throw new Re(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let o=!1;for(;n<e.length;){const l=e[n];if(l==="\\"){if(n+1===e.length)throw new Re(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[n+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Re(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,n+=2}else l==="`"?(o=!o,n++):l!=="."||o?(r+=l,n++):(i(),n++)}if(i(),o)throw new Re(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ms(s)}static emptyPath(){return new ms([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Ft.fromString(e))}static fromName(e){return new Ne(Ft.fromString(e).popFirst(5))}static empty(){return new Ne(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Ft.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=-1;function W3(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,n=Be.fromTimestamp(r===1e9?new ss(s+1,0):new ss(s,r));return new yi(n,Ne.empty(),e)}function z3(t){return new yi(t.readTime,t.key,oc)}class yi{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new yi(Be.min(),Ne.empty(),oc)}static max(){return new yi(Be.max(),Ne.empty(),oc)}}function G3(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=Ne.comparator(t.documentKey,e.documentKey),s!==0?s:Ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==K3)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ie((r,n)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,n)},this.catchCallback=i=>{this.wrapFailure(s,i).next(r,n)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof ie?s:ie.resolve(s)}catch(s){return ie.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):ie.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):ie.reject(s)}static resolve(e){return new ie((s,r)=>{s(e)})}static reject(e){return new ie((s,r)=>{r(e)})}static waitFor(e){return new ie((s,r)=>{let n=0,i=0,o=!1;e.forEach(l=>{++n,l.next(()=>{++i,o&&i===n&&s()},c=>r(c))}),o=!0,i===n&&s()})}static or(e){let s=ie.resolve(!1);for(const r of e)s=s.next(n=>n?ie.resolve(n):r());return s}static forEach(e,s){const r=[];return e.forEach((n,i)=>{r.push(s.call(this,n,i))}),this.waitFor(r)}static mapArray(e,s){return new ie((r,n)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;s(e[u]).next(d=>{o[u]=d,++l,l===i&&r(o)},d=>n(d))}})}static doWhile(e,s){return new ie((r,n)=>{const i=()=>{e()===!0?s().next(()=>{i()},n):r()};i()})}}function Q3(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function ja(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>s.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}$h.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=-1;function Uh(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function X3(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="";function J3(t){let e="";for(let s=0;s<t.length;s++)e.length>0&&(e=g_(e)),e=Z3(t.get(s),e);return g_(e)}function Z3(t,e){let s=e;const r=t.length;for(let n=0;n<r;n++){const i=t.charAt(n);switch(i){case"\0":s+="";break;case ZE:s+="";break;default:s+=i}}return s}function g_(t){return t+ZE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Ri(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function eT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,s){this.comparator=e,this.root=s||ps.EMPTY}insert(e,s){return new Dt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return s+r.left.size;n<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,r)=>(e(s,r),!1))}toString(){const e=[];return this.inorderTraversal((s,r)=>(e.push(`${s}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Iu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Iu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Iu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Iu(this.root,e,this.comparator,!0)}}class Iu{constructor(e,s,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=s?r(e.key,s):1,s&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,s,r,n,i){this.key=e,this.value=s,this.color=r??ps.RED,this.left=n??ps.EMPTY,this.right=i??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,n,i){return new ps(e??this.key,s??this.value,r??this.color,n??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let n=this;const i=r(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,s,r),null):i===0?n.copy(null,s,null,null,null):n.copy(null,null,null,null,n.right.insert(e,s,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,n=this;if(s(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,s),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),s(e,n.key)===0){if(n.right.isEmpty())return ps.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,s))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1;ps.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,s,r,n,i){return this}insert(e,s,r){return new ps(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,r)=>(e(s),!1))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;s(n.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new v_(this.data.getIterator())}getIteratorFrom(e){return new v_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(r=>{s=s.add(r)}),s}isEqual(e){if(!(e instanceof rs)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const n=s.getNext().key,i=r.getNext().key;if(this.comparator(n,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new rs(this.comparator);return s.data=e,s}}class v_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.fields=e,e.sort(ms.comparator)}static empty(){return new Ir([])}unionWith(e){let s=new rs(ms.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Ir(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,(s,r)=>s.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new tT("Invalid base64 string: "+i):i}}(e);return new vs(s)}static fromUint8Array(e){const s=function(n){let i="";for(let o=0;o<n.length;++o)i+=String.fromCharCode(n[o]);return i}(e);return new vs(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const r=new Uint8Array(s.length);for(let n=0;n<s.length;n++)r[n]=s.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vs.EMPTY_BYTE_STRING=new vs("");const e5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(t){if(_t(!!t,39018),typeof t=="string"){let e=0;const s=e5.exec(t);if(_t(!!s,46558,{timestamp:t}),s[1]){let n=s[1];n=(n+"000000000").substr(0,9),e=Number(n)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(t.seconds),nanos:jt(t.nanos)}}function jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?vs.fromBase64String(t):vs.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="server_timestamp",rT="__type__",nT="__previous_value__",iT="__local_write_time__";function ty(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[rT])===null||s===void 0?void 0:s.stringValue)===sT}function Fh(t){const e=t.mapValue.fields[nT];return ty(e)?Fh(e):e}function ac(t){const e=vi(t.mapValue.fields[iT].timestampValue);return new ss(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,s,r,n,i,o,l,c,u,d){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const Pd="(default)";class lc{constructor(e,s){this.projectId=e,this.database=s||Pd}static empty(){return new lc("","")}get isDefaultDatabase(){return this.database===Pd}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",s5="__max__",Cu={mapValue:{}},aT="__vector__",xd="value";function bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ty(t)?4:n5(t)?9007199254740991:r5(t)?10:11:Ue(28295,{value:t})}function rn(t,e){if(t===e)return!0;const s=bi(t);if(s!==bi(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ac(t).isEqual(ac(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const o=vi(n.timestampValue),l=vi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return _i(n.bytesValue).isEqual(_i(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return jt(n.geoPointValue.latitude)===jt(i.geoPointValue.latitude)&&jt(n.geoPointValue.longitude)===jt(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return jt(n.integerValue)===jt(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const o=jt(n.doubleValue),l=jt(i.doubleValue);return o===l?Ad(o)===Ad(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return wa(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(n,i){const o=n.mapValue.fields||{},l=i.mapValue.fields||{};if(y_(o)!==y_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!rn(o[c],l[c])))return!1;return!0}(t,e);default:return Ue(52216,{left:t})}}function cc(t,e){return(t.values||[]).find(s=>rn(s,e))!==void 0}function Sa(t,e){if(t===e)return 0;const s=bi(t),r=bi(e);if(s!==r)return Ye(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ye(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=jt(i.integerValue||i.doubleValue),c=jt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return __(t.timestampValue,e.timestampValue);case 4:return __(ac(t),ac(e));case 5:return km(t.stringValue,e.stringValue);case 6:return function(i,o){const l=_i(i),c=_i(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Ye(l[u],c[u]);if(d!==0)return d}return Ye(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ye(jt(i.latitude),jt(o.latitude));return l!==0?l:Ye(jt(i.longitude),jt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return b_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,d;const f=i.fields||{},p=o.fields||{},g=(l=f[xd])===null||l===void 0?void 0:l.arrayValue,b=(c=p[xd])===null||c===void 0?void 0:c.arrayValue,k=Ye(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return k!==0?k:b_(g,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Cu.mapValue&&o===Cu.mapValue)return 0;if(i===Cu.mapValue)return 1;if(o===Cu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const p=km(c[f],d[f]);if(p!==0)return p;const g=Sa(l[c[f]],u[d[f]]);if(g!==0)return g}return Ye(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ue(23264,{Pe:s})}}function __(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ye(t,e);const s=vi(t),r=vi(e),n=Ye(s.seconds,r.seconds);return n!==0?n:Ye(s.nanos,r.nanos)}function b_(t,e){const s=t.values||[],r=e.values||[];for(let n=0;n<s.length&&n<r.length;++n){const i=Sa(s[n],r[n]);if(i)return i}return Ye(s.length,r.length)}function Ea(t){return Im(t)}function Im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=vi(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return _i(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return Ne.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let r="[",n=!0;for(const i of s.values||[])n?n=!1:r+=",",r+=Im(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let n="{",i=!0;for(const o of r)i?i=!1:n+=",",n+=`${o}:${Im(s.fields[o])}`;return n+"}"}(t.mapValue):Ue(61005,{value:t})}function Wu(t){switch(bi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fh(t);return e?16+Wu(e):16;case 5:return 2*t.stringValue.length;case 6:return _i(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,i)=>n+Wu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let n=0;return Ri(r.fields,(i,o)=>{n+=i.length+Wu(o)}),n}(t.mapValue);default:throw Ue(13486,{value:t})}}function Cm(t){return!!t&&"integerValue"in t}function sy(t){return!!t&&"arrayValue"in t}function w_(t){return!!t&&"nullValue"in t}function S_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zu(t){return!!t&&"mapValue"in t}function r5(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[oT])===null||s===void 0?void 0:s.stringValue)===aT}function Fl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ri(t.mapValue.fields,(s,r)=>e.mapValue.fields[s]=Fl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Fl(t.arrayValue.values[s]);return e}return Object.assign({},t)}function n5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===s5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!zu(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(s)}setAll(e){let s=ms.emptyPath(),r={},n=[];e.forEach((o,l)=>{if(!s.isImmediateParentOf(l)){const c=this.getFieldsMap(s);this.applyChanges(c,r,n),r={},n=[],s=l.popLast()}o?r[l.lastSegment()]=Fl(o):n.push(l.lastSegment())});const i=this.getFieldsMap(s);this.applyChanges(i,r,n)}delete(e){const s=this.field(e.popLast());zu(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=s.mapValue.fields[e.get(r)];zu(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=n),s=n}return s.mapValue.fields}applyChanges(e,s,r){Ri(s,(n,i)=>e[n]=i);for(const n of r)delete e[n]}clone(){return new or(Fl(this.value))}}function lT(t){const e=[];return Ri(t.fields,(s,r)=>{const n=new ms([s]);if(zu(r)){const i=lT(r.mapValue).fields;if(i.length===0)e.push(n);else for(const o of i)e.push(n.child(o))}else e.push(n)}),new Ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,s,r,n,i,o,l){this.key=e,this.documentType=s,this.version=r,this.readTime=n,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ps(e,0,Be.min(),Be.min(),Be.min(),or.empty(),0)}static newFoundDocument(e,s,r,n){return new Ps(e,1,s,Be.min(),r,n,0)}static newNoDocument(e,s){return new Ps(e,2,s,Be.min(),Be.min(),or.empty(),0)}static newUnknownDocument(e,s){return new Ps(e,3,s,Be.min(),Be.min(),or.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ps&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ps(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,s){this.position=e,this.inclusive=s}}function E_(t,e,s){let r=0;for(let n=0;n<t.position.length;n++){const i=e[n],o=t.position[n];if(i.field.isKeyField()?r=Ne.comparator(Ne.fromName(o.referenceValue),s.key):r=Sa(o,s.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function T_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!rn(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,s="asc"){this.field=e,this.dir=s}}function i5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class es extends cT{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new a5(e,s,r):s==="array-contains"?new u5(e,r):s==="in"?new d5(e,r):s==="not-in"?new h5(e,r):s==="array-contains-any"?new f5(e,r):new es(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new l5(e,r):new c5(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Sa(s,this.value)):s!==null&&bi(this.value)===bi(s)&&this.matchesComparison(Sa(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends cT{constructor(e,s){super(),this.filters=e,this.op=s,this.Te=null}static create(e,s){return new nn(e,s)}matches(e){return uT(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function uT(t){return t.op==="and"}function dT(t){return o5(t)&&uT(t)}function o5(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function Am(t){if(t instanceof es)return t.field.canonicalString()+t.op.toString()+Ea(t.value);if(dT(t))return t.filters.map(e=>Am(e)).join(",");{const e=t.filters.map(s=>Am(s)).join(",");return`${t.op}(${e})`}}function hT(t,e){return t instanceof es?function(r,n){return n instanceof es&&r.op===n.op&&r.field.isEqual(n.field)&&rn(r.value,n.value)}(t,e):t instanceof nn?function(r,n){return n instanceof nn&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((i,o,l)=>i&&hT(o,n.filters[l]),!0):!1}(t,e):void Ue(19439)}function fT(t){return t instanceof es?function(s){return`${s.field.canonicalString()} ${s.op} ${Ea(s.value)}`}(t):t instanceof nn?function(s){return s.op.toString()+" {"+s.getFilters().map(fT).join(" ,")+"}"}(t):"Filter"}class a5 extends es{constructor(e,s,r){super(e,s,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const s=Ne.comparator(e.key,this.key);return this.matchesComparison(s)}}class l5 extends es{constructor(e,s){super(e,"in",s),this.keys=pT("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class c5 extends es{constructor(e,s){super(e,"not-in",s),this.keys=pT("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function pT(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class u5 extends es{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return sy(s)&&cc(s.arrayValue,this.value)}}class d5 extends es{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&cc(this.value.arrayValue,s)}}class h5 extends es{constructor(e,s){super(e,"not-in",s)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!cc(this.value.arrayValue,s)}}class f5 extends es{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!sy(s)||!s.arrayValue.values)&&s.arrayValue.values.some(r=>cc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,s=null,r=[],n=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function k_(t,e=null,s=[],r=[],n=null,i=null,o=null){return new p5(t,e,s,r,n,i,o)}function ry(t){const e=We(t);if(e.Ie===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(r=>Am(r)).join(","),s+="|ob:",s+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Uh(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>Ea(r)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>Ea(r)).join(",")),e.Ie=s}return e.Ie}function ny(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!i5(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!hT(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!T_(t.startAt,e.startAt)&&T_(t.endAt,e.endAt)}function Pm(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,s=null,r=[],n=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function m5(t,e,s,r,n,i,o,l){return new Vh(t,e,s,r,n,i,o,l)}function iy(t){return new Vh(t)}function I_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function g5(t){return t.collectionGroup!==null}function Vl(t){const e=We(t);if(e.Ee===null){e.Ee=[];const s=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),s.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rs(ms.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{s.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Rd(i,r))}),s.has(ms.keyField().canonicalString())||e.Ee.push(new Rd(ms.keyField(),r))}return e.Ee}function Kr(t){const e=We(t);return e.de||(e.de=y5(e,Vl(t))),e.de}function y5(t,e){if(t.limitType==="F")return k_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(n=>{const i=n.dir==="desc"?"asc":"desc";return new Rd(n.field,i)});const s=t.endAt?new Ld(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ld(t.startAt.position,t.startAt.inclusive):null;return k_(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function xm(t,e,s){return new Vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Bh(t,e){return ny(Kr(t),Kr(e))&&t.limitType===e.limitType}function mT(t){return`${ry(Kr(t))}|lt:${t.limitType}`}function Jo(t){return`Query(target=${function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map(n=>fT(n)).join(", ")}]`),Uh(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map(n=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(n)).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map(n=>Ea(n)).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map(n=>Ea(n)).join(",")),`Target(${r})`}(Kr(t))}; limitType=${t.limitType})`}function qh(t,e){return e.isFoundDocument()&&function(r,n){const i=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,n){for(const i of Vl(r))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const i of r.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(o,l,c){const u=E_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Vl(r),n)||r.endAt&&!function(o,l,c){const u=E_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Vl(r),n))}(t,e)}function v5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gT(t){return(e,s)=>{let r=!1;for(const n of Vl(t)){const i=_5(n,e,s);if(i!==0)return i;r=r||n.field.isKeyField()}return 0}}function _5(t,e,s){const r=t.field.isKeyField()?Ne.comparator(e.key,s.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Sa(c,u):Ue(42886)}(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[n,i]of r)if(this.equalsFn(n,e))return i}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return void(n[i]=[e,s]);n.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return r.length===1?delete this.inner[s]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){Ri(this.inner,(s,r)=>{for(const[n,i]of r)e(n,i)})}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new Dt(Ne.comparator);function Mn(){return b5}const yT=new Dt(Ne.comparator);function El(...t){let e=yT;for(const s of t)e=e.insert(s.key,s);return e}function vT(t){let e=yT;return t.forEach((s,r)=>e=e.insert(s,r.overlayedDocument)),e}function Yi(){return Bl()}function _T(){return Bl()}function Bl(){return new No(t=>t.toString(),(t,e)=>t.isEqual(e))}const w5=new Dt(Ne.comparator),S5=new rs(Ne.comparator);function st(...t){let e=S5;for(const s of t)e=e.add(s);return e}const E5=new rs(Ye);function T5(){return E5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function bT(t){return{integerValue:""+t}}function k5(t,e){return X3(e)?bT(e):oy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._=void 0}}function I5(t,e,s){return t instanceof Nd?function(n,i){const o={fields:{[rT]:{stringValue:sT},[iT]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&ty(i)&&(i=Fh(i)),i&&(o.fields[nT]=i),{mapValue:o}}(s,e):t instanceof uc?ST(t,e):t instanceof dc?ET(t,e):function(n,i){const o=wT(n,i),l=C_(o)+C_(n.Re);return Cm(o)&&Cm(n.Re)?bT(l):oy(n.serializer,l)}(t,e)}function C5(t,e,s){return t instanceof uc?ST(t,e):t instanceof dc?ET(t,e):s}function wT(t,e){return t instanceof Od?function(r){return Cm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Nd extends jh{}class uc extends jh{constructor(e){super(),this.elements=e}}function ST(t,e){const s=TT(e);for(const r of t.elements)s.some(n=>rn(n,r))||s.push(r);return{arrayValue:{values:s}}}class dc extends jh{constructor(e){super(),this.elements=e}}function ET(t,e){let s=TT(e);for(const r of t.elements)s=s.filter(n=>!rn(n,r));return{arrayValue:{values:s}}}class Od extends jh{constructor(e,s){super(),this.serializer=e,this.Re=s}}function C_(t){return jt(t.integerValue||t.doubleValue)}function TT(t){return sy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function A5(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof uc&&n instanceof uc||r instanceof dc&&n instanceof dc?wa(r.elements,n.elements,rn):r instanceof Od&&n instanceof Od?rn(r.Re,n.Re):r instanceof Nd&&n instanceof Nd}(t.transform,e.transform)}class P5{constructor(e,s){this.version=e,this.transformResults=s}}class Cn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hh{}function kT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new CT(t.key,Cn.none()):new Wh(t.key,t.data,Cn.none());{const s=t.data,r=or.empty();let n=new rs(ms.comparator);for(let i of e.fields)if(!n.has(i)){let o=s.field(i);o===null&&i.length>1&&(i=i.popLast(),o=s.field(i)),o===null?r.delete(i):r.set(i,o),n=n.add(i)}return new Oo(t.key,r,new Ir(n.toArray()),Cn.none())}}function x5(t,e,s){t instanceof Wh?function(n,i,o){const l=n.value.clone(),c=P_(n.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,s):t instanceof Oo?function(n,i,o){if(!Gu(n.precondition,i))return void i.convertToUnknownDocument(o.version);const l=P_(n.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(IT(n)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,s):function(n,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,s)}function ql(t,e,s,r){return t instanceof Wh?function(i,o,l,c){if(!Gu(i.precondition,o))return l;const u=i.value.clone(),d=x_(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,s,r):t instanceof Oo?function(i,o,l,c){if(!Gu(i.precondition,o))return l;const u=x_(i.fieldTransforms,c,o),d=o.data;return d.setAll(IT(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,s,r):function(i,o,l){return Gu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,s)}function L5(t,e){let s=null;for(const r of t.fieldTransforms){const n=e.data.field(r.field),i=wT(r.transform,n||null);i!=null&&(s===null&&(s=or.empty()),s.set(r.field,i))}return s||null}function A_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&wa(r,n,(i,o)=>A5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wh extends Hh{constructor(e,s,r,n=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class Oo extends Hh{constructor(e,s,r,n,i=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function IT(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}}),e}function P_(t,e,s){const r=new Map;_t(t.length===s.length,32656,{Ve:s.length,me:t.length});for(let n=0;n<s.length;n++){const i=t[n],o=i.transform,l=e.data.field(i.field);r.set(i.field,C5(o,l,s[n]))}return r}function x_(t,e,s){const r=new Map;for(const n of t){const i=n.transform,o=s.data.field(n.field);r.set(n.field,I5(i,o,e))}return r}class CT extends Hh{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R5 extends Hh{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,s,r,n){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let n=0;n<this.mutations.length;n++){const i=this.mutations[n];i.key.isEqual(e.key)&&x5(i,e,r[n])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=ql(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=ql(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=_T();return this.mutations.forEach(n=>{const i=e.get(n.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=s.has(n.key)?null:l;const c=kT(o,l);c!==null&&r.set(n.key,c),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),st())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,(s,r)=>A_(s,r))&&wa(this.baseMutations,e.baseMutations,(s,r)=>A_(s,r))}}class ay{constructor(e,s,r,n){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=n}static from(e,s,r){_t(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let n=function(){return w5}();const i=e.mutations;for(let o=0;o<i.length;o++)n=n.insert(i[o].key,r[o].version);return new ay(e,s,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,nt;function D5(t){switch(t){case pe.OK:return Ue(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ue(15467,{code:t})}}function AT(t){if(t===void 0)return On("GRPC error has no .code"),pe.UNKNOWN;switch(t){case zt.OK:return pe.OK;case zt.CANCELLED:return pe.CANCELLED;case zt.UNKNOWN:return pe.UNKNOWN;case zt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case zt.INTERNAL:return pe.INTERNAL;case zt.UNAVAILABLE:return pe.UNAVAILABLE;case zt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case zt.NOT_FOUND:return pe.NOT_FOUND;case zt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case zt.ABORTED:return pe.ABORTED;case zt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case zt.DATA_LOSS:return pe.DATA_LOSS;default:return Ue(39323,{code:t})}}(nt=zt||(zt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new di([4294967295,4294967295],0);function L_(t){const e=XE().encode(t),s=new jE;return s.update(e),new Uint8Array(s.digest())}function R_(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),n=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new di([s,r],0),new di([n,i],0)]}class ly{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Tl(`Invalid padding: ${s}`);if(r<0)throw new Tl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${s}`);this.pe=8*e.length-s,this.ye=di.fromNumber(this.pe)}we(e,s,r){let n=e.add(s.multiply(di.fromNumber(r)));return n.compare($5)===1&&(n=new di([n.getBits(0),n.getBits(1)],0)),n.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const s=L_(e),[r,n]=R_(s);for(let i=0;i<this.hashCount;i++){const o=this.we(r,n,i);if(!this.be(o))return!1}return!0}static create(e,s,r){const n=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ly(i,n,s);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const s=L_(e),[r,n]=R_(s);for(let i=0;i<this.hashCount;i++){const o=this.we(r,n,i);this.Se(o)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,s,r,n,i){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const n=new Map;return n.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new zh(Be.min(),n,new Dt(Ye),Mn(),st())}}class $c{constructor(e,s,r,n,i){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new $c(r,s,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,s,r,n){this.De=e,this.removedTargetIds=s,this.key=r,this.ve=n}}class PT{constructor(e,s){this.targetId=e,this.Ce=s}}class xT{constructor(e,s,r=vs.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=n}}class N_{constructor(){this.Fe=0,this.Me=O_(),this.xe=vs.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=st(),s=st(),r=st();return this.Me.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:s=s.add(n);break;case 1:r=r.add(n);break;default:Ue(38017,{changeType:i})}}),new $c(this.xe,this.Oe,e,s,r)}Qe(){this.Ne=!1,this.Me=O_()}$e(e,s){this.Ne=!0,this.Me=this.Me.insert(e,s)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,_t(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class U5{constructor(e){this.ze=e,this.je=new Map,this.He=Mn(),this.Je=Au(),this.Ye=Au(),this.Ze=new Dt(Ye)}Xe(e){for(const s of e.De)e.ve&&e.ve.isFoundDocument()?this.et(s,e.ve):this.tt(s,e.key,e.ve);for(const s of e.removedTargetIds)this.tt(s,e.key,e.ve)}nt(e){this.forEachTarget(e,s=>{const r=this.rt(s);switch(e.state){case 0:this.it(s)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(s);break;case 3:this.it(s)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(s)&&(this.st(s),r.ke(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.je.forEach((r,n)=>{this.it(n)&&s(n)})}ot(e){const s=e.targetId,r=e.Ce.count,n=this._t(s);if(n){const i=n.target;if(Pm(i))if(r===0){const o=new Ne(i.path);this.tt(s,o,Ps.newNoDocument(o,Be.min()))}else _t(r===1,20013,{expectedCount:r});else{const o=this.ut(s);if(o!==r){const l=this.ct(e),c=l?this.lt(l,e,o):1;if(c!==0){this.st(s);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,u)}}}}}ct(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:i=0}=s;let o,l;try{o=_i(r).toUint8Array()}catch(c){if(c instanceof tT)return ba("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new ly(o,n,i)}catch(c){return ba(c instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,s,r){return s.Ce.count===r-this.Tt(e,s.targetId)?0:2}Tt(e,s){const r=this.ze.getRemoteKeysForTarget(s);let n=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(s,i,null),n++)}),n}It(e){const s=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&Pm(l.target)){const c=new Ne(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Ps.newNoDocument(c,e))}i.Le&&(s.set(o,i.qe()),i.Qe())}});let r=st();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const n=new zh(e,s,this.Ze,this.He,r);return this.He=Mn(),this.Je=Au(),this.Ye=Au(),this.Ze=new Dt(Ye),n}et(e,s){if(!this.it(e))return;const r=this.dt(e,s.key)?2:0;this.rt(e).$e(s.key,r),this.He=this.He.insert(s.key,s),this.Je=this.Je.insert(s.key,this.Et(s.key).add(e)),this.Ye=this.Ye.insert(s.key,this.At(s.key).add(e))}tt(e,s,r){if(!this.it(e))return;const n=this.rt(e);this.dt(e,s)?n.$e(s,1):n.Ue(s),this.Ye=this.Ye.insert(s,this.At(s).delete(e)),this.Ye=this.Ye.insert(s,this.At(s).add(e)),r&&(this.He=this.He.insert(s,r))}removeTarget(e){this.je.delete(e)}ut(e){const s=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let s=this.je.get(e);return s||(s=new N_,this.je.set(e,s)),s}At(e){let s=this.Ye.get(e);return s||(s=new rs(Ye),this.Ye=this.Ye.insert(e,s)),s}Et(e){let s=this.Je.get(e);return s||(s=new rs(Ye),this.Je=this.Je.insert(e,s)),s}it(e){const s=this._t(e)!==null;return s||Ie("WatchChangeAggregator","Detected inactive target",e),s}_t(e){const s=this.je.get(e);return s&&s.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new N_),this.ze.getRemoteKeysForTarget(e).forEach(s=>{this.tt(e,s,null)})}dt(e,s){return this.ze.getRemoteKeysForTarget(e).has(s)}}function Au(){return new Dt(Ne.comparator)}function O_(){return new Dt(Ne.comparator)}const F5={asc:"ASCENDING",desc:"DESCENDING"},V5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B5={and:"AND",or:"OR"};class q5{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Lm(t,e){return t.useProto3Json||Uh(e)?e:{value:e}}function Md(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j5(t,e){return Md(t,e.toTimestamp())}function Yr(t){return _t(!!t,49232),Be.fromTimestamp(function(s){const r=vi(s);return new ss(r.seconds,r.nanos)}(t))}function cy(t,e){return Rm(t,e).canonicalString()}function Rm(t,e){const s=function(n){return new Ft(["projects",n.projectId,"databases",n.database])}(t).child("documents");return e===void 0?s:s.child(e)}function RT(t){const e=Ft.fromString(t);return _t($T(e),10190,{key:e.toString()}),e}function Nm(t,e){return cy(t.databaseId,e.path)}function Ep(t,e){const s=RT(e);if(s.get(1)!==t.databaseId.projectId)throw new Re(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Re(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new Ne(OT(s))}function NT(t,e){return cy(t.databaseId,e)}function H5(t){const e=RT(t);return e.length===4?Ft.emptyPath():OT(e)}function Om(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OT(t){return _t(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function M_(t,e,s){return{name:Nm(t,e),fields:s.value.mapValue.fields}}function W5(t,e){let s;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ue(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),n=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(_t(d===void 0||typeof d=="string",58123),vs.fromBase64String(d||"")):(_t(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),vs.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?pe.UNKNOWN:AT(u.code);return new Re(d,u.message||"")}(o);s=new xT(r,n,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const n=Ep(t,r.document.name),i=Yr(r.document.updateTime),o=r.document.createTime?Yr(r.document.createTime):Be.min(),l=new or({mapValue:{fields:r.document.fields}}),c=Ps.newFoundDocument(n,i,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];s=new Ku(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const n=Ep(t,r.document),i=r.readTime?Yr(r.readTime):Be.min(),o=Ps.newNoDocument(n,i),l=r.removedTargetIds||[];s=new Ku([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const n=Ep(t,r.document),i=r.removedTargetIds||[];s=new Ku([],i,n,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:n=0,unchangedNames:i}=r,o=new M5(n,i),l=r.targetId;s=new PT(l,o)}}return s}function z5(t,e){let s;if(e instanceof Wh)s={update:M_(t,e.key,e.value)};else if(e instanceof CT)s={delete:Nm(t,e.key)};else if(e instanceof Oo)s={update:M_(t,e.key,e.data),updateMask:t$(e.fieldMask)};else{if(!(e instanceof R5))return Ue(16599,{ft:e.type});s={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Nd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Od)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw Ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(s.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:j5(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ue(27497)}(t,e.precondition)),s}function G5(t,e){return t&&t.length>0?(_t(e!==void 0,14353),t.map(s=>function(n,i){let o=n.updateTime?Yr(n.updateTime):Yr(i);return o.isEqual(Be.min())&&(o=Yr(i)),new P5(o,n.transformResults||[])}(s,e))):[]}function K5(t,e){return{documents:[NT(t,e.path)]}}function Y5(t,e){const s={structuredQuery:{}},r=e.path;let n;e.collectionGroup!==null?(n=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=NT(t,n);const i=function(u){if(u.length!==0)return DT(nn.create(u,"and"))}(e.filters);i&&(s.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Zo(p.field),direction:J5(p.dir)}}(d))}(e.orderBy);o&&(s.structuredQuery.orderBy=o);const l=Lm(t,e.limit);return l!==null&&(s.structuredQuery.limit=l),e.startAt&&(s.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:s,parent:n}}function Q5(t){let e=H5(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let n=null;if(r>0){_t(r===1,65062);const d=s.from[0];d.allDescendants?n=d.collectionId:e=e.child(d.collectionId)}let i=[];s.where&&(i=function(f){const p=MT(f);return p instanceof nn&&dT(p)?p.getFilters():[p]}(s.where));let o=[];s.orderBy&&(o=function(f){return f.map(p=>function(b){return new Rd(ea(b.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(s.orderBy));let l=null;s.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Uh(p)?null:p}(s.limit));let c=null;s.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new Ld(g,p)}(s.startAt));let u=null;return s.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new Ld(g,p)}(s.endAt)),m5(e,n,o,i,l,"F",c,u)}function X5(t,e){const s=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:n})}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function MT(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=ea(s.unaryFilter.field);return es.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=ea(s.unaryFilter.field);return es.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ea(s.unaryFilter.field);return es.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ea(s.unaryFilter.field);return es.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(t):t.fieldFilter!==void 0?function(s){return es.create(ea(s.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return nn.create(s.compositeFilter.filters.map(r=>MT(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(s.compositeFilter.op))}(t):Ue(30097,{filter:t})}function J5(t){return F5[t]}function Z5(t){return V5[t]}function e$(t){return B5[t]}function Zo(t){return{fieldPath:t.canonicalString()}}function ea(t){return ms.fromServerFormat(t.fieldPath)}function DT(t){return t instanceof es?function(s){if(s.op==="=="){if(S_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NAN"}};if(w_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(S_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NOT_NAN"}};if(w_(s.value))return{unaryFilter:{field:Zo(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(s.field),op:Z5(s.op),value:s.value}}}(t):t instanceof nn?function(s){const r=s.getFilters().map(n=>DT(n));return r.length===1?r[0]:{compositeFilter:{op:e$(s.op),filters:r}}}(t):Ue(54877,{filter:t})}function t$(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function $T(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,s,r,n,i=Be.min(),o=Be.min(),l=vs.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.wt=e}}function r$(t){const e=Q5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(){this.yn=new i$}addToCollectionParentIndex(e,s){return this.yn.add(s),ie.resolve()}getCollectionParents(e,s){return ie.resolve(this.yn.getEntries(s))}addFieldIndex(e,s){return ie.resolve()}deleteFieldIndex(e,s){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,s){return ie.resolve()}getDocumentsMatchingTarget(e,s){return ie.resolve(null)}getIndexType(e,s){return ie.resolve(0)}getFieldIndexes(e,s){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,s){return ie.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,s){return ie.resolve(yi.min())}updateCollectionGroup(e,s,r){return ie.resolve()}updateIndexEntries(e,s){return ie.resolve()}}class i${constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),n=this.index[s]||new rs(Ft.comparator),i=!n.has(r);return this.index[s]=n.add(r),i}has(e){const s=e.lastSegment(),r=e.popLast(),n=this.index[s];return n&&n.has(r)}getEntries(e){return(this.index[e]||new rs(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class Gs{static withCacheSize(e){return new Gs(e,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs.DEFAULT_COLLECTION_PERCENTILE=10,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gs.DEFAULT=new Gs(UT,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gs.DISABLED=new Gs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ta(0)}static ir(){return new Ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LruGarbageCollector",o$=1048576;function U_([t,e],[s,r]){const n=Ye(t,s);return n===0?Ye(e,r):n}class a${constructor(e){this.cr=e,this.buffer=new rs(U_),this.lr=0}hr(){return++this.lr}Pr(e){const s=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();U_(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class l${constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Ie($_,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){ja(s)?Ie($_,"Ignoring IndexedDB error during garbage collection: ",s):await qa(s)}await this.Ir(3e5)})}}class c${constructor(e,s){this.Er=e,this.params=s}calculateTargetCount(e,s){return this.Er.dr(e).next(r=>Math.floor(s/100*r))}nthSequenceNumber(e,s){if(s===0)return ie.resolve($h.le);const r=new a$(s);return this.Er.forEachTarget(e,n=>r.Pr(n.sequenceNumber)).next(()=>this.Er.Ar(e,n=>r.Pr(n))).next(()=>r.maxValue)}removeTargets(e,s,r){return this.Er.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.Er.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(D_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D_):this.Rr(e,s))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,s){let r,n,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),n=this.params.maximumSequenceNumbersToCollect):n=f,o=Date.now(),this.nthSequenceNumber(e,n))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,s))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Xo()<=tt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${n} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:f})))}}function u$(t,e){return new c$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.changes=new No(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Ps.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ie.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e,s,r,n){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,s))).next(n=>(r!==null&&ql(r.mutation,n,Ir.empty(),ss.now()),n))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,s,r=st()){const n=Yi();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,r).next(i=>{let o=El();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,s){const r=Yi();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,st()))}populateOverlays(e,s,r){const n=[];return r.forEach(i=>{s.has(i)||n.push(i)}),this.documentOverlayCache.getOverlays(e,n).next(i=>{i.forEach((o,l)=>{s.set(o,l)})})}computeViews(e,s,r,n){let i=Mn();const o=Bl(),l=function(){return Bl()}();return s.forEach((c,u)=>{const d=r.get(u.key);n.has(u.key)&&(d===void 0||d.mutation instanceof Oo)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ql(d.mutation,u,d.mutation.getFieldMask(),ss.now())):o.set(u.key,Ir.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),s.forEach((u,d)=>{var f;return l.set(u,new h$(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,s){const r=Bl();let n=new Dt((o,l)=>o-l),i=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=s.get(c);if(u===null)return;let d=r.get(c)||Ir.empty();d=l.applyToLocalView(u,d),r.set(c,d);const f=(n.get(l.batchId)||st()).add(c);n=n.insert(l.batchId,f)})}).next(()=>{const o=[],l=n.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=_T();d.forEach(p=>{if(!i.has(p)){const g=kT(s.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ie.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,s,r,n){return function(o){return Ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):g5(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,n):this.getDocumentsMatchingCollectionQuery(e,s,r,n)}getNextDocuments(e,s,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,n).next(i=>{const o=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,n-i.size):ie.resolve(Yi());let l=oc,c=i;return o.next(u=>ie.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?ie.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,st())).next(d=>({batchId:l,changes:vT(d)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ne(s)).next(r=>{let n=El();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(e,s,r,n){const i=s.collectionGroup;let o=El();return this.indexManager.getCollectionParents(e,i).next(l=>ie.forEach(l,c=>{const u=function(f,p){return new Vh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(s,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,n).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,s,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,i,n))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ps.newInvalidDocument(d)))});let l=El();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&ql(d.mutation,u,Ir.empty(),ss.now()),qh(s,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,s){return ie.resolve(this.Fr.get(s))}saveBundleMetadata(e,s){return this.Fr.set(s.id,function(n){return{id:n.id,version:n.version,createTime:Yr(n.createTime)}}(s)),ie.resolve()}getNamedQuery(e,s){return ie.resolve(this.Mr.get(s))}saveNamedQuery(e,s){return this.Mr.set(s.name,function(n){return{name:n.name,query:r$(n.bundledQuery),readTime:Yr(n.readTime)}}(s)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(){this.overlays=new Dt(Ne.comparator),this.Or=new Map}getOverlay(e,s){return ie.resolve(this.overlays.get(s))}getOverlays(e,s){const r=Yi();return ie.forEach(s,n=>this.getOverlay(e,n).next(i=>{i!==null&&r.set(n,i)})).next(()=>r)}saveOverlays(e,s,r){return r.forEach((n,i)=>{this.St(e,s,i)}),ie.resolve()}removeOverlaysForBatchId(e,s,r){const n=this.Or.get(r);return n!==void 0&&(n.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),ie.resolve()}getOverlaysForCollection(e,s,r){const n=Yi(),i=s.length+1,o=new Ne(s.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!s.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&n.set(c.getKey(),c)}return ie.resolve(n)}getOverlaysForCollectionGroup(e,s,r,n){let i=new Dt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===s&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Yi(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Yi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=n)););return ie.resolve(l)}St(e,s,r){const n=this.overlays.get(r.key);if(n!==null){const o=this.Or.get(n.largestBatchId).delete(r.key);this.Or.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new O5(s,r));let i=this.Or.get(s);i===void 0&&(i=st(),this.Or.set(s,i)),this.Or.set(s,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(){this.sessionToken=vs.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.Nr=new rs(as.Br),this.Lr=new rs(as.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,s){const r=new as(e,s);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,s){e.forEach(r=>this.addReference(r,s))}removeReference(e,s){this.Qr(new as(e,s))}$r(e,s){e.forEach(r=>this.removeReference(r,s))}Ur(e){const s=new Ne(new Ft([])),r=new as(s,e),n=new as(s,e+1),i=[];return this.Lr.forEachInRange([r,n],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const s=new Ne(new Ft([])),r=new as(s,e),n=new as(s,e+1);let i=st();return this.Lr.forEachInRange([r,n],o=>{i=i.add(o.key)}),i}containsKey(e){const s=new as(e,0),r=this.Nr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class as{constructor(e,s){this.key=e,this.Gr=s}static Br(e,s){return Ne.comparator(e.key,s.key)||Ye(e.Gr,s.Gr)}static kr(e,s){return Ye(e.Gr,s.Gr)||Ne.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Jn=1,this.zr=new rs(as.Br)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,n){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new N5(i,s,r,n);this.mutationQueue.push(o);for(const l of n)this.zr=this.zr.add(new as(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(e,s){return ie.resolve(this.jr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,n=this.Hr(r),i=n<0?0:n;return ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?ey:this.Jn-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new as(s,0),n=new as(s,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,n],o=>{const l=this.jr(o.Gr);i.push(l)}),ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new rs(Ye);return s.forEach(n=>{const i=new as(n,0),o=new as(n,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],l=>{r=r.add(l.Gr)})}),ie.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,n=r.length+1;let i=r;Ne.isDocumentKey(i)||(i=i.child(""));const o=new as(new Ne(i),0);let l=new rs(Ye);return this.zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===n&&(l=l.add(c.Gr)),!0)},o),ie.resolve(this.Jr(l))}Jr(e){const s=[];return e.forEach(r=>{const n=this.jr(r);n!==null&&s.push(n)}),s}removeMutationBatch(e,s){_t(this.Yr(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return ie.forEach(s.mutations,n=>{const i=new as(n.key,s.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,s){const r=new as(s,0),n=this.zr.firstAfterOrEqual(r);return ie.resolve(s.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Yr(e,s){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const s=this.Hr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.Zr=e,this.docs=function(){return new Dt(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,n=this.docs.get(r),i=n?n.size:0,o=this.Zr(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ie.resolve(r?r.document.mutableCopy():Ps.newInvalidDocument(s))}getEntries(e,s){let r=Mn();return s.forEach(n=>{const i=this.docs.get(n);r=r.insert(n,i?i.document.mutableCopy():Ps.newInvalidDocument(n))}),ie.resolve(r)}getDocumentsMatchingQuery(e,s,r,n){let i=Mn();const o=s.path,l=new Ne(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||G3(z3(d),r)<=0||(n.has(d.key)||qh(s,d))&&(i=i.insert(d.key,d.mutableCopy()))}return ie.resolve(i)}getAllFromCollectionGroup(e,s,r,n){Ue(9500)}Xr(e,s){return ie.forEach(this.docs,r=>s(r))}newChangeBuffer(e){return new _$(this)}getSize(e){return ie.resolve(this.size)}}class _$ extends d${constructor(e){super(),this.vr=e}applyChanges(e){const s=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?s.push(this.vr.addEntry(e,n)):this.vr.removeEntry(r)}),ie.waitFor(s)}getFromCache(e,s){return this.vr.getEntry(e,s)}getAllFromCache(e,s){return this.vr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.persistence=e,this.ei=new No(s=>ry(s),ny),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.ti=0,this.ni=new uy,this.targetCount=0,this.ri=Ta.rr()}forEachTarget(e,s){return this.ei.forEach((r,n)=>s(n)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.ti&&(this.ti=s),ie.resolve()}ar(e){this.ei.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ri=new Ta(s),this.highestTargetId=s),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,s){return this.ar(s),this.targetCount+=1,ie.resolve()}updateTargetData(e,s){return this.ar(s),ie.resolve()}removeTargetData(e,s){return this.ei.delete(s.target),this.ni.Ur(s.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,s,r){let n=0;const i=[];return this.ei.forEach((o,l)=>{l.sequenceNumber<=s&&r.get(l.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),n++)}),ie.waitFor(i).next(()=>n)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,s){const r=this.ei.get(s)||null;return ie.resolve(r)}addMatchingKeys(e,s,r){return this.ni.qr(s,r),ie.resolve()}removeMatchingKeys(e,s,r){this.ni.$r(s,r);const n=this.persistence.referenceDelegate,i=[];return n&&s.forEach(o=>{i.push(n.markPotentiallyOrphaned(e,o))}),ie.waitFor(i)}removeMatchingKeysForTargetId(e,s){return this.ni.Ur(s),ie.resolve()}getMatchingKeysForTargetId(e,s){const r=this.ni.Wr(s);return ie.resolve(r)}containsKey(e,s){return ie.resolve(this.ni.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,s){this.ii={},this.overlays={},this.si=new $h(0),this.oi=!1,this.oi=!0,this._i=new g$,this.referenceDelegate=e(this),this.ai=new b$(this),this.indexManager=new n$,this.remoteDocumentCache=function(n){return new v$(n)}(r=>this.referenceDelegate.ui(r)),this.serializer=new s$(s),this.ci=new p$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new m$,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ii[e.toKey()];return r||(r=new y$(s,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,s,r){Ie("MemoryPersistence","Starting transaction:",e);const n=new w$(this.si.next());return this.referenceDelegate.li(),r(n).next(i=>this.referenceDelegate.hi(n).next(()=>i)).toPromise().then(i=>(n.raiseOnCommittedEvent(),i))}Pi(e,s){return ie.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,s)))}}class w$ extends Y3{constructor(e){super(),this.currentSequenceNumber=e}}class dy{constructor(e){this.persistence=e,this.Ti=new uy,this.Ii=null}static Ei(e){return new dy(e)}get di(){if(this.Ii)return this.Ii;throw Ue(60996)}addReference(e,s,r){return this.Ti.addReference(r,s),this.di.delete(r.toString()),ie.resolve()}removeReference(e,s,r){return this.Ti.removeReference(r,s),this.di.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,s){return this.di.add(s.toString()),ie.resolve()}removeTarget(e,s){this.Ti.Ur(s.targetId).forEach(n=>this.di.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next(n=>{n.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,s))}li(){this.Ii=new Set}hi(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.di,r=>{const n=Ne.fromPath(r);return this.Ai(e,n).next(i=>{i||s.removeEntry(n,Be.min())})}).next(()=>(this.Ii=null,s.apply(e)))}updateLimboDocument(e,s){return this.Ai(e,s).next(r=>{r?this.di.delete(s.toString()):this.di.add(s.toString())})}ui(e){return 0}Ai(e,s){return ie.or([()=>ie.resolve(this.Ti.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Pi(e,s)])}}class Dd{constructor(e,s){this.persistence=e,this.Ri=new No(r=>J3(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=u$(this,s)}static Ei(e,s){return new Dd(e,s)}li(){}hi(e){return ie.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}dr(e){const s=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>s.next(n=>r+n))}Vr(e){let s=0;return this.Ar(e,r=>{s++}).next(()=>s)}Ar(e,s){return ie.forEach(this.Ri,(r,n)=>this.gr(e,r,n).next(i=>i?ie.resolve():s(n)))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.Xr(e,o=>this.gr(e,o,s).next(l=>{l||(r++,i.removeEntry(o,Be.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,s){return this.Ri.set(s,e.currentSequenceNumber),ie.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.Ri.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,s,r){return this.Ri.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,s){return this.Ri.set(s,e.currentSequenceNumber),ie.resolve()}ui(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=Wu(e.data.value)),s}gr(e,s,r){return ie.or([()=>this.persistence.Pi(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const n=this.Ri.get(s);return ie.resolve(n!==void 0&&n>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,s,r,n){this.targetId=e,this.fromCache=s,this.ls=r,this.hs=n}static Ps(e,s){let r=st(),n=st();for(const i of s.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new hy(e,s.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return mD()?8:Q3(Os())>0?6:4}()}initialize(e,s){this.As=e,this.indexManager=s,this.Ts=!0}getDocumentsMatchingQuery(e,s,r,n){const i={result:null};return this.Rs(e,s).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,s,n,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new S$;return this.fs(e,s,o).next(l=>{if(i.result=l,this.Is)return this.gs(e,s,o,l.size)})}).next(()=>i.result)}gs(e,s,r,n){return r.documentReadCount<this.Es?(Xo()<=tt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Jo(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ie.resolve()):(Xo()<=tt.DEBUG&&Ie("QueryEngine","Query:",Jo(s),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ds*n?(Xo()<=tt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Jo(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(s))):ie.resolve())}Rs(e,s){if(I_(s))return ie.resolve(null);let r=Kr(s);return this.indexManager.getIndexType(e,r).next(n=>n===0?null:(s.limit!==null&&n===1&&(s=xm(s,null,"F"),r=Kr(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=st(...i);return this.As.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ps(s,l);return this.ys(s,u,o,c.readTime)?this.Rs(e,xm(s,null,"F")):this.ws(e,u,s,c)}))})))}Vs(e,s,r,n){return I_(s)||n.isEqual(Be.min())?ie.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(s,i);return this.ys(s,o,r,n)?ie.resolve(null):(Xo()<=tt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Jo(s)),this.ws(e,o,s,W3(n,oc)).next(l=>l))})}ps(e,s){let r=new rs(gT(e));return s.forEach((n,i)=>{qh(e,i)&&(r=r.add(i))}),r}ys(e,s,r,n){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const i=e.limitType==="F"?s.last():s.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}fs(e,s,r){return Xo()<=tt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Jo(s)),this.As.getDocumentsMatchingQuery(e,s,yi.min(),r)}ws(e,s,r,n){return this.As.getDocumentsMatchingQuery(e,r,n).next(i=>(s.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="LocalStore",T$=3e8;class k${constructor(e,s,r,n){this.persistence=e,this.bs=s,this.serializer=n,this.Ss=new Dt(Ye),this.Ds=new No(i=>ry(i),ny),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f$(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.Ss))}}function I$(t,e,s,r){return new k$(t,e,s,r)}async function VT(t,e){const s=We(t);return await s.persistence.runTransaction("Handle user change","readonly",r=>{let n;return s.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,s.Fs(e),s.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=st();for(const u of n){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return s.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:o,addedBatchIds:l}))})})}function C$(t,e){const s=We(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=e.batch.keys(),i=s.Cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,p=f.keys();let g=ie.resolve();return p.forEach(b=>{g=g.next(()=>d.getEntry(c,b)).next(k=>{const L=u.docVersions.get(b);_t(L!==null,48541),k.version.compareTo(L)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),d.addEntry(k)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(s,r,e,i).next(()=>i.apply(r)).next(()=>s.mutationQueue.performConsistencyCheck(r)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(r,n,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=st();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>s.localDocuments.getDocuments(r,n))})}function BT(t){const e=We(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.ai.getLastRemoteSnapshotVersion(s))}function A$(t,e){const s=We(t),r=e.snapshotVersion;let n=s.Ss;return s.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=s.Cs.newChangeBuffer({trackRemovals:!0});n=s.Ss;const l=[];e.targetChanges.forEach((d,f)=>{const p=n.get(f);if(!p)return;l.push(s.ai.removeMatchingKeys(i,d.removedDocuments,f).next(()=>s.ai.addMatchingKeys(i,d.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(vs.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),n=n.insert(f,g),function(k,L,V){return k.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=T$?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(p,g,d)&&l.push(s.ai.updateTargetData(i,g))});let c=Mn(),u=st();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(s.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(P$(i,o,e.documentUpdates).next(d=>{c=d.xs,u=d.Os})),!r.isEqual(Be.min())){const d=s.ai.getLastRemoteSnapshotVersion(i).next(f=>s.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return ie.waitFor(l).next(()=>o.apply(i)).next(()=>s.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(s.Ss=n,i))}function P$(t,e,s){let r=st(),n=st();return s.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Mn();return s.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(n=n.add(l)),c.isNoDocument()&&c.version.isEqual(Be.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ie(fy,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{xs:o,Os:n}})}function x$(t,e){const s=We(t);return s.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ey),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function L$(t,e){const s=We(t);return s.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return s.ai.getTargetData(r,e).next(i=>i?(n=i,ie.resolve(n)):s.ai.allocateTargetId(r).next(o=>(n=new ii(e,o,"TargetPurposeListen",r.currentSequenceNumber),s.ai.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=s.Ss.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(s.Ss=s.Ss.insert(r.targetId,r),s.Ds.set(e,r.targetId)),r})}async function Mm(t,e,s){const r=We(t),n=r.Ss.get(e),i=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,n))}catch(o){if(!ja(o))throw o;Ie(fy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(n.target)}function F_(t,e,s){const r=We(t);let n=Be.min(),i=st();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=We(c),p=f.Ds.get(d);return p!==void 0?ie.resolve(f.Ss.get(p)):f.ai.getTargetData(u,d)}(r,o,Kr(e)).next(l=>{if(l)return n=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,s?n:Be.min(),s?i:st())).next(l=>(R$(r,v5(e),l),{documents:l,Ns:i})))}function R$(t,e,s){let r=t.vs.get(e)||Be.min();s.forEach((n,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class V_{constructor(){this.activeTargetIds=T5()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N${constructor(){this.So=new V_,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,s,r){this.Do[e]=s}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new V_,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="ConnectivityMonitor";class q_{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ie(B_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ie(B_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu=null;function Dm(){return Pu===null?Pu=function(){return 268435456+Math.round(2147483648*Math.random())}():Pu++,"0x"+Pu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="RestConnection",M$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D${get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Lo=s+"://"+e.host,this.ko=`projects/${r}/databases/${n}`,this.qo=this.databaseId.database===Pd?`project_id=${r}`:`project_id=${r}&database_id=${n}`}Qo(e,s,r,n,i){const o=Dm(),l=this.$o(e,s.toUriEncodedString());Ie(Tp,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,n,i);const{host:u}=new URL(l),d=Mh(u);return this.Ko(e,l,c,r,d).then(f=>(Ie(Tp,`Received RPC '${e}' ${o}: `,f),f),f=>{throw ba(Tp,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Wo(e,s,r,n,i,o){return this.Qo(e,s,r,n,i)}Uo(e,s,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ba}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((n,i)=>e[i]=n),r&&r.headers.forEach((n,i)=>e[i]=n)}$o(e,s){const r=M$[e];return`${this.Lo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="WebChannelConnection";class U$ extends D${constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,s,r,n,i){const o=Dm();return new Promise((l,c)=>{const u=new HE;u.setWithCredentials(!0),u.listenOnce(WE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hu.NO_ERROR:const f=u.getResponseJson();Ie(ws,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Hu.TIMEOUT:Ie(ws,`RPC '${e}' ${o} timed out`),c(new Re(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:const p=u.getStatus();if(Ie(ws,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const k=function(V){const R=V.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(R)>=0?R:pe.UNKNOWN}(b.status);c(new Re(k,b.message))}else c(new Re(pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Re(pe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{s_:e,streamId:o,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{Ie(ws,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(n);Ie(ws,`RPC '${e}' ${o} sending request:`,n),u.send(s,"POST",d,r,15)})}a_(e,s,r){const n=Dm(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KE(),l=GE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,s,r),c.encodeInitMessageHeaders=!0;const d=i.join("");Ie(ws,`Creating RPC '${e}' stream ${n}: ${d}`,c);const f=o.createWebChannel(d,c);let p=!1,g=!1;const b=new $$({Go:L=>{g?Ie(ws,`Not sending because RPC '${e}' stream ${n} is closed:`,L):(p||(Ie(ws,`Opening RPC '${e}' stream ${n} transport.`),f.open(),p=!0),Ie(ws,`RPC '${e}' stream ${n} sending:`,L),f.send(L))},zo:()=>f.close()}),k=(L,V,R)=>{L.listen(V,E=>{try{R(E)}catch(N){setTimeout(()=>{throw N},0)}})};return k(f,Sl.EventType.OPEN,()=>{g||(Ie(ws,`RPC '${e}' stream ${n} transport opened.`),b.t_())}),k(f,Sl.EventType.CLOSE,()=>{g||(g=!0,Ie(ws,`RPC '${e}' stream ${n} transport closed`),b.r_())}),k(f,Sl.EventType.ERROR,L=>{g||(g=!0,ba(ws,`RPC '${e}' stream ${n} transport errored. Name:`,L.name,"Message:",L.message),b.r_(new Re(pe.UNAVAILABLE,"The operation could not be completed")))}),k(f,Sl.EventType.MESSAGE,L=>{var V;if(!g){const R=L.data[0];_t(!!R,16349);const E=R,N=(E==null?void 0:E.error)||((V=E[0])===null||V===void 0?void 0:V.error);if(N){Ie(ws,`RPC '${e}' stream ${n} received error:`,N);const D=N.status;let U=function(_){const x=zt[_];if(x!==void 0)return AT(x)}(D),C=N.message;U===void 0&&(U=pe.INTERNAL,C="Unknown error status: "+D+" with message "+N.message),g=!0,b.r_(new Re(U,C)),f.close()}else Ie(ws,`RPC '${e}' stream ${n} received:`,R),b.i_(R)}}),k(l,zE.STAT_EVENT,L=>{L.stat===Tm.PROXY?Ie(ws,`RPC '${e}' stream ${n} detected buffering proxy`):L.stat===Tm.NOPROXY&&Ie(ws,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{b.n_()},0),b}}function kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t){return new q5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,s,r=1e3,n=1.5,i=6e4){this.bi=e,this.timerId=s,this.u_=r,this.c_=n,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const s=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),n=Math.max(0,s-r);n>0&&Ie("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.h_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,n,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="PersistentStream";class jT{constructor(e,s,r,n,i,o,l,c){this.bi=e,this.R_=r,this.V_=n,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new qT(e,s)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,s){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():s&&s.code===pe.RESOURCE_EXHAUSTED?(On(s.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):s&&s.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(s)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),s=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.m_===s&&this.B_(r,n)},r=>{e(()=>{const n=new Re(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(n)})})}B_(e,s){const r=this.N_(this.m_);this.stream=this.k_(e,s),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(n=>{r(()=>this.L_(n))}),this.stream.onMessage(n=>{r(()=>++this.p_==1?this.q_(n):this.onNext(n))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Ie(j_,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return s=>{this.bi.enqueueAndForget(()=>this.m_===e?s():(Ie(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F$ extends jT{constructor(e,s,r,n,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,n,o),this.serializer=i}k_(e,s){return this.connection.a_("Listen",e,s)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const s=W5(this.serializer,e),r=function(i){if(!("targetChange"in i))return Be.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?Yr(o.readTime):Be.min()}(e);return this.listener.Q_(s,r)}U_(e){const s={};s.database=Om(this.serializer),s.addTarget=function(i,o){let l;const c=o.target;if(l=Pm(c)?{documents:K5(i,c)}:{query:Y5(i,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=LT(i,o.resumeToken);const u=Lm(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Be.min())>0){l.readTime=Md(i,o.snapshotVersion.toTimestamp());const u=Lm(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=X5(this.serializer,e);r&&(s.labels=r),this.F_(s)}K_(e){const s={};s.database=Om(this.serializer),s.removeTarget=e,this.F_(s)}}class V$ extends jT{constructor(e,s,r,n,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,n,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,s){return this.connection.a_("Write",e,s)}q_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const s=G5(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.j_(r,s)}H_(){const e={};e.database=Om(this.serializer),this.F_(e)}G_(e){const s={streamToken:this.lastStreamToken,writes:e.map(r=>z5(this.serializer,r))};this.F_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${}class q$ extends B${constructor(e,s,r,n){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=n,this.J_=!1}Y_(){if(this.J_)throw new Re(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,s,r,n){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,Rm(s,r),n,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(pe.UNKNOWN,i.toString())})}Wo(e,s,r,n,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,Rm(s,r),n,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(pe.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class j${constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(On(s),this.ea=!1):Ie("OnlineStateTracker",s)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class H${constructor(e,s,r,n,i){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Mo(this)&&(Ie(mo,"Restarting streams for network reachability change."),await async function(c){const u=We(c);u.aa.add(4),await Uc(u),u.la.set("Unknown"),u.aa.delete(4),await Kh(u)}(this))})}),this.la=new j$(r,n)}}async function Kh(t){if(Mo(t))for(const e of t.ua)await e(!0)}async function Uc(t){for(const e of t.ua)await e(!1)}function HT(t,e){const s=We(t);s._a.has(e.targetId)||(s._a.set(e.targetId,e),yy(s)?gy(s):Ha(s).b_()&&my(s,e))}function py(t,e){const s=We(t),r=Ha(s);s._a.delete(e),r.b_()&&WT(s,e),s._a.size===0&&(r.b_()?r.v_():Mo(s)&&s.la.set("Unknown"))}function my(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ha(t).U_(e)}function WT(t,e){t.ha.Ke(e),Ha(t).K_(e)}function gy(t){t.ha=new U5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ha(t).start(),t.la.ta()}function yy(t){return Mo(t)&&!Ha(t).w_()&&t._a.size>0}function Mo(t){return We(t).aa.size===0}function zT(t){t.ha=void 0}async function W$(t){t.la.set("Online")}async function z$(t){t._a.forEach((e,s)=>{my(t,e)})}async function G$(t,e){zT(t),yy(t)?(t.la.ia(e),gy(t)):t.la.set("Unknown")}async function K$(t,e,s){if(t.la.set("Online"),e instanceof xT&&e.state===2&&e.cause)try{await async function(n,i){const o=i.cause;for(const l of i.targetIds)n._a.has(l)&&(await n.remoteSyncer.rejectListen(l,o),n._a.delete(l),n.ha.removeTarget(l))}(t,e)}catch(r){Ie(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $d(t,r)}else if(e instanceof Ku?t.ha.Xe(e):e instanceof PT?t.ha.ot(e):t.ha.nt(e),!s.isEqual(Be.min()))try{const r=await BT(t.localStore);s.compareTo(r)>=0&&await function(i,o){const l=i.ha.It(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i._a.get(u);d&&i._a.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i._a.get(c);if(!d)return;i._a.set(c,d.withResumeToken(vs.EMPTY_BYTE_STRING,d.snapshotVersion)),WT(i,c);const f=new ii(d.target,c,u,d.sequenceNumber);my(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,s)}catch(r){Ie(mo,"Failed to raise snapshot:",r),await $d(t,r)}}async function $d(t,e,s){if(!ja(e))throw e;t.aa.add(1),await Uc(t),t.la.set("Offline"),s||(s=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie(mo,"Retrying IndexedDB access"),await s(),t.aa.delete(1),await Kh(t)})}function GT(t,e){return e().catch(s=>$d(t,s,e))}async function Yh(t){const e=We(t),s=wi(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:ey;for(;Y$(e);)try{const n=await x$(e.localStore,r);if(n===null){e.oa.length===0&&s.v_();break}r=n.batchId,Q$(e,n)}catch(n){await $d(e,n)}KT(e)&&YT(e)}function Y$(t){return Mo(t)&&t.oa.length<10}function Q$(t,e){t.oa.push(e);const s=wi(t);s.b_()&&s.W_&&s.G_(e.mutations)}function KT(t){return Mo(t)&&!wi(t).w_()&&t.oa.length>0}function YT(t){wi(t).start()}async function X$(t){wi(t).H_()}async function J$(t){const e=wi(t);for(const s of t.oa)e.G_(s.mutations)}async function Z$(t,e,s){const r=t.oa.shift(),n=ay.from(r,e,s);await GT(t,()=>t.remoteSyncer.applySuccessfulWrite(n)),await Yh(t)}async function e6(t,e){e&&wi(t).W_&&await async function(r,n){if(function(o){return D5(o)&&o!==pe.ABORTED}(n.code)){const i=r.oa.shift();wi(r).D_(),await GT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,n)),await Yh(r)}}(t,e),KT(t)&&YT(t)}async function H_(t,e){const s=We(t);s.asyncQueue.verifyOperationInProgress(),Ie(mo,"RemoteStore received new credentials");const r=Mo(s);s.aa.add(3),await Uc(s),r&&s.la.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.aa.delete(3),await Kh(s)}async function t6(t,e){const s=We(t);e?(s.aa.delete(2),await Kh(s)):e||(s.aa.add(2),await Uc(s),s.la.set("Unknown"))}function Ha(t){return t.Pa||(t.Pa=function(s,r,n){const i=We(s);return i.Y_(),new F$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{jo:W$.bind(null,t),Jo:z$.bind(null,t),Zo:G$.bind(null,t),Q_:K$.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),yy(t)?gy(t):t.la.set("Unknown")):(await t.Pa.stop(),zT(t))})),t.Pa}function wi(t){return t.Ta||(t.Ta=function(s,r,n){const i=We(s);return i.Y_(),new V$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:X$.bind(null,t),Zo:e6.bind(null,t),z_:J$.bind(null,t),j_:Z$.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Yh(t)):(await t.Ta.stop(),t.oa.length>0&&(Ie(mo,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,s,r,n,i){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,n,i){const o=Date.now()+r,l=new vy(e,s,o,n,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(t,e){if(On("AsyncQueue",`${e}: ${t}`),ja(t))return new Re(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{static emptySet(e){return new aa(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||Ne.comparator(s.key,r.key):(s,r)=>Ne.comparator(s.key,r.key),this.keyedMap=El(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,r)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const n=s.getNext().key,i=r.getNext().key;if(!n.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.Ia=new Dt(Ne.comparator)}track(e){const s=e.doc.key,r=this.Ia.get(s);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(s,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(s):e.type===1&&r.type===2?this.Ia=this.Ia.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(s,{type:2,doc:e.doc}):Ue(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(s,e)}da(){const e=[];return this.Ia.inorderTraversal((s,r)=>{e.push(r)}),e}}class ka{constructor(e,s,r,n,i,o,l,c,u){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,s,r,n,i){const o=[];return s.forEach(l=>{o.push({type:0,doc:l})}),new ka(e,s,aa.emptySet(s),o,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let n=0;n<s.length;n++)if(s[n].type!==r[n].type||!s[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class r6{constructor(){this.queries=z_(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(s,r){const n=We(s),i=n.queries;n.queries=z_(),i.forEach((o,l)=>{for(const c of l.Ra)c.onError(r)})})(this,new Re(pe.ABORTED,"Firestore shutting down"))}}function z_(){return new No(t=>mT(t),Bh)}async function n6(t,e){const s=We(t);let r=3;const n=e.query;let i=s.queries.get(n);i?!i.Va()&&e.ma()&&(r=2):(i=new s6,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await s.onListen(n,!0);break;case 1:i.Aa=await s.onListen(n,!1);break;case 2:await s.onFirstRemoteStoreListen(n)}}catch(o){const l=_y(o,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(l)}s.queries.set(n,i),i.Ra.push(e),e.ga(s.onlineState),i.Aa&&e.pa(i.Aa)&&by(s)}async function i6(t,e){const s=We(t),r=e.query;let n=3;const i=s.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?n=e.ma()?0:1:!i.Va()&&e.ma()&&(n=2))}switch(n){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function o6(t,e){const s=We(t);let r=!1;for(const n of e){const i=n.query,o=s.queries.get(i);if(o){for(const l of o.Ra)l.pa(n)&&(r=!0);o.Aa=n}}r&&by(s)}function a6(t,e,s){const r=We(t),n=r.queries.get(e);if(n)for(const i of n.Ra)i.onError(s);r.queries.delete(e)}function by(t){t.fa.forEach(e=>{e.next()})}var $m,G_;(G_=$m||($m={})).ya="default",G_.Cache="cache";class l6{constructor(e,s,r){this.query=e,this.wa=s,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const n of e.docChanges)n.type!==3&&r.push(n);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.ba?this.Da(e)&&(this.wa.next(e),s=!0):this.va(e,this.onlineState)&&(this.Ca(e),s=!0),this.Sa=e,s}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let s=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),s=!0),s}va(e,s){if(!e.fromCache||!this.ma())return!0;const r=s!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const s=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Ca(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==$m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.key=e}}class XT{constructor(e){this.key=e}}class c6{constructor(e,s){this.query=e,this.qa=s,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=st(),this.mutatedKeys=st(),this.Ua=gT(e),this.Ka=new aa(this.Ua)}get Wa(){return this.qa}Ga(e,s){const r=s?s.za:new W_,n=s?s.Ka:this.Ka;let i=s?s.mutatedKeys:this.mutatedKeys,o=n,l=!1;const c=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,u=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((d,f)=>{const p=n.get(d),g=qh(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),k=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let L=!1;p&&g?p.data.isEqual(g.data)?b!==k&&(r.track({type:3,doc:g}),L=!0):this.ja(p,g)||(r.track({type:2,doc:g}),L=!0,(c&&this.Ua(g,c)>0||u&&this.Ua(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),L=!0):p&&!g&&(r.track({type:1,doc:p}),L=!0,(c||u)&&(l=!0)),L&&(g?(o=o.add(g),i=k?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ka:o,za:r,ys:l,mutatedKeys:i}}ja(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,n){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((d,f)=>function(g,b){const k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:L})}};return k(g)-k(b)}(d.type,f.type)||this.Ua(d.doc,f.doc)),this.Ha(r),n=n!=null&&n;const l=s&&!n?this.Ja():[],c=this.$a.size===0&&this.current&&!n?1:0,u=c!==this.Qa;return this.Qa=c,o.length!==0||u?{snapshot:new ka(this.query,e.Ka,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new W_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(s=>this.qa=this.qa.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.qa=this.qa.delete(s)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=st(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const s=[];return e.forEach(r=>{this.$a.has(r)||s.push(new XT(r))}),this.$a.forEach(r=>{e.has(r)||s.push(new QT(r))}),s}Xa(e){this.qa=e.Ns,this.$a=st();const s=this.Ga(e.documents);return this.applyChanges(s,!0)}eu(){return ka.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const wy="SyncEngine";class u6{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class d6{constructor(e){this.key=e,this.tu=!1}}class h6{constructor(e,s,r,n,i,o){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new No(l=>mT(l),Bh),this.iu=new Map,this.su=new Set,this.ou=new Dt(Ne.comparator),this._u=new Map,this.au=new uy,this.uu={},this.cu=new Map,this.lu=Ta.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function f6(t,e,s=!0){const r=rk(t);let n;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),n=i.view.eu()):n=await JT(r,e,s,!0),n}async function p6(t,e){const s=rk(t);await JT(s,e,!0,!1)}async function JT(t,e,s,r){const n=await L$(t.localStore,Kr(e)),i=n.targetId,o=t.sharedClientState.addLocalQueryTarget(i,s);let l;return r&&(l=await m6(t,e,i,o==="current",n.resumeToken)),t.isPrimaryClient&&s&&HT(t.remoteStore,n),l}async function m6(t,e,s,r,n){t.Pu=(f,p,g)=>async function(k,L,V,R){let E=L.view.Ga(V);E.ys&&(E=await F_(k.localStore,L.query,!1).then(({documents:C})=>L.view.Ga(C,E)));const N=R&&R.targetChanges.get(L.targetId),D=R&&R.targetMismatches.get(L.targetId)!=null,U=L.view.applyChanges(E,k.isPrimaryClient,N,D);return Y_(k,L.targetId,U.Ya),U.snapshot}(t,f,p,g);const i=await F_(t.localStore,e,!0),o=new c6(e,i.Ns),l=o.Ga(i.documents),c=$c.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",n),u=o.applyChanges(l,t.isPrimaryClient,c);Y_(t,s,u.Ya);const d=new u6(e,s,o);return t.ru.set(e,d),t.iu.has(s)?t.iu.get(s).push(e):t.iu.set(s,[e]),u.snapshot}async function g6(t,e,s){const r=We(t),n=r.ru.get(e),i=r.iu.get(n.targetId);if(i.length>1)return r.iu.set(n.targetId,i.filter(o=>!Bh(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await Mm(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),s&&py(r.remoteStore,n.targetId),Um(r,n.targetId)}).catch(qa)):(Um(r,n.targetId),await Mm(r.localStore,n.targetId,!0))}async function y6(t,e){const s=We(t),r=s.ru.get(e),n=s.iu.get(r.targetId);s.isPrimaryClient&&n.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),py(s.remoteStore,r.targetId))}async function v6(t,e,s){const r=k6(t);try{const n=await function(o,l){const c=We(o),u=ss.now(),d=l.reduce((g,b)=>g.add(b.key),st());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Mn(),k=st();return c.Cs.getEntries(g,d).next(L=>{b=L,b.forEach((V,R)=>{R.isValidDocument()||(k=k.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(L=>{f=L;const V=[];for(const R of l){const E=L5(R,f.get(R.key).overlayedDocument);E!=null&&V.push(new Oo(R.key,E,lT(E.value.mapValue),Cn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,V,l)}).next(L=>{p=L;const V=L.applyToLocalDocumentSet(f,k);return c.documentOverlayCache.saveOverlays(g,L.batchId,V)})}).then(()=>({batchId:p.batchId,changes:vT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(n.batchId),function(o,l,c){let u=o.uu[o.currentUser.toKey()];u||(u=new Dt(Ye)),u=u.insert(l,c),o.uu[o.currentUser.toKey()]=u}(r,n.batchId,s),await Fc(r,n.changes),await Yh(r.remoteStore)}catch(n){const i=_y(n,"Failed to persist write");s.reject(i)}}async function ZT(t,e){const s=We(t);try{const r=await A$(s.localStore,e);e.targetChanges.forEach((n,i)=>{const o=s._u.get(i);o&&(_t(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,22616),n.addedDocuments.size>0?o.tu=!0:n.modifiedDocuments.size>0?_t(o.tu,14607):n.removedDocuments.size>0&&(_t(o.tu,42227),o.tu=!1))}),await Fc(s,r,e)}catch(r){await qa(r)}}function K_(t,e,s){const r=We(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const n=[];r.ru.forEach((i,o)=>{const l=o.view.ga(e);l.snapshot&&n.push(l.snapshot)}),function(o,l){const c=We(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const p of f.Ra)p.ga(l)&&(u=!0)}),u&&by(c)}(r.eventManager,e),n.length&&r.nu.Q_(n),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _6(t,e,s){const r=We(t);r.sharedClientState.updateQueryState(e,"rejected",s);const n=r._u.get(e),i=n&&n.key;if(i){let o=new Dt(Ne.comparator);o=o.insert(i,Ps.newNoDocument(i,Be.min()));const l=st().add(i),c=new zh(Be.min(),new Map,new Dt(Ye),o,l);await ZT(r,c),r.ou=r.ou.remove(i),r._u.delete(e),Sy(r)}else await Mm(r.localStore,e,!1).then(()=>Um(r,e,s)).catch(qa)}async function b6(t,e){const s=We(t),r=e.batch.batchId;try{const n=await C$(s.localStore,e);tk(s,r,null),ek(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Fc(s,n)}catch(n){await qa(n)}}async function w6(t,e,s){const r=We(t);try{const n=await function(o,l){const c=We(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(_t(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);tk(r,e,s),ek(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await Fc(r,n)}catch(n){await qa(n)}}function ek(t,e){(t.cu.get(e)||[]).forEach(s=>{s.resolve()}),t.cu.delete(e)}function tk(t,e,s){const r=We(t);let n=r.uu[r.currentUser.toKey()];if(n){const i=n.get(e);i&&(s?i.reject(s):i.resolve(),n=n.remove(e)),r.uu[r.currentUser.toKey()]=n}}function Um(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),s&&t.nu.Tu(r,s);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||sk(t,r)})}function sk(t,e){t.su.delete(e.path.canonicalString());const s=t.ou.get(e);s!==null&&(py(t.remoteStore,s),t.ou=t.ou.remove(e),t._u.delete(s),Sy(t))}function Y_(t,e,s){for(const r of s)r instanceof QT?(t.au.addReference(r.key,e),S6(t,r)):r instanceof XT?(Ie(wy,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||sk(t,r.key)):Ue(19791,{Iu:r})}function S6(t,e){const s=e.key,r=s.path.canonicalString();t.ou.get(s)||t.su.has(r)||(Ie(wy,"New document in limbo: "+s),t.su.add(r),Sy(t))}function Sy(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const s=new Ne(Ft.fromString(e)),r=t.lu.next();t._u.set(r,new d6(s)),t.ou=t.ou.insert(s,r),HT(t.remoteStore,new ii(Kr(iy(s.path)),r,"TargetPurposeLimboResolution",$h.le))}}async function Fc(t,e,s){const r=We(t),n=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((l,c)=>{o.push(r.Pu(c,e,s).then(u=>{var d;if((u||s)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=s==null?void 0:s.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){n.push(u);const f=hy.Ps(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.nu.Q_(n),await async function(c,u){const d=We(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ie.forEach(u,p=>ie.forEach(p.ls,g=>d.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>ie.forEach(p.hs,g=>d.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!ja(f))throw f;Ie(fy,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=d.Ss.get(p),b=g.snapshotVersion,k=g.withLastLimboFreeSnapshotVersion(b);d.Ss=d.Ss.insert(p,k)}}}(r.localStore,i))}async function E6(t,e){const s=We(t);if(!s.currentUser.isEqual(e)){Ie(wy,"User change. New user:",e.toKey());const r=await VT(s.localStore,e);s.currentUser=e,function(i,o){i.cu.forEach(l=>{l.forEach(c=>{c.reject(new Re(pe.CANCELLED,o))})}),i.cu.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fc(s,r.Ms)}}function T6(t,e){const s=We(t),r=s._u.get(e);if(r&&r.tu)return st().add(r.key);{let n=st();const i=s.iu.get(e);if(!i)return n;for(const o of i){const l=s.ru.get(o);n=n.unionWith(l.view.Wa)}return n}}function rk(t){const e=We(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_6.bind(null,e),e.nu.Q_=o6.bind(null,e.eventManager),e.nu.Tu=a6.bind(null,e.eventManager),e}function k6(t){const e=We(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w6.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,s){return null}fu(e,s){return null}Vu(e){return I$(this.persistence,new E$,e.initialUser,this.serializer)}Ru(e){return new FT(dy.Ei,this.serializer)}Au(e){return new N$}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class I6 extends Ud{constructor(e){super(),this.cacheSizeBytes=e}mu(e,s){_t(this.persistence.referenceDelegate instanceof Dd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new l$(r,e.asyncQueue,s)}Ru(e){const s=this.cacheSizeBytes!==void 0?Gs.withCacheSize(this.cacheSizeBytes):Gs.DEFAULT;return new FT(r=>Dd.Ei(r,s),this.serializer)}}class Fm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=E6.bind(null,this.syncEngine),await t6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r6}()}createDatastore(e){const s=Gh(e.databaseInfo.databaseId),r=function(i){return new U$(i)}(e.databaseInfo);return function(i,o,l,c){return new q$(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return function(r,n,i,o,l){return new H$(r,n,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,s=>K_(this.syncEngine,s,0),function(){return q_.C()?new q_:new O$}())}createSyncEngine(e,s){return function(n,i,o,l,c,u,d){const f=new h6(n,i,o,l,c,u);return d&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(n){const i=We(n);Ie(mo,"RemoteStore shutting down."),i.aa.add(5),await Uc(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}Fm.provider={build:()=>new Fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class A6{constructor(e,s,r,n,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=n,this.user=Ts.UNAUTHENTICATED,this.clientId=JE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ie(Si,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ie(Si,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=_y(s,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ip(t,e){t.asyncQueue.verifyOperationInProgress(),Ie(Si,"Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener(async n=>{r.isEqual(n)||(await VT(e.localStore,n),r=n)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Q_(t,e){t.asyncQueue.verifyOperationInProgress();const s=await P6(t);Ie(Si,"Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(r=>H_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,n)=>H_(e.remoteStore,n)),t._onlineComponents=e}async function P6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie(Si,"Using user provided OfflineComponentProvider");try{await Ip(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(n){return n.name==="FirebaseError"?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(s))throw s;ba("Error using user provided cache. Falling back to memory cache: "+s),await Ip(t,new Ud)}}else Ie(Si,"Using default OfflineComponentProvider"),await Ip(t,new I6(void 0));return t._offlineComponents}async function nk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie(Si,"Using user provided OnlineComponentProvider"),await Q_(t,t._uninitializedComponentsProvider._online)):(Ie(Si,"Using default OnlineComponentProvider"),await Q_(t,new Fm))),t._onlineComponents}function x6(t){return nk(t).then(e=>e.syncEngine)}async function L6(t){const e=await nk(t),s=e.eventManager;return s.onListen=f6.bind(null,e.syncEngine),s.onUnlisten=g6.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=p6.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=y6.bind(null,e.syncEngine),s}function R6(t,e,s={}){const r=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new C6({next:p=>{d.yu(),o.enqueueAndForget(()=>i6(i,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new Re(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new Re(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new l6(iy(l.path),d,{includeMetadataChanges:!0,Fa:!0});return n6(i,f)}(await L6(t),t.asyncQueue,e,s,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t,e,s){if(!s)throw new Re(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O6(t,e,s,r){if(e===!0&&r===!0)throw new Re(pe.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function J_(t){if(!Ne.isDocumentKey(t))throw new Re(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ey(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue(12329,{type:typeof t})}function hc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Ey(t);throw new Re(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="firestore.googleapis.com",Z_=!0;class eb{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ok,this.ssl=Z_}else this.host=e.host,this.ssl=(s=e.ssl)!==null&&s!==void 0?s:Z_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o$)throw new Re(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ik((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Re(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ty{constructor(e,s,r,n){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D3;switch(r.type){case"firstParty":return new V3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const r=X_.get(s);r&&(Ie("ComponentProvider","Removing Datastore"),X_.delete(s),r.terminate())}(this),Promise.resolve()}}function M6(t,e,s,r={}){var n;t=hc(t,Ty);const i=Mh(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${s}`;i&&DE(`https://${c}`),o.host!==ok&&o.host!==c&&ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!gi(u,l)&&(t._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Ts.MOCK_USER;else{d=cD(r.mockUserToken,(n=t._app)===null||n===void 0?void 0:n.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Re(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ts(p)}t._authCredentials=new $3(new QE(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ky(this.firestore,e,this._query)}}class gr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class fc extends ky{constructor(e,s,r){super(e,s,iy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new Ne(e))}withConverter(e){return new fc(this.firestore,e,this._path)}}function kl(t,e,...s){if(t=Mt(t),arguments.length===1&&(e=JE.newId()),N6("doc","path",e),t instanceof Ty){const r=Ft.fromString(e,...s);return J_(r),new gr(t,null,new Ne(r))}{if(!(t instanceof gr||t instanceof fc))throw new Re(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...s));return J_(r),new gr(t.firestore,t instanceof fc?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="AsyncQueue";class sb{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new qT(this,"async_queue_retry"),this.ju=()=>{const r=kp();r&&Ie(tb,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const s=kp();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const s=kp();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const s=new hi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ja(e))throw e;Ie(tb,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const s=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,On("INTERNAL UNHANDLED ERROR: ",rb(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=s,s}enqueueAfterDelay(e,s,r){this.Ju(),this.zu.indexOf(e)>-1&&(s=0);const n=vy.createAndSchedule(this,e,s,r,i=>this.Xu(i));return this.Uu.push(n),n}Ju(){this.Ku&&Ue(47125,{ec:rb(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const s of this.Uu)if(s.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((s,r)=>s.targetTimeMs-r.targetTimeMs);for(const s of this.Uu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const s=this.Uu.indexOf(e);this.Uu.splice(s,1)}}function rb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Iy extends Ty{constructor(e,s,r,n){super(e,s,r,n),this.type="firestore",this._queue=new sb,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sb(e),this._firestoreClient=void 0,await e}}}function D6(t,e){const s=typeof t=="object"?t:Jg(),r=typeof t=="string"?t:Pd,n=Ro(s,"firestore").getImmediate({identifier:r});if(!n._initialized){const i=aD("firestore");i&&M6(n,...i)}return n}function ak(t){if(t._terminated)throw new Re(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$6(t),t._firestoreClient}function $6(t){var e,s,r;const n=t._freezeSettings(),i=function(l,c,u,d){return new t5(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ik(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._componentsProvider||!((s=n.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),t._firestoreClient=new A6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ia(vs.fromBase64String(e))}catch(s){throw new Re(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Ia(vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Re(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Re(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Re(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,n){if(r.length!==n.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==n[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=/^__.*__$/;class lk{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Oo(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function ck(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{oc:t})}}class xy{constructor(e,s,r,n,i,o){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=n,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new xy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),n=this.ac({path:r,cc:!1});return n.lc(e),n}hc(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),n=this.ac({path:r,cc:!1});return n._c(),n}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Fd(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(ck(this.oc)&&U6.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class F6{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Gh(e)}dc(e,s,r,n=!1){return new xy({oc:e,methodName:s,Ec:r,path:ms.emptyPath(),cc:!1,Ic:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V6(t){const e=t._freezeSettings(),s=Gh(t._databaseId);return new F6(t._databaseId,!!e.ignoreUndefinedProperties,s)}class Xh extends Cy{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function B6(t,e,s,r){const n=t.dc(1,e,s);dk("Data must be an object, but it was:",n,r);const i=[],o=or.empty();Ri(r,(c,u)=>{const d=Ly(e,c,s);u=Mt(u);const f=n.hc(d);if(u instanceof Xh)i.push(d);else{const p=Jh(u,f);p!=null&&(i.push(d),o.set(d,p))}});const l=new Ir(i);return new lk(o,l,n.fieldTransforms)}function q6(t,e,s,r,n,i){const o=t.dc(1,e,s),l=[nb(e,r,s)],c=[n];if(i.length%2!=0)throw new Re(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(nb(e,i[p])),c.push(i[p+1]);const u=[],d=or.empty();for(let p=l.length-1;p>=0;--p)if(!W6(u,l[p])){const g=l[p];let b=c[p];b=Mt(b);const k=o.hc(g);if(b instanceof Xh)u.push(g);else{const L=Jh(b,k);L!=null&&(u.push(g),d.set(g,L))}}const f=new Ir(u);return new lk(d,f,o.fieldTransforms)}function Jh(t,e){if(uk(t=Mt(t)))return dk("Unsupported field value:",e,t),j6(t,e);if(t instanceof Cy)return function(r,n){if(!ck(n.oc))throw n.Tc(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,n){const i=[];let o=0;for(const l of r){let c=Jh(l,n.Pc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,n){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return k5(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ss.fromDate(r);return{timestampValue:Md(n.serializer,i)}}if(r instanceof ss){const i=new ss(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(n.serializer,i)}}if(r instanceof Ay)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ia)return{bytesValue:LT(n.serializer,r._byteString)};if(r instanceof gr){const i=n.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw n.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cy(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof Py)return function(o,l){return{mapValue:{fields:{[oT]:{stringValue:aT},[xd]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Tc("VectorValues must only contain numeric values.");return oy(l.serializer,u)})}}}}}}(r,n);throw n.Tc(`Unsupported field value: ${Ey(r)}`)}(t,e)}function j6(t,e){const s={};return eT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ri(t,(r,n)=>{const i=Jh(n,e.uc(r));i!=null&&(s[r]=i)}),{mapValue:{fields:s}}}function uk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ss||t instanceof Ay||t instanceof Ia||t instanceof gr||t instanceof Cy||t instanceof Py)}function dk(t,e,s){if(!uk(s)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(s)){const r=Ey(s);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function nb(t,e,s){if((e=Mt(e))instanceof Qh)return e._internalPath;if(typeof e=="string")return Ly(t,e);throw Fd("Field path arguments must be of type string or ",t,!1,void 0,s)}const H6=new RegExp("[~\\*/\\[\\]]");function Ly(t,e,s){if(e.search(H6)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Qh(...e.split("."))._internalPath}catch{throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Fd(t,e,s,r,n){const i=r&&!r.isEmpty(),o=n!==void 0;let l=`Function ${e}() called with invalid data`;s&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${n}`),c+=")"),new Re(pe.INVALID_ARGUMENT,l+t+c)}function W6(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,s,r,n,i){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(fk("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class z6 extends hk{data(){return super.data()}}function fk(t,e){return typeof e=="string"?Ly(t,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}class G6{convertValue(e,s="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Ri(e,(n,i)=>{r[n]=this.convertValue(i,s)}),r}convertVectorValue(e){var s,r,n;const i=(n=(r=(s=e.fields)===null||s===void 0?void 0:s[xd].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(o=>jt(o.doubleValue));return new Py(i)}convertGeoPoint(e){return new Ay(jt(e.latitude),jt(e.longitude))}convertArray(e,s){return(e.values||[]).map(r=>this.convertValue(r,s))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Fh(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const s=vi(e);return new ss(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=Ft.fromString(e);_t($T(r),9688,{name:e});const n=new lc(r.get(1),r.get(3)),i=new Ne(r.popFirst(5));return n.isEqual(s)||On(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pk extends hk{constructor(e,s,r,n,i,o){super(e,s,r,n,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new Y6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(fk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class Y6 extends pk{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){t=hc(t,gr);const e=hc(t.firestore,Iy);return R6(ak(e),t._key).then(s=>J6(e,t,s))}class Q6 extends G6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ia(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,s)}}function Yu(t,e,s,...r){t=hc(t,gr);const n=hc(t.firestore,Iy),i=V6(n);let o;return o=typeof(e=Mt(e))=="string"||e instanceof Qh?q6(i,"updateDoc",t._key,e,s,r):B6(i,"updateDoc",t._key,e),X6(n,[o.toMutation(t._key,Cn.exists(!0))])}function X6(t,e){return function(r,n){const i=new hi;return r.asyncQueue.enqueueAndForget(async()=>v6(await x6(r),n,i)),i.promise}(ak(t),e)}function J6(t,e,s){const r=s.docs.get(e._key),n=new Q6(t);return new pk(t,n,e._key,r,new K6(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(n){Ba=n})(Va),sn(new Nr("firestore",(r,{instanceIdentifier:n,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Iy(new U3(r.getProvider("auth-internal")),new B3(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Re(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(u.options.projectId,d)}(o,n),o);return i=Object.assign({useFetchStreams:s},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),mr(c_,u_,e),mr(c_,u_,"esm2017")})();function Ry(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function gk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z6=gk,yk=new Lo("auth","Firebase",gk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Dh("@firebase/auth");function eU(t,...e){Vd.logLevel<=tt.WARN&&Vd.warn(`Auth (${Va}): ${t}`,...e)}function Qu(t,...e){Vd.logLevel<=tt.ERROR&&Vd.error(`Auth (${Va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,...e){throw Oy(t,...e)}function Lr(t,...e){return Oy(t,...e)}function Ny(t,e,s){const r=Object.assign(Object.assign({},Z6()),{[e]:s});return new Lo("auth","Firebase",r).create(e,{appName:t.name})}function Qr(t){return Ny(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vk(t,e,s){const r=s;if(!(e instanceof r))throw r.name!==e.constructor.name&&_r(t,"argument-error"),Ny(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oy(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return yk.create(t,...e)}function De(t,e,...s){if(!t)throw Oy(e,...s)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qu(e),new Error(e)}function Dn(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tU(){return ib()==="http:"||ib()==="https:"}function ib(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tU()||Kg()||"connection"in navigator)?navigator.onLine:!0}function rU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Dn(s>e,"Short delay should be less than long delay!"),this.isMobile=uD()||fD()}get(){return sU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e){Dn(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oU=new Vc(3e4,6e4);function Fn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dr(t,e,s,r,n={}){return bk(t,n,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Dc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return hD()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Mh(t.emulatorConfig.host)&&(u.credentials="include"),_k.fetch()(await wk(t,t.config.apiHost,s,l),u)})}async function bk(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},nU),e);try{const n=new lU(t),i=await Promise.race([s(),n.promise]);n.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xu(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ny(t,d,u);_r(t,d)}}catch(n){if(n instanceof Mr)throw n;_r(t,"network-request-failed",{message:String(n)})}}async function Bc(t,e,s,r,n={}){const i=await Dr(t,e,s,r,n);return"mfaPendingCredential"in i&&_r(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wk(t,e,s,r){const n=`${e}${s}?${r}`,i=t,o=i.config.emulator?My(t.config,n):`${t.config.apiScheme}://${n}`;return iU.includes(s)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function aU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),oU.get())})}}function xu(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const n=Lr(t,e,r);return n.customData._tokenResponse=s,n}function ob(t){return t!==void 0&&t.enterprise!==void 0}class cU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return aU(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uU(t,e){return Dr(t,"GET","/v2/recaptchaConfig",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function Bd(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hU(t,e=!1){const s=Mt(t),r=await s.getIdToken(e),n=Dy(r);De(n&&n.exp&&n.auth_time&&n.iat,s.auth,"internal-error");const i=typeof n.firebase=="object"?n.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:n,token:r,authTime:jl(Cp(n.auth_time)),issuedAtTime:jl(Cp(n.iat)),expirationTime:jl(Cp(n.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Cp(t){return Number(t)*1e3}function Dy(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const n=LE(s);return n?JSON.parse(n):(Qu("Failed to decode base64 JWT payload"),null)}catch(n){return Qu("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function ab(t){const e=Dy(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Mr&&fU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=jl(this.lastLoginAt),this.creationTime=jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t){var e;const s=t.auth,r=await t.getIdToken(),n=await go(t,Bd(s,{idToken:r}));De(n==null?void 0:n.users.length,s,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Sk(i.providerUserInfo):[],l=gU(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Bm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function mU(t){const e=Mt(t);await qd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gU(t,e){return[...t.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function Sk(t){return t.map(e=>{var{providerId:s}=e,r=Ry(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(t,e){const s=await bk(t,{},async()=>{const r=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:i}=t.config,o=await wk(t,n,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",_k.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function vU(t,e){return Dr(t,"POST","/v2/accounts:revokeToken",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ab(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){De(e.length!==0,"internal-error");const s=ab(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:n,expiresIn:i}=await yU(e,s);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:n,expirationTime:i}=s,o=new la;return r&&(De(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),n&&(De(typeof n=="string","internal-error",{appName:e}),o.accessToken=n),i&&(De(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:s,auth:r,stsTokenManager:n}=e,i=Ry(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await go(this,this.stsTokenManager.getToken(this.auth,e));return De(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return hU(this,e)}reload(){return mU(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await qd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await go(this,dU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,n,i,o,l,c,u,d;const f=(r=s.displayName)!==null&&r!==void 0?r:void 0,p=(n=s.email)!==null&&n!==void 0?n:void 0,g=(i=s.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=s.photoURL)!==null&&o!==void 0?o:void 0,k=(l=s.tenantId)!==null&&l!==void 0?l:void 0,L=(c=s._redirectEventId)!==null&&c!==void 0?c:void 0,V=(u=s.createdAt)!==null&&u!==void 0?u:void 0,R=(d=s.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:N,isAnonymous:D,providerData:U,stsTokenManager:C}=s;De(E&&C,e,"internal-error");const w=la.fromJSON(this.name,C);De(typeof E=="string",e,"internal-error"),Wn(f,e.name),Wn(p,e.name),De(typeof N=="boolean",e,"internal-error"),De(typeof D=="boolean",e,"internal-error"),Wn(g,e.name),Wn(b,e.name),Wn(k,e.name),Wn(L,e.name),Wn(V,e.name),Wn(R,e.name);const _=new Cr({uid:E,auth:e,email:p,emailVerified:N,displayName:f,isAnonymous:D,photoURL:b,phoneNumber:g,tenantId:k,stsTokenManager:w,createdAt:V,lastLoginAt:R});return U&&Array.isArray(U)&&(_.providerData=U.map(x=>Object.assign({},x))),L&&(_._redirectEventId=L),_}static async _fromIdTokenResponse(e,s,r=!1){const n=new la;n.updateFromServerResponse(s);const i=new Cr({uid:s.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await qd(i),i}static async _fromGetAccountInfoResponse(e,s,r){const n=s.users[0];De(n.localId!==void 0,"internal-error");const i=n.providerUserInfo!==void 0?Sk(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(i!=null&&i.length),l=new la;l.updateFromIdToken(r);const c=new Cr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new Bm(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new Map;function En(t){Dn(t instanceof Function,"Expected a class definition");let e=lb.get(t);return e?(Dn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Ek.type="NONE";const cb=Ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t,e,s){return`firebase:${t}:${e}:${s}`}class ca{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:n,name:i}=this.auth;this.fullUserKey=Xu(this.userKey,n.apiKey,i),this.fullPersistenceKey=Xu("persistence",n.apiKey,i),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await Bd(this.auth,{idToken:e}).catch(()=>{});return s?Cr._fromGetAccountInfoResponse(this.auth,s,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new ca(En(cb),e,r);const n=(await Promise.all(s.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=n[0]||En(cb);const o=Xu(r,e.config.apiKey,e.name);let l=null;for(const u of s)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const p=await Bd(e,{idToken:d}).catch(()=>{});if(!p)break;f=await Cr._fromGetAccountInfoResponse(e,p,d)}else f=Cr._fromJSON(e,d);u!==i&&(l=f),i=u;break}}catch{}const c=n.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ca(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(s.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ca(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ck(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pk(e))return"Blackberry";if(xk(e))return"Webos";if(kk(e))return"Safari";if((e.includes("chrome/")||Ik(e))&&!e.includes("edge/"))return"Chrome";if(Ak(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Tk(t=Os()){return/firefox\//i.test(t)}function kk(t=Os()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ik(t=Os()){return/crios\//i.test(t)}function Ck(t=Os()){return/iemobile/i.test(t)}function Ak(t=Os()){return/android/i.test(t)}function Pk(t=Os()){return/blackberry/i.test(t)}function xk(t=Os()){return/webos/i.test(t)}function $y(t=Os()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _U(t=Os()){var e;return $y(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bU(){return pD()&&document.documentMode===10}function Lk(t=Os()){return $y(t)||Ak(t)||xk(t)||Pk(t)||/windows phone/i.test(t)||Ck(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e=[]){let s;switch(t){case"Browser":s=ub(Os());break;case"Worker":s=`${ub(Os())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Va}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=s,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const n of s)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e={}){return Dr(t,"GET","/v2/passwordPolicy",Fn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU=6;class TU{constructor(e){var s,r,n,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=o.minPasswordLength)!==null&&s!==void 0?s:EU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,n,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(s=c.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.containsLowercaseLetter)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),n&&(s.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,s,r,n){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new db(this),this.idTokenSubscription=new db(this),this.beforeStateQueue=new wU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=En(s)),this._initializationPromise=this.queue(async()=>{var r,n,i;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Bd(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ys(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await qd(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ys(this.app))return Promise.reject(Qr(this));const s=e?Mt(e):null;return s&&De(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ys(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SU(this),s=new TU(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await vU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&En(e)||this._popupRedirectResolver;De(s,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[En(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,n){if(this._deleted)return()=>{};const i=typeof s=="function"?s:s.next.bind(s);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof s=="function"){const c=e.addObserver(s,r,n);return()=>{o=!0,c()}}else{const c=e.addObserver(s);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(s["X-Firebase-AppCheck"]=n),s}async _getAppCheckToken(){var e;if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&eU(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function $r(t){return Mt(t)}class db{constructor(e){this.auth=e,this.observer=null,this.addObserver=bD(s=>this.observer=s)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IU(t){Zh=t}function Nk(t){return Zh.loadJS(t)}function CU(){return Zh.recaptchaEnterpriseScript}function AU(){return Zh.gapiScript}function PU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xU{constructor(){this.enterprise=new LU}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class LU{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const RU="recaptcha-enterprise",Ok="NO_RECAPTCHA";class NU{constructor(e){this.type=RU,this.auth=$r(e)}async verify(e="verify",s=!1){async function r(i){if(!s){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{uU(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new cU(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function n(i,o,l){const c=window.grecaptcha;ob(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Ok)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xU().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!s&&ob(window.grecaptcha))n(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CU();c.length!==0&&(c+=l),Nk(c).then(()=>{n(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function hb(t,e,s,r=!1,n=!1){const i=new NU(t);let o;if(n)o=Ok;else try{o=await i.verify(s)}catch{o=await i.verify(s,!0)}const l=Object.assign({},e);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function jd(t,e,s,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await hb(t,e,s,s==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await hb(t,e,s,s==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e){const s=Ro(t,"auth");if(s.isInitialized()){const n=s.getImmediate(),i=s.getOptions();if(gi(i,e??{}))return n;_r(n,"already-initialized")}return s.initialize({options:e})}function MU(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DU(t,e,s){const r=$r(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!1,i=Mk(e),{host:o,port:l}=$U(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(gi(u,r.config.emulator)&&gi(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,UU(),Mh(o)&&DE(`${i}//${o}${c}`)}function Mk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $U(t){const e=Mk(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const i=n[1];return{host:i,port:fb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:fb(o)}}}function fb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UU(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,s){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function FU(t,e){return Dr(t,"POST","/v1/accounts:update",e)}async function VU(t,e){return Dr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e){return Bc(t,"POST","/v1/accounts:signInWithPassword",Fn(t,e))}async function Dk(t,e){return Dr(t,"POST","/v1/accounts:sendOobCode",Fn(t,e))}async function qU(t,e){return Dk(t,e)}async function jU(t,e){return Dk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Fn(t,e))}async function WU(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Uy{constructor(e,s,r,n=null){super("password",r),this._email=e,this._password=s,this._tenantId=n}static _fromEmailAndPassword(e,s){return new pc(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new pc(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jd(e,s,"signInWithPassword",BU);case"emailLink":return HU(e,{email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jd(e,r,"signUpPassword",VU);case"emailLink":return WU(e,{idToken:s,email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t,e){return Bc(t,"POST","/v1/accounts:signInWithIdp",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="http://localhost";class yo extends Uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):_r("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=s,i=Ry(s,["providerId","signInMethod"]);if(!r||!n)return null;const o=new yo(r,n);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const s=this.buildRequest();return ua(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,ua(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,ua(e,s)}buildRequest(){const e={requestUri:zU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Dc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KU(t){const e=bl(wl(t)).link,s=e?bl(wl(e)).deep_link_id:null,r=bl(wl(t)).deep_link_id;return(r?bl(wl(r)).link:null)||r||s||e||t}class Fy{constructor(e){var s,r,n,i,o,l;const c=bl(wl(e)),u=(s=c.apiKey)!==null&&s!==void 0?s:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=GU((n=c.mode)!==null&&n!==void 0?n:null);De(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const s=KU(e);try{return new Fy(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,s){return pc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=Fy.parseLink(s);return De(r,"argument-error"),pc._fromEmailAndCode(e,r.code,r.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends ef{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends qc{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return yo._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return zr.credential(s,r)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends qc{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends qc{constructor(){super("twitter.com")}static credential(e,s){return yo._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return ni.credential(s,r)}catch{return null}}}ni.TWITTER_SIGN_IN_METHOD="twitter.com";ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(t,e){return Bc(t,"POST","/v1/accounts:signUp",Fn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,n=!1){const i=await Cr._fromIdTokenResponse(e,r,n),o=pb(r);return new vo({user:i,providerId:o,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const n=pb(r);return new vo({user:e,providerId:n,_tokenResponse:r,operationType:s})}}function pb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends Mr{constructor(e,s,r,n){var i;super(s.code,s.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,n){return new Hd(e,s,r,n)}}function $k(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(t,i,e,r):i})}async function QU(t,e,s=!1){const r=await go(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return vo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e,s=!1){const{auth:r}=t;if(Ys(r.app))return Promise.reject(Qr(r));const n="reauthenticate";try{const i=await go(t,$k(r,n,e,t),s);De(i.idToken,r,"internal-error");const o=Dy(i.idToken);De(o,r,"internal-error");const{sub:l}=o;return De(t.uid===l,r,"user-mismatch"),vo._forOperation(t,n,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_r(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e,s=!1){if(Ys(t.app))return Promise.reject(Qr(t));const r="signIn",n=await $k(t,r,e),i=await vo._fromIdTokenResponse(t,r,n);return s||await t._updateCurrentUser(i.user),i}async function XU(t,e){return Fk($r(t),e)}async function JU(t,e){return Uk(Mt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t){const e=$r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Bk(t,e,s){const r=$r(t);await jd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jU)}async function qk(t,e,s){if(Ys(t.app))return Promise.reject(Qr(t));const r=$r(t),o=await jd(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Vk(t),c}),l=await vo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function jk(t,e,s){return Ys(t.app)?Promise.reject(Qr(t)):XU(Mt(t),Do.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Vk(t),r})}async function ZU(t,e){const s=Mt(t),n={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await qU(s.auth,n);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t,e){return Dr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const r=Mt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},o=await go(r,eF(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function tF(t,e){return sF(Mt(t),null,e)}async function sF(t,e,s){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};s&&(i.password=s);const o=await go(t,FU(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t,e){return Mt(t).setPersistence(e)}function nF(t,e,s,r){return Mt(t).onIdTokenChanged(e,s,r)}function iF(t,e,s){return Mt(t).beforeAuthStateChanged(e,s)}function jc(t,e,s,r){return Mt(t).onAuthStateChanged(e,s,r)}function Hk(t){return Mt(t).signOut()}async function oF(t){return Mt(t).delete()}const Wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=1e3,lF=10;class zk extends Wk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),n=this.localCache[s];r!==n&&e(s,n,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;s?this.detachListener():this.stopPolling();const n=()=>{const o=this.storage.getItem(r);!s&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);bU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,lF):n()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},aF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}zk.type="LOCAL";const Gk=zk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk extends Wk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Kk.type="SESSION";const Yk=Kk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(n=>n.isListeningto(e));if(s)return s;const r=new tf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:n,data:i}=s.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const l=Array.from(o).map(async u=>u(s.origin,i)),c=await cF(l);s.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:c})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Vy("",20);n.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:n,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:s},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function dF(t){Xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function hF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pF(){return Qk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="firebaseLocalStorageDb",mF=1,zd="firebaseLocalStorage",Jk="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function sf(t,e){return t.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function gF(){const t=indexedDB.deleteDatabase(Xk);return new Hc(t).toPromise()}function qm(){const t=indexedDB.open(Xk,mF);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zd,{keyPath:Jk})}catch(n){s(n)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),await gF(),e(await qm()))})})}async function gb(t,e,s){const r=sf(t,!0).put({[Jk]:e,value:s});return new Hc(r).toPromise()}async function yF(t,e){const s=sf(t,!1).get(e),r=await new Hc(s).toPromise();return r===void 0?null:r.value}function yb(t,e){const s=sf(t,!0).delete(e);return new Hc(s).toPromise()}const vF=800,_F=3;class Zk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>_F)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tf._getInstance(pF()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await hF(),!this.activeServiceWorker)return;this.sender=new uF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qm();return await gb(e,Wd,"1"),await yb(e,Wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>gb(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>yF(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>yb(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const i=sf(n,!1).getAll();return new Hc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),s.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),s.push(n));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zk.type="LOCAL";const bF=Zk;new Vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e){return e?En(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends Uy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,s){return ua(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function wF(t){return Fk(t.auth,new qy(t),t.bypassAuthState)}function SF(t){const{auth:e,user:s}=t;return De(s,e,"internal-error"),Uk(s,new qy(t),t.bypassAuthState)}async function EF(t){const{auth:e,user:s}=t;return De(s,e,"internal-error"),QU(s,new qy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,s,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:n,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:s,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wF;case"linkViaPopup":case"linkViaRedirect":return EF;case"reauthViaPopup":case"reauthViaRedirect":return SF;default:_r(this.auth,"internal-error")}}resolve(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new Vc(2e3,1e4);async function tI(t,e,s){if(Ys(t.app))return Promise.reject(Lr(t,"operation-not-supported-in-this-environment"));const r=$r(t);vk(t,e,ef);const n=By(r,s);return new Qi(r,"signInViaPopup",e,n).executeNotNull()}class Qi extends eI{constructor(e,s,r,n,i){super(e,s,n,i),this.provider=r,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Dn(this.filter.length===1,"Popup operations only handle one event");const e=Vy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TF.get())};e()}}Qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="pendingRedirect",Ju=new Map;class IF extends eI{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const r=await CF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CF(t,e){const s=rI(e),r=sI(t);if(!await r._isAvailable())return!1;const n=await r._get(s)==="true";return await r._remove(s),n}async function AF(t,e){return sI(t)._set(rI(e),"true")}function PF(t,e){Ju.set(t._key(),e)}function sI(t){return En(t._redirectPersistence)}function rI(t){return Xu(kF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t,e,s){return LF(t,e,s)}async function LF(t,e,s){if(Ys(t.app))return Promise.reject(Qr(t));const r=$r(t);vk(t,e,ef),await r._initializationPromise;const n=By(r,s);return await AF(n,r),n._openRedirect(r,e,"signInViaRedirect")}async function RF(t,e){return await $r(t)._initializationPromise,nI(t,e,!1)}async function nI(t,e,s=!1){if(Ys(t.app))return Promise.reject(Qr(t));const r=$r(t),n=By(r,e),o=await new IF(r,n,s).execute();return o&&!s&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=10*60*1e3;class OF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MF(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!iI(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(Lr(this.auth,n))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NF&&this.cachedEventUids.clear(),this.cachedEventUids.has(vb(e))}saveEventToCache(e){this.cachedEventUids.add(vb(e)),this.lastProcessedEventTime=Date.now()}}function vb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,e={}){return Dr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UF=/^https?/;async function FF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DF(t);for(const s of e)try{if(VF(s))return}catch{}_r(t,"unauthorized-domain")}function VF(t){const e=Vm(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===r}if(!UF.test(s))return!1;if($F.test(t))return r===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=new Vc(3e4,6e4);function _b(){const t=Xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function qF(t){return new Promise((e,s)=>{var r,n,i;function o(){_b(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_b(),s(Lr(t,"network-request-failed"))},timeout:BF.get()})}if(!((n=(r=Xr().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((i=Xr().gapi)===null||i===void 0)&&i.load)o();else{const l=PU("iframefcb");return Xr()[l]=()=>{gapi.load?o():s(Lr(t,"network-request-failed"))},Nk(`${AU()}?onload=${l}`).catch(c=>s(c))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function jF(t){return Zu=Zu||qF(t),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=new Vc(5e3,15e3),WF="__/auth/iframe",zF="emulator/auth/iframe",GF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YF(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?My(e,zF):`https://${t.config.authDomain}/${WF}`,r={apiKey:e.apiKey,appName:t.name,v:Va},n=KF.get(t.config.apiHost);n&&(r.eid=n);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${s}?${Dc(r).slice(1)}`}async function QF(t){const e=await jF(t),s=Xr().gapi;return De(s,t,"internal-error"),e.open({where:document.body,url:YF(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GF,dontclear:!0},r=>new Promise(async(n,i)=>{await r.restyle({setHideOnLeave:!1});const o=Lr(t,"network-request-failed"),l=Xr().setTimeout(()=>{i(o)},HF.get());function c(){Xr().clearTimeout(l),n(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JF=500,ZF=600,e8="_blank",t8="http://localhost";class bb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s8(t,e,s,r=JF,n=ZF){const i=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},XF),{width:r.toString(),height:n.toString(),top:i,left:o}),u=Os().toLowerCase();s&&(l=Ik(u)?e8:s),Tk(u)&&(e=e||t8,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(_U(u)&&l!=="_self")return r8(e||"",l),new bb(null);const f=window.open(e||"",l,d);De(f,t,"popup-blocked");try{f.focus()}catch{}return new bb(f)}function r8(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8="__/auth/handler",i8="emulator/auth/handler",o8=encodeURIComponent("fac");async function wb(t,e,s,r,n,i){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:Va,eventId:n};if(e instanceof ef){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_D(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof qc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${o8}=${encodeURIComponent(c)}`:"";return`${a8(t)}?${Dc(l).slice(1)}${u}`}function a8({config:t}){return t.emulator?My(t,i8):`https://${t.authDomain}/${n8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="webStorageSupport";class l8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yk,this._completeRedirectFn=nI,this._overrideRedirectResult=PF}async _openPopup(e,s,r,n){var i;Dn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await wb(e,s,r,Vm(),n);return s8(e,o,Vy())}async _openRedirect(e,s,r,n){await this._originValidation(e);const i=await wb(e,s,r,Vm(),n);return dF(i),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:n,promise:i}=this.eventManagers[s];return n?Promise.resolve(n):(Dn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await QF(e),r=new OF(e);return s.register("authEvent",n=>(De(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Ap,{type:Ap},n=>{var i;const o=(i=n==null?void 0:n[0])===null||i===void 0?void 0:i[Ap];o!==void 0&&s(!!o),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=FF(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Lk()||kk()||$y()}}const c8=l8;var Sb="@firebase/auth",Eb="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h8(t){sn(new Nr("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;De(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rk(t)},u=new kU(r,n,i,c);return MU(u,s),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),sn(new Nr("auth-internal",e=>{const s=$r(e.getProvider("auth").getImmediate());return(r=>new u8(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(Sb,Eb,d8(t)),mr(Sb,Eb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=5*60,p8=OE("authIdTokenMaxAge")||f8;let Tb=null;const m8=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>p8)return;const n=s==null?void 0:s.token;Tb!==n&&(Tb=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function oI(t=Jg()){const e=Ro(t,"auth");if(e.isInitialized())return e.getImmediate();const s=OU(t,{popupRedirectResolver:c8,persistence:[bF,Gk,Yk]}),r=OE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=m8(i.toString());iF(s,o,()=>o(s.currentUser)),nF(s,l=>o(l))}}const n=RE("auth");return n&&DU(s,`http://${n}`),s}function g8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IU({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n=>{const i=Lr("internal-error");i.customData=n,s(i)},r.type="text/javascript",r.charset="UTF-8",g8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h8("Browser");const aI="@firebase/installations",jy="0.6.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=1e4,cI=`w:${jy}`,uI="FIS_v2",y8="https://firebaseinstallations.googleapis.com/v1",v8=60*60*1e3,_8="installations",b8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_o=new Lo(_8,b8,w8);function dI(t){return t instanceof Mr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI({projectId:t}){return`${y8}/projects/${t}/installations`}function fI(t){return{token:t.token,requestStatus:2,expiresIn:E8(t.expiresIn),creationTime:Date.now()}}async function pI(t,e){const r=(await e.json()).error;return _o.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function mI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function S8(t,{refreshToken:e}){const s=mI(t);return s.append("Authorization",T8(e)),s}async function gI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function E8(t){return Number(t.replace("s","000"))}function T8(t){return`${uI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const r=hI(t),n=mI(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&n.append("x-firebase-client",u)}const o={fid:s,authVersion:uI,appId:t.appId,sdkVersion:cI},l={method:"POST",headers:n,body:JSON.stringify(o)},c=await gI(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||s,registrationStatus:2,refreshToken:u.refreshToken,authToken:fI(u.authToken)}}else throw await pI("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=/^[cdef][\w-]{21}$/,jm="";function A8(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=P8(t);return C8.test(s)?s:jm}catch{return jm}}function P8(t){return I8(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Map;function _I(t,e){const s=rf(t);bI(s,e),x8(s,e)}function bI(t,e){const s=vI.get(t);if(s)for(const r of s)r(e)}function x8(t,e){const s=L8();s&&s.postMessage({key:t,fid:e}),R8()}let Xi=null;function L8(){return!Xi&&"BroadcastChannel"in self&&(Xi=new BroadcastChannel("[Firebase] FID Change"),Xi.onmessage=t=>{bI(t.data.key,t.data.fid)}),Xi}function R8(){vI.size===0&&Xi&&(Xi.close(),Xi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8="firebase-installations-database",O8=1,bo="firebase-installations-store";let Pp=null;function Hy(){return Pp||(Pp=FE(N8,O8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bo)}}})),Pp}async function Gd(t,e){const s=rf(t),n=(await Hy()).transaction(bo,"readwrite"),i=n.objectStore(bo),o=await i.get(s);return await i.put(e,s),await n.done,(!o||o.fid!==e.fid)&&_I(t,e.fid),e}async function wI(t){const e=rf(t),r=(await Hy()).transaction(bo,"readwrite");await r.objectStore(bo).delete(e),await r.done}async function nf(t,e){const s=rf(t),n=(await Hy()).transaction(bo,"readwrite"),i=n.objectStore(bo),o=await i.get(s),l=e(o);return l===void 0?await i.delete(s):await i.put(l,s),await n.done,l&&(!o||o.fid!==l.fid)&&_I(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wy(t){let e;const s=await nf(t.appConfig,r=>{const n=M8(r),i=D8(t,n);return e=i.registrationPromise,i.installationEntry});return s.fid===jm?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function M8(t){const e=t||{fid:A8(),registrationStatus:0};return SI(e)}function D8(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(_o.create("app-offline"));return{installationEntry:e,registrationPromise:n}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=$8(t,s);return{installationEntry:s,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:U8(t)}:{installationEntry:e}}async function $8(t,e){try{const s=await k8(t,e);return Gd(t.appConfig,s)}catch(s){throw dI(s)&&s.customData.serverCode===409?await wI(t.appConfig):await Gd(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function U8(t){let e=await kb(t.appConfig);for(;e.registrationStatus===1;)await yI(100),e=await kb(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await Wy(t);return r||s}return e}function kb(t){return nf(t,e=>{if(!e)throw _o.create("installation-not-found");return SI(e)})}function SI(t){return F8(t)?{fid:t.fid,registrationStatus:0}:t}function F8(t){return t.registrationStatus===1&&t.registrationTime+lI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V8({appConfig:t,heartbeatServiceProvider:e},s){const r=B8(t,s),n=S8(t,s),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&n.append("x-firebase-client",u)}const o={installation:{sdkVersion:cI,appId:t.appId}},l={method:"POST",headers:n,body:JSON.stringify(o)},c=await gI(()=>fetch(r,l));if(c.ok){const u=await c.json();return fI(u)}else throw await pI("Generate Auth Token",c)}function B8(t,{fid:e}){return`${hI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zy(t,e=!1){let s;const r=await nf(t.appConfig,i=>{if(!EI(i))throw _o.create("not-registered");const o=i.authToken;if(!e&&H8(o))return i;if(o.requestStatus===1)return s=q8(t,e),i;{if(!navigator.onLine)throw _o.create("app-offline");const l=z8(i);return s=j8(t,l),l}});return s?await s:r.authToken}async function q8(t,e){let s=await Ib(t.appConfig);for(;s.authToken.requestStatus===1;)await yI(100),s=await Ib(t.appConfig);const r=s.authToken;return r.requestStatus===0?zy(t,e):r}function Ib(t){return nf(t,e=>{if(!EI(e))throw _o.create("not-registered");const s=e.authToken;return G8(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function j8(t,e){try{const s=await V8(t,e),r=Object.assign(Object.assign({},e),{authToken:s});return await Gd(t.appConfig,r),s}catch(s){if(dI(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await wI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Gd(t.appConfig,r)}throw s}}function EI(t){return t!==void 0&&t.registrationStatus===2}function H8(t){return t.requestStatus===2&&!W8(t)}function W8(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+v8}function z8(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function G8(t){return t.requestStatus===1&&t.requestTime+lI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8(t){const e=t,{installationEntry:s,registrationPromise:r}=await Wy(e);return r?r.catch(console.error):zy(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y8(t,e=!1){const s=t;return await Q8(s),(await zy(s,e)).token}async function Q8(t){const{registrationPromise:e}=await Wy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t){if(!t||!t.options)throw xp("App Configuration");if(!t.name)throw xp("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw xp(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xp(t){return _o.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="installations",J8="installations-internal",Z8=t=>{const e=t.getProvider("app").getImmediate(),s=X8(e),r=Ro(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},e9=t=>{const e=t.getProvider("app").getImmediate(),s=Ro(e,TI).getImmediate();return{getId:()=>K8(s),getToken:n=>Y8(s,n)}};function t9(){sn(new Nr(TI,Z8,"PUBLIC")),sn(new Nr(J8,e9,"PRIVATE"))}t9();mr(aI,jy);mr(aI,jy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="analytics",s9="firebase_id",r9="origin",n9=60*1e3,i9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new Dh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},cr=new Lo("analytics","Analytics",o9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t){if(!t.startsWith(Gy)){const e=cr.create("invalid-gtag-resource",{gtagURL:t});return Zs.warn(e.message),""}return t}function kI(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function l9(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function c9(t,e){const s=l9("firebase-js-sdk-policy",{createScriptURL:a9}),r=document.createElement("script"),n=`${Gy}?l=${t}&id=${e}`;r.src=s?s==null?void 0:s.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function u9(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function d9(t,e,s,r,n,i){const o=r[n];try{if(o)await e[o];else{const c=(await kI(s)).find(u=>u.measurementId===n);c&&await e[c.appId]}}catch(l){Zs.error(l)}t("config",n,i)}async function h9(t,e,s,r,n){try{let i=[];if(n&&n.send_to){let o=n.send_to;Array.isArray(o)||(o=[o]);const l=await kI(s);for(const c of o){const u=l.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,n||{})}catch(i){Zs.error(i)}}function f9(t,e,s,r){async function n(i,...o){try{if(i==="event"){const[l,c]=o;await h9(t,e,s,l,c)}else if(i==="config"){const[l,c]=o;await d9(t,e,s,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Zs.error(l)}}return n}function p9(t,e,s,r,n){let i=function(...o){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(i=window[n]),window[n]=f9(i,t,e,s),{gtagCore:i,wrappedGtag:window[n]}}function m9(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(Gy)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=30,y9=1e3;class v9{constructor(e={},s=y9){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const II=new v9;function _9(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function b9(t){var e;const{appId:s,apiKey:r}=t,n={method:"GET",headers:_9(r)},i=i9.replace("{app-id}",s),o=await fetch(i,n);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw cr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function w9(t,e=II,s){const{appId:r,apiKey:n,measurementId:i}=t.options;if(!r)throw cr.create("no-app-id");if(!n){if(i)return{measurementId:i,appId:r};throw cr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new T9;return setTimeout(async()=>{l.abort()},n9),CI({appId:r,apiKey:n,measurementId:i},o,l,e)}async function CI(t,{throttleEndTimeMillis:e,backoffCount:s},r,n=II){var i;const{appId:o,measurementId:l}=t;try{await S9(r,e)}catch(c){if(l)return Zs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await b9(t);return n.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!E9(u)){if(n.deleteThrottleMetadata(o),l)return Zs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw c}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?Z1(s,n.intervalMillis,g9):Z1(s,n.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:s+1};return n.setThrottleMetadata(o,f),Zs.debug(`Calling attemptFetch again in ${d} millis`),CI(t,f,r,n)}}function S9(t,e){return new Promise((s,r)=>{const n=Math.max(e-Date.now(),0),i=setTimeout(s,n);t.addEventListener(()=>{clearTimeout(i),r(cr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function E9(t){if(!(t instanceof Mr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class T9{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function k9(t,e,s,r,n){if(n&&n.global){t("event",s,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",s,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(){if(Yg())try{await Qg()}catch(t){return Zs.warn(cr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Zs.warn(cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function C9(t,e,s,r,n,i,o){var l;const c=w9(t);c.then(g=>{s[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Zs.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Zs.error(g)),e.push(c);const u=I9().then(g=>{if(g)return r.getId()}),[d,f]=await Promise.all([c,u]);m9(i)||c9(i,d.measurementId),n("js",new Date);const p=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return p[r9]="firebase",p.update=!0,f!=null&&(p[s9]=f),n("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e){this.app=e}_delete(){return delete Hl[this.app.options.appId],Promise.resolve()}}let Hl={},Cb=[];const Ab={};let Lp="dataLayer",P9="gtag",Pb,AI,xb=!1;function x9(){const t=[];if(Kg()&&t.push("This is a browser extension environment."),ME()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,n)=>`(${n+1}) ${r}`).join(" "),s=cr.create("invalid-analytics-context",{errorInfo:e});Zs.warn(s.message)}}function L9(t,e,s){x9();const r=t.options.appId;if(!r)throw cr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Zs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw cr.create("no-api-key");if(Hl[r]!=null)throw cr.create("already-exists",{id:r});if(!xb){u9(Lp);const{wrappedGtag:i,gtagCore:o}=p9(Hl,Cb,Ab,Lp,P9);AI=i,Pb=o,xb=!0}return Hl[r]=C9(t,Cb,Ab,e,Pb,Lp,s),new A9(t)}function R9(t=Jg()){t=Mt(t);const e=Ro(t,Kd);return e.isInitialized()?e.getImmediate():N9(t)}function N9(t,e={}){const s=Ro(t,Kd);if(s.isInitialized()){const n=s.getImmediate();if(gi(e,s.getOptions()))return n;throw cr.create("already-initialized")}return s.initialize({options:e})}async function O9(){if(Kg()||!ME()||!Yg())return!1;try{return await Qg()}catch{return!1}}function M9(t,e,s,r){t=Mt(t),k9(AI,Hl[t.app.options.appId],e,s,r).catch(n=>Zs.error(n))}const Lb="@firebase/analytics",Rb="0.10.13";function D9(){sn(new Nr(Kd,(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();return L9(r,n,s)},"PUBLIC")),sn(new Nr("analytics-internal",t,"PRIVATE")),mr(Lb,Rb),mr(Lb,Rb,"esm2017");function t(e){try{const s=e.getProvider(Kd).getImmediate();return{logEvent:(r,n,i)=>M9(s,r,n,i)}}catch(s){throw cr.create("interop-component-reg-failed",{reason:s})}}}D9();const $9={apiKey:"AIzaSyDg032Kbbm2NbSYgYiwu_xgQDUZ1vHf1jA",authDomain:"auth.aced.live",projectId:"aced-9cf72",storageBucket:"aced-9cf72.appspot.com",messagingSenderId:"295500018562",appId:"1:295500018562:web:1bf3a721401ab29665559b",measurementId:"G-VH244VZZD8"},of=VE($9),Il=D6(of),me=oI(of);typeof window<"u"&&O9().then(t=>{t&&R9(of)});const U9=Object.freeze(Object.defineProperty({__proto__:null,app:of,auth:me,db:Il,doc:kl,getDoc:mk,updateDoc:Yu},Symbol.toStringTag,{value:"Module"})),qr=(t,e={})=>{var s;if(!(typeof window>"u"))try{const r={...e,eventName:t,source:"user-store",timestamp:e.timestamp||Date.now(),version:"2.0"},n=new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0});window.dispatchEvent(n),(s=window.eventBus)!=null&&s.emit&&window.eventBus.emit(t,r)}catch(r){console.error(" [store/user] Event trigger error:",r)}},Nb=t=>{const e={free:{vocabulary:!1,analytics:!1,unlimited_lessons:!1,priority_support:!1,custom_courses:!1,offline_mode:!1,export_progress:!1,advanced_grammar:!1,multiple_languages:!1,ai_tutor:!1},start:{vocabulary:!0,analytics:!1,unlimited_lessons:!1,priority_support:!0,custom_courses:!1,offline_mode:!0,export_progress:!1,advanced_grammar:!0,multiple_languages:!1,ai_tutor:!1},pro:{vocabulary:!0,analytics:!0,unlimited_lessons:!0,priority_support:!0,custom_courses:!0,offline_mode:!0,export_progress:!0,advanced_grammar:!0,multiple_languages:!0,ai_tutor:!0},premium:{vocabulary:!0,analytics:!0,unlimited_lessons:!0,priority_support:!0,custom_courses:!0,offline_mode:!0,export_progress:!0,advanced_grammar:!0,multiple_languages:!0,ai_tutor:!0}},s=t.userStatus||"free";t.features={...e[s]||e.free}},ed=t=>{var e,s,r,n;return((e=t.currentUser)==null?void 0:e.firebaseId)||((s=t.currentUser)==null?void 0:s.firebaseUserId)||((r=t.currentUser)==null?void 0:r._id)||((n=t.currentUser)==null?void 0:n.uid)||localStorage.getItem("userId")||localStorage.getItem("firebaseUserId")||null},F9=()=>({currentUser:null,userStatus:"free",subscription:{plan:"free",status:"inactive",source:null,startDate:null,expiryDate:null,isAutoRenew:!1,details:{},lastSync:null,serverFetch:!1},usage:{current:{messages:0,images:0,lastUpdated:null,resetDate:null},limits:{free:{messages:50,images:5},start:{messages:-1,images:20},pro:{messages:-1,images:-1},premium:{messages:-1,images:-1}}},features:{vocabulary:!1,analytics:!1,unlimited_lessons:!1,priority_support:!1,custom_courses:!1,offline_mode:!1,export_progress:!1,advanced_grammar:!1,multiple_languages:!1,ai_tutor:!1},promocodes:{applied:[],available:[],lastCheck:null},payments:{history:[],pending:[],failed:[],lastCheck:null},system:{initialized:!1,initializationTime:null,lastUpdate:Date.now(),forceUpdateCounter:0,syncInProgress:!1,lastServerSync:null,loading:{status:!1,usage:!1,payments:!1,saving:!1,sync:!1},errors:{lastError:null,errorCount:0}}}),V9={SET_USER(t,e){const s=Date.now();if(t.currentUser=e?{...e,lastUpdate:s}:null,t.system.lastUpdate=s,t.system.forceUpdateCounter++,e)try{localStorage.setItem("currentUser",JSON.stringify(e)),localStorage.setItem("userId",e.firebaseId||e.uid||e._id),localStorage.setItem("firebaseUserId",e.firebaseId||e.uid)}catch{}qr("userUpdated",{user:e,timestamp:s})},CLEAR_USER(t){const e=Date.now();t.currentUser=null,t.userStatus="free",t.subscription={plan:"free",status:"inactive",source:null,startDate:null,expiryDate:null,isAutoRenew:!1,details:{},lastSync:null,serverFetch:!1},t.usage.current={messages:0,images:0,lastUpdated:null,resetDate:null},t.features=Object.keys(t.features).reduce((r,n)=>({...r,[n]:!1}),{}),t.promocodes.applied=[],t.payments.history=[],t.system.initialized=!1,t.system.lastUpdate=e,t.system.forceUpdateCounter++,["currentUser","userStatus","subscriptionData","subscriptionPlan","userPlan","plan","subscriptionExpiry","userId","firebaseUserId"].forEach(r=>{try{localStorage.removeItem(r)}catch{}}),qr("userCleared",{timestamp:e})},SET_USER_STATUS(t,e){const s=t.userStatus,n=["free","start","pro","premium"].includes(e)?e:"free";t.userStatus=n,(!t.subscription||typeof t.subscription!="object")&&(t.subscription={plan:"free",status:"inactive",source:null,startDate:null,expiryDate:null,isAutoRenew:!1,details:{},lastSync:null,serverFetch:!1}),t.subscription.plan=n,t.subscription.status=n!=="free"?"active":"inactive",t.subscription.lastSync=new Date().toISOString(),t.system.lastUpdate=Date.now(),t.system.forceUpdateCounter++,Nb(t);try{localStorage.setItem("userStatus",n),localStorage.setItem("userPlan",n),localStorage.setItem("subscriptionPlan",n),localStorage.setItem("plan",n)}catch{}qr("userStatusChanged",{oldStatus:s,newStatus:n,timestamp:Date.now()}),qr("subscriptionUpdated",{plan:n,timestamp:Date.now()})},UPDATE_SUBSCRIPTION(t,e){if(!e||typeof e!="object")return;const s=Date.now();t.system||(t.system={loading:{},errors:{errorCount:0,lastError:null},initialized:!1,lastUpdate:Date.now(),forceUpdateCounter:0}),t.subscription={...t.subscription,...e,lastSync:new Date().toISOString()},e.plan&&(t.userStatus=e.plan,Nb(t)),t.system.lastUpdate=s,qr("subscriptionUpdated",{...e,timestamp:s});try{localStorage.setItem("subscriptionData",JSON.stringify(t.subscription)),e.expiryDate&&localStorage.setItem("subscriptionExpiry",e.expiryDate)}catch{}},SET_LOADING(t,{type:e,loading:s}){t.system||(t.system={loading:{},errors:{errorCount:0,lastError:null},initialized:!1,lastUpdate:Date.now(),forceUpdateCounter:0}),t.system.loading||(t.system.loading={}),t.system.loading[e]=!!s,t.system.lastUpdate=Date.now()},SET_INITIALIZED(t,e=!0){t.system.initialized=!!e,t.system.initializationTime=e?Date.now():null,t.system.lastUpdate=Date.now()},SET_LAST_SERVER_SYNC(t,e){t.system.lastServerSync=e||Date.now()},FORCE_UPDATE(t){t.system.forceUpdateCounter++,t.system.lastUpdate=Date.now(),qr("forceUpdate",{counter:t.system.forceUpdateCounter})},SET_ERROR(t,e){t.system.errors.lastError={message:e.message||e,timestamp:Date.now(),context:e.context||null},t.system.errors.errorCount++},ADD_PROMOCODE(t,e){var r;Array.isArray(t.promocodes.applied)||(t.promocodes.applied=[]);const s={id:`promo_${Date.now()}`,code:((r=e.code)==null?void 0:r.toUpperCase())||"",plan:e.plan||"free",appliedAt:new Date().toISOString(),source:e.source||"manual"};t.promocodes.applied.unshift(s),t.promocodes.applied.length>10&&(t.promocodes.applied=t.promocodes.applied.slice(0,10));try{localStorage.setItem("appliedPromocodes",JSON.stringify(t.promocodes.applied))}catch{}qr("promocodeApplied",{promocode:s})},ADD_PAYMENT(t,e){Array.isArray(t.payments.history)||(t.payments.history=[]);const s={id:e.id||`payment_${Date.now()}`,amount:e.amount||0,currency:e.currency||"UZS",status:e.status||"pending",plan:e.plan||"free",method:e.method||"unknown",timestamp:e.timestamp||Date.now(),createdAt:new Date().toISOString()};t.payments.history.unshift(s),t.payments.history.length>50&&(t.payments.history=t.payments.history.slice(0,50)),qr("paymentUpdated",{payment:s})},SET_USAGE(t,e){!e||typeof e!="object"||(t.usage.current={messages:Math.max(0,parseInt(e.messages)||0),images:Math.max(0,parseInt(e.images)||0),lastUpdated:new Date().toISOString(),resetDate:e.resetDate||null},t.system.lastUpdate=Date.now(),qr("usageUpdated",{usage:t.usage.current}))},INCREMENT_USAGE(t,{messages:e=0,images:s=0}){t.usage.current.messages=Math.max(0,(t.usage.current.messages||0)+e),t.usage.current.images=Math.max(0,(t.usage.current.images||0)+s),t.usage.current.lastUpdated=new Date().toISOString()}},B9={async initialize({commit:t,dispatch:e,state:s}){if(s.system.initialized)return{success:!0,cached:!0};try{t("SET_INITIALIZED",!0);const r=localStorage.getItem("currentUser");if(r)try{const i=JSON.parse(r);i&&i.email&&t("SET_USER",i)}catch{}const n=localStorage.getItem("userStatus");return n&&["free","start","pro","premium"].includes(n)&&t("SET_USER_STATUS",n),{success:!0}}catch(r){return console.error(" [store/user] Initialization error:",r),t("SET_ERROR",{message:"Initialization failed",context:"initialize"}),{success:!1,error:r.message}}},async fetchStatusFromServer({commit:t,state:e}){var s,r,n,i;try{t("SET_LOADING",{type:"status",loading:!0});const o=((s=e.currentUser)==null?void 0:s.firebaseId)||((r=e.currentUser)==null?void 0:r.firebaseUserId)||((n=e.currentUser)==null?void 0:n._id)||((i=e.currentUser)==null?void 0:i.uid)||localStorage.getItem("userId")||localStorage.getItem("firebaseUserId");if(!o)return console.error(" [store/user] No user ID available"),{success:!1,error:"No user ID"};let l=null;try{const{auth:k}=await yt(async()=>{const{auth:L}=await Promise.resolve().then(()=>U9);return{auth:L}},void 0);k.currentUser&&(l=await k.currentUser.getIdToken())}catch{l=localStorage.getItem("token")||localStorage.getItem("authToken")}if(!l)return console.error(" [store/user] No auth token available"),{success:!1,error:"No auth token"};const u=await fetch(`https://api.aced.live/api/users/${o}`,{method:"GET",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Server returned ${u.status}`);const d=await u.json(),f=d.user||d.data||d,p=f.subscriptionPlan||f.userStatus||"free",g=f.subscriptionExpiryDate||f.subscriptionExpiry,b=f.subscriptionDuration;return t("SET_USER_STATUS",p),t("UPDATE_SUBSCRIPTION",{plan:p,status:p!=="free"?"active":"inactive",expiryDate:g||null,duration:b||null,lastSync:new Date().toISOString(),serverFetch:!0}),localStorage.setItem("userStatus",p),localStorage.setItem("subscriptionPlan",p),localStorage.setItem("userPlan",p),localStorage.setItem("plan",p),g&&localStorage.setItem("subscriptionExpiry",g),localStorage.setItem("lastServerSync",Date.now().toString()),{success:!0,status:p,expiryDate:g,duration:b,serverFetch:!0}}catch(o){return console.error(" [store/user] fetchStatusFromServer error:",o),{success:!1,error:o.message}}finally{t("SET_LOADING",{type:"status",loading:!1})}},async loadUserStatus({dispatch:t,commit:e,state:s}){const r=await t("fetchStatusFromServer");if(!r.success){console.warn(" [store/user] Server fetch failed, using local data");const n=localStorage.getItem("userStatus");return n&&["free","start","pro","premium"].includes(n)?(e("SET_USER_STATUS",n),{success:!0,status:n,source:"localStorage"}):(e("SET_USER_STATUS","free"),{success:!0,status:"free",defaulted:!0})}return r},async updateUserStatus({commit:t,state:e,dispatch:s},r){if(!r||!["free","start","pro","premium"].includes(r))return{success:!1,error:"Invalid status"};const i=e.userStatus;if(i===r)return{success:!0,message:"Status unchanged",noChange:!0};try{t("SET_USER_STATUS",r),t("FORCE_UPDATE");const o=ed(e);if(o){const{updateUserStatusWithPersistence:l}=await yt(async()=>{const{updateUserStatusWithPersistence:c}=await Promise.resolve().then(()=>Vp);return{updateUserStatusWithPersistence:c}},void 0);await l(o,r,"manual")}return{success:!0,oldStatus:i,newStatus:r,timestamp:Date.now()}}catch(o){return console.error(" [store/user] updateUserStatus error:",o),t("SET_ERROR",{message:o.message,context:"updateUserStatus"}),{success:!1,error:o.message}}},async updateSubscription({commit:t,dispatch:e,state:s},{plan:r,source:n="payment",details:i={}}){try{const l=["free","start","pro","premium"].includes(r)?r:"free",c=s.userStatus;let u=null;if(l!=="free"){const p=new Date,g=n==="payment"?365:30;u=new Date(p.getTime()+g*24*60*60*1e3).toISOString()}const d={plan:l,status:l!=="free"?"active":"inactive",startDate:new Date().toISOString(),expiryDate:u,source:n,details:i,serverFetch:!1};t("SET_USER_STATUS",l),t("UPDATE_SUBSCRIPTION",d),t("FORCE_UPDATE");const f=ed(s);if(f){const{saveSubscriptionToServer:p}=await yt(async()=>{const{saveSubscriptionToServer:g}=await Promise.resolve().then(()=>Vp);return{saveSubscriptionToServer:g}},void 0);await p(f,d)}return{success:!0,subscriptionData:d,oldStatus:c,newStatus:l}}catch(o){return console.error(" [store/user] updateSubscription error:",o),t("SET_ERROR",{message:o.message,context:"updateSubscription"}),{success:!1,error:o.message}}},async applyPromocode({commit:t,state:e,dispatch:s},{promoCode:r,plan:n}){try{if(!r||r.trim().length<3)return{success:!1,error:"Invalid promocode"};const i=r.trim().toUpperCase(),o=e.userStatus,{applyPromocode:l}=await yt(async()=>{const{applyPromocode:u}=await Promise.resolve().then(()=>Tw);return{applyPromocode:u}},void 0);if((await l(i)).success){const u=p.plan||n||"pro",d=p.expiryDate;t("SET_USER_STATUS",u),t("UPDATE_SUBSCRIPTION",{plan:u,status:"active",expiryDate:d,source:"promocode",lastSync:new Date().toISOString()}),t("ADD_PROMOCODE",{code:i,plan:u,source:"api"}),t("FORCE_UPDATE"),localStorage.setItem("userStatus",u),localStorage.setItem("subscriptionPlan",u),localStorage.setItem("userPlan",u),d&&localStorage.setItem("subscriptionExpiry",d),qr("userStatusChanged",{oldStatus:o,newStatus:u,source:"promocode"}),s("fetchStatusFromServer");const{applyPromocode:f}=await yt(async()=>{const{applyPromocode:g}=await Promise.resolve().then(()=>Vp);return{applyPromocode:g}},void 0),p=await f(ed(e),i);return p.success&&(t("ADD_PROMOCODE",{code:i,plan:p.plan,source:"api"}),p.plan&&p.plan!==o&&(t("SET_USER_STATUS",p.plan),t("FORCE_UPDATE"))),p}}catch(i){return console.error(" [store/user] applyPromocode error:",i),{success:!1,error:i.message}}},async saveUser({commit:t,state:e},{userData:s,token:r}){try{const{saveUser:n}=await yt(async()=>{const{saveUser:o}=await Promise.resolve().then(()=>eh);return{saveUser:o}},void 0),i=await n(s);return i.success&&i.user?(t("SET_USER",i.user),{success:!0,user:i.user}):{success:!1,error:"Failed to save user"}}catch(n){return console.error(" [store/user] saveUser error:",n),{success:!1,error:n.message}}},async logout({commit:t}){return t("CLEAR_USER"),{success:!0}},async validatePromocode({state:t},e){try{if(!e||e.trim().length<3)return{valid:!1,error:"Promocode too short"};const{validatePromocode:s}=await yt(async()=>{const{validatePromocode:n}=await Promise.resolve().then(()=>Tw);return{validatePromocode:n}},void 0);return await s(e.trim().toUpperCase())}catch(s){return console.error(" [store/user] validatePromocode error:",s),{valid:!1,error:s.message}}},async saveUser({commit:t,dispatch:e},{userData:s,token:r}){var n;try{t("SET_LOADING",{type:"saving",loading:!0});const{saveUser:i}=await yt(async()=>{const{saveUser:u}=await Promise.resolve().then(()=>eh);return{saveUser:u}},void 0),o={firebaseUserId:s.uid||s.firebaseId,email:s.email,name:s.displayName||s.name||((n=s.email)==null?void 0:n.split("@")[0])||"User",displayName:s.displayName||s.name||"",emailVerified:!!s.emailVerified,photoURL:s.photoURL||null,subscriptionPlan:s.subscriptionPlan||"free"},c=await(await fetch("https://api.aced.live/api/users/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,name:o.name,subscriptionPlan:o.subscriptionPlan})})).json();if(c.success&&c.user)return t("SET_USER",c.user),t("SET_USER_STATUS",c.user.subscriptionPlan||"free"),localStorage.setItem("userId",c.user.firebaseId),localStorage.setItem("firebaseUserId",c.user.firebaseId),{success:!0,user:c.user};throw new Error(c.error||"Failed to save user")}catch(i){return t("SET_ERROR",{message:i.message,context:"saveUser"}),{success:!1,error:i.message}}finally{t("SET_LOADING",{type:"saving",loading:!1})}},async forceUpdate({commit:t}){return t("FORCE_UPDATE"),{success:!0}},async logout({commit:t}){return t("CLEAR_USER"),{success:!0}}},q9={isAuthenticated:t=>!!(t.currentUser&&(t.currentUser.firebaseId||t.currentUser._id||t.currentUser.uid)),getUser:t=>t.currentUser,getUserId:t=>ed(t),userName:t=>{var e,s,r,n;return((e=t.currentUser)==null?void 0:e.name)||((s=t.currentUser)==null?void 0:s.displayName)||((n=(r=t.currentUser)==null?void 0:r.email)==null?void 0:n.split("@")[0])||"User"},userEmail:t=>{var e;return((e=t.currentUser)==null?void 0:e.email)||""},userStatus:t=>{var e;return t.userStatus&&t.userStatus!=="free"?t.userStatus:(e=t.subscription)!=null&&e.plan&&t.subscription.plan!=="free"?t.subscription.plan:t.userStatus||"free"},subscription:t=>t.subscription,subscriptionDetails:t=>{var e,s,r,n,i,o,l;return{plan:((e=t.subscription)==null?void 0:e.plan)||t.userStatus||"free",status:((s=t.subscription)==null?void 0:s.status)||"inactive",expiryDate:((r=t.subscription)==null?void 0:r.expiryDate)||null,source:((n=t.subscription)==null?void 0:n.source)||null,duration:((i=t.subscription)==null?void 0:i.duration)||null,serverFetch:((o=t.subscription)==null?void 0:o.serverFetch)||!1,lastSync:((l=t.subscription)==null?void 0:l.lastSync)||null}},isPremiumUser:(t,e)=>{const s=e.userStatus;return["premium","start","pro"].includes(s)},isStartUser:(t,e)=>{const s=e.userStatus;return["start","pro","premium"].includes(s)},isProUser:(t,e)=>{const s=e.userStatus;return["pro","premium"].includes(s)},isFreeUser:(t,e)=>e.userStatus==="free",hasActiveSubscription:(t,e)=>e.userStatus!=="free",features:t=>t.features,hasFeatureAccess:t=>e=>{var s;return!!((s=t.features)!=null&&s[e])},currentUsage:t=>{var e;return((e=t.usage)==null?void 0:e.current)||{messages:0,images:0}},usageLimits:(t,e)=>{var r,n;const s=e.userStatus;return((n=(r=t.usage)==null?void 0:r.limits)==null?void 0:n[s])||{messages:50,images:5}},appliedPromocodes:t=>{var e;return((e=t.promocodes)==null?void 0:e.applied)||[]},paymentHistory:t=>{var e;return((e=t.payments)==null?void 0:e.history)||[]},isInitialized:t=>{var e;return!!((e=t.system)!=null&&e.initialized)},isLoading:t=>e=>{var s,r;return!!((r=(s=t.system)==null?void 0:s.loading)!=null&&r[e])},isAnyLoading:t=>{var s;const e=((s=t.system)==null?void 0:s.loading)||{};return Object.values(e).some(Boolean)},lastServerSync:t=>{var e;return((e=t.system)==null?void 0:e.lastServerSync)||null},forceUpdateCounter:t=>{var e;return((e=t.system)==null?void 0:e.forceUpdateCounter)||0},lastError:t=>{var e,s;return((s=(e=t.system)==null?void 0:e.errors)==null?void 0:s.lastError)||null}},j9={namespaced:!0,state:F9,mutations:V9,actions:B9,getters:q9};function PI(t,e){return function(){return t.apply(e,arguments)}}const{toString:H9}=Object.prototype,{getPrototypeOf:Ky}=Object,{iterator:af,toStringTag:xI}=Symbol,lf=(t=>e=>{const s=H9.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>lf(e)===t),cf=t=>e=>typeof e===t,{isArray:Wa}=Array,mc=cf("undefined");function W9(t){return t!==null&&!mc(t)&&t.constructor!==null&&!mc(t.constructor)&&er(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const LI=Ur("ArrayBuffer");function z9(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&LI(t.buffer),e}const G9=cf("string"),er=cf("function"),RI=cf("number"),uf=t=>t!==null&&typeof t=="object",K9=t=>t===!0||t===!1,td=t=>{if(lf(t)!=="object")return!1;const e=Ky(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(xI in t)&&!(af in t)},Y9=Ur("Date"),Q9=Ur("File"),X9=Ur("Blob"),J9=Ur("FileList"),Z9=t=>uf(t)&&er(t.pipe),eV=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||er(t.append)&&((e=lf(t))==="formdata"||e==="object"&&er(t.toString)&&t.toString()==="[object FormData]"))},tV=Ur("URLSearchParams"),[sV,rV,nV,iV]=["ReadableStream","Request","Response","Headers"].map(Ur),oV=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wc(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),Wa(t))for(r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else{const i=s?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(r=0;r<o;r++)l=i[r],e.call(null,t[l],l,t)}}function NI(t,e){e=e.toLowerCase();const s=Object.keys(t);let r=s.length,n;for(;r-- >0;)if(n=s[r],e===n.toLowerCase())return n;return null}const Ji=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,OI=t=>!mc(t)&&t!==Ji;function Hm(){const{caseless:t}=OI(this)&&this||{},e={},s=(r,n)=>{const i=t&&NI(e,n)||n;td(e[i])&&td(r)?e[i]=Hm(e[i],r):td(r)?e[i]=Hm({},r):Wa(r)?e[i]=r.slice():e[i]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&Wc(arguments[r],s);return e}const aV=(t,e,s,{allOwnKeys:r}={})=>(Wc(e,(n,i)=>{s&&er(n)?t[i]=PI(n,s):t[i]=n},{allOwnKeys:r}),t),lV=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),cV=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},uV=(t,e,s,r)=>{let n,i,o;const l={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=s!==!1&&Ky(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},dV=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},hV=t=>{if(!t)return null;if(Wa(t))return t;let e=t.length;if(!RI(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},fV=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ky(Uint8Array)),pV=(t,e)=>{const r=(t&&t[af]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},mV=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},gV=Ur("HTMLFormElement"),yV=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,n){return r.toUpperCase()+n}),Ob=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),vV=Ur("RegExp"),MI=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};Wc(s,(n,i)=>{let o;(o=e(n,i,t))!==!1&&(r[i]=o||n)}),Object.defineProperties(t,r)},_V=t=>{MI(t,(e,s)=>{if(er(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(er(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},bV=(t,e)=>{const s={},r=n=>{n.forEach(i=>{s[i]=!0})};return Wa(t)?r(t):r(String(t).split(e)),s},wV=()=>{},SV=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function EV(t){return!!(t&&er(t.append)&&t[xI]==="FormData"&&t[af])}const TV=t=>{const e=new Array(10),s=(r,n)=>{if(uf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[n]=r;const i=Wa(r)?[]:{};return Wc(r,(o,l)=>{const c=s(o,n+1);!mc(c)&&(i[l]=c)}),e[n]=void 0,i}}return r};return s(t,0)},kV=Ur("AsyncFunction"),IV=t=>t&&(uf(t)||er(t))&&er(t.then)&&er(t.catch),DI=((t,e)=>t?setImmediate:e?((s,r)=>(Ji.addEventListener("message",({source:n,data:i})=>{n===Ji&&i===s&&r.length&&r.shift()()},!1),n=>{r.push(n),Ji.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",er(Ji.postMessage)),CV=typeof queueMicrotask<"u"?queueMicrotask.bind(Ji):typeof process<"u"&&process.nextTick||DI,AV=t=>t!=null&&er(t[af]),X={isArray:Wa,isArrayBuffer:LI,isBuffer:W9,isFormData:eV,isArrayBufferView:z9,isString:G9,isNumber:RI,isBoolean:K9,isObject:uf,isPlainObject:td,isReadableStream:sV,isRequest:rV,isResponse:nV,isHeaders:iV,isUndefined:mc,isDate:Y9,isFile:Q9,isBlob:X9,isRegExp:vV,isFunction:er,isStream:Z9,isURLSearchParams:tV,isTypedArray:fV,isFileList:J9,forEach:Wc,merge:Hm,extend:aV,trim:oV,stripBOM:lV,inherits:cV,toFlatObject:uV,kindOf:lf,kindOfTest:Ur,endsWith:dV,toArray:hV,forEachEntry:pV,matchAll:mV,isHTMLForm:gV,hasOwnProperty:Ob,hasOwnProp:Ob,reduceDescriptors:MI,freezeMethods:_V,toObjectSet:bV,toCamelCase:yV,noop:wV,toFiniteNumber:SV,findKey:NI,global:Ji,isContextDefined:OI,isSpecCompliantForm:EV,toJSONObject:TV,isAsyncFn:kV,isThenable:IV,setImmediate:DI,asap:CV,isIterable:AV};function Ge(t,e,s,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}X.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const $I=Ge.prototype,UI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{UI[t]={value:t}});Object.defineProperties(Ge,UI);Object.defineProperty($I,"isAxiosError",{value:!0});Ge.from=(t,e,s,r,n,i)=>{const o=Object.create($I);return X.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ge.call(o,t.message,e,s,r,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const PV=null;function Wm(t){return X.isPlainObject(t)||X.isArray(t)}function FI(t){return X.endsWith(t,"[]")?t.slice(0,-2):t}function Mb(t,e,s){return t?t.concat(e).map(function(n,i){return n=FI(n),!s&&i?"["+n+"]":n}).join(s?".":""):e}function xV(t){return X.isArray(t)&&!t.some(Wm)}const LV=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function df(t,e,s){if(!X.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=X.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,L){return!X.isUndefined(L[k])});const r=s.metaTokens,n=s.visitor||d,i=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(n))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(X.isDate(b))return b.toISOString();if(!c&&X.isBlob(b))throw new Ge("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(b)||X.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,k,L){let V=b;if(b&&!L&&typeof b=="object"){if(X.endsWith(k,"{}"))k=r?k:k.slice(0,-2),b=JSON.stringify(b);else if(X.isArray(b)&&xV(b)||(X.isFileList(b)||X.endsWith(k,"[]"))&&(V=X.toArray(b)))return k=FI(k),V.forEach(function(E,N){!(X.isUndefined(E)||E===null)&&e.append(o===!0?Mb([k],N,i):o===null?k:k+"[]",u(E))}),!1}return Wm(b)?!0:(e.append(Mb(L,k,i),u(b)),!1)}const f=[],p=Object.assign(LV,{defaultVisitor:d,convertValue:u,isVisitable:Wm});function g(b,k){if(!X.isUndefined(b)){if(f.indexOf(b)!==-1)throw Error("Circular reference detected in "+k.join("."));f.push(b),X.forEach(b,function(V,R){(!(X.isUndefined(V)||V===null)&&n.call(e,V,X.isString(R)?R.trim():R,k,p))===!0&&g(V,k?k.concat(R):[R])}),f.pop()}}if(!X.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Db(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Yy(t,e){this._pairs=[],t&&df(t,this,e)}const VI=Yy.prototype;VI.append=function(e,s){this._pairs.push([e,s])};VI.toString=function(e){const s=e?function(r){return e.call(this,r,Db)}:Db;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function RV(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function BI(t,e,s){if(!e)return t;const r=s&&s.encode||RV;X.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let i;if(n?i=n(e,s):i=X.isURLSearchParams(e)?e.toString():new Yy(e,s).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class $b{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(r){r!==null&&e(r)})}}const qI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NV=typeof URLSearchParams<"u"?URLSearchParams:Yy,OV=typeof FormData<"u"?FormData:null,MV=typeof Blob<"u"?Blob:null,DV={isBrowser:!0,classes:{URLSearchParams:NV,FormData:OV,Blob:MV},protocols:["http","https","file","blob","url","data"]},Qy=typeof window<"u"&&typeof document<"u",zm=typeof navigator=="object"&&navigator||void 0,$V=Qy&&(!zm||["ReactNative","NativeScript","NS"].indexOf(zm.product)<0),UV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FV=Qy&&window.location.href||"http://localhost",VV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qy,hasStandardBrowserEnv:$V,hasStandardBrowserWebWorkerEnv:UV,navigator:zm,origin:FV},Symbol.toStringTag,{value:"Module"})),Ls={...VV,...DV};function BV(t,e){return df(t,new Ls.classes.URLSearchParams,Object.assign({visitor:function(s,r,n,i){return Ls.isNode&&X.isBuffer(s)?(this.append(r,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function qV(t){return X.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function jV(t){const e={},s=Object.keys(t);let r;const n=s.length;let i;for(r=0;r<n;r++)i=s[r],e[i]=t[i];return e}function jI(t){function e(s,r,n,i){let o=s[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=s.length;return o=!o&&X.isArray(n)?n.length:o,c?(X.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!l):((!n[o]||!X.isObject(n[o]))&&(n[o]=[]),e(s,r,n[o],i)&&X.isArray(n[o])&&(n[o]=jV(n[o])),!l)}if(X.isFormData(t)&&X.isFunction(t.entries)){const s={};return X.forEachEntry(t,(r,n)=>{e(qV(r),n,s,0)}),s}return null}function HV(t,e,s){if(X.isString(t))try{return(e||JSON.parse)(t),X.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const zc={transitional:qI,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",n=r.indexOf("application/json")>-1,i=X.isObject(e);if(i&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return n?JSON.stringify(jI(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return BV(e,this.formSerializer).toString();if((l=X.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return df(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||n?(s.setContentType("application/json",!1),HV(e)):e}],transformResponse:[function(e){const s=this.transitional||zc.transitional,r=s&&s.forcedJSONParsing,n=this.responseType==="json";if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(r&&!this.responseType||n)){const o=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?Ge.from(l,Ge.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ls.classes.FormData,Blob:Ls.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],t=>{zc.headers[t]={}});const WV=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zV=t=>{const e={};let s,r,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),s=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!s||e[s]&&WV[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},Ub=Symbol("internals");function fl(t){return t&&String(t).trim().toLowerCase()}function sd(t){return t===!1||t==null?t:X.isArray(t)?t.map(sd):String(t)}function GV(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const KV=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rp(t,e,s,r,n){if(X.isFunction(r))return r.call(this,e,s);if(n&&(e=s),!!X.isString(e)){if(X.isString(r))return e.indexOf(r)!==-1;if(X.isRegExp(r))return r.test(e)}}function YV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function QV(t,e){const s=X.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(n,i,o){return this[r].call(this,e,n,i,o)},configurable:!0})})}let tr=class{constructor(e){e&&this.set(e)}set(e,s,r){const n=this;function i(l,c,u){const d=fl(c);if(!d)throw new Error("header name must be a non-empty string");const f=X.findKey(n,d);(!f||n[f]===void 0||u===!0||u===void 0&&n[f]!==!1)&&(n[f||c]=sd(l))}const o=(l,c)=>X.forEach(l,(u,d)=>i(u,d,c));if(X.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(X.isString(e)&&(e=e.trim())&&!KV(e))o(zV(e),s);else if(X.isObject(e)&&X.isIterable(e)){let l={},c,u;for(const d of e){if(!X.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?X.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,s)}else e!=null&&i(s,e,r);return this}get(e,s){if(e=fl(e),e){const r=X.findKey(this,e);if(r){const n=this[r];if(!s)return n;if(s===!0)return GV(n);if(X.isFunction(s))return s.call(this,n,r);if(X.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=fl(e),e){const r=X.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||Rp(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let n=!1;function i(o){if(o=fl(o),o){const l=X.findKey(r,o);l&&(!s||Rp(r,r[l],l,s))&&(delete r[l],n=!0)}}return X.isArray(e)?e.forEach(i):i(e),n}clear(e){const s=Object.keys(this);let r=s.length,n=!1;for(;r--;){const i=s[r];(!e||Rp(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const s=this,r={};return X.forEach(this,(n,i)=>{const o=X.findKey(r,i);if(o){s[o]=sd(n),delete s[i];return}const l=e?YV(i):String(i).trim();l!==i&&delete s[i],s[l]=sd(n),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return X.forEach(this,(r,n)=>{r!=null&&r!==!1&&(s[n]=e&&X.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(n=>r.set(n)),r}static accessor(e){const r=(this[Ub]=this[Ub]={accessors:{}}).accessors,n=this.prototype;function i(o){const l=fl(o);r[l]||(QV(n,o),r[l]=!0)}return X.isArray(e)?e.forEach(i):i(e),this}};tr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(tr.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});X.freezeMethods(tr);function Np(t,e){const s=this||zc,r=e||s,n=tr.from(r.headers);let i=r.data;return X.forEach(t,function(l){i=l.call(s,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function HI(t){return!!(t&&t.__CANCEL__)}function za(t,e,s){Ge.call(this,t??"canceled",Ge.ERR_CANCELED,e,s),this.name="CanceledError"}X.inherits(za,Ge,{__CANCEL__:!0});function WI(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new Ge("Request failed with status code "+s.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function XV(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function JV(t,e){t=t||10;const s=new Array(t),r=new Array(t);let n=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[i];o||(o=u),s[n]=c,r[n]=u;let f=i,p=0;for(;f!==n;)p+=s[f++],f=f%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),u-o<e)return;const g=d&&u-d;return g?Math.round(p*1e3/g):void 0}}function ZV(t,e){let s=0,r=1e3/e,n,i;const o=(u,d=Date.now())=>{s=d,n=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-s;f>=r?o(u,d):(n=u,i||(i=setTimeout(()=>{i=null,o(n)},r-f)))},()=>n&&o(n)]}const Yd=(t,e,s=3)=>{let r=0;const n=JV(50,250);return ZV(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,u=n(c),d=o<=l;r=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},s)},Fb=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},Vb=t=>(...e)=>X.asap(()=>t(...e)),e7=Ls.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ls.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ls.origin),Ls.navigator&&/(msie|trident)/i.test(Ls.navigator.userAgent)):()=>!0,t7=Ls.hasStandardBrowserEnv?{write(t,e,s,r,n,i){const o=[t+"="+encodeURIComponent(e)];X.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),X.isString(r)&&o.push("path="+r),X.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function s7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function r7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function zI(t,e,s){let r=!s7(e);return t&&(r||s==!1)?r7(t,e):e}const Bb=t=>t instanceof tr?{...t}:t;function wo(t,e){e=e||{};const s={};function r(u,d,f,p){return X.isPlainObject(u)&&X.isPlainObject(d)?X.merge.call({caseless:p},u,d):X.isPlainObject(d)?X.merge({},d):X.isArray(d)?d.slice():d}function n(u,d,f,p){if(X.isUndefined(d)){if(!X.isUndefined(u))return r(void 0,u,f,p)}else return r(u,d,f,p)}function i(u,d){if(!X.isUndefined(d))return r(void 0,d)}function o(u,d){if(X.isUndefined(d)){if(!X.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,f){if(f in e)return r(u,d);if(f in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,f)=>n(Bb(u),Bb(d),f,!0)};return X.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=c[d]||n,p=f(t[d],e[d],d);X.isUndefined(p)&&f!==l||(s[d]=p)}),s}const GI=t=>{const e=wo({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:l}=e;e.headers=o=tr.from(o),e.url=BI(zI(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(X.isFormData(s)){if(Ls.hasStandardBrowserEnv||Ls.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Ls.hasStandardBrowserEnv&&(r&&X.isFunction(r)&&(r=r(e)),r||r!==!1&&e7(e.url))){const u=n&&i&&t7.read(i);u&&o.set(n,u)}return e},n7=typeof XMLHttpRequest<"u",i7=n7&&function(t){return new Promise(function(s,r){const n=GI(t);let i=n.data;const o=tr.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=n,d,f,p,g,b;function k(){g&&g(),b&&b(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let L=new XMLHttpRequest;L.open(n.method.toUpperCase(),n.url,!0),L.timeout=n.timeout;function V(){if(!L)return;const E=tr.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:E,config:t,request:L};WI(function(C){s(C),k()},function(C){r(C),k()},D),L=null}"onloadend"in L?L.onloadend=V:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(V)},L.onabort=function(){L&&(r(new Ge("Request aborted",Ge.ECONNABORTED,t,L)),L=null)},L.onerror=function(){r(new Ge("Network Error",Ge.ERR_NETWORK,t,L)),L=null},L.ontimeout=function(){let N=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const D=n.transitional||qI;n.timeoutErrorMessage&&(N=n.timeoutErrorMessage),r(new Ge(N,D.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,t,L)),L=null},i===void 0&&o.setContentType(null),"setRequestHeader"in L&&X.forEach(o.toJSON(),function(N,D){L.setRequestHeader(D,N)}),X.isUndefined(n.withCredentials)||(L.withCredentials=!!n.withCredentials),l&&l!=="json"&&(L.responseType=n.responseType),u&&([p,b]=Yd(u,!0),L.addEventListener("progress",p)),c&&L.upload&&([f,g]=Yd(c),L.upload.addEventListener("progress",f),L.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(d=E=>{L&&(r(!E||E.type?new za(null,t,L):E),L.abort(),L=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const R=XV(n.url);if(R&&Ls.protocols.indexOf(R)===-1){r(new Ge("Unsupported protocol "+R+":",Ge.ERR_BAD_REQUEST,t));return}L.send(i||null)})},o7=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,n;const i=function(u){if(!n){n=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Ge?d:new za(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new Ge(`timeout ${e} of ms exceeded`,Ge.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>X.asap(l),c}},a7=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,n;for(;r<s;)n=r+e,yield t.slice(r,n),r=n},l7=async function*(t,e){for await(const s of c7(t))yield*a7(s,e)},c7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},qb=(t,e,s,r)=>{const n=l7(t,e);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await n.next();if(u){l(),c.close();return}let f=d.byteLength;if(s){let p=i+=f;s(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},hf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",KI=hf&&typeof ReadableStream=="function",u7=hf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),YI=(t,...e)=>{try{return!!t(...e)}catch{return!1}},d7=KI&&YI(()=>{let t=!1;const e=new Request(Ls.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),jb=64*1024,Gm=KI&&YI(()=>X.isReadableStream(new Response("").body)),Qd={stream:Gm&&(t=>t.body)};hf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Qd[e]&&(Qd[e]=X.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new Ge(`Response type '${e}' is not supported`,Ge.ERR_NOT_SUPPORT,r)})})})(new Response);const h7=async t=>{if(t==null)return 0;if(X.isBlob(t))return t.size;if(X.isSpecCompliantForm(t))return(await new Request(Ls.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(X.isArrayBufferView(t)||X.isArrayBuffer(t))return t.byteLength;if(X.isURLSearchParams(t)&&(t=t+""),X.isString(t))return(await u7(t)).byteLength},f7=async(t,e)=>{const s=X.toFiniteNumber(t.getContentLength());return s??h7(e)},p7=hf&&(async t=>{let{url:e,method:s,data:r,signal:n,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:p}=GI(t);u=u?(u+"").toLowerCase():"text";let g=o7([n,i&&i.toAbortSignal()],o),b;const k=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let L;try{if(c&&d7&&s!=="get"&&s!=="head"&&(L=await f7(d,r))!==0){let D=new Request(e,{method:"POST",body:r,duplex:"half"}),U;if(X.isFormData(r)&&(U=D.headers.get("content-type"))&&d.setContentType(U),D.body){const[C,w]=Fb(L,Yd(Vb(c)));r=qb(D.body,jb,C,w)}}X.isString(f)||(f=f?"include":"omit");const V="credentials"in Request.prototype;b=new Request(e,{...p,signal:g,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:V?f:void 0});let R=await fetch(b);const E=Gm&&(u==="stream"||u==="response");if(Gm&&(l||E&&k)){const D={};["status","statusText","headers"].forEach(_=>{D[_]=R[_]});const U=X.toFiniteNumber(R.headers.get("content-length")),[C,w]=l&&Fb(U,Yd(Vb(l),!0))||[];R=new Response(qb(R.body,jb,C,()=>{w&&w(),k&&k()}),D)}u=u||"text";let N=await Qd[X.findKey(Qd,u)||"text"](R,t);return!E&&k&&k(),await new Promise((D,U)=>{WI(D,U,{data:N,headers:tr.from(R.headers),status:R.status,statusText:R.statusText,config:t,request:b})})}catch(V){throw k&&k(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,t,b),{cause:V.cause||V}):Ge.from(V,V&&V.code,t,b)}}),Km={http:PV,xhr:i7,fetch:p7};X.forEach(Km,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Hb=t=>`- ${t}`,m7=t=>X.isFunction(t)||t===null||t===!1,QI={getAdapter:t=>{t=X.isArray(t)?t:[t];const{length:e}=t;let s,r;const n={};for(let i=0;i<e;i++){s=t[i];let o;if(r=s,!m7(s)&&(r=Km[(o=String(s)).toLowerCase()],r===void 0))throw new Ge(`Unknown adapter '${o}'`);if(r)break;n[o||"#"+i]=r}if(!r){const i=Object.entries(n).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(Hb).join(`
`):" "+Hb(i[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Km};function Op(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new za(null,t)}function Wb(t){return Op(t),t.headers=tr.from(t.headers),t.data=Np.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),QI.getAdapter(t.adapter||zc.adapter)(t).then(function(r){return Op(t),r.data=Np.call(t,t.transformResponse,r),r.headers=tr.from(r.headers),r},function(r){return HI(r)||(Op(t),r&&r.response&&(r.response.data=Np.call(t,t.transformResponse,r.response),r.response.headers=tr.from(r.response.headers))),Promise.reject(r)})}const XI="1.9.0",ff={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ff[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const zb={};ff.transitional=function(e,s,r){function n(i,o){return"[Axios v"+XI+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(e===!1)throw new Ge(n(o," has been removed"+(s?" in "+s:"")),Ge.ERR_DEPRECATED);return s&&!zb[o]&&(zb[o]=!0,console.warn(n(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,l):!0}};ff.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function g7(t,e,s){if(typeof t!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new Ge("option "+i+" must be "+c,Ge.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ge("Unknown option "+i,Ge.ERR_BAD_OPTION)}}const rd={assertOptions:g7,validators:ff},Fr=rd.validators;let co=class{constructor(e){this.defaults=e||{},this.interceptors={request:new $b,response:new $b}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=wo(this.defaults,s);const{transitional:r,paramsSerializer:n,headers:i}=s;r!==void 0&&rd.assertOptions(r,{silentJSONParsing:Fr.transitional(Fr.boolean),forcedJSONParsing:Fr.transitional(Fr.boolean),clarifyTimeoutError:Fr.transitional(Fr.boolean)},!1),n!=null&&(X.isFunction(n)?s.paramsSerializer={serialize:n}:rd.assertOptions(n,{encode:Fr.function,serialize:Fr.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),rd.assertOptions(s,{baseUrl:Fr.spelling("baseURL"),withXsrfToken:Fr.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&X.merge(i.common,i[s.method]);i&&X.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),s.headers=tr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(s)===!1||(c=c&&k.synchronous,l.unshift(k.fulfilled,k.rejected))});const u=[];this.interceptors.response.forEach(function(k){u.push(k.fulfilled,k.rejected)});let d,f=0,p;if(!c){const b=[Wb.bind(this),void 0];for(b.unshift.apply(b,l),b.push.apply(b,u),p=b.length,d=Promise.resolve(s);f<p;)d=d.then(b[f++],b[f++]);return d}p=l.length;let g=s;for(f=0;f<p;){const b=l[f++],k=l[f++];try{g=b(g)}catch(L){k.call(this,L);break}}try{d=Wb.call(this,g)}catch(b){return Promise.reject(b)}for(f=0,p=u.length;f<p;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=wo(this.defaults,e);const s=zI(e.baseURL,e.url,e.allowAbsoluteUrls);return BI(s,e.params,e.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(e){co.prototype[e]=function(s,r){return this.request(wo(r||{},{method:e,url:s,data:(r||{}).data}))}});X.forEach(["post","put","patch"],function(e){function s(r){return function(i,o,l){return this.request(wo(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}co.prototype[e]=s(),co.prototype[e+"Form"]=s(!0)});let y7=class JI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,l){r.reason||(r.reason=new za(i,o,l),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new JI(function(n){e=n}),cancel:e}}};function v7(t){return function(s){return t.apply(null,s)}}function _7(t){return X.isObject(t)&&t.isAxiosError===!0}const Ym={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ym).forEach(([t,e])=>{Ym[e]=t});function ZI(t){const e=new co(t),s=PI(co.prototype.request,e);return X.extend(s,co.prototype,e,{allOwnKeys:!0}),X.extend(s,e,null,{allOwnKeys:!0}),s.create=function(n){return ZI(wo(t,n))},s}const ht=ZI(zc);ht.Axios=co;ht.CanceledError=za;ht.CancelToken=y7;ht.isCancel=HI;ht.VERSION=XI;ht.toFormData=df;ht.AxiosError=Ge;ht.Cancel=ht.CanceledError;ht.all=function(e){return Promise.all(e)};ht.spread=v7;ht.isAxiosError=_7;ht.mergeConfig=wo;ht.AxiosHeaders=tr;ht.formToJSON=t=>jI(X.isHTMLForm(t)?new FormData(t):t);ht.getAdapter=QI.getAdapter;ht.HttpStatusCode=Ym;ht.default=ht;const{Axios:r2e,AxiosError:n2e,CanceledError:i2e,isCancel:o2e,CancelToken:a2e,VERSION:l2e,all:c2e,Cancel:u2e,isAxiosError:d2e,spread:h2e,toFormData:f2e,AxiosHeaders:p2e,HttpStatusCode:m2e,formToJSON:g2e,getAdapter:y2e,mergeConfig:v2e}=ht,Mp={},b7=(Mp==null?void 0:Mp.VITE_API_BASE_URL)||"https://api.aced.live",Jr=KM({modules:{global:XM,platformMode:JM,user:j9},state:{user:null,firebaseUserId:null,token:null,progress:{},diaryLogs:[],authInitialized:!1},mutations:{setUser(t,e){t.user=e},setFirebaseUserId(t,e){t.firebaseUserId=e},setToken(t,e){t.token=e},setProgress(t,e){t.progress=e||{}},setDiaryLogs(t,e){t.diaryLogs=e||[]},setAuthInitialized(t,e){t.authInitialized=e},logout(t){t.user=null,t.firebaseUserId=null,t.token=null,t.progress={},t.diaryLogs=[],t.authInitialized=!0,localStorage.clear()}},actions:{async LoginUser({commit:t},{userData:e,token:s}){try{const n=(await ht.post(`${b7}/users/save`,{token:s,name:e.displayName||e.email||"Unnamed User",subscriptionPlan:"free"})).data;t("setUser",n),t("setFirebaseUserId",n.firebaseId),t("setToken",s),t("setAuthInitialized",!0),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("firebaseUserId",n.firebaseId),localStorage.setItem("token",s)}catch{}},logoutUser({commit:t}){t("logout")},loadUserFromLocalStorage({commit:t}){try{const e=JSON.parse(localStorage.getItem("user")),s=localStorage.getItem("firebaseUserId"),r=localStorage.getItem("token"),n=JSON.parse(localStorage.getItem("progress")||"{}"),i=JSON.parse(localStorage.getItem("diaryLogs")||"[]");e&&t("setUser",e),s&&t("setFirebaseUserId",s),r&&t("setToken",r),t("setProgress",n),t("setDiaryLogs",i),t("setAuthInitialized",!0)}catch{t("setAuthInitialized",!0)}},waitForAuthInit({state:t}){return new Promise(e=>{if(t.authInitialized)return e();const s=setInterval(()=>{t.authInitialized&&(clearInterval(s),e())},50)})},updateProgress({commit:t},e){t("setProgress",e),localStorage.setItem("progress",JSON.stringify(e))},updateDiaryLogs({commit:t},e){t("setDiaryLogs",e),localStorage.setItem("diaryLogs",JSON.stringify(e))}},getters:{isLoggedIn:t=>!!t.user&&!!t.firebaseUserId&&!!t.token,getUser:t=>t.user,getFirebaseUserId:t=>t.firebaseUserId,getToken:t=>t.token,getProgress:t=>t.progress,getDiaryLogs:t=>t.diaryLogs,isAuthInitialized:t=>t.authInitialized}}),Ni=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"}));/*!
  * shared v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Xd=typeof window<"u",Oi=(t,e=!1)=>e?Symbol.for(t):Symbol(t),w7=(t,e,s)=>S7({l:t,k:e,s}),S7=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Wt=t=>typeof t=="number"&&isFinite(t),E7=t=>tC(t)==="[object Date]",Ei=t=>tC(t)==="[object RegExp]",pf=t=>qe(t)&&Object.keys(t).length===0,gs=Object.assign,T7=Object.create,wt=(t=null)=>T7(t);let Gb;const _n=()=>Gb||(Gb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:wt());function Kb(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const k7=Object.prototype.hasOwnProperty;function Ar(t,e){return k7.call(t,e)}const xt=Array.isArray,kt=t=>typeof t=="function",Ee=t=>typeof t=="string",Xe=t=>typeof t=="boolean",ut=t=>t!==null&&typeof t=="object",I7=t=>ut(t)&&kt(t.then)&&kt(t.catch),eC=Object.prototype.toString,tC=t=>eC.call(t),qe=t=>{if(!ut(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},C7=t=>t==null?"":xt(t)||qe(t)&&t.toString===eC?JSON.stringify(t,null,2):String(t);function A7(t,e=""){return t.reduce((s,r,n)=>n===0?s+r:s+e+r,"")}function mf(t){let e=t;return()=>++e}function P7(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Lu=t=>!ut(t)||xt(t);function nd(t,e){if(Lu(t)||Lu(e))throw new Error("Invalid value");const s=[{src:t,des:e}];for(;s.length;){const{src:r,des:n}=s.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(ut(r[i])&&!ut(n[i])&&(n[i]=Array.isArray(r[i])?[]:wt()),Lu(n[i])||Lu(r[i])?n[i]=r[i]:s.push({src:r[i],des:n[i]}))})}}/*!
  * message-compiler v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function x7(t,e,s){return{line:t,column:e,offset:s}}function Jd(t,e,s){return{start:t,end:e}}const L7=/\{([0-9a-zA-Z]+)\}/g;function sC(t,...e){return e.length===1&&R7(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(L7,(s,r)=>e.hasOwnProperty(r)?e[r]:"")}const rC=Object.assign,Yb=t=>typeof t=="string",R7=t=>t!==null&&typeof t=="object";function nC(t,e=""){return t.reduce((s,r,n)=>n===0?s+r:s+e+r,"")}const Xy={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},N7={[Xy.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function O7(t,e,...s){const r=sC(N7[t],...s||[]),n={message:String(r),code:t};return e&&(n.location=e),n}const Me={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},M7={[Me.EXPECTED_TOKEN]:"Expected token: '{0}'",[Me.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Me.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Me.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Me.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Me.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Me.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Me.EMPTY_PLACEHOLDER]:"Empty placeholder",[Me.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Me.INVALID_LINKED_FORMAT]:"Invalid linked format",[Me.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Me.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Me.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Me.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Me.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Me.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Ga(t,e,s={}){const{domain:r,messages:n,args:i}=s,o=sC((n||M7)[t]||"",...i||[]),l=new SyntaxError(String(o));return l.code=t,e&&(l.location=e),l.domain=r,l}function D7(t){throw t}const dn=" ",$7="\r",Us=`
`,U7="\u2028",F7="\u2029";function V7(t){const e=t;let s=0,r=1,n=1,i=0;const o=C=>e[C]===$7&&e[C+1]===Us,l=C=>e[C]===Us,c=C=>e[C]===F7,u=C=>e[C]===U7,d=C=>o(C)||l(C)||c(C)||u(C),f=()=>s,p=()=>r,g=()=>n,b=()=>i,k=C=>o(C)||c(C)||u(C)?Us:e[C],L=()=>k(s),V=()=>k(s+i);function R(){return i=0,d(s)&&(r++,n=0),o(s)&&s++,s++,n++,e[s]}function E(){return o(s+i)&&i++,i++,e[s+i]}function N(){s=0,r=1,n=1,i=0}function D(C=0){i=C}function U(){const C=s+i;for(;C!==s;)R();i=0}return{index:f,line:p,column:g,peekOffset:b,charAt:k,currentChar:L,currentPeek:V,next:R,peek:E,reset:N,resetPeek:D,skipToPeek:U}}const zn=void 0,B7=".",Qb="'",q7="tokenizer";function j7(t,e={}){const s=e.location!==!1,r=V7(t),n=()=>r.index(),i=()=>x7(r.line(),r.column(),r.index()),o=i(),l=n(),c={currentType:14,offset:l,startLoc:o,endLoc:o,lastType:14,lastOffset:l,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>c,{onError:d}=e;function f($,B,q,...re){const le=u();if(B.column+=q,B.offset+=q,d){const ne=s?Jd(le.startLoc,B):null,H=Ga($,ne,{domain:q7,args:re});d(H)}}function p($,B,q){$.endLoc=i(),$.currentType=B;const re={type:B};return s&&(re.loc=Jd($.startLoc,$.endLoc)),q!=null&&(re.value=q),re}const g=$=>p($,14);function b($,B){return $.currentChar()===B?($.next(),B):(f(Me.EXPECTED_TOKEN,i(),0,B),"")}function k($){let B="";for(;$.currentPeek()===dn||$.currentPeek()===Us;)B+=$.currentPeek(),$.peek();return B}function L($){const B=k($);return $.skipToPeek(),B}function V($){if($===zn)return!1;const B=$.charCodeAt(0);return B>=97&&B<=122||B>=65&&B<=90||B===95}function R($){if($===zn)return!1;const B=$.charCodeAt(0);return B>=48&&B<=57}function E($,B){const{currentType:q}=B;if(q!==2)return!1;k($);const re=V($.currentPeek());return $.resetPeek(),re}function N($,B){const{currentType:q}=B;if(q!==2)return!1;k($);const re=$.currentPeek()==="-"?$.peek():$.currentPeek(),le=R(re);return $.resetPeek(),le}function D($,B){const{currentType:q}=B;if(q!==2)return!1;k($);const re=$.currentPeek()===Qb;return $.resetPeek(),re}function U($,B){const{currentType:q}=B;if(q!==8)return!1;k($);const re=$.currentPeek()===".";return $.resetPeek(),re}function C($,B){const{currentType:q}=B;if(q!==9)return!1;k($);const re=V($.currentPeek());return $.resetPeek(),re}function w($,B){const{currentType:q}=B;if(!(q===8||q===12))return!1;k($);const re=$.currentPeek()===":";return $.resetPeek(),re}function _($,B){const{currentType:q}=B;if(q!==10)return!1;const re=()=>{const ne=$.currentPeek();return ne==="{"?V($.peek()):ne==="@"||ne==="%"||ne==="|"||ne===":"||ne==="."||ne===dn||!ne?!1:ne===Us?($.peek(),re()):O($,!1)},le=re();return $.resetPeek(),le}function x($){k($);const B=$.currentPeek()==="|";return $.resetPeek(),B}function P($){const B=k($),q=$.currentPeek()==="%"&&$.peek()==="{";return $.resetPeek(),{isModulo:q,hasSpace:B.length>0}}function O($,B=!0){const q=(le=!1,ne="",H=!1)=>{const Q=$.currentPeek();return Q==="{"?ne==="%"?!1:le:Q==="@"||!Q?ne==="%"?!0:le:Q==="%"?($.peek(),q(le,"%",!0)):Q==="|"?ne==="%"||H?!0:!(ne===dn||ne===Us):Q===dn?($.peek(),q(!0,dn,H)):Q===Us?($.peek(),q(!0,Us,H)):!0},re=q();return B&&$.resetPeek(),re}function M($,B){const q=$.currentChar();return q===zn?zn:B(q)?($.next(),q):null}function ae($){const B=$.charCodeAt(0);return B>=97&&B<=122||B>=65&&B<=90||B>=48&&B<=57||B===95||B===36}function fe($){return M($,ae)}function de($){const B=$.charCodeAt(0);return B>=97&&B<=122||B>=65&&B<=90||B>=48&&B<=57||B===95||B===36||B===45}function Z($){return M($,de)}function ue($){const B=$.charCodeAt(0);return B>=48&&B<=57}function $e($){return M($,ue)}function _e($){const B=$.charCodeAt(0);return B>=48&&B<=57||B>=65&&B<=70||B>=97&&B<=102}function Oe($){return M($,_e)}function Ve($){let B="",q="";for(;B=$e($);)q+=B;return q}function Qe($){L($);const B=$.currentChar();return B!=="%"&&f(Me.EXPECTED_TOKEN,i(),0,B),$.next(),"%"}function bt($){let B="";for(;;){const q=$.currentChar();if(q==="{"||q==="}"||q==="@"||q==="|"||!q)break;if(q==="%")if(O($))B+=q,$.next();else break;else if(q===dn||q===Us)if(O($))B+=q,$.next();else{if(x($))break;B+=q,$.next()}else B+=q,$.next()}return B}function Ct($){L($);let B="",q="";for(;B=Z($);)q+=B;return $.currentChar()===zn&&f(Me.UNTERMINATED_CLOSING_BRACE,i(),0),q}function $t($){L($);let B="";return $.currentChar()==="-"?($.next(),B+=`-${Ve($)}`):B+=Ve($),$.currentChar()===zn&&f(Me.UNTERMINATED_CLOSING_BRACE,i(),0),B}function te($){return $!==Qb&&$!==Us}function we($){L($),b($,"'");let B="",q="";for(;B=M($,te);)B==="\\"?q+=ye($):q+=B;const re=$.currentChar();return re===Us||re===zn?(f(Me.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),re===Us&&($.next(),b($,"'")),q):(b($,"'"),q)}function ye($){const B=$.currentChar();switch(B){case"\\":case"'":return $.next(),`\\${B}`;case"u":return Te($,B,4);case"U":return Te($,B,6);default:return f(Me.UNKNOWN_ESCAPE_SEQUENCE,i(),0,B),""}}function Te($,B,q){b($,B);let re="";for(let le=0;le<q;le++){const ne=Oe($);if(!ne){f(Me.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${B}${re}${$.currentChar()}`);break}re+=ne}return`\\${B}${re}`}function ze($){return $!=="{"&&$!=="}"&&$!==dn&&$!==Us}function je($){L($);let B="",q="";for(;B=M($,ze);)q+=B;return q}function A($){let B="",q="";for(;B=fe($);)q+=B;return q}function I($){const B=q=>{const re=$.currentChar();return re==="{"||re==="%"||re==="@"||re==="|"||re==="("||re===")"||!re||re===dn?q:(q+=re,$.next(),B(q))};return B("")}function j($){L($);const B=b($,"|");return L($),B}function W($,B){let q=null;switch($.currentChar()){case"{":return B.braceNest>=1&&f(Me.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),$.next(),q=p(B,2,"{"),L($),B.braceNest++,q;case"}":return B.braceNest>0&&B.currentType===2&&f(Me.EMPTY_PLACEHOLDER,i(),0),$.next(),q=p(B,3,"}"),B.braceNest--,B.braceNest>0&&L($),B.inLinked&&B.braceNest===0&&(B.inLinked=!1),q;case"@":return B.braceNest>0&&f(Me.UNTERMINATED_CLOSING_BRACE,i(),0),q=z($,B)||g(B),B.braceNest=0,q;default:{let le=!0,ne=!0,H=!0;if(x($))return B.braceNest>0&&f(Me.UNTERMINATED_CLOSING_BRACE,i(),0),q=p(B,1,j($)),B.braceNest=0,B.inLinked=!1,q;if(B.braceNest>0&&(B.currentType===5||B.currentType===6||B.currentType===7))return f(Me.UNTERMINATED_CLOSING_BRACE,i(),0),B.braceNest=0,Y($,B);if(le=E($,B))return q=p(B,5,Ct($)),L($),q;if(ne=N($,B))return q=p(B,6,$t($)),L($),q;if(H=D($,B))return q=p(B,7,we($)),L($),q;if(!le&&!ne&&!H)return q=p(B,13,je($)),f(Me.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,q.value),L($),q;break}}return q}function z($,B){const{currentType:q}=B;let re=null;const le=$.currentChar();switch((q===8||q===9||q===12||q===10)&&(le===Us||le===dn)&&f(Me.INVALID_LINKED_FORMAT,i(),0),le){case"@":return $.next(),re=p(B,8,"@"),B.inLinked=!0,re;case".":return L($),$.next(),p(B,9,".");case":":return L($),$.next(),p(B,10,":");default:return x($)?(re=p(B,1,j($)),B.braceNest=0,B.inLinked=!1,re):U($,B)||w($,B)?(L($),z($,B)):C($,B)?(L($),p(B,12,A($))):_($,B)?(L($),le==="{"?W($,B)||re:p(B,11,I($))):(q===8&&f(Me.INVALID_LINKED_FORMAT,i(),0),B.braceNest=0,B.inLinked=!1,Y($,B))}}function Y($,B){let q={type:14};if(B.braceNest>0)return W($,B)||g(B);if(B.inLinked)return z($,B)||g(B);switch($.currentChar()){case"{":return W($,B)||g(B);case"}":return f(Me.UNBALANCED_CLOSING_BRACE,i(),0),$.next(),p(B,3,"}");case"@":return z($,B)||g(B);default:{if(x($))return q=p(B,1,j($)),B.braceNest=0,B.inLinked=!1,q;const{isModulo:le,hasSpace:ne}=P($);if(le)return ne?p(B,0,bt($)):p(B,4,Qe($));if(O($))return p(B,0,bt($));break}}return q}function ee(){const{currentType:$,offset:B,startLoc:q,endLoc:re}=c;return c.lastType=$,c.lastOffset=B,c.lastStartLoc=q,c.lastEndLoc=re,c.offset=n(),c.startLoc=i(),r.currentChar()===zn?p(c,14):Y(r,c)}return{nextToken:ee,currentOffset:n,currentPosition:i,context:u}}const H7="parser",W7=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function z7(t,e,s){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||s,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function G7(t={}){const e=t.location!==!1,{onError:s,onWarn:r}=t;function n(E,N,D,U,...C){const w=E.currentPosition();if(w.offset+=U,w.column+=U,s){const _=e?Jd(D,w):null,x=Ga(N,_,{domain:H7,args:C});s(x)}}function i(E,N,D,U,...C){const w=E.currentPosition();if(w.offset+=U,w.column+=U,r){const _=e?Jd(D,w):null;r(O7(N,_,C))}}function o(E,N,D){const U={type:E};return e&&(U.start=N,U.end=N,U.loc={start:D,end:D}),U}function l(E,N,D,U){e&&(E.end=N,E.loc&&(E.loc.end=D))}function c(E,N){const D=E.context(),U=o(3,D.offset,D.startLoc);return U.value=N,l(U,E.currentOffset(),E.currentPosition()),U}function u(E,N){const D=E.context(),{lastOffset:U,lastStartLoc:C}=D,w=o(5,U,C);return w.index=parseInt(N,10),E.nextToken(),l(w,E.currentOffset(),E.currentPosition()),w}function d(E,N,D){const U=E.context(),{lastOffset:C,lastStartLoc:w}=U,_=o(4,C,w);return _.key=N,D===!0&&(_.modulo=!0),E.nextToken(),l(_,E.currentOffset(),E.currentPosition()),_}function f(E,N){const D=E.context(),{lastOffset:U,lastStartLoc:C}=D,w=o(9,U,C);return w.value=N.replace(W7,z7),E.nextToken(),l(w,E.currentOffset(),E.currentPosition()),w}function p(E){const N=E.nextToken(),D=E.context(),{lastOffset:U,lastStartLoc:C}=D,w=o(8,U,C);return N.type!==12?(n(E,Me.UNEXPECTED_EMPTY_LINKED_MODIFIER,D.lastStartLoc,0),w.value="",l(w,U,C),{nextConsumeToken:N,node:w}):(N.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,Sr(N)),w.value=N.value||"",l(w,E.currentOffset(),E.currentPosition()),{node:w})}function g(E,N){const D=E.context(),U=o(7,D.offset,D.startLoc);return U.value=N,l(U,E.currentOffset(),E.currentPosition()),U}function b(E){const N=E.context(),D=o(6,N.offset,N.startLoc);let U=E.nextToken();if(U.type===9){const C=p(E);D.modifier=C.node,U=C.nextConsumeToken||E.nextToken()}switch(U.type!==10&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(U)),U=E.nextToken(),U.type===2&&(U=E.nextToken()),U.type){case 11:U.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(U)),D.key=g(E,U.value||"");break;case 5:U.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(U)),D.key=d(E,U.value||"");break;case 6:U.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(U)),D.key=u(E,U.value||"");break;case 7:U.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(U)),D.key=f(E,U.value||"");break;default:{n(E,Me.UNEXPECTED_EMPTY_LINKED_KEY,N.lastStartLoc,0);const C=E.context(),w=o(7,C.offset,C.startLoc);return w.value="",l(w,C.offset,C.startLoc),D.key=w,l(D,C.offset,C.startLoc),{nextConsumeToken:U,node:D}}}return l(D,E.currentOffset(),E.currentPosition()),{node:D}}function k(E){const N=E.context(),D=N.currentType===1?E.currentOffset():N.offset,U=N.currentType===1?N.endLoc:N.startLoc,C=o(2,D,U);C.items=[];let w=null,_=null;do{const O=w||E.nextToken();switch(w=null,O.type){case 0:O.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(O)),C.items.push(c(E,O.value||""));break;case 6:O.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(O)),C.items.push(u(E,O.value||""));break;case 4:_=!0;break;case 5:O.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(O)),C.items.push(d(E,O.value||"",!!_)),_&&(i(E,Xy.USE_MODULO_SYNTAX,N.lastStartLoc,0,Sr(O)),_=null);break;case 7:O.value==null&&n(E,Me.UNEXPECTED_LEXICAL_ANALYSIS,N.lastStartLoc,0,Sr(O)),C.items.push(f(E,O.value||""));break;case 8:{const M=b(E);C.items.push(M.node),w=M.nextConsumeToken||null;break}}}while(N.currentType!==14&&N.currentType!==1);const x=N.currentType===1?N.lastOffset:E.currentOffset(),P=N.currentType===1?N.lastEndLoc:E.currentPosition();return l(C,x,P),C}function L(E,N,D,U){const C=E.context();let w=U.items.length===0;const _=o(1,N,D);_.cases=[],_.cases.push(U);do{const x=k(E);w||(w=x.items.length===0),_.cases.push(x)}while(C.currentType!==14);return w&&n(E,Me.MUST_HAVE_MESSAGES_IN_PLURAL,D,0),l(_,E.currentOffset(),E.currentPosition()),_}function V(E){const N=E.context(),{offset:D,startLoc:U}=N,C=k(E);return N.currentType===14?C:L(E,D,U,C)}function R(E){const N=j7(E,rC({},t)),D=N.context(),U=o(0,D.offset,D.startLoc);return e&&U.loc&&(U.loc.source=E),U.body=V(N),t.onCacheKey&&(U.cacheKey=t.onCacheKey(E)),D.currentType!==14&&n(N,Me.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,E[D.offset]||""),l(U,N.currentOffset(),N.currentPosition()),U}return{parse:R}}function Sr(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function K7(t,e={}){const s={ast:t,helpers:new Set};return{context:()=>s,helper:i=>(s.helpers.add(i),i)}}function Xb(t,e){for(let s=0;s<t.length;s++)Jy(t[s],e)}function Jy(t,e){switch(t.type){case 1:Xb(t.cases,e),e.helper("plural");break;case 2:Xb(t.items,e);break;case 6:{Jy(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function Y7(t,e={}){const s=K7(t);s.helper("normalize"),t.body&&Jy(t.body,s);const r=s.context();t.helpers=Array.from(r.helpers)}function Q7(t){const e=t.body;return e.type===2?Jb(e):e.cases.forEach(s=>Jb(s)),t}function Jb(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let s=0;s<t.items.length;s++){const r=t.items[s];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=nC(e);for(let s=0;s<t.items.length;s++){const r=t.items[s];(r.type===3||r.type===9)&&delete r.value}}}}const X7="minifier";function ta(t){switch(t.t=t.type,t.type){case 0:{const e=t;ta(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,s=e.cases;for(let r=0;r<s.length;r++)ta(s[r]);e.c=s,delete e.cases;break}case 2:{const e=t,s=e.items;for(let r=0;r<s.length;r++)ta(s[r]);e.i=s,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;ta(e.key),e.k=e.key,delete e.key,e.modifier&&(ta(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw Ga(Me.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:X7,args:[t.type]})}delete t.type}const J7="parser";function Z7(t,e){const{filename:s,breakLineCode:r,needIndent:n}=e,i=e.location!==!1,o={filename:s,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:n,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const l=()=>o;function c(k,L){o.code+=k}function u(k,L=!0){const V=L?r:"";c(n?V+"  ".repeat(k):V)}function d(k=!0){const L=++o.indentLevel;k&&u(L)}function f(k=!0){const L=--o.indentLevel;k&&u(L)}function p(){u(o.indentLevel)}return{context:l,push:c,indent:d,deindent:f,newline:p,helper:k=>`_${k}`,needIndent:()=>o.needIndent}}function eB(t,e){const{helper:s}=t;t.push(`${s("linked")}(`),Ca(t,e.key),e.modifier?(t.push(", "),Ca(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function tB(t,e){const{helper:s,needIndent:r}=t;t.push(`${s("normalize")}([`),t.indent(r());const n=e.items.length;for(let i=0;i<n&&(Ca(t,e.items[i]),i!==n-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function sB(t,e){const{helper:s,needIndent:r}=t;if(e.cases.length>1){t.push(`${s("plural")}([`),t.indent(r());const n=e.cases.length;for(let i=0;i<n&&(Ca(t,e.cases[i]),i!==n-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function rB(t,e){e.body?Ca(t,e.body):t.push("null")}function Ca(t,e){const{helper:s}=t;switch(e.type){case 0:rB(t,e);break;case 1:sB(t,e);break;case 2:tB(t,e);break;case 6:eB(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${s("interpolate")}(${s("list")}(${e.index}))`,e);break;case 4:t.push(`${s("interpolate")}(${s("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw Ga(Me.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:J7,args:[e.type]})}}const nB=(t,e={})=>{const s=Yb(e.mode)?e.mode:"normal",r=Yb(e.filename)?e.filename:"message.intl";e.sourceMap;const n=e.breakLineCode!=null?e.breakLineCode:s==="arrow"?";":`
`,i=e.needIndent?e.needIndent:s!=="arrow",o=t.helpers||[],l=Z7(t,{filename:r,breakLineCode:n,needIndent:i});l.push(s==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(i),o.length>0&&(l.push(`const { ${nC(o.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),Ca(l,t),l.deindent(i),l.push("}"),delete t.helpers;const{code:c,map:u}=l.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function iB(t,e={}){const s=rC({},e),r=!!s.jit,n=!!s.minify,i=s.optimize==null?!0:s.optimize,l=G7(s).parse(t);return r?(i&&Q7(l),n&&ta(l),{ast:l,code:""}):(Y7(l,s),nB(l,s))}/*!
  * core-base v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function oB(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_n().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_n().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_n().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Zr(t){return ut(t)&&Zy(t)===0&&(Ar(t,"b")||Ar(t,"body"))}const iC=["b","body"];function aB(t){return Mi(t,iC)}const oC=["c","cases"];function lB(t){return Mi(t,oC,[])}const aC=["s","static"];function cB(t){return Mi(t,aC)}const lC=["i","items"];function uB(t){return Mi(t,lC,[])}const cC=["t","type"];function Zy(t){return Mi(t,cC)}const uC=["v","value"];function Ru(t,e){const s=Mi(t,uC);if(s!=null)return s;throw gc(e)}const dC=["m","modifier"];function dB(t){return Mi(t,dC)}const hC=["k","key"];function hB(t){const e=Mi(t,hC);if(e)return e;throw gc(6)}function Mi(t,e,s){for(let r=0;r<e.length;r++){const n=e[r];if(Ar(t,n)&&t[n]!=null)return t[n]}return s}const fC=[...iC,...oC,...aC,...lC,...hC,...dC,...uC,...cC];function gc(t){return new Error(`unhandled node type: ${t}`)}const Di=[];Di[0]={w:[0],i:[3,0],"[":[4],o:[7]};Di[1]={w:[1],".":[2],"[":[4],o:[7]};Di[2]={w:[2],i:[3,0],0:[3,0]};Di[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Di[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Di[5]={"'":[4,0],o:8,l:[5,0]};Di[6]={'"':[4,0],o:8,l:[6,0]};const fB=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function pB(t){return fB.test(t)}function mB(t){const e=t.charCodeAt(0),s=t.charCodeAt(t.length-1);return e===s&&(e===34||e===39)?t.slice(1,-1):t}function gB(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function yB(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:pB(e)?mB(e):"*"+e}function vB(t){const e=[];let s=-1,r=0,n=0,i,o,l,c,u,d,f;const p=[];p[0]=()=>{o===void 0?o=l:o+=l},p[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},p[2]=()=>{p[0](),n++},p[3]=()=>{if(n>0)n--,r=4,p[0]();else{if(n=0,o===void 0||(o=yB(o),o===!1))return!1;p[1]()}};function g(){const b=t[s+1];if(r===5&&b==="'"||r===6&&b==='"')return s++,l="\\"+b,p[0](),!0}for(;r!==null;)if(s++,i=t[s],!(i==="\\"&&g())){if(c=gB(i),f=Di[r],u=f[c]||f.l||8,u===8||(r=u[0],u[1]!==void 0&&(d=p[u[1]],d&&(l=i,d()===!1))))return;if(r===7)return e}}const Zb=new Map;function _B(t,e){return ut(t)?t[e]:null}function bB(t,e){if(!ut(t))return null;let s=Zb.get(e);if(s||(s=vB(e),s&&Zb.set(e,s)),!s)return null;const r=s.length;let n=t,i=0;for(;i<r;){const o=s[i];if(fC.includes(o)&&Zr(n))return null;const l=n[o];if(l===void 0||kt(n))return null;n=l,i++}return n}const wB=t=>t,SB=t=>"",EB="text",TB=t=>t.length===0?"":A7(t),kB=C7;function ew(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function IB(t){const e=Wt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Wt(t.named.count)||Wt(t.named.n))?Wt(t.named.count)?t.named.count:Wt(t.named.n)?t.named.n:e:e}function CB(t,e){e.count||(e.count=t),e.n||(e.n=t)}function AB(t={}){const e=t.locale,s=IB(t),r=ut(t.pluralRules)&&Ee(e)&&kt(t.pluralRules[e])?t.pluralRules[e]:ew,n=ut(t.pluralRules)&&Ee(e)&&kt(t.pluralRules[e])?ew:void 0,i=V=>V[r(s,V.length,n)],o=t.list||[],l=V=>o[V],c=t.named||wt();Wt(t.pluralIndex)&&CB(s,c);const u=V=>c[V];function d(V){const R=kt(t.messages)?t.messages(V):ut(t.messages)?t.messages[V]:!1;return R||(t.parent?t.parent.message(V):SB)}const f=V=>t.modifiers?t.modifiers[V]:wB,p=qe(t.processor)&&kt(t.processor.normalize)?t.processor.normalize:TB,g=qe(t.processor)&&kt(t.processor.interpolate)?t.processor.interpolate:kB,b=qe(t.processor)&&Ee(t.processor.type)?t.processor.type:EB,L={list:l,named:u,plural:i,linked:(V,...R)=>{const[E,N]=R;let D="text",U="";R.length===1?ut(E)?(U=E.modifier||U,D=E.type||D):Ee(E)&&(U=E||U):R.length===2&&(Ee(E)&&(U=E||U),Ee(N)&&(D=N||D));const C=d(V)(L),w=D==="vnode"&&xt(C)&&U?C[0]:C;return U?f(U)(w,D):w},message:d,type:b,interpolate:g,normalize:p,values:gs(wt(),o,c)};return L}let yc=null;function PB(t){yc=t}function xB(t,e,s){yc&&yc.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:s})}const LB=RB("function:translate");function RB(t){return e=>yc&&yc.emit(t,e)}const NB=Xy.__EXTEND_POINT__,ji=mf(NB),OB={FALLBACK_TO_TRANSLATE:ji(),CANNOT_FORMAT_NUMBER:ji(),FALLBACK_TO_NUMBER_FORMAT:ji(),CANNOT_FORMAT_DATE:ji(),FALLBACK_TO_DATE_FORMAT:ji(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:ji(),__EXTEND_POINT__:ji()},pC=Me.__EXTEND_POINT__,Hi=mf(pC),Pr={INVALID_ARGUMENT:pC,INVALID_DATE_ARGUMENT:Hi(),INVALID_ISO_DATE_ARGUMENT:Hi(),NOT_SUPPORT_NON_STRING_MESSAGE:Hi(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Hi(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Hi(),NOT_SUPPORT_LOCALE_TYPE:Hi(),__EXTEND_POINT__:Hi()};function Gr(t){return Ga(t,null,void 0)}function ev(t,e){return e.locale!=null?tw(e.locale):tw(t.locale)}let Dp;function tw(t){if(Ee(t))return t;if(kt(t)){if(t.resolvedOnce&&Dp!=null)return Dp;if(t.constructor.name==="Function"){const e=t();if(I7(e))throw Gr(Pr.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Dp=e}else throw Gr(Pr.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Gr(Pr.NOT_SUPPORT_LOCALE_TYPE)}function MB(t,e,s){return[...new Set([s,...xt(e)?e:ut(e)?Object.keys(e):Ee(e)?[e]:[s]])]}function mC(t,e,s){const r=Ee(s)?s:Aa,n=t;n.__localeChainCache||(n.__localeChainCache=new Map);let i=n.__localeChainCache.get(r);if(!i){i=[];let o=[s];for(;xt(o);)o=sw(i,o,e);const l=xt(e)||!qe(e)?e:e.default?e.default:null;o=Ee(l)?[l]:l,xt(o)&&sw(i,o,!1),n.__localeChainCache.set(r,i)}return i}function sw(t,e,s){let r=!0;for(let n=0;n<e.length&&Xe(r);n++){const i=e[n];Ee(i)&&(r=DB(t,e[n],s))}return r}function DB(t,e,s){let r;const n=e.split("-");do{const i=n.join("-");r=$B(t,i,s),n.splice(-1,1)}while(n.length&&r===!0);return r}function $B(t,e,s){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const n=e.replace(/!/g,"");t.push(n),(xt(s)||qe(s))&&s[n]&&(r=s[n])}return r}const UB="9.14.4",gf=-1,Aa="en-US",rw="",nw=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function FB(){return{upper:(t,e)=>e==="text"&&Ee(t)?t.toUpperCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Ee(t)?t.toLowerCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Ee(t)?nw(t):e==="vnode"&&ut(t)&&"__v_isVNode"in t?nw(t.children):t}}let gC;function iw(t){gC=t}let yC;function VB(t){yC=t}let vC;function BB(t){vC=t}let _C=null;const qB=t=>{_C=t},jB=()=>_C;let bC=null;const ow=t=>{bC=t},HB=()=>bC;let aw=0;function WB(t={}){const e=kt(t.onWarn)?t.onWarn:P7,s=Ee(t.version)?t.version:UB,r=Ee(t.locale)||kt(t.locale)?t.locale:Aa,n=kt(r)?Aa:r,i=xt(t.fallbackLocale)||qe(t.fallbackLocale)||Ee(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,o=qe(t.messages)?t.messages:$p(n),l=qe(t.datetimeFormats)?t.datetimeFormats:$p(n),c=qe(t.numberFormats)?t.numberFormats:$p(n),u=gs(wt(),t.modifiers,FB()),d=t.pluralRules||wt(),f=kt(t.missing)?t.missing:null,p=Xe(t.missingWarn)||Ei(t.missingWarn)?t.missingWarn:!0,g=Xe(t.fallbackWarn)||Ei(t.fallbackWarn)?t.fallbackWarn:!0,b=!!t.fallbackFormat,k=!!t.unresolving,L=kt(t.postTranslation)?t.postTranslation:null,V=qe(t.processor)?t.processor:null,R=Xe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,E=!!t.escapeParameter,N=kt(t.messageCompiler)?t.messageCompiler:gC,D=kt(t.messageResolver)?t.messageResolver:yC||_B,U=kt(t.localeFallbacker)?t.localeFallbacker:vC||MB,C=ut(t.fallbackContext)?t.fallbackContext:void 0,w=t,_=ut(w.__datetimeFormatters)?w.__datetimeFormatters:new Map,x=ut(w.__numberFormatters)?w.__numberFormatters:new Map,P=ut(w.__meta)?w.__meta:{};aw++;const O={version:s,cid:aw,locale:r,fallbackLocale:i,messages:o,modifiers:u,pluralRules:d,missing:f,missingWarn:p,fallbackWarn:g,fallbackFormat:b,unresolving:k,postTranslation:L,processor:V,warnHtmlMessage:R,escapeParameter:E,messageCompiler:N,messageResolver:D,localeFallbacker:U,fallbackContext:C,onWarn:e,__meta:P};return O.datetimeFormats=l,O.numberFormats=c,O.__datetimeFormatters=_,O.__numberFormatters=x,__INTLIFY_PROD_DEVTOOLS__&&xB(O,s,P),O}const $p=t=>({[t]:wt()});function tv(t,e,s,r,n){const{missing:i,onWarn:o}=t;if(i!==null){const l=i(t,s,e,n);return Ee(l)?l:e}else return e}function pl(t,e,s){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,s,e)}function zB(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function GB(t,e){const s=e.indexOf(t);if(s===-1)return!1;for(let r=s+1;r<e.length;r++)if(zB(t,e[r]))return!0;return!1}function Up(t){return s=>KB(s,t)}function KB(t,e){const s=aB(e);if(s==null)throw gc(0);if(Zy(s)===1){const i=lB(s);return t.plural(i.reduce((o,l)=>[...o,lw(t,l)],[]))}else return lw(t,s)}function lw(t,e){const s=cB(e);if(s!=null)return t.type==="text"?s:t.normalize([s]);{const r=uB(e).reduce((n,i)=>[...n,Qm(t,i)],[]);return t.normalize(r)}}function Qm(t,e){const s=Zy(e);switch(s){case 3:return Ru(e,s);case 9:return Ru(e,s);case 4:{const r=e;if(Ar(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(Ar(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw gc(s)}case 5:{const r=e;if(Ar(r,"i")&&Wt(r.i))return t.interpolate(t.list(r.i));if(Ar(r,"index")&&Wt(r.index))return t.interpolate(t.list(r.index));throw gc(s)}case 6:{const r=e,n=dB(r),i=hB(r);return t.linked(Qm(t,i),n?Qm(t,n):void 0,t.type)}case 7:return Ru(e,s);case 8:return Ru(e,s);default:throw new Error(`unhandled node on format message part: ${s}`)}}const wC=t=>t;let na=wt();function SC(t,e={}){let s=!1;const r=e.onError||D7;return e.onError=n=>{s=!0,r(n)},{...iB(t,e),detectError:s}}const YB=(t,e)=>{if(!Ee(t))throw Gr(Pr.NOT_SUPPORT_NON_STRING_MESSAGE);{Xe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||wC)(t),n=na[r];if(n)return n;const{code:i,detectError:o}=SC(t,e),l=new Function(`return ${i}`)();return o?l:na[r]=l}};function QB(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&Ee(t)){Xe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||wC)(t),n=na[r];if(n)return n;const{ast:i,detectError:o}=SC(t,{...e,location:!1,jit:!0}),l=Up(i);return o?l:na[r]=l}else{const s=t.cacheKey;if(s){const r=na[s];return r||(na[s]=Up(t))}else return Up(t)}}const cw=()=>"",hr=t=>kt(t);function uw(t,...e){const{fallbackFormat:s,postTranslation:r,unresolving:n,messageCompiler:i,fallbackLocale:o,messages:l}=t,[c,u]=Xm(...e),d=Xe(u.missingWarn)?u.missingWarn:t.missingWarn,f=Xe(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,p=Xe(u.escapeParameter)?u.escapeParameter:t.escapeParameter,g=!!u.resolvedMessage,b=Ee(u.default)||Xe(u.default)?Xe(u.default)?i?c:()=>c:u.default:s?i?c:()=>c:"",k=s||b!=="",L=ev(t,u);p&&XB(u);let[V,R,E]=g?[c,L,l[L]||wt()]:EC(t,c,L,o,f,d),N=V,D=c;if(!g&&!(Ee(N)||Zr(N)||hr(N))&&k&&(N=b,D=N),!g&&(!(Ee(N)||Zr(N)||hr(N))||!Ee(R)))return n?gf:c;let U=!1;const C=()=>{U=!0},w=hr(N)?N:TC(t,c,R,N,D,C);if(U)return N;const _=eq(t,R,E,u),x=AB(_),P=JB(t,w,x),O=r?r(P,c):P;if(__INTLIFY_PROD_DEVTOOLS__){const M={timestamp:Date.now(),key:Ee(c)?c:hr(N)?N.key:"",locale:R||(hr(N)?N.locale:""),format:Ee(N)?N:hr(N)?N.source:"",message:O};M.meta=gs({},t.__meta,jB()||{}),LB(M)}return O}function XB(t){xt(t.list)?t.list=t.list.map(e=>Ee(e)?Kb(e):e):ut(t.named)&&Object.keys(t.named).forEach(e=>{Ee(t.named[e])&&(t.named[e]=Kb(t.named[e]))})}function EC(t,e,s,r,n,i){const{messages:o,onWarn:l,messageResolver:c,localeFallbacker:u}=t,d=u(t,r,s);let f=wt(),p,g=null;const b="translate";for(let k=0;k<d.length&&(p=d[k],f=o[p]||wt(),(g=c(f,e))===null&&(g=f[e]),!(Ee(g)||Zr(g)||hr(g)));k++)if(!GB(p,d)){const L=tv(t,e,p,i,b);L!==e&&(g=L)}return[g,p,f]}function TC(t,e,s,r,n,i){const{messageCompiler:o,warnHtmlMessage:l}=t;if(hr(r)){const u=r;return u.locale=u.locale||s,u.key=u.key||e,u}if(o==null){const u=()=>r;return u.locale=s,u.key=e,u}const c=o(r,ZB(t,s,n,r,l,i));return c.locale=s,c.key=e,c.source=r,c}function JB(t,e,s){return e(s)}function Xm(...t){const[e,s,r]=t,n=wt();if(!Ee(e)&&!Wt(e)&&!hr(e)&&!Zr(e))throw Gr(Pr.INVALID_ARGUMENT);const i=Wt(e)?String(e):(hr(e),e);return Wt(s)?n.plural=s:Ee(s)?n.default=s:qe(s)&&!pf(s)?n.named=s:xt(s)&&(n.list=s),Wt(r)?n.plural=r:Ee(r)?n.default=r:qe(r)&&gs(n,r),[i,n]}function ZB(t,e,s,r,n,i){return{locale:e,key:s,warnHtmlMessage:n,onError:o=>{throw i&&i(o),o},onCacheKey:o=>w7(e,s,o)}}function eq(t,e,s,r){const{modifiers:n,pluralRules:i,messageResolver:o,fallbackLocale:l,fallbackWarn:c,missingWarn:u,fallbackContext:d}=t,p={locale:e,modifiers:n,pluralRules:i,messages:g=>{let b=o(s,g);if(b==null&&d){const[,,k]=EC(d,g,e,l,c,u);b=o(k,g)}if(Ee(b)||Zr(b)){let k=!1;const V=TC(t,g,e,b,g,()=>{k=!0});return k?cw:V}else return hr(b)?b:cw}};return t.processor&&(p.processor=t.processor),r.list&&(p.list=r.list),r.named&&(p.named=r.named),Wt(r.plural)&&(p.pluralIndex=r.plural),p}function dw(t,...e){const{datetimeFormats:s,unresolving:r,fallbackLocale:n,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:l}=t,[c,u,d,f]=Jm(...e),p=Xe(d.missingWarn)?d.missingWarn:t.missingWarn;Xe(d.fallbackWarn)?d.fallbackWarn:t.fallbackWarn;const g=!!d.part,b=ev(t,d),k=o(t,n,b);if(!Ee(c)||c==="")return new Intl.DateTimeFormat(b,f).format(u);let L={},V,R=null;const E="datetime format";for(let U=0;U<k.length&&(V=k[U],L=s[V]||{},R=L[c],!qe(R));U++)tv(t,c,V,p,E);if(!qe(R)||!Ee(V))return r?gf:c;let N=`${V}__${c}`;pf(f)||(N=`${N}__${JSON.stringify(f)}`);let D=l.get(N);return D||(D=new Intl.DateTimeFormat(V,gs({},R,f)),l.set(N,D)),g?D.formatToParts(u):D.format(u)}const kC=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Jm(...t){const[e,s,r,n]=t,i=wt();let o=wt(),l;if(Ee(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Gr(Pr.INVALID_ISO_DATE_ARGUMENT);const u=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();l=new Date(u);try{l.toISOString()}catch{throw Gr(Pr.INVALID_ISO_DATE_ARGUMENT)}}else if(E7(e)){if(isNaN(e.getTime()))throw Gr(Pr.INVALID_DATE_ARGUMENT);l=e}else if(Wt(e))l=e;else throw Gr(Pr.INVALID_ARGUMENT);return Ee(s)?i.key=s:qe(s)&&Object.keys(s).forEach(c=>{kC.includes(c)?o[c]=s[c]:i[c]=s[c]}),Ee(r)?i.locale=r:qe(r)&&(o=r),qe(n)&&(o=n),[i.key||"",l,i,o]}function hw(t,e,s){const r=t;for(const n in s){const i=`${e}__${n}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function fw(t,...e){const{numberFormats:s,unresolving:r,fallbackLocale:n,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:l}=t,[c,u,d,f]=Zm(...e),p=Xe(d.missingWarn)?d.missingWarn:t.missingWarn;Xe(d.fallbackWarn)?d.fallbackWarn:t.fallbackWarn;const g=!!d.part,b=ev(t,d),k=o(t,n,b);if(!Ee(c)||c==="")return new Intl.NumberFormat(b,f).format(u);let L={},V,R=null;const E="number format";for(let U=0;U<k.length&&(V=k[U],L=s[V]||{},R=L[c],!qe(R));U++)tv(t,c,V,p,E);if(!qe(R)||!Ee(V))return r?gf:c;let N=`${V}__${c}`;pf(f)||(N=`${N}__${JSON.stringify(f)}`);let D=l.get(N);return D||(D=new Intl.NumberFormat(V,gs({},R,f)),l.set(N,D)),g?D.formatToParts(u):D.format(u)}const IC=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Zm(...t){const[e,s,r,n]=t,i=wt();let o=wt();if(!Wt(e))throw Gr(Pr.INVALID_ARGUMENT);const l=e;return Ee(s)?i.key=s:qe(s)&&Object.keys(s).forEach(c=>{IC.includes(c)?o[c]=s[c]:i[c]=s[c]}),Ee(r)?i.locale=r:qe(r)&&(o=r),qe(n)&&(o=n),[i.key||"",l,i,o]}function pw(t,e,s){const r=t;for(const n in s){const i=`${e}__${n}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}oB();/*!
  * vue-i18n v9.14.4
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const CC="9.14.4";function tq(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(_n().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(_n().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_n().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_n().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_n().__INTLIFY_PROD_DEVTOOLS__=!1)}const sq=OB.__EXTEND_POINT__,hn=mf(sq);hn(),hn(),hn(),hn(),hn(),hn(),hn(),hn(),hn();const AC=Pr.__EXTEND_POINT__,Hs=mf(AC),ns={UNEXPECTED_RETURN_TYPE:AC,INVALID_ARGUMENT:Hs(),MUST_BE_CALL_SETUP_TOP:Hs(),NOT_INSTALLED:Hs(),NOT_AVAILABLE_IN_LEGACY_MODE:Hs(),REQUIRED_VALUE:Hs(),INVALID_VALUE:Hs(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Hs(),NOT_INSTALLED_WITH_PROVIDE:Hs(),UNEXPECTED_ERROR:Hs(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Hs(),BRIDGE_SUPPORT_VUE_2_ONLY:Hs(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Hs(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Hs(),__EXTEND_POINT__:Hs()};function cs(t,...e){return Ga(t,null,void 0)}const eg=Oi("__translateVNode"),tg=Oi("__datetimeParts"),sg=Oi("__numberParts"),PC=Oi("__setPluralRules"),xC=Oi("__injectWithOption"),rg=Oi("__dispose");function vc(t){if(!ut(t)||Zr(t))return t;for(const e in t)if(Ar(t,e))if(!e.includes("."))ut(t[e])&&vc(t[e]);else{const s=e.split("."),r=s.length-1;let n=t,i=!1;for(let o=0;o<r;o++){if(s[o]==="__proto__")throw new Error(`unsafe key: ${s[o]}`);if(s[o]in n||(n[s[o]]=wt()),!ut(n[s[o]])){i=!0;break}n=n[s[o]]}if(i||(Zr(n)?fC.includes(s[r])||delete t[e]:(n[s[r]]=t[e],delete t[e])),!Zr(n)){const o=n[s[r]];ut(o)&&vc(o)}}return t}function yf(t,e){const{messages:s,__i18n:r,messageResolver:n,flatJson:i}=e,o=qe(s)?s:xt(r)?wt():{[t]:wt()};if(xt(r)&&r.forEach(l=>{if("locale"in l&&"resource"in l){const{locale:c,resource:u}=l;c?(o[c]=o[c]||wt(),nd(u,o[c])):nd(u,o)}else Ee(l)&&nd(JSON.parse(l),o)}),n==null&&i)for(const l in o)Ar(o,l)&&vc(o[l]);return o}function LC(t){return t.type}function RC(t,e,s){let r=ut(e.messages)?e.messages:wt();"__i18nGlobal"in s&&(r=yf(t.locale.value,{messages:r,__i18n:s.__i18nGlobal}));const n=Object.keys(r);n.length&&n.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(ut(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(ut(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function mw(t){return xe(In,null,t,0)}const gw="__INTLIFY_META__",yw=()=>[],rq=()=>!1;let vw=0;function _w(t){return(e,s,r,n)=>t(s,r,ys()||void 0,n)}const nq=()=>{const t=ys();let e=null;return t&&(e=LC(t)[gw])?{[gw]:e}:null};function sv(t={},e){const{__root:s,__injectWithOption:r}=t,n=s===void 0,i=t.flatJson,o=Xd?Se:xc,l=!!t.translateExistCompatible;let c=Xe(t.inheritLocale)?t.inheritLocale:!0;const u=o(s&&c?s.locale.value:Ee(t.locale)?t.locale:Aa),d=o(s&&c?s.fallbackLocale.value:Ee(t.fallbackLocale)||xt(t.fallbackLocale)||qe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:u.value),f=o(yf(u.value,t)),p=o(qe(t.datetimeFormats)?t.datetimeFormats:{[u.value]:{}}),g=o(qe(t.numberFormats)?t.numberFormats:{[u.value]:{}});let b=s?s.missingWarn:Xe(t.missingWarn)||Ei(t.missingWarn)?t.missingWarn:!0,k=s?s.fallbackWarn:Xe(t.fallbackWarn)||Ei(t.fallbackWarn)?t.fallbackWarn:!0,L=s?s.fallbackRoot:Xe(t.fallbackRoot)?t.fallbackRoot:!0,V=!!t.fallbackFormat,R=kt(t.missing)?t.missing:null,E=kt(t.missing)?_w(t.missing):null,N=kt(t.postTranslation)?t.postTranslation:null,D=s?s.warnHtmlMessage:Xe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,U=!!t.escapeParameter;const C=s?s.modifiers:qe(t.modifiers)?t.modifiers:{};let w=t.pluralRules||s&&s.pluralRules,_;_=(()=>{n&&ow(null);const H={version:CC,locale:u.value,fallbackLocale:d.value,messages:f.value,modifiers:C,pluralRules:w,missing:E===null?void 0:E,missingWarn:b,fallbackWarn:k,fallbackFormat:V,unresolving:!0,postTranslation:N===null?void 0:N,warnHtmlMessage:D,escapeParameter:U,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};H.datetimeFormats=p.value,H.numberFormats=g.value,H.__datetimeFormatters=qe(_)?_.__datetimeFormatters:void 0,H.__numberFormatters=qe(_)?_.__numberFormatters:void 0;const Q=WB(H);return n&&ow(Q),Q})(),pl(_,u.value,d.value);function P(){return[u.value,d.value,f.value,p.value,g.value]}const O=oe({get:()=>u.value,set:H=>{u.value=H,_.locale=u.value}}),M=oe({get:()=>d.value,set:H=>{d.value=H,_.fallbackLocale=d.value,pl(_,u.value,H)}}),ae=oe(()=>f.value),fe=oe(()=>p.value),de=oe(()=>g.value);function Z(){return kt(N)?N:null}function ue(H){N=H,_.postTranslation=H}function $e(){return R}function _e(H){H!==null&&(E=_w(H)),R=H,_.missing=E}const Oe=(H,Q,Ce,Ae,mt,Et)=>{P();let Lt;try{__INTLIFY_PROD_DEVTOOLS__,n||(_.fallbackContext=s?HB():void 0),Lt=H(_)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(_.fallbackContext=void 0)}if(Ce!=="translate exists"&&Wt(Lt)&&Lt===gf||Ce==="translate exists"&&!Lt){const[os,on]=Q();return s&&L?Ae(s):mt(os)}else{if(Et(Lt))return Lt;throw cs(ns.UNEXPECTED_RETURN_TYPE)}};function Ve(...H){return Oe(Q=>Reflect.apply(uw,null,[Q,...H]),()=>Xm(...H),"translate",Q=>Reflect.apply(Q.t,Q,[...H]),Q=>Q,Q=>Ee(Q))}function Qe(...H){const[Q,Ce,Ae]=H;if(Ae&&!ut(Ae))throw cs(ns.INVALID_ARGUMENT);return Ve(Q,Ce,gs({resolvedMessage:!0},Ae||{}))}function bt(...H){return Oe(Q=>Reflect.apply(dw,null,[Q,...H]),()=>Jm(...H),"datetime format",Q=>Reflect.apply(Q.d,Q,[...H]),()=>rw,Q=>Ee(Q))}function Ct(...H){return Oe(Q=>Reflect.apply(fw,null,[Q,...H]),()=>Zm(...H),"number format",Q=>Reflect.apply(Q.n,Q,[...H]),()=>rw,Q=>Ee(Q))}function $t(H){return H.map(Q=>Ee(Q)||Wt(Q)||Xe(Q)?mw(String(Q)):Q)}const we={normalize:$t,interpolate:H=>H,type:"vnode"};function ye(...H){return Oe(Q=>{let Ce;const Ae=Q;try{Ae.processor=we,Ce=Reflect.apply(uw,null,[Ae,...H])}finally{Ae.processor=null}return Ce},()=>Xm(...H),"translate",Q=>Q[eg](...H),Q=>[mw(Q)],Q=>xt(Q))}function Te(...H){return Oe(Q=>Reflect.apply(fw,null,[Q,...H]),()=>Zm(...H),"number format",Q=>Q[sg](...H),yw,Q=>Ee(Q)||xt(Q))}function ze(...H){return Oe(Q=>Reflect.apply(dw,null,[Q,...H]),()=>Jm(...H),"datetime format",Q=>Q[tg](...H),yw,Q=>Ee(Q)||xt(Q))}function je(H){w=H,_.pluralRules=w}function A(H,Q){return Oe(()=>{if(!H)return!1;const Ce=Ee(Q)?Q:u.value,Ae=W(Ce),mt=_.messageResolver(Ae,H);return l?mt!=null:Zr(mt)||hr(mt)||Ee(mt)},()=>[H],"translate exists",Ce=>Reflect.apply(Ce.te,Ce,[H,Q]),rq,Ce=>Xe(Ce))}function I(H){let Q=null;const Ce=mC(_,d.value,u.value);for(let Ae=0;Ae<Ce.length;Ae++){const mt=f.value[Ce[Ae]]||{},Et=_.messageResolver(mt,H);if(Et!=null){Q=Et;break}}return Q}function j(H){const Q=I(H);return Q??(s?s.tm(H)||{}:{})}function W(H){return f.value[H]||{}}function z(H,Q){if(i){const Ce={[H]:Q};for(const Ae in Ce)Ar(Ce,Ae)&&vc(Ce[Ae]);Q=Ce[H]}f.value[H]=Q,_.messages=f.value}function Y(H,Q){f.value[H]=f.value[H]||{};const Ce={[H]:Q};if(i)for(const Ae in Ce)Ar(Ce,Ae)&&vc(Ce[Ae]);Q=Ce[H],nd(Q,f.value[H]),_.messages=f.value}function ee(H){return p.value[H]||{}}function $(H,Q){p.value[H]=Q,_.datetimeFormats=p.value,hw(_,H,Q)}function B(H,Q){p.value[H]=gs(p.value[H]||{},Q),_.datetimeFormats=p.value,hw(_,H,Q)}function q(H){return g.value[H]||{}}function re(H,Q){g.value[H]=Q,_.numberFormats=g.value,pw(_,H,Q)}function le(H,Q){g.value[H]=gs(g.value[H]||{},Q),_.numberFormats=g.value,pw(_,H,Q)}vw++,s&&Xd&&(fr(s.locale,H=>{c&&(u.value=H,_.locale=H,pl(_,u.value,d.value))}),fr(s.fallbackLocale,H=>{c&&(d.value=H,_.fallbackLocale=H,pl(_,u.value,d.value))}));const ne={id:vw,locale:O,fallbackLocale:M,get inheritLocale(){return c},set inheritLocale(H){c=H,H&&s&&(u.value=s.locale.value,d.value=s.fallbackLocale.value,pl(_,u.value,d.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:ae,get modifiers(){return C},get pluralRules(){return w||{}},get isGlobal(){return n},get missingWarn(){return b},set missingWarn(H){b=H,_.missingWarn=b},get fallbackWarn(){return k},set fallbackWarn(H){k=H,_.fallbackWarn=k},get fallbackRoot(){return L},set fallbackRoot(H){L=H},get fallbackFormat(){return V},set fallbackFormat(H){V=H,_.fallbackFormat=V},get warnHtmlMessage(){return D},set warnHtmlMessage(H){D=H,_.warnHtmlMessage=H},get escapeParameter(){return U},set escapeParameter(H){U=H,_.escapeParameter=H},t:Ve,getLocaleMessage:W,setLocaleMessage:z,mergeLocaleMessage:Y,getPostTranslationHandler:Z,setPostTranslationHandler:ue,getMissingHandler:$e,setMissingHandler:_e,[PC]:je};return ne.datetimeFormats=fe,ne.numberFormats=de,ne.rt=Qe,ne.te=A,ne.tm=j,ne.d=bt,ne.n=Ct,ne.getDateTimeFormat=ee,ne.setDateTimeFormat=$,ne.mergeDateTimeFormat=B,ne.getNumberFormat=q,ne.setNumberFormat=re,ne.mergeNumberFormat=le,ne[xC]=r,ne[eg]=ye,ne[tg]=ze,ne[sg]=Te,ne}function iq(t){const e=Ee(t.locale)?t.locale:Aa,s=Ee(t.fallbackLocale)||xt(t.fallbackLocale)||qe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=kt(t.missing)?t.missing:void 0,n=Xe(t.silentTranslationWarn)||Ei(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Xe(t.silentFallbackWarn)||Ei(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Xe(t.fallbackRoot)?t.fallbackRoot:!0,l=!!t.formatFallbackMessages,c=qe(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,d=kt(t.postTranslation)?t.postTranslation:void 0,f=Ee(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,p=!!t.escapeParameterHtml,g=Xe(t.sync)?t.sync:!0;let b=t.messages;if(qe(t.sharedMessages)){const U=t.sharedMessages;b=Object.keys(U).reduce((w,_)=>{const x=w[_]||(w[_]={});return gs(x,U[_]),w},b||{})}const{__i18n:k,__root:L,__injectWithOption:V}=t,R=t.datetimeFormats,E=t.numberFormats,N=t.flatJson,D=t.translateExistCompatible;return{locale:e,fallbackLocale:s,messages:b,flatJson:N,datetimeFormats:R,numberFormats:E,missing:r,missingWarn:n,fallbackWarn:i,fallbackRoot:o,fallbackFormat:l,modifiers:c,pluralRules:u,postTranslation:d,warnHtmlMessage:f,escapeParameter:p,messageResolver:t.messageResolver,inheritLocale:g,translateExistCompatible:D,__i18n:k,__root:L,__injectWithOption:V}}function ng(t={},e){{const s=sv(iq(t)),{__extender:r}=t,n={id:s.id,get locale(){return s.locale.value},set locale(i){s.locale.value=i},get fallbackLocale(){return s.fallbackLocale.value},set fallbackLocale(i){s.fallbackLocale.value=i},get messages(){return s.messages.value},get datetimeFormats(){return s.datetimeFormats.value},get numberFormats(){return s.numberFormats.value},get availableLocales(){return s.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return s.getMissingHandler()},set missing(i){s.setMissingHandler(i)},get silentTranslationWarn(){return Xe(s.missingWarn)?!s.missingWarn:s.missingWarn},set silentTranslationWarn(i){s.missingWarn=Xe(i)?!i:i},get silentFallbackWarn(){return Xe(s.fallbackWarn)?!s.fallbackWarn:s.fallbackWarn},set silentFallbackWarn(i){s.fallbackWarn=Xe(i)?!i:i},get modifiers(){return s.modifiers},get formatFallbackMessages(){return s.fallbackFormat},set formatFallbackMessages(i){s.fallbackFormat=i},get postTranslation(){return s.getPostTranslationHandler()},set postTranslation(i){s.setPostTranslationHandler(i)},get sync(){return s.inheritLocale},set sync(i){s.inheritLocale=i},get warnHtmlInMessage(){return s.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){s.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return s.escapeParameter},set escapeParameterHtml(i){s.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return s.pluralRules||{}},__composer:s,t(...i){const[o,l,c]=i,u={};let d=null,f=null;if(!Ee(o))throw cs(ns.INVALID_ARGUMENT);const p=o;return Ee(l)?u.locale=l:xt(l)?d=l:qe(l)&&(f=l),xt(c)?d=c:qe(c)&&(f=c),Reflect.apply(s.t,s,[p,d||f||{},u])},rt(...i){return Reflect.apply(s.rt,s,[...i])},tc(...i){const[o,l,c]=i,u={plural:1};let d=null,f=null;if(!Ee(o))throw cs(ns.INVALID_ARGUMENT);const p=o;return Ee(l)?u.locale=l:Wt(l)?u.plural=l:xt(l)?d=l:qe(l)&&(f=l),Ee(c)?u.locale=c:xt(c)?d=c:qe(c)&&(f=c),Reflect.apply(s.t,s,[p,d||f||{},u])},te(i,o){return s.te(i,o)},tm(i){return s.tm(i)},getLocaleMessage(i){return s.getLocaleMessage(i)},setLocaleMessage(i,o){s.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){s.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(s.d,s,[...i])},getDateTimeFormat(i){return s.getDateTimeFormat(i)},setDateTimeFormat(i,o){s.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){s.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(s.n,s,[...i])},getNumberFormat(i){return s.getNumberFormat(i)},setNumberFormat(i,o){s.setNumberFormat(i,o)},mergeNumberFormat(i,o){s.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return n.__extender=r,n}}const rv={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function oq({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,n)=>[...r,...n.type===he?n.children:[n]],[]):e.reduce((s,r)=>{const n=t[r];return n&&(s[r]=n()),s},wt())}function NC(t){return he}const aq=xi({name:"i18n-t",props:gs({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Wt(t)||!isNaN(t)}},rv),setup(t,e){const{slots:s,attrs:r}=e,n=t.i18n||Gc({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(s).filter(f=>f!=="_"),o=wt();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=Ee(t.plural)?+t.plural:t.plural);const l=oq(e,i),c=n[eg](t.keypath,l,o),u=gs(wt(),r),d=Ee(t.tag)||ut(t.tag)?t.tag:NC();return Ua(d,u,c)}}}),ig=aq;function lq(t){return xt(t)&&!Ee(t[0])}function OC(t,e,s,r){const{slots:n,attrs:i}=e;return()=>{const o={part:!0};let l=wt();t.locale&&(o.locale=t.locale),Ee(t.format)?o.key=t.format:ut(t.format)&&(Ee(t.format.key)&&(o.key=t.format.key),l=Object.keys(t.format).reduce((p,g)=>s.includes(g)?gs(wt(),p,{[g]:t.format[g]}):p,wt()));const c=r(t.value,o,l);let u=[o.key];xt(c)?u=c.map((p,g)=>{const b=n[p.type],k=b?b({[p.type]:p.value,index:g,parts:c}):[p.value];return lq(k)&&(k[0].key=`${p.type}-${g}`),k}):Ee(c)&&(u=[c]);const d=gs(wt(),i),f=Ee(t.tag)||ut(t.tag)?t.tag:NC();return Ua(f,d,u)}}const cq=xi({name:"i18n-n",props:gs({value:{type:Number,required:!0},format:{type:[String,Object]}},rv),setup(t,e){const s=t.i18n||Gc({useScope:t.scope,__useComponent:!0});return OC(t,e,IC,(...r)=>s[sg](...r))}}),og=cq,uq=xi({name:"i18n-d",props:gs({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},rv),setup(t,e){const s=t.i18n||Gc({useScope:t.scope,__useComponent:!0});return OC(t,e,kC,(...r)=>s[tg](...r))}}),ag=uq;function dq(t,e){const s=t;if(t.mode==="composition")return s.__getInstance(e)||t.global;{const r=s.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function MC(t){const e=o=>{const{instance:l,modifiers:c,value:u}=o;if(!l||!l.$)throw cs(ns.UNEXPECTED_ERROR);const d=dq(t,l.$),f=bw(u);return[Reflect.apply(d.t,d,[...ww(f)]),d]};return{created:(o,l)=>{const[c,u]=e(l);Xd&&t.global===u&&(o.__i18nWatcher=fr(u.locale,()=>{l.instance&&l.instance.$forceUpdate()})),o.__composer=u,o.textContent=c},unmounted:o=>{Xd&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:l})=>{if(o.__composer){const c=o.__composer,u=bw(l);o.textContent=Reflect.apply(c.t,c,[...ww(u)])}},getSSRProps:o=>{const[l]=e(o);return{textContent:l}}}}function bw(t){if(Ee(t))return{path:t};if(qe(t)){if(!("path"in t))throw cs(ns.REQUIRED_VALUE,"path");return t}else throw cs(ns.INVALID_VALUE)}function ww(t){const{path:e,locale:s,args:r,choice:n,plural:i}=t,o={},l=r||{};return Ee(s)&&(o.locale=s),Wt(n)&&(o.plural=n),Wt(i)&&(o.plural=i),[e,l,o]}function hq(t,e,...s){const r=qe(s[0])?s[0]:{},n=!!r.useI18nComponentName;(Xe(r.globalInstall)?r.globalInstall:!0)&&([n?"i18n":ig.name,"I18nT"].forEach(o=>t.component(o,ig)),[og.name,"I18nN"].forEach(o=>t.component(o,og)),[ag.name,"I18nD"].forEach(o=>t.component(o,ag))),t.directive("t",MC(e))}function fq(t,e,s){return{beforeCreate(){const r=ys();if(!r)throw cs(ns.UNEXPECTED_ERROR);const n=this.$options;if(n.i18n){const i=n.i18n;if(n.__i18n&&(i.__i18n=n.__i18n),i.__root=e,this===this.$root)this.$i18n=Sw(t,i);else{i.__injectWithOption=!0,i.__extender=s.__vueI18nExtend,this.$i18n=ng(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(n.__i18n)if(this===this.$root)this.$i18n=Sw(t,n);else{this.$i18n=ng({__i18n:n.__i18n,__injectWithOption:!0,__extender:s.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;n.__i18nGlobal&&RC(e,n,n),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),s.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=ys();if(!r)throw cs(ns.UNEXPECTED_ERROR);const n=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__disposer&&(n.__disposer(),delete n.__disposer,delete n.__extender),s.__deleteInstance(r),delete this.$i18n}}}function Sw(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[PC](e.pluralizationRules||t.pluralizationRules);const s=yf(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(s).forEach(r=>t.mergeLocaleMessage(r,s[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const DC=Oi("global-vue-i18n");function $C(t={},e){const s=__VUE_I18N_LEGACY_API__&&Xe(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Xe(t.globalInjection)?t.globalInjection:!0,n=__VUE_I18N_LEGACY_API__&&s?!!t.allowComposition:!0,i=new Map,[o,l]=pq(t,s),c=Oi("");function u(p){return i.get(p)||null}function d(p,g){i.set(p,g)}function f(p){i.delete(p)}{const p={get mode(){return __VUE_I18N_LEGACY_API__&&s?"legacy":"composition"},get allowComposition(){return n},async install(g,...b){if(g.__VUE_I18N_SYMBOL__=c,g.provide(g.__VUE_I18N_SYMBOL__,p),qe(b[0])){const V=b[0];p.__composerExtend=V.__composerExtend,p.__vueI18nExtend=V.__vueI18nExtend}let k=null;!s&&r&&(k=Eq(g,p.global)),__VUE_I18N_FULL_INSTALL__&&hq(g,p,...b),__VUE_I18N_LEGACY_API__&&s&&g.mixin(fq(l,l.__composer,p));const L=g.unmount;g.unmount=()=>{k&&k(),p.dispose(),L()}},get global(){return l},dispose(){o.stop()},__instances:i,__getInstance:u,__setInstance:d,__deleteInstance:f};return p}}function Gc(t={}){const e=ys();if(e==null)throw cs(ns.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw cs(ns.NOT_INSTALLED);const s=mq(e),r=yq(s),n=LC(e),i=gq(t,n);if(__VUE_I18N_LEGACY_API__&&s.mode==="legacy"&&!t.__useComponent){if(!s.allowComposition)throw cs(ns.NOT_AVAILABLE_IN_LEGACY_MODE);return wq(e,i,r,t)}if(i==="global")return RC(r,t,n),r;if(i==="parent"){let c=vq(s,e,t.__useComponent);return c==null&&(c=r),c}const o=s;let l=o.__getInstance(e);if(l==null){const c=gs({},t);"__i18n"in n&&(c.__i18n=n.__i18n),r&&(c.__root=r),l=sv(c),o.__composerExtend&&(l[rg]=o.__composerExtend(l)),bq(o,e,l),o.__setInstance(e,l)}return l}function pq(t,e,s){const r=Sg();{const n=__VUE_I18N_LEGACY_API__&&e?r.run(()=>ng(t)):r.run(()=>sv(t));if(n==null)throw cs(ns.UNEXPECTED_ERROR);return[r,n]}}function mq(t){{const e=Xs(t.isCE?DC:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw cs(t.isCE?ns.NOT_INSTALLED_WITH_PROVIDE:ns.UNEXPECTED_ERROR);return e}}function gq(t,e){return pf(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function yq(t){return t.mode==="composition"?t.global:t.global.__composer}function vq(t,e,s=!1){let r=null;const n=e.root;let i=_q(e,s);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const l=o.__getInstance(i);l!=null&&(r=l.__composer,s&&r&&!r[xC]&&(r=null))}if(r!=null||n===i)break;i=i.parent}return r}function _q(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function bq(t,e,s){br(()=>{},e),Li(()=>{const r=s;t.__deleteInstance(e);const n=r[rg];n&&(n(),delete r[rg])},e)}function wq(t,e,s,r={}){const n=e==="local",i=xc(null);if(n&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw cs(ns.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Xe(r.inheritLocale)?r.inheritLocale:!Ee(r.locale),l=Se(!n||o?s.locale.value:Ee(r.locale)?r.locale:Aa),c=Se(!n||o?s.fallbackLocale.value:Ee(r.fallbackLocale)||xt(r.fallbackLocale)||qe(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:l.value),u=Se(yf(l.value,r)),d=Se(qe(r.datetimeFormats)?r.datetimeFormats:{[l.value]:{}}),f=Se(qe(r.numberFormats)?r.numberFormats:{[l.value]:{}}),p=n?s.missingWarn:Xe(r.missingWarn)||Ei(r.missingWarn)?r.missingWarn:!0,g=n?s.fallbackWarn:Xe(r.fallbackWarn)||Ei(r.fallbackWarn)?r.fallbackWarn:!0,b=n?s.fallbackRoot:Xe(r.fallbackRoot)?r.fallbackRoot:!0,k=!!r.fallbackFormat,L=kt(r.missing)?r.missing:null,V=kt(r.postTranslation)?r.postTranslation:null,R=n?s.warnHtmlMessage:Xe(r.warnHtmlMessage)?r.warnHtmlMessage:!0,E=!!r.escapeParameter,N=n?s.modifiers:qe(r.modifiers)?r.modifiers:{},D=r.pluralRules||n&&s.pluralRules;function U(){return[l.value,c.value,u.value,d.value,f.value]}const C=oe({get:()=>i.value?i.value.locale.value:l.value,set:I=>{i.value&&(i.value.locale.value=I),l.value=I}}),w=oe({get:()=>i.value?i.value.fallbackLocale.value:c.value,set:I=>{i.value&&(i.value.fallbackLocale.value=I),c.value=I}}),_=oe(()=>i.value?i.value.messages.value:u.value),x=oe(()=>d.value),P=oe(()=>f.value);function O(){return i.value?i.value.getPostTranslationHandler():V}function M(I){i.value&&i.value.setPostTranslationHandler(I)}function ae(){return i.value?i.value.getMissingHandler():L}function fe(I){i.value&&i.value.setMissingHandler(I)}function de(I){return U(),I()}function Z(...I){return i.value?de(()=>Reflect.apply(i.value.t,null,[...I])):de(()=>"")}function ue(...I){return i.value?Reflect.apply(i.value.rt,null,[...I]):""}function $e(...I){return i.value?de(()=>Reflect.apply(i.value.d,null,[...I])):de(()=>"")}function _e(...I){return i.value?de(()=>Reflect.apply(i.value.n,null,[...I])):de(()=>"")}function Oe(I){return i.value?i.value.tm(I):{}}function Ve(I,j){return i.value?i.value.te(I,j):!1}function Qe(I){return i.value?i.value.getLocaleMessage(I):{}}function bt(I,j){i.value&&(i.value.setLocaleMessage(I,j),u.value[I]=j)}function Ct(I,j){i.value&&i.value.mergeLocaleMessage(I,j)}function $t(I){return i.value?i.value.getDateTimeFormat(I):{}}function te(I,j){i.value&&(i.value.setDateTimeFormat(I,j),d.value[I]=j)}function we(I,j){i.value&&i.value.mergeDateTimeFormat(I,j)}function ye(I){return i.value?i.value.getNumberFormat(I):{}}function Te(I,j){i.value&&(i.value.setNumberFormat(I,j),f.value[I]=j)}function ze(I,j){i.value&&i.value.mergeNumberFormat(I,j)}const je={get id(){return i.value?i.value.id:-1},locale:C,fallbackLocale:w,messages:_,datetimeFormats:x,numberFormats:P,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(I){i.value&&(i.value.inheritLocale=I)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(u.value)},get modifiers(){return i.value?i.value.modifiers:N},get pluralRules(){return i.value?i.value.pluralRules:D},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:p},set missingWarn(I){i.value&&(i.value.missingWarn=I)},get fallbackWarn(){return i.value?i.value.fallbackWarn:g},set fallbackWarn(I){i.value&&(i.value.missingWarn=I)},get fallbackRoot(){return i.value?i.value.fallbackRoot:b},set fallbackRoot(I){i.value&&(i.value.fallbackRoot=I)},get fallbackFormat(){return i.value?i.value.fallbackFormat:k},set fallbackFormat(I){i.value&&(i.value.fallbackFormat=I)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:R},set warnHtmlMessage(I){i.value&&(i.value.warnHtmlMessage=I)},get escapeParameter(){return i.value?i.value.escapeParameter:E},set escapeParameter(I){i.value&&(i.value.escapeParameter=I)},t:Z,getPostTranslationHandler:O,setPostTranslationHandler:M,getMissingHandler:ae,setMissingHandler:fe,rt:ue,d:$e,n:_e,tm:Oe,te:Ve,getLocaleMessage:Qe,setLocaleMessage:bt,mergeLocaleMessage:Ct,getDateTimeFormat:$t,setDateTimeFormat:te,mergeDateTimeFormat:we,getNumberFormat:ye,setNumberFormat:Te,mergeNumberFormat:ze};function A(I){I.locale.value=l.value,I.fallbackLocale.value=c.value,Object.keys(u.value).forEach(j=>{I.mergeLocaleMessage(j,u.value[j])}),Object.keys(d.value).forEach(j=>{I.mergeDateTimeFormat(j,d.value[j])}),Object.keys(f.value).forEach(j=>{I.mergeNumberFormat(j,f.value[j])}),I.escapeParameter=E,I.fallbackFormat=k,I.fallbackRoot=b,I.fallbackWarn=g,I.missingWarn=p,I.warnHtmlMessage=R}return Ng(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw cs(ns.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const I=i.value=t.proxy.$i18n.__composer;e==="global"?(l.value=I.locale.value,c.value=I.fallbackLocale.value,u.value=I.messages.value,d.value=I.datetimeFormats.value,f.value=I.numberFormats.value):n&&A(I)}),je}const Sq=["locale","fallbackLocale","availableLocales"],Ew=["t","rt","d","n","tm","te"];function Eq(t,e){const s=Object.create(null);return Sq.forEach(n=>{const i=Object.getOwnPropertyDescriptor(e,n);if(!i)throw cs(ns.UNEXPECTED_ERROR);const o=Qt(i.value)?{get(){return i.value.value},set(l){i.value.value=l}}:{get(){return i.get&&i.get()}};Object.defineProperty(s,n,o)}),t.config.globalProperties.$i18n=s,Ew.forEach(n=>{const i=Object.getOwnPropertyDescriptor(e,n);if(!i||!i.value)throw cs(ns.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${n}`,i)}),()=>{delete t.config.globalProperties.$i18n,Ew.forEach(n=>{delete t.config.globalProperties[`$${n}`]})}}tq();__INTLIFY_JIT_COMPILATION__?iw(QB):iw(YB);VB(bB);BB(mC);if(__INTLIFY_PROD_DEVTOOLS__){const t=_n();t.__INTLIFY__=!0,PB(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const UC=Object.freeze(Object.defineProperty({__proto__:null,DatetimeFormat:ag,I18nInjectionKey:DC,NumberFormat:og,Translation:ig,VERSION:CC,createI18n:$C,useI18n:Gc,vTDirective:MC},Symbol.toStringTag,{value:"Module"})),FC="https://api.aced.live",ce=ht.create({baseURL:`${FC}/api`,headers:{"Content-Type":"application/json"},timeout:3e4}),Cl=new Map,Zi=new Map,VC=5e3,Tq=3,kq=1e3,id=t=>!t||!t.method||!t.url?`unknown-${Date.now()}`:`${t.method}-${t.url}-${JSON.stringify(t.data||{})}`;let ml=!1,lg=[];const Fp=(t,e=null)=>{lg.forEach(s=>{t?s.reject(t):s.resolve(e)}),lg=[]},BC=async()=>{try{const t=me.currentUser;return t?await t.getIdToken(!0):null}catch{return null}};ce.interceptors.request.use(async t=>{try{const e=id(t);if(Zi.has(e)){const r=Zi.get(e);Date.now()-r<1e3}if(Zi.set(e,Date.now()),t.method&&t.method.toLowerCase()==="get"){const r=Cl.get(e);r&&Date.now()-r.timestamp<VC&&(t.headers={...t.headers,"X-Cache-Status":"HIT"})}const s=await BC();return s&&(t.headers.Authorization=`Bearer ${s}`),t}catch(e){return Promise.reject(e)}},t=>Promise.reject(t));ce.interceptors.response.use(t=>{var e;try{const s=id(t.config);s&&Zi.has(s)&&Zi.delete(s)}catch{}if((e=t.config)!=null&&e.method&&t.config.method.toLowerCase()==="get"&&t.status===200&&!t.config.headers["X-Cache-Status"])try{const s=id(t.config);if(s&&!s.includes("unknown")&&(Cl.set(s,{response:t,timestamp:Date.now()}),Cl.size>100)){const r=Date.now()-VC;for(const[n,i]of Cl.entries())i.timestamp<r&&Cl.delete(n)}}catch{}return t},async t=>{var s,r,n,i,o,l,c;const e=t.config;if(e)try{const u=id(e);u&&Zi.has(u)&&Zi.delete(u)}catch{}if((s=t.config)!=null&&s.url,(r=t.config)!=null&&r.method,(n=t.response)!=null&&n.status,(o=(i=t.response)==null?void 0:i.data)!=null&&o.message||t.message,((l=t.response)==null?void 0:l.status)===401&&!e._retry){if(ml)return new Promise((u,d)=>{lg.push({resolve:u,reject:d})}).then(u=>(e.headers.Authorization=`Bearer ${u}`,ce(e)));e._retry=!0,ml=!0;try{const u=me.currentUser;if(!u)return Fp(new Error("No user available"),null),ml=!1,Promise.reject(t);const d=await u.getIdToken(!0);return e.headers.Authorization=`Bearer ${d}`,Fp(null,d),ml=!1,ce(e)}catch(u){return Fp(u,null),ml=!1,Promise.reject(u)}}if(((c=t.response)==null?void 0:c.status)===429&&e._retryCount<Tq){e._retryCount=(e._retryCount||0)+1;const u=kq*e._retryCount;return await new Promise(d=>setTimeout(d,u)),ce(e)}return Promise.reject(t)});const Iq=async(t,e="API call")=>{var s,r,n;try{return await t()}catch(i){if(((s=i.response)==null?void 0:s.status)===401)try{if(me.currentUser)return await me.currentUser.getIdToken(!0),await t()}catch{throw new Error("Authentication failed. Please log in again.")}else{if(((r=i.response)==null?void 0:r.status)===404)throw new Error("Resource not found");if(((n=i.response)==null?void 0:n.status)>=500)throw new Error("Server error. Please try again later.");if(i.code==="NETWORK_ERROR")throw new Error("Network error. Please check your connection.")}throw i}};let nr={token:null,expiry:0,quotaErrorUntil:0};const Cq=3e4,Aq=3e5,nv=async()=>{var e,s;const t=Date.now();if(nr.quotaErrorUntil>t)return console.warn("[subscription.js]  Token refresh blocked (quota cooldown)"),nr.token&&nr.expiry>t?nr.token:localStorage.getItem("token")||null;if(nr.token&&nr.expiry>t)return nr.token;try{const r=me.currentUser;if(r){const n=await r.getIdToken(!1);return nr.token=n,nr.expiry=t+Aq,n}return localStorage.getItem("token")||null}catch(r){return console.error("[subscription.js] Error getting auth token:",r),(r.code==="auth/quota-exceeded"||(e=r.message)!=null&&e.includes("quota-exceeded")||(s=r.message)!=null&&s.includes("QUOTA_EXCEEDED"))&&(console.error("[subscription.js]  Quota exceeded - activating circuit breaker"),nr.quotaErrorUntil=t+Cq),nr.token&&nr.expiry>t?nr.token:localStorage.getItem("token")||null}},qC=async t=>{try{const e=await nv();if(!e)return console.error(" [subscription.js] No authentication token"),{success:!1,error:"No authentication token"};const s={Authorization:`Bearer ${e}`,"Content-Type":"application/json"},{data:r}=await ce.get(`users/${t}`,{headers:s}),n=r.user||r.data||r;return{success:!0,subscription:{plan:n.subscriptionPlan||"free",status:n.subscriptionPlan&&n.subscriptionPlan!=="free"?"active":"inactive",expiryDate:n.subscriptionExpiryDate||null,source:n.subscriptionSource||null,activatedAt:n.subscriptionActivatedAt||null,duration:n.subscriptionDuration||null,serverFetch:!0,fetchTime:new Date().toISOString()},user:n}}catch(e){return{success:!1,error:e.message,subscription:null}}},Pq=async(t,e)=>{console.log(" [subscription.js] saveSubscriptionToServer called");try{const s=await nv();if(!s)return{success:!1,error:"No authentication token"};const r={Authorization:`Bearer ${s}`,"Content-Type":"application/json"},n={userId:t,subscriptionPlan:e.plan,subscriptionStatus:e.status||"active",activatedAt:e.activatedAt||new Date().toISOString(),expiryDate:e.expiryDate,source:e.source||"api",details:{...e.details,lastUpdated:new Date().toISOString(),deviceInfo:{userAgent:typeof navigator<"u"?navigator.userAgent:"unknown",timestamp:Date.now()}},metadata:{version:"2.0",persistenceType:"global",syncSource:"client"}};try{const i=await ce.put(`users/${t}/status`,n,{headers:r});if(i.data&&i.data.success!==!1)return console.log(" [subscription.js] Subscription saved to server"),{success:!0,data:i.data,serverData:n}}catch(i){console.warn(" [subscription.js] Primary endpoint failed:",i.message)}try{const i=await ce.put(`users/${t}`,n,{headers:r});if(i.data)return{success:!0,data:i.data,serverData:n}}catch(i){console.warn(" [subscription.js] Fallback endpoint failed:",i.message)}return{success:!1,error:"Failed to save subscription to server",localOnly:!0,serverData:n}}catch(s){return console.error(" [subscription.js] saveSubscriptionToServer error:",s),{success:!1,error:s.message,localOnly:!0}}},xq=async(t,e,s="manual")=>{console.log(" [subscription.js] updateUserStatusWithPersistence called:",e);try{const r=await nv(),n={subscriptionPlan:e,userStatus:e,plan:e,lastStatusUpdate:new Date().toISOString(),statusSource:s};let i=!1;try{(await ce.put(`users/${t}/status`,n,{headers:{Authorization:`Bearer ${r}`}})).status===200&&(i=!0,console.log(" [subscription.js] Server update successful"))}catch(d){console.warn(" [subscription.js] Server update failed:",d.message);try{(await ce.put(`users/${t}`,n,{headers:{Authorization:`Bearer ${r}`}})).status===200&&(i=!0)}catch(f){console.warn(" [subscription.js] Fallback update failed:",f.message)}}const o=new Date,l=new Date(o.getTime()+(s==="payment"?365:30)*24*60*60*1e3),c={plan:e,status:e!=="free"?"active":"inactive",activatedAt:o.toISOString(),expiryDate:e!=="free"?l.toISOString():null,source:s,lastUpdated:o.toISOString(),serverSync:i,version:"2.0"},u={subscriptionData:JSON.stringify(c),userStatus:e,userPlan:e,subscriptionPlan:e,plan:e,lastStatusUpdate:o.toISOString(),statusPersistenceVersion:"2.0"};Object.entries(u).forEach(([d,f])=>{try{localStorage.setItem(d,f)}catch{console.warn(" [subscription.js] localStorage error:",d)}});try{const d=localStorage.getItem("user");if(d){const f=JSON.parse(d);f.subscriptionPlan=e,f.userStatus=e,f.plan=e,f.lastStatusUpdate=o.toISOString(),localStorage.setItem("user",JSON.stringify(f))}}catch{console.warn(" [subscription.js] User object update error")}return{success:!0,newStatus:e,serverSync:i,subscriptionData:c}}catch(r){console.error(" [subscription.js] updateUserStatusWithPersistence error:",r);try{localStorage.setItem("userStatus",e),localStorage.setItem("userPlan",e),localStorage.setItem("subscriptionPlan",e),localStorage.setItem("plan",e)}catch{console.error(" [subscription.js] localStorage fallback failed")}return{success:!1,error:r.message,newStatus:e,serverSync:!1}}},Vp=Object.freeze(Object.defineProperty({__proto__:null,fetchSubscriptionFromServer:qC,saveSubscriptionToServer:Pq,updateUserStatusWithPersistence:xq},Symbol.toStringTag,{value:"Module"})),eo=Se(localStorage.getItem("lang")||"ru"),zi=[{code:"en",label:"English",flag:"",nativeName:"English"},{code:"ru",label:"",flag:"",nativeName:"Russian"},{code:"uz",label:"O'zbekcha",flag:"",nativeName:"Uzbek"}];let Al=null;function iv(t){var s;Al=t;const e=localStorage.getItem("lang")||"ru";eo.value=e,(s=t==null?void 0:t.global)!=null&&s.locale&&(t.global.locale.value=e),window.addEventListener("storage",r=>{r.key==="lang"&&r.newValue&&Zd(r.newValue)})}function Zd(t){var s;zi.some(r=>r.code===t)||(console.warn(`Invalid language code: ${t}. Using 'ru' as fallback.`),t="ru"),eo.value=t,(s=Al==null?void 0:Al.global)!=null&&s.locale&&(Al.global.locale.value=t),localStorage.setItem("lang",t),document.documentElement.lang=t,window.dispatchEvent(new CustomEvent("language-changed",{detail:{language:t,timestamp:Date.now()}}))}function jC(){return eo.value}function Lq(){const t=oe(()=>eo.value),e=oe(()=>zi.find(o=>o.code===eo.value)||zi[1]),s=oe(()=>{var o;return((o=e.value)==null?void 0:o.label)||""}),r=oe(()=>{var o;return((o=e.value)==null?void 0:o.flag)||""});return{language:t,currentLanguage:t,languages:zi,currentLanguageInfo:e,currentLanguageLabel:s,currentLanguageFlag:r,setLanguage:Zd,getLanguage:jC,isLanguage:o=>eo.value===o,cycleLanguage:()=>{const l=(zi.findIndex(c=>c.code===eo.value)+1)%zi.length;Zd(zi[l].code)}}}const Rq={name:"LanguageSwitcher",props:{compact:{type:Boolean,default:!1}},setup(){const{language:t,languages:e,currentLanguageLabel:s,setLanguage:r}=Lq(),n=Se(!1),i=()=>{n.value=!n.value},o=()=>{n.value=!1},l=u=>{r(u),n.value=!1},c=u=>{n.value&&!u.target.closest(".language-switcher")&&(n.value=!1)};return br(()=>{document.addEventListener("click",c)}),Li(()=>{document.removeEventListener("click",c)}),{languages:e,currentLanguage:t,currentLanguageLabel:s,isDropdownOpen:n,toggleDropdown:i,closeDropdown:o,selectLanguage:l}}},Nq={key:0,class:"lang-text"},Oq={class:"dropdown-header"},Mq={class:"dropdown-options"},Dq=["onClick"],$q={class:"option-flag"},Uq={class:"option-label"},Fq={key:0,class:"option-check"};function Vq(t,e,s,r,n,i){return v(),S("div",{class:ge(["language-switcher",{compact:s.compact}])},[a("button",{class:ge(["lang-button",{active:r.isDropdownOpen}]),onClick:e[0]||(e[0]=(...o)=>r.toggleDropdown&&r.toggleDropdown(...o))},[e[4]||(e[4]=at('<span class="lang-icon" data-v-bd55f606><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-bd55f606><circle cx="12" cy="12" r="10" data-v-bd55f606></circle><path d="M2 12h20" data-v-bd55f606></path><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-bd55f606></path></svg></span>',1)),s.compact?G("",!0):(v(),S("span",Nq,m(r.currentLanguageLabel),1)),a("span",{class:ge(["lang-arrow",{rotated:r.isDropdownOpen}])},e[3]||(e[3]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"6 9 12 15 18 9"})],-1)]),2)],2),xe(ma,{name:"dropdown"},{default:Jt(()=>[r.isDropdownOpen?(v(),S("div",{key:0,class:"lang-dropdown",onClick:e[1]||(e[1]=vt(()=>{},["stop"]))},[a("div",Oq,[e[5]||(e[5]=a("span",{class:"header-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M2 12h20"}),a("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})])],-1)),a("span",null,m(t.$t("common.selectLanguage")),1)]),a("div",Mq,[(v(!0),S(he,null,be(r.languages,o=>(v(),S("button",{key:o.code,class:ge(["lang-option",{active:r.currentLanguage===o.code}]),onClick:l=>r.selectLanguage(o.code)},[a("span",$q,m(o.flag),1),a("span",Uq,m(o.label),1),r.currentLanguage===o.code?(v(),S("span",Fq,e[6]||(e[6]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[a("polyline",{points:"20 6 9 17 4 12"})],-1)]))):G("",!0)],10,Dq))),128))])])):G("",!0)]),_:1}),r.isDropdownOpen?(v(),S("div",{key:0,class:"dropdown-backdrop",onClick:e[2]||(e[2]=(...o)=>r.closeDropdown&&r.closeDropdown(...o))})):G("",!0)],2)}const ov=Je(Rq,[["render",Vq],["__scopeId","data-v-bd55f606"]]),Bq={name:"AcedSettings",components:{LanguageSwitcher:ov},setup(){const t=Po(),e=Mc(),s=Se(!1),r=Se({name:"",surname:"",email:""}),n=Se({name:"",surname:""}),i=Se(!1),o=Se(""),l=Se(""),c=Se(""),u=Se(null),d=Se(""),f=Se(!1),p=Se(""),g=Se(""),b=Se(!1),k=oe(()=>{var _e;return((_e=u.value)==null?void 0:_e.plan)||"free"}),L=oe(()=>k.value==="pro"||k.value==="premium"?"Pro Plan":"Free Plan"),V=oe(()=>{var Qe;if(k.value==="free"||!((Qe=u.value)!=null&&Qe.expiryDate))return null;const _e=new Date(u.value.expiryDate),Ve=Math.ceil((_e-new Date)/(1e3*60*60*24));return{date:_e,formattedDate:_e.toLocaleDateString(),daysRemaining:Math.max(0,Ve),isExpiring:Ve<=3}}),R=oe(()=>{var _e;return((_e=t.getters["user/currentUsage"])==null?void 0:_e.messages)||0}),E=oe(()=>{var _e;return((_e=t.getters["user/currentUsage"])==null?void 0:_e.images)||0}),N=oe(()=>{var _e;return((_e=t.getters["user/usageLimits"])==null?void 0:_e.messages)||50}),D=oe(()=>{var _e;return((_e=t.getters["user/usageLimits"])==null?void 0:_e.images)||5}),U=oe(()=>{var _e,Oe;return((Oe=(_e=me.currentUser)==null?void 0:_e.providerData)==null?void 0:Oe.some(Ve=>Ve.providerId==="google.com"))||!1}),C=async()=>{var _e;try{const Oe=((_e=me.currentUser)==null?void 0:_e.uid)||localStorage.getItem("userId")||localStorage.getItem("firebaseUserId");if(!Oe)return;const Ve=await qC(Oe);Ve.success&&Ve.subscription&&(u.value=Ve.subscription,t.commit("user/UPDATE_SUBSCRIPTION",{...Ve.subscription,serverFetch:!0}))}catch{}},w=async()=>{var _e,Oe,Ve,Qe;s.value=!0;try{const bt=me.currentUser,Ct=t.getters["user/getUser"];Ct?r.value={name:Ct.name||((_e=Ct.displayName)==null?void 0:_e.split(" ")[0])||"",surname:Ct.surname||((Oe=Ct.displayName)==null?void 0:Oe.split(" ")[1])||"",email:Ct.email||(bt==null?void 0:bt.email)||""}:bt&&(r.value={name:((Ve=bt.displayName)==null?void 0:Ve.split(" ")[0])||"",surname:((Qe=bt.displayName)==null?void 0:Qe.split(" ")[1])||"",email:bt.email||""}),await C()}catch{}finally{s.value=!1}},_=()=>{n.value={...r.value},i.value=!0},x=()=>{i.value=!1,n.value={name:"",surname:""}},P=async()=>{try{s.value=!0,r.value.name=n.value.name,r.value.surname=n.value.surname,i.value=!1}catch{}finally{s.value=!1}},O=async()=>{if(!(!o.value||!l.value||!c.value)&&!(l.value!==c.value||l.value.length<6))try{s.value=!0;const _e=me.currentUser;if(!(_e!=null&&_e.email))throw new Error("No user");const Oe=Do.credential(_e.email,o.value);await JU(_e,Oe),await tF(_e,l.value),o.value="",l.value="",c.value=""}catch{}finally{s.value=!1}},M=async()=>{var _e;try{const Oe=r.value.email||((_e=me.currentUser)==null?void 0:_e.email);Oe&&await Bk(me,Oe)}catch{}},ae=(_e=1)=>e.push({path:"/pay/pro",query:{duration:_e}}),fe=async()=>{if(!d.value.trim()){p.value="Please enter a promocode";return}p.value="",g.value="",f.value=!0;try{const _e=await t.dispatch("user/applyPromocode",{promoCode:d.value.trim(),plan:"pro"});_e.success?(g.value=_e.message||this.$t("settings.promocodeApplied"),d.value="",await C()):p.value=_e.error||this.$t("settings.invalidPromocode")}catch{p.value=this.$t("settings.invalidPromocode")}finally{f.value=!1}},de=()=>e.push("/profile"),Z=async()=>{try{await me.signOut(),await t.dispatch("user/logout"),e.push("/login")}catch{}},ue=()=>{b.value=!0},$e=async()=>{try{s.value=!0;const _e=me.currentUser;if(!_e)throw new Error("No user");await oF(_e),await t.dispatch("user/logout"),b.value=!1,e.push("/")}catch{}finally{s.value=!1}};return br(()=>{w(),window.addEventListener("subscriptionUpdated",C),window.addEventListener("userStatusChanged",C)}),Li(()=>{window.removeEventListener("subscriptionUpdated",C),window.removeEventListener("userStatusChanged",C)}),{loading:s,user:r,tempUser:n,isEditingName:i,oldPassword:o,newPassword:l,confirmPassword:c,promocode:d,applyingPromo:f,promoError:p,promoSuccess:g,showDeleteModal:b,currentPlan:k,currentPlanLabel:L,subscriptionExpiryInfo:V,currentUsageMessages:R,currentUsageImages:E,usageLimitsMessages:N,usageLimitsImages:D,isGoogleUser:U,refreshFromServer:C,loadInitialData:w,startEditingName:_,cancelEditingName:x,saveNameChanges:P,saveChanges:O,sendPasswordReset:M,goToUpgrade:ae,applyPromocode:fe,goToProfile:de,handleLogout:Z,confirmDeleteAccount:ue,deleteAccount:$e}}},qq={class:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100"},jq={class:"max-w-4xl mx-auto px-4 sm:px-6 py-6"},Hq={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 p-5 bg-white rounded-2xl shadow-sm"},Wq={class:"flex items-center gap-4"},zq={class:"text-2xl font-bold text-slate-900"},Gq={class:"text-sm text-slate-500 mt-1"},Kq={class:"flex items-center gap-3"},Yq=["disabled"],Qq={class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},Xq={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},Jq={class:"min-w-0"},Zq={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},ej={class:"text-base font-bold text-slate-900 truncate"},tj={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},sj={class:"min-w-0 flex-1"},rj={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},nj={class:"text-base font-bold text-slate-900"},ij={class:"text-xs font-normal text-slate-400"},oj={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},aj={class:"min-w-0 flex-1"},lj={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},cj={class:"text-base font-bold text-slate-900"},uj={class:"text-xs font-normal text-slate-400"},dj={class:"flex items-center gap-3 p-4 bg-white rounded-2xl shadow-sm"},hj={class:"min-w-0"},fj={class:"text-[10px] text-slate-500 uppercase tracking-wide font-medium"},pj={class:"text-base font-bold text-slate-900"},mj={class:"bg-white rounded-2xl shadow-sm overflow-hidden mb-6"},gj={class:"flex items-center gap-3 p-5 border-b border-slate-100"},yj={class:"text-base font-semibold text-slate-900"},vj={class:"text-xs text-slate-500"},_j={class:"p-5"},bj={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},wj={class:"relative p-5 border-2 border-slate-200 hover:border-indigo-400 rounded-2xl transition-all hover:shadow-lg flex flex-col"},Sj={class:"text-center flex-1 flex flex-col"},Ej={class:"text-lg font-bold text-slate-900"},Tj={class:"text-sm text-slate-500 mb-4"},kj={class:"text-left text-xs text-slate-600 space-y-2 flex-1"},Ij={class:"flex items-center gap-2"},Cj={class:"flex items-center gap-2"},Aj={class:"flex items-center gap-2"},Pj=["disabled"],xj={class:"relative p-5 border-2 border-amber-400 rounded-2xl shadow-lg bg-gradient-to-b from-amber-50 to-white flex flex-col"},Lj={class:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-[10px] font-bold uppercase rounded-full tracking-wide whitespace-nowrap"},Rj={class:"text-center flex-1 flex flex-col pt-1"},Nj={class:"text-lg font-bold text-slate-900"},Oj={class:"text-sm text-slate-500"},Mj={class:"inline-block px-2 py-0.5 bg-emerald-100 text-emerald-700 text-[10px] font-bold rounded-full my-2 mx-auto"},Dj={class:"text-left text-xs text-slate-600 space-y-2 flex-1"},$j={class:"flex items-center gap-2"},Uj={class:"flex items-center gap-2"},Fj={class:"flex items-center gap-2"},Vj=["disabled"],Bj={class:"relative p-5 border-2 border-emerald-400 rounded-2xl shadow-md bg-gradient-to-b from-emerald-50 to-white flex flex-col"},qj={class:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-emerald-500 to-teal-500 text-white text-[10px] font-bold uppercase rounded-full tracking-wide whitespace-nowrap"},jj={class:"text-center flex-1 flex flex-col pt-1"},Hj={class:"text-lg font-bold text-slate-900"},Wj={class:"text-sm text-slate-500"},zj={class:"inline-block px-2 py-0.5 bg-emerald-100 text-emerald-700 text-[10px] font-bold rounded-full my-2 mx-auto"},Gj={class:"text-left text-xs text-slate-600 space-y-2 flex-1"},Kj={class:"flex items-center gap-2"},Yj={class:"flex items-center gap-2"},Qj={class:"flex items-center gap-2"},Xj=["disabled"],Jj={class:"mt-6 pt-5 border-t border-slate-100"},Zj={class:"flex flex-col sm:flex-row gap-3"},eH=["placeholder","disabled"],tH=["disabled"],sH={key:0,class:"text-red-500 text-xs mt-2"},rH={key:1,class:"text-emerald-600 text-xs mt-2"},nH={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},iH={class:"bg-white rounded-2xl shadow-sm overflow-hidden"},oH={class:"flex justify-between items-center p-5 border-b border-slate-100"},aH={class:"flex items-center gap-3"},lH={class:"text-base font-semibold text-slate-900"},cH={class:"text-xs text-slate-500"},uH={class:"p-5"},dH={class:"grid grid-cols-2 gap-4 mb-4"},hH={class:"block text-xs font-medium text-slate-600 mb-2"},fH=["placeholder"],pH={key:1,class:"px-4 py-3 bg-slate-50 rounded-xl text-sm text-slate-900"},mH={class:"block text-xs font-medium text-slate-600 mb-2"},gH=["placeholder"],yH={key:1,class:"px-4 py-3 bg-slate-50 rounded-xl text-sm text-slate-900"},vH={class:"flex items-center gap-2 text-xs font-medium text-slate-600 mb-2"},_H={class:"inline-flex items-center gap-1 px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-[10px] font-semibold"},bH=["disabled"],wH={key:0,class:"flex justify-end gap-3 mt-4 pt-4 border-t border-slate-100"},SH={key:0,class:"bg-white rounded-2xl shadow-sm overflow-hidden"},EH={class:"flex items-center gap-3 p-5 border-b border-slate-100"},TH={class:"text-base font-semibold text-slate-900"},kH={class:"text-xs text-slate-500"},IH={class:"p-5"},CH={class:"space-y-4"},AH={class:"block text-xs font-medium text-slate-600 mb-2"},PH=["disabled"],xH={class:"block text-xs font-medium text-slate-600 mb-2"},LH=["disabled"],RH={class:"block text-xs font-medium text-slate-600 mb-2"},NH=["disabled"],OH={class:"flex justify-between items-center mt-4 pt-4 border-t border-slate-100"},MH=["disabled"],DH={class:"bg-white rounded-2xl shadow-sm overflow-hidden"},$H={class:"flex items-center gap-3 p-5 border-b border-slate-100 bg-red-50"},UH={class:"text-base font-semibold text-slate-900"},FH={class:"text-xs text-slate-500"},VH={class:"p-5 flex flex-col sm:flex-row gap-4"},BH={class:"flex-1 flex items-center justify-between gap-4 p-4 bg-slate-50 rounded-xl"},qH={class:"text-sm font-semibold text-slate-900"},jH={class:"text-xs text-slate-500"},HH={class:"flex-1 flex items-center justify-between gap-4 p-4 bg-slate-50 rounded-xl"},WH={class:"text-sm font-semibold text-slate-900"},zH={class:"text-xs text-slate-500"},GH={class:"bg-white rounded-2xl max-w-md w-full overflow-hidden shadow-2xl"},KH={class:"flex justify-between items-center p-5 border-b border-slate-100"},YH={class:"text-lg font-semibold text-slate-900"},QH={class:"p-5"},XH={class:"text-slate-700 mb-3"},JH={class:"text-red-500 font-medium"},ZH={class:"flex justify-end gap-3 p-5 bg-slate-50"};function eW(t,e,s,r,n,i){const o=Ht("LanguageSwitcher");return v(),S("div",qq,[a("main",jq,[a("header",Hq,[a("div",Wq,[a("button",{onClick:e[0]||(e[0]=(...l)=>r.goToProfile&&r.goToProfile(...l)),class:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 rounded-xl text-slate-700 font-medium transition-all"},[e[24]||(e[24]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)),a("span",null,m(t.$t("common.back")),1)]),a("div",null,[a("h1",zq,m(t.$t("settings.accountSettings")),1),a("p",Gq,m(t.$t("settings.manageProfile")),1)])]),a("div",Kq,[xe(o,{compact:!0}),a("button",{onClick:e[1]||(e[1]=(...l)=>r.saveChanges&&r.saveChanges(...l)),disabled:r.loading,class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg shadow-indigo-500/25 transition-all disabled:opacity-60 disabled:cursor-not-allowed"},[e[25]||(e[25]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),a("polyline",{points:"17 21 17 13 7 13 7 21"}),a("polyline",{points:"7 3 7 8 15 8"})],-1)),a("span",null,m(t.$t("common.save")),1)],8,Yq)])]),a("div",Qq,[a("div",Xq,[e[26]||(e[26]=a("div",{class:"w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white flex-shrink-0"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})])],-1)),a("div",Jq,[a("p",Zq,m(t.$t("settings.plan")),1),a("h3",ej,m(r.currentPlan!=="free"?"Pro":"Free"),1)])]),a("div",tj,[e[27]||(e[27]=a("div",{class:"w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-teal-400 to-emerald-500 text-white flex-shrink-0"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1)),a("div",sj,[a("p",rj,m(t.$t("settings.messages")),1),a("h3",nj,[se(m(r.currentUsageMessages),1),a("span",ij,"/"+m(r.usageLimitsMessages===-1?"":r.usageLimitsMessages),1)])])]),a("div",oj,[e[28]||(e[28]=at('<div class="w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-pink-500 to-orange-500 text-white flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div>',1)),a("div",aj,[a("p",lj,m(t.$t("settings.images")),1),a("h3",cj,[se(m(r.currentUsageImages),1),a("span",uj,"/"+m(r.usageLimitsImages===-1?"":r.usageLimitsImages),1)])])]),a("div",dj,[e[29]||(e[29]=at('<div class="w-10 h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-sky-400 to-cyan-500 text-white flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg></div>',1)),a("div",hj,[a("p",fj,m(t.$t("settings.daysLeft")),1),a("h3",pj,m(r.currentPlan!=="free"&&r.subscriptionExpiryInfo?r.subscriptionExpiryInfo.daysRemaining:""),1)])])]),a("div",mj,[a("div",gj,[e[30]||(e[30]=a("div",{class:"w-10 h-10 flex items-center justify-center bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),a("h2",yj,m(t.$t("settings.subscriptionPlans")),1),a("p",vj,m(t.$t("settings.chooseBestPlan")),1)]),a("div",_j,[a("div",bj,[a("div",wj,[a("div",Sj,[a("h3",Ej,m(t.$t("settings.oneMonth")),1),e[34]||(e[34]=a("div",{class:"text-2xl font-bold text-indigo-600 mt-2"},"250,000",-1)),a("div",Tj,m(t.$t("settings.uzs")),1),a("ul",kj,[a("li",Ij,[e[31]||(e[31]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.unlimitedMessages")),1)]),a("li",Cj,[e[32]||(e[32]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.unlimitedImages")),1)]),a("li",Aj,[e[33]||(e[33]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.aiTutorAccess")),1)])]),a("button",{onClick:e[2]||(e[2]=l=>r.goToUpgrade(1)),disabled:r.currentPlan!=="free",class:"w-full py-2.5 mt-4 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},m(r.currentPlan==="free"?t.$t("tariffs.getStarted"):t.$t("common.active")),9,Pj)])]),a("div",xj,[a("div",Lj,m(t.$t("tariffs.popular")),1),a("div",Rj,[a("h3",Nj,m(t.$t("settings.threeMonths")),1),e[38]||(e[38]=a("div",{class:"text-2xl font-bold text-indigo-600 mt-2"},"675,000",-1)),a("div",Oj,m(t.$t("settings.uzs")),1),a("div",Mj,m(t.$t("tariffs.save",{percent:10})),1),a("ul",Dj,[a("li",$j,[e[35]||(e[35]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.unlimitedMessages")),1)]),a("li",Uj,[e[36]||(e[36]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.unlimitedImages")),1)]),a("li",Fj,[e[37]||(e[37]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.aiTutorAnalytics")),1)])]),a("button",{onClick:e[3]||(e[3]=l=>r.goToUpgrade(3)),disabled:r.currentPlan!=="free",class:"w-full py-2.5 mt-4 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},m(r.currentPlan==="free"?t.$t("tariffs.bestValue"):t.$t("common.active")),9,Vj)])]),a("div",Bj,[a("div",qj,m(t.$t("settings.bestDeal")),1),a("div",jj,[a("h3",Hj,m(t.$t("settings.sixMonths")),1),e[42]||(e[42]=a("div",{class:"text-2xl font-bold text-indigo-600 mt-2"},"1,200,000",-1)),a("div",Wj,m(t.$t("settings.uzs")),1),a("div",zj,m(t.$t("tariffs.save",{percent:20})),1),a("ul",Gj,[a("li",Kj,[e[39]||(e[39]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.unlimitedEverything")),1)]),a("li",Yj,[e[40]||(e[40]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.prioritySupportPlan")),1)]),a("li",Qj,[e[41]||(e[41]=a("svg",{class:"w-4 h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),se(" "+m(t.$t("settings.customCourses")),1)])]),a("button",{onClick:e[4]||(e[4]=l=>r.goToUpgrade(6)),disabled:r.currentPlan!=="free",class:"w-full py-2.5 mt-4 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},m(r.currentPlan==="free"?t.$t("settings.getPro"):t.$t("common.active")),9,Xj)])])]),a("div",Jj,[a("div",Zj,[Pe(a("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>r.promocode=l),class:"flex-1 px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all disabled:opacity-70 disabled:cursor-not-allowed",placeholder:t.$t("settings.enterPromocode"),disabled:r.applyingPromo||r.currentPlan!=="free"},null,8,eH),[[Ke,r.promocode]]),a("button",{onClick:e[6]||(e[6]=(...l)=>r.applyPromocode&&r.applyPromocode(...l)),class:"px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",disabled:!r.promocode||r.applyingPromo||r.currentPlan!=="free"},m(r.applyingPromo?t.$t("settings.applying"):t.$t("settings.applyCode")),9,tH)]),r.promoError?(v(),S("p",sH,m(r.promoError),1)):G("",!0),r.promoSuccess?(v(),S("p",rH,m(r.promoSuccess),1)):G("",!0)])])]),a("div",nH,[a("div",iH,[a("div",oH,[a("div",aH,[e[43]||(e[43]=a("div",{class:"w-10 h-10 flex items-center justify-center bg-slate-100 rounded-xl text-indigo-500"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a("circle",{cx:"12",cy:"7",r:"4"})])],-1)),a("div",null,[a("h2",lH,m(t.$t("settings.personalInformation")),1),a("p",cH,m(t.$t("settings.updatePersonal")),1)])]),r.isEditingName?G("",!0):(v(),S("button",{key:0,onClick:e[7]||(e[7]=(...l)=>r.startEditingName&&r.startEditingName(...l)),class:"w-9 h-9 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-500 hover:text-slate-700 transition-all"},e[44]||(e[44]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])))]),a("div",uH,[a("div",dH,[a("div",null,[a("label",hH,m(t.$t("userSection.firstName")),1),r.isEditingName?Pe((v(),S("input",{key:0,type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>r.tempUser.name=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:t.$t("userSection.firstName")},null,8,fH)),[[Ke,r.tempUser.name]]):(v(),S("div",pH,m(r.user.name||t.$t("settings.notSpecified")),1))]),a("div",null,[a("label",mH,m(t.$t("userSection.lastName")),1),r.isEditingName?Pe((v(),S("input",{key:0,type:"text","onUpdate:modelValue":e[9]||(e[9]=l=>r.tempUser.surname=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:t.$t("userSection.lastName")},null,8,gH)),[[Ke,r.tempUser.surname]]):(v(),S("div",yH,m(r.user.surname||t.$t("settings.notSpecified")),1))])]),a("div",null,[a("label",vH,[se(m(t.$t("userSection.email"))+" ",1),a("span",_H,[e[45]||(e[45]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[a("polyline",{points:"20 6 9 17 4 12"})],-1)),se(" "+m(t.$t("common.verified")),1)])]),Pe(a("input",{type:"email","onUpdate:modelValue":e[10]||(e[10]=l=>r.user.email=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent rounded-xl text-sm text-slate-900 outline-none transition-all disabled:opacity-70 disabled:cursor-not-allowed",disabled:!r.isEditingName},null,8,bH),[[Ke,r.user.email]])]),r.isEditingName?(v(),S("div",wH,[a("button",{onClick:e[11]||(e[11]=(...l)=>r.cancelEditingName&&r.cancelEditingName(...l)),class:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-all text-sm"},m(t.$t("common.cancel")),1),a("button",{onClick:e[12]||(e[12]=(...l)=>r.saveNameChanges&&r.saveNameChanges(...l)),class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl transition-all text-sm"},m(t.$t("common.save")),1)])):G("",!0)])]),r.isGoogleUser?G("",!0):(v(),S("div",SH,[a("div",EH,[e[46]||(e[46]=a("div",{class:"w-10 h-10 flex items-center justify-center bg-slate-100 rounded-xl text-indigo-500"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})])],-1)),a("div",null,[a("h2",TH,m(t.$t("settings.security")),1),a("p",kH,m(t.$t("settings.changePassword")),1)])]),a("div",IH,[a("div",CH,[a("div",null,[a("label",AH,m(t.$t("settings.currentPassword")),1),Pe(a("input",{type:"password","onUpdate:modelValue":e[13]||(e[13]=l=>r.oldPassword=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:"",disabled:r.loading},null,8,PH),[[Ke,r.oldPassword]])]),a("div",null,[a("label",xH,m(t.$t("settings.newPassword")),1),Pe(a("input",{type:"password","onUpdate:modelValue":e[14]||(e[14]=l=>r.newPassword=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:"",disabled:r.loading},null,8,LH),[[Ke,r.newPassword]])]),a("div",null,[a("label",RH,m(t.$t("settings.confirmPassword")),1),Pe(a("input",{type:"password","onUpdate:modelValue":e[15]||(e[15]=l=>r.confirmPassword=l),class:"w-full px-4 py-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 focus:bg-white rounded-xl text-sm text-slate-900 outline-none transition-all",placeholder:"",disabled:r.loading},null,8,NH),[[Ke,r.confirmPassword]])])]),a("div",OH,[a("button",{onClick:e[16]||(e[16]=(...l)=>r.sendPasswordReset&&r.sendPasswordReset(...l)),class:"text-indigo-500 hover:text-indigo-600 font-medium text-sm hover:underline"},m(t.$t("settings.forgotPassword")),1),a("button",{onClick:e[17]||(e[17]=(...l)=>r.saveChanges&&r.saveChanges(...l)),class:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl transition-all text-sm disabled:opacity-60",disabled:r.loading},m(r.loading?t.$t("settings.updating"):t.$t("settings.update")),9,MH)])])]))]),a("div",DH,[a("div",$H,[e[47]||(e[47]=at('<div class="w-10 h-10 flex items-center justify-center bg-red-100 rounded-xl text-red-600"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></div>',1)),a("div",null,[a("h2",UH,m(t.$t("settings.dangerZone")),1),a("p",FH,m(t.$t("settings.irreversibleActions")),1)])]),a("div",VH,[a("div",BH,[a("div",null,[a("h4",qH,m(t.$t("settings.signOut")),1),a("p",jH,m(t.$t("settings.signOutDesc")),1)]),a("button",{onClick:e[18]||(e[18]=(...l)=>r.handleLogout&&r.handleLogout(...l)),class:"px-4 py-2 border-2 border-red-500 text-red-500 hover:bg-red-500 hover:text-white font-semibold rounded-xl transition-all text-sm whitespace-nowrap"},m(t.$t("settings.signOut")),1)]),a("div",HH,[a("div",null,[a("h4",WH,m(t.$t("settings.deleteAccount")),1),a("p",zH,m(t.$t("settings.deleteAccountDesc")),1)]),a("button",{onClick:e[19]||(e[19]=(...l)=>r.confirmDeleteAccount&&r.confirmDeleteAccount(...l)),class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition-all text-sm whitespace-nowrap"},m(t.$t("common.delete")),1)])])])]),r.showDeleteModal?(v(),S("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-5",onClick:e[23]||(e[23]=vt(l=>r.showDeleteModal=!1,["self"]))},[a("div",GH,[a("div",KH,[a("h3",YH,m(t.$t("settings.deleteModalTitle")),1),a("button",{onClick:e[20]||(e[20]=l=>r.showDeleteModal=!1),class:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 text-2xl"},"")]),a("div",QH,[a("p",XH,m(t.$t("settings.deleteModalText")),1),a("p",JH,m(t.$t("settings.deleteModalWarning")),1)]),a("div",ZH,[a("button",{onClick:e[21]||(e[21]=l=>r.showDeleteModal=!1),class:"px-5 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-all"},m(t.$t("common.cancel")),1),a("button",{onClick:e[22]||(e[22]=(...l)=>r.deleteAccount&&r.deleteAccount(...l)),class:"px-5 py-2.5 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition-all"},m(t.$t("settings.deleteForever")),1)])])])):G("",!0)])}const HC=Je(Bq,[["render",eW]]),tW={components:{AcedSettings:HC,LanguageSwitcher:ov},setup(){const{t}=Gc();return{t}},data(){return{isModalOpen:!1,authMode:"register",dropdownOpen:!1,showSettings:!1,isLoading:!1,errorMessage:"",successMessage:"",loadingMessage:"",user:{name:"",surname:"",email:"",password:"",confirmPassword:""},Login:{email:"",password:""}}},computed:{...tn(["getUser"]),...tn("user",["userStatus","subscription","forceUpdateKey"]),currentUser(){return this.getUser},displayPlan(){var e,s,r,n;return(this.userStatus||((r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.userStatus)||((n=this.currentUser)==null?void 0:n.subscriptionPlan)||localStorage.getItem("userStatus")||localStorage.getItem("plan")||"free").toUpperCase()},planClass(){var e,s,r,n;return`badge-${(this.userStatus||((r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.userStatus)||((n=this.currentUser)==null?void 0:n.subscriptionPlan)||localStorage.getItem("userStatus")||localStorage.getItem("plan")||"free").toLowerCase()}`}},mounted(){this.loadingMessage=this.$t("common.loading"),jc(me,t=>{t&&!this.currentUser&&this.handleAuthStateChange(t)}),window.addEventListener("open-Login-modal",()=>{this.openModal("Login")}),window.addEventListener("userStatusChanged",this.handleStatusUpdate),window.addEventListener("subscriptionUpdated",this.handleStatusUpdate),window.addEventListener("forceUpdate",this.handleStatusUpdate),document.addEventListener("click",t=>{this.$el.contains(t.target)||(this.dropdownOpen=!1)})},beforeUnmount(){window.removeEventListener("userStatusChanged",this.handleStatusUpdate),window.removeEventListener("subscriptionUpdated",this.handleStatusUpdate),window.removeEventListener("forceUpdate",this.handleStatusUpdate)},methods:{...AE(["setUser","setFirebaseUserId","setToken"]),...YM(["LoginUser","logoutUser"]),handleStatusUpdate(){this.$forceUpdate()},getApiBase(){return window.location.hostname==="aced.live"?"https://api.aced.live":window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5000":"https://api.aced.live"},async saveUserToBackend(t,e,s={}){var r,n,i,o,l,c;try{const u=this.getApiBase(),d={uid:t.uid,firebaseId:t.uid,name:s.name||t.displayName||((r=t.email)==null?void 0:r.split("@")[0])||"User",email:t.email,Login:t.email,token:e,subscriptionPlan:s.subscriptionPlan||"free",emailVerified:t.emailVerified||!1,photoURL:t.photoURL||null,lastLoginAt:new Date().toISOString(),authProvider:((i=(n=t.providerData)==null?void 0:n[0])==null?void 0:i.providerId)||"firebase",...s},f=await ht({method:"POST",url:`${u}/api/users/save`,data:d,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},timeout:8e3});if(f.data&&f.data.success!==!1)return{success:!0,user:f.data.user||f.data.data||f.data,source:"backend"};throw new Error("Backend returned unsuccessful response")}catch(u){const d=((l=(o=u.response)==null?void 0:o.data)==null?void 0:l.message)||u.message;return{success:!0,user:{uid:t.uid,_id:t.uid,firebaseId:t.uid,email:t.email,name:s.name||t.displayName||((c=t.email)==null?void 0:c.split("@")[0])||"User",displayName:t.displayName||"",subscriptionPlan:s.subscriptionPlan||"free",userStatus:s.subscriptionPlan||"free",emailVerified:t.emailVerified||!1,photoURL:t.photoURL||null,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),authProvider:"firebase",backendSyncFailed:!0,syncError:d},source:"firebase-only",warning:"Backend synchronization failed, using Firebase-only mode"}}},async handleAuthStateChange(t){var e;try{this.loadingMessage=this.$t("common.loading");const s=await t.getIdToken(!0),r=await this.saveUserToBackend(t,s),n={name:r.user.name,email:t.email,uid:t.uid,subscriptionPlan:r.user.subscriptionPlan||"free",...r.user};this.setUserData(n,t.uid,s)}catch{try{const r={name:t.displayName||((e=t.email)==null?void 0:e.split("@")[0])||"User",email:t.email,uid:t.uid,subscriptionPlan:"free",authMode:"fallback"},n=await t.getIdToken(!0);this.setUserData(r,t.uid,n)}catch{this.showError(this.$t("errors.loginError"))}}},async handleEmailLogin(){if(!this.Login.email||!this.Login.password){this.showError(this.$t("errors.fillAllFields"));return}this.isLoading=!0,this.clearMessages(),this.loadingMessage=this.$t("userSection.signingIn");try{const t=await jk(me,this.Login.email,this.Login.password);this.loadingMessage=this.$t("common.loading"),await this.handleAuthStateChange(t.user),this.showSuccess(this.$t("success.signedIn")),setTimeout(()=>{this.closeModal()},1e3)}catch(t){let e=this.$t("errors.loginError");t.code==="auth/user-not-found"?e=this.$t("errors.userNotFound"):t.code==="auth/wrong-password"||t.code==="auth/invalid-credential"?e=this.$t("errors.invalidPassword"):t.code==="auth/invalid-email"?e=this.$t("errors.invalidEmail"):t.code==="auth/too-many-requests"?e=this.$t("errors.tooManyAttempts"):t.code==="auth/user-disabled"?e=this.$t("errors.accountDisabled"):t.code==="auth/network-request-failed"&&(e=this.$t("errors.networkError")),this.showError(e)}finally{this.isLoading=!1}},async LoginWithGoogle(){if(!this.isLoading){this.isLoading=!0,this.clearMessages(),this.loadingMessage=this.$t("common.loading");try{const t=new zr,e=await tI(me,t);this.loadingMessage=this.$t("common.loading"),await this.handleAuthStateChange(e.user),this.showSuccess(this.$t("success.signedInGoogle")),setTimeout(()=>{this.closeModal(),this.$router.push("/profile")},1e3)}catch(t){let e=this.$t("errors.googleSignInError");t.code==="auth/popup-closed-by-user"?e=this.$t("errors.popupClosed"):t.code==="auth/popup-blocked"?e=this.$t("errors.popupBlocked"):t.code==="auth/network-request-failed"&&(e=this.$t("errors.networkError")),this.showError(e)}finally{this.isLoading=!1}}},async register(){if(!this.user.name||!this.user.email||!this.user.password){this.showError(this.$t("errors.fillAllFields"));return}if(this.user.password!==this.user.confirmPassword){this.showError(this.$t("errors.passwordsMismatch"));return}if(this.user.password.length<6){this.showError(this.$t("errors.passwordMinLength"));return}this.isLoading=!0,this.clearMessages(),this.loadingMessage=this.$t("userSection.registering");try{const e=(await qk(me,this.user.email,this.user.password)).user;this.loadingMessage=this.$t("common.loading");const s={name:this.user.name,surname:this.user.surname,subscriptionPlan:"free"},r=await e.getIdToken(!0),n=await this.saveUserToBackend(e,r,s),i={name:n.user.name||this.user.name,email:e.email,uid:e.uid,subscriptionPlan:n.user.subscriptionPlan||"free",...n.user};this.setUserData(i,e.uid,r),this.showSuccess(this.$t("success.registrationSuccess")),setTimeout(()=>{this.closeModal()},1500)}catch(t){let e=this.$t("errors.registrationError");t.code==="auth/email-already-in-use"?e=this.$t("errors.emailInUse"):t.code==="auth/invalid-email"?e=this.$t("errors.invalidEmail"):t.code==="auth/weak-password"?e=this.$t("errors.weakPassword"):t.code==="auth/network-request-failed"&&(e=this.$t("errors.networkError")),this.showError(e)}finally{this.isLoading=!1}},setUserData(t,e,s){this.setUser(t),this.setFirebaseUserId(e),this.setToken(s),localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("firebaseUserId",e),localStorage.setItem("token",s),localStorage.setItem("plan",t.subscriptionPlan||"free")},openModal(t){this.authMode=t,this.isModalOpen=!0,this.clearMessages()},closeModal(){this.isModalOpen=!1,this.resetForms(),this.clearMessages()},switchAuth(t){this.authMode=t,this.resetForms(),this.clearMessages()},toggleDropdown(){this.dropdownOpen=!this.dropdownOpen},clearMessages(){this.errorMessage="",this.successMessage=""},showError(t){this.errorMessage=t,this.successMessage="",setTimeout(()=>this.clearMessages(),5e3)},showSuccess(t){this.successMessage=t,this.errorMessage="",setTimeout(()=>this.clearMessages(),3e3)},async logout(){try{await me.signOut(),this.logoutUser(),this.dropdownOpen=!1,localStorage.clear(),this.$route.path!=="/"&&this.$router.push("/")}catch{}},resetForms(){this.user={name:"",surname:"",email:"",password:"",confirmPassword:""},this.Login={email:"",password:""}}}},sW={class:"user-section-wrapper"},rW={key:0,class:"auth-buttons"},nW={class:"btn-text"},iW={class:"btn-text"},oW={key:1,class:"user-section"},aW={class:"user-menu"},lW={class:"user-greeting"},cW={key:0,class:"loading-state"},uW={key:1,class:"auth-form"},dW={class:"modal-header"},hW={class:"modal-subtitle"},fW={class:"form-group"},pW=["placeholder","disabled"],mW={class:"form-group"},gW=["placeholder","disabled"],yW={class:"form-group"},vW=["placeholder","disabled"],_W={class:"form-group"},bW=["placeholder","disabled"],wW={class:"form-group"},SW=["placeholder","disabled"],EW=["disabled"],TW={class:"divider"},kW=["disabled"],IW={class:"switch-text"},CW={key:2,class:"auth-form"},AW={class:"modal-header"},PW={class:"modal-subtitle"},xW={class:"form-group"},LW=["placeholder","disabled"],RW={class:"form-group"},NW=["placeholder","disabled"],OW=["disabled"],MW={class:"divider"},DW=["disabled"],$W={class:"switch-text"},UW={key:3,class:"error-message"},FW={key:4,class:"success-message"};function VW(t,e,s,r,n,i){const o=Ht("LanguageSwitcher"),l=Ht("AcedSettings");return v(),S("div",sW,[xe(o,{compact:!0}),i.currentUser?(v(),S("div",oW,[a("button",{class:"auth-btn profile-btn",onClick:e[2]||(e[2]=c=>t.$router.push("/profile"))},[e[26]||(e[26]=a("span",{class:"profile-icon"},"",-1)),a("span",null,m(t.$t("userSection.profile")),1)]),a("div",aW,[a("button",{class:ge(["user-button",{active:n.dropdownOpen}]),onClick:e[3]||(e[3]=(...c)=>i.toggleDropdown&&i.toggleDropdown(...c))},[a("span",lW,m(t.$t("userSection.greeting",{name:i.currentUser.name})),1),a("span",{class:ge(["badge",i.planClass])},m(i.displayPlan),3),a("span",{class:ge(["dropdown-arrow",{rotated:n.dropdownOpen}])},"",2)],2),n.dropdownOpen?(v(),S("div",{key:0,class:"dropdown-menu show",onClick:e[6]||(e[6]=vt(()=>{},["stop"]))},[a("ul",null,[a("li",{onClick:e[4]||(e[4]=c=>t.$router.push("/settings"))},[e[27]||(e[27]=a("span",{class:"menu-icon"},"",-1)),a("span",null,m(t.$t("userSection.settings")),1)]),a("li",{onClick:e[5]||(e[5]=(...c)=>i.logout&&i.logout(...c))},[e[28]||(e[28]=a("span",{class:"menu-icon"},"",-1)),a("span",null,m(t.$t("userSection.logout")),1)])])])):G("",!0)])])):(v(),S("div",rW,[a("button",{class:"auth-btn login-btn",onClick:e[0]||(e[0]=c=>i.openModal("Login"))},[a("span",nW,m(t.$t("userSection.login")),1),e[24]||(e[24]=a("span",{class:"btn-icon"},"",-1))]),a("button",{class:"auth-btn register-btn",onClick:e[1]||(e[1]=c=>i.openModal("register"))},[a("span",iW,m(t.$t("userSection.register")),1),e[25]||(e[25]=a("span",{class:"btn-glow"},null,-1))])])),n.isModalOpen?(v(),S("div",{key:2,class:"global-auth-modal",onClick:e[22]||(e[22]=(...c)=>i.closeModal&&i.closeModal(...c))},[a("div",{class:"modal-content",onClick:e[21]||(e[21]=vt(()=>{},["stop"]))},[a("button",{class:"close-btn",onClick:e[7]||(e[7]=(...c)=>i.closeModal&&i.closeModal(...c))},e[29]||(e[29]=[a("span",null,"",-1)])),n.isLoading?(v(),S("div",cW,[e[30]||(e[30]=a("div",{class:"loader-spinner"},null,-1)),a("p",null,m(n.loadingMessage),1)])):n.authMode==="register"?(v(),S("div",uW,[a("div",dW,[a("h2",null,m(t.$t("userSection.createAccount")),1),a("p",hW,m(t.$t("userSection.startJourney")),1)]),a("div",fW,[Pe(a("input",{"onUpdate:modelValue":e[8]||(e[8]=c=>n.user.name=c),placeholder:t.$t("userSection.firstName"),disabled:n.isLoading,class:"form-input"},null,8,pW),[[Ke,n.user.name]])]),a("div",mW,[Pe(a("input",{"onUpdate:modelValue":e[9]||(e[9]=c=>n.user.surname=c),placeholder:t.$t("userSection.lastName"),disabled:n.isLoading,class:"form-input"},null,8,gW),[[Ke,n.user.surname]])]),a("div",yW,[Pe(a("input",{"onUpdate:modelValue":e[10]||(e[10]=c=>n.user.email=c),type:"email",placeholder:t.$t("userSection.email"),disabled:n.isLoading,class:"form-input"},null,8,vW),[[Ke,n.user.email]])]),a("div",_W,[Pe(a("input",{"onUpdate:modelValue":e[11]||(e[11]=c=>n.user.password=c),type:"password",placeholder:t.$t("userSection.password"),disabled:n.isLoading,class:"form-input"},null,8,bW),[[Ke,n.user.password]])]),a("div",wW,[Pe(a("input",{"onUpdate:modelValue":e[12]||(e[12]=c=>n.user.confirmPassword=c),type:"password",placeholder:t.$t("userSection.confirmPassword"),disabled:n.isLoading,class:"form-input"},null,8,SW),[[Ke,n.user.confirmPassword]])]),a("button",{class:"auth-submit",onClick:e[13]||(e[13]=(...c)=>i.register&&i.register(...c)),disabled:n.isLoading},[a("span",null,m(n.isLoading?t.$t("userSection.registering"):t.$t("userSection.signUp")),1),e[31]||(e[31]=a("span",{class:"submit-glow"},null,-1))],8,EW),a("div",TW,[a("span",null,m(t.$t("common.or")),1)]),a("button",{class:"google-auth",onClick:e[14]||(e[14]=(...c)=>i.LoginWithGoogle&&i.LoginWithGoogle(...c)),disabled:n.isLoading},[e[32]||(e[32]=at('<svg class="google-icon" viewBox="0 0 24 24" data-v-a35204fd><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-a35204fd></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-a35204fd></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-a35204fd></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-a35204fd></path></svg>',1)),a("span",null,m(n.isLoading?t.$t("common.loading"):t.$t("userSection.continueWithGoogle")),1)],8,kW),a("p",IW,[se(m(t.$t("userSection.alreadyHaveAccount"))+" ",1),a("span",{class:"switch-link",onClick:e[15]||(e[15]=c=>i.switchAuth("Login"))},m(t.$t("userSection.signIn")),1)])])):(v(),S("div",CW,[a("div",AW,[a("h2",null,m(t.$t("userSection.welcomeBack")),1),a("p",PW,m(t.$t("userSection.continuelearning")),1)]),a("div",xW,[Pe(a("input",{"onUpdate:modelValue":e[16]||(e[16]=c=>n.Login.email=c),type:"email",placeholder:t.$t("userSection.email"),disabled:n.isLoading,class:"form-input"},null,8,LW),[[Ke,n.Login.email]])]),a("div",RW,[Pe(a("input",{"onUpdate:modelValue":e[17]||(e[17]=c=>n.Login.password=c),type:"password",placeholder:t.$t("userSection.password"),disabled:n.isLoading,class:"form-input"},null,8,NW),[[Ke,n.Login.password]])]),a("button",{class:"auth-submit",onClick:e[18]||(e[18]=(...c)=>i.handleEmailLogin&&i.handleEmailLogin(...c)),disabled:n.isLoading},[a("span",null,m(n.isLoading?t.$t("userSection.signingIn"):t.$t("userSection.signIn")),1),e[33]||(e[33]=a("span",{class:"submit-glow"},null,-1))],8,OW),a("div",MW,[a("span",null,m(t.$t("common.or")),1)]),a("button",{class:"google-auth",onClick:e[19]||(e[19]=(...c)=>i.LoginWithGoogle&&i.LoginWithGoogle(...c)),disabled:n.isLoading},[e[34]||(e[34]=at('<svg class="google-icon" viewBox="0 0 24 24" data-v-a35204fd><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-a35204fd></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-a35204fd></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-a35204fd></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-a35204fd></path></svg>',1)),a("span",null,m(n.isLoading?t.$t("common.loading"):t.$t("userSection.continueWithGoogle")),1)],8,DW),a("p",$W,[se(m(t.$t("userSection.dontHaveAccount"))+" ",1),a("span",{class:"switch-link",onClick:e[20]||(e[20]=c=>i.switchAuth("register"))},m(t.$t("userSection.signUp")),1)])])),n.errorMessage?(v(),S("div",UW,[e[35]||(e[35]=a("span",{class:"message-icon"},"",-1)),a("span",null,m(n.errorMessage),1)])):G("",!0),n.successMessage?(v(),S("div",FW,[e[36]||(e[36]=a("span",{class:"message-icon"},"",-1)),a("span",null,m(n.successMessage),1)])):G("",!0)])])):G("",!0),n.showSettings?(v(),Yt(l,{key:3,onCloseSettings:e[23]||(e[23]=c=>n.showSettings=!1)})):G("",!0)])}const BW=Je(tW,[["render",VW],["__scopeId","data-v-a35204fd"]]),av="/assets/logo-By_ePmiu.png",qW={components:{UserSection:BW},methods:{handleStartFree(){const t=document.getElementById("aced");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},handleRegister(){window.dispatchEvent(new Event("open-Login-modal"))}}},jW={class:"bg-white relative overflow-hidden"},HW={class:"flex items-center justify-between px-6 lg:px-16 py-5 max-w-7xl mx-auto relative"},WW={class:"max-w-7xl mx-auto px-6 lg:px-16 pb-20 relative"},zW={class:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center py-8 lg:py-12"},GW={class:"relative"},KW={class:"inline-flex items-center gap-2 px-4 py-2 bg-violet-50 rounded-full border border-violet-100 mb-8"},YW={class:"text-sm font-medium text-violet-700"},QW={class:"flex flex-col gap-6 mb-10"},XW={class:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 leading-[1.15] tracking-tight"},JW={class:"relative inline-block"},ZW={class:"relative z-10 text-violet-600"},ez={class:"text-lg lg:text-xl text-gray-500 leading-relaxed max-w-md"},tz={class:"flex flex-col sm:flex-row gap-3 mb-10"},sz={class:"flex flex-wrap gap-6 sm:gap-8 pt-6 border-t border-gray-100"},rz={class:"flex items-center gap-3"},nz={class:"text-sm text-gray-500"},iz={class:"flex items-center gap-3"},oz={class:"text-sm text-gray-500"},az={class:"flex items-center gap-3"},lz={class:"text-sm text-gray-500"},cz={class:"relative hidden lg:block"},uz={class:"bg-white rounded-3xl shadow-2xl shadow-gray-200/50 p-8 border border-gray-100 relative"},dz={class:"space-y-5 relative"},hz={class:"flex items-center gap-4 p-4 bg-gray-50 rounded-2xl"},fz={class:"flex-1"},pz={class:"font-semibold text-gray-900"},mz={class:"text-sm text-gray-500"},gz={class:"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full"},yz={class:"flex items-center gap-4 p-4 bg-gray-50 rounded-2xl"},vz={class:"flex-1"},_z={class:"font-semibold text-gray-900"},bz={class:"text-sm text-gray-500"},wz={class:"px-3 py-1 bg-violet-100 text-violet-700 text-xs font-semibold rounded-full"},Sz={class:"flex items-center gap-4 p-4 bg-gray-50 rounded-2xl"},Ez={class:"flex-1"},Tz={class:"font-semibold text-gray-900"},kz={class:"text-sm text-gray-500"},Iz={class:"px-3 py-1 bg-violet-100 text-violet-700 text-xs font-semibold rounded-full"},Cz={class:"mt-6 pt-6 border-t border-gray-100 flex items-center justify-between"},Az={class:"flex items-center gap-2"},Pz={class:"text-sm text-gray-500"};function xz(t,e,s,r,n,i){const o=Ht("UserSection");return v(),S("div",jW,[e[18]||(e[18]=a("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-violet-200/20 rounded-full blur-3xl z-0"},null,-1)),a("nav",HW,[e[2]||(e[2]=a("img",{src:av,alt:"ACED",class:"h-10 lg:h-12"},null,-1)),xe(o)]),a("div",WW,[a("div",zW,[a("div",GW,[e[11]||(e[11]=a("div",{class:"absolute inset-0 bg-linear-to-b from-violet-50/50 to-white pointer-events-none"},null,-1)),a("div",KW,[e[3]||(e[3]=a("span",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1)),a("span",YW,m(t.$t("heroSection.studentsLearning",{count:"2,800"})),1)]),a("div",QW,[a("h1",XW,[se(m(t.$t("heroSection.headline"))+" ",1),a("span",JW,[a("span",ZW,m(t.$t("heroSection.headlineHighlight")),1),e[4]||(e[4]=a("span",{class:"absolute bottom-2 left-0 w-full h-3 bg-violet-200/60 -z-0 rounded"},null,-1))])]),a("p",ez,m(t.$t("heroSection.subtitle")),1)]),a("div",tz,[a("button",{onClick:e[0]||(e[0]=(...l)=>i.handleStartFree&&i.handleStartFree(...l)),class:"px-8 py-3 bg-violet-600 text-white text-base font-semibold rounded-xl hover:bg-violet-700 transition-colors shadow-lg shadow-violet-600/25"},m(t.$t("heroSection.startFree")),1),a("button",{onClick:e[1]||(e[1]=(...l)=>i.handleRegister&&i.handleRegister(...l)),class:"px-8 py-3 bg-white text-gray-700 text-base font-semibold rounded-xl border-2 border-gray-200 hover:border-violet-400 hover:text-violet-600 transition-all"},m(t.$t("heroSection.registerAndSave")),1)]),a("div",sz,[a("div",rz,[e[6]||(e[6]=a("div",{class:"w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center"},[a("svg",{class:"w-5 h-5 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),a("div",null,[e[5]||(e[5]=a("div",{class:"text-xl font-bold text-gray-900"},"100+",-1)),a("div",nz,m(t.$t("heroSection.courses")),1)])]),a("div",iz,[e[8]||(e[8]=a("div",{class:"w-12 h-12 rounded-xl bg-orange-100 flex items-center justify-center text-2xl shrink-0"},[a("svg",{class:"w-5 h-5 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),a("div",null,[e[7]||(e[7]=a("div",{class:"text-xl font-bold text-gray-900"},"24/7",-1)),a("div",oz,m(t.$t("heroSection.aiSupport")),1)])]),a("div",az,[e[10]||(e[10]=a("div",{class:"w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center text-2xl shrink-0"},[a("svg",{class:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("div",null,[e[9]||(e[9]=a("div",{class:"text-xl font-bold text-gray-900"},"95%",-1)),a("div",lz,m(t.$t("heroSection.completion")),1)])])])]),a("div",cz,[a("div",uz,[e[17]||(e[17]=a("div",{class:"absolute top-4 right-4 w-16 h-16 bg-amber-400 rounded-2xl rotate-12 opacity-20"},null,-1)),a("div",dz,[a("div",hz,[e[12]||(e[12]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center shrink-0"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1)),a("div",fz,[a("div",pz,m(t.$t("heroSection.mathematics")),1),a("div",mz,m(t.$t("heroSection.mathLessons")),1)]),a("span",gz,m(t.$t("common.free")),1)]),a("div",yz,[e[13]||(e[13]=a("div",{class:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center shrink-0"},[a("svg",{class:"w-7 h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})])],-1)),a("div",vz,[a("div",_z,m(t.$t("heroSection.languages")),1),a("div",bz,m(t.$t("heroSection.langLessons")),1)]),a("span",wz,m(t.$t("common.pro")),1)]),a("div",Sz,[e[14]||(e[14]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center shrink-0"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})])],-1)),a("div",Ez,[a("div",Tz,m(t.$t("heroSection.science")),1),a("div",kz,m(t.$t("heroSection.sciLessons")),1)]),a("span",Iz,m(t.$t("common.pro")),1)])]),a("div",Cz,[a("div",Az,[e[15]||(e[15]=a("div",{class:"flex -space-x-2"},[a("div",{class:"w-8 h-8 bg-violet-200 rounded-full border-2 border-white"}),a("div",{class:"w-8 h-8 bg-amber-200 rounded-full border-2 border-white"}),a("div",{class:"w-8 h-8 bg-green-200 rounded-full border-2 border-white"})],-1)),a("span",Pz,"2,800+ "+m(t.$t("heroSection.learners")),1)]),e[16]||(e[16]=a("div",{class:"flex items-center gap-1 text-amber-500"},[a("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),a("span",{class:"font-semibold"},"4.9")],-1))])])])])])])}const Lz=Je(qW,[["render",xz]]),Rz={name:"AboutUs"},Nz={class:"py-20 lg:py-24 bg-white"},Oz={class:"max-w-7xl mx-auto px-6 lg:px-16"},Mz={class:"text-center mb-20"},Dz={class:"inline-flex items-center gap-2 px-4 py-2 bg-violet-50 rounded-full border border-violet-100 mb-8"},$z={class:"text-sm font-medium text-violet-700"},Uz={class:"flex flex-col items-center gap-4"},Fz={class:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900"},Vz={class:"text-lg lg:text-xl text-gray-500 text-center max-w-2xl"},Bz={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-8"},qz={class:"bg-gray-50 rounded-2xl p-8 hover:bg-violet-50 transition-colors"},jz={class:"text-xl font-bold text-gray-900 mb-3"},Hz={class:"text-gray-500 leading-relaxed"},Wz={class:"bg-gray-50 rounded-2xl p-8 hover:bg-amber-50 transition-colors"},zz={class:"text-xl font-bold text-gray-900 mb-3"},Gz={class:"text-gray-500 leading-relaxed"},Kz={class:"bg-gray-50 rounded-2xl p-8 hover:bg-violet-50 transition-colors"},Yz={class:"text-xl font-bold text-gray-900 mb-3"},Qz={class:"text-gray-500 leading-relaxed"},Xz={class:"bg-gray-50 rounded-2xl p-8 hover:bg-amber-50 transition-colors"},Jz={class:"text-xl font-bold text-gray-900 mb-3"},Zz={class:"text-gray-500 leading-relaxed"},eG={class:"bg-gray-50 rounded-2xl p-8 hover:bg-violet-50 transition-colors"},tG={class:"text-xl font-bold text-gray-900 mb-3"},sG={class:"text-gray-500 leading-relaxed"},rG={class:"bg-gray-50 rounded-2xl p-8 hover:bg-amber-50 transition-colors"},nG={class:"text-xl font-bold text-gray-900 mb-3"},iG={class:"text-gray-500 leading-relaxed"},oG={class:"mt-20 grid grid-cols-2 lg:grid-cols-4 gap-8"},aG={class:"text-center"},lG={class:"text-gray-500 text-lg"},cG={class:"text-center"},uG={class:"text-gray-500 text-lg"},dG={class:"text-center"},hG={class:"text-gray-500 text-lg"},fG={class:"text-center"},pG={class:"text-gray-500 text-lg"};function mG(t,e,s,r,n,i){return v(),S("section",Nz,[a("div",Oz,[a("div",Mz,[a("div",Dz,[e[0]||(e[0]=a("span",{class:"w-2 h-2 bg-violet-500 rounded-full"},null,-1)),a("span",$z,m(t.$t("homepage.whyChooseUs")),1)]),a("div",Uz,[a("h2",Fz,m(t.$t("homepage.learningMadeSimple")),1),a("p",Vz,m(t.$t("homepage.learningMadeSimpleDesc")),1)])]),a("div",Bz,[a("div",qz,[e[1]||(e[1]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),a("h3",jz,m(t.$t("homepage.interactiveLearning")),1),a("p",Hz,m(t.$t("homepage.interactiveLearningDesc")),1)]),a("div",Wz,[e[2]||(e[2]=a("div",{class:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),a("h3",zz,m(t.$t("homepage.aiPoweredHelp")),1),a("p",Gz,m(t.$t("homepage.aiPoweredHelpDesc")),1)]),a("div",Kz,[e[3]||(e[3]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),a("h3",Yz,m(t.$t("homepage.trackProgress")),1),a("p",Qz,m(t.$t("homepage.trackProgressDesc")),1)]),a("div",Xz,[e[4]||(e[4]=a("div",{class:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),a("h3",Jz,m(t.$t("homepage.richContent")),1),a("p",Zz,m(t.$t("homepage.richContentDesc")),1)]),a("div",eG,[e[5]||(e[5]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("h3",tG,m(t.$t("homepage.learnAnytime")),1),a("p",sG,m(t.$t("homepage.learnAnytimeDesc")),1)]),a("div",rG,[e[6]||(e[6]=a("div",{class:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6"},[a("svg",{class:"w-7 h-7 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("h3",nG,m(t.$t("homepage.actuallyFun")),1),a("p",iG,m(t.$t("homepage.actuallyFunDesc")),1)])]),a("div",oG,[a("div",aG,[e[7]||(e[7]=a("div",{class:"text-5xl font-bold text-violet-600 mb-2"},"2,800+",-1)),a("div",lG,m(t.$t("homepage.activeStudents")),1)]),a("div",cG,[e[8]||(e[8]=a("div",{class:"text-5xl font-bold text-amber-500 mb-2"},"100+",-1)),a("div",uG,m(t.$t("homepage.courses")),1)]),a("div",dG,[e[9]||(e[9]=a("div",{class:"text-5xl font-bold text-violet-600 mb-2"},"95%",-1)),a("div",hG,m(t.$t("homepage.completionRate")),1)]),a("div",fG,[e[10]||(e[10]=a("div",{class:"text-5xl font-bold text-amber-500 mb-2"},"24/7",-1)),a("div",pG,m(t.$t("homepage.aiSupport")),1)])])])])}const WC=Je(Rz,[["render",mG]]),gG=Object.freeze(Object.defineProperty({__proto__:null,default:WC},Symbol.toStringTag,{value:"Module"}));function $n(t){return t?t.startsWith("data:")?t:t.startsWith("/uploads/")?`https://api.aced.live${t}`:t.startsWith("/")&&!t.startsWith("//")?`https://api.aced.live${t}`:(t.startsWith("http"),t):null}function ks(t){return Array.isArray(t)?t.filter(e=>e&&(e.url||e.base64)).map((e,s)=>{var r,n,i,o;return{id:e.id||`img_${s}`,url:$n(e.url||e.base64),caption:e.caption||"",alt:e.alt||e.caption||` ${s+1}`,filename:e.filename||`image_${s}`,size:e.size||0,order:e.order||s,displayOptions:{width:((r=e.displayOptions)==null?void 0:r.width)||e.width||"auto",height:((n=e.displayOptions)==null?void 0:n.height)||e.height||"auto",alignment:((i=e.displayOptions)==null?void 0:i.alignment)||e.alignment||"center",zoom:((o=e.displayOptions)==null?void 0:o.zoom)||!1}}}).sort((e,s)=>(e.order||0)-(s.order||0)):[]}function yG(t,e,s){const r=t.data||{};switch(t.type){case"explanation":case"example":case"reading":return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[])};case"image":return{...r,images:ks(r.images||t.images||[]),description:r.description||t.description||"",caption:r.caption||t.caption||""};case"practice":return{...r,instructions:r.instructions||t.instructions||t.content||"",type:r.type||"guided",images:ks(r.images||t.images||[])};case"quiz":return Array.isArray(r)&&r.length>0?r.map(n=>({...n,images:ks(n.images||[])})):t.question||t.content?[{question:t.question||t.content||"",type:t.quizType||"multiple-choice",options:(t.options||[]).map(n=>({text:n.text||n})),correctAnswer:parseInt(t.correctAnswer)||0,explanation:t.explanation||"",images:ks(t.questionImages||[])}]:t.quizzes&&Array.isArray(t.quizzes)?t.quizzes.map(n=>({...n,images:ks(n.images||[])})):[];default:return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[])}}}function vG(t,e,s){const r=t.data||{};switch(t.type){case"explanation":case"example":case"reading":return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[]),hasContent:!!(r.content||t.content)};case"image":return{...r,images:ks(r.images||t.images||[]),description:r.description||t.description||"",caption:r.caption||t.caption||"",imageCount:(r.images||t.images||[]).length};case"practice":return{...r,instructions:r.instructions||t.instructions||t.content||"",type:r.type||"guided",images:ks(r.images||t.images||[]),hasInstructions:!!(r.instructions||t.instructions||t.content)};case"quiz":let n=[];return Array.isArray(r)&&r.length>0?n=r.map(i=>({...i,images:ks(i.images||[])})):t.question||t.content?n=[{question:t.question||t.content||"",type:t.quizType||"multiple-choice",options:(t.options||[]).map(i=>({text:i.text||i})),correctAnswer:parseInt(t.correctAnswer)||0,explanation:t.explanation||"",images:ks(t.questionImages||[])}]:t.quizzes&&Array.isArray(t.quizzes)&&(n=t.quizzes.map(i=>({...i,images:ks(i.images||[])}))),{quizzes:n,questionCount:n.length,hasQuestions:n.length>0};default:return{...r,content:r.content||t.content||"",images:ks(r.images||t.images||[]),hasContent:!!(r.content||t.content)}}}function _G(t,e){return Array.isArray(t)?t.map((s,r)=>({...s,id:s.id||`step_${e}_${r}`,type:s.type||"explanation",title:s.title||"",description:s.description||"",content:s.content||"",images:ks(s.images||[]),data:yG(s)})):[]}function zC(t,e){return Array.isArray(t)?t.map((s,r)=>{var n;return{...s,id:s.id||`step_${e}_${r}`,type:s.type||"explanation",title:s.title||"",description:s.description||"",content:s.content||"",images:ks(s.images||[]),data:vG(s),hasContent:!!(s.content||(n=s.data)!=null&&n.content),hasImages:(s.images||[]).length>0,isInteractive:["quiz","practice"].includes(s.type)}}):[]}function bG(t){return Array.isArray(t)?t.map((e,s)=>{let r=e.steps||[];return(!r||r.length===0)&&e.description&&(r=[{type:"explanation",title:" ",content:e.description.replace(/\n/g,"<br />"),data:{content:e.description.replace(/\n/g,"<br />")}}]),{...e,id:e._id||e.id||`lesson_${s}`,title:e.title||` ${s+1}`,description:e.description||"",duration:e.duration||"30 ",order:e.order||s,steps:_G(r,s)}}):[]}function GC(t){const e={"  ":"https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=600&h=400&fit=crop"," ":"https://images.unsplash.com/photo-1626785774573-4b799315345d?w=600&h=400&fit=crop","Web-":"https://images.unsplash.com/photo-1547658719-da2b51169166?w=600&h=400&fit=crop"," ":"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=600&h=400&fit=crop"," ":"https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1609921212029-bb5a28e60960?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=600&h=400&fit=crop",:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop",default:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=600&h=400&fit=crop"};return e[t]||e.default}function KC(){return"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"}function wG(t){return typeof t=="string"?t:t!=null&&t.hours?`${t.hours} `:"10 "}function YC(t){if(typeof t=="string"){const e=t.match(/(\d+)/);return e?parseInt(e[1]):30}return 30}function SG(t){if(typeof t=="string"){const e=t.match(/(\d+)/);return e?parseInt(e[1]):10}return t!=null&&t.hours?t.hours:10}function EG(t){if(!t)return!1;const e=new Date(t),s=new Date(Date.now()-7*24*60*60*1e3);return e>s}function TG(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>r.type==="quiz"||r.type==="practice")}):!1}function kG(t){return Array.isArray(t)?t.reduce((e,s)=>{var r;return e+(((r=s.steps)==null?void 0:r.length)||0)},0):0}function IG(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>r.type==="quiz")}):!1}function CG(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>(r.images||[]).length>0)}):!1}function AG(t){return t.learningOutcomes&&t.learningOutcomes.length>0?t.learningOutcomes:{"  ":["  ","    "," ","  "],"Web-":["HTML, CSS  JavaScript"," "," ","  API"]," ":["   ","    ","  ","  "]}[t.category]||["    ","   ","  ","  "]}function PG(t){return t.curriculum&&t.curriculum.length>0?t.curriculum.map(e=>e.title):["  "," "," "," "," "]}function xG(t){return Array.isArray(t)?t.map((e,s)=>{var r,n;return{id:((r=e._id)==null?void 0:r.toString())||`lesson_${s}`,_id:((n=e._id)==null?void 0:n.toString())||`lesson_${s}`,title:e.title,lessonName:e.title,description:e.description,duration:e.duration||"30 ",order:e.order||s,steps:zC(e.steps||[],s),stepCount:(e.steps||[]).length,hasQuiz:(e.steps||[]).some(i=>i.type==="quiz"),hasImages:(e.steps||[]).some(i=>(i.images||[]).length>0),estimatedMinutes:YC(e.duration)}}):[]}function LG(t){return Array.isArray(t)?t.map((e,s)=>({...e,id:e._id||e.id||`lesson_${s}`,_id:e._id||e.id||`lesson_${s}`,title:e.title||` ${s+1}`,description:e.description||"",duration:e.duration||"30 ",order:e.order!==void 0?e.order:s,steps:zC(e.steps||[],s),stepCount:(e.steps||[]).length,hasQuiz:(e.steps||[]).some(r=>r.type==="quiz"),hasImages:(e.steps||[]).some(r=>{var n;return((n=r.images)==null?void 0:n.length)>0}),estimatedMinutes:YC(e.duration)})):[]}const RG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&t[i]!==""&&e.append(i,t[i])});const s=e.toString(),r=s?`updated-courses?${s}`:"updated-courses",{data:n}=await ce.get(r);if(n.success)return{success:!0,courses:(n.courses||[]).map(o=>{var l;return{...o,id:o._id||o.id,_id:o._id||o.id,thumbnail:$n(o.thumbnail),instructor:{...o.instructor,avatar:$n((l=o.instructor)==null?void 0:l.avatar)},curriculum:o.curriculum||[]}}),categories:n.categories||[],difficulties:n.difficulties||[]};throw new Error(n.error||"Failed to fetch courses")}catch(e){return{success:!1,courses:[],error:e.message||"Network error"}}},QC=async t=>{var e,s;try{const{data:r}=await ce.get(`updated-courses/${t}`);if(r&&r.success&&r.course)return{success:!0,data:{...r.course,id:r.course._id||r.course.id,_id:r.course._id||r.course.id,thumbnail:$n(r.course.thumbnail),instructor:{...r.course.instructor,avatar:$n((e=r.course.instructor)==null?void 0:e.avatar)},curriculum:bG(r.course.curriculum||[])}};throw new Error("Course not found or invalid response")}catch(r){return((s=r.response)==null?void 0:s.status)===404?{success:!1,error:"Course not found",status:404}:{success:!1,error:r.message||"Failed to fetch course"}}},XC=async t=>{try{const{data:e}=await ce.get(`updated-courses/${t}?format=structured`);if(e&&e.success&&e.course)return{success:!0,data:e.course,format:"structured"};throw new Error("Structured course not found")}catch(e){return{success:!1,error:e.message||"Failed to fetch structured course"}}},NG=async(t={},e="standard")=>{var s;try{const r=new URLSearchParams;Object.keys(t).forEach(l=>{t[l]!==void 0&&t[l]!==null&&t[l]!==""&&r.append(l,t[l])}),e==="structured"&&r.append("format","structured");const n=r.toString(),i=n?`updated-courses?${n}`:"updated-courses",{data:o}=await ce.get(i);if(o.success){const l=(o.courses||[]).map(c=>{var u,d,f;return{...c,id:c._id||c.id,_id:c._id||c.id,thumbnail:$n(c.thumbnail)||GC(c.category),instructor:{...c.instructor,name:((u=c.instructor)==null?void 0:u.name)||"ACED Instructor",avatar:$n((d=c.instructor)==null?void 0:d.avatar)||KC(),bio:((f=c.instructor)==null?void 0:f.bio)||"Experienced instructor"},duration:c.duration||wG(c.estimatedTime),level:c.level||c.difficulty||"Beginner",category:c.category||"General",isPremium:!!(c.isPremium||c.premium||c.type==="premium"),curriculum:c.curriculum||[],structuredData:c.structuredData||null,format:o.format||"standard",studentsCount:c.studentsCount||0,rating:c.rating||0,tags:c.tags||[],requirements:c.requirements||[],learningOutcomes:c.learningOutcomes||[],isNew:EG(c.createdAt),hasHomework:TG(c.curriculum),estimatedHours:SG(c.duration||c.estimatedTime)}});return{success:!0,courses:l,format:o.format||"standard",categories:o.categories||[],difficulties:o.difficulties||[],pagination:o.pagination||{},total:((s=o.pagination)==null?void 0:s.total)||l.length}}else throw new Error(o.error||"Failed to fetch courses")}catch(r){return{success:!1,courses:[],error:r.message||"Network error",format:e}}},OG=async t=>{var e,s,r;try{let n=await XC(t);if(n.success||(n=await QC(t)),n&&n.success&&n.data){const i=n.data;return{success:!0,data:{...i,id:i._id||i.id,_id:i._id||i.id,thumbnail:$n(i.thumbnail)||GC(i.category),instructor:{...i.instructor,name:((e=i.instructor)==null?void 0:e.name)||"ACED Instructor",avatar:$n((s=i.instructor)==null?void 0:s.avatar)||KC(),bio:((r=i.instructor)==null?void 0:r.bio)||"Experienced instructor"},curriculum:LG(i.curriculum||[]),lessons:xG(i.lessons||i.curriculum||[]),format:n.format||"standard",structuredData:n.format==="structured"?i:null,totalLessons:(i.curriculum||i.lessons||[]).length,totalSteps:kG(i.curriculum||i.lessons||[]),hasQuizzes:IG(i.curriculum||i.lessons||[]),hasImages:CG(i.curriculum||i.lessons||[]),skills:AG(i),modules:PG(i),isBookmarked:!1,userProgress:null},format:n.format||"standard"}}else throw new Error("Course not found or invalid response")}catch(n){return{success:!1,error:n.message||"Failed to fetch course"}}},MG=async t=>{try{try{const{data:e}=await ce.get(`updated-courses/${t}/lessons`);if(e&&e.success)return{success:!0,data:(e.lessons||e.data||[]).map((r,n)=>({id:r._id||r.id||`lesson_${n}`,_id:r._id||r.id||`lesson_${n}`,title:r.title||r.lessonName||` ${n+1}`,lessonName:r.title||r.lessonName||` ${n+1}`,description:r.description||"",duration:r.duration||"30 ",order:r.order||n,topicId:t,subject:r.subject||"General",steps:r.steps||[]})),source:"course-lessons-endpoint"}}catch{}try{const{data:e}=await ce.get(`updated-courses/${t}`);if(e&&e.success&&e.course){const s=e.course;return{success:!0,data:(s.curriculum||[]).map((n,i)=>({id:n._id||n.id||`lesson_${i}`,_id:n._id||n.id||`lesson_${i}`,title:n.title,lessonName:n.title,description:n.description,duration:n.duration||"30 ",order:n.order||i,topicId:s.id||s._id,subject:s.category||"General",steps:n.steps||[]})),source:"course-curriculum"}}}catch{}return{success:!0,data:[],source:"empty-result"}}catch(e){return{success:!1,data:[],error:e.message||"Failed to fetch course content"}}},DG=async(t,e,s)=>{var r;try{const n=await((r=me.currentUser)==null?void 0:r.getIdToken());if(!n)return{success:!0,bookmarked:s,message:"Bookmark toggled (demo mode)"};const i={Authorization:`Bearer ${n}`};return{success:!0,data:(await ce({method:s?"POST":"DELETE",url:`updated-courses/${e}/bookmark`,headers:i})).data,bookmarked:s}}catch{return{success:!0,bookmarked:s,message:"Bookmark toggled (offline mode)"}}},$G=async()=>{try{const{data:t}=await ce.get("subjects");return Array.isArray(t)?t:[]}catch{return[]}},UG=async()=>{try{const{data:t}=await ce.get("topics/grouped");if(t.success)return{success:!0,data:t.data,mode:"school"};throw new Error("Failed to fetch grouped topics")}catch(t){return{success:!1,data:{},error:t.message}}},FG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&t[i]!==""&&e.append(i,t[i])});const s=e.toString(),r=s?`topics/as-courses?${s}`:"topics/as-courses",{data:n}=await ce.get(r);if(n.success)return{success:!0,courses:n.data,total:n.total,mode:"study-centre"};throw new Error("Failed to fetch courses")}catch(e){return{success:!1,courses:[],error:e.message}}},JC=Object.freeze(Object.defineProperty({__proto__:null,getCourseById:QC,getCourseContent:MG,getCourseStructured:XC,getCourseStructuredEnhanced:OG,getSubjects:$G,getTopicsAsCourses:FG,getTopicsGrouped:UG,getUpdatedCourses:RG,getUpdatedCoursesWithFormat:NG,toggleBookmark:DG},Symbol.toStringTag,{value:"Module"})),VG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&e.append(i,t[i])});const s=e.toString(),r=s?`topics?${s}`:"topics",{data:n}=await ce.get(r);return n&&n.success?{success:!0,data:n.data||n.topics||[]}:Array.isArray(n)?{success:!0,data:n}:{success:!0,data:[]}}catch(e){return{success:!1,data:[],error:e.message}}},BG=async t=>{var e,s,r,n,i,o,l,c;try{if(!t||typeof t!="string")return{success:!1,error:"Invalid topic ID provided",code:400,details:"Topic ID must be a non-empty string"};try{const{data:u}=await ce.get(`topics/${t}`);if(u&&u.success===!0&&u.data)return{success:!0,data:u.data,message:u.message,source:"topics-endpoint"};if(u&&u.exists===!0&&u.data)return{success:!0,exists:!0,data:u.data,source:"topics-endpoint"};if(u&&(u._id||u.name))return{success:!0,data:u,source:"topics-endpoint"}}catch(u){if(((e=u.response)==null?void 0:e.status)!==404)throw u}try{const{data:u}=await ce.get("lessons"),f=(Array.isArray(u)?u:[]).filter(R=>{if(!R)return!1;const E=R.topicId;return typeof E=="string"?E===t:typeof E=="object"&&E!==null?(E._id||E.id)===t:!1});if(f.length===0)return{success:!1,error:"Topic not found",code:404,details:`No lessons found for topic ID: ${t}`,source:"lessons-fallback"};const p=f[0],b=(R=>{if(!R)return" ";const E=localStorage.getItem("lang")||"en";if(typeof R.topic=="string"&&R.topic.trim())return R.topic.trim();if(R.translations&&R.translations[E]&&typeof R.translations[E].topic=="string"&&R.translations[E].topic.trim())return R.translations[E].topic.trim();if(R.topic&&typeof R.topic=="object"){if(typeof R.topic[E]=="string"&&R.topic[E].trim())return R.topic[E].trim();if(typeof R.topic.en=="string"&&R.topic.en.trim())return R.topic.en.trim()}return typeof R.lessonName=="string"&&R.lessonName.trim()?`: ${R.lessonName.trim()}`:typeof R.title=="string"&&R.title.trim()?`: ${R.title.trim()}`:" "})(p),k=f.length,L=k*10;return{success:!0,data:{_id:t,id:t,name:b,topicName:b,description:`   "${b}"  ${k} `,topicDescription:`   "${b}"  ${k} `,subject:p.subject&&typeof p.subject=="string"?p.subject:"",level:p.level&&typeof p.level=="string"?p.level:"",lessonCount:k,totalTime:L,lessons:f,type:p.type&&typeof p.type=="string"?p.type:"free",isActive:!0,createdAt:p.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),metadata:{source:"constructed-from-lessons",constructedAt:new Date().toISOString(),basedOnLessons:f.length,firstLessonId:p._id||p.id}},source:"lessons-fallback",message:`Topic constructed from ${k} lessons`}}catch(u){return{success:!1,error:"Topic not found and lessons fallback failed",code:404,details:`Could not find topic ${t} in topics or lessons`,lessonsError:u.message,source:"fallback-failed"}}}catch(u){return((s=u.response)==null?void 0:s.status)===404?{success:!1,error:"Topic not found",code:404,details:"The requested topic does not exist"}:((r=u.response)==null?void 0:r.status)===403?{success:!1,error:"Access denied",code:403,details:"You do not have permission to access this topic"}:u.code==="NETWORK_ERROR"||u.message==="Network Error"?{success:!1,error:"Network error",details:"Unable to connect to the server"}:u.code==="ECONNABORTED"?{success:!1,error:"Request timeout",details:"The request took too long to complete"}:((n=u.response)==null?void 0:n.status)>=500?{success:!1,error:"Server error",code:u.response.status,details:"Internal server error occurred"}:{success:!1,error:((o=(i=u.response)==null?void 0:i.data)==null?void 0:o.message)||u.message||"Failed to fetch topic",code:(l=u.response)==null?void 0:l.status,details:((c=u.response)==null?void 0:c.data)||u}}},qG=async t=>{try{if(!t)throw new Error("Topic ID is required");try{const{data:e}=await ce.get(`lessons/topic/${t}?includeStats=true&sortBy=createdAt&order=asc`);if(e&&e.success)return{success:!0,data:e.lessons||[],stats:e.stats,source:"enhanced-endpoint"}}catch{}try{const{data:e}=await ce.get(`topics/${t}/lessons`);if(e&&e.success)return{success:!0,data:e.data||e.lessons||[],source:"legacy-endpoint"};if(Array.isArray(e))return{success:!0,data:e,source:"legacy-direct"}}catch{}try{const{data:e}=await ce.get("lessons");return{success:!0,data:(Array.isArray(e)?e:[]).filter(n=>{if(!n)return!1;const i=n.topicId;return typeof i=="string"?i===t:typeof i=="object"&&i!==null?(i._id||i.id)===t:n.topic===t}),source:"fallback-filter"}}catch{}return{success:!0,data:[],message:"No lessons found for this topic",source:"empty-result"}}catch(e){return{success:!1,data:[],error:e.message||"Failed to fetch lessons for topic",details:e}}},jG=async(t={})=>{try{const e=new URLSearchParams;Object.keys(t).forEach(i=>{t[i]!==void 0&&t[i]!==null&&e.append(i,t[i])});const s=e.toString(),r=s?`lessons?${s}`:"lessons",{data:n}=await ce.get(r);return{success:!0,data:Array.isArray(n)?n:[]}}catch(e){return{success:!1,data:[],error:e.message}}},HG=async t=>{var e,s,r;try{const{data:n}=await ce.get(`lessons/${t}`);if(n&&n.success)return{success:!0,data:n.lesson,topic:n.topic,stats:n.stats};if(n&&(n._id||n.lessonName))return{success:!0,data:n};throw new Error("Invalid lesson data structure")}catch(n){throw((e=n.response)==null?void 0:e.status)===404?new Error("Lesson not found"):((s=n.response)==null?void 0:s.status)===403?new Error("Access denied to this lesson"):((r=n.response)==null?void 0:r.status)===401?new Error("Authentication required"):n}},ZC=Object.freeze(Object.defineProperty({__proto__:null,getAllLessons:jG,getLessonById:HG,getLessonsByTopic:qG,getTopicById:BG,getTopics:VG},Symbol.toStringTag,{value:"Module"})),WG=async(t,e,s)=>{let r=[],n=[],i=[];try{const{data:c}=await ce.get("homeworks",{headers:s});r=c.data||c||[]}catch{}try{const{data:c}=await ce.get("lessons",{headers:s});n=(c.data||c||[]).filter(d=>d.homework&&Array.isArray(d.homework)&&d.homework.length>0)}catch{}try{const c=[`users/${e}/progress`,`progress?userId=${e}`,`user-progress/${e}`];for(const u of c)try{const{data:d}=await ce.get(u,{headers:s});if(i=d.data||d||[],Array.isArray(i))break}catch{continue}}catch{}const o=[];r.forEach(c=>{const u=i.find(d=>d.homeworkId===c._id||d.metadata&&d.metadata.standaloneHomeworkId===c._id);o.push({...c,type:"standalone",hasProgress:!!u,completed:(u==null?void 0:u.completed)||!1,score:(u==null?void 0:u.score)||0,stars:(u==null?void 0:u.stars)||0,userProgress:u,exerciseCount:(c.exercises||[]).length,metadata:{type:"standalone",homeworkTitle:c.title,hasUserProgress:!!u,progressId:u==null?void 0:u._id,source:"fallback-standalone"}})}),n.forEach(c=>{const u=i.find(d=>d.lessonId===c._id||d.metadata&&d.metadata.lessonId===c._id);o.push({lessonId:c._id,lessonName:c.lessonName||c.title,title:` : ${c.lessonName||c.title}`,subject:c.subject,exercises:c.homework||[],exerciseCount:(c.homework||[]).length,type:"lesson",hasProgress:!!u,completed:(u==null?void 0:u.completed)||!1,score:(u==null?void 0:u.score)||0,stars:(u==null?void 0:u.stars)||0,userProgress:u,metadata:{type:"lesson",lessonTitle:c.lessonName||c.title,hasUserProgress:!!u,progressId:u==null?void 0:u._id,source:"fallback-lesson"}})});const l=o.filter((c,u,d)=>u===d.findIndex(f=>f._id&&f._id===c._id||f.lessonId&&f.lessonId===c.lessonId));return l.sort((c,u)=>{const d=b=>b.hasProgress?b.completed?"completed":"in-progress":"pending",f={"in-progress":0,pending:1,completed:2},p=d(c),g=d(u);return f[p]!==f[g]?f[p]-f[g]:(c.title||c.lessonName||"").localeCompare(u.title||u.lessonName||"")}),l},zG=async t=>{var e,s;try{const r=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`,"Content-Type":"application/json"};try{const{data:l}=await ce.get(`homeworks/user/${t}`,{headers:n});if(l&&l.success&&Array.isArray(l.data))return{success:!0,data:l.data,stats:l.stats,source:"enhanced-endpoint"}}catch(l){if(((s=l.response)==null?void 0:s.status)>=500)throw new Error("     ")}const i=[`users/${t}/homeworks`,`homeworks/users/${t}`,`user/${t}/homework`];for(const l of i)try{const{data:c}=await ce.get(l,{headers:n});if(c&&c.success!==!1){const u=c.data||c;if(Array.isArray(u)&&u.length>=0)return{success:!0,data:u,stats:c.stats,source:`alternative-${l}`}}}catch{continue}const o=await WG(r,t,n);return o.length>0?{success:!0,data:o,source:"fallback-aggregation"}:{success:!0,data:[],source:"empty-result"}}catch(r){return{success:!1,data:[],error:r.message||"   "}}},GG=async(t,e)=>{var s;try{const r=await((s=me.currentUser)==null?void 0:s.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`,"Content-Type":"application/json"};try{const{data:i}=await ce.get(`homeworks/user/${t}/lesson/${e}`,{headers:n});if(i&&i.success)return{success:!0,data:i.data,message:i.message}}catch{}try{const{data:i}=await ce.get(`lessons/${e}`,{headers:n});if(!i.homework||!Array.isArray(i.homework)||i.homework.length===0)return{success:!1,error:"     "};let o=null;try{const l=[`users/${t}/progress/lesson/${e}`,`progress?userId=${t}&lessonId=${e}`,`user-progress/lesson/${e}?userId=${t}`];for(const c of l)try{const{data:u}=await ce.get(c,{headers:n});o=u.data||u;break}catch{continue}}catch{}return{success:!0,data:{homework:o,questions:i.homework,lessonInfo:{id:i._id,name:i.lessonName||i.title,subject:i.subject,instructions:i.homeworkInstructions||""}}}}catch{throw new Error("    ")}}catch(r){throw r}},KG=async(t,e)=>{var s,r;try{const n=await((s=me.currentUser)==null?void 0:s.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"};try{const{data:o}=await ce.get(`homeworks/user/${t}/homework/${e}`,{headers:i});if(o&&o.success)return{success:!0,data:o.data,message:o.message}}catch{}try{const{data:o}=await ce.get(`homeworks/${e}`,{headers:i});if(!o||!o.exercises&&!((r=o.data)!=null&&r.exercises))throw new Error("    ");const l=o.data||o;let c=null;try{const u=[`users/${t}/homework/${e}/progress`,`progress?userId=${t}&homeworkId=${e}`,`user-progress/homework/${e}?userId=${t}`];for(const d of u)try{const{data:f}=await ce.get(d,{headers:i});c=f.data||f;break}catch{continue}}catch{}return{success:!0,data:{homework:l,userProgress:c,questions:l.exercises||[]}}}catch{throw new Error("   ")}}catch(n){throw n}},YG=async(t,e,s)=>{var r;try{const n=await((r=me.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={lessonId:e,answers:s,completed:!1},l=[`homeworks/user/${t}/save`,`users/${t}/homework/save`,"homework/save"];for(const c of l)try{const{data:u}=await ce.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All homework save endpoints failed")}catch(n){throw n}},QG=async(t,e,s)=>{var r;try{const n=await((r=me.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={answers:s},l=[`homeworks/user/${t}/lesson/${e}/submit`,`users/${t}/homework/lesson/${e}/submit`,`homework/lesson/${e}/submit`];for(const c of l)try{const{data:u}=await ce.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All homework submit endpoints failed")}catch(n){throw n}},XG=async(t,e,s)=>{var r;try{const n=await((r=me.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={answers:s},l=[`homeworks/user/${t}/homework/${e}/save`,`users/${t}/homework/${e}/save`,`homework/${e}/save`];for(const c of l)try{const{data:u}=await ce.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All standalone homework save endpoints failed")}catch(n){throw n}},JG=async(t,e,s)=>{var r;try{const n=await((r=me.currentUser)==null?void 0:r.getIdToken());if(!n)throw new Error("No authentication token available");const i={Authorization:`Bearer ${n}`,"Content-Type":"application/json"},o={answers:s},l=[`homeworks/user/${t}/homework/${e}/submit`,`users/${t}/homework/${e}/submit`,`homework/${e}/submit`];for(const c of l)try{const{data:u}=await ce.post(c,o,{headers:i});if(u&&u.success!==!1)return{success:!0,data:u.data||u}}catch{continue}throw new Error("All standalone homework submit endpoints failed")}catch(n){throw n}},eA=Object.freeze(Object.defineProperty({__proto__:null,getAllHomeworks:zG,getHomeworkByLesson:GG,getStandaloneHomework:KG,saveHomework:YG,saveStandaloneHomework:XG,submitHomework:QG,submitStandaloneHomework:JG},Symbol.toStringTag,{value:"Module"})),ZG=async(t,e)=>{var s;try{const r=await((s=me.currentUser)==null?void 0:s.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`,"Content-Type":"application/json"},i={userId:t,lessonId:e.lessonId,topicId:e.topicId||e.lessonId,completedSteps:e.completedSteps||[],progressPercent:e.progressPercent||0,completed:e.completed||!1,mistakes:e.mistakes||0,stars:e.stars||0,points:e.points||0,duration:e.duration||e.durationSeconds||0,hintsUsed:e.hintsUsed||0,submittedHomework:e.submittedHomework||!1,homeworkScore:e.homeworkScore||0,medal:e.medal||"none",...e},o=[`users/${t}/progress/save`,"progress",`users/${t}/lesson/${e.lessonId}`,"user-progress"];for(const l of o)try{const c=l.includes("/progress")&&!l.includes("users")?i:{...i,userId:void 0},{data:u}=await ce.post(l,c,{headers:n,timeout:15e3});if(u&&u.success!==!1)return{success:!0,data:u.data||u,endpoint:l}}catch{continue}throw new Error("All progress save endpoints failed")}catch(r){throw r}},eK=async(t,e)=>{var s,r;try{const n=await((s=me.currentUser)==null?void 0:s.getIdToken());if(!n)return{success:!1,data:null};const i={Authorization:`Bearer ${n}`},o=[`progress/lesson/${e}/user/${t}`,`user-progress/user/${t}/lesson/${e}`,`user/${t}/lesson/${e}`,`progress?userId=${t}&lessonId=${e}`,`api/progress/${t}/${e}`,`api/user-progress/${t}/${e}`];for(const l of o)try{const{data:c}=await ce.get(l,{headers:i});if(c&&typeof c=="object"){const u=c.data||c;if(u&&c.success!==!1)return{success:!0,data:u}}}catch(c){if(((r=c.response)==null?void 0:r.status)===404)continue;continue}return{success:!0,data:null}}catch(n){return{success:!1,data:null,error:n.message}}},tK=async t=>{var e,s;try{const r=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!r)throw new Error("No authentication token available");const n={Authorization:`Bearer ${r}`},i=[`users/${t}/progress`,`user-progress/user/${t}`,`progress?userId=${t}`];for(const o of i)try{const{data:l}=await ce.get(o,{headers:n});if(l&&typeof l=="object"){const c=l.data||l;if(c&&l.success!==!1)return{success:!0,data:c}}}catch(l){if(((s=l.response)==null?void 0:s.status)===404)continue;continue}return{success:!0,data:[]}}catch(r){return{success:!1,data:[],error:r.message}}},sK=async t=>{var e;try{const s=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ce.get(`users/${t}/progress`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},rK=async(t,e)=>{var s;try{const r=await((s=me.currentUser)==null?void 0:s.getIdToken());if(!r)throw new Error("No authentication token");const{data:n}=await ce.get(`users/${t}/progress/lesson/${e}`,{headers:{Authorization:`Bearer ${r}`}});return n}catch(r){throw r}},nK=async t=>{var e;try{const s=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ce.get(`users/${t}/topics-progress`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},iK=async t=>{var e;try{const s=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ce.get(`users/${t}/points`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},oK=async t=>{var e;try{const s=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`};try{const{data:n}=await ce.get(`users/${t}/analytics`,{headers:r});return n}catch{try{const{data:i}=await ce.get(`analytics/${t}`,{headers:r});return i}catch(i){throw i}}}catch(s){throw s}},aK=async t=>{var e;try{const s=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ce.get(`users/${t}/stats`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},lK=async t=>{var e;try{const s=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ce.get(`users/${t}/achievements`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},cK=async t=>{var e;try{const s=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!s)throw new Error("No authentication token");const{data:r}=await ce.get(`users/${t}/recommendations`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},tA=Object.freeze(Object.defineProperty({__proto__:null,getLessonProgress:eK,getLessonProgressStats:rK,getRecommendations:cK,getTopicsProgress:nK,getUserAchievements:lK,getUserAnalytics:oK,getUserPoints:iK,getUserProgress:tK,getUserProgressStats:sK,getUserStats:aK,submitProgress:ZG},Symbol.toStringTag,{value:"Module"})),pt=async()=>{try{const t=me.currentUser;if(t)return await t.getIdToken(!0);const e=localStorage.getItem("token")||localStorage.getItem("authToken");return e&&e.length>20?e:null}catch(t){return console.error("[user.js] Error getting auth token:",t),null}},lv=t=>{if(t)return t;const e=me.currentUser;return e!=null&&e.uid?e.uid:localStorage.getItem("userId")||localStorage.getItem("firebaseUserId")||null},sA=async t=>{console.log(" [user.js] getUserInfo called for:",t);try{const e=await pt();if(!e)throw console.error(" [user.js] No authentication token available"),new Error("No authentication token available");const s=lv(t);if(!s)throw console.error(" [user.js] No user ID available"),new Error("No user ID available");const r={Authorization:`Bearer ${e}`};console.log(" [user.js] Fetching user from server:",s);const{data:n}=await ce.get(`users/${s}`,{headers:r});console.log(" [user.js] Server response:",n);const i=n.user||n.data||n;return{success:!0,data:i,user:i,subscriptionPlan:i.subscriptionPlan||"free",subscriptionExpiryDate:i.subscriptionExpiryDate,serverFetch:!0,fetchTime:new Date().toISOString()}}catch(e){throw console.error(" [user.js] getUserInfo error:",e),e}},rA=async t=>{console.log(" [user.js] getUserStatus called for:",t);try{const e=await pt();if(!e)return console.error(" [user.js] No authentication token"),{success:!1,error:"No authentication token",status:null,serverFetch:!1};const s=lv(t);if(!s)return console.error(" [user.js] No user ID"),{success:!1,error:"No user ID",status:null,serverFetch:!1};const r={Authorization:`Bearer ${e}`},n=[`users/${s}`,`users/${s}/status`,`users/${s}/subscription-status`];for(const i of n)try{console.log(` [user.js] Trying endpoint: ${i}`);const{data:o}=await ce.get(i,{headers:r});if(o&&o.success!==!1){const l=o.user||o.data||o,c=l.subscriptionPlan||l.userStatus||l.plan||o.status||"free";return console.log(" [user.js] Got status from server:",c),{success:!0,data:l,status:c,subscriptionPlan:c,subscriptionExpiryDate:l.subscriptionExpiryDate||l.subscriptionExpiry,subscriptionSource:l.subscriptionSource,serverFetch:!0,endpoint:i,fetchTime:new Date().toISOString()}}}catch(o){console.warn(` [user.js] Endpoint ${i} failed:`,o.message);continue}return console.error(" [user.js] All endpoints failed"),{success:!1,error:"Could not fetch status from server",status:null,serverFetch:!1}}catch(e){return console.error(" [user.js] getUserStatus error:",e),{success:!1,error:e.message,status:null,serverFetch:!1}}},nA=async t=>{console.log(" [user.js] fetchSubscriptionFromServer called for:",t);try{const e=await pt();if(!e)throw new Error("No authentication token");const s=lv(t);if(!s)throw new Error("No user ID");const r={Authorization:`Bearer ${e}`},{data:n}=await ce.get(`users/${s}`,{headers:r}),i=n.user||n.data||n,o={plan:i.subscriptionPlan||"free",status:i.subscriptionPlan&&i.subscriptionPlan!=="free"?"active":"inactive",expiryDate:i.subscriptionExpiryDate||null,source:i.subscriptionSource||null,activatedAt:i.subscriptionActivatedAt||null,duration:i.subscriptionDuration||null,serverFetch:!0,fetchTime:new Date().toISOString()};return console.log(" [user.js] Subscription data from server:",o),{success:!0,subscription:o,user:i}}catch(e){return console.error(" [user.js] fetchSubscriptionFromServer error:",e),{success:!1,error:e.message,subscription:null}}},iA=async t=>{console.log(" [user.js] saveUser called");try{const{data:e}=await ce.post("users/save",t);return{success:!0,data:e,user:e.user||e}}catch(e){throw console.error(" [user.js] saveUser error:",e),e}},oA=async(t,e)=>{try{const s=await pt();if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`},{data:n}=await ce.put(`users/${t}/profile`,e,{headers:r});return n}catch(s){throw console.error(" [user.js] updateUserProfile error:",s),s}},aA=async(t,e=!1)=>{var s,r,n;try{const i=await pt();if(!i)throw new Error("No authentication token");const o=`users/${t}/study-list${e?`?t=${Date.now()}`:""}`,{data:l}=await ce.get(o,{headers:{Authorization:`Bearer ${i}`}});return{success:!0,data:l.data||l||[],message:l.message}}catch(i){return((s=i.response)==null?void 0:s.status)===404?{success:!0,data:[],message:"Study list not found, returning empty list"}:{success:!1,data:[],error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},lA=async(t,e)=>{var s,r;try{const n=await pt();if(!n)throw new Error("No token");const i={topicId:e.topicId||e._id,topic:e.topic||e.topicName||e.name,subject:e.subject||"General",level:e.level||1,lessonCount:e.lessonCount||0,totalTime:e.totalTime||10,type:e.type||"free"};return{success:!0,data:(await ce.post(`users/${t}/study-list`,i,{headers:{Authorization:`Bearer ${n}`}})).data}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},cA=async(t,e)=>{var s,r;try{const n=await pt();return await ce.delete(`users/${t}/study-list/${e}`,{headers:{Authorization:`Bearer ${n}`}}),{success:!0}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},uA=async t=>{try{const e=await pt(),{data:s}=await ce.post(`users/${t}/study-list/cleanup`,{},{headers:{Authorization:`Bearer ${e}`}});return s}catch(e){throw e}},dA=async t=>{try{const e=await pt();if(!e)throw new Error("No authentication token");const{data:s}=await ce.get(`users/${t}/goals`,{headers:{Authorization:`Bearer ${e}`}});return s}catch(e){throw e}},hA=async(t,e)=>{try{const s=await pt();if(!s)throw new Error("No authentication token");const{data:r}=await ce.post(`users/${t}/goals`,e,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},fA=async(t,e,s)=>{try{const r=await pt();if(!r)throw new Error("No authentication token");const{data:n}=await ce.put(`users/${t}/goals/${e}`,s,{headers:{Authorization:`Bearer ${r}`}});return n}catch(r){throw r}},pA=async(t,e)=>{try{const s=await pt();if(!s)throw new Error("No authentication token");const{data:r}=await ce.delete(`users/${t}/goals/${e}`,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},mA=async(t,e)=>{try{const s=await pt();if(!s)throw new Error("No authentication token");const{data:r}=await ce.post(`users/${t}/diary`,e,{headers:{Authorization:`Bearer ${s}`}});return r}catch(s){throw s}},gA=async t=>{try{const e=await pt();if(!e)throw new Error("No authentication token");const{data:s}=await ce.get(`users/${t}/diary`,{headers:{Authorization:`Bearer ${e}`}});return s}catch(e){throw e}},yA=async t=>{try{const e=await pt();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ce.get(`progress/learning-profile/${t}`,{headers:s});return r}catch(e){throw e}},vA=async(t,e)=>{try{const s=await pt();if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`},{data:n}=await ce.post(`progress/learning-profile/${t}/update`,e,{headers:r});return n}catch(s){throw s}},_A=async t=>{try{const e=await pt();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ce.get(`progress/learning-profile/${t}/recommendation`,{headers:s});return r}catch(e){throw e}},bA=async t=>{try{const e=await pt();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ce.get(`progress/rewards/${t}`,{headers:s});return r}catch(e){throw e}},wA=async(t,e)=>{try{const s=await pt();if(!s)throw new Error("No authentication token available");const r={Authorization:`Bearer ${s}`},{data:n}=await ce.post(`progress/rewards/${t}/check`,{currentStep:e},{headers:r});return n}catch(s){throw s}},SA=async t=>{try{const e=await pt();if(!e)throw new Error("No authentication token available");const s={Authorization:`Bearer ${e}`},{data:r}=await ce.post(`progress/rewards/${t}/streak`,{},{headers:s});return r}catch(e){throw e}},EA=async t=>{var e,s;try{const r=await pt();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ce.get(`learning-mode/${t}`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},vf=async(t,e,s="")=>{var r,n;try{const i=await pt();if(!i)throw new Error("No authentication token");const o={Authorization:`Bearer ${i}`},{data:l}=await ce.post(`learning-mode/${t}/switch`,{newMode:e,reason:s},{headers:o});return{success:!0,data:l}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},TA=async t=>{var e,s;try{const r=await pt();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ce.post(`learning-mode/placement-test/${t}/start`,{},{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},kA=async(t,e,s)=>{var r,n;try{const i=await pt();if(!i)throw new Error("No authentication token");const o={Authorization:`Bearer ${i}`},{data:l}=await ce.post(`learning-mode/placement-test/${t}/answer`,{answer:e,timeSpent:s},{headers:o});return{success:!0,data:l}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},IA=async t=>{var e,s;try{const r=await pt();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ce.get(`learning-mode/placement-test/${t}/results`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},CA=async t=>{var e,s;try{const r=await pt();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ce.get(`school/${t}/curriculum`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},AA=async(t,e)=>{var s,r;try{const n=await pt();if(!n)throw new Error("No authentication token");const i={Authorization:`Bearer ${n}`},{data:o}=await ce.post(`school/${t}/complete-level`,e,{headers:i});return{success:!0,data:o}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},PA=async(t,e,s="")=>{var r,n;try{const i=await pt();if(!i)throw new Error("No authentication token");const o={Authorization:`Bearer ${i}`},{data:l}=await ce.post(`study-centre/${t}/bookmark`,{courseId:e,notes:s},{headers:o});return{success:!0,data:l}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.error)||i.message}}},xA=async(t,e)=>{var s,r;try{const n=await pt();if(!n)throw new Error("No authentication token");const i={Authorization:`Bearer ${n}`},{data:o}=await ce.post(`study-centre/${t}/create-path`,e,{headers:i});return{success:!0,data:o}}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},LA=async t=>{var e,s;try{const r=await pt();if(!r)throw new Error("No authentication token");const n={Authorization:`Bearer ${r}`},{data:i}=await ce.get(`users/${t}/accessible-content`,{headers:n});return{success:!0,data:i}}catch(r){return{success:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},RA=async(t,e)=>{var s,r;try{const n=await pt();if(!n)throw new Error("No authentication token");const i={Authorization:`Bearer ${n}`},{data:o}=await ce.get(`users/${t}/lessons/${e}/access`,{headers:i});return{success:!0,canAccess:o.canAccess,reason:o.reason}}catch(n){return{success:!1,canAccess:!1,reason:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},uK={getUserInfo:sA,getUserStatus:rA,fetchSubscriptionFromServer:nA,saveUser:iA,updateUserProfile:oA,getUserStudyList:aA,addToStudyList:lA,removeFromStudyList:cA,cleanupStudyList:uA,getUserGoals:dA,createUserGoal:hA,updateUserGoal:fA,deleteUserGoal:pA,saveDiaryEntry:mA,getDiaryEntries:gA,getLearningProfile:yA,updateLearningProfile:vA,getPersonalizedRecommendations:_A,getUserRewards:bA,checkReward:wA,updateStreak:SA,getLearningMode:EA,switchLearningMode:vf,startPlacementTest:TA,submitPlacementTestAnswer:kA,getPlacementTestResults:IA,getSchoolCurriculum:CA,completeLevel:AA,addStudyCentreBookmark:PA,createPersonalPath:xA,getAccessibleContent:LA,checkLessonAccess:RA},eh=Object.freeze(Object.defineProperty({__proto__:null,addStudyCentreBookmark:PA,addToStudyList:lA,checkLessonAccess:RA,checkReward:wA,cleanupStudyList:uA,completeLevel:AA,createPersonalPath:xA,createUserGoal:hA,default:uK,deleteUserGoal:pA,fetchSubscriptionFromServer:nA,getAccessibleContent:LA,getDiaryEntries:gA,getLearningMode:EA,getLearningProfile:yA,getPersonalizedRecommendations:_A,getPlacementTestResults:IA,getSchoolCurriculum:CA,getUserGoals:dA,getUserInfo:sA,getUserRewards:bA,getUserStatus:rA,getUserStudyList:aA,removeFromStudyList:cA,saveDiaryEntry:mA,saveUser:iA,startPlacementTest:TA,submitPlacementTestAnswer:kA,switchLearningMode:vf,updateLearningProfile:vA,updateStreak:SA,updateUserGoal:fA,updateUserProfile:oA},Symbol.toStringTag,{value:"Module"})),dK=()=>typeof navigator<"u"?navigator.onLine:!0,Nu=[],hK=async()=>{if(dK()&&Nu.length>0){const t=[...Nu];Nu.length=0;for(const e of t)try{await e()}catch{Nu.push(e)}}};typeof window<"u"&&(window.addEventListener("online",hK),window.addEventListener("offline",()=>{}));const fK="https://api.aced.live",Pa=ht.create({baseURL:fK,headers:{"Content-Type":"application/json"},timeout:15e3}),Ki=new Map,pK=3,mK=5e3,cv=(t,e)=>{const s=`${t}-${e}`,r=Date.now();if(!Ki.has(s))return Ki.set(s,{count:1,firstAttempt:r,lastAttempt:r}),!0;const n=Ki.get(s);return r-n.lastAttempt>mK?(Ki.set(s,{count:1,firstAttempt:r,lastAttempt:r}),!0):n.count>=pK?!1:(n.count++,n.lastAttempt=r,Ki.set(s,n),!0)},gK=(t,e=500)=>{let s;return(...r)=>(clearTimeout(s),new Promise((n,i)=>{s=setTimeout(async()=>{try{const o=await t(...r);n(o)}catch(o){i(o)}},e)}))},yK=async()=>{try{const t=me.currentUser;if(!t)return null;const e=await t.getIdToken(!0);return localStorage.setItem("token",e),e}catch{return null}};Pa.interceptors.request.use(async t=>{try{t.headers["X-Request-Source"]="frontend",t.headers["X-User-Agent"]=navigator.userAgent.substring(0,50);const e=await yK();return e&&(t.headers.Authorization=`Bearer ${e}`),t}catch(e){return Promise.reject(e)}});Pa.interceptors.response.use(t=>t,async t=>{var e;if(((e=t.response)==null?void 0:e.status)===401&&!t.config._retry){t.config._retry=!0;try{const s=me.currentUser;if(s){const r=await s.getIdToken(!0);return localStorage.setItem("token",r),t.config.headers.Authorization=`Bearer ${r}`,Pa(t.config)}}catch{localStorage.removeItem("token")}}return Promise.reject(t)});const NA=t=>({"-31601":"    ","-31610":"   ","-31611":"   ","-31612":"   ","-31622":"  ","-31623":"   ","-31630":" :  ,      "})[t]||` PayMe: ${t}`,_f=()=>({start:{tiyin:26e6,uzs:26e4,label:"Start Plan"},pro:{tiyin:455e5,uzs:455e3,label:"Pro Plan"}}),vK=(t,e="UZS")=>{try{const s=Number(t);return isNaN(s)?`${t} `:e==="UZS"?new Intl.NumberFormat("uz-UZ",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)+" ":new Intl.NumberFormat("uz-UZ",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}catch{return`${(Number(t)||0).toLocaleString("uz-UZ")} `}},_K=t=>{switch(t){case 1:return{text:"",color:"warning",icon:""};case 2:return{text:"",color:"success",icon:""};case-1:return{text:"",color:"error",icon:""};case-2:return{text:"",color:"error",icon:""};default:return{text:"",color:"default",icon:""}}},_c=async(t,e,s={})=>{var r;try{throw new Error("PayMe Merchant ID not configured. Check your .env file.")}catch(n){return{success:!1,error:n.message}}},OA=async(t,e,s={})=>{var r;try{const n="68016cc1a5e04614247f7174".trim();if(!n||n==="undefined"||n.length<10)throw new Error("Invalid PayMe Merchant ID configuration");const o=(r=_f()[e])==null?void 0:r.tiyin;if(!o)throw new Error(`Unknown plan: ${e}`);const l=Date.now(),c=Math.random().toString(36).substr(2,9),d=(s.Login||`aced${l}${c}`).replace(/[^a-zA-Z0-9]/g,""),f={receipt_type:0,items:[{title:`ACED ${e.toUpperCase()} Subscription`,price:o,count:1,code:"10899002001000000",vat_percent:0,package_code:"123456"}]};let p;try{const E=JSON.stringify(f);p=btoa(unescape(encodeURIComponent(E)))}catch{p=""}const g=s.callback||`${window.location.origin}/payment/success`,b=encodeURIComponent(g),L=["ru","uz","en"].includes(s.lang)?s.lang:"ru",V=s.callback_timeout&&Number.isInteger(Number(s.callback_timeout))?s.callback_timeout:15e3;return{success:!0,formHtml:`
    <form method="POST" action="https://checkout.paycom.uz/" id="payme-form" style="display: none;">
      <!-- Required fields -->
      <input type="hidden" name="merchant" value="${n}"/>
      <input type="hidden" name="amount" value="${o}"/>
      <input type="hidden" name="account[Login]" value="${d}"/>
      
      <!-- Optional fields -->
      <input type="hidden" name="lang" value="${L}"/>
      <input type="hidden" name="callback" value="${b}"/>
      <input type="hidden" name="callback_timeout" value="${V}"/>
      <input type="hidden" name="description" value="ACED ${e.toUpperCase()} Plan Subscription"/>
      ${p?`<input type="hidden" name="detail" value="${p}"/>`:""}
      
      <!-- Submit button (hidden, auto-submit) -->
      <button type="submit" style="display: none;">Pay with PayMe</button>
    </form>
    
    <script>
// Wait for DOM to be ready
      function submitPaymeForm() {
        const form = document.getElementById('payme-form');
        if (form) {
form.submit();
        } else {
}
      }
      
      // Auto-submit after short delay
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(submitPaymeForm, 1000);
        });
      } else {
        setTimeout(submitPaymeForm, 1000);
      }
    <\/script>
    `,method:"POST",transaction:{id:d,amount:o,plan:e,merchantId:n}}}catch(n){return{success:!1,error:n.message||"Failed to generate PayMe POST form"}}},MA=async(t,e,s={})=>{var r;if(!cv(t,"payment-initiation"))throw new Error("    .   .");try{if(!((r=_f()[e])==null?void 0:r.tiyin))throw new Error(` : ${e}`);const o=s.method||"get";if(o==="get"){const c=await _c(t,e,s);if(c.success)return{success:!0,paymentUrl:c.paymentUrl,transaction:c.transaction,method:"GET",message:"Payment URL generated successfully"};throw new Error(c.error)}if(o==="post"){const c=await OA(t,e,s);if(c.success)return{success:!0,formHtml:c.formHtml,transaction:c.transaction,method:"POST",message:"Payment form generated successfully"};throw new Error(c.error)}const l=await _c(t,e,s);if(l.success)return{success:!0,paymentUrl:l.paymentUrl,transaction:l.transaction,method:"GET",message:"Payment URL generated successfully (fallback)"};throw new Error(l.error)}catch(n){return{success:!1,error:n.message||"  ",details:n}}},DA=async(t,e,s="post",r={})=>{if(!cv(t,"form-generation"))throw new Error("    .   .");try{if(s==="get"){const i=await _c(t,e,{method:s,...r});return{success:i.success,method:"GET",paymentUrl:i.paymentUrl,transaction:i.transaction,error:i.error}}if(s==="post"){const i=await OA(t,e,{method:s,...r});return{success:i.success,method:"POST",formHtml:i.formHtml,transaction:i.transaction,error:i.error}}const n=await _c(t,e,{method:"get",...r});return{success:n.success,method:"GET",paymentUrl:n.paymentUrl,transaction:n.transaction,error:n.error}}catch(n){return{success:!1,error:FA(n,"  ")}}},$A=gK(async(t,e,s)=>{var r,n;if(!cv(t,"promo-code"))throw new Error("    .   .");try{const i=await Pa.post("/payments/promo-code",{userId:t,plan:e,promoCode:s});return{success:!0,data:i.data,message:i.data.message||"  "}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"  "}}},1e3),bK=async(t,e=null)=>{var s,r,n;try{const i=e?`/payments/status/${t}/${e}`:`/payments/status/${t}`,o=await Pa.get(i);return{success:!0,data:o.data,transaction:o.data.transaction,status:(s=o.data.transaction)==null?void 0:s.state}}catch(i){return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"   "}}},wK=async t=>{var e,s;try{const r=await Pa.get(`/payments/validate-user/${t}`);return{success:!0,valid:r.data.valid,user:r.data.user,source:r.data.source,note:r.data.note}}catch(r){return{success:!1,valid:!1,error:((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.error)||r.message}}},UA=t=>{try{const e=t.split("/").pop(),s=atob(e),r=s.includes("m=")&&!s.includes("m=undefined"),n=s.includes("a=")&&/a=\d+/.test(s),i=s.includes("ac.Login=")&&!s.includes("ac.Login=undefined"),o=s.includes("")||s.includes("\f")||s.includes("\0")||s.includes("[object Object]");return{isValid:r&&n&&i&&!o,hasValidMerchant:r,hasValidAmount:n,hasValidOrderId:i,isCorrupted:o,decodedParams:s}}catch(e){return{isValid:!1,error:e.message}}},FA=(t,e=" ")=>{var s,r,n,i,o,l,c,u,d,f,p;return(r=(s=t.response)==null?void 0:s.data)!=null&&r.code&&t.response.data.code.toString().startsWith("-316")?NA(t.response.data.code):(n=t.message)!=null&&n.includes("  ")?t.message:((i=t.response)==null?void 0:i.status)===401?"      ":((o=t.response)==null?void 0:o.status)===403?"    ":((l=t.response)==null?void 0:l.status)===404?"  .   .":((c=t.response)==null?void 0:c.status)===429?"  .      .":((u=t.response)==null?void 0:u.status)>=500?"  .  ":(d=t.message)!=null&&d.includes("timeout")?"  .  -":((p=(f=t.response)==null?void 0:f.data)==null?void 0:p.message)||t.message||"    "},SK=t=>{const e=[];for(const[s]of Ki.entries())s.startsWith(t)&&e.push(s);e.forEach(s=>Ki.delete(s))},EK=async()=>{try{const t=await _c("testuser123","start",{lang:"ru",callback:"https://aced.live/payment/success"});if(t.success){const e=UA(t.paymentUrl);return{success:e.isValid,url:t.paymentUrl,validation:e}}else throw new Error(t.error)}catch(t){return{success:!1,error:t.message}}},TK=async(t,e="start")=>{},kK=DA,IK=MA,VA=Object.freeze(Object.defineProperty({__proto__:null,applyPromoCode:$A,checkPaymentStatus:bK,executePaymentFlow:IK,formatPaymentAmount:vK,generatePaymeForm:DA,generatePaymentForm:kK,getPaymeErrorMessage:NA,getPaymentAmounts:_f,getTransactionStateText:_K,handlePaymentError:FA,initiatePaymePayment:MA,resetPaymentAttempts:SK,testCleanUrlGeneration:EK,testPaymentFlow:TK,validatePaymeUrl:UA,validateUser:wK},Symbol.toStringTag,{value:"Module"})),CK="https://api.aced.live",ds=ht.create({baseURL:`${CK}/api/payments`,headers:{"Content-Type":"application/json"},timeout:3e4,maxRedirects:0,validateStatus:t=>t<500});ds.interceptors.request.use(async t=>{try{const e=me.currentUser;if(e){const s=await e.getIdToken();t.headers.Authorization=`Bearer ${s}`}return t}catch{return t}},t=>Promise.reject(t));ds.interceptors.response.use(t=>t,t=>{var s,r,n,i,o,l,c,u,d,f,p,g,b;const e={url:(s=t.config)==null?void 0:s.url,method:(n=(r=t.config)==null?void 0:r.method)==null?void 0:n.toUpperCase(),status:(i=t.response)==null?void 0:i.status,statusText:(o=t.response)==null?void 0:o.statusText,message:((u=(c=(l=t.response)==null?void 0:l.data)==null?void 0:c.error)==null?void 0:u.details)||((f=(d=t.response)==null?void 0:d.data)==null?void 0:f.error)||((g=(p=t.response)==null?void 0:p.data)==null?void 0:g.message)||t.message,fullError:(b=t.response)==null?void 0:b.data};return t.multicardDetails=e,Promise.reject(t)});const uv=async()=>{try{const{data:t}=await ds.post("/multicard/test-connection");return t}catch(t){throw t}},BA=uv,qA=async t=>{var e,s,r,n,i,o,l,c,u,d,f,p,g,b;console.log(" [multicard.js] initiateMulticardPayment called with:",t);try{if(!t.userId)throw new Error("userId is required");if(!t.plan)throw new Error("plan is required");if(!["start","pro"].includes(t.plan))throw new Error('plan must be "start" or "pro"');const k=t.amount||(t.plan==="pro"?455e5:26e6),L=Array.isArray(t.ofd)?t.ofd:[{qty:1,price:k,total:k,name:`ACED ${t.plan.toUpperCase()} Plan Subscription`,mxik:"10899002001000000",package_code:"1873404",vat:0}],V={userId:t.userId,plan:t.plan,amount:k,ofd:L,lang:t.lang||"ru",userName:t.userName||"",userEmail:t.userEmail||"",provider:"multicard"};console.log(" [multicard.js] Sending request to /multicard/initiate with:",V);const{data:R}=await ds.post("/multicard/initiate",V);if(console.log(" [multicard.js] Response from /multicard/initiate:",R),R.success&&R.data)return{success:!0,data:{uuid:R.data.uuid,invoiceId:R.data.invoiceId,checkoutUrl:R.data.checkoutUrl,shortLink:R.data.shortLink,deeplink:R.data.deeplink,addedOn:R.data.addedOn}};{const E=((e=R.error)==null?void 0:e.details)||R.error||"Payment initiation failed";throw new Error(E)}}catch(k){let L="Unknown payment error occurred";return(r=(s=k.response)==null?void 0:s.data)!=null&&r.error?typeof k.response.data.error=="string"?L=k.response.data.error:k.response.data.error.details?L=k.response.data.error.details:k.response.data.error.message&&(L=k.response.data.error.message):(i=(n=k.response)==null?void 0:n.data)!=null&&i.message?L=k.response.data.message:k.message&&(L=k.message),((o=k.response)==null?void 0:o.status)===404?L="Multicard payment endpoint not found. Please contact support.":(L.includes(" ")||L.includes("temporarily disabled"))&&(L="Multicard payment is temporarily disabled. Please try PayMe or contact support."),{success:!1,error:L,details:{status:(l=k.response)==null?void 0:l.status,statusText:(c=k.response)==null?void 0:c.statusText,code:(f=(d=(u=k.response)==null?void 0:u.data)==null?void 0:d.error)==null?void 0:f.code,hint:(g=(p=k.response)==null?void 0:p.data)==null?void 0:g.hint,timestamp:new Date().toISOString(),endpoint:(b=k.config)==null?void 0:b.url}}}},jA=async t=>{try{const{data:e}=await ds.post(`/multicard/invoice/${t}`);return e}catch(e){throw e}},HA=async t=>{try{const{data:e}=await ds.delete(`/multicard/invoice/${t}`);return e}catch(e){throw e}},WA=async t=>{var e,s,r,n;try{if(!t.userId)throw new Error("userId is required");if(!t.redirectUrl)throw new Error("redirectUrl is required");if(!t.redirectDeclineUrl)throw new Error("redirectDeclineUrl is required");const{data:i}=await ds.post("/multicard/card/bind",t);if(i.success)return{success:!0,data:{sessionId:i.data.sessionId,formUrl:i.data.formUrl,expiresIn:i.data.expiresIn}};throw new Error(((e=i.error)==null?void 0:e.details)||"Card binding session creation failed")}catch(i){return{success:!1,error:((n=(r=(s=i.response)==null?void 0:s.data)==null?void 0:r.error)==null?void 0:n.details)||i.message}}},zA=async t=>{try{const{data:e}=await ds.post(`/multicard/card/bind/${t}`);return e}catch(e){throw e}},GA=async t=>{try{const{data:e}=await ds.post(`/multicard/card/${t}`);return e}catch(e){throw e}},KA=async t=>{try{const{data:e}=await ds.delete(`/multicard/card/${t}`);return e}catch(e){throw e}},YA=async t=>{var e,s,r,n,i;try{if(!((e=t.card)!=null&&e.token))throw new Error("Card token is required");if(!t.amount)throw new Error("Amount is required");if(!t.storeId)throw new Error("Store ID is required");if(!t.invoiceId)throw new Error("Invoice ID is required");const{data:o}=await ds.post("/multicard/payment",t);if(o.success)return{success:!0,data:o.data};throw new Error(((s=o.error)==null?void 0:s.details)||"Payment creation failed")}catch(o){return{success:!1,error:((i=(n=(r=o.response)==null?void 0:r.data)==null?void 0:n.error)==null?void 0:i.details)||o.message}}},QA=async t=>{var e,s,r,n;try{const i=["payme","click","uzum","anorbank","alif","oson","xazna","beepul"];if(!i.includes(t.paymentSystem))throw new Error(`Invalid payment system. Must be one of: ${i.join(", ")}`);const{data:o}=await ds.post("/multicard/payment/via-app",t);if(o.success)return{success:!0,data:o.data,message:o.message};throw new Error(((e=o.error)==null?void 0:e.details)||"Payment via app creation failed")}catch(i){return{success:!1,error:((n=(r=(s=i.response)==null?void 0:s.data)==null?void 0:r.error)==null?void 0:n.details)||i.message}}},XA=async(t,e,s=!1)=>{var r,n,i,o,l,c,u;try{if(!t)throw new Error("Payment UUID is required");if(!e||e.length!==6)throw new Error("Valid 6-digit OTP is required");const{data:d}=await ds.put(`/multicard/payment/${t}`,{otp:e,debit_available:s});if(d.success)return{success:!0,data:d.data};throw new Error(((r=d.error)==null?void 0:r.details)||"Payment confirmation failed")}catch(d){return{success:!1,error:((o=(i=(n=d.response)==null?void 0:n.data)==null?void 0:i.error)==null?void 0:o.details)||d.message,code:(u=(c=(l=d.response)==null?void 0:l.data)==null?void 0:c.error)==null?void 0:u.code}}},JA=async t=>{try{const{data:e}=await ds.delete(`/multicard/payment/${t}`);return e}catch(e){throw e}},ZA=async t=>{try{const{data:e}=await ds.post(`/multicard/payment/${t}`);return e}catch(e){throw e}},eP=async(t,e)=>{try{const{data:s}=await ds.post(`/multicard/store/${t}/history`,{params:e});return s}catch(s){throw s}},tP=async(t,e,s)=>{try{const{data:r}=await ds.post(`/multicard/store/${t}/statistics`,{params:{startDate:e,endDate:s}});return r}catch(r){throw r}},sP=async()=>{try{const{data:t}=await ds.post("/multicard/application/info");return t}catch(t){throw t}},th=t=>Math.round(t*100),dv=t=>t/100,rP=(t,e="uz-UZ")=>{const s=dv(t);return new Intl.NumberFormat(e,{style:"currency",currency:"UZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)},nP=t=>t.map(e=>({qty:e.quantity||1,price:typeof e.price=="number"?e.price:th(e.price),mxik:e.mxik||"10899002001000000",total:(e.quantity||1)*(typeof e.price=="number"?e.price:th(e.price)),package_code:e.packageCode||"1873404",name:e.name,...e.vat!==void 0&&{vat:e.vat},...e.tin&&{tin:e.tin}})),iP=t=>({draft:"",progress:" ",billing:" ",success:"",error:"",revert:"",pending:""})[t]||t,oP=t=>({uzcard:"UZCARD",humo:"HUMO",visa:"Visa",mastercard:"Mastercard",unionpay:"UnionPay",payme:"Payme",click:"Click",uzum:"Uzum",anorbank:"Anorbank",alif:"Alif",oson:"Oson",xazna:"Xazna",beepul:"Beepul"})[t]||t,aP=t=>t&&typeof t=="string"&&t.length>5,lP=t=>t&&typeof t=="string"&&t.length>10,AK={testMulticardConnection:uv,testMulticardAuth:BA,initiateMulticardPayment:qA,getInvoiceInfo:jA,cancelInvoice:HA,createCardBindingSession:WA,checkCardBindingStatus:zA,getCardInfo:GA,deleteCard:KA,createPaymentByToken:YA,createPaymentViaApp:QA,confirmPayment:XA,refundPayment:JA,getPaymentInfo:ZA,getPaymentHistory:eP,getPaymentStatistics:tP,getApplicationInfo:sP,uzsToTiyin:th,tiyinToUzs:dv,formatPrice:rP,createOfdData:nP,getPaymentStatusText:iP,getPaymentSystemName:oP,isValidInvoiceId:aP,isValidCardToken:lP},cg=Object.freeze(Object.defineProperty({__proto__:null,cancelInvoice:HA,checkCardBindingStatus:zA,confirmPayment:XA,createCardBindingSession:WA,createOfdData:nP,createPaymentByToken:YA,createPaymentViaApp:QA,default:AK,deleteCard:KA,formatPrice:rP,getApplicationInfo:sP,getCardInfo:GA,getInvoiceInfo:jA,getPaymentHistory:eP,getPaymentInfo:ZA,getPaymentStatistics:tP,getPaymentStatusText:iP,getPaymentSystemName:oP,initiateMulticardPayment:qA,isValidCardToken:lP,isValidInvoiceId:aP,refundPayment:JA,testMulticardAuth:BA,testMulticardConnection:uv,tiyinToUzs:dv,uzsToTiyin:th},Symbol.toStringTag,{value:"Module"})),PK=async({lessonId:t,stepIndex:e,gameType:s="basket-catch",difficulty:r="medium"})=>{var n,i,o;try{const l=await((n=me.currentUser)==null?void 0:n.getIdToken());if(!l)throw new Error("No authentication token");const{data:c}=await ce.post("games/generate",{lessonId:t,stepIndex:e,gameType:s,difficulty:r},{headers:{Authorization:`Bearer ${l}`}});if(c.success)return{success:!0,game:c.game};throw new Error(c.error||"Failed to generate game")}catch(l){return{success:!1,error:((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.error)||l.message}}},xK=async t=>{var e,s,r;try{const n=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!n)throw new Error("No authentication token");const{data:i}=await ce.post("games/submit",t,{headers:{Authorization:`Bearer ${n}`}});if(i.success)return{success:!0,result:i.result};throw new Error(i.error||"Failed to submit game results")}catch(n){return{success:!1,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},LK=async(t,e={})=>{var s,r;try{const{limit:n=10,timeframe:i="all-time"}=e,o=new URLSearchParams({limit:n,timeframe:i}),{data:l}=await ce.get(`games/leaderboard/${t}?${o}`);if(l.success)return{success:!0,leaderboard:l.leaderboard,gameType:l.gameType,timeframe:l.timeframe};throw new Error(l.error||"Failed to fetch leaderboard")}catch(n){return{success:!1,leaderboard:[],error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},RK=async t=>{var e,s,r;try{const n=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!n)throw new Error("No authentication token");const{data:i}=await ce.get(`games/stats/${t}`,{headers:{Authorization:`Bearer ${n}`}});if(i.success)return{success:!0,stats:i.stats};throw new Error(i.error||"Failed to fetch game stats")}catch(n){return{success:!1,stats:null,error:((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.error)||n.message}}},NK=async()=>{var t,e;try{const{data:s}=await ce.get("games/types");if(s.success)return{success:!0,gameTypes:s.gameTypes};throw new Error(s.error||"Failed to fetch game types")}catch(s){return{success:!1,gameTypes:[],error:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.error)||s.message}}},OK=async({lessonId:t,stepIndex:e,gameType:s})=>{var r,n,i;try{const o=await((r=me.currentUser)==null?void 0:r.getIdToken());if(!o)throw new Error("No authentication token");const{data:l}=await ce.post("games/convert-exercise",{lessonId:t,stepIndex:e,gameType:s},{headers:{Authorization:`Bearer ${o}`}});if(l.success)return{success:!0,gameConfig:l.gameConfig,message:l.message};throw new Error(l.error||"Failed to convert exercise")}catch(o){return{success:!1,error:((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.error)||o.message}}},bf={"basket-catch":{id:"basket-catch",name:"Basket Catch",description:"Catch falling correct answers in your basket",icon:"",category:"throwing",difficulty:["easy","medium","hard"],bestFor:["quick-recall","recognition","vocabulary"]},"target-practice":{id:"target-practice",name:"Target Practice",description:"Shoot correct answers at moving targets",icon:"",category:"throwing",difficulty:["easy","medium","hard"],bestFor:["accuracy","math-operations","quick-facts"]},"memory-cards":{id:"memory-cards",name:"Memory Cards",description:"Match pairs of related items",icon:"",category:"matching",difficulty:["easy","medium","hard"],bestFor:["matching","memorization","vocabulary-pairs"]},"connection-lines":{id:"connection-lines",name:"Connection Lines",description:"Draw lines between matching items",icon:"",category:"matching",difficulty:["easy","medium","hard"],bestFor:["relationships","definitions","translations"]},"whack-a-mole":{id:"whack-a-mole",name:"Whack-a-Mole",description:"Hit correct answers as they appear",icon:"",category:"reaction",difficulty:["easy","medium","hard"],bestFor:["speed","grammar-errors","quick-selection"]},"lightning-round":{id:"lightning-round",name:"Lightning Round",description:"Rapid-fire questions with timer",icon:"",category:"reaction",difficulty:["easy","medium","hard"],bestFor:["speed-drills","multiplication-tables","quick-recall"]},"tower-builder":{id:"tower-builder",name:"Tower Builder",description:"Stack blocks with correct answers",icon:"",category:"building",difficulty:["easy","medium","hard"],bestFor:["sentence-building","sequencing","ordering"]},"scale-balance":{id:"scale-balance",name:"Scale Balance",description:"Balance scales with correct weights",icon:"",category:"strategy",difficulty:["easy","medium","hard"],bestFor:["equations","equivalent-values","math-balance"]},"pattern-builder":{id:"pattern-builder",name:"Pattern Builder",description:"Complete the pattern",icon:"",category:"strategy",difficulty:["easy","medium","hard"],bestFor:["sequences","logic","predictions"]},"maze-runner":{id:"maze-runner",name:"Maze Runner",description:"Navigate maze by answering questions",icon:"",category:"movement",difficulty:["easy","medium","hard"],bestFor:["sequential-learning","step-by-step","navigation"]}},MK=t=>bf[t]||null,DK=t=>Object.values(bf).filter(e=>e.category===t),$K=()=>{const t=new Set(Object.values(bf).map(e=>e.category));return Array.from(t)},UK=Object.freeze(Object.defineProperty({__proto__:null,GAME_TYPES:bf,convertExerciseToGame:OK,generateGame:PK,getGameCategories:$K,getGameLeaderboard:LK,getGameTypeMetadata:MK,getGameTypes:NK,getGameTypesByCategory:DK,getUserGameStats:RK,submitGameResults:xK},Symbol.toStringTag,{value:"Module"})),FK="https://api.aced.live",VK=ht.create({baseURL:FK,headers:{"Content-Type":"application/json"},timeout:15e3});VK.interceptors.request.use(async t=>{try{const e=me.currentUser;if(e){const s=await e.getIdToken(!0);t.headers.Authorization=`Bearer ${s}`}return t}catch(e){return Promise.reject(e)}});const BK=async()=>{try{const t=me.currentUser;return t?await t.getIdToken(!0):localStorage.getItem("token")||null}catch(t){return console.error("[promocodes.js] Error getting auth token:",t),null}},qK=()=>{const t=me.currentUser;return t!=null&&t.uid?t.uid:localStorage.getItem("userId")||localStorage.getItem("firebaseUserId")||null},ug=async t=>{var e,s,r,n,i,o,l;try{if(!t||t.trim().length<3)return{valid:!1,error:"Promocode is too short"};const c=t.trim().toUpperCase(),{data:u}=await ce.get(`promocodes/validate/${c}`);return u.valid||u.success?{valid:!0,code:c,data:u.data||{},plan:((e=u.data)==null?void 0:e.grantsPlan)||u.plan||"pro",duration:((s=u.data)==null?void 0:s.subscriptionDays)||u.duration||30,discount:u.discount||100,message:u.message||"Promocode is valid"}:{valid:!1,error:u.message||u.error||"Invalid promocode"}}catch(c){return((r=c.response)==null?void 0:r.status)===404?{valid:!1,error:"Promocode not found"}:((n=c.response)==null?void 0:n.status)===410?{valid:!1,error:"Promocode has expired"}:((i=c.response)==null?void 0:i.status)===409?{valid:!1,error:"Promocode already used"}:{valid:!1,error:((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||c.message||"Failed to validate promocode"}}},cP=async(t,e=null)=>{var s,r,n,i,o,l,c,u;try{if(!t||t.trim().length<3)return{success:!1,error:"Promocode is too short"};const d=await BK();if(!d)return{success:!1,error:"Not authenticated"};const f=e||qK();if(!f)return{success:!1,error:"No user ID available"};const p=t.trim().toUpperCase(),g={Authorization:`Bearer ${d}`},{data:b}=await ce.post("promocodes/apply",{code:p,userId:f},{headers:g});if(b.success){const k=new Date,L=b.duration||30,V=new Date(k.getTime()+L*24*60*60*1e3);return{success:!0,message:b.message||`Promocode applied! ${(b.plan||"Pro").toUpperCase()} activated.`,plan:b.plan||"pro",duration:L,expiryDate:V.toISOString(),promocode:p}}else return{success:!1,error:b.message||b.error||"Failed to apply promocode"}}catch(d){return((s=d.response)==null?void 0:s.status)===404?{success:!1,error:"Promocode not found"}:((r=d.response)==null?void 0:r.status)===410?{success:!1,error:"Promocode has expired"}:((n=d.response)==null?void 0:n.status)===409?{success:!1,error:"Promocode already used"}:((i=d.response)==null?void 0:i.status)===400?{success:!1,error:((l=(o=d.response)==null?void 0:o.data)==null?void 0:l.message)||"Invalid promocode"}:{success:!1,error:((u=(c=d.response)==null?void 0:c.data)==null?void 0:u.message)||d.message||"Failed to apply promocode"}}},Tw=Object.freeze(Object.defineProperty({__proto__:null,applyPromocode:cP,validatePromocode:ug},Symbol.toStringTag,{value:"Module"})),{getUpdatedCourses:hv,getUpdatedCoursesWithFormat:uP,getCourseStructuredEnhanced:dg,getTopicsGrouped:fv,getTopicsAsCourses:pv}=JC,{getTopics:dP,getTopicById:hP,getLessonsByTopic:fP,getAllLessons:mv,getLessonById:pP}=ZC,{getAllHomeworks:mP,getHomeworkByLesson:gP,getStandaloneHomework:yP,saveHomework:vP,submitHomework:_P,saveStandaloneHomework:bP,submitStandaloneHomework:wP}=eA,{submitProgress:jK,getLessonProgress:HK,getUserProgress:gv,getUserAnalytics:SP}=tA,{getUserStatus:WK,saveUser:zK,getUserStudyList:yv,addToStudyList:EP,removeFromStudyList:GK,getLearningProfile:vv,getPersonalizedRecommendations:_v,getUserRewards:bv,updateStreak:wv}=eh,{initiatePaymePayment:TP,checkPaymentStatus:kP}=VA,{initiateMulticardPayment:IP,createPaymentByToken:CP,confirmPayment:AP}=cg,{submitGameResults:KK}=UK,YK=Object.freeze(Object.defineProperty({__proto__:null,BASE_URL:FC,CoursesAPI:JC,HomeworkAPI:eA,LessonsAPI:ZC,MulticardAPI:cg,PaymentsAPI:VA,ProgressAPI:tA,UserAPI:eh,addToStudyList:EP,checkPaymentStatus:kP,confirmPayment:AP,createPaymentByToken:CP,default:ce,getAllHomeworks:mP,getAllLessons:mv,getCourseStructuredEnhanced:dg,getHomeworkByLesson:gP,getLearningProfile:vv,getLessonById:pP,getLessonProgress:HK,getLessonsByTopic:fP,getPersonalizedRecommendations:_v,getStandaloneHomework:yP,getTopicById:hP,getTopics:dP,getTopicsAsCourses:pv,getTopicsGrouped:fv,getUpdatedCourses:hv,getUpdatedCoursesWithFormat:uP,getUserAnalytics:SP,getUserProgress:gv,getUserRewards:bv,getUserStatus:WK,getUserStudyList:yv,getValidToken:BC,initiateMulticardPayment:IP,initiatePaymePayment:TP,multicardAPI:cg,removeFromStudyList:GK,saveHomework:vP,saveStandaloneHomework:bP,saveUser:zK,submitGameResults:KK,submitHomework:_P,submitProgress:jK,submitStandaloneHomework:wP,updateStreak:wv,withErrorHandling:Iq},Symbol.toStringTag,{value:"Module"})),QK={name:"AcedSection",data(){return{allCourses:[],filteredCourses:[],displayedCourses:[],maxDisplayedCourses:6,loadingCourses:!0,processingCourse:null,showRegistrationModal:!1,selectedCourse:null,errorMessage:null,retryCount:0,maxRetries:3,navigationInProgress:!1}},async mounted(){await this.initializeCourses()},methods:{getTypeClasses(t){return this.getTopicType(t)==="free"?"bg-green-100 text-green-700":"bg-violet-100 text-violet-700"},async initializeCourses(){this.loadingCourses=!0,this.errorMessage=null;try{let t=await this.fetchCoursesFromLessons();(!t||t.length===0)&&(t=await this.fetchCoursesFromTopics()),t&&t.length>0?(this.allCourses=t,this.filterCourses()):(this.allCourses=[],this.filteredCourses=[],this.displayedCourses=[])}catch{this.errorMessage="Error loading courses"}finally{this.loadingCourses=!1}},async fetchCoursesFromLessons(){try{const t=await mv();return t!=null&&t.success&&Array.isArray(t.data)&&t.data.length>0?this.buildCoursesFromLessons(t.data):[]}catch{return[]}},async fetchCoursesFromTopics(){try{const t=await dP({includeStats:!0});return t!=null&&t.success&&Array.isArray(t.data)&&t.data.length>0?t.data.filter(e=>e.lessons&&e.lessons.length>0):[]}catch{return[]}},buildCoursesFromLessons(t){const e=new Map;return t.forEach(s=>{if(!(s!=null&&s.topicId))return;const r=typeof s.topicId=="string"?s.topicId:s.topicId._id||String(s.topicId),n=(s==null?void 0:s.topic)||(s==null?void 0:s.lessonName)||"No Topic";if(!e.has(r))e.set(r,{_id:r,name:n,description:`Course on "${n}"`,level:s.level||1,type:s.type||"free",lessons:[s],totalTime:parseInt(s.estimatedTime||10)});else{const i=e.get(r);i.lessons.push(s),i.totalTime+=parseInt(s.estimatedTime||10)}}),Array.from(e.values()).sort((s,r)=>s.type==="free"&&r.type!=="free"?-1:r.type==="free"&&s.type!=="free"?1:0)},filterCourses(){this.filteredCourses=[...this.allCourses],this.displayedCourses=this.filteredCourses.slice(0,this.maxDisplayedCourses)},async refreshCourses(){if(this.retryCount>=this.maxRetries){this.errorMessage="Max retries exceeded";return}this.retryCount++,await this.initializeCourses(),this.errorMessage||(this.retryCount=0)},handleCourseClick(t){this.handleStartCourse(t)},async handleStartCourse(t){var e,s;if(!(!(t!=null&&t._id)||this.processingCourse===t._id||this.navigationInProgress)){this.processingCourse=t._id,this.navigationInProgress=!0;try{const r=this.getTopicType(t),n=!!oI().currentUser;if(r==="free"){const i=(e=t.lessons)==null?void 0:e[0];i!=null&&i._id&&await this.$router.push({name:"LessonPage",params:{id:String(i._id).trim()},query:{type:"free"}})}else if(n){const i=(s=t.lessons)==null?void 0:s[0];i!=null&&i._id&&await this.$router.push({name:"LessonPage",params:{id:String(i._id).trim()},query:{type:r}})}else this.selectedCourse=t,this.showRegistrationModal=!0}catch{this.errorMessage="Unable to open course"}finally{setTimeout(()=>{this.processingCourse=null,this.navigationInProgress=!1},1e3)}}},triggerRegistration(){window.dispatchEvent(new Event("open-Login-modal")),this.closeRegistrationModal()},closeRegistrationModal(){this.showRegistrationModal=!1,this.selectedCourse=null},getTopicName(t){return(t==null?void 0:t.name)||(t==null?void 0:t.topicName)||"Untitled"},getTopicDescription(t){const e=(t==null?void 0:t.description)||"";return e.length>80?e.substring(0,80)+"...":e||`Learn ${this.getTopicName(t)}`},getTopicType(t){const e=String((t==null?void 0:t.type)||"free").toLowerCase();return["premium","paid","start","pro","professional"].includes(e)?"pro":"free"},getTopicTypeLabel(t){return{free:"Free",pro:"Pro"}[this.getTopicType(t)]||"Free"}}},XK={class:"py-20 lg:py-24 bg-white",id:"aced"},JK={class:"max-w-7xl mx-auto px-6 lg:px-16"},ZK={class:"text-center mb-16"},eY={class:"inline-flex items-center gap-2 px-4 py-2 bg-violet-50 rounded-full border border-violet-100 mb-8"},tY={class:"text-sm font-medium text-violet-700"},sY={class:"flex flex-col items-center gap-4"},rY={class:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900"},nY={class:"text-violet-600"},iY={class:"text-lg lg:text-xl text-gray-500 text-center max-w-2xl"},oY={class:"relative min-h-[300px]"},aY={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},lY={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},cY=["onClick"],uY={class:"p-6"},dY={class:"flex justify-between items-start mb-4"},hY={class:"text-xs font-medium text-gray-400"},fY={class:"text-lg font-bold text-gray-900 mb-2 group-hover:text-violet-600 transition-colors"},pY={class:"text-gray-500 text-sm leading-relaxed line-clamp-2 mb-4"},mY={class:"flex items-center justify-between pt-4 border-t border-gray-50"},gY={class:"flex items-center gap-4 text-xs text-gray-400"},yY=["onClick","disabled"],vY={key:2,class:"text-center py-16 bg-gray-50 rounded-2xl border border-gray-100"},_Y={class:"text-lg font-bold text-gray-900 mb-2"},bY={class:"text-gray-500 mb-4"},wY={class:"text-center mb-6"},SY={class:"text-xl font-bold text-gray-900 mb-2"},EY={class:"text-gray-500 text-sm"},TY={key:0,class:"bg-gray-50 rounded-xl p-4 mb-6"},kY={class:"font-semibold text-gray-900"},IY={class:"text-sm text-gray-500"},CY={class:"space-y-3"},AY={key:1,class:"fixed bottom-6 right-6 z-[100] bg-white text-gray-900 px-5 py-3 rounded-xl border border-gray-200 shadow-lg flex items-center gap-3"},PY={class:"text-sm"};function xY(t,e,s,r,n,i){var o;return v(),S("section",XK,[a("div",JK,[a("div",ZK,[a("div",eY,[e[7]||(e[7]=a("span",{class:"w-2 h-2 bg-violet-500 rounded-full"},null,-1)),a("span",tY,m(t.$t("acedSection.exploreCourses")),1)]),a("div",sY,[a("h2",rY,[se(m(t.$t("acedSection.startLearning"))+" ",1),a("span",nY,m(t.$t("acedSection.today")),1)]),a("p",iY,m(t.$t("acedSection.chooseCourse")),1)])]),a("div",oY,[n.loadingCourses?(v(),S("div",aY,[(v(),S(he,null,be(6,l=>a("div",{key:l,class:"h-[280px] bg-gray-50 rounded-2xl animate-pulse"})),64))])):n.displayedCourses.length>0?(v(),S("div",lY,[(v(!0),S(he,null,be(n.displayedCourses,l=>{var c;return v(),S("div",{key:l._id,class:"group bg-white rounded-2xl border border-gray-100 hover:border-violet-200 overflow-hidden transition-all duration-200 hover:shadow-lg cursor-pointer",onClick:u=>i.handleCourseClick(l)},[a("div",uY,[a("div",dY,[a("span",{class:ge(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",i.getTypeClasses(l)])},m(i.getTopicTypeLabel(l)),3),a("span",hY,m(t.$t("acedSection.lvl"))+" "+m(l.level||1),1)]),a("h3",fY,m(i.getTopicName(l)),1),a("p",pY,m(i.getTopicDescription(l)),1),a("div",mY,[a("div",gY,[a("span",null,m(((c=l.lessons)==null?void 0:c.length)||0)+" "+m(t.$t("acedSection.lessons")),1),a("span",null,m(Math.round((l.totalTime||0)/60)||1)+"h",1)]),a("button",{class:"text-sm font-semibold text-violet-600 hover:text-violet-700 flex items-center gap-1",onClick:vt(u=>i.handleStartCourse(l),["stop"]),disabled:n.processingCourse===l._id},[se(m(t.$t("acedSection.start"))+" ",1),e[8]||(e[8]=a("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,yY)])])],8,cY)}),128))])):(v(),S("div",vY,[e[9]||(e[9]=a("div",{class:"w-16 h-16 mx-auto mb-4 bg-violet-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-8 h-8 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),a("h3",_Y,m(t.$t("acedSection.noCoursesFound")),1),a("p",bY,m(t.$t("acedSection.loadingContent")),1),n.loadingCourses?G("",!0):(v(),S("button",{key:0,onClick:e[0]||(e[0]=(...l)=>i.refreshCourses&&i.refreshCourses(...l)),class:"px-6 py-2 bg-violet-600 text-white font-semibold rounded-lg hover:bg-violet-700 transition-colors"},m(t.$t("acedSection.tryAgain")),1))]))]),n.showRegistrationModal?(v(),S("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:e[5]||(e[5]=(...l)=>i.closeRegistrationModal&&i.closeRegistrationModal(...l))},[e[12]||(e[12]=a("div",{class:"absolute inset-0 bg-gray-900/50"},null,-1)),a("div",{class:"relative w-full max-w-md bg-white rounded-2xl shadow-xl p-8",onClick:e[4]||(e[4]=vt(()=>{},["stop"]))},[a("button",{class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",onClick:e[1]||(e[1]=(...l)=>i.closeRegistrationModal&&i.closeRegistrationModal(...l))},e[10]||(e[10]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("div",wY,[e[11]||(e[11]=a("div",{class:"w-14 h-14 bg-violet-100 rounded-xl flex items-center justify-center mx-auto mb-4"},[a("svg",{class:"w-7 h-7 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),a("h2",SY,m(t.$t("acedSection.unlockCourse")),1),a("p",EY,m(t.$t("acedSection.createFreeAccount")),1)]),n.selectedCourse?(v(),S("div",TY,[a("h3",kY,m(i.getTopicName(n.selectedCourse)),1),a("p",IY,m(((o=n.selectedCourse.lessons)==null?void 0:o.length)||0)+" lessons",1)])):G("",!0),a("div",CY,[a("button",{class:"w-full py-3 rounded-xl bg-violet-600 text-white font-semibold hover:bg-violet-700 transition-colors",onClick:e[2]||(e[2]=(...l)=>i.triggerRegistration&&i.triggerRegistration(...l))},m(t.$t("acedSection.createAccount")),1),a("button",{class:"w-full py-3 rounded-xl text-gray-500 font-medium hover:bg-gray-50 transition-colors",onClick:e[3]||(e[3]=(...l)=>i.closeRegistrationModal&&i.closeRegistrationModal(...l))},m(t.$t("acedSection.maybeLater")),1)])])])):G("",!0),n.errorMessage?(v(),S("div",AY,[a("span",PY,m(n.errorMessage),1),a("button",{class:"text-sm font-semibold text-violet-600",onClick:e[6]||(e[6]=(...l)=>i.refreshCourses&&i.refreshCourses(...l))},"Retry")])):G("",!0)])])}const LY=Je(QK,[["render",xY]]),RY={name:"TariffSection",data(){return{features:["allSubjectsIncluded","unlimitedAiHelp","progressTracking","homeworkAssistance","prioritySupport"]}},computed:{...tn(["getUser"]),isAuthenticated(){return!!this.getUser},translatedFeatures(){return this.features.map(t=>this.$t(`tariffSection.${t}`))}},methods:{handleSubscribe(t){this.isAuthenticated?this.$router.push("/settings"):window.dispatchEvent(new CustomEvent("open-Login-modal"))}}},NY={class:"py-20 lg:py-24 bg-white",id:"tariffs"},OY={class:"max-w-7xl mx-auto px-6 lg:px-16"},MY={class:"text-center mb-20"},DY={class:"inline-flex items-center gap-2 px-4 py-2 bg-violet-50 rounded-full border border-violet-100 mb-8"},$Y={class:"text-sm font-medium text-violet-700"},UY={class:"flex flex-col items-center gap-4"},FY={class:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900"},VY={class:"text-violet-600"},BY={class:"text-lg lg:text-xl text-gray-500 text-center max-w-2xl"},qY={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},jY={class:"bg-white rounded-2xl border border-gray-100 p-8 hover:border-violet-200 transition-colors"},HY={class:"mb-6"},WY={class:"text-lg font-bold text-gray-900 mb-1"},zY={class:"text-gray-500 text-sm"},GY={class:"mb-6"},KY={class:"text-gray-500 ml-1"},YY={class:"space-y-3"},QY={class:"bg-white rounded-2xl p-8 relative md:-translate-y-4 ring-2 ring-violet-500 shadow-xl shadow-violet-500/10"},XY={class:"absolute -top-3 left-1/2 -translate-x-1/2"},JY={class:"px-4 py-1.5 bg-violet-600 text-white text-xs font-bold rounded-full shadow-lg"},ZY={class:"mb-6 pt-2"},eQ={class:"text-lg font-bold text-gray-900 mb-1"},tQ={class:"text-gray-500 text-sm"},sQ={class:"mb-6"},rQ={class:"text-sm text-gray-500"},nQ={class:"ml-2 px-2 py-0.5 bg-amber-100 rounded text-xs text-amber-700 font-medium"},iQ={class:"space-y-3"},oQ={class:"bg-white rounded-2xl border border-gray-100 p-8 hover:border-violet-200 transition-colors"},aQ={class:"mb-6"},lQ={class:"text-lg font-bold text-gray-900 mb-1"},cQ={class:"text-gray-500 text-sm"},uQ={class:"mb-6"},dQ={class:"text-sm text-gray-500"},hQ={class:"ml-2 px-2 py-0.5 bg-amber-100 rounded text-xs text-amber-700 font-medium"},fQ={class:"space-y-3"},pQ={class:"mt-12 flex flex-wrap justify-center gap-8 text-sm text-gray-500"},mQ={class:"flex items-center gap-2"},gQ={class:"flex items-center gap-2"},yQ={class:"flex items-center gap-2"};function vQ(t,e,s,r,n,i){return v(),S("section",NY,[a("div",OY,[a("div",MY,[a("div",DY,[e[3]||(e[3]=a("span",{class:"w-2 h-2 bg-violet-500 rounded-full"},null,-1)),a("span",$Y,m(t.$t("tariffSection.pricing")),1)]),a("div",UY,[a("h2",FY,[se(m(t.$t("tariffSection.simplePricing").split(" ")[0])+" ",1),a("span",VY,m(t.$t("tariffSection.simplePricing").split(" ")[1]||""),1)]),a("p",BY,m(t.$t("tariffSection.noHiddenFees")),1)])]),a("div",qY,[a("div",jY,[a("div",HY,[a("h3",WY,m(t.$t("tariffSection.monthly")),1),a("p",zY,m(t.$t("tariffSection.greatForTrying")),1)]),a("div",GY,[e[4]||(e[4]=a("span",{class:"text-4xl font-bold text-gray-900"},"250K",-1)),a("span",KY,"UZS"+m(t.$t("tariffSection.perMonth")),1)]),a("button",{onClick:e[0]||(e[0]=o=>i.handleSubscribe(1)),class:"w-full py-3 px-6 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-violet-500 hover:text-violet-600 transition-all mb-6"},m(t.$t("tariffSection.getStarted")),1),a("ul",YY,[(v(!0),S(he,null,be(i.translatedFeatures,(o,l)=>(v(),S("li",{key:l,class:"flex items-center gap-3 text-sm text-gray-600"},[e[5]||(e[5]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),se(" "+m(o),1)]))),128))])]),a("div",QY,[a("div",XY,[a("span",JY,m(t.$t("tariffSection.popular")),1)]),a("div",ZY,[a("h3",eQ,m(t.$t("tariffSection.quarterly")),1),a("p",tQ,m(t.$t("tariffSection.bestValue")),1)]),e[7]||(e[7]=a("div",{class:"mb-2"},[a("span",{class:"text-4xl font-bold text-gray-900"},"675K"),a("span",{class:"text-gray-500 ml-1"},"UZS")],-1)),a("div",sQ,[a("span",rQ,m(t.$t("tariffSection.forMonths",{months:3})),1),a("span",nQ,m(t.$t("tariffSection.save",{percent:10})),1)]),a("button",{onClick:e[1]||(e[1]=o=>i.handleSubscribe(3)),class:"w-full py-3 px-6 bg-violet-600 text-white font-semibold rounded-xl hover:bg-violet-700 transition-colors mb-6 shadow-lg shadow-violet-600/20"},m(t.$t("tariffSection.startLearning")),1),a("ul",iQ,[(v(!0),S(he,null,be(i.translatedFeatures,(o,l)=>(v(),S("li",{key:l,class:"flex items-center gap-3 text-sm text-gray-600"},[e[6]||(e[6]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),se(" "+m(o),1)]))),128))])]),a("div",oQ,[a("div",aQ,[a("h3",lQ,m(t.$t("tariffSection.biannual")),1),a("p",cQ,m(t.$t("tariffSection.maximumSavings")),1)]),e[9]||(e[9]=a("div",{class:"mb-2"},[a("span",{class:"text-4xl font-bold text-gray-900"},"1.2M"),a("span",{class:"text-gray-500 ml-1"},"UZS")],-1)),a("div",uQ,[a("span",dQ,m(t.$t("tariffSection.forMonths",{months:6})),1),a("span",hQ,m(t.$t("tariffSection.save",{percent:20})),1)]),a("button",{onClick:e[2]||(e[2]=o=>i.handleSubscribe(6)),class:"w-full py-3 px-6 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-violet-500 hover:text-violet-600 transition-all mb-6"},m(t.$t("tariffSection.subscribe")),1),a("ul",fQ,[(v(!0),S(he,null,be(i.translatedFeatures,(o,l)=>(v(),S("li",{key:l,class:"flex items-center gap-3 text-sm text-gray-600"},[e[8]||(e[8]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),se(" "+m(o),1)]))),128))])])]),a("div",pQ,[a("span",mQ,[e[10]||(e[10]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),se(" "+m(t.$t("tariffSection.securePayment")),1)]),a("span",gQ,[e[11]||(e[11]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),se(" "+m(t.$t("tariffSection.cancelAnytime")),1)]),a("span",yQ,[e[12]||(e[12]=a("svg",{class:"w-5 h-5 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),se(" "+m(t.$t("tariffSection.instantAccess")),1)])])])])}const _Q=Je(RY,[["render",vQ]]),bQ={data(){return{form:{name:"",email:"",message:""}}},methods:{submitForm(){alert("!      Email."),this.$emit("close")}}},wQ={class:"modal-box"};function SQ(t,e,s,r,n,i){return v(),S("div",{class:"modal-overlay",onClick:e[6]||(e[6]=vt(o=>t.$emit("close"),["self"]))},[a("div",wQ,[a("button",{class:"close-x",onClick:e[0]||(e[0]=o=>t.$emit("close"))},""),e[8]||(e[8]=a("h2",null,"  ",-1)),a("form",{onSubmit:e[5]||(e[5]=vt((...o)=>i.submitForm&&i.submitForm(...o),["prevent"]))},[Pe(a("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.form.name=o),type:"text",placeholder:" ",required:""},null,512),[[Ke,n.form.name]]),Pe(a("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.form.email=o),type:"email",placeholder:" Email",required:""},null,512),[[Ke,n.form.email]]),Pe(a("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.form.message=o),placeholder:" ",required:""},null,512),[[Ke,n.form.message]]),e[7]||(e[7]=a("button",{type:"submit"},"",-1)),a("button",{type:"button",class:"close-btn",onClick:e[4]||(e[4]=o=>t.$emit("close"))},"")],32)])])}const EQ=Je(bQ,[["render",SQ],["__scopeId","data-v-bb42f243"]]),TQ={name:"FooterBar",components:{ContactModal:EQ},data(){return{showAIModal:!1,showContact:!1}},methods:{showAIHelperModal(){this.showAIModal=!0},showContactModal(){this.showContact=!0},closeModals(){this.showAIModal=!1,this.showContact=!1}}},kQ={class:"bg-white py-20 lg:py-24",id:"contacts"},IQ={class:"max-w-7xl mx-auto px-6 lg:px-16"},CQ={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12"},AQ={class:"lg:col-span-2"},PQ={class:"text-gray-500 text-sm leading-relaxed mb-6 max-w-sm"},xQ={class:"font-semibold text-gray-900 mb-4"},LQ={class:"space-y-3"},RQ={href:"#about-us",class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},NQ={href:"#aced",class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},OQ={href:"#tariffs",class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},MQ={class:"font-semibold text-gray-900 mb-4"},DQ={class:"space-y-3"},$Q={class:"pt-8 border-t border-gray-100 flex flex-col md:flex-row justify-between items-center gap-4"},UQ={class:"text-gray-400 text-sm"},FQ={class:"flex items-center gap-6"},VQ={href:"/privacy-policy.html",target:"_blank",class:"text-gray-400 hover:text-violet-600 text-sm transition-colors"},BQ={href:"/terms-of-service.html",target:"_blank",class:"text-gray-400 hover:text-violet-600 text-sm transition-colors"},qQ={key:0,class:"relative w-full max-w-md bg-white rounded-2xl shadow-xl p-8 text-center"},jQ={class:"text-xl font-bold text-gray-900 mb-2"},HQ={class:"text-gray-500 text-sm mb-6"};function WQ(t,e,s,r,n,i){const o=Ht("ContactModal");return v(),S("footer",kQ,[a("div",IQ,[a("div",CQ,[a("div",AQ,[e[6]||(e[6]=a("div",{class:"flex items-center gap-3 mb-4"},[a("img",{src:av,alt:"ACED",class:"h-10 w-10 object-contain"}),a("span",{class:"text-xl font-bold text-gray-900"},"ACED")],-1)),a("p",PQ,m(t.$t("footer.slogan")),1),e[7]||(e[7]=at('<div class="flex gap-3"><a href="https://instagram.com/aced.live" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-violet-50 hover:text-violet-600 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a><a href="https://tiktok.com/@aced.live" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-violet-50 hover:text-violet-600 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"></path></svg></a><a href="https://t.me/aced_live" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-gray-50 text-gray-400 flex items-center justify-center hover:bg-violet-50 hover:text-violet-600 transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg></a></div>',1))]),a("div",null,[a("h4",xQ,m(t.$t("footer.navigation")),1),a("ul",LQ,[a("li",null,[a("a",RQ,m(t.$t("footer.aboutUs")),1)]),a("li",null,[a("a",NQ,m(t.$t("footer.courses")),1)]),a("li",null,[a("a",OQ,m(t.$t("footer.pricing")),1)]),a("li",null,[a("a",{href:"#",onClick:e[0]||(e[0]=vt((...l)=>i.showAIHelperModal&&i.showAIHelperModal(...l),["prevent"])),class:"text-gray-500 hover:text-violet-600 text-sm transition-colors"},m(t.$t("footer.aiAssistant")),1)])])]),a("div",null,[a("h4",MQ,m(t.$t("footer.contact")),1),a("ul",DQ,[e[8]||(e[8]=a("li",{class:"text-gray-500 text-sm"},"@aced.live",-1)),a("li",null,[a("a",{href:"#",onClick:e[1]||(e[1]=vt((...l)=>i.showContactModal&&i.showContactModal(...l),["prevent"])),class:"text-violet-600 hover:text-violet-700 text-sm font-medium transition-colors"},m(t.$t("footer.contactUs")),1)])])])]),a("div",$Q,[a("p",UQ,m(t.$t("footer.allRights")),1),a("div",FQ,[a("a",VQ,m(t.$t("footer.privacyPolicy")),1),a("a",BQ,m(t.$t("footer.termsOfService")),1)])])]),n.showAIModal||n.showContact?(v(),S("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:e[5]||(e[5]=vt((...l)=>i.closeModals&&i.closeModals(...l),["self"]))},[e[11]||(e[11]=a("div",{class:"absolute inset-0 bg-gray-900/50"},null,-1)),n.showAIModal?(v(),S("div",qQ,[a("button",{class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",onClick:e[2]||(e[2]=l=>n.showAIModal=!1)},e[9]||(e[9]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e[10]||(e[10]=a("div",{class:"w-16 h-16 mx-auto bg-violet-100 rounded-xl flex items-center justify-center mb-4"},[a("svg",{class:"w-8 h-8 text-violet-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),a("h3",jQ,m(t.$t("footer.aiHelperTitle")),1),a("p",HQ,m(t.$t("footer.aiHelperText")),1),a("button",{class:"w-full py-3 rounded-xl bg-violet-600 text-white font-semibold hover:bg-violet-700 transition-colors",onClick:e[3]||(e[3]=l=>n.showAIModal=!1)},m(t.$t("footer.gotIt")),1)])):G("",!0),n.showContact?(v(),Yt(o,{key:1,onClose:e[4]||(e[4]=l=>n.showContact=!1)})):G("",!0)])):G("",!0)])}const zQ=Je(TQ,[["render",WQ]]),GQ=void 0,Ka=ht.create({baseURL:GQ,headers:{"Content-Type":"application/json"}}),PP=()=>{const t=new Date;return`${t.getFullYear()}-${t.getMonth()}`},xP=(t,e,s=!1)=>{const r={free:{messages:50,images:5},start:{messages:-1,images:20},pro:{messages:-1,images:-1}},n=r[t]||r.free;return n.messages!==-1&&e.messages>=n.messages?{allowed:!1,reason:"message_limit_exceeded",message:`   (${n.messages})   "${t}".    .`}:s&&n.images!==-1&&e.images>=n.images?{allowed:!1,reason:"image_limit_exceeded",message:`   (${n.images})   "${t}".    .`}:{allowed:!0,remaining:{messages:n.messages===-1?"":Math.max(0,n.messages-e.messages),images:n.images===-1?"":Math.max(0,n.images-e.images)}}};async function LP(){try{const t=me.currentUser;if(!t)throw new Error("   .");const e=await t.getIdToken(),s=await Ka.get("/chat/usage",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,usage:s.data.usage||{messages:0,images:0},plan:s.data.plan||"free",limits:s.data.limits||{messages:50,images:5}}}catch(t){return{success:!1,error:t.message,usage:{messages:0,images:0},plan:"free"}}}async function RP(t,e=null,s=null){var r,n,i,o,l,c,u,d,f,p,g,b,k,L,V,R;try{const E=me.currentUser;if(!E)throw new Error("   .");if(!t&&!e)return"     .";const N=await E.getIdToken(),D=await LP();if(!D.success)throw new Error("    .");const U=xP(D.plan,D.usage,!!e);if(!U.allowed)return` ${U.message}`;const C=await Ka.post("/chat",{userInput:t,imageUrl:e,lessonId:s,trackUsage:!0,monthKey:PP(),hasImage:!!e},{headers:{Authorization:`Bearer ${N}`},timeout:3e4}),w=((r=C.data)==null?void 0:r.reply)||((l=(o=(i=(n=C.data)==null?void 0:n.choices)==null?void 0:i[0])==null?void 0:o.message)==null?void 0:l.content)||" AI   .";return(c=C.data)!=null&&c.updatedUsage,w}catch(E){if(((u=E.response)==null?void 0:u.status)===429)return"   .    .";if(((d=E.response)==null?void 0:d.status)===403)return"  .    .";if(E.code==="ECONNABORTED"||E.message.includes("timeout"))return"     .  .";if((g=(p=(f=E.response)==null?void 0:f.data)==null?void 0:p.error)!=null&&g.includes("limit")||(L=(k=(b=E.response)==null?void 0:b.data)==null?void 0:k.error)!=null&&L.includes(""))return` ${E.response.data.error}`;const N="       AI.";return(R=(V=E==null?void 0:E.response)==null?void 0:V.data)!=null&&R.error||E.message,N}}async function _2e(t,e,s,r){var n,i,o;try{const l=me.currentUser;if(!l)throw new Error("      AI.");if(!t)return" ,     .";const c=await LP();if(!c.success)throw new Error("    ");const u=xP(c.plan,c.usage,!1);if(!u.allowed)return` ${u.message}`;const d=await l.getIdToken();return((n=(await Ka.post("/chat/lesson-context",{userInput:t,lessonContext:e,userProgress:s,stepContext:r,trackUsage:!0,monthKey:PP()},{headers:{Authorization:`Bearer ${d}`},timeout:3e4})).data)==null?void 0:n.reply)||"AI    ."}catch(l){return((i=l.response)==null?void 0:i.status)===429?"   .     .":((o=l.response)==null?void 0:o.status)===403?"  .    .":" ,  .     ."}}function b2e(t,e){const s=[];if(!t)return s;switch(t.type){case"explanation":s.push("   ?","     ?","     ?");break;case"exercise":(e==null?void 0:e.mistakes)>0?s.push("    ,   ?","     ?"," ,    ?"):s.push("   ?","      ?","   ?");break;case"quiz":case"tryout":s.push("     , ?","        ?","     ?");break;case"vocabulary":s.push("   ?","    ?","   ?");break;default:s.push("     ?","    ?","  - ,    ?")}return s}async function w2e(t,e,s){var r;if(e<2)return null;try{const n=me.currentUser;if(!n)return null;const i=await n.getIdToken();return((r=(await Ka.post("/chat/smart-hint",{exercise:t,mistakeCount:e,lessonContext:s},{headers:{Authorization:`Bearer ${i}`},timeout:15e3})).data)==null?void 0:r.reply)||" !           .   ! "}catch{return" !           .   ! "}}async function S2e(t,e){var s;try{const r=me.currentUser;if(!r)return null;const n=await r.getIdToken(),i=await Ka.post("/chat/progress-insight",{userProgress:t,lessonContext:e},{headers:{Authorization:`Bearer ${n}`},timeout:15e3}),o=Math.round(t.completedSteps.length/e.totalSteps*100);return((s=i.data)==null?void 0:s.reply)||` !   ${o}% .     ! `}catch{return` !   ${Math.round(t.completedSteps.length/e.totalSteps*100)}% .     ! `}}async function E2e(t,e,s){var r;try{const n=me.currentUser;if(!n)throw new Error("  ");const i=await n.getIdToken();return((r=(await Ka.post("/chat/explanation-help",{explanationText:t,userQuestion:e,lessonContext:s},{headers:{Authorization:`Bearer ${i}`},timeout:3e4})).data)==null?void 0:r.reply)||"     .   ."}catch{return"     .   ."}}const T2e=(t,e)=>{const s={free:{messages:50,images:5},start:{messages:-1,images:20},pro:{messages:-1,images:-1}},r=s[e]||s.free;return{messages:{used:t.messages||0,limit:r.messages,remaining:r.messages===-1?"":Math.max(0,r.messages-(t.messages||0)),percentage:r.messages===-1?0:Math.min(100,(t.messages||0)/r.messages*100)},images:{used:t.images||0,limit:r.images,remaining:r.images===-1?"":Math.max(0,r.images-(t.images||0)),percentage:r.images===-1?0:Math.min(100,(t.images||0)/r.images*100)}}},KQ={data(){return{isOpen:!1,isLoggedIn:!1,messages:[],userInput:""}},mounted(){jc(me,t=>{this.isLoggedIn=!!t})},methods:{toggleChat(){this.isOpen=!this.isOpen},login(){window.dispatchEvent(new CustomEvent("open-Login-modal")),window.scrollTo({top:0,behavior:"smooth"})},async sendMessage(){if(!this.userInput.trim())return;const t={text:this.userInput,sender:"user"};this.messages.push(t),this.userInput="",this.$nextTick(()=>{this.$refs.messagesArea.scrollTop=this.$refs.messagesArea.scrollHeight});const e=await RP(t.text);this.messages.push({text:e,sender:"bot"}),this.$nextTick(()=>{this.$refs.messagesArea.scrollTop=this.$refs.messagesArea.scrollHeight})}}},YQ={class:"chat-body"},QQ={key:0,class:"login-prompt"},XQ={key:1,class:"chat-content"},JQ={class:"messages-area",ref:"messagesArea"},ZQ={class:"input-area"};function eX(t,e,s,r,n,i){return v(),S("div",null,[n.isOpen?G("",!0):(v(),S("button",{key:0,class:"chat-fab",onClick:e[0]||(e[0]=(...o)=>i.toggleChat&&i.toggleChat(...o))},"  ")),a("div",{class:ge(["chatbot-container",{open:n.isOpen}])},[a("div",{class:"chat-header",onClick:e[2]||(e[2]=(...o)=>i.toggleChat&&i.toggleChat(...o))},[e[7]||(e[7]=a("span",null,"AI Assistant",-1)),a("button",{class:"close-btn",onClick:e[1]||(e[1]=vt((...o)=>i.toggleChat&&i.toggleChat(...o),["stop"]))},"")]),a("div",YQ,[n.isLoggedIn?(v(),S("div",XQ,[a("div",JQ,[(v(!0),S(he,null,be(n.messages,(o,l)=>(v(),S("div",{key:l,class:ge(["message",o.sender])},m(o.text),3))),128))],512),a("div",ZQ,[Pe(a("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>n.userInput=o),onKeyup:e[5]||(e[5]=ya((...o)=>i.sendMessage&&i.sendMessage(...o),["enter"])),placeholder:"Ask me anything..."},null,544),[[Ke,n.userInput]]),a("button",{onClick:e[6]||(e[6]=(...o)=>i.sendMessage&&i.sendMessage(...o))},"")])])):(v(),S("div",QQ,[e[8]||(e[8]=a("p",null,"Please log in to start a conversation.",-1)),a("button",{onClick:e[3]||(e[3]=(...o)=>i.login&&i.login(...o))},"Log In")]))])],2)])}const tX=Je(KQ,[["render",eX],["__scopeId","data-v-ab3a2e29"]]),sX={class:"home-page"},rX={id:"hero"},nX={id:"about-us"},iX={id:"aced"},oX={id:"tariffs"},aX={id:"cards"},lX={__name:"HomePage",setup(t){return(e,s)=>(v(),S("div",sX,[a("section",rX,[xe(Lz)]),a("section",nX,[xe(WC)]),a("section",iX,[xe(LY)]),a("section",oX,[xe(_Q)]),a("section",aX,[xe(zQ)]),xe(tX)]))}},cX=Je(lX,[["__scopeId","data-v-6b74c179"]]),wf={data(){return{reactivityKey:0,lastStatusUpdate:Date.now(),componentMountTime:Date.now(),statusChangeHistory:[],eventCleanupFunctions:[],storeUnsubscribe:null,globalEventHandlers:{},lastSyncTime:Date.now(),syncCheckInterval:null,forceUpdateTimeout:null,statusChangeNotifications:[],lastNotificationTime:0}},computed:{reactiveUserStatus(){var t,e,s,r;this.reactivityKey,this.lastStatusUpdate,this.componentMountTime;try{const n=(t=this.$store)==null?void 0:t.getters["user/userStatus"],i=localStorage.getItem("userStatus"),o=(r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.subscriptionPlan;return n||i||o||"free"}catch{return"free"}},reactiveIsPremiumUser(){const t=this.reactiveUserStatus;return t==="start"||t==="pro"},reactiveIsStartUser(){return this.reactiveUserStatus==="start"},reactiveIsProUser(){return this.reactiveUserStatus==="pro"},reactiveIsFreeUser(){return this.reactiveUserStatus==="free"},userStatusLabel(){const t=this.reactiveUserStatus;return{pro:"Pro",start:"Start",free:"Free"}[t]||"Free"},subscriptionClass(){const t=this.reactiveUserStatus;return{pro:"badge-pro",start:"badge-start",free:"badge-free"}[t]||"badge-free"},subscriptionText(){const t=this.reactiveUserStatus;return{pro:"Pro subscription",start:"Start subscription",free:"Free access"}[t]||"Free access"},getStatusBadgeClass(){return()=>{const t=this.reactiveUserStatus;return{pro:"status-pro",start:"status-start",free:"status-free"}[t]||"status-free"}}},watch:{reactiveUserStatus:{handler(t,e){t!==e&&(this.recordStatusChange(t,e),this.onUserStatusChanged(t,e))},immediate:!0},"$store.state.user.userStatus":{handler(t,e){t!==e&&this.triggerReactivityUpdate()},immediate:!0},"$store.state.user":{handler(t,e){const s=t==null?void 0:t.subscriptionPlan,r=e==null?void 0:e.subscriptionPlan;s!==r&&this.handleUserObjectChange(t,e)},deep:!0,immediate:!0}},async mounted(){try{this.componentMountTime=Date.now(),await this.setupUniversalEventListeners(),this.setupStoreSubscription(),this.setupPeriodicStatusSync(),await this.syncStatusWithStore()}catch{}},beforeUnmount(){this.cleanupStatusMixin()},methods:{onUserStatusChanged(t,e){t&&t!=="free"&&e==="free"&&this.showStatusUpgradeNotification(t)},async setupUniversalEventListeners(){typeof window<"u"&&(this.globalEventHandlers.subscriptionChange=t=>{const{plan:e,source:s,oldPlan:r}=t.detail;this.handleSubscriptionChange(e,r,s)},this.globalEventHandlers.statusChange=t=>{const{newStatus:e,oldStatus:s,source:r}=t.detail;this.handleStatusChange(e,s,r)},this.globalEventHandlers.storageChange=t=>{t.key==="userStatus"&&t.newValue!==t.oldValue&&this.handleStatusChange(t.newValue,t.oldValue,"localStorage")},window.addEventListener("userSubscriptionChanged",this.globalEventHandlers.subscriptionChange),window.addEventListener("userStatusChanged",this.globalEventHandlers.statusChange),window.addEventListener("storage",this.globalEventHandlers.storageChange),this.eventCleanupFunctions.push(()=>window.removeEventListener("userSubscriptionChanged",this.globalEventHandlers.subscriptionChange),()=>window.removeEventListener("userStatusChanged",this.globalEventHandlers.statusChange),()=>window.removeEventListener("storage",this.globalEventHandlers.storageChange))),typeof window<"u"&&window.eventBus&&Object.entries({userStatusChanged:e=>{this.handleStatusChange(e.newStatus,e.oldStatus,"eventBus")},promocodeApplied:e=>{this.handlePromocodeApplied(e)},subscriptionUpdated:e=>{this.handleSubscriptionChange(e.plan,e.oldPlan,"subscription")},paymentCompleted:e=>{this.handlePaymentCompleted(e)},forceUpdate:e=>{this.triggerReactivityUpdate()},globalForceUpdate:e=>{this.triggerReactivityUpdate()}}).forEach(([e,s])=>{window.eventBus.on(e,s),this.eventCleanupFunctions.push(()=>{window.eventBus.off(e,s)})})},setupStoreSubscription(){this.$store&&typeof this.$store.subscribe=="function"&&(this.storeUnsubscribe=this.$store.subscribe(t=>{["setUser","user/SET_USER_STATUS","user/setUserStatus","user/UPDATE_SUBSCRIPTION","user/FORCE_UPDATE","user/ADD_PROMOCODE","user/SET_USER"].includes(t.type)&&this.handleStoreMutation(t)}),this.eventCleanupFunctions.push(()=>{this.storeUnsubscribe&&(this.storeUnsubscribe(),this.storeUnsubscribe=null)}))},setupPeriodicStatusSync(){this.syncCheckInterval&&clearInterval(this.syncCheckInterval),this.syncCheckInterval=setInterval(()=>{this.syncStatusWithStore()},3e4),this.eventCleanupFunctions.push(()=>{this.syncCheckInterval&&(clearInterval(this.syncCheckInterval),this.syncCheckInterval=null)})},handleSubscriptionChange(t,e,s){this.updateUserStatus(t,s),this.triggerReactivityUpdate(),this.recordStatusChange(t,e,s),this.onUserStatusChanged(t,e)},handleStatusChange(t,e,s){!t||t===e||(this.updateUserStatus(t,s),this.triggerReactivityUpdate(),this.onUserStatusChanged(t,e))},handlePromocodeApplied(t){const{newStatus:e,oldStatus:s,promocode:r,source:n="promocode"}=t;if(this.handleStatusChange(e,s,n),e&&e!=="free"){const i=e==="pro"?"Pro":"Start";this.showStatusNotification(` Promo code "${r}" applied! ${i} plan activated!`,"success")}},handlePaymentCompleted(t){const{plan:e,oldPlan:s,amount:r,source:n="payment"}=t;if(this.handleStatusChange(e,s,n),e&&e!=="free"){const i=e==="pro"?"Pro":"Start";this.showStatusNotification(` Payment successful! ${i} plan activated!`,"success")}},handleUserObjectChange(t,e){const s=t==null?void 0:t.subscriptionPlan,r=e==null?void 0:e.subscriptionPlan;s!==r&&this.handleStatusChange(s,r,"userObject"),this.triggerReactivityUpdate()},handleStoreMutation(t){var e;if(t.type==="setUser"&&((e=t.payload)!=null&&e.subscriptionPlan)){const s=t.payload.subscriptionPlan,r=this.reactiveUserStatus;s!==r&&this.handleStatusChange(s,r,"setUser")}this.triggerReactivityUpdate()},updateUserStatus(t,e){if(t)try{if(localStorage.setItem("userStatus",t),this.$store){if(this.$store.commit)try{this.$store.commit("user/SET_USER_STATUS",t)}catch{try{this.$store.commit("user/setUserStatus",t)}catch{try{this.$store.commit("setUserStatus",t)}catch{}}}if(this.$store.state.user){const s={...this.$store.state.user,subscriptionPlan:t};try{this.$store.commit("setUser",s)}catch{}}}}catch{}},async syncStatusWithStore(){var t,e,s,r,n,i,o;try{const l=((t=this.$store)==null?void 0:t.getters["user/userStatus"])||((r=(s=(e=this.$store)==null?void 0:e.state)==null?void 0:s.user)==null?void 0:r.userStatus),c=localStorage.getItem("userStatus"),u=(o=(i=(n=this.$store)==null?void 0:n.state)==null?void 0:i.user)==null?void 0:o.subscriptionPlan,d=Date.now();let f=l||u||c||"free";const p={free:0,start:1,pro:2},g=[l,c,u].filter(Boolean);g.length>1&&(f=g.reduce((b,k)=>p[k]>p[b]?k:b)),f!==c&&localStorage.setItem("userStatus",f),f!==l&&this.updateUserStatus(f,"sync"),f!==this.reactiveUserStatus&&this.triggerReactivityUpdate(),this.lastSyncTime=d}catch{}},triggerReactivityUpdate(){this.reactivityKey++,this.lastStatusUpdate=Date.now(),this.$forceUpdate(),this.$nextTick(()=>{this.$forceUpdate(),this.forceUpdateTimeout&&clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=setTimeout(()=>{this.$forceUpdate()},100)})},recordStatusChange(t,e,s="unknown"){const r={timestamp:Date.now(),from:e,to:t,source:s,component:this.$options.name};this.statusChangeHistory.push(r),this.statusChangeHistory.length>10&&this.statusChangeHistory.shift()},showStatusUpgradeNotification(t){const r=` Congratulations! ${{start:"Start",pro:"Pro"}[t]||(t&&typeof t=="string"?t.toUpperCase():"Unknown")} subscription activated!`;this.showStatusNotification(r,"success")},showStatusNotification(t,e="info"){const s=Date.now();s-this.lastNotificationTime<2e3||(this.lastNotificationTime=s,this.$toast?this.$toast[e](t,{duration:5e3}):this.$notify?this.$notify({message:t,type:e,duration:5e3}):window.showToast?window.showToast(t,e):e&&typeof e=="string"&&e.toUpperCase())},getStatusHistory(){return{component:this.$options.name,currentStatus:this.reactiveUserStatus,history:this.statusChangeHistory,lastUpdate:this.lastStatusUpdate,mountTime:this.componentMountTime}},cleanupStatusMixin(){this.forceUpdateTimeout&&(clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=null),this.eventCleanupFunctions.forEach(t=>{try{t()}catch{}}),this.eventCleanupFunctions=[],this.globalEventHandlers={},this.statusChangeHistory=[],this.statusChangeNotifications=[]}}},uX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/></svg>'},dX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>'},hX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg>'},fX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="8" y="2" width="8" height="4" rx="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M9 14l2 2 4-4"/></svg>'},pX={template:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>'},mX={name:"ModernSideBar",components:{HomeIcon:uX,BookOpenIcon:dX,FileTextIcon:hX,ClipboardCheckIcon:fX,SettingsIcon:pX,LanguageSwitcher:ov},mixins:[wf],props:{isOpen:{type:Boolean,default:!0}},data(){return{showLogoutModal:!1,showPremiumModal:!1,selectedFeature:null,isMobile:!1,tempSelectedMode:null,isSelectingMode:!1,userLevel:12,userStreak:7,navigationLinks:[{name:"main",label:"Dashboard",icon:"HomeIcon",description:"Overview & stats",path:"/profile/main",premium:!1},{name:"catalogue",label:"My Courses",icon:"BookOpenIcon",description:"Browse lessons",path:"/profile/catalogue",premium:!1},{name:"homeworks",label:"Assignments",icon:"FileTextIcon",description:"Practice & homework",path:"/profile/homeworks",premium:!1},{name:"tests",label:"Tests",icon:"ClipboardCheckIcon",description:"Assessment & analytics",path:"/profile/tests",premium:!0,requiredPlans:["start","pro"]},{name:"settings",label:"Settings",icon:"SettingsIcon",description:"Account & preferences",path:"/settings",premium:!1}]}},computed:{...Gg(["user"]),...tn(["getUser"]),...tn("user",["userStatus"]),currentUser(){return this.getUser||this.user||{}},currentUserStatus(){var t,e,s,r;return this.userStatus||((s=(e=(t=this.$store)==null?void 0:t.state)==null?void 0:e.user)==null?void 0:s.userStatus)||((r=this.currentUser)==null?void 0:r.subscriptionPlan)||localStorage.getItem("userStatus")||"free"},planLabel(){const t=this.currentUserStatus;return t==="pro"?"Pro":t==="start"?"Start":"Free"},planClass(){return`plan-${this.currentUserStatus}`},userDisplayName(){var t;return this.user&&(this.user.name||this.user.displayName||((t=this.user.email)==null?void 0:t.split("@")[0]))||"User"},getUserInitials(){return this.userDisplayName.substring(0,2).toUpperCase()},hasSelectedMode(){return this.$store.getters["platformMode/hasSelectedMode"]},isSchoolMode(){return this.$store.getters["platformMode/isSchoolMode"]},isStudyCentreMode(){return this.$store.getters["platformMode/isStudyCentreMode"]}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile),jc(me,t=>{var e;if(t){const s={name:t.displayName||((e=t.email)==null?void 0:e.split("@")[0]),displayName:t.displayName,email:t.email,uid:t.uid};this.setUser(s)}else this.clearUser()}),window.addEventListener("userStatusChanged",this.handleStatusUpdate),window.addEventListener("subscriptionUpdated",this.handleStatusUpdate),window.addEventListener("forceUpdate",this.handleStatusUpdate)},beforeUnmount(){window.removeEventListener("resize",this.checkMobile),window.removeEventListener("userStatusChanged",this.handleStatusUpdate),window.removeEventListener("subscriptionUpdated",this.handleStatusUpdate),window.removeEventListener("forceUpdate",this.handleStatusUpdate)},methods:{...AE(["setUser","clearUser"]),handleStatusUpdate(){this.$forceUpdate()},hasAccess(t){if(!t.premium)return!0;const e=this.currentUserStatus;return t.requiredPlans?t.requiredPlans.includes(e):!0},handleNavClick(t){if(t.premium&&!this.hasAccess(t)){this.selectedFeature=t,this.showPremiumModal=!0;return}this.$router.push(t.path),this.closeSidebarOnMobile()},goToUpgrade(){this.showPremiumModal=!1,this.$router.push("/settings"),this.closeSidebarOnMobile()},async selectInitialMode(t){if(!this.isSelectingMode){this.tempSelectedMode=t,this.isSelectingMode=!0;try{const e=this.$store.getters.getFirebaseUserId;if(!e)return;try{await vf(e,t,"Initial mode selection")}catch{}await this.$store.dispatch("platformMode/switchMode",{newMode:t,reason:"Initial mode selection"}),this.closeSidebarOnMobile()}catch{this.tempSelectedMode=null}finally{this.isSelectingMode=!1}}},async switchToSchool(){if(!this.isSchoolMode)try{await this.$store.dispatch("platformMode/switchMode",{newMode:"school",reason:"User switched via sidebar"}),this.closeSidebarOnMobile()}catch{}},async switchToStudyCentre(){if(!this.isStudyCentreMode)try{await this.$store.dispatch("platformMode/switchMode",{newMode:"study_centre",reason:"User switched via sidebar"}),this.closeSidebarOnMobile()}catch{}},checkMobile(){this.isMobile=window.innerWidth<=768},closeSidebar(){this.$emit("toggle-sidebar",!1)},closeSidebarOnMobile(){this.isMobile&&this.closeSidebar()},async logout(){try{await Hk(me),this.clearUser(),localStorage.clear(),this.$router.push("/")}catch{}},isActive(t){const e=this.$route.path;return t==="main"?e==="/profile/main"||e==="/profile"||e==="/profile/":t==="settings"?e==="/settings":e.includes(`/profile/${t}`)},getNavLabel(t){return{main:this.$t("sidebar.dashboard"),catalogue:this.$t("sidebar.myCourses"),homeworks:this.$t("sidebar.assignments"),tests:this.$t("sidebar.tests"),settings:this.$t("sidebar.settings")}[t]||t},getNavDesc(t){return{main:this.$t("sidebar.overviewStats"),catalogue:this.$t("sidebar.browseLessons"),homeworks:this.$t("sidebar.practiceHomework"),tests:this.$t("sidebar.assessmentAnalytics"),settings:this.$t("sidebar.accountPreferences")}[t]||""}}},gX={class:"sidebar-wrapper"},yX={class:"sidebar-content"},vX={class:"sidebar-brand"},_X={class:"brand-info"},bX={class:"brand-tagline"},wX={class:"user-card"},SX={class:"user-avatar"},EX={class:"avatar-text"},TX={class:"user-info"},kX={class:"user-name"},IX={class:"user-stats"},CX={class:"stat-item"},AX={class:"stat-value"},PX={class:"stat-label"},xX={class:"stat-item"},LX={class:"stat-value"},RX={class:"stat-label"},NX={key:0,class:"mode-selector"},OX={class:"mode-label"},MX={class:"mode-toggle"},DX={class:"mode-text"},$X={class:"mode-text"},UX={key:1,class:"mode-selection"},FX={class:"selection-header"},VX={class:"selection-options"},BX=["disabled"],qX=["disabled"],jX={class:"nav-menu"},HX={class:"nav-section"},WX={class:"nav-section-title"},zX=["onClick"],GX={class:"nav-icon"},KX={class:"nav-content"},YX={class:"nav-title"},QX={class:"nav-desc"},XX={key:0,class:"nav-badge"},JX={key:1,class:"nav-arrow"},ZX={key:2,class:"upgrade-card"},eJ={class:"upgrade-content"},tJ={class:"upgrade-text"},sJ={class:"sidebar-footer"},rJ={class:"language-section"},nJ={class:"modal-title"},iJ={class:"modal-text"},oJ={class:"modal-actions"},aJ={class:"premium-header"},lJ={class:"premium-benefits"},cJ={class:"benefit"},uJ={class:"benefit"},dJ={class:"benefit"},hJ={class:"modal-actions"};function fJ(t,e,s,r,n,i){const o=Ht("LanguageSwitcher");return v(),S("div",gX,[a("aside",{class:ge(["sidebar",{open:s.isOpen}])},[e[30]||(e[30]=a("div",{class:"sidebar-bg"},null,-1)),a("div",yX,[a("div",vX,[e[18]||(e[18]=a("img",{src:av,alt:"ACED",class:"brand-logo-img"},null,-1)),a("div",_X,[e[16]||(e[16]=a("h1",{class:"brand-name"},"ACED",-1)),a("span",bX,m(t.$t("sidebar.learningPlatform")),1)]),a("button",{class:"close-btn",onClick:e[0]||(e[0]=(...l)=>i.closeSidebar&&i.closeSidebar(...l))},e[17]||(e[17]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),a("div",wX,[a("div",SX,[a("span",EX,m(i.getUserInitials),1)]),a("div",TX,[a("h3",kX,m(i.userDisplayName),1),a("span",{class:ge(["user-plan",i.planClass])},m(i.planLabel),3)]),a("div",IX,[a("div",CX,[a("span",AX,m(n.userLevel),1),a("span",PX,m(t.$t("sidebar.level")),1)]),e[19]||(e[19]=a("div",{class:"stat-divider"},null,-1)),a("div",xX,[a("span",LX,m(n.userStreak),1),a("span",RX,m(t.$t("sidebar.streak")),1)])])]),i.hasSelectedMode?(v(),S("div",NX,[a("div",OX,m(t.$t("sidebar.learningMode")),1),a("div",MX,[a("button",{class:ge(["mode-option",{active:i.isSchoolMode}]),onClick:e[1]||(e[1]=(...l)=>i.switchToSchool&&i.switchToSchool(...l))},[e[20]||(e[20]=a("span",{class:"mode-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),a("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})])],-1)),a("span",DX,m(t.$t("sidebar.school")),1)],2),a("button",{class:ge(["mode-option",{active:i.isStudyCentreMode}]),onClick:e[2]||(e[2]=(...l)=>i.switchToStudyCentre&&i.switchToStudyCentre(...l))},[e[21]||(e[21]=a("span",{class:"mode-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),a("span",$X,m(t.$t("sidebar.studyCentre")),1)],2)])])):G("",!0),i.hasSelectedMode?G("",!0):(v(),S("div",UX,[a("div",FX,[a("h4",null,m(t.$t("sidebar.chooseYourPath")),1),a("p",null,m(t.$t("sidebar.selectHowToLearn")),1)]),a("div",VX,[a("button",{class:ge(["selection-card",{selected:n.tempSelectedMode==="school"}]),onClick:e[3]||(e[3]=l=>i.selectInitialMode("school")),disabled:n.isSelectingMode},[e[22]||(e[22]=a("div",{class:"card-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),a("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})])],-1)),a("h5",null,m(t.$t("sidebar.schoolMode")),1),a("p",null,m(t.$t("sidebar.structuredCurriculum")),1)],10,BX),a("button",{class:ge(["selection-card",{selected:n.tempSelectedMode==="study_centre"}]),onClick:e[4]||(e[4]=l=>i.selectInitialMode("study_centre")),disabled:n.isSelectingMode},[e[23]||(e[23]=a("div",{class:"card-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),a("h5",null,m(t.$t("sidebar.studyCentre")),1),a("p",null,m(t.$t("sidebar.freeExploration")),1)],10,qX)])])),a("nav",jX,[a("div",HX,[a("span",WX,m(t.$t("sidebar.menu")),1),(v(!0),S(he,null,be(n.navigationLinks,l=>(v(),S("button",{key:l.name,onClick:c=>i.handleNavClick(l),class:ge(["nav-item",{active:i.isActive(l.name),locked:l.premium&&!i.hasAccess(l)}])},[a("div",GX,[(v(),Yt(Eh(l.icon)))]),a("div",KX,[a("span",YX,m(i.getNavLabel(l.name)),1),a("span",QX,m(i.getNavDesc(l.name)),1)]),l.premium&&!i.hasAccess(l)?(v(),S("div",XX,e[24]||(e[24]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 20h20M4 16V8l4 4 4-6 4 6 4-4v8"})],-1)]))):(v(),S("div",JX,e[25]||(e[25]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 18l6-6-6-6"})],-1)])))],10,zX))),128))])]),i.currentUserStatus!=="pro"?(v(),S("div",ZX,[e[28]||(e[28]=a("div",{class:"upgrade-bg"},null,-1)),a("div",eJ,[e[27]||(e[27]=a("div",{class:"upgrade-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})])],-1)),a("div",tJ,[a("h4",null,m(t.$t("sidebar.upgradeToPro")),1),a("p",null,m(t.$t("sidebar.unlockAllFeatures")),1)]),a("button",{class:"upgrade-btn",onClick:e[5]||(e[5]=(...l)=>i.goToUpgrade&&i.goToUpgrade(...l))},e[26]||(e[26]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)]))])])):G("",!0),a("div",sJ,[a("button",{class:"footer-btn logout-btn",onClick:e[6]||(e[6]=l=>n.showLogoutModal=!0)},[e[29]||(e[29]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a("polyline",{points:"16 17 21 12 16 7"}),a("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)),a("span",null,m(t.$t("sidebar.logOut")),1)]),a("div",rJ,[xe(o)])])])],2),s.isOpen&&n.isMobile?(v(),S("div",{key:0,class:"sidebar-overlay",onClick:e[7]||(e[7]=(...l)=>i.closeSidebar&&i.closeSidebar(...l))})):G("",!0),(v(),Yt(Jp,{to:"body"},[n.showLogoutModal?(v(),S("div",{key:0,class:"modal-overlay",onClick:e[11]||(e[11]=l=>n.showLogoutModal=!1)},[a("div",{class:"modal-card",onClick:e[10]||(e[10]=vt(()=>{},["stop"]))},[e[31]||(e[31]=a("div",{class:"modal-icon warning"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a("polyline",{points:"16 17 21 12 16 7"}),a("line",{x1:"21",y1:"12",x2:"9",y2:"12"})])],-1)),a("h3",nJ,m(t.$t("sidebar.logOut")),1),a("p",iJ,m(t.$t("sidebar.confirmLogout")),1),a("div",oJ,[a("button",{class:"modal-btn secondary",onClick:e[8]||(e[8]=l=>n.showLogoutModal=!1)},m(t.$t("common.cancel")),1),a("button",{class:"modal-btn danger",onClick:e[9]||(e[9]=(...l)=>i.logout&&i.logout(...l))},m(t.$t("sidebar.logOut")),1)])])])):G("",!0)])),(v(),Yt(Jp,{to:"body"},[n.showPremiumModal?(v(),S("div",{key:0,class:"modal-overlay",onClick:e[15]||(e[15]=l=>n.showPremiumModal=!1)},[a("div",{class:"modal-card premium",onClick:e[14]||(e[14]=vt(()=>{},["stop"]))},[a("div",aJ,[e[32]||(e[32]=a("div",{class:"premium-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 20h20M4 16V8l4 4 4-6 4 6 4-4v8"})])],-1)),a("h3",null,m(t.$t("sidebar.premiumFeature")),1),a("p",null,m(t.$t("sidebar.unlockWithPlan")),1)]),a("div",lJ,[a("div",cJ,[e[33]||(e[33]=a("span",{class:"benefit-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("span",null,m(t.$t("sidebar.unlimitedTests")),1)]),a("div",uJ,[e[34]||(e[34]=a("span",{class:"benefit-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("span",null,m(t.$t("sidebar.detailedAnalytics")),1)]),a("div",dJ,[e[35]||(e[35]=a("span",{class:"benefit-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("span",null,m(t.$t("sidebar.aiHomeworkHelp")),1)])]),a("div",hJ,[a("button",{class:"modal-btn secondary",onClick:e[12]||(e[12]=l=>n.showPremiumModal=!1)},m(t.$t("sidebar.maybeLater")),1),a("button",{class:"modal-btn primary",onClick:e[13]||(e[13]=(...l)=>i.goToUpgrade&&i.goToUpgrade(...l))},m(t.$t("sidebar.upgradeNow")),1)])])])):G("",!0)]))])}const pJ=Je(mX,[["render",fJ],["__scopeId","data-v-d440efd1"]]),mJ={name:"ProfilePage",components:{SideBar:pJ},mixins:[wf],data(){return{sidebarOpen:!0,hasNotifications:!0,showFab:!0,componentKey:0,lastUpdate:Date.now()}},computed:{currentPageTitle(){const t=this.$route.name;return{"profile-main":this.$t("profilePage.dashboard"),"profile-catalogue":this.$t("profilePage.myCourses"),"profile-homeworks":this.$t("profilePage.assignments"),"profile-tests":this.$t("profilePage.testsAnalytics"),settings:this.$t("profilePage.settings")}[t]||this.$t("profilePage.dashboard")},mainContentClass(){return{"with-sidebar":this.sidebarOpen,[`user-${this.userStatus}`]:!0,"premium-user":this.isPremiumUser,updated:this.lastUpdate>Date.now()-5e3}}},watch:{userStatus:{handler(){this.triggerComponentUpdate()},immediate:!0}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile),this.setupProfileEventListeners()},beforeUnmount(){window.removeEventListener("resize",this.checkMobile),this.cleanupProfileEventListeners()},methods:{toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},handleSidebarToggle(t){this.sidebarOpen=t},checkMobile(){window.innerWidth<=768&&(this.sidebarOpen=!1)},triggerComponentUpdate(){this.componentKey++,this.lastUpdate=Date.now(),this.$forceUpdate()},setupProfileEventListeners(){typeof window<"u"&&window.eventBus&&(this.profileStatusHandler=()=>{this.triggerComponentUpdate()},window.eventBus.on("userStatusChanged",this.profileStatusHandler),window.eventBus.on("promocodeApplied",this.profileStatusHandler))},cleanupProfileEventListeners(){typeof window<"u"&&window.eventBus&&this.profileStatusHandler&&(window.eventBus.off("userStatusChanged",this.profileStatusHandler),window.eventBus.off("promocodeApplied",this.profileStatusHandler))},toggleNotifications(){},toggleSearch(){},openQuickActions(){}}},gJ={class:"profile-page"},yJ={class:"profile-header"},vJ=["aria-label"],_J={class:"header-breadcrumb"},bJ={class:"breadcrumb-text"},wJ={class:"header-actions"},SJ={key:0,class:"notification-dot"},EJ={class:"profile-content"};function TJ(t,e,s,r,n,i){const o=Ht("SideBar"),l=Ht("router-view");return v(),S("div",gJ,[xe(o,{isOpen:n.sidebarOpen,onToggleSidebar:i.handleSidebarToggle},null,8,["isOpen","onToggleSidebar"]),a("main",{class:ge(["profile-main",{"sidebar-collapsed":!n.sidebarOpen}])},[a("header",yJ,[a("button",{class:"menu-toggle",onClick:e[0]||(e[0]=(...c)=>i.toggleSidebar&&i.toggleSidebar(...c)),"aria-label":t.$t("common.toggleNavigation")},e[4]||(e[4]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)]),8,vJ),a("div",_J,[e[5]||(e[5]=a("span",{class:"breadcrumb-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a("path",{d:"M9 22V12h6v10"})])],-1)),a("span",bJ,m(i.currentPageTitle),1)]),a("div",wJ,[a("button",{class:"action-btn notification-btn",onClick:e[1]||(e[1]=(...c)=>i.toggleNotifications&&i.toggleNotifications(...c))},[e[6]||(e[6]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)),n.hasNotifications?(v(),S("span",SJ)):G("",!0)]),a("button",{class:"action-btn search-btn",onClick:e[2]||(e[2]=(...c)=>i.toggleSearch&&i.toggleSearch(...c))},e[7]||(e[7]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1)]))])]),a("div",EJ,[xe(l,null,{default:Jt(({Component:c})=>[xe(ma,{name:"page-fade",mode:"out-in"},{default:Jt(()=>[(v(),Yt(Eh(c)))]),_:2},1024)]),_:1})])],2),n.showFab?(v(),S("button",{key:0,class:"fab-button",onClick:e[3]||(e[3]=(...c)=>i.openQuickActions&&i.openQuickActions(...c))},e[8]||(e[8]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 8v8M8 12h8"})],-1)]))):G("",!0)])}const kJ=Je(mJ,[["render",TJ],["__scopeId","data-v-64feb89b"]]),Vr=Se(null),Er=Se(!0),gl=Se(!1),Gn=Se(null),Rt=Se(null),Ou=[];function IJ(){const t=Mc(),e=oe(()=>Vr.value),s=oe(()=>Er.value),r=oe(()=>gl.value),n=oe(()=>Gn.value),i=oe(()=>Rt.value),o=()=>jc(me,async U=>{var C;Er.value=!0,Rt.value=null;try{if(U){Vr.value=U,gl.value=!0,Gn.value={uid:U.uid,email:U.email,displayName:U.displayName,photoURL:U.photoURL,emailVerified:U.emailVerified,phoneNumber:U.phoneNumber,createdAt:U.metadata.creationTime,lastLoginAt:U.metadata.lastSignInTime};try{const w=await U.getIdToken(),{saveUser:_}=await yt(async()=>{const{saveUser:x}=await Promise.resolve().then(()=>YK);return{saveUser:x}},void 0);await _({token:w,name:U.displayName||((C=U.email)==null?void 0:C.split("@")[0])||"User",email:U.email,subscriptionPlan:"free"})}catch{}}else Vr.value=null,gl.value=!1,Gn.value=null}catch(w){Rt.value=w.message}finally{Er.value=!1}Ou.forEach(w=>{try{w(U)}catch{}})}),l=async(D,U)=>{try{return Er.value=!0,Rt.value=null,{success:!0,user:(await jk(me,D,U)).user}}catch(C){return Rt.value=E(C),{success:!1,error:Rt.value}}finally{Er.value=!1}},c=async(D,U,C="")=>{try{Er.value=!0,Rt.value=null;const _=(await qk(me,D,U)).user;C.trim()&&await mb(_,{displayName:C.trim()});try{await ZU(_)}catch{}return{success:!0,user:_}}catch(w){return Rt.value=E(w),{success:!1,error:Rt.value}}finally{Er.value=!1}},u=async()=>{try{Er.value=!0,Rt.value=null;const D=new zr;D.addScope("email"),D.addScope("profile");const U=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let C;return U?(await xF(me,D),{success:!0,pending:!0}):(C=await tI(me,D),{success:!0,user:C.user})}catch(D){return Rt.value=E(D),{success:!1,error:Rt.value}}finally{Er.value=!1}},d=async()=>{try{const D=await RF(me);return D?{success:!0,user:D.user}:{success:!0,user:null}}catch(D){return Rt.value=E(D),{success:!1,error:Rt.value}}},f=async()=>{try{return Er.value=!0,Rt.value=null,await Hk(me),Vr.value=null,gl.value=!1,Gn.value=null,t.push("/auth/login"),{success:!0}}catch(D){return Rt.value=E(D),{success:!1,error:Rt.value}}finally{Er.value=!1}},p=async D=>{try{return Rt.value=null,await Bk(me,D),{success:!0}}catch(U){return Rt.value=E(U),{success:!1,error:Rt.value}}},g=async D=>{try{if(!Vr.value)throw new Error("No authenticated user");return Rt.value=null,await mb(Vr.value,D),Gn.value&&(Gn.value={...Gn.value,...D}),{success:!0}}catch(U){return Rt.value=E(U),{success:!1,error:Rt.value}}},b=async()=>{try{if(!Vr.value)throw new Error("No authenticated user");return{success:!0,token:await Vr.value.getIdToken(!0)}}catch(D){return{success:!1,error:D.message}}},k=async()=>{try{return Vr.value?await Vr.value.getIdToken():null}catch{return null}},L=D=>Gn.value?gl.value:!1,V=D=>(Ou.push(D),()=>{const U=Ou.indexOf(D);U>-1&&Ou.splice(U,1)}),R=()=>{Rt.value=null},E=D=>({"auth/user-not-found":"User with this email not found","auth/wrong-password":"Incorrect password","auth/email-already-in-use":"User with this email already exists","auth/weak-password":"Password must contain at least 6 characters","auth/invalid-email":"Invalid email format","auth/user-disabled":"Account disabled","auth/too-many-requests":"Too many login attempts. Please try again later","auth/network-request-failed":"Network error. Check your internet connection","auth/popup-closed-by-user":"Authorization window was closed","auth/popup-blocked":"Browser blocked the popup window","auth/invalid-credential":"Invalid credentials","auth/expired-action-code":"Link expired","auth/invalid-action-code":"Invalid link"})[D.code]||D.message||"An authorization error occurred";let N=null;return br(async()=>{N=o(),await d()}),Li(()=>{N&&N()}),{currentUser:e,isLoading:s,isAuthenticated:r,userProfile:n,authError:i,signIn:l,signUp:c,signInWithGoogle:u,signOut:f,resetPassword:p,updateUserProfile:g,refreshToken:b,getToken:k,hasPermission:L,onAuthStateChange:V,clearError:R,initializeAuth:o,handleRedirectResult:d}}const CJ={class:"vocabulary-page"},AJ={class:"page-header"},PJ={class:"header-content"},xJ={class:"header-info"},LJ={class:"page-title"},RJ={key:0,class:"breadcrumb-text"},NJ={key:0,class:"loading-state"},OJ={key:1,class:"content-container"},MJ={key:0,class:"empty-state"},DJ={class:"empty-text"},$J={class:"empty-subtext"},UJ={key:1,class:"cards-grid"},FJ=["onClick"],VJ={class:"card-icon"},BJ={class:"card-content"},qJ={class:"card-title"},jJ={class:"card-stats"},HJ={class:"stat-item"},WJ={class:"stat-number"},zJ={class:"stat-label"},GJ={class:"stat-item"},KJ={class:"stat-number"},YJ={class:"progress-section"},QJ={class:"progress-bar-container"},XJ={class:"progress-text"},JJ={key:2,class:"content-container"},ZJ={class:"cards-grid"},eZ=["onClick"],tZ={class:"card-header-row"},sZ={class:"level-badge"},rZ={class:"level-icon"},nZ={class:"level-number"},iZ={class:"card-description"},oZ={class:"card-stats-row"},aZ={class:"stat-group"},lZ={class:"stat-group"},cZ={key:3,class:"content-container"},uZ={class:"cards-grid"},dZ=["onClick"],hZ={class:"card-icon-wrapper"},fZ={class:"topic-emoji"},pZ={class:"card-content"},mZ={class:"card-title"},gZ={class:"card-subtitle"},yZ={class:"word-count"},vZ={key:4,class:"content-container"},_Z={class:"words-header"},bZ={class:"search-container"},wZ={class:"words-grid"},SZ=["onClick"],EZ={class:"word-header"},TZ={class:"word-text"},kZ=["onClick"],IZ={class:"word-translation"},CZ={key:0,class:"word-definition"},AZ={class:"word-meta"},PZ={class:"meta-badge pos"},xZ={class:"word-progress"},LZ={class:"progress-bar-container small"},RZ={class:"progress-percent"},NZ={class:"modal-header"},OZ={class:"modal-title-row"},MZ={key:0,class:"pronunciation-row"},DZ={class:"pronunciation-text"},$Z={class:"modal-body"},UZ={class:"translation-section"},FZ={class:"translation-large"},VZ={class:"meta-tags"},BZ={class:"meta-badge pos"},qZ={key:0,class:"definition-section"},jZ={class:"definition-text"},HZ={key:1,class:"examples-section"},WZ={class:"example-sentence"},zZ={class:"example-translation"},GZ={class:"modal-footer"},KZ={class:"toast-content"},YZ={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},QZ={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},XZ={key:2,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},JZ={__name:"VocabularyPage",setup(t){const{currentUser:e}=IJ(),s=Se(!1),r=Se("languages"),n=Se(null),i=Se(null),o=Se(null),l=Se(null),c=Se(""),u=Se(!1),d=Se([]),f=Se([]),p=Se([]),g=Se([]),b=Se({visible:!1,message:"",type:"success"}),k=oe(()=>r.value!=="languages"),L=oe(()=>{var A,I;switch(r.value){case"languages":return" My Vocabulary";case"levels":return((A=n.value)==null?void 0:A.name)||"Levels";case"topics":return`Level ${i.value} - Topics`;case"words":return((I=o.value)==null?void 0:I.name)||"Words";default:return"Vocabulary"}}),V=oe(()=>{const A=[];return n.value&&A.push(n.value.name),i.value&&A.push(`Level ${i.value}`),o.value&&A.push(o.value.name),A.join("  ")}),R=oe(()=>{let A=g.value;if(c.value){const I=c.value.toLowerCase();A=A.filter(j=>j.word.toLowerCase().includes(I)||j.translation.toLowerCase().includes(I))}return u.value||(A=A.filter(I=>(I.progress||0)<90)),A}),E=async(A,I=null)=>{try{if(!A)return _(I);let j;try{j=await fetch(`https://api.aced.live/users/${A}/progress`)}catch{return await w(I)}if(!j||!j.ok)return await w(I);let W;try{W=await j.json()}catch{return await w(I)}const Y=(Array.isArray(W)?W:W.data||[]).filter(q=>q&&q.completed&&q.lessonId);if(Y.length===0)return _(I);const ee=[];for(const q of Y.slice(0,20))try{if(!q||!q.lessonId)continue;const re=await fetch(`https://api.aced.live/lessons/${q.lessonId}`);if(!re.ok)continue;const le=await re.json(),ne=le.lesson||le;if(!ne||!ne.steps||!Array.isArray(ne.steps))continue;ne.steps.forEach((H,Q)=>{!H||!H.type||(H.type==="vocabulary"&&H.data&&(Array.isArray(H.data)?H.data:[H.data]).forEach((Ae,mt)=>{if(N(Ae)){const Et=D(Ae,ne,q,`${Q}_${mt}`);Et&&ee.push(Et)}}),H.vocabulary&&Array.isArray(H.vocabulary)&&H.vocabulary.forEach((Ce,Ae)=>{if(N(Ce)){const mt=D(Ce,ne,q,`vocab_${Q}_${Ae}`);mt&&ee.push(mt)}}))})}catch{continue}const $=[],B=new Set;return ee.forEach(q=>{if(!q||!q.word||!q.language)return;const re=`${q.word.toLowerCase()}_${q.language.toLowerCase()}`;B.has(re)||(B.add(re),$.push(q))}),I?$.filter(q=>q&&q.language&&q.language.toLowerCase()===I.toLowerCase()):$}catch{return _(I)}},N=A=>{if(!A||typeof A!="object")return!1;const I=A.term&&A.definition,j=A.word&&A.translation,W=A.front&&A.back,z=A.question&&A.answer;return I||j||W||z},D=(A,I,j,W)=>{try{if(!A||typeof A!="object")return null;let z,Y,ee="",$=[];if(A.term&&A.definition)z=A.term,Y=A.definition,ee=A.example||A.description||"";else if(A.word&&A.translation)z=A.word,Y=A.translation,ee=A.definition||A.example||"";else if(A.front&&A.back)z=A.front,Y=A.back,ee=A.hint||A.example||"";else if(A.question&&A.answer)z=A.question,Y=A.answer,ee=A.explanation||"";else return null;if(!z||!Y||typeof z!="string"||typeof Y!="string")return null;A.example&&typeof A.example=="string"&&$.push({sentence:A.example,translation:Y}),A.examples&&Array.isArray(A.examples)&&($=[...$,...A.examples.filter(q=>q&&typeof q=="object")]);const B=U(I);return{id:`${j.lessonId}_${W}_${z}`,word:z.trim(),translation:Y.trim(),definition:(ee||"").trim(),language:B,topic:I.topic||I.subject||"General",lessonName:I.lessonName||I.title||"Unknown Lesson",level:I.level||1,partOfSpeech:A.partOfSpeech||A.type||"noun",difficulty:C(I.level||1),progress:Math.round(j.progressPercent||0),examples:$,pronunciation:A.pronunciation||"",metadata:{source:"lesson_extraction",lessonId:I._id,stepType:"vocabulary",extractedAt:new Date().toISOString()}}}catch{return null}},U=A=>{const I=(A.lessonName||A.title||"").toLowerCase(),j=(A.subject||"").toLowerCase(),W=(A.description||"").toLowerCase(),z={english:["english","","","eng","vocabulary","words"],russian:["russian","","","rus"," "],spanish:["spanish","","espaol","esp"],french:["french","","franais","fr"],german:["german","","deutsch","de"],uzbek:["uzbek","","o'zbek","uz"],chinese:["chinese","","","zh"],arabic:["arabic","","","ar"],japanese:["japanese","","","jp"],korean:["korean","","","kr"]},Y=`${I} ${j} ${W}`.toLowerCase();for(const[ee,$]of Object.entries(z))if($.some(B=>Y.includes(B)))return ee;return"english"},C=A=>A<=2?"beginner":A<=4?"intermediate":"advanced",w=async(A=null)=>{try{const I=await fetch("https://api.aced.live/lessons");if(!I.ok)return _(A);const j=await I.json(),W=Array.isArray(j)?j:[],z=[];return W.slice(0,10).forEach(Y=>{!Y||!Y.steps||Y.steps.forEach((ee,$)=>{!ee||!ee.type||ee.type==="vocabulary"&&ee.data&&(Array.isArray(ee.data)?ee.data:[ee.data]).forEach((q,re)=>{if(N(q)){const le={lessonId:Y._id,progressPercent:0,updatedAt:new Date().toISOString()},ne=D(q,Y,le,`${$}_${re}`);ne&&z.push(ne)}})})}),A?z.filter(Y=>Y.language&&Y.language.toLowerCase()===A.toLowerCase()):z}catch{return _(A)}},_=(A=null)=>{const I=[{id:"hello_en",word:"Hello",translation:"Hello",language:"english",topic:"Greetings",level:1,progress:75,partOfSpeech:"interjection",difficulty:"beginner",definition:"A greeting used when meeting someone"},{id:"goodbye_en",word:"Goodbye",translation:"Goodbye",language:"english",topic:"Greetings",level:1,progress:50,partOfSpeech:"interjection",difficulty:"beginner",definition:"A farewell greeting"},{id:"house_en",word:"House",translation:"House",language:"english",topic:"Home",level:1,progress:90,partOfSpeech:"noun",difficulty:"beginner",definition:"A building for human habitation"},{id:"water_en",word:"Water",translation:"Water",language:"english",topic:"Nature",level:1,progress:100,partOfSpeech:"noun",difficulty:"beginner",definition:"A clear liquid that forms the seas, lakes, rivers, and rain"},{id:"computer_en",word:"Computer",translation:"Computer",language:"english",topic:"Technology",level:2,progress:25,partOfSpeech:"noun",difficulty:"intermediate",definition:"An electronic device for storing and processing data"},{id:"hola_es",word:"Hola",translation:"Hello",language:"spanish",topic:"Greetings",level:1,progress:60,partOfSpeech:"interjection",difficulty:"beginner",definition:"A Spanish greeting"},{id:"casa_es",word:"Casa",translation:"House",language:"spanish",topic:"Home",level:1,progress:80,partOfSpeech:"noun",difficulty:"beginner",definition:"A house or home in Spanish"},{id:"bonjour_fr",word:"Bonjour",translation:"Hello",language:"french",topic:"Greetings",level:1,progress:40,partOfSpeech:"interjection",difficulty:"beginner",definition:"A French greeting meaning good day"}];return A?I.filter(j=>j.language===A):I},x=async A=>{n.value=A,r.value="levels",await Z(A)},P=async A=>{i.value=A.level,r.value="topics",await ue(n.value,A.level)},O=async A=>{o.value=A,r.value="words",await $e(n.value,i.value,A)},M=A=>{l.value=A},ae=()=>{l.value=null},fe=()=>{switch(r.value){case"levels":r.value="languages",n.value=null,f.value=[];break;case"topics":r.value="levels",i.value=null,p.value=[];break;case"words":r.value="topics",o.value=null,g.value=[];break}},de=async()=>{var A;s.value=!0;try{const I=((A=e.value)==null?void 0:A.uid)||"demo_user",j=await E(I);if(!j||j.length===0){je("Vocabulary is empty. Start studying lessons to add words!","warning"),d.value=[];return}const W=new Map;j.forEach(z=>{var B;if(!z||!z.language)return;const Y=z.language||"english";if(!W.has(Y)){const q=_e(Y);W.set(Y,{code:Y,name:q.name,flag:q.flag,totalWords:0,levels:new Set,mastered:0})}const ee=W.get(Y);ee.totalWords++;const $=z.level||((B=z.metadata)==null?void 0:B.lessonLevel)||1;ee.levels.add($),z.progress>=90&&ee.mastered++}),d.value=Array.from(W.values()).map(z=>({...z,levels:Array.from(z.levels).sort((Y,ee)=>Y-ee),progress:z.totalWords>0?Math.round(z.mastered/z.totalWords*100):0})).filter(z=>z.totalWords>0),d.value.length===0&&je("No available languages in vocabulary","warning")}catch{je("Error loading languages","error"),d.value=[]}finally{s.value=!1}},Z=async A=>{var I;s.value=!0;try{const j=((I=e.value)==null?void 0:I.uid)||"demo_user",W=await E(j,A.code),z=new Map;W.forEach(Y=>{var q;if(!Y)return;const ee=Y.level||((q=Y.metadata)==null?void 0:q.lessonLevel)||1;z.has(ee)||z.set(ee,{level:ee,totalWords:0,topics:new Set});const $=z.get(ee);$.totalWords++;const B=Y.topic||Y.lessonName||"General";$.topics.add(B)}),f.value=Array.from(z.values()).map(Y=>({...Y,topicCount:Y.topics.size})).sort((Y,ee)=>Y.level-ee.level)}catch{je("Error loading levels","error")}finally{s.value=!1}},ue=async(A,I)=>{var j;s.value=!0;try{const W=((j=e.value)==null?void 0:j.uid)||"demo_user",z=await E(W,A.code),Y=new Map;z.filter(ee=>ee&&(ee.level||1)===I).forEach(ee=>{const $=ee.topic||ee.lessonName||"General";Y.has($)||Y.set($,{name:$,name:$,totalWords:0,words:[]});const B=Y.get($);B.totalWords++,B.words.push(ee)}),p.value=Array.from(Y.values()).sort((ee,$)=>ee.name.localeCompare($.name))}catch{je("Error loading topics","error")}finally{s.value=!1}},$e=async(A,I,j)=>{s.value=!0;try{const W=[],z=new Set;j.words.forEach(Y=>{if(!Y||!Y.word)return;const ee=Y.word.toLowerCase();z.has(ee)||(z.add(ee),W.push({...Y,id:Y.id||`${Y.word}_${Y.language}`,isLearned:Y.progress>=90}))}),g.value=W.sort((Y,ee)=>Y.word.localeCompare(ee.word))}finally{s.value=!1}},_e=A=>({english:{name:"English",flag:""},spanish:{name:"Spanish",flag:""},french:{name:"French",flag:""},german:{name:"German",flag:""},chinese:{name:"Chinese",flag:""},arabic:{name:"Arabic",flag:""},japanese:{name:"Japanese",flag:""},korean:{name:"Korean",flag:""},uzbek:{name:"Uzbek",flag:""},russian:{name:"Russian",flag:""}})[A]||{name:A,flag:""},Oe=A=>["","","","","",""][A-1]||"",Ve=A=>({1:"Basic words and phrases",2:"Everyday vocabulary",3:"Extended vocabulary",4:"Advanced topics",5:"Specialized vocabulary"})[A]||`Level ${A}`,Qe=A=>A<=2?"beginner":A<=4?"intermediate":"advanced",bt=A=>({beginner:"Easy",intermediate:"Medium",advanced:"Hard"})[A]||A,Ct=A=>({Travel:"",Business:"",Food:"",Family:"",Education:"",Health:"",Technology:"",Sports:"",Music:"",Art:"",Nature:"",Animals:"",Greetings:"",Home:"",General:""})[A]||"",$t=A=>A,te=A=>({Travel:"Words for travel",Business:"Business vocabulary",Food:"Food and drinks",Greetings:"Greetings and introductions",Home:"Home and family",Technology:"Computers and technology"})[A]||`Learn words about "${A}"`,we=A=>({noun:"noun",verb:"verb",adjective:"adj.",adverb:"adv.",phrase:"phrase",interjection:"interj."})[A]||A,ye=A=>{var I;if("speechSynthesis"in window){const j=new SpeechSynthesisUtterance(A);j.lang=((I=n.value)==null?void 0:I.code)==="russian"?"ru-RU":"en-US",speechSynthesis.speak(j)}},Te=async A=>{try{A.progress=100,je("Word marked as learned"),ae()}catch{je("Update error","error")}},ze=async A=>{try{A.progress=0,je("Word added for review"),ae()}catch{je("Update error","error")}},je=(A,I="success")=>{b.value={visible:!0,message:A,type:I},setTimeout(()=>{b.value.visible=!1},3e3)};return br(()=>{de()}),(A,I)=>{var j;return v(),S("div",CJ,[a("div",AJ,[a("div",PJ,[k.value?(v(),S("button",{key:0,onClick:fe,class:"back-button"},I[6]||(I[6]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15 18 9 12 15 6"})],-1),se(" Back ")]))):G("",!0),a("div",xJ,[a("h1",LJ,m(L.value),1),V.value?(v(),S("p",RJ,m(V.value),1)):G("",!0)])])]),s.value?(v(),S("div",NJ,[I[7]||(I[7]=a("div",{class:"spinner"},null,-1)),a("p",null,m(A.$t("vocabulary.loading")),1)])):r.value==="languages"?(v(),S("div",OJ,[d.value.length===0?(v(),S("div",MJ,[I[8]||(I[8]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1)),a("p",DJ,m(A.$t("vocabulary.emptyText")),1),a("p",$J,m(A.$t("vocabulary.emptySubtext")),1)])):(v(),S("div",UJ,[(v(!0),S(he,null,be(d.value,W=>{var z;return v(),S("div",{key:W.code,class:"language-card",onClick:Y=>x(W)},[a("div",VJ,m(W.flag),1),a("div",BJ,[a("h3",qJ,m(W.name),1),a("div",jJ,[a("div",HJ,[a("span",WJ,m(W.totalWords),1),a("span",zJ,m(A.$t("vocabulary.words")),1)]),I[10]||(I[10]=a("div",{class:"stat-divider"},null,-1)),a("div",GJ,[a("span",KJ,m(((z=W.levels)==null?void 0:z.length)||0),1),I[9]||(I[9]=a("span",{class:"stat-label"},"levels",-1))])]),a("div",YJ,[a("div",QJ,[a("div",{class:"progress-bar-fill",style:rt({width:W.progress+"%"})},null,4)]),a("span",XJ,m(W.progress)+m(A.$t("vocabulary.learned")),1)])])],8,FJ)}),128))]))])):r.value==="levels"?(v(),S("div",JJ,[a("div",ZJ,[(v(!0),S(he,null,be(f.value,W=>(v(),S("div",{key:W.level,class:"level-card",onClick:z=>P(W)},[a("div",tZ,[a("div",sZ,[a("span",rZ,m(Oe(W.level)),1),a("span",nZ,"Level "+m(W.level),1)]),a("div",{class:ge(["difficulty-badge",Qe(W.level)])},m(bt(Qe(W.level))),3)]),a("p",iZ,m(Ve(W.level)),1),a("div",oZ,[a("div",aZ,[I[11]||(I[11]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1)),a("span",null,m(W.totalWords)+" words",1)]),a("div",lZ,[I[12]||(I[12]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})],-1)),a("span",null,m(W.topicCount)+" topics",1)])])],8,eZ))),128))])])):r.value==="topics"?(v(),S("div",cZ,[a("div",uZ,[(v(!0),S(he,null,be(p.value,W=>(v(),S("div",{key:W.name,class:"topic-card",onClick:z=>O(W)},[a("div",hZ,[a("span",fZ,m(Ct(W.name)),1)]),a("div",pZ,[a("h3",mZ,m($t(W.name)),1),a("p",gZ,m(te(W.name)),1),a("div",yZ,[I[13]||(I[13]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),a("span",null,m(W.totalWords)+" words",1)])])],8,dZ))),128))])])):r.value==="words"?(v(),S("div",vZ,[a("div",_Z,[a("div",bZ,[I[14]||(I[14]=a("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1)),Pe(a("input",{"onUpdate:modelValue":I[0]||(I[0]=W=>c.value=W),placeholder:"Search words...",class:"search-input"},null,512),[[Ke,c.value]])]),a("button",{onClick:I[1]||(I[1]=W=>u.value=!u.value),class:ge(["filter-button",{active:u.value}])},[I[15]||(I[15]=at('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-36920397><line x1="4" y1="21" x2="4" y2="14" data-v-36920397></line><line x1="4" y1="10" x2="4" y2="3" data-v-36920397></line><line x1="12" y1="21" x2="12" y2="12" data-v-36920397></line><line x1="12" y1="8" x2="12" y2="3" data-v-36920397></line><line x1="20" y1="21" x2="20" y2="16" data-v-36920397></line><line x1="20" y1="12" x2="20" y2="3" data-v-36920397></line><line x1="1" y1="14" x2="7" y2="14" data-v-36920397></line><line x1="9" y1="8" x2="15" y2="8" data-v-36920397></line><line x1="17" y1="16" x2="23" y2="16" data-v-36920397></line></svg>',1)),se(" "+m(u.value?"All words":"Active"),1)],2)]),a("div",wZ,[(v(!0),S(he,null,be(R.value,W=>(v(),S("div",{key:W.id,class:"word-card",onClick:z=>M(W)},[a("div",EZ,[a("h4",TZ,m(W.word),1),a("button",{onClick:vt(z=>ye(W.word),["stop"]),class:"pronounce-button"},I[16]||(I[16]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),a("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})],-1)]),8,kZ)]),a("p",IZ,m(W.translation),1),W.definition?(v(),S("div",CZ,m(W.definition),1)):G("",!0),a("div",AZ,[a("span",PZ,m(we(W.partOfSpeech)),1),a("span",{class:ge(["meta-badge difficulty",W.difficulty])},m(bt(W.difficulty)),3)]),a("div",xZ,[a("div",LZ,[a("div",{class:"progress-bar-fill",style:rt({width:(W.progress||0)+"%"})},null,4)]),a("span",RZ,m(W.progress||0)+"%",1)])],8,SZ))),128))])])):G("",!0),l.value?(v(),S("div",{key:5,class:"modal-overlay",onClick:ae},[a("div",{class:"modal-card",onClick:I[5]||(I[5]=vt(()=>{},["stop"]))},[a("div",NZ,[a("div",OZ,[a("h3",null,m(l.value.word),1),a("button",{onClick:ae,class:"close-button"},I[17]||(I[17]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),l.value.pronunciation?(v(),S("div",MZ,[a("span",DZ,"/"+m(l.value.pronunciation)+"/",1),a("button",{onClick:I[2]||(I[2]=W=>ye(l.value.word)),class:"pronounce-button small"},I[18]||(I[18]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),a("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})],-1)]))])):G("",!0)]),a("div",$Z,[a("div",UZ,[a("p",FZ,m(l.value.translation),1),a("div",VZ,[a("span",BZ,m(we(l.value.partOfSpeech)),1),a("span",{class:ge(["meta-badge difficulty",l.value.difficulty])},m(bt(l.value.difficulty)),3)])]),l.value.definition?(v(),S("div",qZ,[I[19]||(I[19]=a("h4",{class:"section-title"},"Definition",-1)),a("p",jZ,m(l.value.definition),1)])):G("",!0),(j=l.value.examples)!=null&&j.length?(v(),S("div",HZ,[I[20]||(I[20]=a("h4",{class:"section-title"},"Usage examples",-1)),(v(!0),S(he,null,be(l.value.examples,(W,z)=>(v(),S("div",{key:z,class:"example-item"},[a("p",WZ,m(W.sentence),1),a("p",zZ,m(W.translation),1)]))),128))])):G("",!0)]),a("div",GZ,[a("button",{onClick:I[3]||(I[3]=W=>ze(l.value)),class:"action-button secondary"},I[21]||(I[21]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 6L6 18M6 6l12 12"})],-1),se(" Review ")])),a("button",{onClick:I[4]||(I[4]=W=>Te(l.value)),class:"action-button primary"},I[22]||(I[22]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1),se(" I know ")]))])])])):G("",!0),b.value.visible?(v(),S("div",{key:6,class:ge(["toast-notification",b.value.type])},[a("div",KZ,[b.value.type==="success"?(v(),S("svg",YZ,I[23]||(I[23]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):b.value.type==="error"?(v(),S("svg",QZ,I[24]||(I[24]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))):(v(),S("svg",XZ,I[25]||(I[25]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),a("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)]))),a("span",null,m(b.value.message),1)])],2)):G("",!0)])}}},ZZ=Je(JZ,[["__scopeId","data-v-36920397"]]),eee={name:"LessonPlayer",props:{course:{type:Object,required:!0,validator:t=>t&&(t.title||t._id)}},emits:["close","back-to-courses"],data(){return{lessons:[],structuredLessons:[],currentLessonIndex:0,quizAnswers:new Map,fullscreenPdf:null,loading:!0,error:null,courseData:null,isStructuredFormat:!1,structuredCourseData:null}},computed:{courseTitle(){var t,e;return this.structuredCourseData?this.structuredCourseData.courseTitle:((t=this.courseData)==null?void 0:t.title)||((e=this.course)==null?void 0:e.title)||""},currentLesson(){return this.isStructuredFormat?null:this.lessons[this.currentLessonIndex]||null},currentStructuredLesson(){return this.isStructuredFormat&&this.structuredLessons[this.currentLessonIndex]||null},currentLessonTitle(){if(this.isStructuredFormat&&this.currentStructuredLesson)return this.currentStructuredLesson.title||` ${this.currentLessonIndex+1}`;const t=this.currentLesson;return t?t.title||t.lessonName||` ${this.currentLessonIndex+1}`:" ..."},hasSteps(){return this.isStructuredFormat?!0:this.currentLesson&&this.currentLesson.steps&&this.currentLesson.steps.length>0},totalLessons(){return this.isStructuredFormat?this.structuredLessons.length:this.lessons.length},progressPercentage(){return this.totalLessons===0?0:(this.currentLessonIndex+1)/this.totalLessons*100},isFirstLesson(){return this.currentLessonIndex===0},isLastLesson(){return this.currentLessonIndex===this.totalLessons-1},learningObjectives(){var t;if(this.isStructuredFormat&&this.currentStructuredLesson){const e=this.currentStructuredLesson.content,s=[];return e.theory&&s.push("   "),e.practical_examples&&s.push("    "),e.homework&&s.push("     "),s.length>0?s:this.getDefaultObjectives()}return(t=this.courseData)!=null&&t.learningOutcomes&&Array.isArray(this.courseData.learningOutcomes)?this.courseData.learningOutcomes:this.getDefaultObjectives()}},watch:{course:{handler(){this.loadCourseContent()},deep:!0,immediate:!0}},methods:{async loadCourseContent(){if(!this.course||!this.course._id&&!this.course.id){this.error="  ",this.loading=!1;return}this.loading=!0,this.error=null;try{const t=this.course._id||this.course.id;let e=null,s=[];try{const n=await(await fetch(`/api/updated-courses/${t}?format=structured`)).json();if(n.success&&n.course&&(this.structuredCourseData=n.course,this.isStructuredFormat=!0,n.course.lessons&&Array.isArray(n.course.lessons))){this.structuredLessons=n.course.lessons,this.loading=!1;return}}catch{}try{const n=await(await fetch(`/api/updated-courses/${t}`)).json();n.success&&n.course&&(e=n.course,this.isStructuredFormat=!1,e.curriculum&&Array.isArray(e.curriculum)?s=this.processCurriculum(e.curriculum):e.lessons&&Array.isArray(e.lessons)&&(s=this.processStructuredLessonsToTraditional(e.lessons)))}catch{}if(!e&&s.length===0)try{const r=await hv();if(r&&r.success&&r.courses){const n=r.courses.find(i=>(i._id||i.id)===t||i.title===this.course.title);n&&(e=n,n.curriculum&&Array.isArray(n.curriculum)&&(s=this.processCurriculum(n.curriculum)))}}catch{}this.courseData=e||this.course,this.lessons=s,!this.isStructuredFormat&&s.length===0&&(this.error="      ")}catch{this.error="    . ,   ."}finally{this.loading=!1}},processStructuredLessonsToTraditional(t){return Array.isArray(t)?t.map((e,s)=>{try{return{id:e._id||`lesson_${s}`,_id:e._id||`lesson_${s}`,title:e.title||` ${s+1}`,lessonName:e.title||` ${s+1}`,description:this.extractLessonDescription(e.content),duration:e.duration||"30 ",order:e.lessonNumber-1||s,steps:this.convertStructuredContentToSteps(e.content,s)}}catch{return{id:`error_lesson_${s}`,title:` ${s+1} ()`,lessonName:` ${s+1} ()`,description:"   ",steps:[]}}}):[]},extractLessonDescription(t){var e,s,r,n,i,o;return t?(r=(s=(e=t.theory)==null?void 0:e.concepts)==null?void 0:s[0])!=null&&r.content?t.theory.concepts[0].content.substring(0,200)+"...":(o=(i=(n=t.practical_examples)==null?void 0:n.exercises)==null?void 0:i[0])!=null&&o.instructions?" : "+t.practical_examples.exercises[0].instructions.substring(0,150)+"...":" ":""},convertStructuredContentToSteps(t,e){var n,i,o,l;const s=[];let r=0;return(n=t.theory)!=null&&n.concepts?t.theory.concepts.forEach(c=>{s.push({id:`step_${e}_${r++}`,type:"explanation",title:c.title||"",content:c.content||"",data:{content:c.content||"",images:c.images||[]},images:c.images||[]})}):typeof t.theory=="object"&&t.theory&&Object.entries(t.theory).forEach(([c,u])=>{s.push({id:`step_${e}_${r++}`,type:"explanation",title:this.formatSectionTitle(c),content:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u,data:{content:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u}})}),(i=t.practical_examples)!=null&&i.exercises?t.practical_examples.exercises.forEach(c=>{s.push({id:`step_${e}_${r++}`,type:"practice",title:c.title||"",content:c.instructions||"",data:{instructions:c.instructions||"",type:"guided",images:c.images||[]},images:c.images||[]})}):typeof t.practical_examples=="object"&&t.practical_examples&&Object.entries(t.practical_examples).forEach(([c,u])=>{s.push({id:`step_${e}_${r++}`,type:"practice",title:this.formatSectionTitle(c),content:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u,data:{instructions:Array.isArray(u)?u.join(`

`):typeof u=="object"?JSON.stringify(u):u,type:"guided"}})}),((l=(o=t.homework)==null?void 0:o.theory_questions)==null?void 0:l.length)>0&&s.push({id:`step_${e}_${r++}`,type:"quiz",title:" ",content:t.homework.theory_questions[0],data:t.homework.theory_questions.map((c,u)=>({question:c,type:"multiple-choice",options:[{text:" A"},{text:" B"},{text:" C"}],correctAnswer:0,explanation:"     ."}))}),s},processCurriculum(t){return Array.isArray(t)?t.map((e,s)=>{try{return{id:e._id||e.id||`lesson_${s}`,_id:e._id||e.id||`lesson_${s}`,title:e.title||` ${s+1}`,lessonName:e.title||` ${s+1}`,description:e.description||"",duration:e.duration||"30 ",order:e.order!==void 0?e.order:s,steps:this.processSteps(e.steps||[])}}catch{return{id:`error_lesson_${s}`,title:` ${s+1} ()`,lessonName:` ${s+1} ()`,description:"   ",steps:[]}}}):[]},processSteps(t){return Array.isArray(t)?t.map((e,s)=>{try{const r={id:e.id||`step_${s}`,type:e.type||"explanation",title:e.title||"",description:e.description||"",content:e.content||"",data:e.data||{},order:e.order!==void 0?e.order:s,images:e.images||[]};return!r.data.content&&r.content&&(r.data.content=r.content),r}catch{return{id:`error_step_${s}`,type:"explanation",title:"  ",content:"     ",data:{content:"   "}}}}):[]},formatContent(t){return t?typeof t!="string"?typeof t=="object"?JSON.stringify(t,null,2):String(t):t.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^(?!<p>)/,"<p>").replace(new RegExp("(?<!<\\/p>)$"),"</p>"):""},formatSectionTitle(t){return t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()).replace(/([a-z])([A-Z])/g,"$1 $2")},getDefaultObjectives(){return["  ,    ","     ","     "]},goToPreviousLesson(){this.isFirstLesson||this.currentLessonIndex--},goToNextLesson(){this.isLastLesson||this.currentLessonIndex++},completeCourse(){confirm("!   .   ?")&&this.$emit("back-to-courses")},handleOverlayClick(){this.$emit("close")},handleQuizAnswer(t,e,s){this.quizAnswers.set(t,{answerIndex:e,isCorrect:s,answered:!0})},openPdfFullscreen(t){this.fullscreenPdf=t},closePdfFullscreen(){this.fullscreenPdf=null},getStepTitle(t){return t.title?t.title:{explanation:"",example:"",practice:"",quiz:"",video:"",pdf:"",image:""}[t.type]||""},getStepTypeLabel(t){return{explanation:"",example:"",practice:"",quiz:"",video:"",pdf:"",image:""}[t]||""},getStepComponent(t){return{explanation:"step-text",example:"step-text",reading:"step-text",text:"step-text",video:"step-video",pdf:"step-pdf",practice:"step-practice",quiz:"step-quiz",image:"step-text"}[t]||"step-text"}},components:{"step-text":{props:["step"],template:`
        <div class="step-text">
          <div class="text-content" v-html="formattedContent"></div>
          <template v-if="hasImages">
            <div class="step-images">
              <div v-for="image in step.images || []" :key="image.id || image.url" class="step-image">
                <img :src="image.url" :alt="image.alt || ' '" />
                <p v-if="image.caption" class="image-caption">{{ image.caption }}</p>
              </div>
            </div>
          </template>
        </div>
      `,computed:{formattedContent(){var e;let t=((e=this.step.data)==null?void 0:e.content)||this.step.content||"";return t||(t="<p>    .</p>"),typeof t=="string"&&(t=t.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>"),!t.includes("<p>")&&!t.includes("<div>")&&(t="<p>"+t+"</p>")),t},hasImages(){return this.step.images&&Array.isArray(this.step.images)&&this.step.images.length>0}}},"step-video":{props:["step"],template:`
        <div class="step-video">
          <div class="video-wrapper">
            <template v-if="videoUrl">
              <div class="video-container">
                <iframe v-if="isYouTube" :src="embedUrl" frameborder="0" allowfullscreen></iframe>
                <video v-else controls>
                  <source :src="videoUrl" type="video/mp4">
                       .
                </video>
              </div>
            </template>
            <template v-else>
              <div class="video-placeholder">
                <p>- </p>
              </div>
            </template>
          </div>
        </div>
      `,computed:{videoUrl(){var t;return((t=this.step.data)==null?void 0:t.url)||this.step.videoUrl||""},isYouTube(){return this.videoUrl.includes("youtube.com")||this.videoUrl.includes("youtu.be")},embedUrl(){var t;return this.videoUrl.includes("youtube.com/watch")?`https://www.youtube.com/embed/${(t=this.videoUrl.split("v=")[1])==null?void 0:t.split("&")[0]}`:this.videoUrl}}},"step-pdf":{props:["step"],emits:["pdf-fullscreen"],template:`
        <div class="step-pdf">
          <template v-if="pdfUrl">
            <div class="pdf-container">
              <iframe :src="pdfUrl" class="pdf-iframe"></iframe>
              <div class="pdf-actions">
                <button @click="$emit('pdf-fullscreen', pdfUrl)" class="pdf-fullscreen-btn">
                     
                </button>
              </div>
            </div>
          </template>
          <template v-else>
            <div class="pdf-placeholder">
              <p>PDF- </p>
            </div>
          </template>
        </div>
      `,computed:{pdfUrl(){var t;return((t=this.step.data)==null?void 0:t.url)||this.step.pdfUrl||""}}},"step-practice":{props:["step"],template:`
        <div class="step-practice">
          <div class="practice-content">
            <template v-if="instructions">
              <div v-html="formattedInstructions"></div>
            </template>
            <template v-else>
              <div>
                <p>    .</p>
              </div>
            </template>
          </div>
        </div>
      `,computed:{instructions(){var t;return((t=this.step.data)==null?void 0:t.instructions)||this.step.instructions||this.step.content||""},formattedInstructions(){return this.instructions.replace(/\n/g,"<br>")}}},"step-quiz":{props:["step","stepIndex"],emits:["quiz-answer"],data(){return{selectedAnswers:new Map}},template:`
        <div class="step-quiz">
          <template v-if="quizData && quizData.length > 0">
            <div v-for="(quiz, quizIndex) in quizData" :key="quizIndex" class="quiz-item">
              <h3 class="quiz-question">{{ quiz.question }}</h3>
              
              <template v-if="quiz.options && quiz.options.length > 0">
                <div class="quiz-options">
                  <button
                    v-for="(option, index) in quiz.options"
                    :key="index"
                    @click="selectAnswer(quizIndex, index)"
                    :class="getOptionClass(quizIndex, index)"
                    class="quiz-option"
                  >
                    <span class="option-letter">{{ String.fromCharCode(65 + index) }}</span>
                    <span class="option-text">{{ getOptionText(option) }}</span>
                    <span class="option-icon correct-icon">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    </span>
                    <span class="option-icon incorrect-icon">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </span>
                  </button>
                </div>
              </template>
              
              <template v-if="isAnswered(quizIndex) && quiz.explanation">
                <div class="quiz-explanation">
                  <strong>:</strong> {{ quiz.explanation }}
                </div>
              </template>
            </div>
          </template>
          
          <template v-else>
            <div class="no-quiz">
              <p> </p>
            </div>
          </template>
        </div>
      `,computed:{quizData(){return Array.isArray(this.step.data)?this.step.data:this.step.data&&this.step.data.question?[this.step.data]:[]}},methods:{selectAnswer(t,e){if(this.isAnswered(t))return;this.selectedAnswers.set(t,e);const r=this.quizData[t].correctAnswer===e;this.$emit("quiz-answer",this.stepIndex,e,r)},getOptionText(t){return typeof t=="string"?t:t.text||""},isAnswered(t){return this.selectedAnswers.has(t)},getOptionClass(t,e){if(!this.isAnswered(t))return"";const s=this.quizData[t],r=this.selectedAnswers.get(t);return e===s.correctAnswer?"correct":e===r&&e!==s.correctAnswer?"incorrect":"disabled"}}}}},tee={class:"player-header"},see={class:"header-content"},ree={class:"course-info"},nee={class:"course-badge"},iee={class:"lesson-title"},oee={key:0,class:"format-indicator"},aee={class:"progress-section"},lee={class:"progress-info"},cee={class:"lesson-counter"},uee={class:"progress-text"},dee={class:"progress-bar"},hee={key:0,class:"objectives-container"},fee={class:"objectives-card"},pee={class:"objectives-header"},mee={class:"objectives-list"},gee={class:"player-content"},yee={key:0,class:"loading-state"},vee={key:1,class:"error-state"},_ee={key:2,class:"structured-lesson-content"},bee={key:0,class:"content-section theory-section"},wee={class:"theory-content"},See={key:0,class:"concept-title"},Eee=["innerHTML"],Tee={key:1,class:"concept-images"},kee=["src","alt"],Iee={key:0,class:"image-caption"},Cee={class:"subsection-title"},Aee={class:"subsection-content"},Pee={key:0,class:"structured-item"},xee={key:0,class:"item-title"},Lee=["innerHTML"],Ree=["innerHTML"],Nee=["innerHTML"],Oee={key:1,class:"content-section examples-section"},Mee={class:"examples-content"},Dee={key:0,class:"exercise-title"},$ee=["innerHTML"],Uee={key:1,class:"exercise-images"},Fee=["src","alt"],Vee={key:0,class:"image-caption"},Bee={class:"subsection-title"},qee={class:"subsection-content"},jee={key:0,class:"structured-example"},Hee={key:0,class:"item-title"},Wee=["innerHTML"],zee=["innerHTML"],Gee=["innerHTML"],Kee={key:2,class:"content-section homework-section"},Yee={class:"homework-content"},Qee={key:0,class:"homework-subsection"},Xee={class:"theory-questions-list"},Jee={key:1,class:"homework-subsection"},Zee={class:"practical-tasks-list"},ete={key:3,class:"lesson-content"},tte={class:"step-header"},ste={class:"step-number"},rte={class:"step-info"},nte={class:"step-title"},ite={class:"step-type"},ote={class:"step-content"},ate={key:4,class:"empty-state"},lte={key:1,class:"player-footer"},cte=["disabled"],ute={class:"lesson-nav-info"};function dte(t,e,s,r,n,i){return v(),S("div",{class:"lesson-player-overlay",onClick:e[6]||(e[6]=(...o)=>i.handleOverlayClick&&i.handleOverlayClick(...o))},[a("div",{class:"lesson-player",onClick:e[5]||(e[5]=vt(()=>{},["stop"]))},[a("header",tee,[a("button",{class:"close-btn",onClick:e[0]||(e[0]=o=>t.$emit("close")),"aria-label":" "},e[7]||(e[7]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])),a("div",see,[a("div",ree,[a("div",nee,m(i.courseTitle),1),a("h1",iee,m(i.currentLessonTitle),1),n.isStructuredFormat?(v(),S("div",oee,e[8]||(e[8]=[a("span",{class:"structured-badge"},"Structured Format",-1)]))):G("",!0)]),a("div",aee,[a("div",lee,[a("span",cee," "+m(n.currentLessonIndex+1)+"  "+m(i.totalLessons),1),a("span",uee,m(Math.round(i.progressPercentage))+"% ",1)]),a("div",dee,[a("div",{class:"progress-fill",style:rt({width:`${i.progressPercentage}%`})},null,4)])])])]),i.learningObjectives.length>0?(v(),S("div",hee,[a("div",fee,[a("div",pee,[e[9]||(e[9]=a("div",{class:"objectives-icon"},[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-8.08"}),a("polyline",{points:"22 4 12 14.01l-3-3"})])],-1)),a("h2",null,m(n.isStructuredFormat?" ":" "),1)]),a("ul",mee,[(v(!0),S(he,null,be(i.learningObjectives,(o,l)=>(v(),S("li",{key:l},[e[10]||(e[10]=a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20,6 9,17 4,12"})],-1)),se(" "+m(o),1)]))),128))])])])):G("",!0),a("main",gee,[n.loading?(v(),S("div",yee,[e[11]||(e[11]=a("div",{class:"loading-spinner"},[a("div",{class:"spinner"})],-1)),e[12]||(e[12]=a("h3",null," ...",-1)),a("p",null,m(n.isStructuredFormat?"  ":"  "),1)])):n.error?(v(),S("div",vee,[e[13]||(e[13]=a("div",{class:"error-icon"},"",-1)),e[14]||(e[14]=a("h3",null,"   ",-1)),a("p",null,m(n.error),1),a("button",{onClick:e[1]||(e[1]=(...o)=>i.loadCourseContent&&i.loadCourseContent(...o)),class:"retry-btn"},"   ")])):n.isStructuredFormat&&i.currentStructuredLesson?(v(),S("div",_ee,[i.currentStructuredLesson.content.theory?(v(),S("div",bee,[e[15]||(e[15]=at('<div class="section-header" data-v-1a71495a><div class="section-icon theory-icon" data-v-1a71495a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1a71495a><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" data-v-1a71495a></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" data-v-1a71495a></path></svg></div><h2 data-v-1a71495a></h2></div>',1)),a("div",wee,[i.currentStructuredLesson.content.theory.concepts?(v(!0),S(he,{key:0},be(i.currentStructuredLesson.content.theory.concepts,(o,l)=>(v(),S("div",{key:`concept-${l}`,class:"concept-block"},[o.title?(v(),S("h3",See,m(o.title),1)):G("",!0),a("div",{class:"concept-content",innerHTML:i.formatContent(o.content)},null,8,Eee),o.images&&o.images.length>0?(v(),S("div",Tee,[(v(!0),S(he,null,be(o.images,c=>(v(),S("div",{key:c.id,class:"concept-image"},[a("img",{src:c.url,alt:c.alt||"Concept image"},null,8,kee),c.caption?(v(),S("p",Iee,m(c.caption),1)):G("",!0)]))),128))])):G("",!0)]))),128)):typeof i.currentStructuredLesson.content.theory=="object"?(v(!0),S(he,{key:1},be(i.currentStructuredLesson.content.theory,(o,l)=>(v(),S("div",{key:l,class:"theory-subsection"},[a("h3",Cee,m(i.formatSectionTitle(l)),1),a("div",Aee,[Array.isArray(o)?(v(!0),S(he,{key:0},be(o,(c,u)=>(v(),S("div",{key:u,class:"theory-item"},[typeof c=="object"&&c.content?(v(),S("div",Pee,[c.title?(v(),S("h4",xee,m(c.title),1)):G("",!0),a("div",{innerHTML:i.formatContent(c.content)},null,8,Lee)])):(v(),S("div",{key:1,class:"simple-item",innerHTML:i.formatContent(c)},null,8,Ree))]))),128)):(v(),S("div",{key:1,innerHTML:i.formatContent(o)},null,8,Nee))])]))),128)):G("",!0)])])):G("",!0),i.currentStructuredLesson.content.practical_examples?(v(),S("div",Oee,[e[16]||(e[16]=at('<div class="section-header" data-v-1a71495a><div class="section-icon examples-icon" data-v-1a71495a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1a71495a><rect x="2" y="7" width="20" height="14" rx="2" ry="2" data-v-1a71495a></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" data-v-1a71495a></path></svg></div><h2 data-v-1a71495a> </h2></div>',1)),a("div",Mee,[i.currentStructuredLesson.content.practical_examples.exercises?(v(!0),S(he,{key:0},be(i.currentStructuredLesson.content.practical_examples.exercises,(o,l)=>(v(),S("div",{key:`exercise-${l}`,class:"exercise-block"},[o.title?(v(),S("h3",Dee,m(o.title),1)):G("",!0),a("div",{class:"exercise-instructions",innerHTML:i.formatContent(o.instructions)},null,8,$ee),o.images&&o.images.length>0?(v(),S("div",Uee,[(v(!0),S(he,null,be(o.images,c=>(v(),S("div",{key:c.id,class:"exercise-image"},[a("img",{src:c.url,alt:c.alt||"Exercise image"},null,8,Fee),c.caption?(v(),S("p",Vee,m(c.caption),1)):G("",!0)]))),128))])):G("",!0)]))),128)):typeof i.currentStructuredLesson.content.practical_examples=="object"?(v(!0),S(he,{key:1},be(i.currentStructuredLesson.content.practical_examples,(o,l)=>(v(),S("div",{key:l,class:"examples-subsection"},[a("h3",Bee,m(i.formatSectionTitle(l)),1),a("div",qee,[Array.isArray(o)?(v(!0),S(he,{key:0},be(o,(c,u)=>(v(),S("div",{key:u,class:"example-item"},[typeof c=="object"&&c.instructions?(v(),S("div",jee,[c.title?(v(),S("h4",Hee,m(c.title),1)):G("",!0),a("div",{innerHTML:i.formatContent(c.instructions)},null,8,Wee)])):(v(),S("div",{key:1,class:"simple-example",innerHTML:i.formatContent(c)},null,8,zee))]))),128)):(v(),S("div",{key:1,innerHTML:i.formatContent(o)},null,8,Gee))])]))),128)):G("",!0)])])):G("",!0),i.currentStructuredLesson.content.homework?(v(),S("div",Kee,[e[19]||(e[19]=at('<div class="section-header" data-v-1a71495a><div class="section-icon homework-icon" data-v-1a71495a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-1a71495a><polygon points="14 2 18 6 7 17 3 17 3 13 14 2" data-v-1a71495a></polygon><line x1="3" y1="22" x2="21" y2="22" data-v-1a71495a></line></svg></div><h2 data-v-1a71495a> </h2></div>',1)),a("div",Yee,[i.currentStructuredLesson.content.homework.theory_questions&&i.currentStructuredLesson.content.homework.theory_questions.length>0?(v(),S("div",Qee,[e[17]||(e[17]=a("h3",{class:"homework-subtitle"}," ",-1)),a("ol",Xee,[(v(!0),S(he,null,be(i.currentStructuredLesson.content.homework.theory_questions,(o,l)=>(v(),S("li",{key:`theory-q-${l}`,class:"theory-question"},m(o),1))),128))])])):G("",!0),i.currentStructuredLesson.content.homework.practical_tasks&&i.currentStructuredLesson.content.homework.practical_tasks.length>0?(v(),S("div",Jee,[e[18]||(e[18]=a("h3",{class:"homework-subtitle"}," ",-1)),a("ol",Zee,[(v(!0),S(he,null,be(i.currentStructuredLesson.content.homework.practical_tasks,(o,l)=>(v(),S("li",{key:`practical-task-${l}`,class:"practical-task"},m(o),1))),128))])])):G("",!0)])])):G("",!0)])):!n.isStructuredFormat&&i.currentLesson&&i.hasSteps?(v(),S("div",ete,[(v(!0),S(he,null,be(i.currentLesson.steps,(o,l)=>(v(),S("div",{key:`step-${l}`,class:"step-container"},[a("div",tte,[a("div",ste,m(l+1),1),a("div",rte,[a("h3",nte,m(i.getStepTitle(o)),1),a("span",ite,m(i.getStepTypeLabel(o.type)),1)])]),a("div",ote,[(v(),Yt(Eh(i.getStepComponent(o.type)),{step:o,"step-index":l,onQuizAnswer:i.handleQuizAnswer,onPdfFullscreen:i.openPdfFullscreen},null,40,["step","step-index","onQuizAnswer","onPdfFullscreen"]))])]))),128))])):(v(),S("div",ate,e[20]||(e[20]=[a("div",{class:"empty-icon"},"",-1),a("h3",null," ",-1),a("p",null,"    .",-1)])))]),!n.loading&&!n.error&&n.lessons.length>0?(v(),S("footer",lte,[a("button",{class:"nav-btn nav-btn--secondary",disabled:i.isFirstLesson,onClick:e[2]||(e[2]=(...o)=>i.goToPreviousLesson&&i.goToPreviousLesson(...o))},e[21]||(e[21]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15,18 9,12 15,6"})],-1),se("  ")]),8,cte),a("div",ute,[a("span",null,m(n.currentLessonIndex+1)+" / "+m(i.totalLessons),1)]),i.isLastLesson?(v(),S("button",{key:1,class:"nav-btn nav-btn--success",onClick:e[4]||(e[4]=(...o)=>i.completeCourse&&i.completeCourse(...o))},e[23]||(e[23]=[se("   "),a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20,6 9,17 4,12"})],-1)]))):(v(),S("button",{key:0,class:"nav-btn nav-btn--primary",onClick:e[3]||(e[3]=(...o)=>i.goToNextLesson&&i.goToNextLesson(...o))},e[22]||(e[22]=[se("  "),a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9,18 15,12 9,6"})],-1)])))])):G("",!0)])])}const hte=Je(eee,[["render",dte],["__scopeId","data-v-1a71495a"]]),fte={name:"UpdatedCoursesPage",components:{LessonLoader:hte},data(){return{courses:[],availableCategories:[],availableLevels:[],selectedCourse:null,isModalOpen:!1,searchTerm:"",categoryFilter:"all",levelFilter:"all",typeFilter:"all",debounceTimeout:null,loading:!1,modalLoading:!1,error:null,showStudyInterface:!1,retryCount:0,maxRetries:3,cacheTimeout:5*60*1e3,lastFetchTime:0,componentKey:0,lastUpdateTime:Date.now(),forceUpdateCounter:0}},computed:{...tn("user",["userStatus"]),...Gg(["user"]),...tn(["getUser"]),currentUser(){return this.getUser||this.user||{}},currentUserStatus(){var t;try{return((t=this.currentUser)==null?void 0:t.subscriptionPlan)||localStorage.getItem("userStatus")||localStorage.getItem("plan")||localStorage.getItem("subscriptionPlan")||"free"}catch{return"free"}},isPremiumUser(){const t=this.currentUserStatus;return t==="pro"||t==="start"},filteredCoursesCount(){return this.courses.length},hasValidCourses(){return Array.isArray(this.courses)&&this.courses.length>0},shouldShowEmptyState(){return!this.loading&&!this.error&&!this.hasValidCourses},shouldShowErrorState(){return!this.loading&&this.error},shouldRefreshCache(){return Date.now()-this.lastFetchTime>this.cacheTimeout}},watch:{user:{handler(t,e){if(!t||!e)return;const s=t==null?void 0:t.subscriptionPlan,r=e==null?void 0:e.subscriptionPlan;s!==r&&this.handleUserStatusChange(s,r)},deep:!0,immediate:!1},currentUserStatus:{handler(t,e){t!==e&&this.triggerReactivityUpdate()},immediate:!1}},async mounted(){try{await this.initializeComponent()}catch{this.error="  "}},beforeUnmount(){this.cleanup()},methods:{async initializeComponent(){try{(this.shouldRefreshCache||this.courses.length===0)&&await this.loadCoursesWithRetry(),this.setupEventListeners(),this.validateComponentState()}catch(t){this.handleInitializationError(t)}},async loadCoursesWithRetry(){for(let t=1;t<=this.maxRetries;t++)try{await this.loadCourses(),this.retryCount=0;break}catch(e){t===this.maxRetries?this.handleLoadError(e):await this.delay(1e3*Math.pow(2,t-1))}},validateComponentState(){Array.isArray(this.courses)||(this.courses=[]),Array.isArray(this.availableCategories)||(this.availableCategories=[]),Array.isArray(this.availableLevels)||(this.availableLevels=[])},handleInitializationError(t){this.error=this.getErrorMessage(t),this.loading=!1,this.provideFallbackData()},provideFallbackData(){this.courses=[],this.availableCategories=["  ","Web-","",""],this.availableLevels=["","",""]},async loadCourses(){this.loading=!0,this.error=null;try{const t=this.buildFilters();let e=await uP(t,"structured");if(this.validateResponse(e)||(e=await hv(t)),e&&e.success)this.processCoursesResponse(e),this.lastFetchTime=Date.now();else throw new Error((e==null?void 0:e.error)||"Failed to fetch courses")}catch(t){this.handleLoadError(t)}finally{this.loading=!1}},validateResponse(t){return t&&typeof t=="object"&&t.success!==!1&&Array.isArray(t.courses)},processCoursesResponse(t){this.courses=this.processCourses(t.courses||[]),this.availableCategories=this.processCategories(t.categories||[]),this.availableLevels=this.processLevels(t.difficulties||[]),this.storeCourseMetadata(t)},processCourses(t){return Array.isArray(t)?t.map((e,s)=>{try{return this.processSingleCourse(e,s)}catch{return this.createFallbackCourse(e,s)}}).filter(e=>e!==null):[]},processSingleCourse(t,e){return{...t,id:t._id||t.id||`course_${Date.now()}_${e}`,_id:t._id||t.id||`course_${Date.now()}_${e}`,title:this.validateString(t.title)||" ",description:this.validateString(t.description)||"  ",category:this.validateString(t.category)||"",level:this.validateString(t.level||t.difficulty)||"",duration:this.validateString(t.duration)||"30 ",isPremium:!!(t.isPremium||t.premium||t.type==="premium"),thumbnail:this.generateImageBackground(t.category),instructor:this.validateInstructor(t.instructor),studentsCount:this.validateNumber(t.studentsCount,0),rating:this.validateNumber(t.rating,0,5),curriculum:this.validateCurriculum(t.curriculum),structuredData:t.structuredData||null,format:t.format||"standard",isNew:this.isNewCourse(t.createdAt),hasHomework:this.hasHomeworkContent(t.curriculum),estimatedHours:this.extractHours(t.duration),totalLessons:(t.curriculum||[]).length,imageLoaded:!0,processedAt:Date.now(),isValid:!0}},createFallbackCourse(t,e){return{id:`fallback_${e}`,_id:`fallback_${e}`,title:" ",description:"   ",category:"",level:"",duration:"30 ",isPremium:!1,thumbnail:this.generateImageBackground("default"),instructor:{name:"ACED",avatar:this.getDefaultAvatar()},studentsCount:0,rating:0,curriculum:[],imageLoaded:!0,isValid:!1,isFallback:!0}},processCategories(t){const e=["  ",""," ","Web-"," "," ","","",""];return!Array.isArray(t)||t.length===0?e:[...new Set([...t,...e])].sort()},processLevels(t){const e=["","",""];return!Array.isArray(t)||t.length===0?e:[...new Set([...t,...e])].sort()},storeCourseMetadata(t){try{const e={totalCourses:this.courses.length,format:t.format,lastFetch:Date.now(),categories:this.availableCategories.length,levels:this.availableLevels.length,pagination:t.pagination||{}};sessionStorage.setItem("coursesMetadata",JSON.stringify(e))}catch{}},validateString(t,e=""){return typeof t=="string"&&t.trim()?t.trim():e},validateNumber(t,e=0,s=1/0){const r=parseFloat(t);return isNaN(r)?e:Math.max(e,Math.min(s,r))},validateInstructor(t){return!t||typeof t!="object"?{name:"ACED Instructor",avatar:this.getDefaultAvatar(),bio:"Experienced instructor"}:{name:this.validateString(t.name,"ACED Instructor"),avatar:this.getDefaultAvatar(),bio:this.validateString(t.bio,"Experienced instructor")}},validateCurriculum(t){return Array.isArray(t)?t.filter(e=>e&&typeof e=="object"&&e.title&&typeof e.title=="string"):[]},isNewCourse(t){if(!t)return!1;try{const e=new Date(t),s=new Date(Date.now()-7*24*60*60*1e3);return e>s}catch{return!1}},hasHomeworkContent(t){return Array.isArray(t)?t.some(e=>{var s;return(s=e.steps)==null?void 0:s.some(r=>r.type==="quiz"||r.type==="practice")}):!1},extractHours(t){if(typeof t=="string"){const e=t.match(/(\d+)/);return e?parseInt(e[1]):10}return t!=null&&t.hours?t.hours:10},getCategoryIcon(t){const e=this.safeString(t),s='width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"',r={ai:`<svg ${s}><path d="M12 8V4H8"/><rect x="4" y="4" width="8" height="8" rx="2"/><path d="M12 12v4h4"/><rect x="10" y="10" width="8" height="8" rx="2"/></svg>`,web:`<svg ${s}><path d="m16 18-6-12 6-6m-12 18 6-12-6-6"/></svg>`,design:`<svg ${s}><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/><line x1="12" y1="22" x2="12" y2="12"/><line x1="22" y1="8.5" x2="2" y2="8.5"/><line x1="2" y1="15.5" x2="22" y2="15.5"/><line x1="12" y1="2" x2="12" y2="12"/></svg>`,mobile:`<svg ${s}><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>`,marketing:`<svg ${s}><path d="M12 22V12M12 12L8 16M12 12l4 4M12 12L8 8M12 12l4-4M12 2v4M20 12h-4M4 12h4M17.66 17.66l-2.83-2.83M6.34 6.34l2.83 2.83M17.66 6.34l-2.83 2.83M6.34 17.66l2.83-2.83"/></svg>`,default:`<svg ${s}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`};return e.includes("")||e.includes("")?r.ai:e.includes("web")||e.includes("")?r.web:e.includes("")?r.mobile:e.includes("")||e.includes("")?r.design:e.includes("")?r.marketing:r.default},getCourseImageStyle(t){return t?this.generateImageBackground(t.category):this.generateImageBackground("default")},generateImageBackground(t){const e={"  ":{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important"},:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important"}," ":{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important"},"Web-":{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%) !important"}," ":{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%) !important"}," ":{background:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%) !important"},:{background:"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%) !important"},:{background:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%) !important"},:{background:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%) !important"},default:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important"}},s={backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"600",textAlign:"center"},r=e[t]||e.default;return{...s,...r}},getDefaultAvatar(){return{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",width:"40px",height:"40px",borderRadius:"50%"}},handleImageError(t,e){},async openModal(t){if(!(!t||!t._id&&!t.id)){this.selectedCourse=null,this.isModalOpen=!0,this.modalLoading=!0;try{const e=t._id||t.id;let s=await dg(e);s&&s.success&&s.data?this.selectedCourse=this.enhanceCourseForModal(s.data,t):this.selectedCourse=this.enhanceCourseForModal(t,t)}catch{this.selectedCourse=this.enhanceCourseForModal(t,t)}finally{this.modalLoading=!1}}},enhanceCourseForModal(t,e){return{...e,...t,id:t._id||t.id||e.id,_id:t._id||e._id,title:t.title||e.title,isPremium:!!(t.isPremium||e.isPremium),skills:this.getSkillsList(t),modules:this.getModulesList(t),thumbnail:this.generateImageBackground(t.category||e.category),imageLoaded:!0,format:t.format||"standard",structuredData:t.structuredData||null,hasValidData:this.validateCourseData(t),isModalReady:!0,modalLoadedAt:Date.now()}},validateCourseData(t){return!!(t&&t.title&&t.description&&t.category)},async startCourse(t){if(t){if(t.isPremium&&!this.isPremiumUser){const e=this.getPremiumMessage(t);this.showToast(e,"error");return}try{let e=await this.ensureCompleteCourseData(t);this.selectedCourse=e,this.isModalOpen=!1,this.showStudyInterface=!0,this.trackCourseStart(e)}catch{this.showToast("   ","error")}}},async ensureCompleteCourseData(t){if(!t.structuredData&&(!t.curriculum||!t.curriculum.length))try{let e=await dg(t._id||t.id);if(e&&e.success&&e.data)return{...t,...e.data,_id:e.data._id||t._id,id:e.data.id||t.id||e.data._id,format:e.format,structuredData:e.format==="structured"?e.data:null,isEnhanced:!0}}catch{}return t},getPremiumMessage(t){const e=this.currentUserStatus;return e==="free"?`      Start/Pro.   : ${e}`:`    Pro.   : ${e}`},trackCourseStart(t){try{const e={courseId:t.id,title:t.title,category:t.category,isPremium:t.isPremium,startedAt:Date.now(),userStatus:this.currentUserStatus};sessionStorage.setItem("lastStartedCourse",JSON.stringify(e)),this.$emit("courseStarted",e)}catch{}},handleLoadError(t){this.error=this.getErrorMessage(t),this.retryCount++,this.retryCount>=this.maxRetries&&this.provideFallbackData()},getErrorMessage(t){return t?typeof t=="string"?t:t.message?t.message.includes("Network")?"    .  .":t.message.includes("404")?"   .  .":t.message.includes("500")?" .      .":t.message.includes("timeout")?"  .   .":t.message:"    ":" "},async delay(t){return new Promise(e=>setTimeout(e,t))},showToast(t,e="info"){this.$toast?this.$toast[e](t,{duration:4e3}):this.$notify&&this.$notify({type:e,message:t,duration:4e3})},goBackToCourses(){this.showStudyInterface=!1,this.selectedCourse=null,this.componentKey++},closeModal(){this.isModalOpen=!1,this.selectedCourse=null,this.modalLoading=!1},buildFilters(){const t={};return this.searchTerm&&this.searchTerm.trim()&&(t.search=this.searchTerm.trim()),this.categoryFilter&&this.categoryFilter!=="all"&&(t.category=this.categoryFilter),this.levelFilter&&this.levelFilter!=="all"&&(t.difficulty=this.levelFilter),this.typeFilter&&this.typeFilter!=="all"&&(t.type=this.typeFilter),t},debounceSearch(){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.loadCoursesWithRetry()},300)},applyFilters(){this.loadCoursesWithRetry()},setTypeFilter(t){this.typeFilter=t,this.loadCoursesWithRetry()},clearFilters(){this.searchTerm="",this.categoryFilter="all",this.levelFilter="all",this.typeFilter="all",this.loadCoursesWithRetry()},getSkillsList(t){return t?t.skills&&Array.isArray(t.skills)&&t.skills.length>0?t.skills:t.learningOutcomes&&Array.isArray(t.learningOutcomes)&&t.learningOutcomes.length>0?t.learningOutcomes:this.generateSkillsFromCourse(t):this.getDefaultSkills()},generateSkillsFromCourse(t){const e=this.safeString(t.title),s=this.safeString(t.category),r={javascript:["  JavaScript","  DOM "," ","  ES6+"],python:["    Python","- ","  "," -"],design:["   ","    ","  "," -"],:["  ","  ","  "," "],:["  "," "," ","  "]};for(const[n,i]of Object.entries(r))if(e.includes(n)||s.includes(n))return i;return this.getDefaultSkills()},getModulesList(t){return t?t.curriculum&&Array.isArray(t.curriculum)&&t.curriculum.length>0?t.curriculum.map(e=>e.title||e.lessonName||"  "):t.modules&&Array.isArray(t.modules)&&t.modules.length>0?t.modules:this.generateModulesFromCourse(t):this.getDefaultModules()},generateModulesFromCourse(t){const e=this.safeString(t.title);return e.includes("javascript")?["  JavaScript","  ","  DOM","  "," "]:e.includes("design")||e.includes("")?[" ","  ","  ","UI/UX "," "]:this.getDefaultModules()},getDefaultSkills(){return["    ","   ","  "," "]},getDefaultModules(){return["  "," "," "," "," "]},safeString(t){return t==null?"":String(t).toLowerCase().trim()},cleanup(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),this.removeEventListeners(),this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)},setupEventListeners(){typeof window<"u"&&(this.handleOnline=()=>{this.shouldRefreshCache&&this.loadCoursesWithRetry()},this.handleOffline=()=>{},window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),this.handleVisibilityChange=()=>{!document.hidden&&this.shouldRefreshCache&&this.loadCoursesWithRetry()},document.addEventListener("visibilitychange",this.handleVisibilityChange))},removeEventListeners(){typeof window<"u"&&(this.handleOnline&&(window.removeEventListener("online",this.handleOnline),this.handleOnline=null),this.handleOffline&&(window.removeEventListener("offline",this.handleOffline),this.handleOffline=null),this.handleVisibilityChange&&(document.removeEventListener("visibilitychange",this.handleVisibilityChange),this.handleVisibilityChange=null))},triggerReactivityUpdate(){this.componentKey++,this.forceUpdateCounter++,this.lastUpdateTime=Date.now(),this.$forceUpdate()},handleUserStatusChange(t,e){!t||t===e||(this.triggerReactivityUpdate(),t&&t!=="free"&&e==="free"&&this.showToast(" Pro  !","success"))}}},pte={class:"content-wrapper"},mte={class:"container"},gte={class:"filter-bar"},yte={class:"filter-group-search"},vte={class:"filter-group-select"},_te=["value"],bte={class:"filter-group-select"},wte=["value"],Ste={class:"filter-group-buttons"},Ete={class:"results-info"},Tte={class:"results-count"},kte={key:0,class:"empty-state"},Ite={key:1,class:"empty-state"},Cte={class:"empty-state-description"},Ate={key:2,class:"courses-grid"},Pte=["onClick"],xte={class:"course-card-image-wrapper"},Lte=["onError"],Rte={key:0,class:"image-placeholder"},Nte={key:0,class:"badge badge-premium"},Ote={key:1,class:"badge badge-free"},Mte={class:"course-card-content"},Dte={class:"course-card-meta"},$te={class:"course-card-category"},Ute={class:"course-card-title"},Fte={class:"course-card-description"},Vte={class:"course-card-stats-and-provider"},Bte={class:"course-card-stats"},qte={class:"course-card-stat"},jte={class:"course-card-level"},Hte={key:3,class:"empty-state"},Wte={key:0,class:"modal-loading-state"},zte={key:1,class:"modal-content"},Gte={class:"modal-header-section"},Kte=["innerHTML"],Yte={key:0,class:"modal-image-placeholder"},Qte={class:"modal-badge-container"},Xte={key:0,class:"modal-badge modal-badge-premium"},Jte={key:1,class:"modal-badge modal-badge-free"},Zte={class:"modal-meta-overlay"},ese={class:"modal-duration"},tse={class:"modal-body"},sse={class:"modal-course-info"},rse={class:"modal-tags"},nse={class:"modal-tag modal-tag-category"},ise={class:"modal-tag modal-tag-level"},ose={class:"modal-title"},ase={class:"modal-description"},lse={class:"modal-details"},cse={class:"modal-details-grid"},use={class:"modal-section"},dse={class:"modal-skills-list"},hse={class:"modal-section"},fse={class:"modal-modules-list"},pse={class:"module-number"},mse={class:"module-text"},gse={class:"modal-actions"},yse=["disabled"],vse={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},_se={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},bse={key:2},wse={key:3};function Sse(t,e,s,r,n,i){const o=Ht("LessonLoader");return n.showStudyInterface?(v(),Yt(o,{course:n.selectedCourse,onBackToCourses:i.goBackToCourses,key:`lesson-${n.componentKey}`},null,8,["course","onBackToCourses"])):(v(),S("div",{class:"courses-page",key:`courses-${n.componentKey}`},[e[43]||(e[43]=at('<div class="header" data-v-98954de9><div class="container" data-v-98954de9><div class="header-content" data-v-98954de9><div class="header-badge" data-v-98954de9><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="header-badge-icon" data-v-98954de9><path d="M5.5 8.5L2 12l3.5 3.5" data-v-98954de9></path><path d="M18.5 8.5L22 12l-3.5 3.5" data-v-98954de9></path><path d="M12 2l-2 10l2 10l2-10z" data-v-98954de9></path></svg> New courses every week </div><h1 class="header-title" data-v-98954de9>Modern Professions</h1><h2 class="header-subtitle" data-v-98954de9> Learn relevant skills and grow with technology </h2><p class="header-description" data-v-98954de9> Discover courses in most in-demand areas: AI, blockchain, design, marketing and programming </p></div></div></div>',1)),a("div",pte,[a("div",mte,[a("div",gte,[a("div",yte,[e[15]||(e[15]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"search-icon"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.3-4.3"})],-1)),Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.searchTerm=l),onInput:e[1]||(e[1]=(...l)=>i.debounceSearch&&i.debounceSearch(...l)),placeholder:"Search courses...",class:"input-search"},null,544),[[Ke,n.searchTerm]])]),a("div",vte,[Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.categoryFilter=l),onChange:e[3]||(e[3]=(...l)=>i.applyFilters&&i.applyFilters(...l)),class:"select-field"},[e[16]||(e[16]=a("option",{value:"all"},"All categories",-1)),(v(!0),S(he,null,be(n.availableCategories,l=>(v(),S("option",{key:l,value:l},m(l),9,_te))),128))],544),[[Js,n.categoryFilter]]),e[17]||(e[17]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"select-arrow"},[a("path",{d:"m6 9 6 6 6-6"})],-1))]),a("div",bte,[Pe(a("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>n.levelFilter=l),onChange:e[5]||(e[5]=(...l)=>i.applyFilters&&i.applyFilters(...l)),class:"select-field"},[e[18]||(e[18]=a("option",{value:"all"},"All levels",-1)),(v(!0),S(he,null,be(n.availableLevels,l=>(v(),S("option",{key:l,value:l},m(l),9,wte))),128))],544),[[Js,n.levelFilter]]),e[19]||(e[19]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"select-arrow"},[a("path",{d:"m6 9 6 6 6-6"})],-1))]),a("div",Ste,[a("button",{class:ge(["button-filter",{active:n.typeFilter==="all"}]),onClick:e[6]||(e[6]=l=>i.setTypeFilter("all"))}," All ",2),a("button",{class:ge(["button-filter",{active:n.typeFilter==="free"}]),onClick:e[7]||(e[7]=l=>i.setTypeFilter("free"))}," Free ",2),a("button",{class:ge(["button-filter",{active:n.typeFilter==="premium"}]),onClick:e[8]||(e[8]=l=>i.setTypeFilter("premium"))}," Premium ",2)])]),a("div",Ete,[a("div",Tte,[e[20]||(e[20]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"results-icon"},[a("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})],-1)),a("span",null,"Courses found: "+m(n.courses.length),1)]),e[21]||(e[21]=a("div",{class:"results-updated"},"Updated today",-1))]),n.loading?(v(),S("div",kte,e[22]||(e[22]=[a("div",{class:"spinner"},null,-1),a("h3",{class:"empty-state-title"},"Loading courses...",-1),a("p",{class:"empty-state-description"},"Preparing the best courses for you",-1)]))):n.error?(v(),S("div",Ite,[e[23]||(e[23]=at('<div class="empty-state-icon-wrapper" data-v-98954de9><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="empty-state-icon" data-v-98954de9><path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-98954de9></path><line x1="12" y1="9" x2="12" y2="13" data-v-98954de9></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-98954de9></line></svg></div><h3 class="empty-state-title" data-v-98954de9>Failed to load courses</h3>',2)),a("p",Cte,m(n.error),1),a("button",{onClick:e[9]||(e[9]=(...l)=>i.loadCourses&&i.loadCourses(...l)),class:"button-reset-filters"}," Try again ")])):n.courses.length>0?(v(),S("div",Ate,[(v(!0),S(he,null,be(n.courses,l=>(v(),S("div",{key:l.id||l._id,class:"course-card",onClick:c=>i.openModal(l)},[a("div",xte,[a("div",{class:"course-card-image",style:rt(i.getCourseImageStyle(l)),onError:c=>i.handleImageError(c,l)},[l.imageLoaded?G("",!0):(v(),S("div",Rte,e[24]||(e[24]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"placeholder-icon"},[a("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a("circle",{cx:"9",cy:"9",r:"2"}),a("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})],-1)])))],44,Lte),l.isPremium?(v(),S("div",Nte,e[25]||(e[25]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"badge-icon"},[a("path",{d:"m14 6 4 10L2 10"}),a("path",{d:"M5 14 2 12l10-2L9.5 2l.5 6"})],-1),se(" Premium ")]))):(v(),S("div",Ote,"Free"))]),a("div",Mte,[a("div",Dte,[a("div",$te,m(l.category||"General"),1)]),a("h3",Ute,m(l.title||"Untitled"),1),a("p",Fte,m(l.description||"No description provided"),1),a("div",Vte,[a("div",Bte,[a("div",qte,[e[26]||(e[26]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"course-card-stat-icon"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),a("span",null,m(l.duration||"30 min"),1)]),a("div",jte,m(l.level||"Basic"),1)]),e[27]||(e[27]=a("div",{class:"course-card-provider"},[a("p",null,"from"),a("p",null,"Aced")],-1))])])],8,Pte))),128))])):(v(),S("div",Hte,[e[28]||(e[28]=at('<div class="empty-state-icon-wrapper" data-v-98954de9><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="empty-state-icon" data-v-98954de9><circle cx="11" cy="11" r="8" data-v-98954de9></circle><path d="m21 21-4.3-4.3" data-v-98954de9></path></svg></div><h3 class="empty-state-title" data-v-98954de9>No courses found</h3><p class="empty-state-description" data-v-98954de9> Try changing search parameters or choose another category </p>',3)),a("button",{onClick:e[10]||(e[10]=(...l)=>i.clearFilters&&i.clearFilters(...l)),class:"button-reset-filters"}," Reset filters ")]))])]),xe(ma,{name:"modal",appear:""},{default:Jt(()=>[n.isModalOpen&&n.selectedCourse?(v(),S("div",{key:0,class:"modal-overlay",onClick:e[14]||(e[14]=(...l)=>i.closeModal&&i.closeModal(...l))},[a("div",{class:"modal-container",onClick:e[13]||(e[13]=vt(()=>{},["stop"]))},[n.modalLoading?(v(),S("div",Wte,e[29]||(e[29]=[a("div",{class:"spinner"},null,-1),a("p",null,"Loading course info...",-1)]))):n.selectedCourse?(v(),S("div",zte,[a("button",{class:"modal-close",onClick:e[11]||(e[11]=(...l)=>i.closeModal&&i.closeModal(...l)),"aria-label":"Close"},e[30]||(e[30]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M18 6 6 18"}),a("path",{d:"m6 6 12 12"})],-1)])),a("div",Gte,[a("div",{class:"modal-image",style:rt(i.getCourseImageStyle(n.selectedCourse))},[a("div",{class:"modal-image-background-icon",innerHTML:i.getCategoryIcon(n.selectedCourse.category)},null,8,Kte),n.selectedCourse.imageLoaded?G("",!0):(v(),S("div",Yte,e[31]||(e[31]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"placeholder-icon"},[a("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a("circle",{cx:"9",cy:"9",r:"2"}),a("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})],-1)])))],4),a("div",Qte,[n.selectedCourse.isPremium?(v(),S("div",Xte,e[32]||(e[32]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"m14 6 4 10L2 10"}),a("path",{d:"M5 14 2 12l10-2L9.5 2l.5 6"})],-1),se(" Premium ")]))):(v(),S("div",Jte,e[33]||(e[33]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1),se(" Free ")])))]),a("div",Zte,[a("div",ese,[e[34]||(e[34]=a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),se(" "+m(n.selectedCourse.duration||"30 "),1)]),e[35]||(e[35]=a("div",{class:"modal-provider"},[a("span",null,""),a("span",null,"Aced")],-1))])]),a("div",tse,[a("div",sse,[a("div",rse,[a("span",nse,m(n.selectedCourse.category||""),1),a("span",ise,m(n.selectedCourse.level||""),1)]),a("h2",ose,m(n.selectedCourse.title||" "),1),a("p",ase,m(n.selectedCourse.fullDescription||n.selectedCourse.description||"   "),1)]),e[42]||(e[42]=a("div",{class:"modal-divider"},null,-1)),a("div",lse,[a("div",cse,[a("div",use,[e[37]||(e[37]=a("h3",{class:"modal-section-title"},[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})]),se("   : ")],-1)),a("ul",dse,[(v(!0),S(he,null,be(i.getSkillsList(n.selectedCourse),(l,c)=>(v(),S("li",{key:`skill-${c}`,class:"modal-skill-item"},[e[36]||(e[36]=a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"skill-check-icon"},[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-8.08"}),a("path",{d:"M22 4L12 14.01l-3-3"})],-1)),se(" "+m(l),1)]))),128))])]),a("div",hse,[e[38]||(e[38]=a("h3",{class:"modal-section-title"},[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a("polyline",{points:"14 2 14 8 20 8"})]),se("  : ")],-1)),a("ul",fse,[(v(!0),S(he,null,be(i.getModulesList(n.selectedCourse),(l,c)=>(v(),S("li",{key:`module-${c}`,class:"modal-module-item"},[a("span",pse,m(c+1)+".",1),a("span",mse,m(l),1)]))),128))])])])]),a("div",gse,[a("button",{class:ge(["modal-action-button",{premium:n.selectedCourse.isPremium&&!i.isPremiumUser,accessible:!n.selectedCourse.isPremium||i.isPremiumUser}]),onClick:e[12]||(e[12]=l=>i.startCourse(n.selectedCourse)),disabled:n.selectedCourse.isPremium&&!i.isPremiumUser},[n.selectedCourse.isPremium&&!i.isPremiumUser?(v(),S("svg",vse,e[39]||(e[39]=[a("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"},null,-1),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)]))):(v(),S("svg",_se,e[40]||(e[40]=[a("polygon",{points:"5 3 19 12 5 21 5 3"},null,-1)]))),n.selectedCourse.isPremium&&!i.isPremiumUser?(v(),S("span",bse,"   "+m(i.currentUserStatus==="free"?"Start/Pro":"Pro"),1)):(v(),S("span",wse," "))],10,yse),e[41]||(e[41]=a("p",{class:"modal-action-description"},"         ",-1))])])])):G("",!0)])])):G("",!0)]),_:1})]))}const Ese=Je(fte,[["render",Sse],["__scopeId","data-v-98954de9"]]);function Sf(){const t=Po(),e={1:"A1",2:"A1",3:"A1",4:"A2",5:"A2",6:"A2",7:"B1",8:"B1",9:"B1",10:"B2",11:"B2",12:"B2",13:"C1",14:"C1",15:"C1",16:"C2",17:"C2",18:"C2",19:"Expert",20:"Master"},s={A1:"Beginner - Basic phrases and simple interactions",A2:"Elementary - Can describe familiar situations",B1:"Intermediate - Can handle most daily situations",B2:"Upper Intermediate - Can interact with native speakers",C1:"Advanced - Fluent and spontaneous communication",C2:"Proficient - Near-native mastery",Expert:"Expert - Professional level expertise",Master:"Master - Complete mastery of the subject"},r=oe(()=>t.getters["platformMode/learningMode"]),n=oe(()=>t.getters["platformMode/isSchoolMode"]),i=oe(()=>t.getters["platformMode/isStudyCentreMode"]),o=oe(()=>t.getters["platformMode/hasSelectedMode"]),l=oe(()=>t.getters["platformMode/currentGrade"]),c=oe(()=>t.getters["platformMode/currentLevelCap"]),u=oe(()=>t.getters["platformMode/accessibleLevels"]),d=oe(()=>t.getters["platformMode/placementTestTaken"]),f=oe(()=>t.getters["platformMode/levelProgress"]),p=Z=>t.getters["platformMode/canAccessLevel"](Z),g=Z=>t.getters["platformMode/isLevelCompleted"](Z),b=Z=>i.value?!1:!p(Z),k=Z=>e[Z]||"Unknown",L=Z=>s[Z]||"Unknown level",V=Z=>Object.entries(e).filter(([ue,$e])=>$e===Z).map(([ue,$e])=>parseInt(ue)),R=(Z,ue=0,$e=1)=>$e===0?0:Math.round(ue/$e*100),E=()=>i.value?null:c.value+1,N=()=>n.value&&!d.value,D=Z=>i.value?"":d.value?Z>c.value?`Complete Level ${Z-1} to unlock this level`:"This level is currently locked":"Complete the placement test to unlock levels",U=Z=>({A1:"#10b981",A2:"#3b82f6",B1:"#8b5cf6",B2:"#a855f7",C1:"#ec4899",C2:"#f43f5e",Expert:"#f59e0b",Master:"#eab308"})[Z]||"#6b7280",C=(Z,ue)=>Z<ue?-1:Z>ue?1:0,w=()=>{const Z=l.value;return!Z||["A1","A2"].includes(Z)?"beginner":["B1","B2"].includes(Z)?"intermediate":"advanced"},_=(Z,ue=!0)=>{if(!ue)return`Level ${Z}`;const $e=k(Z);return`Level ${Z} (${$e})`},x=()=>l.value?V(l.value):[],P=Z=>k(Z)===l.value,O=()=>{const Z=x(),ue=Z.filter(Oe=>g(Oe)).length,$e=Z.length,_e=$e>0?Math.round(ue/$e*100):0;return{completed:ue,total:$e,percentage:_e}};return{learningMode:r,isSchoolMode:n,isStudyCentreMode:i,hasSelectedMode:o,currentGrade:l,currentLevelCap:c,accessibleLevels:u,placementTestTaken:d,levelProgress:f,canAccessLevel:p,isLevelCompleted:g,isLevelLocked:b,shouldTakePlacementTest:N,getLockReason:D,getLevelGrade:k,getGradeDescription:L,getLevelsForGrade:V,getAllGrades:()=>["A1","A2","B1","B2","C1","C2","Expert","Master"],getMinLevelForGrade:Z=>{const ue=V(Z);return ue.length>0?Math.min(...ue):1},getMaxLevelForGrade:Z=>{const ue=V(Z);return ue.length>0?Math.max(...ue):1},calculateLevelProgress:R,getNextUnlockableLevel:E,getCurrentGradeProgress:O,canProgressToNextGrade:()=>{const{completed:Z,total:ue}=O();return Z===ue},getGradeBadgeColor:U,compareLevels:C,getRecommendedDifficulty:w,formatLevel:_,getCurrentGradeLevels:x,isInCurrentGrade:P,LEVEL_GRADE_MAPPING:e,GRADE_DESCRIPTIONS:s}}function Tse(){const{isSchoolMode:t}=Sf(),e=Se({}),s=Se([]),r=Se(!1),n=Se(null),i=async(f={})=>{r.value=!0,n.value=null;try{if(t.value){const p=await fv();if(p.success)e.value=p.data;else throw new Error(p.error||"Failed to load content")}else{const p=await pv(f);if(p.success)s.value=p.courses;else throw new Error(p.error||"Failed to load courses")}}catch(p){n.value=p.message}finally{r.value=!1}},o=oe(()=>t.value?Object.keys(e.value).sort():[]),l=f=>!t.value||!e.value[f]?[]:Object.keys(e.value[f]).map(Number).sort((p,g)=>p-g),c=(f,p)=>{var g;return!t.value||!((g=e.value[f])!=null&&g[p])?[]:e.value[f][p]},u=oe(()=>{if(t.value){let f=0;for(const p in e.value)for(const g in e.value[p])f+=e.value[p][g].length;return f}else return s.value.length});return{groupedContent:e,courseCards:s,loading:r,error:n,subjects:o,totalTopicsCount:u,fetchContent:i,getLevelsForSubject:l,getTopicsForLevel:c,getTopicsCountForSubject:f=>{if(!t.value||!e.value[f])return 0;let p=0;for(const g in e.value[f])p+=e.value[f][g].length;return p}}}const kse={name:"PaymentModal",props:{userId:{type:String,required:!0},visible:{type:Boolean,default:!1},requestedTopicId:{type:String,default:""},defaultPlan:{type:String,default:"start",validator:t=>["start","pro"].includes(t)}},emits:["close","unlocked","payment-initiated"],data(){return{selectedPlan:this.defaultPlan,promoCodeInput:"",loading:!1,error:"",success:""}},watch:{visible(t){t&&(this.resetForm(),this.$nextTick(()=>{var e;(e=this.$el)==null||e.focus()}))},selectedPlan(){this.clearMessages()},promoCodeInput(){this.clearMessages()}},methods:{closeModal(){this.loading||this.$emit("close")},resetForm(){this.selectedPlan=this.defaultPlan,this.promoCodeInput="",this.clearMessages()},clearMessages(){this.error="",this.success=""},getPlanLabel(t){return{start:"Start (260,000 )",pro:"Pro (450,000 )"}[t]||t},async applyPromoCode(){if(!this.selectedPlan){this.error=",  ";return}if(!this.promoCodeInput.trim()){this.error=" ";return}this.loading=!0,this.clearMessages();try{const t=await $A(this.userId,this.selectedPlan,this.promoCodeInput.trim());t.success?(this.success=t.message,this.$emit("unlocked",{plan:this.selectedPlan,method:"promo",promoCode:this.promoCodeInput.trim()}),setTimeout(()=>{this.requestedTopicId&&this.$router.push({name:"TopicOverview",params:{id:this.requestedTopicId}}),this.closeModal()},2e3)):this.error=t.error}catch{this.error="    "}finally{this.loading=!1}},async proceedToPayment(){if(!this.selectedPlan){this.error=",  ";return}this.loading=!0,this.clearMessages();try{this.$emit("payment-initiated",{plan:this.selectedPlan,userId:this.userId,requestedTopicId:this.requestedTopicId}),await this.$router.push({name:"PaymePayment",params:{plan:this.selectedPlan},query:{userId:this.userId,...this.requestedTopicId&&{returnTo:this.requestedTopicId}}}),this.closeModal()}catch{this.error="    "}finally{this.loading=!1}},handleKeydown(t){t.key==="Escape"&&this.closeModal()}},mounted(){document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown)}},Ise={class:"modal-content"},Cse=["disabled"],Ase={class:"plan-selection"},Pse={class:"plans-grid"},xse={class:"promo-section"},Lse={class:"promo-input-group"},Rse=["disabled"],Nse=["disabled"],Ose={key:0},Mse={key:1},Dse={class:"modal-actions"},$se=["disabled"],Use={key:0},Fse={key:1},Vse={key:0,class:"message error-message"},Bse={key:1,class:"message success-message"},qse={key:2,class:"loading-overlay"};function jse(t,e,s,r,n,i){return s.visible?(v(),S("div",{key:0,class:"modal-overlay",onClick:e[7]||(e[7]=vt((...o)=>i.closeModal&&i.closeModal(...o),["self"]))},[a("div",Ise,[a("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>i.closeModal&&i.closeModal(...o)),"aria-label":"",disabled:n.loading},e[8]||(e[8]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]),8,Cse),e[17]||(e[17]=a("div",{class:"modal-header"},[a("h3",null,"   -"),a("p",{class:"modal-subtitle"},"   ")],-1)),a("div",Ase,[e[11]||(e[11]=a("h4",null," :",-1)),a("div",Pse,[a("div",{class:ge(["plan-card",{active:n.selectedPlan==="start"}]),onClick:e[1]||(e[1]=o=>n.selectedPlan="start")},e[9]||(e[9]=[a("div",{class:"plan-header"},[a("h5",null,"Start"),a("div",{class:"plan-price"},"260,000 ")],-1),a("ul",{class:"plan-features"},[a("li",null,"  "),a("li",null,"  "),a("li",null,"  ")],-1)]),2),a("div",{class:ge(["plan-card recommended",{active:n.selectedPlan==="pro"}]),onClick:e[2]||(e[2]=o=>n.selectedPlan="pro")},e[10]||(e[10]=[a("div",{class:"plan-badge"},"",-1),a("div",{class:"plan-header"},[a("h5",null,"Pro"),a("div",{class:"plan-price"},"450,000 ")],-1),a("ul",{class:"plan-features"},[a("li",null,"   Start"),a("li",null,"  "),a("li",null,"  "),a("li",null,"  ")],-1)]),2)])]),a("div",xse,[e[13]||(e[13]=a("h4",null,"  :",-1)),a("div",Lse,[Pe(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.promoCodeInput=o),placeholder:" ",class:"promo-input",disabled:n.loading,onKeyup:e[4]||(e[4]=ya((...o)=>i.applyPromoCode&&i.applyPromoCode(...o),["enter"]))},null,40,Rse),[[Ke,n.promoCodeInput]]),a("button",{class:"promo-btn",onClick:e[5]||(e[5]=(...o)=>i.applyPromoCode&&i.applyPromoCode(...o)),disabled:n.loading||!n.selectedPlan||!n.promoCodeInput.trim()},[n.loading?(v(),S("span",Ose,"")):(v(),S("span",Mse,"")),e[12]||(e[12]=se("  "))],8,Nse)])]),a("div",Dse,[a("button",{class:"payment-btn",onClick:e[6]||(e[6]=(...o)=>i.proceedToPayment&&i.proceedToPayment(...o)),disabled:n.loading||!n.selectedPlan},[n.loading?(v(),S("span",Use," ...")):(v(),S("span",Fse,"  "+m(i.getPlanLabel(n.selectedPlan)),1))],8,$se)]),n.error?(v(),S("div",Vse,[e[14]||(e[14]=a("span",{class:"message-icon"},"",-1)),se(" "+m(n.error),1)])):G("",!0),n.success?(v(),S("div",Bse,[e[15]||(e[15]=a("span",{class:"message-icon"},"",-1)),se(" "+m(n.success),1)])):G("",!0),n.loading?(v(),S("div",qse,e[16]||(e[16]=[a("div",{class:"spinner"},null,-1),a("p",null,"...",-1)]))):G("",!0)])])):G("",!0)}const NP=Je(kse,[["render",jse],["__scopeId","data-v-8bba2791"]]),Hse={name:"CataloguePage",components:{PaymentModal:NP},mixins:[wf],setup(){const{isSchoolMode:t,isStudyCentreMode:e,canAccessLevel:s,currentLevelCap:r,placementTestTaken:n}=Sf(),{groupedContent:i,courseCards:o,loading:l,error:c,subjects:u,fetchContent:d,getLevelsForSubject:f,getTopicsForLevel:p,totalTopicsCount:g}=Tse();return{isSchoolMode:t,isStudyCentreMode:e,canAccessLevel:s,currentLevelCap:r,placementTestTaken:n,groupedContent:i,courseCards:o,modeLoading:l,modeError:c,subjects:u,fetchContent:d,getLevelsForSubject:f,getTopicsForLevel:p,totalTopicsCount:g}},data(){return{userId:null,lessons:[],userProgress:{},studyPlanTopics:[],isLoading:!0,courses:[],searchQuery:"",selectedSubjectFilter:null,selectedLevelFilter:null,typeFilter:"all",progressFilter:"all",currentPage:1,coursesPerPage:12,randomSeed:Math.random(),showAddModal:!1,showSuccessModal:!1,showPaywall:!1,selectedCourse:null,requestedTopicId:null}},computed:{...tn("user",{vuexUserStatus:"userStatus"}),userStatus(){return this.vuexUserStatus||localStorage.getItem("userStatus")||"free"},availableSubjects(){return[...new Set(this.courses.map(t=>t.subject))].sort()},availableLevels(){return[...new Set(this.courses.map(t=>t.level))].sort((t,e)=>Number(t)-Number(e))},coursesBySubject(){if(!this.isSchoolMode)return{};const t={};return this.filteredCourses.forEach(e=>{const s=e.subject||"Uncategorized";t[s]||(t[s]=[]),t[s].push(e)}),Object.keys(t).forEach(e=>t[e].sort((s,r)=>Number(s.level)-Number(r.level))),t},filteredCourses(){let t=this.courses;return this.isSchoolMode&&(t=t.filter(e=>this.canAccessLevel(Number(e.level||1)))),t.filter(e=>!(this.searchQuery&&!e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||this.selectedSubjectFilter&&e.subject!==this.selectedSubjectFilter||this.selectedLevelFilter&&e.level!==this.selectedLevelFilter||this.typeFilter==="free"&&e.type!=="free"||this.typeFilter==="premium"&&e.type==="free"))},totalPages(){return Math.max(1,Math.ceil(this.filteredCourses.length/this.coursesPerPage))},paginatedCourses(){return[...this.filteredCourses].sort((e,s)=>this.hashString(e.topicId+this.randomSeed)-this.hashString(s.topicId+this.randomSeed)).slice((this.currentPage-1)*this.coursesPerPage,this.currentPage*this.coursesPerPage)},hasActiveFilters(){return!!(this.searchQuery||this.selectedSubjectFilter||this.selectedLevelFilter||this.typeFilter!=="all")}},async mounted(){var t,e;if(this.userId=((e=(t=this.$store)==null?void 0:t.state)==null?void 0:e.firebaseUserId)||localStorage.getItem("firebaseUserId"),!this.userId){this.$router.push("/");return}await this.loadData()},methods:{async loadData(){this.isLoading=!0;try{const[t,e]=await Promise.all([gv(this.userId),yv(this.userId)]);t!=null&&t.success&&(this.userProgress=this.processProgressData(t.data)),e!=null&&e.success&&(this.studyPlanTopics=e.data.map(r=>this.extractTopicId(r.topicId)).filter(Boolean));try{if(this.isSchoolMode){const r=await fv();if(r.success&&r.data){this.processModeContent(r.data,"school");return}}else{const r=await pv();if(r.success&&r.courses){this.processModeContent(r.courses,"study-centre");return}}}catch{}const s=await mv();this.lessons=(s==null?void 0:s.data)||[],this.processAllCourses()}catch{}finally{this.isLoading=!1}},processProgressData(t){const e={},s={};this.lessons.forEach(n=>{const i=this.extractTopicId(n.topicId);i&&(s[i]||(s[i]=new Set),s[i].add(this.extractTopicId(n._id)))}),t.forEach(n=>{const i=this.extractTopicId(n.topicId);i&&n.completed&&(e[i]||(e[i]=0),e[i]++)});const r={};for(const n in s)r[n]=s[n].size>0?Math.round((e[n]||0)/s[n].size*100):0;return r},processAllCourses(){const t=new Map;this.lessons.forEach(e=>{const s=this.extractTopicId(e.topicId);if(!s)return;t.has(s)||t.set(s,{topicId:s,name:this.getTopicName(e),level:String(e.level||"1"),subject:String(e.subject||"Uncategorized"),lessonCount:0,totalTime:0,type:"free"});const r=t.get(s);r.lessonCount++,r.totalTime+=e.estimatedTime||e.duration||10,["premium","start","pro"].includes(e.type)&&(r.type="premium")}),this.courses=Array.from(t.values()).map(e=>({...e,progress:this.userProgress[e.topicId]||0,inStudyPlan:this.studyPlanTopics.includes(e.topicId)}))},processModeContent(t,e){if(e==="school"){const s=[];for(const r in t)for(const n in t[r])t[r][n].forEach(i=>s.push({topicId:i._id||i.id,name:i.name||i.topicName||i.title||"Course",level:String(n),subject:r,lessonCount:i.lessonCount||0,totalTime:i.totalTime||10,type:i.type||"free",progress:this.userProgress[i._id||i.id]||0,inStudyPlan:this.studyPlanTopics.includes(i._id||i.id)}));this.courses=s}else this.courses=t.map(s=>({topicId:s._id||s.id||s.topicId,name:s.name||s.topicName||s.title||"Course",level:String(s.level||1),subject:s.subject||"Uncategorized",lessonCount:s.lessonCount||0,totalTime:s.totalTime||10,type:s.type||"free",progress:this.userProgress[s._id||s.id||s.topicId]||0,inStudyPlan:this.studyPlanTopics.includes(s._id||s.id||s.topicId)}))},clearFilters(){this.searchQuery="",this.selectedSubjectFilter=null,this.selectedLevelFilter=null,this.typeFilter="all",this.currentPage=1},shuffleCourses(){this.randomSeed=Math.random(),this.currentPage=1},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,window.scrollTo({top:0,behavior:"smooth"}))},prevPage(){this.currentPage>1&&(this.currentPage--,window.scrollTo({top:0,behavior:"smooth"}))},handleCourseAccess(t,e){if(!this.hasTopicAccess(e)){this.requestedTopicId=t,this.showPaywall=!0;return}this.$router.push(`/topic/${t}/overview`)},addToStudyPlan(t){t.inStudyPlan||(this.selectedCourse=t,this.showAddModal=!0)},async confirmAddToStudyPlan(){if(!(!this.selectedCourse||!this.userId))try{let t=this.selectedCourse.topicId||this.selectedCourse._id||this.selectedCourse.id;t&&typeof t=="object"&&(t=t._id||t.id);const e=await EP(this.userId,{topicId:t,topic:this.selectedCourse.name,subject:this.selectedCourse.subject||"General",level:parseInt(this.selectedCourse.level)||1,lessonCount:this.selectedCourse.lessonCount||0,totalTime:this.selectedCourse.totalTime||10,type:this.selectedCourse.type||"free"});if(e!=null&&e.success){this.selectedCourse.inStudyPlan=!0,this.studyPlanTopics.push(this.selectedCourse.topicId);const s=this.courses.findIndex(r=>r.topicId===this.selectedCourse.topicId);s!==-1&&(this.courses[s].inStudyPlan=!0),window.eventBus&&window.eventBus.emit("studyListUpdated"),this.showAddModal=!1,this.showSuccessModal=!0}}catch(t){alert(t.message),this.showAddModal=!1}},handlePaymentSuccess(){this.showPaywall=!1,this.$forceUpdate()},hashString(t){let e=0;for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e=e&e;return Math.abs(e)},extractTopicId(t){return t?typeof t=="string"?t:typeof t=="object"&&t._id?t._id:String(t):null},getTopicName(t){var s,r;if(t!=null&&t.topic&&typeof t.topic=="string"&&t.topic.trim())return t.topic.trim();if(t!=null&&t.topicName&&typeof t.topicName=="string")return t.topicName.trim();const e=localStorage.getItem("lang")||"en";return(r=(s=t==null?void 0:t.translations)==null?void 0:s[e])!=null&&r.topic?t.translations[e].topic.trim():t!=null&&t.lessonName?`Topic: ${t.lessonName.trim()}`:"Untitled"},getLevelDescription(t){const e={1:"catalogue.beginner",2:"catalogue.elementary",3:"catalogue.intermediate",4:"catalogue.intermediate",5:"catalogue.upperIntermediate",6:"catalogue.advanced"};return e[parseInt(t)]?this.$t(e[parseInt(t)]):`${this.$t("dashboard.level")} ${t}`},getProgressColor(t){return t>=80?"bg-green-500":t>=40?"bg-indigo-500":t>0?"bg-amber-500":"bg-gray-200"},getButtonText(t){return t===100?this.$t("catalogue.review"):t>0?this.$t("catalogue.continueBtn"):this.$t("catalogue.start")},hasTopicAccess(t){return t==="free"||this.userStatus==="pro"||this.userStatus==="start"},getSubjectEmoji(t){return{Mathematics:"",Math:"",English:"",Science:"",Physics:"",Chemistry:"",Biology:"",History:"",Geography:"","Computer Science":"",Programming:"",Art:"",Music:"",Languages:""}[t]||""}}},Wse={class:"min-h-screen bg-white"},zse={class:"max-w-6xl mx-auto px-6 pt-8 pb-6"},Gse={class:"flex items-center justify-between"},Kse={class:"flex items-center gap-4"},Yse={class:"text-2xl font-bold text-slate-800"},Qse={class:"text-slate-500 text-sm"},Xse={class:"hidden md:flex items-center gap-3"},Jse={class:"px-4 py-2 rounded-full bg-purple-50 text-purple-600 text-sm font-medium"},Zse={class:"max-w-6xl mx-auto px-6 pb-6"},ere={class:"flex flex-wrap items-center gap-3"},tre={class:"relative flex-1 min-w-64"},sre=["placeholder"],rre={value:null},nre=["value"],ire={value:null},ore=["value"],are={value:"all"},lre={value:"free"},cre={value:"premium"},ure={key:0,class:"flex flex-col items-center justify-center py-24"},dre={class:"mt-4 text-slate-500 text-sm"},hre={key:1,class:"max-w-6xl mx-auto px-6 pb-12"},fre={key:0,class:"text-center py-24"},pre={class:"text-lg font-semibold text-slate-800 mb-2"},mre={class:"text-slate-500 text-sm"},gre={key:1,class:"space-y-10"},yre={class:"flex items-center gap-3 mb-4"},vre={class:"text-2xl"},_re={class:"text-xl font-bold text-slate-800"},bre={class:"px-2 py-0.5 rounded-full bg-gray-100 text-gray-500 text-xs font-medium"},wre={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Sre=["onClick"],Ere={class:"flex items-center justify-between mb-3"},Tre={class:"px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-xs font-medium"},kre={class:"flex items-center gap-2"},Ire=["onClick","disabled"],Cre=["fill"],Are={class:"font-semibold text-slate-800 mb-3 line-clamp-2 group-hover:text-indigo-600 transition-colors"},Pre={class:"flex items-center gap-4 text-xs text-slate-500 mb-4"},xre={class:"flex items-center gap-1"},Lre={class:"flex items-center gap-1"},Rre={class:"mb-3"},Nre={class:"flex justify-between text-xs mb-1"},Ore={class:"text-slate-400"},Mre={class:"font-medium text-slate-600"},Dre={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},$re={class:"pt-3 border-t border-gray-50 flex justify-end"},Ure={class:"text-sm font-medium text-indigo-500 group-hover:text-indigo-600 flex items-center gap-1"},Fre={key:2},Vre={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8"},Bre=["onClick"],qre={class:"flex items-center justify-between mb-3"},jre={class:"flex items-center gap-2"},Hre={class:"text-lg"},Wre={class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},zre={class:"flex items-center gap-2"},Gre=["onClick","disabled"],Kre=["fill"],Yre={class:"font-semibold text-slate-800 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors"},Qre={class:"text-xs text-slate-500 mb-3"},Xre={class:"flex items-center gap-4 text-xs text-slate-500 mb-4"},Jre={class:"flex items-center gap-1"},Zre={class:"flex items-center gap-1"},ene={class:"mb-3"},tne={class:"flex justify-between text-xs mb-1"},sne={class:"text-slate-400"},rne={class:"font-medium text-slate-600"},nne={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},ine={class:"pt-3 border-t border-gray-50 flex justify-end"},one={class:"text-sm font-medium text-indigo-500 group-hover:text-indigo-600 flex items-center gap-1"},ane={key:0,class:"flex items-center justify-center gap-4"},lne=["disabled"],cne={class:"text-sm text-slate-600"},une={class:"font-bold text-indigo-500"},dne=["disabled"],hne={class:"text-center mb-4"},fne={class:"text-lg font-bold text-slate-800"},pne={key:0,class:"text-slate-500 text-sm text-center mb-6"},mne={class:"text-slate-800"},gne={class:"flex gap-3"},yne={class:"text-lg font-bold text-slate-800 mb-2"},vne={key:0,class:"text-slate-500 text-sm mb-6"};function _ne(t,e,s,r,n,i){const o=Ht("PaymentModal");return v(),S("div",Wse,[a("div",zse,[a("div",Gse,[a("div",Kse,[e[16]||(e[16]=a("div",{class:"w-12 h-12 rounded-2xl bg-indigo-50 flex items-center justify-center"},[a("span",{class:"text-2xl"},"")],-1)),a("div",null,[a("h1",Yse,m(t.$t("catalogue.title")),1),a("p",Qse,m(i.filteredCourses.length)+" "+m(t.$t("catalogue.courses")),1)])]),a("div",Xse,[a("div",Jse,"  "+m(n.studyPlanTopics.length)+" "+m(t.$t("catalogue.inPlan")),1),a("div",{class:ge(["px-4 py-2 rounded-full text-sm font-bold",{"bg-gray-100 text-gray-600":i.userStatus==="free","bg-amber-100 text-amber-700":i.userStatus==="start"||i.userStatus==="pro"}])},m(i.userStatus==="pro"?" Pro":i.userStatus==="start"?" Start":" Free"),3)])])]),a("div",Zse,[a("div",ere,[a("div",tre,[Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.searchQuery=l),type:"text",class:"w-full px-4 py-2.5 pl-10 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 transition-all",placeholder:t.$t("catalogue.findCourse")},null,8,sre),[[Ke,n.searchQuery]]),e[17]||(e[17]=a("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1))]),Pe(a("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>n.selectedSubjectFilter=l),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",rre,m(t.$t("catalogue.allSubjects")),1),(v(!0),S(he,null,be(i.availableSubjects,l=>(v(),S("option",{key:l,value:l},m(l),9,nre))),128))],512),[[Js,n.selectedSubjectFilter]]),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.selectedLevelFilter=l),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",ire,m(t.$t("catalogue.allLevels")),1),(v(!0),S(he,null,be(i.availableLevels,l=>(v(),S("option",{key:l,value:l},m(t.$t("dashboard.level"))+" "+m(l),9,ore))),128))],512),[[Js,n.selectedLevelFilter]]),Pe(a("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>n.typeFilter=l),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[a("option",are,m(t.$t("catalogue.allTypes")),1),a("option",lre,m(t.$t("catalogue.free")),1),a("option",cre,m(t.$t("catalogue.premium")),1)],512),[[Js,n.typeFilter]]),i.hasActiveFilters?(v(),S("button",{key:0,onClick:e[4]||(e[4]=(...l)=>i.clearFilters&&i.clearFilters(...l)),class:"px-4 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 transition-all"},m(t.$t("catalogue.clear")),1)):G("",!0),a("button",{onClick:e[5]||(e[5]=(...l)=>i.shuffleCourses&&i.shuffleCourses(...l)),class:"p-2.5 rounded-xl border border-gray-200 text-slate-500 hover:border-gray-300 hover:text-slate-700 transition-all",title:"Shuffle"},e[18]||(e[18]=[at('<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-da7eed04><polyline points="16 3 21 3 21 8" data-v-da7eed04></polyline><line x1="4" y1="20" x2="21" y2="3" data-v-da7eed04></line><polyline points="21 16 21 21 16 21" data-v-da7eed04></polyline><line x1="15" y1="15" x2="21" y2="21" data-v-da7eed04></line><line x1="4" y1="4" x2="9" y2="9" data-v-da7eed04></line></svg>',1)]))])]),n.isLoading?(v(),S("div",ure,[e[19]||(e[19]=a("div",{class:"w-8 h-8 border-2 border-indigo-200 border-t-indigo-500 rounded-full animate-spin"},null,-1)),a("p",dre,m(t.$t("catalogue.loadingCourses")),1)])):(v(),S("main",hre,[i.filteredCourses.length?r.isSchoolMode?(v(),S("div",gre,[(v(!0),S(he,null,be(i.coursesBySubject,(l,c)=>(v(),S("section",{key:c},[a("div",yre,[a("span",vre,m(i.getSubjectEmoji(c)),1),a("h2",_re,m(c),1),a("span",bre,m(l.length),1)]),a("div",wre,[(v(!0),S(he,null,be(l,u=>(v(),S("article",{key:u.topicId,onClick:d=>i.handleCourseAccess(u.topicId,u.type),class:"group p-5 rounded-2xl border border-gray-100 hover:border-indigo-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white"},[a("div",Ere,[a("span",Tre,m(t.$t("catalogue.lvl"))+" "+m(u.level),1),a("div",kre,[a("span",{class:ge(["px-2 py-1 rounded-lg text-xs font-bold",u.type==="free"?"bg-gray-100 text-gray-500":"bg-amber-100 text-amber-700"])},m(u.type==="free"?"FREE":"PRO"),3),a("button",{onClick:vt(d=>i.addToStudyPlan(u),["stop"]),disabled:u.inStudyPlan,class:ge(["p-1.5 rounded-lg transition-all",u.inStudyPlan?"bg-indigo-100 text-indigo-500":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"])},[(v(),S("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:u.inStudyPlan?"currentColor":"none",stroke:"currentColor","stroke-width":"2"},e[21]||(e[21]=[a("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},null,-1)]),8,Cre))],10,Ire)])]),a("h3",Are,m(u.name),1),a("div",Pre,[a("span",xre,[e[22]||(e[22]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"})],-1)),se(" "+m(u.lessonCount)+" "+m(t.$t("catalogue.lessons")),1)]),a("span",Lre,[e[23]||(e[23]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),se(" "+m(u.totalTime)+"m ",1)])]),a("div",Rre,[a("div",Nre,[a("span",Ore,m(t.$t("catalogue.progress")),1),a("span",Mre,m(u.progress)+"%",1)]),a("div",Dre,[a("div",{class:ge(["h-full rounded-full transition-all duration-500",i.getProgressColor(u.progress)]),style:rt({width:u.progress+"%"})},null,6)])]),a("div",$re,[a("span",Ure,[se(m(i.getButtonText(u.progress))+" ",1),e[24]||(e[24]=a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])],8,Sre))),128))])]))),128))])):(v(),S("div",Fre,[a("div",Vre,[(v(!0),S(he,null,be(i.paginatedCourses,l=>(v(),S("article",{key:l.topicId,onClick:c=>i.handleCourseAccess(l.topicId,l.type),class:"group p-5 rounded-2xl border border-gray-100 hover:border-indigo-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white"},[a("div",qre,[a("div",jre,[a("span",Hre,m(i.getSubjectEmoji(l.subject)),1),a("span",Wre,m(l.subject),1)]),a("div",zre,[a("span",{class:ge(["px-2 py-1 rounded-lg text-xs font-bold",l.type==="free"?"bg-gray-100 text-gray-500":"bg-amber-100 text-amber-700"])},m(l.type==="free"?"FREE":"PRO"),3),a("button",{onClick:vt(c=>i.addToStudyPlan(l),["stop"]),disabled:l.inStudyPlan,class:ge(["p-1.5 rounded-lg transition-all",l.inStudyPlan?"bg-indigo-100 text-indigo-500":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"])},[(v(),S("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:l.inStudyPlan?"currentColor":"none",stroke:"currentColor","stroke-width":"2"},e[25]||(e[25]=[a("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},null,-1)]),8,Kre))],10,Gre)])]),a("h3",Yre,m(l.name),1),a("div",Qre,m(t.$t("dashboard.level"))+" "+m(l.level)+"  "+m(i.getLevelDescription(l.level)),1),a("div",Xre,[a("span",Jre,[e[26]||(e[26]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"})],-1)),se(" "+m(l.lessonCount)+" "+m(t.$t("catalogue.lessons")),1)]),a("span",Zre,[e[27]||(e[27]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),se(" "+m(l.totalTime)+"m ",1)])]),a("div",ene,[a("div",tne,[a("span",sne,m(t.$t("catalogue.progress")),1),a("span",rne,m(l.progress)+"%",1)]),a("div",nne,[a("div",{class:ge(["h-full rounded-full transition-all duration-500",i.getProgressColor(l.progress)]),style:rt({width:l.progress+"%"})},null,6)])]),a("div",ine,[a("span",one,[se(m(i.getButtonText(l.progress))+" ",1),e[28]||(e[28]=a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])],8,Bre))),128))]),i.totalPages>1?(v(),S("div",ane,[a("button",{onClick:e[6]||(e[6]=(...l)=>i.prevPage&&i.prevPage(...l)),disabled:n.currentPage===1,class:"w-10 h-10 rounded-xl border border-gray-200 flex items-center justify-center text-slate-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed transition-all"},e[29]||(e[29]=[a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15 18 9 12 15 6"})],-1)]),8,lne),a("span",cne,[a("span",une,m(n.currentPage),1),se(" / "+m(i.totalPages),1)]),a("button",{onClick:e[7]||(e[7]=(...l)=>i.nextPage&&i.nextPage(...l)),disabled:n.currentPage===i.totalPages,class:"w-10 h-10 rounded-xl border border-gray-200 flex items-center justify-center text-slate-600 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed transition-all"},e[30]||(e[30]=[a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9 18 15 12 9 6"})],-1)]),8,dne)])):G("",!0)])):(v(),S("div",fre,[e[20]||(e[20]=a("div",{class:"text-6xl mb-4"},"",-1)),a("h3",pre,m(t.$t("catalogue.noCoursesFound")),1),a("p",mre,m(t.$t("catalogue.tryAdjustingFilters")),1)]))])),xe(ma,{name:"fade"},{default:Jt(()=>[n.showAddModal?(v(),S("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e[11]||(e[11]=l=>n.showAddModal=!1)},[a("div",{class:"bg-white rounded-2xl shadow-xl max-w-sm w-full p-6",onClick:e[10]||(e[10]=vt(()=>{},["stop"]))},[a("div",hne,[e[31]||(e[31]=a("div",{class:"text-4xl mb-3"},"",-1)),a("h3",fne,m(t.$t("catalogue.addToStudyPlan")),1)]),n.selectedCourse?(v(),S("p",pne,[a("strong",mne,m(n.selectedCourse.name),1)])):G("",!0),a("div",gne,[a("button",{onClick:e[8]||(e[8]=l=>n.showAddModal=!1),class:"flex-1 py-2.5 border border-gray-200 rounded-xl font-medium text-slate-600 hover:bg-gray-50 transition-all"},m(t.$t("catalogue.cancel")),1),a("button",{onClick:e[9]||(e[9]=(...l)=>i.confirmAddToStudyPlan&&i.confirmAddToStudyPlan(...l)),class:"flex-1 py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-all"},m(t.$t("catalogue.add")),1)])])])):G("",!0)]),_:1}),xe(ma,{name:"fade"},{default:Jt(()=>[n.showSuccessModal?(v(),S("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e[14]||(e[14]=l=>n.showSuccessModal=!1)},[a("div",{class:"bg-white rounded-2xl shadow-xl max-w-sm w-full p-6 text-center",onClick:e[13]||(e[13]=vt(()=>{},["stop"]))},[e[32]||(e[32]=a("div",{class:"text-5xl mb-3"},"",-1)),a("h3",yne,m(t.$t("catalogue.added")),1),n.selectedCourse?(v(),S("p",vne,m(n.selectedCourse.name),1)):G("",!0),a("button",{onClick:e[12]||(e[12]=l=>n.showSuccessModal=!1),class:"w-full py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-all"},m(t.$t("catalogue.great")),1)])])):G("",!0)]),_:1}),n.showPaywall?(v(),Yt(o,{key:2,"user-id":n.userId,visible:n.showPaywall,"requested-topic-id":n.requestedTopicId,onClose:e[15]||(e[15]=l=>n.showPaywall=!1),onUnlocked:i.handlePaymentSuccess},null,8,["user-id","visible","requested-topic-id","onUnlocked"])):G("",!0)])}const bne=Je(Hse,[["render",_ne],["__scopeId","data-v-da7eed04"]]),wne={name:"LevelIndicator",props:{isCompact:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!0}},emits:["selectMode"],setup(){const{isSchoolMode:t,isStudyCentreMode:e,currentGrade:s,currentLevelCap:r,levelProgress:n,getGradeBadgeColor:i}=Sf(),o=oe(()=>{const l=2*Math.PI*26,c=n.value||0;return l-c/100*l});return{isSchoolMode:t,isStudyCentreMode:e,currentGrade:s,currentLevelCap:r,levelProgress:n,getGradeBadgeColor:i,progressOffset:o}}},Sne={key:0,class:"school-badge"},Ene={class:"badge-content"},Tne={class:"badge-info"},kne={class:"badge-label"},Ine={class:"badge-value"},Cne={class:"badge-info grade"},Ane={class:"badge-label"},Pne={key:0,class:"progress-ring"},xne={width:"60",height:"60"},Lne=["stroke"],Rne={class:"progress-text"},Nne={key:1,class:"study-centre-badge"},One={class:"badge-content"},Mne={class:"badge-info"},Dne={class:"badge-label"},$ne={class:"select-mode-text"};function Une(t,e,s,r,n,i){return v(),S("div",{class:ge(["level-indicator",{compact:s.isCompact}])},[r.isSchoolMode?(v(),S("div",Sne,[a("div",Ene,[e[1]||(e[1]=a("span",{class:"mode-icon"},"",-1)),a("div",Tne,[a("span",kne,m(t.$t("dashboard.level")),1),a("span",Ine,m(r.currentLevelCap),1)]),a("div",Cne,[a("span",Ane,m(t.$t("dashboard.grade")),1),a("span",{class:"badge-value",style:rt({color:r.getGradeBadgeColor(r.currentGrade)})},m(r.currentGrade||t.$t("dashboard.notAvailable")),5)])]),s.showProgress?(v(),S("div",Pne,[(v(),S("svg",xne,[e[2]||(e[2]=a("circle",{class:"progress-ring-circle-bg",stroke:"#e5e7eb","stroke-width":"4",fill:"transparent",r:"26",cx:"30",cy:"30"},null,-1)),a("circle",{class:"progress-ring-circle",stroke:r.getGradeBadgeColor(r.currentGrade),"stroke-width":"4",fill:"transparent",r:"26",cx:"30",cy:"30",style:rt({strokeDashoffset:r.progressOffset})},null,12,Lne)])),a("span",Rne,m(r.levelProgress)+"%",1)])):G("",!0)])):r.isStudyCentreMode?(v(),S("div",Nne,[a("div",One,[e[4]||(e[4]=a("span",{class:"mode-icon"},"",-1)),a("div",Mne,[e[3]||(e[3]=a("span",{class:"badge-label"},"Study Centre",-1)),a("span",Dne,m(t.$t("dashboard.unlimitedAccess")),1)])])])):(v(),S("div",{key:2,class:"no-mode-badge",onClick:e[0]||(e[0]=o=>t.$emit("selectMode"))},[e[5]||(e[5]=a("span",{class:"mode-icon"},"",-1)),a("span",$ne,m(t.$t("dashboard.selectMode")),1)]))],2)}const Fne=Je(wne,[["render",Une],["__scopeId","data-v-cae7ff55"]]),Vne={name:"ModeChoice",setup(){const t=Po(),e=Se(null),s=Se(!1);return{selectedMode:e,isLoading:s,selectMode:i=>{e.value=i},confirmSelection:async()=>{if(!(!e.value||s.value))try{s.value=!0;const i=t.getters.getFirebaseUserId;try{await vf(i,e.value,"Initial selection")}catch{}await t.dispatch("platformMode/switchMode",{newMode:e.value,reason:"Initial selection"})}catch{}finally{s.value=!1}}}}},Bne={class:"mode-choice-card"},qne={class:"mode-options"},jne=["disabled"];function Hne(t,e,s,r,n,i){return v(),S("div",Bne,[e[5]||(e[5]=a("div",{class:"choice-header"},[a("h3",null,"Choose Your Learning Path"),a("p",null,"Select how you'd like to learn on ACED")],-1)),a("div",qne,[a("button",{class:ge(["mode-option",{selected:r.selectedMode==="school"}]),onClick:e[0]||(e[0]=o=>r.selectMode("school"))},e[3]||(e[3]=[a("div",{class:"mode-icon"},"",-1),a("div",{class:"mode-details"},[a("h4",null,"ACED School"),a("p",null,"Structured curriculum with level progression")],-1)]),2),a("button",{class:ge(["mode-option",{selected:r.selectedMode==="study_centre"}]),onClick:e[1]||(e[1]=o=>r.selectMode("study_centre"))},e[4]||(e[4]=[a("div",{class:"mode-icon"},"",-1),a("div",{class:"mode-details"},[a("h4",null,"ACED Study Centre"),a("p",null,"Free exploration, learn anything anytime")],-1)]),2)]),r.selectedMode?(v(),S("button",{key:0,class:"confirm-btn",onClick:e[2]||(e[2]=(...o)=>r.confirmSelection&&r.confirmSelection(...o)),disabled:r.isLoading},m(r.isLoading?"Setting up...":"Continue"),9,jne)):G("",!0)])}const Wne=Je(Vne,[["render",Hne],["__scopeId","data-v-544db231"]]),zne={name:"LevelPathway",props:{lessons:{type:Array,default:()=>[]},userProgress:{type:Array,default:()=>[]},currentLevelProp:{type:Number,default:1},currentXPProp:{type:Number,default:0},streakProp:{type:Number,default:0}},emits:["lesson-click","continue"],setup(t,{emit:e}){Po(),Mc();const s=Se(null),r=["#22c55e","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899"],n=oe(()=>t.currentLevelProp),i=oe(()=>t.currentXPProp),o=oe(()=>t.streakProp),l=oe(()=>n.value*100+200),c=oe(()=>Math.round(i.value/l.value*100)),u=oe(()=>{const P=Math.floor((n.value-1)/5);return r[P]||r[r.length-1]}),d=2*Math.PI*24,f=oe(()=>d-c.value/100*d),p=oe(()=>t.lessons.slice(0,10)),g=oe(()=>p.value.length*100),b=oe(()=>{const P=p.value.length;if(P<2)return"";let O="M 40 50";for(let M=1;M<P;M++){const ae=M*100+40,fe=50+(M%2===1?-10:10);O+=` Q ${(M-.5)*100+40} ${fe} ${ae} 50`}return O}),k=oe(()=>p.value.length*100),L=oe(()=>t.lessons.filter((P,O)=>E(O)).length),V=oe(()=>{const P=L.value/p.value.length;return k.value-P*k.value}),R=oe(()=>{const P=t.lessons.findIndex((O,M)=>!E(M));return P>=0?{...t.lessons[P],index:P}:null});function E(P){const O=t.lessons[P];return O?t.userProgress.some(M=>{var ae;return(((ae=M.lessonId)==null?void 0:ae._id)||M.lessonId)===O._id&&M.completed}):!1}function N(P){return P===0?!1:!E(P-1)}function D(P){return!E(P)&&(P===0||E(P-1))}function U(P){return E(P)?"completed":N(P)?"locked":D(P)?"current":"available"}function C(P){return{left:`${P*100+20}px`,top:`${30+(P%2===1?-8:8)}px`}}function w(P){return E(P)?{background:u.value,borderColor:u.value}:D(P)?{borderColor:u.value,boxShadow:`0 0 0 4px ${u.value}33`}:{}}function _(P,O){N(O)||e("lesson-click",{lesson:P,index:O})}function x(){R.value&&e("continue",R.value)}return{pathwayTrack:s,currentLevel:n,currentXP:i,streak:o,xpForNextLevel:l,progressPercent:c,currentLevelColor:u,circumference:d,progressOffset:f,displayedLessons:p,pathWidth:g,pathD:b,pathLength:k,pathProgressOffset:V,nextLesson:R,isLessonCompleted:E,isLessonLocked:N,getNodeStatus:U,getNodeStyle:C,getNodeCircleStyle:w,handleNodeClick:_,startNextLesson:x}}},Gne={class:"level-pathway-container"},Kne={class:"pathway-header"},Yne={class:"current-level-display"},Qne={class:"level-number"},Xne={class:"level-info"},Jne={class:"xp-info"},Zne={class:"xp-current"},eie={class:"xp-target"},tie={class:"xp-progress-ring"},sie={width:"56",height:"56",viewBox:"0 0 56 56"},rie=["stroke","stroke-dasharray","stroke-dashoffset"],nie={class:"progress-percent"},iie={class:"pathway-scroll-wrapper"},oie={class:"pathway-track",ref:"pathwayTrack"},aie=["width"],lie=["d"],cie=["d","stroke","stroke-dasharray","stroke-dashoffset"],uie={class:"nodes-container"},die=["onClick"],hie={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},fie={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pie={key:2,class:"node-number"},mie={class:"node-label"},gie={key:0,class:"star-badge"},yie={class:"pathway-footer"},vie={class:"streak-badge"},_ie={class:"streak-count"};function bie(t,e,s,r,n,i){return v(),S("div",Gne,[a("div",Kne,[a("div",Yne,[a("div",{class:"level-badge",style:rt({background:r.currentLevelColor})},[a("span",Qne,m(r.currentLevel),1)],4),a("div",Xne,[e[2]||(e[2]=a("span",{class:"level-label"},"Level",-1)),a("div",Jne,[a("span",Zne,m(r.currentXP),1),e[1]||(e[1]=a("span",{class:"xp-separator"},"/",-1)),a("span",eie,m(r.xpForNextLevel)+" XP",1)])])]),a("div",tie,[(v(),S("svg",sie,[e[3]||(e[3]=a("circle",{cx:"28",cy:"28",r:"24",fill:"none",stroke:"#e5e7eb","stroke-width":"5"},null,-1)),a("circle",{cx:"28",cy:"28",r:"24",fill:"none",stroke:r.currentLevelColor,"stroke-width":"5","stroke-linecap":"round","stroke-dasharray":r.circumference,"stroke-dashoffset":r.progressOffset,class:"progress-ring-fill"},null,8,rie)])),a("span",nie,m(r.progressPercent)+"%",1)])]),a("div",iie,[a("div",oie,[(v(),S("svg",{class:"path-line",width:r.pathWidth,height:"100",preserveAspectRatio:"none"},[a("path",{d:r.pathD,fill:"none",stroke:"#e5e7eb","stroke-width":"4","stroke-linecap":"round"},null,8,lie),a("path",{d:r.pathD,fill:"none",stroke:r.currentLevelColor,"stroke-width":"4","stroke-linecap":"round","stroke-dasharray":r.pathLength,"stroke-dashoffset":r.pathProgressOffset,class:"path-progress"},null,8,cie)],8,aie)),a("div",uie,[(v(!0),S(he,null,be(r.displayedLessons,(o,l)=>(v(),S("div",{key:o.id||l,class:ge(["lesson-node",r.getNodeStatus(l)]),style:rt(r.getNodeStyle(l)),onClick:c=>r.handleNodeClick(o,l)},[a("div",{class:"node-circle",style:rt(r.getNodeCircleStyle(l))},[r.isLessonCompleted(l)?(v(),S("svg",hie,e[4]||(e[4]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):r.isLessonLocked(l)?(v(),S("svg",fie,e[5]||(e[5]=[a("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)]))):(v(),S("span",pie,m(l+1),1))],4),a("span",mie,m(o.title||`Lesson ${l+1}`),1),o.perfectScore?(v(),S("div",gie,"")):G("",!0)],14,die))),128))])],512)]),a("div",yie,[a("div",vie,[e[6]||(e[6]=a("span",{class:"streak-icon"},"",-1)),a("span",_ie,m(r.streak)+" day streak",1)]),r.nextLesson?(v(),S("button",{key:0,class:"continue-btn",onClick:e[0]||(e[0]=(...o)=>r.startNextLesson&&r.startNextLesson(...o))},e[7]||(e[7]=[a("span",null,"Continue",-1),a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"5 3 19 12 5 21 5 3"})],-1)]))):G("",!0)])])}const wie=Je(zne,[["render",bie],["__scopeId","data-v-8b531200"]]),Sie={name:"AppleTreeGoal",props:{lessonsCompleted:{type:Number,default:0},goalTarget:{type:Number,default:20}},setup(t){Po();const e=[{name:"Apple Tree",emoji:"",appleColor:"#E53935",leafBase:"#4CAF50"},{name:"Cherry Tree",emoji:"",appleColor:"#C62828",leafBase:"#66BB6A"},{name:"Orange Tree",emoji:"",appleColor:"#FF9800",leafBase:"#43A047"},{name:"Peach Tree",emoji:"",appleColor:"#FFAB91",leafBase:"#81C784"},{name:"Lemon Tree",emoji:"",appleColor:"#FDD835",leafBase:"#AED581"},{name:"Pear Tree",emoji:"",appleColor:"#C0CA33",leafBase:"#8BC34A"}],s=oe(()=>{const N=new Date,D=new Date(N.getFullYear(),0,1),U=N-D;return Math.ceil((U+D.getDay()*864e5)/6048e5)}),r=oe(()=>{const N=s.value%e.length;return e[N]}),n=oe(()=>Math.min(t.lessonsCompleted,t.goalTarget)),i=oe(()=>Math.round(n.value/t.goalTarget*100)),o=oe(()=>i.value>=100),l=oe(()=>i.value/100),c=oe(()=>{const N=r.value.leafBase;return V("#9E9E9E",N,l.value)}),u=oe(()=>{const N=E(r.value.leafBase,15);return V("#BDBDBD",N,l.value)}),d=oe(()=>V("#757575","#5D4037",l.value)),f=oe(()=>r.value.appleColor),p=oe(()=>i.value<50?0:(i.value-50)/50),g=[{id:1,x:70,y:65},{id:2,x:130,y:70},{id:3,x:100,y:50},{id:4,x:60,y:100},{id:5,x:140,y:95},{id:6,x:85,y:120},{id:7,x:115,y:125},{id:8,x:75,y:145},{id:9,x:125,y:140},{id:10,x:100,y:85}],b=oe(()=>{const N=Math.floor(i.value/100*g.length);return g.slice(0,N)}),k=oe(()=>({filter:`saturate(${.2+l.value*.8})`})),L=oe(()=>{const N=i.value;return N===0?this.$t("dashboard.encouragement.start"):N<25?this.$t("dashboard.encouragement.growing"):N<50?this.$t("dashboard.encouragement.halfway"):N<75?this.$t("dashboard.encouragement.apples"):N<100?this.$t("dashboard.encouragement.almost"):this.$t("dashboard.encouragement.done")});function V(N,D,U){const C=R(N),w=R(D),_=Math.round(C.r+(w.r-C.r)*U),x=Math.round(C.g+(w.g-C.g)*U),P=Math.round(C.b+(w.b-C.b)*U);return`rgb(${_}, ${x}, ${P})`}function R(N){const D=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(N);return D?{r:parseInt(D[1],16),g:parseInt(D[2],16),b:parseInt(D[3],16)}:{r:0,g:0,b:0}}function E(N,D){const U=R(N),C=Math.min(255,U.r+Math.round(255*D/100)),w=Math.min(255,U.g+Math.round(255*D/100)),_=Math.min(255,U.b+Math.round(255*D/100));return`#${C.toString(16).padStart(2,"0")}${w.toString(16).padStart(2,"0")}${_.toString(16).padStart(2,"0")}`}return{currentWeekNumber:s,currentTree:r,completedLessons:n,progressPercent:i,isComplete:o,leafColor:c,leafColorLight:u,trunkColor:d,appleColor:f,applesOpacity:p,visibleApples:b,treeColorStyle:k,encouragementText:L}}},Eie={class:"tree-header"},Tie={class:"tree-title"},kie={class:"tree-emoji"},Iie={class:"week-badge"},Cie={class:"tree-visualization"},Aie={viewBox:"0 0 200 220",class:"tree-svg"},Pie=["fill"],xie=["fill"],Lie=["fill"],Rie=["fill"],Nie=["fill"],Oie=["fill"],Mie=["fill"],Die=["cx","cy","fill"],$ie={key:0,attributeName:"r",values:"8;9;8",dur:"2s",repeatCount:"indefinite"},Uie=["d"],Fie={key:0,class:"sparkles"},Vie={class:"progress-section"},Bie={class:"progress-info"},qie={class:"progress-label"},jie={class:"progress-percent"},Hie={class:"progress-bar-track"},Wie={class:"tree-footer"},zie={class:"encouragement"},Gie={key:1,class:"completed-badge"};function Kie(t,e,s,r,n,i){const o=Ht("router-link");return v(),S("div",{class:ge(["apple-tree-goal",{"tree-complete":r.isComplete}])},[a("div",Eie,[a("h3",Tie,[a("span",kie,m(r.currentTree.emoji),1),se(" "+m(t.$t("dashboard.weeklyGoal")),1)]),a("span",Iie,[e[0]||(e[0]=at('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-ce053183><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-ce053183></rect><line x1="16" y1="2" x2="16" y2="6" data-v-ce053183></line><line x1="8" y1="2" x2="8" y2="6" data-v-ce053183></line><line x1="3" y1="10" x2="21" y2="10" data-v-ce053183></line></svg>',1)),se(" "+m(t.$t("dashboard.week"))+" "+m(r.currentWeekNumber),1)])]),a("div",Cie,[a("div",{class:"tree-container",style:rt(r.treeColorStyle)},[(v(),S("svg",Aie,[e[2]||(e[2]=a("ellipse",{cx:"100",cy:"210",rx:"60",ry:"10",fill:"#8B4513",opacity:"0.3"},null,-1)),a("path",{d:"M90 180 L85 210 L115 210 L110 180 Z",fill:r.trunkColor,class:"tree-trunk"},null,8,Pie),a("path",{d:"M80 190 Q70 195 75 200 Q85 195 80 190",fill:r.trunkColor,opacity:"0.8"},null,8,xie),a("path",{d:"M120 190 Q130 195 125 200 Q115 195 120 190",fill:r.trunkColor,opacity:"0.8"},null,8,Lie),a("ellipse",{cx:"100",cy:"140",rx:"55",ry:"45",fill:r.leafColor,class:"tree-crown layer-1"},null,8,Rie),a("ellipse",{cx:"100",cy:"100",rx:"50",ry:"40",fill:r.leafColorLight,class:"tree-crown layer-2"},null,8,Nie),a("ellipse",{cx:"100",cy:"65",rx:"40",ry:"35",fill:r.leafColor,class:"tree-crown layer-3"},null,8,Oie),a("ellipse",{cx:"100",cy:"40",rx:"25",ry:"22",fill:r.leafColorLight,class:"tree-crown layer-4"},null,8,Mie),a("g",{class:"apples",style:rt({opacity:r.applesOpacity})},[(v(!0),S(he,null,be(r.visibleApples,l=>(v(),S("circle",{key:l.id,cx:l.x,cy:l.y,r:"8",fill:r.appleColor,class:"apple"},[r.isComplete?(v(),S("animate",$ie)):G("",!0)],8,Die))),128)),(v(!0),S(he,null,be(r.visibleApples,l=>(v(),S("path",{key:"stem-"+l.id,d:`M${l.x} ${l.y-8} Q${l.x} ${l.y-14} ${l.x+3} ${l.y-12}`,stroke:"#5D4037","stroke-width":"1.5",fill:"none"},null,8,Uie))),128))],4),r.isComplete?(v(),S("g",Fie,e[1]||(e[1]=[at('<circle cx="50" cy="50" r="3" fill="#FFD700" class="sparkle s1" data-v-ce053183></circle><circle cx="150" cy="40" r="2" fill="#FFD700" class="sparkle s2" data-v-ce053183></circle><circle cx="45" cy="100" r="2.5" fill="#FFD700" class="sparkle s3" data-v-ce053183></circle><circle cx="155" cy="110" r="2" fill="#FFD700" class="sparkle s4" data-v-ce053183></circle><circle cx="100" cy="20" r="3" fill="#FFD700" class="sparkle s5" data-v-ce053183></circle>',5)]))):G("",!0)]))],4),a("div",Vie,[a("div",Bie,[a("span",qie,m(t.$t("dashboard.lessonsCount",{current:r.completedLessons,total:s.goalTarget})),1),a("span",jie,m(r.progressPercent)+"%",1)]),a("div",Hie,[a("div",{class:ge(["progress-bar-fill",{complete:r.isComplete}]),style:rt({width:r.progressPercent+"%"})},null,6)])])]),a("div",Wie,[a("p",zie,m(r.encouragementText),1),r.isComplete?(v(),S("div",Gie,[e[4]||(e[4]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),se(" "+m(t.$t("dashboard.goalCompleted")),1)])):(v(),Yt(o,{key:0,to:"/profile/catalogue",class:"start-lesson-btn"},{default:Jt(()=>[e[3]||(e[3]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"5 3 19 12 5 21 5 3"})],-1)),se(" "+m(t.$t("dashboard.startLesson")),1)]),_:1}))])],2)}const Yie=Je(Sie,[["render",Kie],["__scopeId","data-v-ce053183"]]),Bp=t=>{const e=new Date(t);return e.setHours(0,0,0,0),e},Qie={name:"ProfessionalMainPage",components:{PaymentModal:NP,LevelIndicator:Fne,ModeChoice:Wne,LevelPathway:wie,AppleTreeGoal:Yie},setup(){const{isSchoolMode:t,isStudyCentreMode:e}=Sf();return{isSchoolMode:t,isStudyCentreMode:e}},mixins:[wf],data(){return{userId:null,lang:localStorage.getItem("lang")||"en",studyList:[],userProgress:[],loadingStudyList:!0,learningProfile:null,recommendations:null,rewards:null,learningProfileRequirements:{current:0,required:3},loadingLearningData:!1,showPaywall:!1,requestedTopicId:null,currentDate:"",quickActionsBase:[{id:1,titleSchoolKey:"dashboard.myCurriculum",titleStudyCentreKey:"dashboard.courseCatalog",descriptionSchoolKey:"dashboard.viewLearningPath",descriptionStudyCentreKey:"dashboard.browseAllCourses",icon:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>',path:"/profile/catalogue",color:"purple",premium:!1},{id:2,titleKey:"analytics.title",descriptionKey:"dashboard.detailedStatistics",icon:'<line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>',path:"/profile/analytics",color:"blue",premium:!0},{id:3,titleKey:"homework.title",descriptionKey:"dashboard.practiceExercises",icon:'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>',path:"/profile/homeworks",color:"green",premium:!1},{id:4,titleKey:"dashboard.testsQuizzes",descriptionKey:"dashboard.testKnowledge",icon:'<polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>',path:"/profile/tests",color:"orange",premium:!0},{id:5,titleKey:"dashboard.myGoals",descriptionKey:"dashboard.trackProgress",icon:'<circle cx="12" cy="12" r="10"/><path d="M22 12h-4l-3 9L9 3l-3 9H2"/>',path:"/profile/goal",color:"pink",premium:!0},{id:6,titleKey:"dashboard.vocabulary",descriptionKey:"dashboard.learnedTerms",icon:'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>',path:"/profile/vocabulary",color:"indigo",premium:!0}],weeklyGoalsKeys:[{id:1,titleKey:"dashboard.complete5Lessons",current:0,target:5,progress:0},{id:2,titleKey:"dashboard.study2Hours",current:0,target:2,progress:0},{id:3,titleKey:"dashboard.pass3Tests",current:0,target:3,progress:0}],recentActivity:[]}},computed:{...tn("user",{vuexUserStatus:"userStatus"}),hasSelectedMode(){return this.$store.getters["platformMode/hasSelectedMode"]},currentUserStatus(){return this.vuexUserStatus||localStorage.getItem("userStatus")||"free"},filteredStudyList(){return this.studyList.filter(t=>t)},displayedCourses(){return this.filteredStudyList.slice(0,3)},completedCourses(){return this.studyList.filter(t=>{var e;return((e=t.progress)==null?void 0:e.percent)===100}).length},inProgressCourses(){return this.studyList.filter(t=>{var e,s;return((e=t.progress)==null?void 0:e.percent)>0&&((s=t.progress)==null?void 0:s.percent)<100}).length},totalHoursStudied(){return(this.studyList.reduce((e,s)=>{var r;return e+(((r=s.progress)==null?void 0:r.completedTime)||0)},0)/60).toFixed(1)},weekProgress(){if(this.studyList.length===0)return 0;const t=this.studyList.reduce((e,s)=>{var r;return e+(((r=s.progress)==null?void 0:r.percent)||0)},0);return Math.round(t/this.studyList.length)},userStreak(){if(this.userProgress.length===0)return 0;const t=[...new Set(this.userProgress.filter(i=>i.completedAt).map(i=>Bp(i.completedAt).getTime()))].sort((i,o)=>o-i);if(t.length===0)return 0;const e=Bp(new Date).getTime(),s=Bp(new Date(Date.now()-864e5)).getTime();if(t[0]<s)return 0;let r=0,n=t[0]===e?e:s;for(const i of t)if(i===n)r++,n-=864e5;else break;return r},totalPoints(){return this.userProgress.reduce((t,e)=>t+(e.points||0),0)},displayStreak(){var t;return((t=this.rewards)==null?void 0:t.streak)||this.userStreak||0},displayPoints(){var t;return((t=this.rewards)==null?void 0:t.totalPoints)||this.totalPoints||0},quickActions(){return this.quickActionsBase.map(t=>t.id===1?{...t,title:this.isSchoolMode?this.$t(t.titleSchoolKey):this.$t(t.titleStudyCentreKey),description:this.isSchoolMode?this.$t(t.descriptionSchoolKey):this.$t(t.descriptionStudyCentreKey)}:{...t,title:this.$t(t.titleKey),description:this.$t(t.descriptionKey)})},weeklyGoals(){return this.weeklyGoalsKeys.map(t=>({...t,title:this.$t(t.titleKey)}))},averageTestScore(){const t=this.userProgress.filter(s=>s.testScore!=null).map(s=>s.testScore);if(t.length===0)return 0;const e=t.reduce((s,r)=>s+r,0);return Math.round(e/t.length)},completedGoals(){return this.weeklyGoals.filter(t=>t.progress>=100).length},weeklyLessonsCompleted(){return this.userProgress.filter(e=>this.isThisWeek(e.completedAt)).filter(e=>e.completed).length},currentCourse(){return this.studyList.find(t=>{var e,s;return((e=t.progress)==null?void 0:e.percent)>0&&((s=t.progress)==null?void 0:s.percent)<100})||this.studyList[0]||null},currentCourseLessons(){var t;return((t=this.currentCourse)==null?void 0:t.lessons)||[]}},async mounted(){await this.initialize(),window.eventBus&&window.eventBus.on("studyListUpdated",this.handleStudyListUpdate)},beforeUnmount(){window.eventBus&&window.eventBus.off("studyListUpdated",this.handleStudyListUpdate)},methods:{goToPlacementTest(){this.$router.push({name:"PlacementTest"})},handleStudyListUpdate(){this.loadData(!0)},async initialize(){var t,e;if(this.userId=((e=(t=this.$store)==null?void 0:t.state)==null?void 0:e.firebaseUserId)||localStorage.getItem("firebaseUserId")||localStorage.getItem("userId"),!this.userId){this.$router.push("/");return}this.updateCurrentDate(),setInterval(this.updateCurrentDate,6e4),await this.loadData(),await this.loadLearningData(),this.updateGoalsFromProgress(),this.generateRecentActivity()},async loadLearningData(){var t,e,s,r,n;this.loadingLearningData=!0;try{try{await wv(this.userId)}catch{}const[i,o,l]=await Promise.allSettled([vv(this.userId),bv(this.userId),_v(this.userId)]);i.status==="fulfilled"&&((t=i.value)!=null&&t.success)?i.value.profile?(this.learningProfile=i.value.profile,this.learningProfileRequirements={current:((e=i.value.profile.requirements)==null?void 0:e.required)||3,required:((s=i.value.profile.requirements)==null?void 0:s.required)||3}):(this.learningProfile=null,i.value.requirements&&(this.learningProfileRequirements=i.value.requirements)):this.learningProfile=null,o.status==="fulfilled"&&((r=o.value)!=null&&r.success)&&(this.rewards=o.value.rewards),l.status==="fulfilled"&&((n=l.value)!=null&&n.success)&&(l.value.recommendation?this.recommendations=l.value.recommendation:this.recommendations=null)}catch{}finally{this.loadingLearningData=!1}},async refreshLearningData(){await this.loadLearningData(),this.$forceUpdate()},formatCognitiveLabel(t){return{processingSpeed:"Processing",workingMemory:"Memory",visualSpatial:"Visual",verbalLinguistic:"Verbal",logicalMathematical:"Logic"}[t]||t},formatOptimalTime(t){if(!t)return"Flexible";if(t.isOptimal)return"Now! ";if(t.nextOptimal!==void 0){const e=t.hoursUntilOptimal;return e===0?"Now":`${t.nextOptimal}:00 (${e}h)`}return"Anytime"},getLearningStyleIcon(){var e,s;return{visual:"",auditory:"",kinesthetic:"","reading-writing":""}[(s=(e=this.learningProfile)==null?void 0:e.learningStyle)==null?void 0:s.primary]||""},getLearningStyleText(){var e,s;return{visual:"Visual",auditory:"Auditory",kinesthetic:"Hands-on","reading-writing":"Reading"}[(s=(e=this.learningProfile)==null?void 0:e.learningStyle)==null?void 0:s.primary]||"Balanced"},getChronotypeIcon(){var e,s;return{lark:"",owl:"","third-bird":"",variable:""}[(s=(e=this.learningProfile)==null?void 0:e.chronotype)==null?void 0:s.type]||""},getChronotypeText(){var s,r;const t=(r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.peakHours;if(!(t!=null&&t.length))return"Anytime";const e=t[0];return e<12?"Morning":e<17?"Afternoon":"Evening"},formatNumber(t){return(t==null?void 0:t.toLocaleString())||"0"},capitalize(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},updateCurrentDate(){const t={weekday:"long",year:"numeric",month:"long",day:"numeric"};this.currentDate=new Date().toLocaleDateString("en-US",t)},async loadData(t=!1){this.loadingStudyList=!0;try{const[e,s]=await Promise.all([yv(this.userId,t),gv(this.userId)]);s!=null&&s.success&&Array.isArray(s.data)&&(this.userProgress=s.data),e!=null&&e.success&&Array.isArray(e.data)&&(this.studyList=await this.enrichStudyList(e.data))}catch{}finally{this.loadingStudyList=!1}},async enrichStudyList(t){const e=t.filter(r=>r==null?void 0:r.topicId).map(async r=>{try{const n=await hP(r.topicId);let i=n!=null&&n.success?n.data:r;if(!i.lessons||i.lessons.length===0){const o=await fP(r.topicId);o!=null&&o.success&&o.data&&(i.lessons=o.data)}return{...i,progress:this.calculateProgress(i),lastAccessed:r.lastAccessed||new Date().toISOString()}}catch{return{...r,name:r.topic||r.name||"Unknown Course",lessons:[],progress:{percent:0,completedLessons:0,totalLessons:0},lastAccessed:r.lastAccessed||new Date().toISOString()}}});return(await Promise.all(e)).filter(Boolean)},calculateProgress(t){const e=t.lessons||[];if(e.length===0)return{percent:0,completedLessons:0,totalLessons:0,completedTime:0,totalTime:0};let s=0,r=0;const n=e.reduce((i,o)=>i+(o.estimatedTime||10),0);return e.forEach(i=>{const o=this.userProgress.find(l=>{var c;return(((c=l.lessonId)==null?void 0:c._id)||l.lessonId)===i._id});o!=null&&o.completed&&(s++,r+=i.estimatedTime||10)}),{percent:Math.round(s/e.length*100),completedLessons:s,totalLessons:e.length,completedTime:r,totalTime:n}},updateGoalsFromProgress(){const t=this.userProgress.filter(n=>this.isThisWeek(n.completedAt)),e=t.filter(n=>n.completed).length,s=t.filter(n=>n.testScore!=null).length,r=this.studyList.reduce((n,i)=>{const o=i.lessons.reduce((l,c)=>{const u=t.find(d=>{var f;return(((f=d.lessonId)==null?void 0:f._id)||d.lessonId)===c._id});return l+(u!=null&&u.completed?c.estimatedTime||10:0)},0);return n+o},0)/60;this.weeklyGoals[0].current=Math.min(e,this.weeklyGoals[0].target),this.weeklyGoals[0].progress=Math.min(this.weeklyGoals[0].current/this.weeklyGoals[0].target*100,100),this.weeklyGoals[1].current=parseFloat(Math.min(r,this.weeklyGoals[1].target).toFixed(1)),this.weeklyGoals[1].progress=Math.min(this.weeklyGoals[1].current/this.weeklyGoals[1].target*100,100),this.weeklyGoals[2].current=Math.min(s,this.weeklyGoals[2].target),this.weeklyGoals[2].progress=Math.min(this.weeklyGoals[2].current/this.weeklyGoals[2].target*100,100)},generateRecentActivity(){const e=[...this.userProgress].filter(s=>s.completedAt).sort((s,r)=>new Date(r.completedAt)-new Date(s.completedAt)).slice(0,5).map(s=>{var r;return s.testScore!=null?{id:`test-${s._id}`,title:`Test result: ${s.testScore}%`,time:this.getTimeAgo(s.completedAt),iconPath:'<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>',color:"blue"}:s.completed?{id:`lesson-${s._id}`,title:`Completed lesson: ${((r=s.lessonId)==null?void 0:r.lessonName)||"Lesson"}`,time:this.getTimeAgo(s.completedAt),iconPath:'<polyline points="20 6 9 17 4 12"/>',color:"green"}:null}).filter(Boolean);this.recentActivity=e.slice(0,3)},isThisWeek(t){if(!t)return!1;const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3);return new Date(t)>=s},pluralize(t,e,s,r){const n=t%10,i=t%100;return n===1&&i!==11?e:n>=2&&n<=4&&(i<10||i>=20)?s:r},getTimeAgo(t){if(!t)return"recently";const e=new Date-new Date(t),s=Math.floor(e/6e4),r=Math.floor(s/60),n=Math.floor(r/24);return s<1?"just now":r<1?`${s} ${s===1?"minute":"minutes"} ago`:n<1?`${r} ${r===1?"hour":"hours"} ago`:n<7?`${n} ${n===1?"day":"days"} ago`:"over a week ago"},getCourseName(t){return t.name||t.topicName||t.topic||t.title||"Untitled Course"},getTypeClass(t){return t.type||"free"},getTypeLabel(t){return{free:"Free",premium:"Start",pro:"Pro"}[t.type]||"Free"},formatTime(t){if(!t)return"0 h";const e=Math.floor(t/60),s=t%60;return e>0?`${e} h ${s>0?`${s} m`:""}`.trim():`${s} m`},getLastAccessed(t){return this.getTimeAgo(t.lastAccessed)},getNextLesson(t){var r,n;if(!((r=t.lessons)!=null&&r.length))return"No lessons";const e=((n=t.progress)==null?void 0:n.completedLessons)||0;if(e>=t.lessons.length)return"All completed";const s=t.lessons[e];return(s==null?void 0:s.lessonName)||(s==null?void 0:s.title)||`Lesson ${e+1}`},getProgressColorClass(t){return t>=80?"high":t>=50?"medium":t>=30?"low":"very-low"},navigateToCourse(t){this.$router.push(`/topic/${t._id}/overview`)},async startCourse(t){if(!this.hasTopicAccess(t)){this.requestedTopicId=t._id,this.showPaywall=!0;return}this.$router.push(`/topic/${t._id}/overview`)},hasTopicAccess(t){const e=t.type||"free",s=this.currentUserStatus;return e==="free"||s==="pro"||e==="premium"&&s==="start"},handleActionClick(t,e){t.premium&&!this.hasFeatureAccess(t.path)&&(e.preventDefault(),this.showPaywall=!0)},hasFeatureAccess(t){const e=this.currentUserStatus;return e==="pro"||e==="start"&&!t.includes("analytics")},handlePaymentSuccess(){this.showPaywall=!1,this.$forceUpdate()},handleLessonClick({lesson:t,index:e}){if(!this.currentCourse)return;const s=this.currentCourse._id,r=t._id||t.id;r?this.$router.push(`/lesson/${r}`):this.$router.push(`/topic/${s}/overview`)},handleContinueLesson(t){var s;if(!t||!this.currentCourse)return;const e=((s=t.lesson)==null?void 0:s._id)||t._id||t.id;e?this.$router.push(`/lesson/${e}`):this.$router.push(`/topic/${this.currentCourse._id}/overview`)}}},Xie={class:"professional-dashboard"},Jie={class:"dashboard-header"},Zie={class:"header-content"},eoe={class:"welcome-section"},toe={class:"main-title"},soe={class:"date-text"},roe={class:"header-stats"},noe={class:"stat-badge streak"},ioe={class:"stat-info"},ooe={class:"stat-label"},aoe={class:"stat-value"},loe={class:"stat-badge points"},coe={class:"stat-info"},uoe={class:"stat-label"},doe={class:"stat-value"},hoe={class:"dashboard-grid"},foe={class:"main-column"},poe={key:1,class:"section-card level-test-card"},moe={class:"test-card-content"},goe={class:"test-card-info"},yoe={class:"test-card-title"},voe={class:"test-card-description"},_oe={key:2,class:"level-pathway-section"},boe={key:1,class:"empty-pathway-card"},woe={class:"empty-pathway-title"},Soe={class:"empty-pathway-text"},Eoe={key:3,class:"section-card learning-dna-card"},Toe={class:"section-header"},koe={class:"header-left"},Ioe={class:"section-title"},Coe={class:"section-subtitle"},Aoe={key:0,class:"insights-list"},Poe={class:"dna-quick-stats"},xoe={class:"dna-stat"},Loe={class:"dna-icon"},Roe={class:"dna-stat-content"},Noe={class:"dna-stat-label"},Ooe={class:"dna-stat-value"},Moe={class:"dna-stat"},Doe={class:"dna-icon"},$oe={class:"dna-stat-content"},Uoe={class:"dna-stat-label"},Foe={class:"dna-stat-value"},Voe={key:1,class:"cognitive-section"},Boe={class:"cognitive-label"},qoe={class:"cognitive-progress"},joe={class:"cognitive-value"},Hoe={key:2,class:"recommendations-section"},Woe={class:"rec-grid"},zoe={class:"rec-item"},Goe={class:"rec-content"},Koe={class:"rec-label"},Yoe={class:"rec-value"},Qoe={class:"rec-item"},Xoe={class:"rec-content"},Joe={class:"rec-label"},Zoe={class:"rec-value"},eae={class:"rec-item"},tae={class:"rec-content"},sae={class:"rec-label"},rae={class:"rec-value"},nae={class:"rec-item"},iae={class:"rec-content"},oae={class:"rec-label"},aae={class:"rec-value"},lae={key:0,class:"tips-section"},cae={key:4,class:"section-card requirements-card"},uae={class:"section-header"},dae={class:"header-left"},hae={class:"section-title"},fae={class:"section-subtitle"},pae={class:"unlock-requirements"},mae={class:"requirements-text"},gae={class:"requirements-progress"},yae={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},vae={key:1},_ae={class:"requirement-label"},bae={key:5,class:"section-card rewards-card-new"},wae={class:"section-header"},Sae={class:"header-left"},Eae={class:"section-title"},Tae={class:"section-subtitle"},kae={class:"level-progress-section"},Iae={class:"level-header"},Cae={class:"current-level"},Aae={class:"next-level"},Pae={class:"progress-bar-container large"},xae={class:"progress-text"},Lae={class:"rewards-stats-grid"},Rae={class:"reward-stat-card"},Nae={class:"reward-stat-content"},Oae={class:"reward-stat-value"},Mae={class:"reward-stat-label"},Dae={class:"reward-stat-card"},$ae={class:"reward-stat-content"},Uae={class:"reward-stat-value"},Fae={class:"reward-stat-label"},Vae={class:"reward-stat-card"},Bae={class:"reward-stat-content"},qae={class:"reward-stat-value"},jae={class:"reward-stat-label"},Hae={key:0,class:"achievements-section-mini"},Wae={class:"achievements-grid-mini"},zae=["title"],Gae={class:"achievement-icon-mini"},Kae={class:"achievement-name-mini"},Yae={class:"quick-stats-grid"},Qae={class:"stat-card"},Xae={class:"stat-data"},Jae={class:"stat-number"},Zae={class:"stat-text"},ele={class:"stat-card"},tle={class:"stat-data"},sle={class:"stat-number"},rle={class:"stat-text"},nle={class:"stat-card"},ile={class:"stat-data"},ole={class:"stat-number"},ale={class:"stat-text"},lle={class:"stat-card"},cle={class:"stat-data"},ule={class:"stat-number"},dle={class:"stat-text"},hle={class:"section-card"},fle={class:"section-header"},ple={class:"header-left"},mle={class:"section-title"},gle={class:"section-subtitle"},yle={key:0,class:"loading-state"},vle={key:1,class:"empty-state"},_le={class:"empty-text"},ble={key:2,class:"courses-list"},wle=["onClick"],Sle={class:"course-header"},Ele={class:"course-info"},Tle={class:"course-title-row"},kle={class:"course-title"},Ile={class:"course-meta"},Cle={class:"meta-item"},Ale={class:"meta-item"},Ple={class:"meta-item"},xle=["onClick"],Lle={class:"course-progress-section"},Rle={class:"progress-header"},Nle={class:"next-lesson"},Ole={class:"lessons-count"},Mle={class:"progress-bar-container"},Dle={class:"course-footer"},$le={class:"progress-percent"},Ule=["onClick"],Fle={class:"section-card"},Vle={class:"section-title-standalone"},Ble={class:"quick-actions-grid"},qle={key:0,class:"premium-badge"},jle=["innerHTML"],Hle={class:"action-title"},Wle={class:"action-description"},zle={class:"sidebar-column"},Gle={class:"section-card"},Kle={class:"section-header small"},Yle={class:"section-title small"},Qle={class:"section-subtitle"},Xle={class:"goals-list"},Jle={class:"goal-header"},Zle={class:"goal-title"},ece={class:"goal-progress"},tce={class:"progress-bar-container small"},sce={class:"section-card"},rce={class:"section-header small"},nce={class:"section-title small"},ice={key:0,class:"empty-activity"},oce={key:1,class:"activity-list"},ace=["innerHTML"],lce={class:"activity-content"},cce={class:"activity-title"},uce={class:"activity-time"},dce={class:"insights-card"},hce={class:"insights-header"},fce={class:"insights-title"},pce={class:"insights-content"},mce={class:"insight-item"},gce={class:"insight-header"},yce={class:"insight-label"},vce={class:"insight-value"},_ce={class:"progress-bar-container"},bce={class:"insight-stat"},wce={class:"insight-stat-label"},Sce={class:"insight-stat-value"};function Ece(t,e,s,r,n,i){var p,g,b,k,L,V;const o=Ht("LevelIndicator"),l=Ht("ModeChoice"),c=Ht("LevelPathway"),u=Ht("router-link"),d=Ht("AppleTreeGoal"),f=Ht("PaymentModal");return v(),S("div",Xie,[a("div",Jie,[a("div",Zie,[a("div",eoe,[a("h1",toe,m(t.$t("dashboard.title")),1),a("p",soe,m(n.currentDate),1)]),a("div",roe,[xe(o,{isCompact:!1,showProgress:!0}),a("div",noe,[e[4]||(e[4]=a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})],-1)),a("div",ioe,[a("div",ooe,m(t.$t("dashboard.streak")),1),a("div",aoe,m(i.displayStreak)+" "+m(t.$t("dashboard.days")),1)])]),a("div",loe,[e[5]||(e[5]=a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)),a("div",coe,[a("div",uoe,m(t.$t("dashboard.points")),1),a("div",doe,m(i.displayPoints),1)])])])])]),a("div",hoe,[a("div",foe,[i.hasSelectedMode?G("",!0):(v(),Yt(l,{key:0})),i.hasSelectedMode&&r.isSchoolMode?(v(),S("div",poe,[a("div",moe,[e[7]||(e[7]=a("div",{class:"test-card-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 11l3 3L22 4"}),a("path",{d:"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"})])],-1)),a("div",goe,[a("h3",yoe,m(t.$t("dashboard.discoverLevel")),1),a("p",voe,m(t.$t("dashboard.discoverLevelDesc")),1)]),a("button",{class:"take-test-action-btn",onClick:e[0]||(e[0]=(...R)=>i.goToPlacementTest&&i.goToPlacementTest(...R))},[a("span",null,m(t.$t("dashboard.takePlacementTest")),1),e[6]||(e[6]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])])):G("",!0),i.hasSelectedMode&&r.isSchoolMode?(v(),S("div",_oe,[i.currentCourse&&i.currentCourseLessons.length>0?(v(),Yt(c,{key:i.currentCourse._id||"pathway",lessons:i.currentCourseLessons,"user-progress":n.userProgress,"current-level-prop":((p=n.rewards)==null?void 0:p.level)||1,"current-x-p-prop":((g=n.rewards)==null?void 0:g.totalPoints)||0,"streak-prop":i.displayStreak,onLessonClick:i.handleLessonClick,onContinue:i.handleContinueLesson},null,8,["lessons","user-progress","current-level-prop","current-x-p-prop","streak-prop","onLessonClick","onContinue"])):(v(),S("div",boe,[e[9]||(e[9]=a("div",{class:"empty-pathway-icon"},"",-1)),a("h3",woe,m(t.$t("dashboard.yourLearningJourney")),1),a("p",Soe,m(t.$t("dashboard.addCourseToSeePathway")),1),xe(u,{to:"/profile/catalogue",class:"add-course-pathway-btn"},{default:Jt(()=>[e[8]||(e[8]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)),se(" "+m(t.$t("dashboard.browseCourses")),1)]),_:1})]))])):G("",!0),n.learningProfile?(v(),S("div",Eoe,[a("div",Toe,[a("div",koe,[e[10]||(e[10]=a("div",{class:"section-icon-badge dna"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),a("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})])],-1)),a("div",null,[a("h2",Ioe," "+m(t.$t("dashboard.yourLearningDNA")),1),a("p",Coe,m(t.$t("dashboard.aiPoweredPersonalization")),1)])]),a("button",{onClick:e[1]||(e[1]=(...R)=>i.refreshLearningData&&i.refreshLearningData(...R)),class:"refresh-btn-small",title:"Refresh data"},e[11]||(e[11]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)]))]),(b=n.learningProfile.insights)!=null&&b.length?(v(),S("div",Aoe,[(v(!0),S(he,null,be(n.learningProfile.insights,(R,E)=>(v(),S("div",{key:E,class:"insight-item"},m(R),1))),128))])):G("",!0),a("div",Poe,[a("div",xoe,[a("span",Loe,m(i.getLearningStyleIcon()),1),a("div",Roe,[a("span",Noe,m(t.$t("dashboard.learningStyle")),1),a("span",Ooe,m(i.getLearningStyleText()),1)])]),a("div",Moe,[a("span",Doe,m(i.getChronotypeIcon()),1),a("div",$oe,[a("span",Uoe,m(t.$t("dashboard.bestTime")),1),a("span",Foe,m(i.getChronotypeText()),1)])])]),n.learningProfile.cognitiveProfile?(v(),S("div",Voe,[a("h4",null," "+m(t.$t("dashboard.cognitiveStrengths")),1),(v(!0),S(he,null,be(n.learningProfile.cognitiveProfile,(R,E)=>(v(),S("div",{key:E,class:"cognitive-bar"},[a("span",Boe,m(i.formatCognitiveLabel(E)),1),a("div",qoe,[a("div",{class:"cognitive-fill",style:rt({width:R+"%"})},null,4)]),a("span",joe,m(R)+"%",1)]))),128))])):G("",!0),n.recommendations?(v(),S("div",Hoe,[a("h4",null," "+m(t.$t("dashboard.smartTips")),1),a("div",Woe,[a("div",zoe,[e[12]||(e[12]=a("span",{class:"rec-icon"},"",-1)),a("div",Goe,[a("span",Koe,m(t.$t("dashboard.learningPath")),1),a("span",Yoe,m(i.capitalize(n.recommendations.preferredPath)),1)])]),a("div",Qoe,[e[13]||(e[13]=a("span",{class:"rec-icon"},"",-1)),a("div",Xoe,[a("span",Joe,m(t.$t("dashboard.optimalTime")),1),a("span",Zoe,m(i.formatOptimalTime(n.recommendations.optimalTime)),1)])]),a("div",eae,[e[14]||(e[14]=a("span",{class:"rec-icon"},"",-1)),a("div",tae,[a("span",sae,m(t.$t("dashboard.sessionLength")),1),a("span",rae,m(n.recommendations.sessionLength)+" "+m(t.$t("dashboard.min")),1)])]),a("div",nae,[e[15]||(e[15]=a("span",{class:"rec-icon"},"",-1)),a("div",iae,[a("span",oae,m(t.$t("dashboard.difficulty")),1),a("span",aae,m((n.recommendations.difficultyLevel*100).toFixed(0))+"%",1)])])]),(k=n.recommendations.tips)!=null&&k.length?(v(),S("div",lae,[(v(!0),S(he,null,be(n.recommendations.tips,(R,E)=>(v(),S("div",{key:E,class:"tip-item"},"  "+m(R),1))),128))])):G("",!0)])):G("",!0)])):!n.learningProfile&&!n.loadingLearningData?(v(),S("div",cae,[a("div",uae,[a("div",dae,[e[16]||(e[16]=a("div",{class:"section-icon-badge locked"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})])],-1)),a("div",null,[a("h2",hae," "+m(t.$t("dashboard.unlockLearningDNA")),1),a("p",fae,m(t.$t("dashboard.completeLessonsToReveal")),1)])])]),a("div",pae,[a("p",mae,m(t.$t("dashboard.completeAtLeast",{count:n.learningProfileRequirements.required})),1),a("div",gae,[(v(!0),S(he,null,be(n.learningProfileRequirements.required,R=>(v(),S("div",{class:"requirement-item",key:R},[a("div",{class:ge(["requirement-check",{completed:n.learningProfileRequirements.current>=R}])},[n.learningProfileRequirements.current>=R?(v(),S("svg",yae,e[17]||(e[17]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):(v(),S("span",vae,m(R),1))],2),a("span",_ae,m(t.$t("dashboard.lesson"))+" "+m(R),1)]))),128))]),xe(u,{to:"/profile/my-courses",class:"start-learning-btn"},{default:Jt(()=>[se(m(t.$t("dashboard.startLearning")),1)]),_:1})])])):G("",!0),n.rewards?(v(),S("div",bae,[a("div",wae,[a("div",Sae,[e[18]||(e[18]=a("div",{class:"section-icon-badge rewards"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),a("div",null,[a("h2",Eae," "+m(t.$t("dashboard.yourProgress")),1),a("p",Tae,m(t.$t("dashboard.level"))+" "+m(n.rewards.level)+"  "+m(i.formatNumber(n.rewards.totalPoints))+" "+m(t.$t("dashboard.points").toLowerCase()),1)])])]),a("div",kae,[a("div",Iae,[a("span",Cae,m(t.$t("dashboard.level"))+" "+m(n.rewards.level),1),a("span",Aae,m(t.$t("dashboard.level"))+" "+m(n.rewards.level+1),1)]),a("div",Pae,[a("div",{class:"progress-bar-fill gold",style:rt({width:n.rewards.currentLevelProgress+"%"})},null,4)]),a("span",xae,m(Math.round(n.rewards.currentLevelProgress))+"% "+m(t.$t("dashboard.toNextLevel")),1)]),a("div",Lae,[a("div",Rae,[e[19]||(e[19]=a("div",{class:"reward-stat-icon fire"},"",-1)),a("div",Nae,[a("span",Oae,m(n.rewards.streak||0),1),a("span",Mae,m(t.$t("dashboard.dayStreak")),1)])]),a("div",Dae,[e[20]||(e[20]=a("div",{class:"reward-stat-icon trophy"},"",-1)),a("div",$ae,[a("span",Uae,m(((L=n.rewards.achievements)==null?void 0:L.length)||0),1),a("span",Fae,m(t.$t("dashboard.achievements")),1)])]),a("div",Vae,[e[21]||(e[21]=a("div",{class:"reward-stat-icon target"},"",-1)),a("div",Bae,[a("span",qae,m(n.rewards.nextRewardIn||0),1),a("span",jae,m(t.$t("dashboard.stepsToReward")),1)])])]),(V=n.rewards.achievements)!=null&&V.length?(v(),S("div",Hae,[a("h4",null," "+m(t.$t("dashboard.recentAchievements")),1),a("div",Wae,[(v(!0),S(he,null,be(n.rewards.achievements.slice(0,4),R=>(v(),S("div",{key:R.id,class:ge(["achievement-badge-mini",R.rarity]),title:R.name},[a("span",Gae,m(R.icon),1),a("span",Kae,m(R.name),1)],10,zae))),128))]),n.rewards.achievements.length>4?(v(),Yt(u,{key:0,to:"/profile/achievements",class:"view-all-achievements"},{default:Jt(()=>[se(m(t.$t("dashboard.viewAllAchievements",{count:n.rewards.achievements.length}))+"  ",1)]),_:1})):G("",!0)])):G("",!0)])):G("",!0),a("div",Yae,[a("div",Qae,[e[22]||(e[22]=a("div",{class:"stat-icon-wrapper purple"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})])],-1)),a("div",Xae,[a("div",Jae,m(n.studyList.length),1),a("div",Zae,m(t.$t("dashboard.totalCourses")),1)])]),a("div",ele,[e[23]||(e[23]=a("div",{class:"stat-icon-wrapper green"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("div",tle,[a("div",sle,m(i.completedCourses),1),a("div",rle,m(t.$t("dashboard.completed")),1)])]),a("div",nle,[e[24]||(e[24]=a("div",{class:"stat-icon-wrapper blue"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})])],-1)),a("div",ile,[a("div",ole,m(i.totalHoursStudied),1),a("div",ale,m(t.$t("dashboard.hoursStudied")),1)])]),a("div",lle,[e[25]||(e[25]=a("div",{class:"stat-icon-wrapper orange"},[a("svg",{class:"stat-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),a("polyline",{points:"17 6 23 6 23 12"})])],-1)),a("div",cle,[a("div",ule,m(i.weekProgress)+"%",1),a("div",dle,m(t.$t("dashboard.weeklyProgress")),1)])])]),a("div",hle,[a("div",fle,[a("div",ple,[e[26]||(e[26]=at('<div class="section-icon-badge" data-v-3a0be4d8><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-3a0be4d8><line x1="12" y1="20" x2="12" y2="10" data-v-3a0be4d8></line><line x1="18" y1="20" x2="18" y2="4" data-v-3a0be4d8></line><line x1="6" y1="20" x2="6" y2="16" data-v-3a0be4d8></line></svg></div>',1)),a("div",null,[a("h2",mle,m(r.isSchoolMode?t.$t("dashboard.currentLessons"):t.$t("dashboard.activeCourses")),1),a("p",gle,m(i.inProgressCourses)+" "+m(t.$t("dashboard.inProgress")),1)])]),xe(u,{to:"/profile/my-courses",class:"view-all-link"},{default:Jt(()=>[se(m(r.isSchoolMode?t.$t("dashboard.allLessons"):t.$t("dashboard.allCourses"))+" ",1),e[27]||(e[27]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9 18 15 12 9 6"})],-1))]),_:1})]),n.loadingStudyList?(v(),S("div",yle,[e[28]||(e[28]=a("div",{class:"spinner"},null,-1)),a("p",null,m(t.$t("dashboard.loadingCourses")),1)])):i.filteredStudyList.length===0?(v(),S("div",vle,[e[29]||(e[29]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1)),a("p",_le,m(t.$t("dashboard.noActiveCourses")),1),xe(u,{to:"/profile/catalogue",class:"add-course-btn"},{default:Jt(()=>[se(m(t.$t("dashboard.addCourse")),1)]),_:1})])):(v(),S("div",ble,[(v(!0),S(he,null,be(i.displayedCourses,R=>{var E,N,D,U,C;return v(),S("div",{key:R._id,class:"course-card",onClick:w=>i.navigateToCourse(R)},[a("div",Sle,[a("div",Ele,[a("div",Tle,[a("h3",kle,m(i.getCourseName(R)),1),a("span",{class:ge(["type-badge",i.getTypeClass(R)])},m(i.getTypeLabel(R)),3)]),a("div",Ile,[a("span",Cle,[e[30]||(e[30]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})],-1)),se(" "+m(t.$t("dashboard.level"))+" "+m(R.level||1),1)]),a("span",Ale,[e[31]||(e[31]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),se(" "+m(i.formatTime(R.progress.totalTime)),1)]),a("span",Ple,[e[32]||(e[32]=at('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-3a0be4d8><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-3a0be4d8></rect><line x1="16" y1="2" x2="16" y2="6" data-v-3a0be4d8></line><line x1="8" y1="2" x2="8" y2="6" data-v-3a0be4d8></line><line x1="3" y1="10" x2="21" y2="10" data-v-3a0be4d8></line></svg>',1)),se(" "+m(i.getLastAccessed(R)),1)])])]),a("button",{class:"play-btn",onClick:vt(w=>i.startCourse(R),["stop"])},e[33]||(e[33]=[a("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[a("polygon",{points:"5 3 19 12 5 21 5 3"})],-1)]),8,xle)]),a("div",Lle,[a("div",Rle,[a("span",Nle,m(t.$t("dashboard.nextLesson"))+": "+m(i.getNextLesson(R)),1),a("span",Ole,m(((E=R.progress)==null?void 0:E.completedLessons)||0)+"/"+m(((N=R.lessons)==null?void 0:N.length)||0),1)]),a("div",Mle,[a("div",{class:ge(["progress-bar-fill",i.getProgressColorClass(((D=R.progress)==null?void 0:D.percent)||0)]),style:rt({width:`${((U=R.progress)==null?void 0:U.percent)||0}%`})},null,6)])]),a("div",Dle,[a("span",$le,m(((C=R.progress)==null?void 0:C.percent)||0)+"% "+m(t.$t("dashboard.complete")),1),a("button",{class:"continue-btn",onClick:vt(w=>i.startCourse(R),["stop"])},[se(m(t.$t("dashboard.continue"))+" ",1),e[34]||(e[34]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"9 18 15 12 9 6"})],-1))],8,Ule)])],8,wle)}),128))]))]),a("div",Fle,[a("h2",Vle,[e[35]||(e[35]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})],-1)),se(" "+m(t.$t("dashboard.quickAccess")),1)]),a("div",Ble,[(v(!0),S(he,null,be(i.quickActions,R=>(v(),Yt(u,{key:R.id,to:R.path,class:ge(["action-card",R.color]),onClick:E=>i.handleActionClick(R,E)},{default:Jt(()=>[R.premium?(v(),S("div",qle,e[36]||(e[36]=[a("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)]))):G("",!0),(v(),S("svg",{class:"action-icon",innerHTML:R.icon},null,8,jle)),a("span",Hle,m(R.title),1),a("span",Wle,m(R.description),1)]),_:2},1032,["to","class","onClick"]))),128))])])]),a("div",zle,[xe(d,{"lessons-completed":i.weeklyLessonsCompleted,"goal-target":20,class:"apple-tree-section"},null,8,["lessons-completed"]),a("div",Gle,[a("div",Kle,[e[37]||(e[37]=a("div",{class:"section-icon-badge green"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})])],-1)),a("div",null,[a("h3",Yle,m(t.$t("dashboard.weeklyGoals")),1),a("p",Qle,m(i.completedGoals)+"/"+m(i.weeklyGoals.length)+" "+m(t.$t("dashboard.completed").toLowerCase()),1)])]),a("div",Xle,[(v(!0),S(he,null,be(i.weeklyGoals,R=>(v(),S("div",{key:R.id,class:"goal-item"},[a("div",Jle,[a("span",Zle,m(R.title),1),a("span",ece,m(R.current)+"/"+m(R.target),1)]),a("div",tce,[a("div",{class:"progress-bar-fill green",style:rt({width:`${R.progress}%`})},null,4)])]))),128))])]),a("div",sce,[a("div",rce,[e[38]||(e[38]=a("div",{class:"section-icon-badge blue"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})])],-1)),a("h3",nce,m(t.$t("dashboard.recentActivity")),1)]),n.recentActivity.length===0?(v(),S("div",ice,[a("p",null,m(t.$t("dashboard.noRecentActivity")),1)])):(v(),S("div",oce,[(v(!0),S(he,null,be(n.recentActivity,R=>(v(),S("div",{key:R.id,class:"activity-item"},[a("div",{class:ge(["activity-icon-wrapper",R.color])},[(v(),S("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",innerHTML:R.iconPath},null,8,ace))],2),a("div",lce,[a("p",cce,m(R.title),1),a("p",uce,m(R.time),1)])]))),128))]))]),a("div",dce,[a("div",hce,[e[39]||(e[39]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),a("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})],-1)),a("h3",fce,m(t.$t("dashboard.learningStatistics")),1)]),a("div",pce,[a("div",mce,[a("div",gce,[a("span",yce,m(t.$t("dashboard.weeklyProgress")),1),a("span",vce,m(i.weekProgress)+"%",1)]),a("div",_ce,[a("div",{class:"progress-bar-fill white",style:rt({width:`${i.weekProgress}%`})},null,4)])]),e[40]||(e[40]=a("div",{class:"insight-divider"},null,-1)),a("div",bce,[a("div",wce,m(t.$t("dashboard.averageTestScore")),1),a("div",Sce,m(i.averageTestScore)+"%",1)])])])])]),n.userId&&n.showPaywall?(v(),Yt(f,{key:0,"user-id":n.userId,visible:n.showPaywall,"requested-topic-id":n.requestedTopicId,onClose:e[2]||(e[2]=R=>n.showPaywall=!1),onUnlocked:e[3]||(e[3]=R=>i.handlePaymentSuccess(R))},null,8,["user-id","visible","requested-topic-id"])):G("",!0)])}const Tce=Je(Qie,[["render",Ece],["__scopeId","data-v-3a0be4d8"]]),kce={name:"UserAnalyticsPanel",data(){return{loading:!0,error:null,showModal:!1,selectedStats:["studyDays","completedLessons","totalPoints","streakDays"],period:30,lessonCache:new Map,learningProfile:null,recommendations:null,rewards:null,analytics:{studyDays:0,completedLessons:0,completedTopics:0,totalLessonsDone:0,streakDays:0,totalPoints:0,avgPointsPerDay:0,subjects:[],topics:[],recentActivity:[]}}},computed:{pdfStatOptions(){return[{key:"studyDays",label:this.$t("analytics.studyDays")},{key:"completedLessons",label:this.$t("analytics.completedLessons")},{key:"completedTopics",label:this.$t("analytics.completedTopics")},{key:"totalPoints",label:this.$t("analytics.totalPoints")},{key:"streakDays",label:this.$t("analytics.streakDays")},{key:"avgPointsPerDay",label:this.$t("analytics.avgPointsPerDay")}]},hasAnyData(){const{totalLessonsDone:t,studyDays:e,subjects:s}=this.analytics;return t>0||e>0||(s==null?void 0:s.length)>0},statCards(){const t=this.analytics;return[{id:"points",label:this.$t("analytics.totalPoints"),value:this.formatNumber(t.totalPoints),subtext:this.$t("analytics.points"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>',color:"purple"},{id:"avgPoints",label:this.$t("analytics.avgPointsPerDay"),value:this.formatNumber(t.avgPointsPerDay),subtext:this.$t("analytics.points"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>',color:"blue"},{id:"studyDays",label:this.$t("analytics.studyDays"),value:this.formatNumber(t.studyDays),subtext:this.formatDaysToHuman(t.studyDays),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>',color:"green"},{id:"lessons",label:this.$t("analytics.completedLessons"),value:this.formatNumber(t.completedLessons||t.totalLessonsDone),subtext:this.$t("analytics.lesson"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>',color:"orange"},{id:"topics",label:this.$t("analytics.completedTopics"),value:this.formatNumber(t.completedTopics),subtext:this.$t("analytics.topics"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>',color:"teal"},{id:"streak",label:this.$t("analytics.streak"),value:`${t.streakDays||0}`,subtext:t.streakDays>0?this.$t("analytics.daysStreak"):this.$t("analytics.startAgain"),icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>',color:"pink"}]}},async mounted(){await this.loadAllData()},methods:{async loadAllData(){var t,e,s,r,n,i,o;this.loading=!0,this.error=null;try{const l=me.currentUser||await new Promise(p=>setTimeout(()=>p(me.currentUser),1e3));if(!l){this.error=this.$t("analytics.authRequired");return}try{await wv(l.uid)}catch{}const[c,u,d,f]=await Promise.allSettled([SP(l.uid),vv(l.uid),bv(l.uid),_v(l.uid)]);if(c.status==="fulfilled"){const p=((e=(t=c.value)==null?void 0:t.data)==null?void 0:e.data)||((s=c.value)==null?void 0:s.data);p&&typeof p=="object"&&(this.analytics={...this.analytics,...p},await this.resolveActivityLessonNames())}u.status==="fulfilled"&&((r=u.value)!=null&&r.success)&&(this.learningProfile=u.value.profile),d.status==="fulfilled"&&((n=d.value)!=null&&n.success)&&(this.rewards=d.value.rewards),f.status==="fulfilled"&&((i=f.value)!=null&&i.success)&&(this.recommendations=f.value.recommendation)}catch(l){const c=(o=l.response)==null?void 0:o.status;c===401?this.error=this.$t("analytics.authError"):c===404?this.error=this.$t("analytics.notFound"):c>=500?this.error=this.$t("analytics.serverError"):this.error=this.$t("analytics.loadError")}finally{this.loading=!1}},async loadAnalytics(){await this.loadAllData()},getLearningStyleIcon(){var e,s;return{visual:"",auditory:"",kinesthetic:"","reading-writing":""}[(s=(e=this.learningProfile)==null?void 0:e.learningStyle)==null?void 0:s.primary]||""},getLearningStyleText(){var s,r,n;const t={visual:this.$t("analytics.visual"),auditory:this.$t("analytics.auditory"),kinesthetic:this.$t("analytics.kinesthetic"),"reading-writing":this.$t("analytics.readingWriting")},e=(n=(r=(s=this.learningProfile)==null?void 0:s.learningStyle)==null?void 0:r.primary)==null?void 0:n.toLowerCase();return t[e]||this.$t("analytics.balanced")},getChronotypeIcon(){var e,s;return{lark:"",owl:"","third-bird":"",variable:""}[(s=(e=this.learningProfile)==null?void 0:e.chronotype)==null?void 0:s.type]||""},getChronotypeText(){var s,r,n;const t={lark:this.$t("analytics.lark"),owl:this.$t("analytics.owl"),"third-bird":this.$t("analytics.thirdBird"),variable:this.$t("analytics.variable")},e=(n=(r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.type)==null?void 0:n.toLowerCase();return t[e]||this.$t("analytics.flexible")},getOptimalTimesText(){var s,r;const t=(r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.peakHours;if(!(t!=null&&t.length))return this.$t("analytics.studyAnytime");const e=t.slice(0,2).map(n=>`${n}:00`).join(", ");return this.$t("analytics.betterAt",{hours:e})},getPreferredPathText(){var s,r;const t={storyteller:this.$t("analytics.storyteller"),builder:this.$t("analytics.builder"),scientist:this.$t("analytics.scientist"),artist:this.$t("analytics.artist"),gamer:this.$t("analytics.gamer"),social:this.$t("analytics.social"),debater:this.$t("analytics.debater")},e=(r=(s=this.learningProfile)==null?void 0:s.preferredPath)==null?void 0:r.toLowerCase();return t[e]||this.$t("analytics.universal")},getSessionLengthText(){var e,s,r;const t=((e=this.recommendations)==null?void 0:e.sessionLength)||((r=(s=this.learningProfile)==null?void 0:s.chronotype)==null?void 0:r.optimalSessionLength);return t?this.$t("analytics.minutes",{count:t}):this.$t("analytics.minutes",{count:30})},formatCognitiveLabel(t){const e=t.charAt(0).toLowerCase()+t.slice(1),s={processingSpeed:this.$t("analytics.processingSpeed"),workingMemory:this.$t("analytics.workingMemory"),visualSpatial:this.$t("analytics.visualSpatial"),verbalLinguistic:this.$t("analytics.verbalLinguistic"),logicalMathematical:this.$t("analytics.logicalMathematical"),Processing:this.$t("analytics.Processing"),Memory:this.$t("analytics.Memory"),Visual:this.$t("analytics.Visual"),Verbal:this.$t("analytics.Verbal"),Logic:this.$t("analytics.Logic")};return s[t]||s[e]||t},async fetchLessonName(t){if(this.lessonCache.has(t))return this.lessonCache.get(t);try{const e=await pP(t),s=e==null?void 0:e.data,r=(s==null?void 0:s.lessonName)||(s==null?void 0:s.title)||(s==null?void 0:s.name)||this.$t("analytics.lessonWithoutName");return this.lessonCache.set(t,r),r}catch{const s=`${this.$t("analytics.lesson")} (${t.slice(-6)})`;return this.lessonCache.set(t,s),s}},async resolveActivityLessonNames(){var r;const t=((r=this.analytics.recentActivity)==null?void 0:r.filter(n=>typeof n.lesson=="string"&&/^[a-f\d]{24}$/i.test(n.lesson)))||[];if(t.length===0)return;const s=[...new Set(t.map(n=>n.lesson))].map(n=>this.fetchLessonName(n));try{await Promise.allSettled(s),this.analytics.recentActivity.forEach(n=>{this.lessonCache.has(n.lesson)&&(n.lesson=this.lessonCache.get(n.lesson))})}catch{}},openModal(){this.showModal=!0},async downloadPDF(){const{default:t}=await yt(async()=>{const{default:r}=await import("./html2pdf-D-WF8-vz.js").then(n=>n.h);return{default:r}},[]),e=this.pdfStatOptions.filter(r=>this.selectedStats.includes(r.key)).map(r=>{const n=this.analytics[r.key]??"";return`
                    <div style="margin: 12px 0; padding: 8px; border-left: 3px solid #a855f7; background: #f8f9fa;">
                        <strong>${r.label}:</strong> ${this.formatNumber(n)}
                    </div>`}).join(""),s=document.createElement("div");s.style.cssText="padding: 20px; font-family: Arial, sans-serif;",s.innerHTML=`
            <h2 style="text-align:center; margin-bottom:20px;"> ${this.$t("analytics.title")}</h2>
            ${e}
            <div style="margin-top:20px; padding-top:20px; border-top: 1px solid #ddd; font-size: 12px; color: #666;">
                <div style="margin-bottom: 8px;"><strong>${this.$t("analytics.period")}:</strong> ${this.period} ${this.$t("analytics.days")}</div>
                <div>${this.$t("analytics.generated")}: ${new Date().toLocaleString("ru-RU")}</div>
            </div>`,this.showModal=!1;try{await t().set({margin:.5,filename:`analytics-${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).from(s).save()}catch{alert(this.$t("analytics.loadError"))}},formatNumber:t=>{const e=Number(t);return t==null||isNaN(e)?"":e.toLocaleString("ru-RU")},formatDuration:t=>{const e=Number(t);return isNaN(e)?t:`${Math.round(e)} `},formatLessonName:t=>t?typeof t=="string"&&/^[a-f\d]{24}$/i.test(t)?`${(void 0).$t("analytics.lesson")} (${t.slice(-6)})`:t:(void 0).$t("analytics.lessonWithoutName"),formatDaysToHuman(t){if(!t)return`0 ${this.$t("analytics.days")}`;const e=[];return t>=365&&e.push(`${Math.floor(t/365)} ${this.$t("analytics.yearShort")}`),t%365>=30&&e.push(`${Math.floor(t%365/30)} ${this.$t("analytics.monthShort")}`),(t%30>0||e.length===0)&&e.push(`${t%30} ${this.$t("analytics.dayShort")}`),` ${e.join(" ")}`},formatDate(t){if(!t)return"";try{const e=new Date(t),s=new Date,r=new Date;return r.setDate(r.getDate()-1),e.toDateString()===s.toDateString()?`${this.$t("analytics.today")}, ${e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:e.toDateString()===r.toDateString()?`${this.$t("analytics.yesterday")}, ${e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:e.toLocaleDateString("ru-RU",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}}}},Ice={class:"analytics-page"},Cce={class:"page-header"},Ace={class:"header-content"},Pce={class:"header-info"},xce={class:"page-title"},Lce={class:"page-subtitle"},Rce={key:0,class:"loading-state"},Nce={key:1,class:"error-state"},Oce={key:2,class:"content-container"},Mce={key:0,class:"section-card learning-dna-section"},Dce={class:"section-header"},$ce={class:"section-title"},Uce={class:"section-subtitle"},Fce={class:"dna-grid"},Vce={class:"dna-card"},Bce={class:"dna-card-header"},qce={class:"dna-icon"},jce={class:"dna-value"},Hce={class:"dna-desc"},Wce={class:"dna-card"},zce={class:"dna-card-header"},Gce={class:"dna-icon"},Kce={class:"dna-value"},Yce={class:"dna-desc"},Qce={class:"dna-card"},Xce={class:"dna-card-header"},Jce={class:"dna-value"},Zce={class:"dna-desc"},eue={class:"dna-card"},tue={class:"dna-card-header"},sue={class:"dna-value"},rue={class:"dna-desc"},nue={key:0,class:"cognitive-profile-section"},iue={class:"subsection-title"},oue={class:"cognitive-bars"},aue={class:"cognitive-label"},lue={class:"cognitive-progress"},cue={class:"cognitive-value"},uue={key:1,class:"insights-section"},due={class:"subsection-title"},hue={class:"insights-grid"},fue={key:1,class:"section-card rewards-section"},pue={class:"section-header"},mue={class:"section-title"},gue={class:"section-subtitle"},yue={class:"level-section"},vue={class:"level-info"},_ue={class:"level-label"},bue={class:"level-percent"},wue={class:"level-progress-bar"},Sue={class:"rewards-stats"},Eue={class:"reward-stat"},Tue={class:"reward-stat-value"},kue={class:"reward-stat-label"},Iue={class:"reward-stat"},Cue={class:"reward-stat-value"},Aue={class:"reward-stat-label"},Pue={class:"reward-stat"},xue={class:"reward-stat-value"},Lue={class:"reward-stat-label"},Rue={key:0,class:"achievements-showcase"},Nue={class:"subsection-title"},Oue={class:"achievements-list"},Mue={class:"achievement-icon"},Due={class:"achievement-info"},$ue={class:"achievement-name"},Uue={class:"achievement-date"},Fue={class:"stats-grid"},Vue=["innerHTML"],Bue={class:"stat-content"},que={class:"stat-label"},jue={class:"stat-value"},Hue={class:"stat-subtext"},Wue={key:2,class:"section-card"},zue={class:"section-header"},Gue={class:"section-title"},Kue={class:"section-subtitle"},Yue={class:"activity-list"},Que={class:"activity-content"},Xue={class:"activity-title"},Jue={class:"activity-meta"},Zue={class:"activity-points"},ede={key:0},tde={key:3,class:"empty-state"},sde={class:"modal-card"},rde={class:"modal-header"},nde=["aria-label"],ide={class:"modal-body"},ode={class:"modal-section"},ade={for:"period-select",class:"modal-label"},lde={value:"30"},cde={value:"90"},ude={value:"365"},dde={class:"modal-section"},hde={class:"modal-label"},fde={class:"options-grid"},pde=["value"],mde={class:"modal-footer"};function gde(t,e,s,r,n,i){var o,l,c,u;return v(),S("div",Ice,[a("div",Cce,[a("div",Ace,[a("div",Pce,[a("h1",xce," "+m(t.$t("analytics.title")),1),a("p",Lce,m(t.$t("analytics.subtitle")),1)]),a("button",{onClick:e[0]||(e[0]=(...d)=>i.openModal&&i.openModal(...d)),class:"download-button"},[e[9]||(e[9]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"7 10 12 15 17 10"}),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),se(" "+m(t.$t("analytics.downloadPdf")),1)])])]),n.loading?(v(),S("div",Rce,[e[10]||(e[10]=a("div",{class:"spinner"},null,-1)),a("p",null,m(t.$t("analytics.loading")),1)])):n.error?(v(),S("div",Nce,[e[12]||(e[12]=a("svg",{class:"error-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),a("h3",null,m(n.error),1),a("button",{onClick:e[1]||(e[1]=(...d)=>i.loadAllData&&i.loadAllData(...d)),class:"action-button primary"},[e[11]||(e[11]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)),se(" "+m(t.$t("analytics.tryAgain")),1)])])):(v(),S("div",Oce,[n.learningProfile?(v(),S("div",Mce,[a("div",Dce,[e[13]||(e[13]=a("div",{class:"section-icon-badge dna"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),a("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})])],-1)),a("div",null,[a("h2",$ce," "+m(t.$t("analytics.learningDna")),1),a("p",Uce,m(t.$t("analytics.aiPersonalization")),1)])]),a("div",Fce,[a("div",Vce,[a("div",Bce,[a("span",qce,m(i.getLearningStyleIcon()),1),a("h4",null,m(t.$t("analytics.learningStyle")),1)]),a("div",jce,m(i.getLearningStyleText()),1),a("p",Hce,m(t.$t("analytics.primaryPerception")),1)]),a("div",Wce,[a("div",zce,[a("span",Gce,m(i.getChronotypeIcon()),1),a("h4",null,m(t.$t("analytics.chronotype")),1)]),a("div",Kce,m(i.getChronotypeText()),1),a("p",Yce,m(i.getOptimalTimesText()),1)]),a("div",Qce,[a("div",Xce,[e[14]||(e[14]=a("span",{class:"dna-icon"},"",-1)),a("h4",null,m(t.$t("analytics.learningPath")),1)]),a("div",Jce,m(i.getPreferredPathText()),1),a("p",Zce,m(t.$t("analytics.recommendedApproach")),1)]),a("div",eue,[a("div",tue,[e[15]||(e[15]=a("span",{class:"dna-icon"},"",-1)),a("h4",null,m(t.$t("analytics.sessionLength")),1)]),a("div",sue,m(i.getSessionLengthText()),1),a("p",rue,m(t.$t("analytics.optimalSession")),1)])]),n.learningProfile.cognitiveProfile?(v(),S("div",nue,[a("h3",iue," "+m(t.$t("analytics.cognitiveProfile")),1),a("div",oue,[(v(!0),S(he,null,be(n.learningProfile.cognitiveProfile,(d,f)=>(v(),S("div",{key:f,class:"cognitive-bar"},[a("span",aue,m(i.formatCognitiveLabel(f)),1),a("div",lue,[a("div",{class:"cognitive-fill",style:rt({width:d+"%"})},null,4)]),a("span",cue,m(d)+"%",1)]))),128))])])):G("",!0),(o=n.learningProfile.insights)!=null&&o.length?(v(),S("div",uue,[a("h3",due," "+m(t.$t("analytics.personalInsights")),1),a("div",hue,[(v(!0),S(he,null,be(n.learningProfile.insights,(d,f)=>(v(),S("div",{key:f,class:"insight-card"},m(d),1))),128))])])):G("",!0)])):G("",!0),n.rewards?(v(),S("div",fue,[a("div",pue,[e[16]||(e[16]=a("div",{class:"section-icon-badge rewards"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),a("div",null,[a("h2",mue," "+m(t.$t("analytics.gamification")),1),a("p",gue,m(t.$t("analytics.level",{level:n.rewards.level}))+"  "+m(t.$t("analytics.pointsCount",{count:i.formatNumber(n.rewards.totalPoints)})),1)])]),a("div",yue,[a("div",vue,[a("span",_ue,m(t.$t("analytics.level",{level:n.rewards.level})),1),a("span",bue,m(Math.round(n.rewards.currentLevelProgress))+"%",1)]),a("div",wue,[a("div",{class:"level-progress-fill",style:rt({width:n.rewards.currentLevelProgress+"%"})},null,4)])]),a("div",Sue,[a("div",Eue,[e[17]||(e[17]=a("span",{class:"reward-stat-icon"},"",-1)),a("span",Tue,m(n.rewards.streak||0),1),a("span",kue,m(t.$t("analytics.daysStreak")),1)]),a("div",Iue,[e[18]||(e[18]=a("span",{class:"reward-stat-icon"},"",-1)),a("span",Cue,m(((l=n.rewards.achievements)==null?void 0:l.length)||0),1),a("span",Aue,m(t.$t("analytics.achievementsCount")),1)]),a("div",Pue,[e[19]||(e[19]=a("span",{class:"reward-stat-icon"},"",-1)),a("span",xue,m(n.rewards.nextRewardIn||0),1),a("span",Lue,m(t.$t("analytics.toNextReward")),1)])]),(c=n.rewards.achievements)!=null&&c.length?(v(),S("div",Rue,[a("h3",Nue," "+m(t.$t("analytics.recentAchievements")),1),a("div",Oue,[(v(!0),S(he,null,be(n.rewards.achievements.slice(0,6),d=>(v(),S("div",{key:d.id,class:ge(["achievement-item",d.rarity])},[a("span",Mue,m(d.icon),1),a("div",Due,[a("span",$ue,m(d.name),1),a("span",Uue,m(i.formatDate(d.unlockedAt)),1)])],2))),128))])])):G("",!0)])):G("",!0),a("div",Fue,[(v(!0),S(he,null,be(i.statCards,d=>(v(),S("div",{key:d.id,class:"stat-card"},[a("div",{class:ge(`stat-icon ${d.color}`),innerHTML:d.icon},null,10,Vue),a("div",Bue,[a("div",que,m(d.label),1),a("div",jue,m(d.value),1),a("div",Hue,m(d.subtext),1)])]))),128))]),((u=n.analytics.recentActivity)==null?void 0:u.length)>0?(v(),S("div",Wue,[a("div",zue,[e[20]||(e[20]=a("div",{class:"section-icon-badge"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})])],-1)),a("div",null,[a("h2",Gue,m(t.$t("analytics.recentActivity")),1),a("p",Kue,m(t.$t("analytics.recentActivityDesc")),1)])]),a("div",Yue,[(v(!0),S(he,null,be(n.analytics.recentActivity.slice(0,5),(d,f)=>(v(),S("div",{key:`activity-${f}-${d.date}`,class:"activity-item"},[e[21]||(e[21]=a("div",{class:"activity-icon"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("div",Que,[a("div",Xue,m(i.formatLessonName(d.lesson)),1),a("div",Jue,[a("span",null,m(i.formatDate(d.date)),1),a("span",Zue,m(t.$t("analytics.pointsCount",{count:i.formatNumber(d.points)})),1),d.duration?(v(),S("span",ede,m(i.formatDuration(d.duration)),1)):G("",!0)])])]))),128))])])):G("",!0),i.hasAnyData?G("",!0):(v(),S("div",tde,[e[23]||(e[23]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),a("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),a("line",{x1:"6",y1:"20",x2:"6",y2:"14"})],-1)),a("h3",null,m(t.$t("analytics.noData")),1),a("p",null,m(t.$t("analytics.startLearningDesc")),1),a("button",{onClick:e[2]||(e[2]=d=>t.$router.push("/catalogue")),class:"action-button primary"},[e[22]||(e[22]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)),se(" "+m(t.$t("analytics.startButton")),1)])]))])),n.showModal?(v(),S("div",{key:3,class:"modal-overlay",onClick:e[8]||(e[8]=vt(d=>n.showModal=!1,["self"]))},[a("div",sde,[a("div",rde,[a("h3",null,m(t.$t("analytics.pdfSettings")),1),a("button",{onClick:e[3]||(e[3]=d=>n.showModal=!1),class:"close-button","aria-label":t.$t("common.close")},e[24]||(e[24]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,nde)]),a("div",ide,[a("div",ode,[a("label",ade,m(t.$t("analytics.period")),1),Pe(a("select",{id:"period-select","onUpdate:modelValue":e[4]||(e[4]=d=>n.period=d),class:"modal-select"},[a("option",lde,m(t.$t("analytics.oneMonth")),1),a("option",cde,m(t.$t("analytics.threeMonths")),1),a("option",ude,m(t.$t("analytics.oneYear")),1)],512),[[Js,n.period]])]),a("div",dde,[a("label",hde,m(t.$t("analytics.selectMetrics")),1),a("div",fde,[(v(!0),S(he,null,be(i.pdfStatOptions,d=>(v(),S("label",{key:d.key,class:"option-checkbox"},[Pe(a("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=f=>n.selectedStats=f),value:d.key},null,8,pde),[[Ch,n.selectedStats]]),a("span",null,m(d.label),1)]))),128))])])]),a("div",mde,[a("button",{onClick:e[6]||(e[6]=d=>n.showModal=!1),class:"action-button secondary"},m(t.$t("common.cancel")),1),a("button",{onClick:e[7]||(e[7]=(...d)=>i.downloadPDF&&i.downloadPDF(...d)),class:"action-button primary"},[e[25]||(e[25]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"7 10 12 15 17 10"}),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),se(" "+m(t.$t("common.download")),1)])])])])):G("",!0)])}const yde=Je(kce,[["render",gde],["__scopeId","data-v-0a7e26b5"]]),vde={name:"StudyGoal",setup(){const t=Se([]),e=Se(!1),s=Se(["","","","","","","","",""," ","","","","","","","","","",""]),r=Co({subject:"",customSubject:"",topic:"",timeline:"",total:0,done:0,comment:""});return{goals:t,addingGoal:e,subjects:s,newGoal:r,calculateProgress:L=>L.total>0?Math.round(L.done/L.total*100):0,daysLeft:L=>{const V=new Date,E=new Date(L.timeline)-V,N=Math.ceil(E/(1e3*60*60*24));return N>0?`${N} `:""},addGoal:()=>{if(!r.subject||!r.topic||!r.timeline||!r.total)return;const L={...r,id:Date.now(),updating:!1,updateAmount:0};t.value.push(L),Object.assign(r,{subject:"",customSubject:"",topic:"",timeline:"",total:0,done:0,comment:""}),e.value=!1},updateGoal:(L,V)=>{const R=t.value.findIndex(E=>E.id===L);if(R!==-1){const E=t.value[R];E.done=Math.min(E.done+V,E.total),E.updating=!1,E.updateAmount=0}},deleteGoal:L=>{t.value=t.value.filter(V=>V.id!==L)},markDone:L=>{const V=t.value.findIndex(R=>R.id===L);V!==-1&&(t.value[V].done=t.value[V].total)},toggleUpdate:L=>{const V=t.value.findIndex(R=>R.id===L);if(V!==-1){const R=t.value[V];R.updating=!R.updating,R.updateAmount=0}},getSubjectColor:L=>({:"red",:"blue",:"green",:"orange",:"teal",:"purple",:"gray",:"pink",:"amber"," ":"indigo"})[L]||"default",getDaysLeftColor:L=>{const V=new Date,R=new Date(L.timeline),E=Math.ceil((R-V)/(1e3*60*60*24));return E<0?"expired":E<=3?"urgent":E<=7?"warning":"good"},getProgressEmoji:L=>L===100?"":L>=80?"":L>=60?"":L>=40?"":L>=20?"":"",getRandomMotivation:()=>{const L=[" ! "," ! "," ! ","   ! "];return L[Math.floor(Math.random()*L.length)]},getSubjectName:L=>L.subject==="custom"?L.customSubject:L.subject}}},_de={class:"goals-page"},bde={class:"page-header"},wde={class:"header-content"},Sde={key:0,class:"form-card"},Ede={class:"form-header"},Tde={class:"form-body"},kde={class:"form-grid"},Ide={class:"form-group"},Cde=["value"],Ade={key:0,class:"form-group"},Pde={class:"form-group"},xde={class:"form-group"},Lde={class:"form-group"},Rde={class:"form-group"},Nde={class:"form-group full-width"},Ode={class:"form-actions"},Mde={key:1,class:"goals-container"},Dde={class:"goal-header"},$de={class:"goal-info"},Ude={class:"goal-details"},Fde={class:"goal-subject"},Vde={class:"goal-topic"},Bde={class:"goal-actions"},qde=["onClick"],jde={class:"progress-section"},Hde={class:"progress-header"},Wde={class:"progress-label"},zde={class:"progress-value"},Gde={class:"progress-bar-container"},Kde={key:0,class:"motivation-text"},Yde={key:0,class:"comment-section"},Qde={class:"comment-content"},Xde={key:1,class:"update-section"},Jde=["onUpdate:modelValue"],Zde=["onClick"],ehe=["onClick"],the={key:2,class:"goal-buttons"},she=["onClick"],rhe=["onClick"],nhe={key:2,class:"empty-state"};function ihe(t,e,s,r,n,i){return v(),S("div",_de,[a("div",bde,[a("div",wde,[e[13]||(e[13]=a("div",{class:"header-info"},[a("h1",{class:"page-title"},"  "),a("p",{class:"page-subtitle"},"     !")],-1)),r.addingGoal?G("",!0):(v(),S("button",{key:0,onClick:e[0]||(e[0]=o=>r.addingGoal=!0),class:"add-button"},e[12]||(e[12]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),se("   ")])))])]),r.addingGoal?(v(),S("div",Sde,[a("div",Ede,[e[15]||(e[15]=a("h2",{class:"form-title"},"  ",-1)),a("button",{onClick:e[1]||(e[1]=o=>r.addingGoal=!1),class:"close-button"},e[14]||(e[14]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),a("div",Tde,[a("div",kde,[a("div",Ide,[e[18]||(e[18]=a("label",{class:"form-label"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]),se("  ")],-1)),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.newGoal.subject=o),class:"form-select"},[e[16]||(e[16]=a("option",{value:""}," ",-1)),(v(!0),S(he,null,be(r.subjects,o=>(v(),S("option",{key:o,value:o},m(o),9,Cde))),128)),e[17]||(e[17]=a("option",{value:"custom"},"...",-1))],512),[[Js,r.newGoal.subject]])]),r.newGoal.subject==="custom"?(v(),S("div",Ade,[e[19]||(e[19]=a("label",{class:"form-label"}," ",-1)),Pe(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.newGoal.customSubject=o),class:"form-input",placeholder:" "},null,512),[[Ke,r.newGoal.customSubject]])])):G("",!0),a("div",Pde,[e[20]||(e[20]=a("label",{class:"form-label"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 6v6l4 2"})]),se("  ")],-1)),Pe(a("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.newGoal.topic=o),class:"form-input",placeholder:"  ?"},null,512),[[Ke,r.newGoal.topic]])]),a("div",xde,[e[21]||(e[21]=at('<label class="form-label" data-v-b11adc90><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-b11adc90><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-b11adc90></rect><line x1="16" y1="2" x2="16" y2="6" data-v-b11adc90></line><line x1="8" y1="2" x2="8" y2="6" data-v-b11adc90></line><line x1="3" y1="10" x2="21" y2="10" data-v-b11adc90></line></svg>   </label>',1)),Pe(a("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=o=>r.newGoal.timeline=o),class:"form-input"},null,512),[[Ke,r.newGoal.timeline]])]),a("div",Lde,[e[22]||(e[22]=a("label",{class:"form-label"},"",-1)),Pe(a("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>r.newGoal.total=o),class:"form-input",placeholder:"0",min:"0"},null,512),[[Ke,r.newGoal.total,void 0,{number:!0}]])]),a("div",Rde,[e[23]||(e[23]=a("label",{class:"form-label"},"",-1)),Pe(a("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=o=>r.newGoal.done=o),class:"form-input",placeholder:"0",min:"0"},null,512),[[Ke,r.newGoal.done,void 0,{number:!0}]])])]),a("div",Nde,[e[24]||(e[24]=a("label",{class:"form-label"}," ()",-1)),Pe(a("textarea",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.newGoal.comment=o),class:"form-textarea",rows:"3",placeholder:"   ..."},null,512),[[Ke,r.newGoal.comment]])]),a("div",Ode,[a("button",{onClick:e[9]||(e[9]=o=>r.addingGoal=!1),class:"action-button secondary"},"  "),a("button",{onClick:e[10]||(e[10]=(...o)=>r.addGoal&&r.addGoal(...o)),class:"action-button primary"},e[25]||(e[25]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1),se("   ")]))])])])):G("",!0),r.goals.length>0?(v(),S("div",Mde,[(v(!0),S(he,null,be(r.goals,o=>(v(),S("div",{key:o.id,class:"goal-card"},[a("div",Dde,[a("div",$de,[a("div",{class:ge(["goal-badge",r.getSubjectColor(o.subject)])},m(r.getSubjectName(o).charAt(0)),3),a("div",Ude,[a("h3",Fde,m(r.getSubjectName(o)),1),a("p",Vde,m(o.topic),1)])]),a("div",Bde,[a("div",{class:ge(["deadline-badge",r.getDaysLeftColor(o)])},[e[26]||(e[26]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 6v6l4 2"})],-1)),se(" "+m(r.daysLeft(o)),1)],2),a("button",{onClick:l=>r.deleteGoal(o.id),class:"delete-button"},e[27]||(e[27]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"3 6 5 6 21 6"}),a("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,qde)])]),a("div",jde,[a("div",Hde,[a("span",Wde,"  "+m(r.getProgressEmoji(r.calculateProgress(o))),1),a("span",zde,m(o.done)+"/"+m(o.total)+" ("+m(r.calculateProgress(o))+"%) ",1)]),a("div",Gde,[a("div",{class:ge(["progress-bar-fill",r.getSubjectColor(o.subject)]),style:rt({width:r.calculateProgress(o)+"%"})},null,6)]),r.calculateProgress(o)>0?(v(),S("p",Kde,m(r.getRandomMotivation()),1)):G("",!0)]),o.comment?(v(),S("div",Yde,[a("div",Qde,[e[28]||(e[28]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),a("p",null,m(o.comment),1)])])):G("",!0),o.updating?(v(),S("div",Xde,[Pe(a("input",{type:"number","onUpdate:modelValue":l=>o.updateAmount=l,class:"update-input",placeholder:" ",min:"0"},null,8,Jde),[[Ke,o.updateAmount,void 0,{number:!0}]]),a("button",{onClick:l=>r.updateGoal(o.id,o.updateAmount||0),class:"action-button success"},e[29]||(e[29]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1)]),8,Zde),a("button",{onClick:l=>r.toggleUpdate(o.id),class:"action-button secondary"},e[30]||(e[30]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,ehe)])):(v(),S("div",the,[a("button",{onClick:l=>r.toggleUpdate(o.id),class:"action-button secondary"},e[31]||(e[31]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),se("  ")]),8,she),r.calculateProgress(o)<100?(v(),S("button",{key:0,onClick:l=>r.markDone(o.id),class:"action-button success"},e[32]||(e[32]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1),se("  ")]),8,rhe)):G("",!0)]))]))),128))])):r.addingGoal?G("",!0):(v(),S("div",nhe,[e[34]||(e[34]=a("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M12 6v6l4 2"})],-1)),e[35]||(e[35]=a("h3",null,"  !",-1)),e[36]||(e[36]=a("p",null,"    ",-1)),a("button",{onClick:e[11]||(e[11]=o=>r.addingGoal=!0),class:"action-button primary large"},e[33]||(e[33]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),se("    ")]))]))])}const ohe=Je(vde,[["render",ihe],["__scopeId","data-v-b11adc90"]]),ahe={data(){return{userInput:"",messages:[],image:"",imageAdded:!1,isLoading:!1,messageUsage:0,imageUsage:0,plan:"free",userId:null,currentMonth:new Date().getMonth(),currentYear:new Date().getFullYear(),lastResetCheck:null,planLimits:{free:{messages:50,images:5},start:{messages:-1,images:20},pro:{messages:-1,images:-1}}}},computed:{...tn("user",["userStatus","getUserId"]),remainingMessages(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.messages)||0;return t===-1?"":Math.max(0,t-this.messageUsage)},remainingImages(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.images)||0;return t===-1?"":Math.max(0,t-this.imageUsage)},nextResetDate(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,1).toLocaleDateString("en-US",{day:"numeric",month:"long"})},isMessageLimitReached(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.messages)||0;return t!==-1&&this.messageUsage>=t},isImageLimitReached(){var e;const t=((e=this.planLimits[this.plan])==null?void 0:e.images)||0;return t!==-1&&this.imageUsage>=t},isInputDisabled(){return this.isMessageLimitReached||this.isLoading},isImageUploadDisabled(){return this.isImageLimitReached||this.isLoading},inputPlaceholder(){return this.isMessageLimitReached?"Message limit reached. Resets next month.":"Type a question..."},imageUploadTooltip(){return this.isImageLimitReached?"Image limit reached":"Attach image"},showUsageWarning(){return this.warningMessage!==""},warningType(){return this.isMessageLimitReached||this.isImageLimitReached?"error":this.remainingMessages<=5||this.remainingImages<=1?"warning":"info"},warningMessage(){if(this.plan==="free"){if(this.isMessageLimitReached&&this.isImageLimitReached)return"Message and image limits reached. Upgrade plan to continue.";if(this.isMessageLimitReached)return"Message limit reached. Upgrade plan for unlimited messaging.";if(this.isImageLimitReached)return"Image limit reached. Upgrade plan for more images.";if(this.remainingMessages<=5)return`${this.remainingMessages} messages remaining this month.`;if(this.remainingImages<=1)return`${this.remainingImages} image request(s) remaining this month.`}else if(this.plan==="start"){if(this.isImageLimitReached)return"Image limit reached. Upgrade to Pro for unlimited images.";if(this.remainingImages<=2)return`${this.remainingImages} images remaining this month.`}return""},canUpgrade(){return this.plan==="free"||this.plan==="start"&&this.isImageLimitReached}},async mounted(){await this.initializeComponent()},methods:{async initializeComponent(){try{const t=me.currentUser;t&&(this.userId=t.uid,this.plan=this.userStatus||"free",await this.loadUsageData(),await this.checkMonthlyReset())}catch{}},async loadUsageData(){if(this.userId)try{const t=kl(Il,"users",this.userId),e=await mk(t);if(e.exists()){const s=e.data(),r=`${this.currentYear}-${this.currentMonth}`,i=(s.homeworkUsage||{})[r]||{};this.messageUsage=i.messages||0,this.imageUsage=i.images||0,this.lastResetCheck=s.lastResetCheck||null}}catch{}},async checkMonthlyReset(){const t=new Date,e=t.getMonth(),s=t.getFullYear();if(this.lastResetCheck){const r=new Date(this.lastResetCheck),n=r.getMonth(),i=r.getFullYear();(s>i||e>n)&&await this.performMonthlyReset()}else await this.updateResetCheck()},async performMonthlyReset(){if(this.userId)try{this.messageUsage=0,this.imageUsage=0;const t=kl(Il,"users",this.userId),e=`${this.currentYear}-${this.currentMonth}`;await Yu(t,{[`homeworkUsage.${e}.messages`]:0,[`homeworkUsage.${e}.images`]:0,lastResetCheck:new Date().toISOString()})}catch{}},async updateResetCheck(){if(this.userId)try{const t=kl(Il,"users",this.userId);await Yu(t,{lastResetCheck:new Date().toISOString()})}catch{}},async sendMessage(){if(!(!this.userInput&&!this.image)){if(this.isMessageLimitReached){this.showLimitModal("messages");return}if(this.image&&this.isImageLimitReached){this.showLimitModal("images");return}this.isLoading=!0;try{const t={text:this.userInput,sender:"user",image:this.image,timestamp:new Date().toISOString()};this.messages.push(t);const e=await RP(t.text,t.image);this.messages.push({text:e,sender:"bot",timestamp:new Date().toISOString()}),this.messageUsage++,this.image&&this.imageUsage++,await this.saveUsageData(),this.userInput="",this.image="",this.imageAdded=!1}catch{this.messages.pop(),this.messages.push({text:" An error occurred. Please try again.",sender:"bot",timestamp:new Date().toISOString()})}finally{this.isLoading=!1}}},async saveUsageData(){if(this.userId)try{const t=kl(Il,"users",this.userId),e=`${this.currentYear}-${this.currentMonth}`;await Yu(t,{[`homeworkUsage.${e}.messages`]:this.messageUsage,[`homeworkUsage.${e}.images`]:this.imageUsage,[`homeworkUsage.${e}.lastUsed`]:new Date().toISOString()})}catch{}},async handleFile(t){const e=t.target.files[0];if(!e||!e.type.startsWith("image"))return;if(this.isImageLimitReached){this.showLimitModal("images"),t.target.value="";return}const s=new FileReader;s.onload=async()=>{var i;const r=s.result.split(",")[1],n=new FormData;n.append("image",r);try{const l=await(await fetch("https://api.imgbb.com/1/upload?key=e428d4d8a427726409a1b7fbdb232ff1",{method:"POST",body:n})).json();(i=l==null?void 0:l.data)!=null&&i.url?(this.image=l.data.url,this.imageAdded=!0,setTimeout(()=>this.imageAdded=!1,3e3)):alert("Failed to upload image.")}catch{alert("Error uploading image.")}},s.readAsDataURL(e)},showLimitModal(t){confirm(`${{messages:"Message limit reached. Upgrade plan to continue chatting.",images:"Image limit reached. Upgrade plan to send more images."}[t]}

Go to plan selection?`)&&this.navigateToUpgrade()},navigateToUpgrade(){this.$router.push("/settings")},formatTimestamp(t){return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}},watch:{userStatus:{handler(t){t&&t!==this.plan&&(this.plan=t)},immediate:!0}}},lhe={class:"homework-help"},che={class:"chat-header"},uhe={class:"usage-info"},dhe={key:0,class:"usage-counter free"},hhe={class:"usage-item"},fhe={class:"count"},phe={class:"usage-item"},mhe={class:"count"},ghe={key:1,class:"usage-counter start"},yhe={class:"usage-item"},vhe={class:"count"},_he={key:2,class:"usage-counter pro"},bhe={class:"reset-info"},whe={class:"warning-content"},She={class:"warning-text"},Ehe={class:"chat-window"},The={class:"message-bubble"},khe={key:0},Ihe=["src"],Che={key:2,class:"message-timestamp"},Ahe={key:0,class:"message bot"},Phe=["placeholder","disabled"],xhe=["title"],Lhe=["disabled"],Rhe=["disabled"],Nhe={key:1,class:"image-added-msg"};function Ohe(t,e,s,r,n,i){return v(),S("div",lhe,[e[13]||(e[13]=a("div",{class:"instruction-box"},[a("h2",null," How to use the assistant"),a("ol",null,[a("li",null,"Choose a subject or topic."),a("li",null,"Formulate your question as clearly as possible."),a("li",null,"Attach an image and explain what is depicted."),a("li",null,'Click "Send" and get an answer!')])],-1)),a("div",che,[e[10]||(e[10]=a("h2",null," Homework Help",-1)),a("div",uhe,[n.plan==="free"?(v(),S("div",dhe,[a("div",hhe,[e[5]||(e[5]=a("span",{class:"label"},"Messages:",-1)),a("span",fhe,m(i.remainingMessages)+" of 50",1)]),a("div",phe,[e[6]||(e[6]=a("span",{class:"label"},"Images:",-1)),a("span",mhe,m(i.remainingImages)+" of 5",1)])])):n.plan==="start"?(v(),S("div",ghe,[e[8]||(e[8]=a("div",{class:"usage-item"},[a("span",{class:"label"},"Messages:"),a("span",{class:"count unlimited"}," Unlimited")],-1)),a("div",yhe,[e[7]||(e[7]=a("span",{class:"label"},"Images:",-1)),a("span",vhe,m(i.remainingImages)+" of 20",1)])])):n.plan==="pro"?(v(),S("div",_he,e[9]||(e[9]=[at('<div class="usage-item" data-v-17466d04><span class="label" data-v-17466d04>Messages:</span><span class="count unlimited" data-v-17466d04> Unlimited</span></div><div class="usage-item" data-v-17466d04><span class="label" data-v-17466d04>Images:</span><span class="count unlimited" data-v-17466d04> Unlimited</span></div>',2)]))):G("",!0),a("div",bhe,[a("small",null,"Reset: "+m(i.nextResetDate),1)])])]),i.showUsageWarning?(v(),S("div",{key:0,class:ge(["usage-warning",i.warningType])},[a("div",whe,[e[11]||(e[11]=a("span",{class:"warning-icon"},"",-1)),a("span",She,m(i.warningMessage),1),i.canUpgrade?(v(),S("button",{key:0,onClick:e[0]||(e[0]=(...o)=>i.navigateToUpgrade&&i.navigateToUpgrade(...o)),class:"upgrade-btn"}," Upgrade Plan ")):G("",!0)])],2)):G("",!0),a("div",Ehe,[(v(!0),S(he,null,be(n.messages,(o,l)=>(v(),S("div",{key:l,class:ge(["message",o.sender])},[a("div",The,[o.text?(v(),S("p",khe,m(o.text),1)):G("",!0),o.image?(v(),S("img",{key:1,src:o.image,class:"image-msg"},null,8,Ihe)):G("",!0),o.timestamp?(v(),S("div",Che,m(i.formatTimestamp(o.timestamp)),1)):G("",!0)])],2))),128)),n.isLoading?(v(),S("div",Ahe,e[12]||(e[12]=[a("div",{class:"message-bubble loading"},[a("div",{class:"typing-indicator"},[a("span"),a("span"),a("span")])],-1)]))):G("",!0)]),a("div",{class:ge(["chat-input",{disabled:i.isInputDisabled}])},[Pe(a("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>n.userInput=o),placeholder:i.inputPlaceholder,disabled:i.isInputDisabled,onKeyup:e[2]||(e[2]=ya((...o)=>i.sendMessage&&i.sendMessage(...o),["enter"]))},null,40,Phe),[[Ke,n.userInput]]),a("label",{for:"file-upload",class:ge(["file-upload-btn",{disabled:i.isImageUploadDisabled}]),title:i.imageUploadTooltip}," + ",10,xhe),a("input",{id:"file-upload",type:"file",onChange:e[3]||(e[3]=(...o)=>i.handleFile&&i.handleFile(...o)),disabled:i.isImageUploadDisabled,hidden:""},null,40,Lhe),a("button",{onClick:e[4]||(e[4]=(...o)=>i.sendMessage&&i.sendMessage(...o)),disabled:i.isInputDisabled,class:ge({disabled:i.isInputDisabled})}," Send ",10,Rhe)],2),n.imageAdded?(v(),S("p",Nhe," Image successfully added!")):G("",!0)])}const Mhe=Je(ahe,[["render",Ohe],["__scopeId","data-v-17466d04"]]),Dhe={name:"HomeworkList",data(){return{homeworks:[],loading:!0,error:null,selectedSubject:"",selectedStatus:"",searchQuery:""}},computed:{subjects(){return[...new Set(this.validHomeworks.map(t=>t.subject).filter(Boolean))].sort()},validHomeworks(){return this.homeworks.filter(t=>{if(!t)return!1;const e=(t._id||t.lessonId)&&t._id!=="null"&&t.lessonId!=="null",s=t.title||t.lessonName,r=this.getExerciseCount(t)>0;return e&&s&&r})},filteredHomeworks(){return this.validHomeworks.filter(t=>{const e=!this.selectedSubject||t.subject===this.selectedSubject,s=!this.selectedStatus||this.getStatus(t)===this.selectedStatus,r=!this.searchQuery||this.getHomeworkTitle(t).toLowerCase().includes(this.searchQuery.toLowerCase());return e&&s&&r})},displayableHomeworks(){return this.filteredHomeworks},totalHomeworks(){return this.validHomeworks.length},completedHomeworks(){return this.validHomeworks.filter(t=>this.isCompleted(t)).length},inProgressHomeworks(){return this.validHomeworks.filter(t=>this.hasProgress(t)&&!this.isCompleted(t)).length},hasActiveFilters(){return!!(this.searchQuery||this.selectedSubject||this.selectedStatus)}},methods:{getSubjectEmoji(t){return{Mathematics:"",Math:"",English:"",Language:"",Science:"",Physics:"",Chemistry:"",Biology:"",History:"",Geography:"","Computer Science":"",Programming:""}[t]||""},getHomeworkKey(t){return t._id?`hw-${t._id}`:t.lessonId?`lesson-${t.lessonId}`:`temp-${Math.random()}`},getHomeworkTitle(t){return t.title||t.lessonName||"Homework"},getExerciseCount(t){return t.exerciseCount>0?t.exerciseCount:Array.isArray(t.exercises)?t.exercises.length:Array.isArray(t.homework)?t.homework.length:Array.isArray(t.questions)?t.questions.length:0},hasProgress(t){return!!(t.hasProgress||t.completed!==void 0||t.score!==void 0||t.userProgress||t.progress)},isCompleted(t){var e,s;return!!(t.completed||(e=t.userProgress)!=null&&e.completed||(s=t.progress)!=null&&s.completed)},getScore(t){var e,s;return t.score||((e=t.userProgress)==null?void 0:e.score)||((s=t.progress)==null?void 0:s.score)||0},async goToHomework(t){try{await this.$router.push({name:"HomeworkPage",params:{id:t._id||t.lessonId},query:{title:this.getHomeworkTitle(t),subject:t.subject||"Unknown",type:t.type||(t.lessonId?"lesson":"standalone")}})}catch(e){console.error(e)}},statusLabel(t){return this.hasProgress(t)?this.isCompleted(t)?"Completed":"In Progress":"Not Started"},getStatus(t){return this.hasProgress(t)?this.isCompleted(t)?"completed":"in-progress":"pending"},getButtonText(t){return this.isCompleted(t)?"View":this.hasProgress(t)?"Continue":"Start"},clearFilters(){this.selectedSubject="",this.selectedStatus="",this.searchQuery=""},refreshHomeworks(){this.fetchHomeworks()},formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{day:"numeric",month:"short"}):""},isOverdue(t){return t.dueDate&&new Date(t.dueDate)<new Date&&!this.isCompleted(t)},isUrgent(t){if(!t.dueDate||this.isCompleted(t))return!1;const e=Math.ceil((new Date(t.dueDate)-new Date)/(1e3*60*60*24));return e<=3&&e>=0},async fetchHomeworks(){try{this.loading=!0,this.error=null;const t=me.currentUser;if(!t)throw new Error("Not authorized");const e=await mP(t.uid);e.success&&e.data?this.homeworks=e.data.map(s=>{var r,n,i,o;return{...s,hasProgress:!!(s.hasProgress||s.userProgress||s.progress||s.completed!==void 0||s.score!==void 0),completed:!!(s.completed||(r=s.userProgress)!=null&&r.completed||(n=s.progress)!=null&&n.completed),score:s.score||((i=s.userProgress)==null?void 0:i.score)||((o=s.progress)==null?void 0:o.score)||0}}):(this.error=e.error||"Failed to load",this.homeworks=[])}catch(t){this.error=t.message,this.homeworks=[]}finally{this.loading=!1}}},async mounted(){await this.fetchHomeworks()}},$he={class:"min-h-screen bg-white"},Uhe={class:"max-w-6xl mx-auto px-6 pt-8 pb-6"},Fhe={class:"flex items-center justify-between"},Vhe={class:"flex items-center gap-4"},Bhe={class:"text-slate-500 text-sm"},qhe={class:"hidden md:flex items-center gap-3"},jhe={class:"px-4 py-2 rounded-full bg-green-50 text-green-600 text-sm font-medium"},Hhe={class:"px-4 py-2 rounded-full bg-amber-50 text-amber-600 text-sm font-medium"},Whe={class:"max-w-6xl mx-auto px-6 pb-6"},zhe={class:"flex flex-wrap items-center gap-3"},Ghe={class:"relative flex-1 min-w-64"},Khe=["value"],Yhe={key:0,class:"flex flex-col items-center justify-center py-24"},Qhe={key:1,class:"text-center py-24"},Xhe={class:"text-slate-500 text-sm mb-4"},Jhe={key:2,class:"max-w-6xl mx-auto px-6 pb-12"},Zhe={key:0,class:"text-center py-24"},efe={class:"text-6xl mb-4"},tfe={class:"text-lg font-semibold text-slate-800 mb-2"},sfe={class:"text-slate-500 text-sm"},rfe={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},nfe=["onClick"],ife={key:0,class:"absolute -top-2 -right-2 px-2 py-0.5 rounded-full bg-red-500 text-white text-xs font-bold shadow-sm"},ofe={class:"flex items-center justify-between mb-4"},afe={class:"flex items-center gap-2"},lfe={class:"text-lg"},cfe={class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},ufe={class:"font-semibold text-slate-800 mb-3 line-clamp-2 group-hover:text-purple-600 transition-colors"},dfe={class:"flex items-center gap-4 text-xs text-slate-500 mb-4"},hfe={class:"flex items-center gap-1"},ffe={class:"mb-4"},pfe={class:"flex justify-between text-xs mb-1"},mfe={class:"font-medium text-slate-600"},gfe={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},yfe={class:"pt-4 border-t border-gray-50 flex justify-end"};function vfe(t,e,s,r,n,i){return v(),S("div",$he,[a("div",Uhe,[a("div",Fhe,[a("div",Vhe,[e[7]||(e[7]=a("div",{class:"w-12 h-12 rounded-2xl bg-purple-50 flex items-center justify-center"},[a("span",{class:"text-2xl"},"")],-1)),a("div",null,[e[6]||(e[6]=a("h1",{class:"text-2xl font-bold text-slate-800"},"Homework",-1)),a("p",Bhe,m(i.validHomeworks.length)+" assignments",1)])]),a("div",qhe,[a("div",jhe,"  "+m(i.completedHomeworks)+" done ",1),a("div",Hhe,"  "+m(i.inProgressHomeworks)+" in progress ",1)])])]),a("div",Whe,[a("div",zhe,[a("div",Ghe,[Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.searchQuery=o),type:"text",class:"w-full px-4 py-2.5 pl-10 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 transition-all",placeholder:"Search homework..."},null,512),[[Ke,n.searchQuery]]),e[8]||(e[8]=a("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1))]),Pe(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.selectedSubject=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[e[9]||(e[9]=a("option",{value:""},"All Subjects",-1)),(v(!0),S(he,null,be(i.subjects,o=>(v(),S("option",{key:o,value:o},m(o),9,Khe))),128))],512),[[Js,n.selectedSubject]]),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedStatus=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},e[10]||(e[10]=[a("option",{value:""},"All Status",-1),a("option",{value:"pending"},"Not Started",-1),a("option",{value:"in-progress"},"In Progress",-1),a("option",{value:"completed"},"Completed",-1)]),512),[[Js,n.selectedStatus]]),i.hasActiveFilters?(v(),S("button",{key:0,onClick:e[3]||(e[3]=(...o)=>i.clearFilters&&i.clearFilters(...o)),class:"px-4 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 transition-all"}," Clear ")):G("",!0),a("button",{onClick:e[4]||(e[4]=(...o)=>i.refreshHomeworks&&i.refreshHomeworks(...o)),class:"p-2.5 rounded-xl border border-gray-200 text-slate-500 hover:border-gray-300 hover:text-slate-700 transition-all"},e[11]||(e[11]=[a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)]))])]),n.loading?(v(),S("div",Yhe,e[12]||(e[12]=[a("div",{class:"w-8 h-8 border-2 border-purple-200 border-t-purple-500 rounded-full animate-spin"},null,-1),a("p",{class:"mt-4 text-slate-500 text-sm"},"Loading...",-1)]))):n.error?(v(),S("div",Qhe,[e[13]||(e[13]=a("div",{class:"text-6xl mb-4"},"",-1)),e[14]||(e[14]=a("h3",{class:"text-lg font-semibold text-slate-800 mb-2"},"Something went wrong",-1)),a("p",Xhe,m(n.error),1),a("button",{onClick:e[5]||(e[5]=(...o)=>i.refreshHomeworks&&i.refreshHomeworks(...o)),class:"px-4 py-2 bg-indigo-500 text-white rounded-xl text-sm font-medium hover:bg-indigo-600 transition-all"}," Try Again ")])):(v(),S("div",Jhe,[i.displayableHomeworks.length===0?(v(),S("div",Zhe,[a("div",efe,m(i.validHomeworks.length===0?"":""),1),a("h3",tfe,m(i.validHomeworks.length===0?"No homework yet":"No matches found"),1),a("p",sfe,m(i.validHomeworks.length===0?"Start a course to get assignments":"Try different filters"),1)])):(v(),S("div",rfe,[(v(!0),S(he,null,be(i.displayableHomeworks,o=>(v(),S("article",{key:i.getHomeworkKey(o),onClick:l=>i.goToHomework(o),class:"group p-5 rounded-2xl border border-gray-100 hover:border-purple-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white relative"},[i.isUrgent(o)?(v(),S("div",ife," DUE SOON ")):G("",!0),a("div",ofe,[a("div",afe,[a("span",lfe,m(i.getSubjectEmoji(o.subject)),1),a("span",cfe,m(o.subject||"General"),1)]),a("span",{class:ge(["px-2 py-1 rounded-lg text-xs font-medium",{"bg-slate-100 text-slate-500":i.getStatus(o)==="pending","bg-amber-100 text-amber-600":i.getStatus(o)==="in-progress","bg-green-100 text-green-600":i.getStatus(o)==="completed"}])},m(i.statusLabel(o)),3)]),a("h3",ufe,m(i.getHomeworkTitle(o)),1),a("div",dfe,[a("span",hfe,[e[15]||(e[15]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a("polyline",{points:"14 2 14 8 20 8"})],-1)),se(" "+m(i.getExerciseCount(o))+" exercises ",1)]),o.dueDate?(v(),S("span",{key:0,class:ge(["flex items-center gap-1",i.isOverdue(o)?"text-red-500 font-medium":""])},[e[16]||(e[16]=at('<svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-05faeb80><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-05faeb80></rect><line x1="16" y1="2" x2="16" y2="6" data-v-05faeb80></line><line x1="8" y1="2" x2="8" y2="6" data-v-05faeb80></line><line x1="3" y1="10" x2="21" y2="10" data-v-05faeb80></line></svg>',1)),se(" "+m(i.formatDate(o.dueDate)),1)],2)):G("",!0)]),a("div",ffe,[a("div",pfe,[e[17]||(e[17]=a("span",{class:"text-slate-400"},"Progress",-1)),a("span",mfe,m(i.getScore(o))+"%",1)]),a("div",gfe,[a("div",{class:ge(["h-full rounded-full transition-all duration-500",{"bg-green-500":i.getScore(o)>=80,"bg-purple-500":i.getScore(o)>=50&&i.getScore(o)<80,"bg-amber-500":i.getScore(o)>0&&i.getScore(o)<50,"bg-gray-200":i.getScore(o)===0}]),style:rt({width:i.getScore(o)+"%"})},null,6)])]),a("div",yfe,[a("span",{class:ge(["text-sm font-medium flex items-center gap-1",i.isCompleted(o)?"text-green-500":"text-purple-500 group-hover:text-purple-600"])},[se(m(i.getButtonText(o))+" ",1),e[18]||(e[18]=a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))],2)])],8,nfe))),128))]))]))])}const _fe=Je(Dhe,[["render",vfe],["__scopeId","data-v-05faeb80"]]),bfe={name:"HomeworkPage",props:{homeworkId:{type:String,required:!1,default:null},lessonId:{type:String,required:!1,default:null},homeworkType:{type:String,required:!1,default:null},title:{type:String,required:!1,default:null},subject:{type:String,required:!1,default:null}},data(){return{questions:[],homeworkTitle:"Homework",homeworkSubject:"",instructions:"",userAnswers:[],loading:!0,saving:!1,submitting:!1,error:null,errorDetails:null,isStandalone:!1,detectedHomeworkType:null,showDebug:!1,retryCount:0}},computed:{computedHomeworkId(){const t=[{name:"props.homeworkId",value:this.homeworkId},{name:"route.params.homeworkId",value:this.$route.params.homeworkId},{name:"route.params.id",value:this.$route.params.id},{name:"route.query.homeworkId",value:this.$route.query.homeworkId},{name:"url.path",value:this.extractIdFromPath()}];for(const e of t)if(e.value&&e.value!=="null"&&e.value!=="undefined")return e.value;return null},computedLessonId(){const t=[{name:"props.lessonId",value:this.lessonId},{name:"route.params.lessonId",value:this.$route.params.lessonId},{name:"route.params.id",value:this.$route.params.id},{name:"route.query.lessonId",value:this.$route.query.lessonId},{name:"url.path",value:this.extractIdFromPath()}];for(const e of t)if(e.value&&e.value!=="null"&&e.value!=="undefined")return e.value;return null},computedHomeworkType(){const t=[{name:"props.homeworkType",value:this.homeworkType},{name:"route.query.type",value:this.$route.query.type},{name:"route.query.homeworkType",value:this.$route.query.homeworkType},{name:"detected",value:this.detectedHomeworkType},{name:"url.path",value:this.extractTypeFromPath()}];for(const e of t)if(e.value)return e.value;return"unknown"},primaryId(){const t=this.computedHomeworkId,e=this.computedLessonId,s=this.computedHomeworkType;return s==="standalone"&&t?t:s==="lesson"&&e?e:t||e||null},answeredQuestions(){return this.userAnswers.filter(t=>t&&t.toString().trim()!=="").length},progressPercentage(){return this.questions.length===0?0:Math.round(this.answeredQuestions/this.questions.length*100)},canSubmit(){return this.answeredQuestions===this.questions.length&&!this.saving}},methods:{extractIdFromPath(){const e=(this.$route.path||window.location.pathname).split("/"),s=/^[a-f0-9]{24}$/i;return e.find(n=>s.test(n))||null},extractTypeFromPath(){const t=this.$route.path||window.location.pathname;return t.includes("/standalone/")?"standalone":t.includes("/lesson/")?"lesson":null},getQuestionKey(t,e){return t._id||t.id||`q-${e}`},getQuestionText(t){return t.question||t.text||t.title||"Question not found"},getQuestionInstruction(t){return t.instruction||t.instructions||t.description||""},getQuestionPoints(t){return t.points||1},isMultipleChoice(t){return t.type==="abc"||t.type==="multiple-choice"||t.options&&Array.isArray(t.options)&&t.options.length>0},getQuestionOptions(t){return t.options||[]},getOptionText(t){return typeof t=="string"?t:t.text||t.label||t.value||"Option"},getOptionValue(t){return typeof t=="string"?t:t.value||t.text||t.label||t},onAnswerChange(t,e){clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(()=>{this.answeredQuestions>0&&this.autoSave()},2e3)},async autoSave(){if(!this.saving&&this.answeredQuestions>0)try{await this.saveHomework(!0)}catch{}},async fetchHomework(){var t,e,s,r,n;try{this.loading=!0,this.error=null,this.errorDetails=null;const i=this.computedHomeworkId,o=this.computedLessonId,l=this.primaryId,c=this.computedHomeworkType;if(!l){this.error="Assignment ID not found",this.errorDetails="Check the link and try again";return}const u=me.currentUser;if(!u)throw new Error("User not authenticated");const d=u.uid;if((c==="standalone"||!c||c==="unknown")&&l)try{const p=await yP(d,l);if(p.success&&p.data&&p.data.homework){const g=p.data.homework,b=p.data.userProgress;if(g&&(g.exercises||g.title)){this.isStandalone=!0,this.detectedHomeworkType="standalone",this.homeworkTitle=g.title||this.title||"Homework",this.homeworkSubject=g.subject||this.subject||"",this.instructions=g.instructions||"",this.questions=g.exercises||[],this.userAnswers=this.questions.map(()=>""),b&&b.answers&&this.loadUserAnswers(b.answers);return}}}catch(p){if(((t=p.response)==null?void 0:t.status)!==404&&((e=p.response)==null?void 0:e.status)>=500){this.error="Server error loading assignment",this.errorDetails=p.message;return}}try{const p=await gP(d,l);if(p.success&&p.data){const g=p.data.lessonInfo,b=p.data.questions,k=p.data.homework;if(!b||!Array.isArray(b)||b.length===0){this.error="No homework in this lesson",this.errorDetails="The assignment may not have been created yet";return}this.isStandalone=!1,this.detectedHomeworkType="lesson",this.homeworkTitle=(g==null?void 0:g.name)||`Homework: ${this.title||"Lesson"}`,this.homeworkSubject=(g==null?void 0:g.subject)||this.subject||"",this.instructions=(g==null?void 0:g.instructions)||"",this.questions=b,this.userAnswers=this.questions.map(()=>""),k&&k.answers&&this.loadUserAnswers(k.answers);return}}catch(p){((s=p.response)==null?void 0:s.status)===404?c==="standalone"?(this.error="Homework not found",this.errorDetails="It may have been deleted or not yet created"):(this.error="Lesson or homework not found",this.errorDetails="Check that the link is correct"):((r=p.response)==null?void 0:r.status)>=500?(this.error="Server error loading lesson",this.errorDetails="Try refreshing the page in a few minutes"):(this.error="Error loading homework",this.errorDetails=p.message||"Unknown error")}}catch(i){this.error="Error loading homework",this.errorDetails=i.message||"Try refreshing the page",(n=this.$toast)==null||n.error("Error loading homework")}finally{this.loading=!1}},loadUserAnswers(t){if(Array.isArray(t))for(const e of t)e.questionIndex!==void 0&&e.questionIndex>=0&&e.questionIndex<this.userAnswers.length&&(this.userAnswers[e.questionIndex]=e.userAnswer||e.answer||"");else typeof t=="object"&&Object.entries(t).forEach(([e,s])=>{const r=parseInt(e);!isNaN(r)&&r>=0&&r<this.userAnswers.length&&(this.userAnswers[r]=(s==null?void 0:s.userAnswer)||(s==null?void 0:s.answer)||s||"")})},async saveHomework(t=!1){var e,s,r,n,i,o;try{this.saving=!0;const l=me.currentUser;if(!l)throw new Error("User not authenticated");const c=l.uid,u=this.userAnswers.map((f,p)=>({questionIndex:p,userAnswer:f||"",answer:f||""}));let d;this.isStandalone?d=await bP(c,this.primaryId,u):d=await vP(c,this.primaryId,u),t||(e=this.$toast)==null||e.success("Answers saved!")}catch(l){if(!t){let c="Failed to save answers";(r=(s=l.response)==null?void 0:s.data)!=null&&r.error?c=l.response.data.error:(i=(n=l.response)==null?void 0:n.data)!=null&&i.details?c=l.response.data.details:l.message&&(c=l.message),(o=this.$toast)==null||o.error(c)}throw l}finally{this.saving=!1}},async submitHomework(){var t,e,s,r,n,i,o,l,c,u,d,f;try{this.submitting=!0;const p=this.userAnswers.filter(C=>!C||C.toString().trim()==="");if(p.length>0){(t=this.$toast)==null||t.warning(`Please answer all questions. Remaining: ${p.length}`);return}const g=me.currentUser;if(!g)throw new Error("User not authenticated");const b=g.uid,k=this.userAnswers.map((C,w)=>({questionIndex:w,userAnswer:C||"",answer:C||""}));let L;this.isStandalone?L=await wP(b,this.primaryId,k):L=await _P(b,this.primaryId,k);const V=((e=L.data)==null?void 0:e.data)||L.data||L,R=(V==null?void 0:V.score)||0,E=(V==null?void 0:V.stars)||0,N=(V==null?void 0:V.correctAnswers)||0,D=(V==null?void 0:V.totalQuestions)||this.questions.length;let U=` Homework completed!
`;U+=` Your score: ${R}%`,E>0&&(U+=`
 Stars: ${"".repeat(E)}`),N>0&&(U+=`
 Correct answers: ${N}/${D}`),(s=this.$toast)==null||s.success(U),setTimeout(()=>{this.$router.push("/profile/homeworks")},3e3)}catch(p){let g="Error submitting answers";((r=p.response)==null?void 0:r.status)===404?g="Assignment not found. It may have been deleted.":((n=p.response)==null?void 0:n.status)===403?g="Access denied. Check your permissions.":((i=p.response)==null?void 0:i.status)===400?g="Invalid data. Check your answers.":((o=p.response)==null?void 0:o.status)>=500?g="Server error. Try again later.":(c=(l=p.response)==null?void 0:l.data)!=null&&c.details?g=`Error: ${p.response.data.details}`:(d=(u=p.response)==null?void 0:u.data)!=null&&d.error?g=p.response.data.error:p.message&&(g=p.message),(f=this.$toast)==null||f.error(g)}finally{this.submitting=!1}},async retryFetch(){this.retryCount++,await this.fetchHomework()},getPointsText(t){return t===1?"point":"points"}},created(){console.group(" HomeworkPage Created"),console.groupEnd(),this.showDebug=this.$route.query.debug==="true"},async mounted(){this.primaryId?await this.fetchHomework():(this.loading=!1,this.error="Assignment ID not found",this.errorDetails="Check that the link is correct")},beforeUnmount(){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout)},watch:{$route(t,e){t.params!==e.params&&this.primaryId&&this.fetchHomework()},userAnswers:{handler(){this.$nextTick(()=>{})},deep:!0}}},wfe={class:"homework-page"},Sfe={class:"page-header"},Efe={class:"header-content"},Tfe={class:"header-info"},kfe={class:"page-title"},Ife={key:0,class:"subject-text"},Cfe={key:0,class:"debug-section"},Afe={class:"debug-grid"},Pfe={key:1,class:"loading-state"},xfe={key:2,class:"error-state"},Lfe={key:0},Rfe={class:"error-actions"},Nfe={key:3,class:"empty-state"},Ofe={key:4,class:"content-container"},Mfe={key:0,class:"instructions-card"},Dfe={class:"instructions-text"},$fe={class:"stats-grid"},Ufe={class:"stat-card"},Ffe={class:"stat-content"},Vfe={class:"stat-value"},Bfe={class:"stat-card"},qfe={class:"stat-content"},jfe={class:"stat-value"},Hfe={class:"stat-card"},Wfe={class:"stat-content"},zfe={class:"stat-value"},Gfe={class:"progress-card"},Kfe={class:"progress-header"},Yfe={class:"progress-percentage"},Qfe={class:"progress-bar-container"},Xfe={class:"question-header"},Jfe={class:"question-number"},Zfe={class:"question-content"},epe={class:"question-text"},tpe={key:0,class:"question-instruction"},spe={key:0,class:"points-badge"},rpe={key:0,class:"options-list"},npe=["name","value","onUpdate:modelValue","onChange"],ipe={class:"option-content"},ope={class:"option-text"},ape={key:1,class:"text-answer"},lpe=["onUpdate:modelValue","onInput","placeholder"],cpe={class:"answer-meta"},upe={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},dpe={key:1},hpe={key:2},fpe={class:"form-actions"},ppe=["disabled"],mpe={key:0,class:"button-content"},gpe={key:1,class:"button-content"},ype=["disabled"],vpe={key:0,class:"button-content"},_pe={key:1,class:"button-content"},bpe={class:"helper-text"},wpe={key:0},Spe={key:1};function Epe(t,e,s,r,n,i){const o=Ht("router-link");return v(),S("div",wfe,[a("div",Sfe,[a("div",Efe,[xe(o,{to:"/profile/homeworks",class:"back-button"},{default:Jt(()=>e[3]||(e[3]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"15 18 9 12 15 6"})],-1),se(" Back ")])),_:1}),a("div",Tfe,[a("h1",kfe,m(n.homeworkTitle),1),n.homeworkSubject?(v(),S("p",Ife,m(n.homeworkSubject),1)):G("",!0)])])]),n.showDebug?(v(),S("div",Cfe,[e[10]||(e[10]=a("h4",null," Debug Info",-1)),a("div",Afe,[a("div",null,[e[4]||(e[4]=a("strong",null,"Route params:",-1)),se(" "+m(JSON.stringify(t.$route.params)),1)]),a("div",null,[e[5]||(e[5]=a("strong",null,"Query params:",-1)),se(" "+m(JSON.stringify(t.$route.query)),1)]),a("div",null,[e[6]||(e[6]=a("strong",null,"Detected ID:",-1)),se(" "+m(i.primaryId),1)]),a("div",null,[e[7]||(e[7]=a("strong",null,"Detected Type:",-1)),se(" "+m(i.computedHomeworkType),1)]),a("div",null,[e[8]||(e[8]=a("strong",null,"Is Standalone:",-1)),se(" "+m(n.isStandalone),1)]),a("div",null,[e[9]||(e[9]=a("strong",null,"Questions:",-1)),se(" "+m(n.questions.length),1)])])])):G("",!0),n.loading?(v(),S("div",Pfe,e[11]||(e[11]=[a("div",{class:"spinner"},null,-1),a("p",null,"Loading assignment...",-1)]))):n.error?(v(),S("div",xfe,[e[14]||(e[14]=a("svg",{class:"error-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),a("h3",null,m(n.error),1),n.errorDetails?(v(),S("p",Lfe,m(n.errorDetails),1)):G("",!0),a("div",Rfe,[a("button",{onClick:e[0]||(e[0]=(...l)=>i.retryFetch&&i.retryFetch(...l)),class:"action-button secondary"},e[12]||(e[12]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"23 4 23 10 17 10"}),a("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1),se(" Try Again ")])),xe(o,{to:"/profile/homeworks",class:"action-button primary"},{default:Jt(()=>e[13]||(e[13]=[se(" Back to List ")])),_:1})])])):n.questions.length===0&&!n.loading?(v(),S("div",Nfe,[e[16]||(e[16]=at('<svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-c06f53fb><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-c06f53fb></path><polyline points="14 2 14 8 20 8" data-v-c06f53fb></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-c06f53fb></line><line x1="16" y1="17" x2="8" y2="17" data-v-c06f53fb></line><polyline points="10 9 9 9 8 9" data-v-c06f53fb></polyline></svg><h3 data-v-c06f53fb>No questions in this assignment</h3><p data-v-c06f53fb>Contact your teacher for more information</p>',3)),xe(o,{to:"/profile/homeworks",class:"action-button primary"},{default:Jt(()=>e[15]||(e[15]=[se(" Back to List ")])),_:1})])):(v(),S("div",Ofe,[n.instructions?(v(),S("div",Mfe,[e[17]||(e[17]=at('<div class="card-header" data-v-c06f53fb><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-c06f53fb><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-c06f53fb></path><polyline points="14 2 14 8 20 8" data-v-c06f53fb></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-c06f53fb></line><line x1="16" y1="17" x2="8" y2="17" data-v-c06f53fb></line></svg><h3 data-v-c06f53fb>Instructions</h3></div>',1)),a("p",Dfe,m(n.instructions),1)])):G("",!0),a("div",$fe,[a("div",Ufe,[e[19]||(e[19]=a("div",{class:"stat-icon purple"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a("polyline",{points:"14 2 14 8 20 8"})])],-1)),a("div",Ffe,[e[18]||(e[18]=a("div",{class:"stat-label"},"Assignment Type",-1)),a("div",Vfe,m(n.isStandalone?"Standalone":"Lesson"),1)])]),a("div",Bfe,[e[21]||(e[21]=at('<div class="stat-icon blue" data-v-c06f53fb><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-c06f53fb><circle cx="12" cy="12" r="10" data-v-c06f53fb></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-c06f53fb></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-c06f53fb></line></svg></div>',1)),a("div",qfe,[e[20]||(e[20]=a("div",{class:"stat-label"},"Total Questions",-1)),a("div",jfe,m(n.questions.length),1)])]),a("div",Hfe,[e[23]||(e[23]=a("div",{class:"stat-icon green"},[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})])],-1)),a("div",Wfe,[e[22]||(e[22]=a("div",{class:"stat-label"},"Answered",-1)),a("div",zfe,m(i.answeredQuestions)+"/"+m(n.questions.length),1)])])]),a("div",Gfe,[a("div",Kfe,[e[24]||(e[24]=a("span",{class:"progress-label"},"Completion Progress",-1)),a("span",Yfe,m(i.progressPercentage)+"%",1)]),a("div",Qfe,[a("div",{class:ge(["progress-bar-fill",{complete:i.progressPercentage===100}]),style:rt({width:i.progressPercentage+"%"})},null,6)])]),a("form",{onSubmit:e[2]||(e[2]=vt((...l)=>i.submitHomework&&i.submitHomework(...l),["prevent"])),class:"questions-form"},[(v(!0),S(he,null,be(n.questions,(l,c)=>(v(),S("div",{key:i.getQuestionKey(l,c),class:"question-card"},[a("div",Xfe,[a("div",Jfe,m(c+1),1),a("div",Zfe,[a("h4",epe,m(i.getQuestionText(l)),1),i.getQuestionInstruction(l)?(v(),S("p",tpe,m(i.getQuestionInstruction(l)),1)):G("",!0)]),i.getQuestionPoints(l)>1?(v(),S("div",spe,m(i.getQuestionPoints(l))+" "+m(i.getPointsText(i.getQuestionPoints(l))),1)):G("",!0)]),i.isMultipleChoice(l)?(v(),S("div",rpe,[(v(!0),S(he,null,be(i.getQuestionOptions(l),(u,d)=>(v(),S("label",{key:d,class:ge(["option-item",{selected:n.userAnswers[c]===i.getOptionValue(u)}])},[Pe(a("input",{type:"radio",name:"q"+c,value:i.getOptionValue(u),"onUpdate:modelValue":f=>n.userAnswers[c]=f,onChange:f=>i.onAnswerChange(c,i.getOptionValue(u)),class:"option-radio"},null,40,npe),[[wn,n.userAnswers[c]]]),a("div",ipe,[e[25]||(e[25]=a("div",{class:"option-indicator"},null,-1)),a("span",ope,m(i.getOptionText(u)),1)])],2))),128))])):(v(),S("div",ape,[Pe(a("textarea",{"onUpdate:modelValue":u=>n.userAnswers[c]=u,onInput:u=>i.onAnswerChange(c,n.userAnswers[c]),placeholder:"Enter your answer to question "+(c+1),rows:"4",class:"answer-textarea"},null,40,lpe),[[Ke,n.userAnswers[c]]]),a("div",cpe,[n.userAnswers[c]?(v(),S("svg",upe,e[26]||(e[26]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):G("",!0),n.userAnswers[c]?(v(),S("span",dpe,"Answer added")):(v(),S("span",hpe,"Awaiting answer"))])]))]))),128)),a("div",fpe,[a("button",{type:"button",onClick:e[1]||(e[1]=(...l)=>i.saveHomework&&i.saveHomework(...l)),class:"action-button secondary",disabled:n.saving||i.answeredQuestions===0},[n.saving?(v(),S("span",mpe,e[27]||(e[27]=[a("div",{class:"button-spinner"},null,-1),se(" Saving... ")]))):(v(),S("span",gpe,e[28]||(e[28]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),a("polyline",{points:"17 21 17 13 7 13 7 21"}),a("polyline",{points:"7 3 7 8 15 8"})],-1),se(" Save Draft ")])))],8,ppe),a("button",{type:"submit",class:"action-button primary",disabled:n.submitting||!i.canSubmit},[n.submitting?(v(),S("span",vpe,e[29]||(e[29]=[a("div",{class:"button-spinner"},null,-1),se(" Submitting... ")]))):(v(),S("span",_pe,e[30]||(e[30]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"20 6 9 17 4 12"})],-1),se(" Complete Assignment ")])))],8,ype)]),a("div",bpe,[e[31]||(e[31]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),i.canSubmit?(v(),S("span",wpe,"All questions answered! You can complete the assignment.")):(v(),S("span",Spe,"Answer all questions to complete the assignment."))])],32)]))])}const Tpe=Je(bfe,[["render",Epe],["__scopeId","data-v-c06f53fb"]]),Mu=void 0,kpe={name:"DiaryPage",data(){return{today:"",lessons:[],userProgress:{},lessonsToday:[],lessonsTomorrow:[],gradesThisWeek:[],completedToday:[],studyMinutes:0,diarySaved:!1,diaryLogs:[],loading:!0,saving:!1,error:"",timer:null,analytics:{totalStars:0,totalPoints:0,hintsUsed:0},saveMessage:"",saveMessageType:"success",toastMessage:"",toastType:"success"}},computed:{...Gg(["firebaseUserId"]),progressPercent(){const t=this.completedToday.length+this.lessonsToday.length;return t>0?Math.round(this.completedToday.length/t*100):0},recentDiaryLogs(){return[...this.diaryLogs].sort((t,e)=>new Date(e.date)-new Date(t.date)).slice(0,7)}},mounted(){this.today=new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}),this.startTimer(),this.fetchData()},beforeUnmount(){this.timer&&clearInterval(this.timer)},methods:{startTimer(){this.timer=setInterval(()=>{this.studyMinutes++},6e4)},async fetchData(){var e,s,r,n;const t=this.firebaseUserId;if(!t){this.error="  . ,   .",this.loading=!1;return}try{this.loading=!0,this.error="";const i=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!i)throw new Error("    ");const o={Authorization:`Bearer ${i}`},l=[ht.get(`${Mu}/lessons`,{headers:o}).catch(f=>({data:[]})),ht.get(`${Mu}/users/${t}`,{headers:o}).catch(f=>({data:{progress:{},diary:[]}})),ht.get(`${Mu}/users/${t}/analytics`,{headers:o}).catch(f=>({data:{}}))],[c,u,d]=await Promise.all(l);this.lessons=c.data||[],this.userProgress=((s=u.data)==null?void 0:s.progress)||{},this.diaryLogs=((r=u.data)==null?void 0:r.diary)||[],this.analytics=((n=d.data)==null?void 0:n.data)||d.data||{},this.calculateToday(),this.showToast("  ","success")}catch(i){this.error=this.getErrorMessage(i),this.showToast("  ","error")}finally{this.loading=!1}},getErrorMessage(t){var e,s;if(t.response){const r=t.response.status,n=((e=t.response.data)==null?void 0:e.message)||((s=t.response.data)==null?void 0:s.error);switch(r){case 401:return" . ,    .";case 403:return"   .   .";case 404:return"  . ,   .";case 500:return" .  .";default:return n||` ${r}.   .`}}else return t.request?"    .  -.":t.message||"  ."},calculateToday(){const t=["explanation","examples","exercises","quiz"],e=[],s=[],r=[],n=[];this.lessons.forEach(i=>{const o=this.userProgress[i._id]||{},l=t.filter(u=>o[u]).length,c=Math.round(l/t.length*100);l===t.length?(r.push(`${i.topic} (${i.subject})`),n.push({lessonId:i._id,subject:i.subject,topic:i.topic,score:100})):l>0&&n.push({lessonId:i._id,subject:i.subject,topic:i.topic,score:c}),!o.explanation&&!o.examples&&!o.exercises&&!o.quiz?s.push(i):e.length<3&&l<t.length&&e.push(i)}),this.completedToday=r,this.lessonsToday=e,this.lessonsTomorrow=s.slice(0,3),this.gradesThisWeek=n},async saveDiary(){var e,s,r;const t=this.firebaseUserId;if(!t){this.showToast("  ","error");return}try{this.saving=!0,this.saveMessage="";const n=await((e=me.currentUser)==null?void 0:e.getIdToken());if(!n)throw new Error("    ");const i={date:new Date().toISOString(),studyMinutes:this.studyMinutes,completedTopics:this.completedToday,averageGrade:this.gradesThisWeek.length>0?Math.round(this.gradesThisWeek.reduce((l,c)=>l+c.score,0)/this.gradesThisWeek.length):0,gradesToday:this.gradesThisWeek,stars:this.analytics.totalStars||0,mistakes:0},o=await ht.post(`${Mu}/users/${t}/diary`,i,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});this.diarySaved=!0,this.saveMessage="  !",this.saveMessageType="success",this.showToast("   !","success"),(r=(s=o.data)==null?void 0:s.data)!=null&&r.diary&&(this.diaryLogs=o.data.data.diary)}catch(n){const i=this.getErrorMessage(n);this.saveMessage=i,this.saveMessageType="error",this.showToast("  ","error")}finally{this.saving=!1,setTimeout(()=>{this.saveMessage=""},5e3)}},async exportDiary(){try{const t=JSON.stringify(this.diaryLogs,null,2),e="data:application/json;charset=utf-8,"+encodeURIComponent(t),s=`diary_${new Date().toISOString().split("T")[0]}.json`,r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",s),r.click(),this.showToast(" ","success")}catch{this.showToast(" ","error")}},formatDate(t){return new Date(t).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})},getGradeClass(t){return t>=90?"excellent":t>=80?"good":t>=70?"satisfactory":"poor"},getStreakDays(){if(!this.diaryLogs||this.diaryLogs.length===0)return 0;const t=this.diaryLogs.filter(n=>n.date).sort((n,i)=>new Date(i.date)-new Date(n.date));let e=0;const s=new Date;let r=new Date(s);r.setHours(0,0,0,0);for(const n of t){const i=new Date(n.date);i.setHours(0,0,0,0);const o=Math.floor((r-i)/(1e3*60*60*24));if(o===0||o===1)e++,r=new Date(i);else break}return e},getAverageTime(){if(!this.diaryLogs||this.diaryLogs.length===0)return"0";const t=this.diaryLogs.reduce((s,r)=>s+(r.studyMinutes||0),0),e=Math.round(t/this.diaryLogs.length);if(e>=60){const s=Math.floor(e/60),r=e%60;return r>0?`${s} ${r}`:`${s}`}return`${e}`},showToast(t,e="success"){this.toastMessage=t,this.toastType=e,setTimeout(()=>{this.toastMessage=""},3e3)}}},Ipe={class:"diary-page"},Cpe={class:"diary-header"},Ape={class:"header-content"},Ppe={class:"page-subtitle"},xpe={key:0,class:"loading-container"},Lpe={key:1,class:"error-container"},Rpe={class:"error-message"},Npe={key:2,class:"main-content"},Ope={class:"today-summary"},Mpe={class:"summary-header"},Dpe={class:"today-date"},$pe={class:"summary-grid"},Upe={class:"summary-card primary"},Fpe={class:"card-content"},Vpe={class:"card-value"},Bpe={class:"card-progress"},qpe={class:"progress-bar"},jpe={class:"summary-card success"},Hpe={class:"card-content"},Wpe={class:"card-value"},zpe={key:0,class:"card-trend"},Gpe={class:"summary-card warning"},Kpe={class:"card-content"},Ype={class:"card-value"},Qpe={class:"progress-circle"},Xpe={viewBox:"0 0 36 36",class:"circular-chart"},Jpe=["stroke-dasharray"],Zpe={x:"18",y:"20.35",class:"percentage"},eme={class:"summary-card info"},tme={class:"card-content"},sme={class:"card-value"},rme={class:"stars-display"},nme={class:"study-cards"},ime={class:"cards-grid"},ome={class:"study-card"},ame={class:"card-header"},lme={class:"card-badge"},cme={class:"card-body"},ume={key:0,class:"lessons-list"},dme={class:"lesson-info"},hme={class:"lesson-subject"},fme={class:"lesson-topic"},pme={key:1,class:"empty-state"},mme={class:"study-card"},gme={class:"card-header"},yme={class:"card-badge secondary"},vme={class:"card-body"},_me={key:0,class:"lessons-list"},bme={class:"lesson-info"},wme={class:"lesson-subject"},Sme={class:"lesson-topic"},Eme={key:1,class:"empty-state"},Tme={class:"study-card"},kme={class:"card-header"},Ime={class:"card-badge success"},Cme={class:"card-body"},Ame={key:0,class:"grades-list"},Pme={class:"grade-info"},xme={class:"grade-subject"},Lme={class:"grade-topic"},Rme={key:1,class:"empty-state"},Nme={class:"study-card analytics"},Ome={class:"card-body"},Mme={class:"analytics-grid"},Dme={class:"analytics-item"},$me={class:"analytics-content"},Ume={class:"analytics-value"},Fme={class:"analytics-item"},Vme={class:"analytics-content"},Bme={class:"analytics-value"},qme={class:"analytics-item"},jme={class:"analytics-content"},Hme={class:"analytics-value"},Wme={class:"analytics-item"},zme={class:"analytics-content"},Gme={class:"analytics-value"},Kme={class:"action-section"},Yme={class:"action-buttons"},Qme=["disabled"],Xme={class:"button-icon"},Jme={class:"button-text"},Zme={class:"message-icon"},ege={class:"message-text"},tge={key:0,class:"diary-history"},sge={class:"section-header"},rge={class:"history-stats"},nge={class:"history-timeline"},ige={class:"timeline-marker"},oge={key:0,class:"marker-line"},age={class:"timeline-content"},lge={class:"timeline-header"},cge={class:"timeline-date"},uge={class:"timeline-badges"},dge={key:0,class:"badge success"},hge={key:1,class:"badge info"},fge={class:"timeline-stats"},pge={class:"stat-item"},mge={class:"stat-text"},gge={key:0,class:"stat-item"},yge={class:"stat-text"},vge={key:1,class:"stat-item"},_ge={class:"stat-text"},bge={key:0,class:"timeline-details"},wge={key:0,class:"details-section"},Sge={class:"topics-tags"},Ege={key:0,class:"topic-tag more"},Tge={key:1,class:"details-section"},kge={class:"grades-list"},Ige={class:"grade-subject"},Cge={class:"toast-icon"},Age={class:"toast-text"};function Pge(t,e,s,r,n,i){return v(),S("div",Ipe,[a("header",Cpe,[a("div",Ape,[e[4]||(e[4]=a("div",{class:"header-icon"},"",-1)),e[5]||(e[5]=a("h1",{class:"page-title"}," ",-1)),a("p",Ppe,m(n.today),1),e[6]||(e[6]=a("div",{class:"header-decoration"},null,-1))])]),n.loading?(v(),S("div",xpe,e[7]||(e[7]=[at('<div class="loading-spinner" data-v-aeeaee05><div class="spinner-ring" data-v-aeeaee05></div><div class="spinner-ring" data-v-aeeaee05></div><div class="spinner-ring" data-v-aeeaee05></div></div><p class="loading-text" data-v-aeeaee05>  ...</p>',2)]))):n.error?(v(),S("div",Lpe,[e[9]||(e[9]=a("div",{class:"error-icon"},"",-1)),e[10]||(e[10]=a("h3",{class:"error-title"}," ",-1)),a("p",Rpe,m(n.error),1),a("button",{onClick:e[0]||(e[0]=(...o)=>i.fetchData&&i.fetchData(...o)),class:"retry-button"},e[8]||(e[8]=[a("span",{class:"button-icon"},"",-1),se("   ")]))])):(v(),S("div",Npe,[a("section",Ope,[a("div",Mpe,[e[11]||(e[11]=a("h2",{class:"section-title"},"",-1)),a("div",Dpe,m(i.formatDate(new Date)),1)]),a("div",$pe,[a("div",Upe,[e[14]||(e[14]=a("div",{class:"card-icon"},"",-1)),a("div",Fpe,[a("div",Vpe,m(n.studyMinutes),1),e[13]||(e[13]=a("div",{class:"card-label"}," ",-1)),a("div",Bpe,[a("div",qpe,[a("div",{class:"progress-fill",style:rt({width:Math.min(n.studyMinutes/60*100,100)+"%"})},null,4)]),e[12]||(e[12]=a("span",{class:"progress-text"},": 60 ",-1))])])]),a("div",jpe,[e[17]||(e[17]=a("div",{class:"card-icon"},"",-1)),a("div",Hpe,[a("div",Wpe,m(n.completedToday.length),1),e[16]||(e[16]=a("div",{class:"card-label"}," ",-1)),n.completedToday.length>0?(v(),S("div",zpe,e[15]||(e[15]=[a("span",{class:"trend-icon"},"",-1),a("span",{class:"trend-text"}," !",-1)]))):G("",!0)])]),a("div",Gpe,[e[20]||(e[20]=a("div",{class:"card-icon"},"",-1)),a("div",Kpe,[a("div",Ype,m(i.progressPercent)+"%",1),e[19]||(e[19]=a("div",{class:"card-label"}," ",-1)),a("div",Qpe,[(v(),S("svg",Xpe,[e[18]||(e[18]=a("path",{class:"circle-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,-1)),a("path",{class:"circle","stroke-dasharray":`${i.progressPercent}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,8,Jpe),a("text",Zpe,m(i.progressPercent)+"%",1)]))])])]),a("div",eme,[e[22]||(e[22]=a("div",{class:"card-icon"},"",-1)),a("div",tme,[a("div",sme,m(n.analytics.totalStars||0),1),e[21]||(e[21]=a("div",{class:"card-label"}," ",-1)),a("div",rme,[(v(!0),S(he,null,be(Math.min(n.analytics.totalStars||0,5),o=>(v(),S("span",{key:o,class:"star active"},""))),128)),(v(!0),S(he,null,be(Math.max(0,5-(n.analytics.totalStars||0)),o=>(v(),S("span",{key:`empty-${o}`,class:"star"},""))),128))])])])])]),a("section",nme,[a("div",ime,[a("div",ome,[a("div",ame,[e[23]||(e[23]=a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),se("    ")],-1)),a("div",lme,m(n.lessonsToday.length),1)]),a("div",cme,[n.lessonsToday.length>0?(v(),S("div",ume,[(v(!0),S(he,null,be(n.lessonsToday,o=>(v(),S("div",{key:o._id,class:"lesson-item"},[a("div",dme,[a("div",hme,m(o.subject),1),a("div",fme,m(o.topic),1)]),e[24]||(e[24]=a("div",{class:"lesson-status"},[a("span",{class:"status-dot pending"})],-1))]))),128))])):(v(),S("div",pme,e[25]||(e[25]=[a("div",{class:"empty-icon"},"",-1),a("p",{class:"empty-text"},"    !",-1)])))])]),a("div",mme,[a("div",gme,[e[26]||(e[26]=a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),se("    ")],-1)),a("div",yme,m(n.lessonsTomorrow.length),1)]),a("div",vme,[n.lessonsTomorrow.length>0?(v(),S("div",_me,[(v(!0),S(he,null,be(n.lessonsTomorrow,o=>(v(),S("div",{key:o._id,class:"lesson-item"},[a("div",bme,[a("div",wme,m(o.subject),1),a("div",Sme,m(o.topic),1)]),e[27]||(e[27]=a("div",{class:"lesson-status"},[a("span",{class:"status-dot scheduled"})],-1))]))),128))])):(v(),S("div",Eme,e[28]||(e[28]=[a("div",{class:"empty-icon"},"",-1),a("p",{class:"empty-text"},"   !",-1)])))])]),a("div",Tme,[a("div",kme,[e[29]||(e[29]=a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),se("    ")],-1)),a("div",Ime,m(n.gradesThisWeek.length),1)]),a("div",Cme,[n.gradesThisWeek.length>0?(v(),S("div",Ame,[(v(!0),S(he,null,be(n.gradesThisWeek,o=>(v(),S("div",{key:o.lessonId,class:"grade-item"},[a("div",Pme,[a("div",xme,m(o.subject),1),a("div",Lme,m(o.topic),1)]),a("div",{class:ge(["grade-score",i.getGradeClass(o.score)])},m(o.score)+"% ",3)]))),128))])):(v(),S("div",Rme,e[30]||(e[30]=[a("div",{class:"empty-icon"},"",-1),a("p",{class:"empty-text"},"     ",-1)])))])]),a("div",Nme,[e[39]||(e[39]=a("div",{class:"card-header"},[a("h3",{class:"card-title"},[a("span",{class:"title-icon"},""),se("  ")])],-1)),a("div",Ome,[a("div",Mme,[a("div",Dme,[e[32]||(e[32]=a("div",{class:"analytics-icon"},"",-1)),a("div",$me,[a("div",Ume,m(n.analytics.totalPoints||0),1),e[31]||(e[31]=a("div",{class:"analytics-label"},"",-1))])]),a("div",Fme,[e[34]||(e[34]=a("div",{class:"analytics-icon"},"",-1)),a("div",Vme,[a("div",Bme,m(n.analytics.hintsUsed||0),1),e[33]||(e[33]=a("div",{class:"analytics-label"},"",-1))])]),a("div",qme,[e[36]||(e[36]=a("div",{class:"analytics-icon"},"",-1)),a("div",jme,[a("div",Hme,m(i.getStreakDays()),1),e[35]||(e[35]=a("div",{class:"analytics-label"}," ",-1))])]),a("div",Wme,[e[38]||(e[38]=a("div",{class:"analytics-icon"},"",-1)),a("div",zme,[a("div",Gme,m(i.getAverageTime()),1),e[37]||(e[37]=a("div",{class:"analytics-label"}," ",-1))])])])])])])]),a("section",Kme,[a("div",Yme,[a("button",{class:ge(["action-button primary",{saved:n.diarySaved,saving:n.saving}]),onClick:e[1]||(e[1]=(...o)=>i.saveDiary&&i.saveDiary(...o)),disabled:n.diarySaved||n.saving},[a("span",Xme,m(n.saving?"":n.diarySaved?"":""),1),a("span",Jme,m(n.saving?"...":n.diarySaved?"!":" "),1)],10,Qme),a("button",{class:"action-button secondary",onClick:e[2]||(e[2]=(...o)=>i.exportDiary&&i.exportDiary(...o))},e[40]||(e[40]=[a("span",{class:"button-icon"},"",-1),a("span",{class:"button-text"},"",-1)]))]),n.saveMessage?(v(),S("div",{key:0,class:ge(["save-message",n.saveMessageType])},[a("div",Zme,m(n.saveMessageType==="success"?"":n.saveMessageType==="error"?"":""),1),a("span",ege,m(n.saveMessage),1)],2)):G("",!0)]),i.recentDiaryLogs.length>0?(v(),S("section",tge,[a("div",sge,[e[41]||(e[41]=a("h2",{class:"section-title"},[a("span",{class:"title-icon"},""),se("   ")],-1)),a("div",rge,m(i.recentDiaryLogs.length)+"  ",1)]),a("div",nge,[(v(!0),S(he,null,be(i.recentDiaryLogs,(o,l)=>{var c,u,d,f,p,g,b;return v(),S("div",{key:o.date,class:ge(["timeline-item",{latest:l===0}])},[a("div",ige,[e[42]||(e[42]=a("div",{class:"marker-dot"},null,-1)),l<i.recentDiaryLogs.length-1?(v(),S("div",oge)):G("",!0)]),a("div",age,[a("div",lge,[a("h4",cge,m(i.formatDate(o.date)),1),a("div",uge,[o.studyMinutes>60?(v(),S("span",dge," ")):G("",!0),((c=o.completedTopics)==null?void 0:c.length)>3?(v(),S("span",hge,"")):G("",!0)])]),a("div",fge,[a("div",pge,[e[43]||(e[43]=a("span",{class:"stat-icon"},"",-1)),a("span",mge,m(o.studyMinutes)+" ",1)]),(u=o.completedTopics)!=null&&u.length?(v(),S("div",gge,[e[44]||(e[44]=a("span",{class:"stat-icon"},"",-1)),a("span",yge,m(o.completedTopics.length)+" ",1)])):G("",!0),(d=o.gradesToday)!=null&&d.length?(v(),S("div",vge,[e[45]||(e[45]=a("span",{class:"stat-icon"},"",-1)),a("span",_ge,m(o.gradesToday.length)+" ",1)])):G("",!0)]),(f=o.completedTopics)!=null&&f.length||(p=o.gradesToday)!=null&&p.length?(v(),S("div",bge,[(g=o.completedTopics)!=null&&g.length?(v(),S("div",wge,[e[46]||(e[46]=a("h5",{class:"details-title"}," :",-1)),a("div",Sge,[(v(!0),S(he,null,be(o.completedTopics.slice(0,3),k=>(v(),S("span",{key:k,class:"topic-tag"},m(k),1))),128)),o.completedTopics.length>3?(v(),S("span",Ege," +"+m(o.completedTopics.length-3),1)):G("",!0)])])):G("",!0),(b=o.gradesToday)!=null&&b.length?(v(),S("div",Tge,[e[47]||(e[47]=a("h5",{class:"details-title"},":",-1)),a("div",kge,[(v(!0),S(he,null,be(o.gradesToday.slice(0,3),k=>(v(),S("div",{key:k.topic,class:"grade-item"},[a("span",Ige,m(k.subject),1),a("span",{class:ge(["grade-score",i.getGradeClass(k.score)])},m(k.score)+"% ",3)]))),128))])])):G("",!0)])):G("",!0)])],2)}),128))])])):G("",!0)])),n.toastMessage?(v(),S("div",{key:3,class:ge(["toast",n.toastType])},[a("div",Cge,m(n.toastType==="success"?"":n.toastType==="error"?"":""),1),a("span",Age,m(n.toastMessage),1),a("button",{onClick:e[3]||(e[3]=o=>n.toastMessage=""),class:"toast-close"},"")],2)):G("",!0)])}const xge=Je(kpe,[["render",Pge],["__scopeId","data-v-aeeaee05"]]),Lge={name:"TestsPage",setup(){const t=Se(!0),e=Se([]),s=Se(null),r=Se([]),n=Se(0),i=Se(""),o=Se(""),l=Se(""),c=Se(null),u=oe(()=>[...new Set(e.value.map(P=>P.subject).filter(Boolean))].sort()),d=oe(()=>[...new Set(e.value.map(P=>P.level).filter(Boolean))].sort((P,O)=>P-O)),f=oe(()=>e.value.filter(P=>{var fe;const O=!o.value||P.subject===o.value,M=!l.value||P.level==l.value,ae=!i.value||((fe=P.title)==null?void 0:fe.toLowerCase().includes(i.value.toLowerCase()));return O&&M&&ae})),p=oe(()=>{var P;return(P=s.value)!=null&&P.questions?s.value.questions[n.value]:null}),g=oe(()=>{var P,O;return Math.round((n.value+1)/(((O=(P=s.value)==null?void 0:P.questions)==null?void 0:O.length)||1)*100)}),b=oe(()=>{var P,O;return n.value===(((O=(P=s.value)==null?void 0:P.questions)==null?void 0:O.length)||0)-1}),k=oe(()=>{var P;return s.value&&n.value>=((P=s.value.questions)==null?void 0:P.length)}),L=oe(()=>{var P;return(P=s.value)!=null&&P.questions?s.value.questions.reduce((O,M,ae)=>{const fe=r.value[ae],de=x(M,fe);return O+(de?1:0)},0):0}),V=oe(()=>{var P,O;return(O=(P=s.value)==null?void 0:P.questions)!=null&&O.length?Math.round(L.value/s.value.questions.length*100):0}),R=oe(()=>!!(i.value||o.value||l.value)),E=P=>({Mathematics:"",Math:"",English:"",Language:"",Science:"",Physics:"",Chemistry:"",Biology:"",History:"",Geography:"","Computer Science":"",Programming:"",Art:"",Music:""})[P]||"",N=async()=>{try{t.value=!0;const P=me.currentUser;if(!P)throw new Error("Not authenticated");const O=await P.getIdToken(),M=P.uid;let ae=[];try{const{data:fe}=await ce.get(`/users/${M}/tests`,{headers:{Authorization:`Bearer ${O}`}});ae=(fe==null?void 0:fe.tests)||[]}catch{const{data:fe}=await ce.get("/tests",{headers:{Authorization:`Bearer ${O}`}});ae=Array.isArray((fe==null?void 0:fe.data)||fe)?(fe==null?void 0:fe.data)||fe:[]}e.value=ae.filter(fe=>fe.isActive!==!1)}catch(P){c.value=P.message}finally{t.value=!1}},D=async P=>{var O;if(P)try{t.value=!0;const M=me.currentUser;if(!M)throw new Error("Not authenticated");const ae=await M.getIdToken(),fe=M.uid;let de;try{const{data:Z}=await ce.get(`/users/${fe}/tests/${P._id}`,{headers:{Authorization:`Bearer ${ae}`}});de=(Z==null?void 0:Z.test)||(Z==null?void 0:Z.data)||Z}catch{const{data:Z}=await ce.get(`/tests/${P._id}`,{headers:{Authorization:`Bearer ${ae}`}});de=(Z==null?void 0:Z.data)||Z}if(!((O=de==null?void 0:de.questions)!=null&&O.length))throw new Error("No questions");s.value={...de,questions:de.questions.map(Z=>({...Z,text:Z.text||Z.question,type:Z.type||"multiple-choice",options:Z.options||[],correctAnswer:Z.correctAnswer}))},r.value=Array(s.value.questions.length).fill(""),n.value=0}catch(M){c.value=M.message,s.value=null}finally{t.value=!1}},U=()=>{const P=r.value[n.value];!P||P.trim()===""||(n.value+1<s.value.questions.length?n.value++:$a(()=>C()))},C=async()=>{try{const P=me.currentUser;if(!P)return;const O=await P.getIdToken(),M=r.value.map((ae,fe)=>({questionIndex:fe,answer:ae}));try{await ce.post(`/users/${P.uid}/tests/${s.value._id}/submit`,{answers:M},{headers:{Authorization:`Bearer ${O}`}})}catch{await ce.post(`/tests/${s.value._id}/submit`,{userId:P.uid,answers:M},{headers:{Authorization:`Bearer ${O}`}})}n.value=s.value.questions.length}catch(P){console.error(P)}},w=()=>{s.value=null,r.value=[],n.value=0},_=()=>{o.value="",l.value="",i.value=""},x=(P,O)=>{var ae;if(!O)return!1;const M=P.correctAnswer;return P.type==="multiple-choice"&&Array.isArray(P.options)?typeof M=="number"?O===(((ae=P.options[M])==null?void 0:ae.text)||P.options[M]):O===M:O.toString().toLowerCase().trim()===M.toString().toLowerCase().trim()};return br(()=>N()),Rc(()=>{s.value=null,r.value=[]}),{loading:t,tests:e,activeTest:s,userAnswers:r,currentQuestionIndex:n,searchQuery:i,selectedSubject:o,selectedLevel:l,error:c,uniqueSubjects:u,uniqueLevels:d,filteredTests:f,currentQuestion:p,progressPercentage:g,isLastQuestion:b,isTestCompleted:k,correctCount:L,score:V,hasActiveFilters:R,getSubjectEmoji:E,handleStartTest:D,handleNextQuestion:U,handleGoBack:w,clearFilters:_}}},Rge={class:"min-h-screen bg-white"},Nge={class:"max-w-6xl mx-auto px-6 pt-8 pb-6"},Oge={class:"flex items-center justify-between"},Mge={class:"flex items-center gap-4"},Dge={class:"text-slate-500 text-sm"},$ge={class:"hidden md:flex items-center gap-3"},Uge={class:"px-4 py-2 rounded-full bg-blue-50 text-blue-600 text-sm font-medium"},Fge={class:"px-4 py-2 rounded-full bg-purple-50 text-purple-600 text-sm font-medium"},Vge={key:0,class:"max-w-6xl mx-auto px-6 pb-6"},Bge={class:"flex flex-wrap items-center gap-3"},qge={class:"relative flex-1 min-w-64"},jge=["value"],Hge=["value"],Wge={key:1,class:"flex flex-col items-center justify-center py-24"},zge={key:2,class:"max-w-6xl mx-auto px-6 pb-12"},Gge={key:0,class:"text-center py-24"},Kge={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Yge=["onClick"],Qge={class:"flex items-start justify-between mb-4"},Xge={class:"flex items-center gap-2"},Jge={class:"text-lg"},Zge={class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},eye={class:"px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-xs font-medium"},tye={class:"font-semibold text-slate-800 mb-3 line-clamp-2 group-hover:text-indigo-600 transition-colors"},sye={class:"flex items-center gap-4 text-xs text-slate-500"},rye={class:"flex items-center gap-1"},nye={key:0,class:"flex items-center gap-1"},iye={key:3,class:"max-w-2xl mx-auto px-6 py-8"},oye={class:"mb-8"},aye={class:"flex items-center justify-between mb-2"},lye={class:"text-sm font-medium text-slate-600"},cye={class:"text-sm font-medium text-indigo-500"},uye={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},dye={class:"bg-white rounded-2xl border border-gray-100 p-6 mb-6"},hye={class:"text-lg font-semibold text-slate-800 mb-6"},fye={key:0,class:"space-y-3"},pye=["value"],mye={key:0,class:"w-2.5 h-2.5 rounded-full bg-indigo-500"},gye={class:"text-slate-700"},yye={key:1},vye={class:"flex justify-end"},_ye=["disabled"],bye={key:4,class:"max-w-md mx-auto px-6 py-16 text-center"},wye={class:"text-6xl mb-6"},Sye={class:"text-2xl font-bold text-slate-800 mb-2"},Eye={class:"text-slate-500 mb-8"},Tye={class:"relative w-32 h-32 mx-auto mb-8"},kye={class:"transform -rotate-90 w-full h-full"},Iye={class:"absolute inset-0 flex items-center justify-center"},Cye={class:"text-3xl font-bold text-slate-800"},Aye={class:"flex justify-center gap-6 mb-8"},Pye={class:"text-center"},xye={class:"text-2xl font-bold text-green-500"},Lye={class:"text-center"},Rye={class:"text-2xl font-bold text-slate-800"};function Nye(t,e,s,r,n,i){return v(),S("div",Rge,[a("div",Nge,[a("div",Oge,[a("div",Mge,[e[9]||(e[9]=a("div",{class:"w-12 h-12 rounded-2xl bg-indigo-50 flex items-center justify-center"},[a("span",{class:"text-2xl"},"")],-1)),a("div",null,[e[8]||(e[8]=a("h1",{class:"text-2xl font-bold text-slate-800"},"Tests",-1)),a("p",Dge,m(r.filteredTests.length)+" available",1)])]),a("div",$ge,[a("div",Uge,"  "+m(r.uniqueSubjects.length)+" subjects ",1),a("div",Fge,"  "+m(r.uniqueLevels.length)+" levels ",1)])])]),r.activeTest?G("",!0):(v(),S("div",Vge,[a("div",Bge,[a("div",qge,[Pe(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.searchQuery=o),type:"text",class:"w-full px-4 py-2.5 pl-10 rounded-xl border border-gray-200 text-sm focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 transition-all",placeholder:"Search tests..."},null,512),[[Ke,r.searchQuery]]),e[10]||(e[10]=a("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"})],-1))]),Pe(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.selectedSubject=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[e[11]||(e[11]=a("option",{value:""},"All Subjects",-1)),(v(!0),S(he,null,be(r.uniqueSubjects,o=>(v(),S("option",{key:o,value:o},m(o),9,jge))),128))],512),[[Js,r.selectedSubject]]),Pe(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.selectedLevel=o),class:"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-600 bg-white focus:outline-none focus:border-indigo-400 cursor-pointer hover:border-gray-300 transition-all"},[e[12]||(e[12]=a("option",{value:""},"All Levels",-1)),(v(!0),S(he,null,be(r.uniqueLevels,o=>(v(),S("option",{key:o,value:o},"Level "+m(o),9,Hge))),128))],512),[[Js,r.selectedLevel]]),r.hasActiveFilters?(v(),S("button",{key:0,onClick:e[3]||(e[3]=(...o)=>r.clearFilters&&r.clearFilters(...o)),class:"px-4 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 transition-all"}," Clear ")):G("",!0)])])),r.loading?(v(),S("div",Wge,e[13]||(e[13]=[a("div",{class:"w-8 h-8 border-2 border-indigo-200 border-t-indigo-500 rounded-full animate-spin"},null,-1),a("p",{class:"mt-4 text-slate-500 text-sm"},"Loading...",-1)]))):r.activeTest?r.isTestCompleted?(v(),S("div",bye,[a("div",wye,m(r.score>=70?"":r.score>=50?"":""),1),a("h2",Sye,m(r.score>=70?"Great job!":r.score>=50?"Good effort!":"Keep practicing!"),1),a("p",Eye,"You scored "+m(r.score)+"% on this test",1),a("div",Tye,[(v(),S("svg",kye,[e[19]||(e[19]=a("circle",{class:"text-gray-100","stroke-width":"8",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64"},null,-1)),a("circle",{class:ge(["transition-all duration-1000 ease-out",r.score>=70?"text-green-500":r.score>=50?"text-amber-500":"text-red-400"]),"stroke-width":"8","stroke-linecap":"round",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64",style:rt({strokeDasharray:352,strokeDashoffset:352-r.score/100*352})},null,6)])),a("div",Iye,[a("span",Cye,m(r.score)+"%",1)])]),a("div",Aye,[a("div",Pye,[a("div",xye,m(r.correctCount),1),e[20]||(e[20]=a("div",{class:"text-xs text-slate-500"},"Correct",-1))]),a("div",Lye,[a("div",Rye,m(r.activeTest.questions.length),1),e[21]||(e[21]=a("div",{class:"text-xs text-slate-500"},"Total",-1))])]),a("button",{onClick:e[7]||(e[7]=(...o)=>r.handleGoBack&&r.handleGoBack(...o)),class:"px-6 py-3 bg-slate-800 text-white font-medium rounded-xl hover:bg-slate-900 transition-all"}," Back to Tests ")])):(v(),S("div",iye,[a("div",oye,[a("div",aye,[a("span",lye,"Question "+m(r.currentQuestionIndex+1)+" of "+m(r.activeTest.questions.length),1),a("span",cye,m(Math.round(r.progressPercentage))+"%",1)]),a("div",uye,[a("div",{class:"h-full bg-indigo-500 rounded-full transition-all duration-500 ease-out",style:rt({width:`${r.progressPercentage}%`})},null,4)])]),a("div",dye,[a("h2",hye,m(r.currentQuestion.text||r.currentQuestion.question),1),r.currentQuestion.type==="multiple-choice"||r.currentQuestion.options?(v(),S("div",fye,[(v(!0),S(he,null,be(r.currentQuestion.options||["true","false"],(o,l)=>(v(),S("label",{key:l,class:ge(["flex items-center p-4 rounded-xl border cursor-pointer transition-all hover:border-indigo-200 hover:bg-indigo-50/30",r.userAnswers[r.currentQuestionIndex]===(o.text||o)?"border-indigo-400 bg-indigo-50":"border-gray-200"])},[Pe(a("input",{type:"radio",value:o.text||o,"onUpdate:modelValue":e[4]||(e[4]=c=>r.userAnswers[r.currentQuestionIndex]=c),class:"sr-only"},null,8,pye),[[wn,r.userAnswers[r.currentQuestionIndex]]]),a("div",{class:ge(["w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center transition-colors",r.userAnswers[r.currentQuestionIndex]===(o.text||o)?"border-indigo-500":"border-gray-300"])},[r.userAnswers[r.currentQuestionIndex]===(o.text||o)?(v(),S("div",mye)):G("",!0)],2),a("span",gye,m(o.text||o),1)],2))),128))])):(v(),S("div",yye,[Pe(a("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.userAnswers[r.currentQuestionIndex]=o),class:"w-full p-4 rounded-xl border border-gray-200 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 outline-none transition-all text-slate-700 resize-none",placeholder:"Type your answer...",rows:"4"},null,512),[[Ke,r.userAnswers[r.currentQuestionIndex]]])]))]),a("div",vye,[a("button",{onClick:e[6]||(e[6]=(...o)=>r.handleNextQuestion&&r.handleNextQuestion(...o)),disabled:!r.userAnswers[r.currentQuestionIndex]||r.userAnswers[r.currentQuestionIndex].trim()==="",class:"px-6 py-3 bg-indigo-500 text-white font-medium rounded-xl hover:bg-indigo-600 disabled:opacity-40 disabled:cursor-not-allowed transition-all flex items-center gap-2"},[se(m(r.isLastQuestion?"Finish":"Next")+" ",1),e[18]||(e[18]=a("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))],8,_ye)])])):(v(),S("div",zge,[r.filteredTests.length===0?(v(),S("div",Gge,e[14]||(e[14]=[a("div",{class:"text-6xl mb-4"},"",-1),a("h3",{class:"text-lg font-semibold text-slate-800 mb-2"},"No tests found",-1),a("p",{class:"text-slate-500 text-sm"},"Try adjusting your filters",-1)]))):(v(),S("div",Kge,[(v(!0),S(he,null,be(r.filteredTests,o=>{var l;return v(),S("article",{key:o._id,onClick:c=>r.handleStartTest(o),class:"group p-5 rounded-2xl border border-gray-100 hover:border-indigo-200 hover:scale-[1.02] transition-all duration-200 cursor-pointer bg-white"},[a("div",Qge,[a("div",Xge,[a("span",Jge,m(r.getSubjectEmoji(o.subject)),1),a("span",Zge,m(o.subject||"General"),1)]),a("span",eye," Lvl "+m(o.level||1),1)]),a("h3",tye,m(o.title),1),a("div",sye,[a("span",rye,[e[15]||(e[15]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),se(" "+m(((l=o.questions)==null?void 0:l.length)||0)+" questions ",1)]),o.duration?(v(),S("span",nye,[e[16]||(e[16]=a("svg",{class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})],-1)),se(" "+m(o.duration)+"m ",1)])):G("",!0)]),e[17]||(e[17]=a("div",{class:"mt-4 pt-4 border-t border-gray-50 flex justify-end"},[a("span",{class:"text-sm font-medium text-indigo-500 group-hover:text-indigo-600 flex items-center gap-1"},[se(" Start "),a("svg",{class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})])])],-1))],8,Yge)}),128))]))]))])}const Oye=Je(Lge,[["render",Nye],["__scopeId","data-v-52c804aa"]]),Mye={name:"UniversalCheckout",props:{plan:{type:String,default:""},provider:{type:String,default:"multicard"},userId:{type:String,default:""},userName:{type:String,default:""},userEmail:{type:String,default:""},currentPlan:{type:String,default:"free"},amount:{type:[String,Number],default:0}},data(){return{loading:!1,processing:!1,error:"",paymentStatus:null,transactionId:null,failureReason:"",showOtpModal:!1,otpDigits:["","","","","",""],otpInputs:[],otpError:null,currentPaymentUuid:null,internalUserId:"",internalUserName:"",internalUserEmail:"",selectedDuration:3,selectedPlan:"pro",paymentProvider:"multicard",selectedCardToken:null,savedCards:[],selectedLanguage:"en",loadingMessage:"Processing your payment...",providers:{multicard:{name:"Bank Card",description:"Visa, Mastercard, UzCard, Humo",emoji:"",enabled:!0},payme:{name:"Payme",description:"Pay with Payme app",emoji:"",enabled:!0},click:{name:"Click",description:"Pay with Click app",emoji:"",enabled:!1}},promoCodeInput:"",promoApplying:!1,promoApplied:!1,promoError:!1,promoMessage:"",promoData:null,showDebugInfo:!1}},computed:{finalPlan(){return this.plan||this.selectedPlan||""},finalUserId(){var t;return this.internalUserId||this.userId||this.$route.query.userId||((t=me.currentUser)==null?void 0:t.uid)||""},finalUserName(){var t;return this.internalUserName||this.userName||this.$route.query.userName||((t=me.currentUser)==null?void 0:t.displayName)||"User"},finalUserEmail(){var t;return this.internalUserEmail||this.userEmail||this.$route.query.userEmail||((t=me.currentUser)==null?void 0:t.email)||""},finalAmount(){if(this.promoApplied&&this.promoData)return 0;let t=parseInt(this.amount)||0;if(t>0)return t;const e={1:25e6,3:675e5,6:12e7};return e[this.selectedDuration]||e[3]},planName(){if(this.promoApplied&&this.promoData){const t=this.promoData.subscriptionDays||30;let e=this.promoData.durationText||(t<=31?"1 Month":t<=95?"3 Months":t<=185?"6 Months":`${t} Days`);return`${(this.promoData.grantsPlan||"Pro").toUpperCase()} Plan (via Promocode - ${e})`}return this.selectedDuration===1?"Pro Plan (1 Month)":this.selectedDuration===3?"Pro Plan (3 Months)":"Pro Plan (6 Months)"},canProceedToPayment(){var t;return this.promoApplied&&this.promoData?!!this.finalUserId:!!(this.finalUserId&&this.finalPlan&&this.finalAmount>0&&((t=this.providers[this.paymentProvider])!=null&&t.enabled))},validationMessage(){var t;return this.finalUserId?this.finalPlan?!this.finalAmount||this.finalAmount<=0?"Invalid payment amount":(t=this.providers[this.paymentProvider])!=null&&t.enabled?"Complete all required fields":"Please select an available payment method":"Please select a plan":"User ID not specified"},otp(){return this.otpDigits.join("")}},created(){this.$route.query.duration&&(this.selectedDuration=parseInt(this.$route.query.duration)||3),this.$route.query.plan&&(this.selectedPlan=this.$route.query.plan),this.$route.query.promoCode&&(this.promoCodeInput=this.$route.query.promoCode)},async mounted(){this.loadPaymentData(),this.validatePaymentData(),this.promoCodeInput&&await this.validatePromoCodeOnLoad()},methods:{loadSavedCards(){this.savedCards=[]},selectCard(t){this.selectedCardToken=t},getCardTypeName(t){return{"01":"UzCard","02":"Humo","03":"Visa","04":"Mastercard"}[t]||"Card"},loadPaymentData(){me.currentUser&&(this.internalUserId||(this.internalUserId=me.currentUser.uid),this.internalUserName||(this.internalUserName=me.currentUser.displayName||""),this.internalUserEmail||(this.internalUserEmail=me.currentUser.email||"")),!this.selectedPlan&&this.$route.params.plan&&(this.selectedPlan=this.$route.params.plan),this.selectedPlan||(this.selectedPlan="pro")},validatePaymentData(){return this.finalUserId?this.finalPlan?!0:(this.error="Please select a plan.",!1):(this.error="User authentication required.",!1)},handlePromoCodeInput(){this.promoApplied=!1,this.promoError=!1,this.promoMessage="",this.promoData=null},async validatePromoCodeOnLoad(){var t;if(this.promoCodeInput)try{const e=await ug(this.promoCodeInput.toUpperCase());e!=null&&e.valid&&(this.promoData=e.data,this.promoMessage=`Valid! ${(((t=e.data)==null?void 0:t.grantsPlan)||"Pro").toUpperCase()} Plan`)}catch(e){console.error("Error validating promo on load:",e)}},async applyPromoCode(){var t;if(!(!this.promoCodeInput||this.promoApplying)){this.promoApplying=!0,this.promoError=!1,this.promoMessage="";try{const e=await ug(this.promoCodeInput.toUpperCase());e!=null&&e.valid?(this.promoApplied=!0,this.promoData=e.data,this.promoMessage=`Promo code applied! ${(((t=e.data)==null?void 0:t.grantsPlan)||"Pro").toUpperCase()} Plan`):(this.promoError=!0,this.promoMessage=(e==null?void 0:e.error)||"Invalid promo code")}catch{this.promoError=!0,this.promoMessage="Error validating promo code."}finally{this.promoApplying=!1}}},async processPayment(){var t;if(!(!this.canProceedToPayment||this.processing)){this.processing=!0,this.error="";try{if(this.promoApplied&&this.promoData){const e=await cP(this.promoCodeInput.toUpperCase());if(e.success){localStorage.setItem("userStatus",e.plan||this.promoData.grantsPlan||"pro"),e.expiryDate&&localStorage.setItem("subscriptionExpiry",e.expiryDate),(t=this.$store)!=null&&t.dispatch&&(await this.$store.dispatch("user/loadUserStatus"),this.$store.commit("user/FORCE_UPDATE")),window.dispatchEvent(new CustomEvent("userStatusChanged",{detail:{source:"promocode"}})),this.handlePaymentSuccess({transactionId:"PROMO-"+Date.now(),plan:e.plan});return}else throw new Error(e.error||"Failed to apply promo code")}if(this.paymentProvider==="payme")await this.processPaymePayment();else if(this.paymentProvider==="multicard")await this.processMulticardPayment();else throw new Error("Please select a valid payment method")}catch(e){this.error=e.message||"An error occurred",this.processing=!1}}},async processPaymePayment(){var s;const t={userId:this.finalUserId,userName:this.finalUserName,userEmail:this.finalUserEmail,plan:this.finalPlan,amount:this.finalAmount,duration:this.selectedDuration,lang:this.selectedLanguage},e=await TP(t);if(e.success&&((s=e.data)!=null&&s.paymentUrl))window.location.href=e.data.paymentUrl;else throw new Error(e.error||"Failed to initiate payment")},async processMulticardPayment(){var s,r,n,i;const t={userId:this.finalUserId,userName:this.finalUserName,userEmail:this.finalUserEmail,plan:this.finalPlan,amount:this.finalAmount,duration:this.selectedDuration,lang:this.selectedLanguage};let e=this.selectedCardToken?await CP(this.selectedCardToken,t):await IP(t);if(e.success)(s=e.data)!=null&&s.paymentUrl||(r=e.data)!=null&&r.checkoutUrl?window.location.href=e.data.paymentUrl||e.data.checkoutUrl:(n=e.data)!=null&&n.requiresOtp?(this.currentPaymentUuid=e.data.uuid,this.showOtpModal=!0):((i=e.data)==null?void 0:i.status)==="success"&&this.handlePaymentSuccess(e.data);else throw new Error(e.error||"Failed to process payment")},handleOtpInput(t,e){e.target.value&&t<5&&this.$nextTick(()=>{var s;(s=this.otpInputs[t+1])==null||s.focus()})},handleOtpBackspace(t,e){!e.target.value&&t>0&&this.$nextTick(()=>{var s;(s=this.otpInputs[t-1])==null||s.focus()})},async submitOtp(){this.processing=!0,this.otpError=null;try{const t=await AP(this.currentPaymentUuid,this.otp);if(t.success&&t.data.status==="success")this.closeOtpModal(),this.handlePaymentSuccess(t.data);else throw new Error(t.error||"Payment not confirmed")}catch(t){this.otpError=t.message||"Invalid verification code"}finally{this.processing=!1}},closeOtpModal(){this.showOtpModal=!1,this.otpDigits=["","","","","",""],this.otpError=null},async handlePaymentSuccess(t){this.paymentStatus="success",this.transactionId=t.uuid||t.transactionId,this.loading=!1,this.processing=!1;try{await this.$store.dispatch("user/loadUserStatus"),this.$store.commit("user/FORCE_UPDATE"),window.dispatchEvent(new CustomEvent("userStatusChanged",{detail:{source:"payment"}})),setTimeout(()=>{this.$router.push("/settings")},3e3)}catch(e){console.error("Failed to update status:",e)}},formatAmount(t){if(!t)return"FREE";const e=Math.floor(t/100);return new Intl.NumberFormat("en-US").format(e)+" sum"},goBack(){this.paymentStatus?this.paymentStatus=null:this.$router.go(-1)},goToDashboard(){this.$router.push("/dashboard")},goToSettings(){this.$router.push("/settings")},goHome(){this.$router.push("/")},retryPayment(){this.error="",this.loading=!1,this.processing=!1,this.paymentStatus=null,this.loadPaymentData()}}},Dye={class:"min-h-screen bg-gradient-to-br from-slate-50 to-indigo-50/30 flex items-center justify-center p-4 md:p-8"},$ye={class:"bg-white rounded-2xl shadow-xl shadow-indigo-500/5 max-w-2xl w-full overflow-hidden"},Uye={key:0,class:"p-8 md:p-12 text-center"},Fye={class:"text-slate-600 mb-8"},Vye={class:"bg-slate-50 rounded-xl p-5 mb-8 text-left space-y-3"},Bye={class:"flex justify-between items-center py-2 border-b border-slate-200"},qye={class:"font-semibold text-slate-900"},jye={class:"flex justify-between items-center py-2 border-b border-slate-200"},Hye={class:"font-semibold text-indigo-600"},Wye={key:0,class:"flex justify-between items-center py-2"},zye={class:"font-mono text-sm text-slate-600"},Gye={class:"flex flex-col sm:flex-row gap-3 justify-center"},Kye={key:1,class:"p-8 md:p-12 text-center"},Yye={class:"text-slate-600 mb-8"},Qye={class:"flex flex-col sm:flex-row gap-3 justify-center"},Xye={key:2,class:"p-8 md:p-12 text-center"},Jye={class:"flex flex-col sm:flex-row gap-3 justify-center"},Zye={key:3,class:"p-8 md:p-12 text-center"},eve={class:"text-xl font-semibold text-slate-900 mb-2"},tve={key:0,class:"bg-slate-50 rounded-xl p-4 text-left space-y-2"},sve={class:"flex justify-between"},rve={class:"text-sm font-medium text-slate-700"},nve={class:"flex justify-between"},ive={class:"text-sm font-medium text-slate-700"},ove={class:"flex justify-between"},ave={class:"text-sm font-medium text-indigo-600"},lve={key:4,class:"p-8 md:p-12 text-center"},cve={class:"text-slate-600 mb-6"},uve={class:"flex flex-col sm:flex-row gap-3 justify-center"},dve={key:5,class:"p-6 md:p-8"},hve={class:"bg-slate-50 rounded-xl p-5 mb-6"},fve={class:"grid grid-cols-2 gap-4 mb-4"},pve={class:"font-semibold text-slate-900 truncate"},mve={class:"font-semibold text-slate-900 truncate"},gve={class:"inline-block px-3 py-1 bg-emerald-100 text-emerald-700 text-sm font-semibold rounded-lg"},yve={key:0},vve={class:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 text-sm font-semibold rounded-lg"},_ve={class:"flex justify-between items-center p-4 bg-white rounded-lg"},bve={class:"text-2xl font-bold text-indigo-600"},wve={class:"mb-6"},Sve={class:"space-y-3"},Eve=["onClick"],Tve={class:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center text-2xl shrink-0"},kve={class:"flex-1 min-w-0"},Ive={class:"font-semibold text-slate-900 block"},Cve={class:"text-sm text-slate-500"},Ave={key:0,class:"text-xs text-amber-600 font-medium block"},Pve={key:0,class:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-white shrink-0"},xve=["value","disabled"],Lve={class:"mb-6"},Rve={class:"grid grid-cols-3 gap-3"},Nve={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-indigo-500 rounded-full flex items-center justify-center text-white text-xs"},Ove={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs"},Mve={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center text-white text-xs"},Dve={class:"mb-6"},$ve={class:"flex gap-2"},Uve={class:"flex-1 relative"},Fve=["disabled"],Vve={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 text-emerald-500"},Bve=["disabled"],qve={key:0,class:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},jve={key:1},Hve={class:"mb-6"},Wve=["disabled"],zve={key:0,class:"inline-flex items-center gap-2"},Gve={key:1},Kve={key:2},Yve={class:"bg-white rounded-2xl p-6 max-w-sm w-full"},Qve={class:"flex justify-between items-center mb-4"},Xve=["disabled"],Jve={class:"flex gap-2 justify-center mb-4"},Zve=["onUpdate:modelValue","onInput","onKeydown"],e0e={key:0,class:"text-red-500 text-sm text-center mb-4"},t0e={class:"flex gap-3"},s0e=["disabled"],r0e=["disabled"];function n0e(t,e,s,r,n,i){var o;return v(),S("div",Dye,[a("div",$ye,[n.paymentStatus==="success"?(v(),S("div",Uye,[e[28]||(e[28]=a("div",{class:"w-20 h-20 mx-auto mb-6 bg-emerald-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-10 h-10 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e[29]||(e[29]=a("h1",{class:"text-2xl font-bold text-slate-900 mb-2"},"Payment Successful!",-1)),a("p",Fye,"Your "+m(i.planName)+" subscription has been activated",1),a("div",Vye,[a("div",Bye,[e[25]||(e[25]=a("span",{class:"text-sm text-slate-500"},"Plan",-1)),a("span",qye,m(i.planName),1)]),a("div",jye,[e[26]||(e[26]=a("span",{class:"text-sm text-slate-500"},"Amount",-1)),a("span",Hye,m(i.formatAmount(i.finalAmount)),1)]),n.transactionId?(v(),S("div",Wye,[e[27]||(e[27]=a("span",{class:"text-sm text-slate-500"},"Transaction ID",-1)),a("span",zye,m(n.transactionId),1)])):G("",!0)]),a("div",Gye,[a("button",{onClick:e[0]||(e[0]=(...l)=>i.goToSettings&&i.goToSettings(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"}," View Subscription "),a("button",{onClick:e[1]||(e[1]=(...l)=>i.goToDashboard&&i.goToDashboard(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"}," Start Learning ")])])):n.paymentStatus==="failed"?(v(),S("div",Kye,[e[30]||(e[30]=a("div",{class:"w-20 h-20 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e[31]||(e[31]=a("h1",{class:"text-2xl font-bold text-slate-900 mb-2"},"Payment Failed",-1)),a("p",Yye,m(n.failureReason||"We couldn't process your payment. Please try again."),1),a("div",Qye,[a("button",{onClick:e[2]||(e[2]=(...l)=>i.retryPayment&&i.retryPayment(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"}," Try Again "),a("button",{onClick:e[3]||(e[3]=(...l)=>i.goBack&&i.goBack(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"}," Change Method ")])])):n.paymentStatus==="cancelled"?(v(),S("div",Xye,[e[32]||(e[32]=at('<div class="w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center"><svg class="w-10 h-10 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><h1 class="text-2xl font-bold text-slate-900 mb-2">Payment Cancelled</h1><p class="text-slate-600 mb-8">You cancelled the payment. Your subscription remains unchanged.</p>',3)),a("div",Jye,[a("button",{onClick:e[4]||(e[4]=(...l)=>i.retryPayment&&i.retryPayment(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"}," Return to Payment "),a("button",{onClick:e[5]||(e[5]=(...l)=>i.goHome&&i.goHome(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"}," Back to Home ")])])):n.loading?(v(),S("div",Zye,[e[36]||(e[36]=a("div",{class:"w-16 h-16 mx-auto mb-6 relative"},[a("div",{class:"absolute inset-0 border-4 border-indigo-200 rounded-full"}),a("div",{class:"absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})],-1)),a("h2",eve,m(n.loadingMessage),1),e[37]||(e[37]=a("p",{class:"text-slate-500 mb-6"},"Please wait while we prepare your payment...",-1)),s.userName?(v(),S("div",tve,[a("div",sve,[e[33]||(e[33]=a("span",{class:"text-sm text-slate-500"},"User",-1)),a("span",rve,m(i.finalUserName),1)]),a("div",nve,[e[34]||(e[34]=a("span",{class:"text-sm text-slate-500"},"Plan",-1)),a("span",ive,m(i.planName),1)]),a("div",ove,[e[35]||(e[35]=a("span",{class:"text-sm text-slate-500"},"Amount",-1)),a("span",ave,m(i.formatAmount(i.finalAmount)),1)])])):G("",!0)])):n.error?(v(),S("div",lve,[e[38]||(e[38]=a("div",{class:"w-20 h-20 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center"},[a("svg",{class:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e[39]||(e[39]=a("h2",{class:"text-xl font-semibold text-slate-900 mb-2"},"Unable to Process Payment",-1)),a("p",cve,m(n.error),1),a("div",uve,[a("button",{onClick:e[6]||(e[6]=(...l)=>i.retryPayment&&i.retryPayment(...l)),class:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"}," Try Again "),a("button",{onClick:e[7]||(e[7]=(...l)=>i.goBack&&i.goBack(...l)),class:"px-6 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"}," Go Back ")])])):(v(),S("div",dve,[e[61]||(e[61]=at('<div class="text-center mb-8 pb-6 border-b border-slate-100"><div class="w-14 h-14 mx-auto mb-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white"><svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg></div><h1 class="text-2xl font-bold text-slate-900 mb-1">Complete Your Payment</h1><p class="text-slate-500">Subscribe to ACED and unlock premium features</p></div>',1)),a("div",hve,[e[45]||(e[45]=a("h3",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4"},"Payment Details",-1)),a("div",fve,[a("div",null,[e[40]||(e[40]=a("span",{class:"text-xs text-slate-500 uppercase"},"Account",-1)),a("p",pve,m(i.finalUserName||"Not specified"),1)]),a("div",null,[e[41]||(e[41]=a("span",{class:"text-xs text-slate-500 uppercase"},"Email",-1)),a("p",mve,m(i.finalUserEmail||"Not specified"),1)]),a("div",null,[e[42]||(e[42]=a("span",{class:"text-xs text-slate-500 uppercase"},"Current Plan",-1)),a("span",gve,m(s.currentPlan||"Free"),1)]),i.finalPlan?(v(),S("div",yve,[e[43]||(e[43]=a("span",{class:"text-xs text-slate-500 uppercase"},"Upgrading To",-1)),a("span",vve,m(i.planName),1)])):G("",!0)]),a("div",_ve,[e[44]||(e[44]=a("span",{class:"text-slate-600"},"Total Amount",-1)),a("span",bve,m(i.formatAmount(i.finalAmount)),1)])]),a("div",wve,[e[47]||(e[47]=a("h3",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4"},"Payment Method",-1)),a("div",Sve,[(v(!0),S(he,null,be(n.providers,(l,c)=>(v(),S("label",{key:c,class:ge(["flex items-center gap-4 p-4 bg-white border-2 rounded-xl cursor-pointer transition-all",n.paymentProvider===c?"border-indigo-500 bg-indigo-50/50":"border-slate-200 hover:border-slate-300",!l.enabled&&"opacity-50 cursor-not-allowed"]),onClick:u=>l.enabled&&(n.paymentProvider=c)},[a("div",Tve,m(l.emoji),1),a("div",kve,[a("span",Ive,m(l.name),1),a("span",Cve,m(l.description),1),l.enabled?G("",!0):(v(),S("span",Ave,"Coming Soon"))]),n.paymentProvider===c&&l.enabled?(v(),S("div",Pve,e[46]||(e[46]=[a("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):G("",!0),Pe(a("input",{type:"radio","onUpdate:modelValue":e[8]||(e[8]=u=>n.paymentProvider=u),value:c,disabled:!l.enabled,class:"hidden"},null,8,xve),[[wn,n.paymentProvider]])],10,Eve))),128))])]),a("div",Lve,[e[55]||(e[55]=a("h3",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2"},[a("svg",{class:"w-4 h-4 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12 6 12 12 16 14"})]),se(" Select Duration ")],-1)),a("div",Rve,[a("label",{class:ge(["relative p-4 border-2 rounded-xl cursor-pointer transition-all text-center",n.selectedDuration===1?"border-indigo-500 bg-indigo-50":"border-slate-200 hover:border-slate-300 bg-white"]),onClick:e[10]||(e[10]=l=>n.selectedDuration=1)},[Pe(a("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=l=>n.selectedDuration=l),value:1,class:"hidden"},null,512),[[wn,n.selectedDuration]]),e[48]||(e[48]=a("span",{class:"block text-xl font-bold text-slate-900"},"1",-1)),e[49]||(e[49]=a("span",{class:"block text-xs text-slate-500 uppercase"},"Month",-1)),e[50]||(e[50]=a("span",{class:"block text-lg font-semibold text-indigo-600 mt-2"},"250,000",-1)),e[51]||(e[51]=a("span",{class:"text-xs text-slate-400"},"UZS",-1)),n.selectedDuration===1?(v(),S("div",Nve,"")):G("",!0)],2),a("label",{class:ge(["relative p-4 border-2 rounded-xl cursor-pointer transition-all text-center",n.selectedDuration===3?"border-purple-500 bg-purple-50":"border-purple-200 hover:border-purple-300 bg-white"]),onClick:e[12]||(e[12]=l=>n.selectedDuration=3)},[e[52]||(e[52]=a("div",{class:"absolute -top-2.5 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-[10px] font-bold rounded-full"},"POPULAR",-1)),Pe(a("input",{type:"radio","onUpdate:modelValue":e[11]||(e[11]=l=>n.selectedDuration=l),value:3,class:"hidden"},null,512),[[wn,n.selectedDuration]]),e[53]||(e[53]=at('<span class="block text-xl font-bold text-slate-900">3</span><span class="block text-xs text-slate-500 uppercase">Months</span><span class="block text-lg font-semibold text-purple-600 mt-2">675,000</span><span class="text-xs text-slate-400">UZS</span><span class="block text-[10px] text-emerald-500 font-medium">Save 10%</span>',5)),n.selectedDuration===3?(v(),S("div",Ove,"")):G("",!0)],2),a("label",{class:ge(["relative p-4 border-2 rounded-xl cursor-pointer transition-all text-center",n.selectedDuration===6?"border-emerald-500 bg-emerald-50":"border-slate-200 hover:border-slate-300 bg-white"]),onClick:e[14]||(e[14]=l=>n.selectedDuration=6)},[Pe(a("input",{type:"radio","onUpdate:modelValue":e[13]||(e[13]=l=>n.selectedDuration=l),value:6,class:"hidden"},null,512),[[wn,n.selectedDuration]]),e[54]||(e[54]=at('<span class="block text-xl font-bold text-slate-900">6</span><span class="block text-xs text-slate-500 uppercase">Months</span><span class="block text-lg font-semibold text-emerald-600 mt-2">1,200,000</span><span class="text-xs text-slate-400">UZS</span><span class="block text-[10px] text-emerald-500 font-medium">Save 20%</span>',5)),n.selectedDuration===6?(v(),S("div",Mve,"")):G("",!0)],2)])]),a("div",Dve,[e[57]||(e[57]=a("h3",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2"},[a("svg",{class:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),a("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]),se(" Have a Promo Code? ")],-1)),a("div",$ve,[a("div",Uve,[Pe(a("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>n.promoCodeInput=l),type:"text",placeholder:"Enter promo code",disabled:n.promoApplying,onInput:e[16]||(e[16]=(...l)=>i.handlePromoCodeInput&&i.handlePromoCodeInput(...l)),onKeyup:e[17]||(e[17]=ya((...l)=>i.applyPromoCode&&i.applyPromoCode(...l),["enter"])),class:ge(["w-full px-4 py-3 border-2 rounded-xl text-sm uppercase tracking-wider font-medium transition-all focus:outline-none focus:ring-2 focus:ring-purple-500",n.promoApplied?"border-emerald-500 bg-emerald-50":n.promoError?"border-red-500 bg-red-50":"border-slate-200"])},null,42,Fve),[[Ke,n.promoCodeInput]]),n.promoApplied?(v(),S("div",Vve,e[56]||(e[56]=[a("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):G("",!0)]),a("button",{onClick:e[18]||(e[18]=(...l)=>i.applyPromoCode&&i.applyPromoCode(...l)),disabled:!n.promoCodeInput||n.promoApplying||n.promoApplied,class:"px-5 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-medium text-sm hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[n.promoApplying?(v(),S("span",qve)):(v(),S("span",jve,"Apply"))],8,Bve)]),n.promoMessage?(v(),S("p",{key:0,class:ge(["mt-2 text-sm font-medium",n.promoError?"text-red-500":"text-emerald-600"])},m(n.promoMessage),3)):G("",!0)]),a("div",Hve,[e[59]||(e[59]=at('<label class="flex items-center gap-2 text-sm text-slate-600 mb-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg> Payment Page Language </label>',1)),Pe(a("select",{"onUpdate:modelValue":e[19]||(e[19]=l=>n.selectedLanguage=l),class:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"},e[58]||(e[58]=[a("option",{value:"en"}," English",-1),a("option",{value:"ru"}," ",-1),a("option",{value:"uz"}," O'zbek",-1)]),512),[[Js,n.selectedLanguage]])]),a("button",{onClick:e[20]||(e[20]=(...l)=>i.processPayment&&i.processPayment(...l)),disabled:!i.canProceedToPayment||n.processing,class:"w-full py-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold text-lg rounded-xl hover:shadow-xl hover:shadow-indigo-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none"},[n.processing?(v(),S("span",zve,e[60]||(e[60]=[a("span",{class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),se(" Processing... ")]))):(o=n.providers[n.paymentProvider])!=null&&o.enabled&&i.canProceedToPayment?(v(),S("span",Gve," Continue to Payment  "+m(i.formatAmount(i.finalAmount)),1)):(v(),S("span",Kve,m(i.validationMessage),1))],8,Wve),e[62]||(e[62]=a("div",{class:"flex items-center justify-center gap-2 mt-4 text-slate-400 text-sm"},[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]),a("span",null,"Secure Payment  Encrypted & Protected")],-1))])),n.showOtpModal?(v(),S("div",{key:6,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e[24]||(e[24]=vt((...l)=>i.closeOtpModal&&i.closeOtpModal(...l),["self"]))},[a("div",Yve,[a("div",Qve,[e[63]||(e[63]=a("h3",{class:"text-lg font-bold text-slate-900"},"Verify Payment",-1)),a("button",{onClick:e[21]||(e[21]=(...l)=>i.closeOtpModal&&i.closeOtpModal(...l)),disabled:n.processing,class:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600"},"",8,Xve)]),e[64]||(e[64]=a("p",{class:"text-slate-600 text-sm mb-6"},"Enter the 6-digit code sent to your phone",-1)),a("div",Jve,[(v(!0),S(he,null,be(n.otpDigits,(l,c)=>Pe((v(),S("input",{key:c,"onUpdate:modelValue":u=>n.otpDigits[c]=u,type:"text",inputmode:"numeric",maxlength:"1",class:"w-12 h-14 text-center text-xl font-bold border-2 border-slate-200 rounded-xl focus:border-indigo-500 focus:outline-none",onInput:u=>i.handleOtpInput(c,u),onKeydown:ya(u=>i.handleOtpBackspace(c,u),["backspace"]),ref_for:!0,ref:u=>{u&&(n.otpInputs[c]=u)}},null,40,Zve)),[[Ke,n.otpDigits[c]]])),128))]),n.otpError?(v(),S("p",e0e,m(n.otpError),1)):G("",!0),a("div",t0e,[a("button",{onClick:e[22]||(e[22]=(...l)=>i.closeOtpModal&&i.closeOtpModal(...l)),disabled:n.processing,class:"flex-1 py-3 border-2 border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-all"},"Cancel",8,s0e),a("button",{onClick:e[23]||(e[23]=(...l)=>i.submitOtp&&i.submitOtp(...l)),disabled:n.processing||i.otp.length<6,class:"flex-1 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all disabled:opacity-50"},m(n.processing?"Verifying...":"Confirm"),9,r0e)])])])):G("",!0)])])}const qp=Je(Mye,[["render",n0e]]),i0e={name:"PaymentFailed",props:{transactionData:{type:Object,default:()=>({})},errorData:{type:Object,default:()=>({})}},data(){return{transactionId:"",error:"",source:""}},computed:{errorMessage(){var t,e,s,r;return(t=this.error)!=null&&t.toLowerCase().includes("insufficient")?"   .     .":(e=this.error)!=null&&e.toLowerCase().includes("blocked")?" .      .":(s=this.error)!=null&&s.toLowerCase().includes("expired")?"  .    .":(r=this.error)!=null&&r.toLowerCase().includes("cancelled")?"   .":this.error?this.error:null}},mounted(){this.loadPaymentData()},methods:{loadPaymentData(){var t,e,s;if((t=this.transactionData)!=null&&t.id&&(this.transactionId=this.transactionData.id),(e=this.errorData)!=null&&e.message&&(this.error=this.errorData.message),(s=this.errorData)!=null&&s.source&&(this.source=this.errorData.source),!this.transactionId||!this.error){const r=new URLSearchParams(window.location.search);this.transactionId=this.transactionId||r.get("transaction")||"",this.error=this.error||r.get("error")||"",this.source=this.source||r.get("source")||""}},formatDate(t){return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},tryAgain(){this.$router.push({name:"SettingsPage"})},goToSettings(){this.$router.push({name:"SettingsPage"})},goHome(){this.$router.push({name:"HomePage"})}}},o0e={class:"payment-failed"},a0e={class:"failed-container"},l0e={class:"failed-message"},c0e={key:0,class:"transaction-details"},u0e={class:"detail-row"},d0e={key:0,class:"detail-row"},h0e={class:"error-text"},f0e={class:"detail-row"},p0e={class:"actions"};function m0e(t,e,s,r,n,i){return v(),S("div",o0e,[a("div",a0e,[e[7]||(e[7]=a("div",{class:"failed-icon"},"",-1)),e[8]||(e[8]=a("h1",null,"  ",-1)),a("p",l0e,m(i.errorMessage||"    .   ."),1),n.transactionId?(v(),S("div",c0e,[e[6]||(e[6]=a("h3",null,"  ",-1)),a("div",u0e,[e[3]||(e[3]=a("span",null,"ID :",-1)),a("code",null,m(n.transactionId),1)]),n.error?(v(),S("div",d0e,[e[4]||(e[4]=a("span",null,":",-1)),a("span",h0e,m(n.error),1)])):G("",!0),a("div",f0e,[e[5]||(e[5]=a("span",null,":",-1)),a("span",null,m(i.formatDate(new Date)),1)])])):G("",!0),e[9]||(e[9]=a("div",{class:"common-issues"},[a("h3",null,"  :"),a("ul",null,[a("li",null,"   "),a("li",null,"  "),a("li",null,"   "),a("li",null,"  -"),a("li",null,"   ")])],-1)),a("div",p0e,[a("button",{onClick:e[0]||(e[0]=(...o)=>i.tryAgain&&i.tryAgain(...o)),class:"primary-btn"},"    "),a("button",{onClick:e[1]||(e[1]=(...o)=>i.goToSettings&&i.goToSettings(...o)),class:"secondary-btn"},"     "),a("button",{onClick:e[2]||(e[2]=(...o)=>i.goHome&&i.goHome(...o)),class:"tertiary-btn"},"    ")]),e[10]||(e[10]=at('<div class="help-section" data-v-22c025b5><h3 data-v-22c025b5>  ?</h3><p data-v-22c025b5>  ,    :</p><div class="contact-info" data-v-22c025b5><a href="mailto:support@aced.live" class="contact-link" data-v-22c025b5>  support@aced.live </a><a href="https://t.me/aced_live" target="_blank" class="contact-link" data-v-22c025b5>  @aced_live  Telegram </a></div></div><div class="alternative-methods" data-v-22c025b5><h3 data-v-22c025b5>   </h3><p data-v-22c025b5>     :</p><ul data-v-22c025b5><li data-v-22c025b5> </li><li data-v-22c025b5>  </li><li data-v-22c025b5>  </li></ul></div>',2))])])}const kw=Je(i0e,[["render",m0e],["__scopeId","data-v-22c025b5"]]),g0e={name:"PaymentSuccessModal",props:{visible:{type:Boolean,default:!1},transactionData:{type:Object,default:()=>({})},plan:{type:String,default:""}},emits:["close","go-to-courses","go-to-profile"],computed:{planName(){var s;const t=this.plan||((s=this.transactionData)==null?void 0:s.plan)||"";return{start:"Start",pro:"Pro",premium:"Premium"}[t]||"Premium"},unlockedFeatures(){var s;const t=this.plan||((s=this.transactionData)==null?void 0:s.plan)||"start",e={start:["   "," "," ","-"," "],pro:["  Start"," "," "," "," ","  "]};return e[t]||e.start}},watch:{visible(t){t?(this.updateUserStatus(),this.$nextTick(()=>{var e;(e=this.$el)==null||e.focus()}),document.body.style.overflow="hidden"):document.body.style.overflow=""}},mounted(){document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown),document.body.style.overflow=""},methods:{closeModal(){this.$emit("close")},async updateUserStatus(){var t,e;try{if(this.$store.getters["user/isAuthenticated"]){await this.$store.dispatch("user/checkPendingPayments");const s=await this.$store.dispatch("user/loadUserStatus");if(this.$store.commit("user/FORCE_UPDATE"),typeof window<"u"){const r={source:"payment-success",plan:s==null?void 0:s.status,transactionId:((t=this.transactionData)==null?void 0:t.id)||((e=this.transactionData)==null?void 0:e.transactionId),timestamp:Date.now()};window.dispatchEvent(new CustomEvent("userStatusChanged",{detail:r})),window.dispatchEvent(new CustomEvent("subscriptionUpdated",{detail:r}))}}}catch(s){console.error("Failed to update user status:",s)}},formatAmount(t){if(!t)return"";const e=t>1e4?t/100:t;return new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0}).format(e)},formatDate(t){return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},goToCourses(){this.$emit("go-to-courses"),this.closeModal(),this.$router.push({name:"CataloguePage"})},goToProfile(){this.$emit("go-to-profile"),this.closeModal(),this.$router.push({name:"MainPage"})},handleKeydown(t){t.key==="Escape"&&this.visible&&this.closeModal()}}},y0e={class:"modal-content"},v0e={class:"success-content"},_0e={class:"success-message"},b0e={class:"plan-name"},w0e={key:0,class:"transaction-details"},S0e={class:"detail-row"},E0e={key:0,class:"detail-row"},T0e={class:"plan-badge"},k0e={key:1,class:"detail-row"},I0e={class:"amount"},C0e={class:"detail-row"},A0e={class:"features-unlocked"},P0e={class:"features-list"},x0e={class:"modal-actions"};function L0e(t,e,s,r,n,i){return s.visible?(v(),S("div",{key:0,class:"modal-overlay",onClick:e[3]||(e[3]=vt((...o)=>i.closeModal&&i.closeModal(...o),["self"]))},[a("div",y0e,[a("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>i.closeModal&&i.closeModal(...o)),"aria-label":""},e[4]||(e[4]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])),e[18]||(e[18]=at('<div class="success-animation" data-v-d689fd10><div class="checkmark" data-v-d689fd10><svg viewBox="0 0 100 100" data-v-d689fd10><circle cx="50" cy="50" r="45" fill="none" stroke="#10b981" stroke-width="4" class="circle" data-v-d689fd10></circle><path d="M30 50 L45 65 L70 35" fill="none" stroke="#10b981" stroke-width="4" stroke-linecap="round" class="checkmark-path" data-v-d689fd10></path></svg></div></div>',1)),a("div",v0e,[e[16]||(e[16]=a("h1",null,"  !",-1)),a("p",_0e,[e[5]||(e[5]=se("   ")),a("span",b0e,m(i.planName),1),e[6]||(e[6]=se(" !")),e[7]||(e[7]=a("br",null,null,-1)),e[8]||(e[8]=se("        . "))]),s.transactionData?(v(),S("div",w0e,[e[13]||(e[13]=a("h3",null,"  ",-1)),a("div",S0e,[e[9]||(e[9]=a("span",null,":",-1)),a("code",null,m(s.transactionData.id||s.transactionData.transactionId||"N/A"),1)]),s.transactionData.plan||s.plan?(v(),S("div",E0e,[e[10]||(e[10]=a("span",null,":",-1)),a("span",T0e,m(i.planName),1)])):G("",!0),s.transactionData.amount?(v(),S("div",k0e,[e[11]||(e[11]=a("span",null,":",-1)),a("span",I0e,m(i.formatAmount(s.transactionData.amount)),1)])):G("",!0),a("div",C0e,[e[12]||(e[12]=a("span",null,":",-1)),a("span",null,m(i.formatDate(new Date)),1)])])):G("",!0),a("div",A0e,[e[15]||(e[15]=a("h3",null,"   :",-1)),a("ul",P0e,[(v(!0),S(he,null,be(i.unlockedFeatures,o=>(v(),S("li",{key:o},[e[14]||(e[14]=a("span",{class:"check-icon"},"",-1)),se(" "+m(o),1)]))),128))])]),a("div",x0e,[a("button",{onClick:e[1]||(e[1]=(...o)=>i.goToCourses&&i.goToCourses(...o)),class:"primary-btn"},"    "),a("button",{onClick:e[2]||(e[2]=(...o)=>i.goToProfile&&i.goToProfile(...o)),class:"secondary-btn"},"    ")]),e[17]||(e[17]=a("div",{class:"help-section"},[a("p",null,[se("?  : "),a("a",{href:"mailto:support@aced.live"},"support@aced.live")])],-1))])])])):G("",!0)}const R0e=Je(g0e,[["render",L0e],["__scopeId","data-v-d689fd10"]]),N0e={name:"PaymentReturn",data(){return{loading:!0,error:null,pending:!1,transactionId:null,userId:null,retryCount:0,maxRetries:3}},async mounted(){await this.processReturn()},methods:{async processReturn(){try{this.loading=!0,this.error=null,this.pending=!1;const t=new URLSearchParams(window.location.search);if(this.transactionId=t.get("id")||t.get("transaction")||t.get("orderId")||this.$route.query.transaction||this.$route.query.id,this.userId=t.get("userId")||this.$route.query.userId||this.$store.getters["user/getUserId"]||localStorage.getItem("userId"),!this.transactionId){this.error="ID     URL ",this.loading=!1;return}const e=await kP(this.transactionId,this.userId);if(e.success&&e.transaction){const s=e.transaction.state;s===2?this.$router.replace({name:"PaymentSuccess",query:{transaction:this.transactionId,plan:e.transaction.subscription_plan||e.transaction.plan,amount:e.transaction.amount,userId:this.userId}}):s===-1||s===-2?this.$router.replace({name:"PaymentFailed",query:{transaction:this.transactionId,error:s===-1?"cancelled":"refunded",userId:this.userId}}):s===1?(this.pending=!0,this.loading=!1):(this.error=`  : ${s}`,this.loading=!1)}else this.error=e.error||"    ",this.loading=!1}catch(t){this.error=`  : ${t.message}`,this.loading=!1}},async retry(){if(this.retryCount>=this.maxRetries){this.error="   .   .";return}this.retryCount++,await new Promise(t=>setTimeout(t,1e3)),await this.processReturn()},goHome(){const t=this.$route.query.returnTo||"HomePage";this.$router.push({name:t})},contactSupport(){window.open("https://t.me/aced_support","_blank")}}},O0e={class:"payment-return"},M0e={class:"return-container"},D0e={key:0,class:"loading-state"},$0e={key:0,class:"transaction-info"},U0e={key:1,class:"error-state"},F0e={key:0,class:"transaction-details"},V0e={class:"actions"},B0e={key:2,class:"pending-state"},q0e={key:0,class:"transaction-details"},j0e={class:"actions"};function H0e(t,e,s,r,n,i){return v(),S("div",O0e,[a("div",M0e,[n.loading?(v(),S("div",D0e,[e[5]||(e[5]=a("div",{class:"spinner"},null,-1)),e[6]||(e[6]=a("h2",null," ...",-1)),e[7]||(e[7]=a("p",null,", ",-1)),n.transactionId?(v(),S("div",$0e,[a("p",null,[a("small",null,"ID : "+m(n.transactionId),1)])])):G("",!0)])):n.error?(v(),S("div",U0e,[e[9]||(e[9]=a("div",{class:"error-icon"},"",-1)),e[10]||(e[10]=a("h2",null,"  ",-1)),a("p",null,m(n.error),1),n.transactionId?(v(),S("div",F0e,[a("p",null,[e[8]||(e[8]=a("strong",null,"ID :",-1)),se(" "+m(n.transactionId),1)])])):G("",!0),a("div",V0e,[a("button",{onClick:e[0]||(e[0]=(...o)=>i.retry&&i.retry(...o)),class:"retry-btn"}," "),a("button",{onClick:e[1]||(e[1]=(...o)=>i.goHome&&i.goHome(...o)),class:"home-btn"}," "),a("button",{onClick:e[2]||(e[2]=(...o)=>i.contactSupport&&i.contactSupport(...o)),class:"support-btn"},"")])])):n.pending?(v(),S("div",B0e,[e[12]||(e[12]=a("div",{class:"pending-icon"},"",-1)),e[13]||(e[13]=a("h2",null,"  ",-1)),e[14]||(e[14]=a("p",null,"   .     .",-1)),n.transactionId?(v(),S("div",q0e,[a("p",null,[e[11]||(e[11]=a("strong",null,"ID :",-1)),se(" "+m(n.transactionId),1)])])):G("",!0),a("div",j0e,[a("button",{onClick:e[3]||(e[3]=(...o)=>i.retry&&i.retry(...o)),class:"retry-btn"}," "),a("button",{onClick:e[4]||(e[4]=(...o)=>i.goHome&&i.goHome(...o)),class:"home-btn"}," ")])])):G("",!0)])])}const W0e=Je(N0e,[["render",H0e],["__scopeId","data-v-42c6d42b"]]),z0e={name:"PlacementTest",setup(){Mc();const t=Po(),e=Se("subject-select"),s=Se(null),r=Se(0),n=Se(null),i=Se([]),o=[{id:"English",name:"English",icon:""},{id:"Mathematics",name:"Mathematics",icon:""},{id:"Science",name:"Science",icon:""},{id:"Literature",name:"Literature",icon:""},{id:"Physics",name:"Physics",icon:""},{id:"Chemistry",name:"Chemistry",icon:""},{id:"Biology",name:"Biology",icon:""}],l={English:[{question:"What is a noun?",options:["A person, place, or thing","An action word","A describing word","A connecting word"],correct:0,difficulty:1},{question:"Which sentence is correct?",options:["He don't like pizza","He doesn't likes pizza","He doesn't like pizza","He not like pizza"],correct:2,difficulty:2},{question:"What is a synonym for 'happy'?",options:["Sad","Joyful","Angry","Tired"],correct:1,difficulty:1},{question:"Identify the verb: 'The cat sleeps on the mat'",options:["cat","sleeps","mat","the"],correct:1,difficulty:2},{question:"What is an adjective?",options:["Action word","Describing word","Person or thing","Connecting word"],correct:1,difficulty:1},{question:"Choose the correct form: 'I ___ to school yesterday'",options:["go","goes","went","going"],correct:2,difficulty:2},{question:"What is a metaphor?",options:["Direct comparison using like/as","Exaggeration","Comparison without like/as","Sound words"],correct:2,difficulty:3},{question:"Which word is spelled correctly?",options:["recieve","receive","recive","receeve"],correct:1,difficulty:2},{question:"What is alliteration?",options:["Rhyming words","Repeated consonant sounds","Opposite meanings","Similar meanings"],correct:1,difficulty:3},{question:"Identify the subject: 'The quick brown fox jumps'",options:["quick","brown","fox","jumps"],correct:2,difficulty:2},{question:"What is an antonym for 'difficult'?",options:["Hard","Easy","Complex","Tough"],correct:1,difficulty:1},{question:"Which is a proper noun?",options:["city","London","building","street"],correct:1,difficulty:2},{question:"What tense is 'will go'?",options:["Past","Present","Future","Present perfect"],correct:2,difficulty:2},{question:"What is a simile?",options:["Direct comparison","Comparison using like/as","Exaggeration","Personification"],correct:1,difficulty:3},{question:"Choose the correct article: '___ apple a day'",options:["A","An","The","No article"],correct:1,difficulty:2},{question:"What is personification?",options:["Human qualities to non-human things","Comparison","Rhyme","Repetition"],correct:0,difficulty:3},{question:"Which is a compound word?",options:["Beautiful","Bookshelf","Running","Happiness"],correct:1,difficulty:2},{question:"What is an adverb?",options:["Describes a noun","Describes a verb","Action word","Naming word"],correct:1,difficulty:2},{question:"Choose the correct pronoun: 'John and ___ went'",options:["me","I","myself","mine"],correct:1,difficulty:3},{question:"What is onomatopoeia?",options:["Rhyming","Sound words","Repetition","Comparison"],correct:1,difficulty:3},{question:"Which sentence has correct punctuation?",options:["Hello, how are you","Hello how are you?","Hello, how are you?","Hello how, are you?"],correct:2,difficulty:2},{question:"What is a conjunction?",options:["Action word","Describing word","Connecting word","Naming word"],correct:2,difficulty:2},{question:"Choose the correct form: 'She ___ been waiting'",options:["have","has","had","having"],correct:1,difficulty:3},{question:"What is hyperbole?",options:["Comparison","Exaggeration","Sound words","Repetition"],correct:1,difficulty:3},{question:"Which is a plural noun?",options:["Child","Children","Mouse","Foot"],correct:1,difficulty:1},{question:"What is the past participle of 'go'?",options:["Went","Going","Gone","Goes"],correct:2,difficulty:3},{question:"Choose the correct form: 'Neither Jack nor Jill ___ here'",options:["is","are","was","were"],correct:0,difficulty:4},{question:"What is an oxymoron?",options:["Contradictory terms together","Exaggeration","Repetition","Rhyme"],correct:0,difficulty:4},{question:"Which sentence uses passive voice?",options:["I wrote the letter","The letter was written by me","I am writing","I will write"],correct:1,difficulty:4},{question:"What is euphemism?",options:["Harsh expression","Mild expression for harsh reality","Exaggeration","Comparison"],correct:1,difficulty:4},{question:"Choose the correct form: 'If I ___ rich, I would travel'",options:["am","was","were","be"],correct:2,difficulty:4},{question:"What is anaphora?",options:["Repetition at end","Repetition at beginning","No repetition","Random repetition"],correct:1,difficulty:5},{question:"Which is a gerund: 'Swimming is fun'",options:["is","fun","Swimming","None"],correct:2,difficulty:4},{question:"What is synecdoche?",options:["Part represents whole","Whole represents part","Direct comparison","Exaggeration"],correct:0,difficulty:5},{question:"Choose correct form: 'I wish I ___ studied harder'",options:["have","has","had","having"],correct:2,difficulty:4},{question:"What is metonymy?",options:["Using one thing to represent another related thing","Direct comparison","Exaggeration","Repetition"],correct:0,difficulty:5},{question:"Which shows correct comma use?",options:["I like apples oranges and pears","I like apples, oranges and pears","I like apples, oranges, and pears","I like, apples oranges and pears"],correct:2,difficulty:3},{question:"What is assonance?",options:["Consonant repetition","Vowel repetition","Word repetition","Phrase repetition"],correct:1,difficulty:4},{question:"Identify the infinitive: 'To learn is important'",options:["is","important","To learn","learn"],correct:2,difficulty:3},{question:"What is zeugma?",options:["Using word with two others in different senses","Repetition","Exaggeration","Comparison"],correct:0,difficulty:5}],Mathematics:[{question:"What is 5 + 7?",options:["10","11","12","13"],correct:2,difficulty:1},{question:"What is 15 - 8?",options:["6","7","8","9"],correct:1,difficulty:1},{question:"What is 6  4?",options:["20","22","24","26"],correct:2,difficulty:2},{question:"What is 36  6?",options:["5","6","7","8"],correct:1,difficulty:2},{question:"What is 25% of 80?",options:["15","20","25","30"],correct:1,difficulty:3},{question:"Solve: 3x + 5 = 20",options:["x = 3","x = 5","x = 10","x = 15"],correct:1,difficulty:4},{question:"What is the area of a rectangle 5cm  8cm?",options:["13 cm","26 cm","40 cm","80 cm"],correct:2,difficulty:3},{question:"What is 144?",options:["10","11","12","13"],correct:2,difficulty:3},{question:"If y = 2x + 3, what is y when x = 4?",options:["9","10","11","12"],correct:2,difficulty:4},{question:"What is the perimeter of a square with side 7cm?",options:["14 cm","21 cm","28 cm","49 cm"],correct:2,difficulty:2},{question:"What is 12 + 18?",options:["28","29","30","31"],correct:2,difficulty:1},{question:"What is 9  7?",options:["56","63","72","81"],correct:1,difficulty:2},{question:"What is 0.5 + 0.25?",options:["0.5","0.65","0.75","1.0"],correct:2,difficulty:2},{question:"What is 2?",options:["6","8","9","16"],correct:1,difficulty:2},{question:"What is the value of  (pi) approximately?",options:["2.14","3.14","4.14","5.14"],correct:1,difficulty:2},{question:"What is 40% of 200?",options:["60","70","80","90"],correct:2,difficulty:3},{question:"Solve: 2x - 4 = 10",options:["x = 3","x = 5","x = 7","x = 9"],correct:2,difficulty:3},{question:"What is the circumference of a circle with radius 7? (Use   22/7)",options:["22","44","88","154"],correct:1,difficulty:3},{question:"What is 81?",options:["7","8","9","10"],correct:2,difficulty:2},{question:"What is 5?",options:["10","15","20","25"],correct:3,difficulty:1},{question:"Simplify: 3/6",options:["1/3","1/2","2/3","3/4"],correct:1,difficulty:2},{question:"What is the volume of a cube with side 3cm?",options:["9 cm","18 cm","27 cm","81 cm"],correct:2,difficulty:3},{question:"Solve: x/5 = 4",options:["x = 10","x = 15","x = 20","x = 25"],correct:2,difficulty:3},{question:"What is 15% of 60?",options:["6","7","8","9"],correct:3,difficulty:3},{question:"If a = 3 and b = 4, what is a + b?",options:["7","12","25","49"],correct:2,difficulty:3},{question:"What is the slope of y = 3x + 2?",options:["2","3","5","-3"],correct:1,difficulty:4},{question:"Solve: (x + 3)(x - 2) = 0",options:["x = -3 or 2","x = 3 or -2","x = -3 or -2","x = 3 or 2"],correct:0,difficulty:4},{question:"What is the sum of angles in a triangle?",options:["90","180","270","360"],correct:1,difficulty:2},{question:"What is log(100)?",options:["1","2","10","100"],correct:1,difficulty:4},{question:"Solve quadratic: x - 5x + 6 = 0",options:["x = 1, 6","x = 2, 3","x = -2, -3","x = 1, 5"],correct:1,difficulty:4},{question:"What is sin(90)?",options:["0","0.5","1","2/2"],correct:2,difficulty:4},{question:"What is the derivative of x?",options:["x","2x","x","2"],correct:1,difficulty:5},{question:"What is the integral of 2x?",options:["2","x","x","2x"],correct:2,difficulty:5},{question:"Solve: 2 = 16",options:["x = 2","x = 3","x = 4","x = 8"],correct:2,difficulty:4},{question:"What is the determinant of [[2,3],[1,4]]?",options:["5","6","8","11"],correct:0,difficulty:5},{question:"What is lim(x0) (sin x)/x?",options:["0","1","","undefined"],correct:1,difficulty:5},{question:"What is cos(0)?",options:["0","0.5","1","-1"],correct:2,difficulty:3},{question:"Solve system: x+y=5, x-y=1",options:["x=2,y=3","x=3,y=2","x=4,y=1","x=1,y=4"],correct:1,difficulty:4},{question:"What is  x dx?",options:["0","1/2","1","2"],correct:1,difficulty:5},{question:"What is e^(ln 5)?",options:["1","e","5","ln 5"],correct:2,difficulty:5}],Science:[{question:"What is H2O?",options:["Oxygen","Water","Hydrogen","Carbon dioxide"],correct:1,difficulty:1},{question:"How many planets are in our solar system?",options:["7","8","9","10"],correct:1,difficulty:1},{question:"What gas do plants produce?",options:["Carbon dioxide","Nitrogen","Oxygen","Hydrogen"],correct:2,difficulty:2},{question:"What is the center of an atom called?",options:["Electron","Proton","Neutron","Nucleus"],correct:3,difficulty:3},{question:"What is the boiling point of water?",options:["0C","50C","100C","150C"],correct:2,difficulty:2},{question:"What is photosynthesis?",options:["Plant breathing","Plant eating","Plant making food","Plant growing"],correct:2,difficulty:2},{question:"What is the speed of light?",options:["300,000 km/s","150,000 km/s","500,000 km/s","1,000,000 km/s"],correct:0,difficulty:4},{question:"What is DNA?",options:["A type of protein","Genetic material","A cell part","An enzyme"],correct:1,difficulty:3},{question:"What causes seasons on Earth?",options:["Distance from sun","Earth's tilt","Moon phases","Solar flares"],correct:1,difficulty:3},{question:"What is an ecosystem?",options:["A type of animal","Living and non-living things interacting","A food chain","A habitat"],correct:1,difficulty:3},{question:"What is the freezing point of water?",options:["0C","-10C","10C","100C"],correct:0,difficulty:1},{question:"What gas do humans breathe in?",options:["Carbon dioxide","Nitrogen","Oxygen","Helium"],correct:2,difficulty:1},{question:"What is the largest planet?",options:["Earth","Mars","Jupiter","Saturn"],correct:2,difficulty:2},{question:"What is gravity?",options:["Force that pulls objects together","Type of energy","Form of light","Kind of gas"],correct:0,difficulty:2},{question:"What do plants need for photosynthesis?",options:["Sunlight, water, CO2","Only water","Only sunlight","Only CO2"],correct:0,difficulty:2},{question:"What is the closest star to Earth?",options:["Alpha Centauri","Sirius","The Sun","Polaris"],correct:2,difficulty:1},{question:"What is evaporation?",options:["Liquid to gas","Gas to liquid","Solid to liquid","Liquid to solid"],correct:0,difficulty:2},{question:"What are the three states of matter?",options:["Solid, liquid, gas","Hot, cold, warm","Big, small, medium","Hard, soft, medium"],correct:0,difficulty:1},{question:"What is a carnivore?",options:["Plant eater","Meat eater","Both eater","Neither"],correct:1,difficulty:2},{question:"What is the chemical formula for carbon dioxide?",options:["CO","CO2","C2O","O2C"],correct:1,difficulty:2},{question:"What is inertia?",options:["Resistance to change in motion","Type of energy","Form of matter","Kind of force"],correct:0,difficulty:3},{question:"What is the smallest particle of an element?",options:["Molecule","Atom","Electron","Proton"],correct:1,difficulty:2},{question:"What is a herbivore?",options:["Meat eater","Plant eater","Both eater","Neither"],correct:1,difficulty:1},{question:"What causes day and night?",options:["Earth's rotation","Moon's rotation","Sun's movement","Star movement"],correct:0,difficulty:2},{question:"What is the Milky Way?",options:["A planet","A star","Our galaxy","A constellation"],correct:2,difficulty:2},{question:"What is condensation?",options:["Gas to liquid","Liquid to gas","Solid to liquid","Liquid to solid"],correct:0,difficulty:2},{question:"What is Newton's Third Law?",options:["F=ma","Every action has equal opposite reaction","Objects at rest stay at rest","Energy is conserved"],correct:1,difficulty:3},{question:"What is the atomic number?",options:["Number of neutrons","Number of protons","Number of electrons","Total particles"],correct:1,difficulty:3},{question:"What is the greenhouse effect?",options:["Trapping heat in atmosphere","Plant growth","Cloud formation","Rain cycle"],correct:0,difficulty:3},{question:"What is a black hole?",options:["Empty space","Region of extreme gravity","Dark planet","Exploded star"],correct:1,difficulty:4},{question:"What is entropy?",options:["Order in system","Disorder in system","Energy type","Force type"],correct:1,difficulty:4},{question:"What is the Doppler effect?",options:["Change in frequency due to motion","Light bending","Sound reflection","Wave interference"],correct:0,difficulty:4},{question:"What is nuclear fusion?",options:["Splitting atoms","Combining atoms","Atom decay","Electron transfer"],correct:1,difficulty:4},{question:"What is dark matter?",options:["Black paint","Invisible matter affecting gravity","Dark energy","Empty space"],correct:1,difficulty:5},{question:"What is quantum entanglement?",options:["Particle correlation","Wave interference","Energy transfer","Matter creation"],correct:0,difficulty:5},{question:"What is Heisenberg's Uncertainty Principle?",options:["Cannot know position and momentum precisely","Energy is uncertain","Time is relative","Matter is uncertain"],correct:0,difficulty:5},{question:"What is antimatter?",options:["Dark matter","Opposite charge particles","Empty space","Negative energy"],correct:1,difficulty:5},{question:"What is the speed of sound (approx)?",options:["343 m/s","3000 m/s","300,000 km/s","1000 m/s"],correct:0,difficulty:3},{question:"What is Schrdinger's cat about?",options:["Quantum superposition","Pet care","Chemistry","Biology"],correct:0,difficulty:5},{question:"What is the half-life?",options:["Time for half decay","Time to live","Half mass","Half energy"],correct:0,difficulty:4}],Literature:[{question:"Who wrote 'Romeo and Juliet'?",options:["Charles Dickens","William Shakespeare","Jane Austen","Mark Twain"],correct:1,difficulty:2},{question:"What is a protagonist?",options:["Main character","Villain","Setting","Theme"],correct:0,difficulty:2},{question:"What is a haiku?",options:["Long story","Short poem","Play","Novel"],correct:1,difficulty:2},{question:"Who wrote '1984'?",options:["George Orwell","Aldous Huxley","Ray Bradbury","H.G. Wells"],correct:0,difficulty:3},{question:"What is an antagonist?",options:["Hero","Opponent of hero","Setting","Narrator"],correct:1,difficulty:2},{question:"What is foreshadowing?",options:["Past events","Hints about future","Character description","Setting details"],correct:1,difficulty:3},{question:"Who wrote 'Pride and Prejudice'?",options:["Emily Bront","Jane Austen","Charlotte Bront","Virginia Woolf"],correct:1,difficulty:3},{question:"What is a sonnet?",options:["14-line poem","Short story","Long novel","Three-act play"],correct:0,difficulty:3},{question:"What is irony?",options:["Rhyming words","Opposite of what's expected","Comparison","Repetition"],correct:1,difficulty:3},{question:"Who wrote 'The Great Gatsby'?",options:["Ernest Hemingway","F. Scott Fitzgerald","John Steinbeck","William Faulkner"],correct:1,difficulty:3},{question:"What is a theme?",options:["Main character","Central idea","Setting","Plot"],correct:1,difficulty:2},{question:"Who wrote 'To Kill a Mockingbird'?",options:["Harper Lee","Toni Morrison","Alice Walker","Maya Angelou"],correct:0,difficulty:2},{question:"What is a metaphor in literature?",options:["Direct comparison","Indirect comparison","Rhyme","Rhythm"],correct:1,difficulty:2},{question:"Who wrote 'Hamlet'?",options:["Christopher Marlowe","William Shakespeare","Ben Jonson","John Milton"],correct:1,difficulty:2},{question:"What is the climax of a story?",options:["Beginning","Turning point","End","Exposition"],correct:1,difficulty:2},{question:"Who wrote 'The Odyssey'?",options:["Virgil","Homer","Sophocles","Euripides"],correct:1,difficulty:3},{question:"What is stream of consciousness?",options:["River description","Narrative technique showing thoughts","Type of poem","Writing style"],correct:1,difficulty:4},{question:"Who wrote 'Brave New World'?",options:["George Orwell","Ray Bradbury","Aldous Huxley","Philip K. Dick"],correct:2,difficulty:3},{question:"What is magical realism?",options:["Pure fantasy","Blend of realistic and magical elements","Science fiction","Horror genre"],correct:1,difficulty:4},{question:"Who wrote 'Wuthering Heights'?",options:["Charlotte Bront","Emily Bront","Jane Austen","George Eliot"],correct:1,difficulty:3},{question:"What is blank verse?",options:["Unrhymed iambic pentameter","Free verse","Rhymed poetry","Prose"],correct:0,difficulty:4},{question:"Who wrote 'Moby Dick'?",options:["Herman Melville","Nathaniel Hawthorne","Edgar Allan Poe","Mark Twain"],correct:0,difficulty:3},{question:"What is an epic?",options:["Short story","Long narrative poem","Play","Novel"],correct:1,difficulty:2},{question:"Who wrote 'The Catcher in the Rye'?",options:["J.D. Salinger","Jack Kerouac","Allen Ginsberg","William Burroughs"],correct:0,difficulty:3},{question:"What is symbolism?",options:["Direct meaning","Using symbols for deeper meaning","Rhyme scheme","Plot device"],correct:1,difficulty:3},{question:"Who wrote 'Crime and Punishment'?",options:["Leo Tolstoy","Fyodor Dostoevsky","Anton Chekhov","Ivan Turgenev"],correct:1,difficulty:3},{question:"What is a bildungsroman?",options:["War novel","Coming-of-age story","Detective fiction","Romance"],correct:1,difficulty:4},{question:"Who wrote 'One Hundred Years of Solitude'?",options:["Jorge Luis Borges","Gabriel Garca Mrquez","Pablo Neruda","Octavio Paz"],correct:1,difficulty:4},{question:"What is dramatic irony?",options:["Audience knows more than characters","Characters know more","No one knows","Everyone knows"],correct:0,difficulty:3},{question:"Who wrote 'Mrs Dalloway'?",options:["Virginia Woolf","James Joyce","T.S. Eliot","Ezra Pound"],correct:0,difficulty:4},{question:"What is modernist literature?",options:["Traditional narrative","Experimental forms and consciousness","Medieval stories","Romantic poetry"],correct:1,difficulty:4},{question:"Who wrote 'The Divine Comedy'?",options:["Petrarch","Boccaccio","Dante","Chaucer"],correct:2,difficulty:3},{question:"What is postmodernism in literature?",options:["Before modernism","Skeptical of grand narratives","Traditional forms","Romantic style"],correct:1,difficulty:5},{question:"Who wrote 'Ulysses'?",options:["James Joyce","Samuel Beckett","Oscar Wilde","W.B. Yeats"],correct:0,difficulty:4},{question:"What is intertextuality?",options:["Writing within text","References to other texts","Text structure","Plot device"],correct:1,difficulty:5},{question:"Who wrote 'The Waste Land'?",options:["Ezra Pound","T.S. Eliot","W.H. Auden","Robert Frost"],correct:1,difficulty:4},{question:"What is the unreliable narrator?",options:["Narrator who tells truth","Narrator whose credibility is questionable","Third person narrator","Omniscient narrator"],correct:1,difficulty:4},{question:"Who won Nobel Prize for 'The Old Man and the Sea'?",options:["William Faulkner","Ernest Hemingway","John Steinbeck","Sinclair Lewis"],correct:1,difficulty:3},{question:"What is metafiction?",options:["About fiction itself","Science fiction","Historical fiction","Romance fiction"],correct:0,difficulty:5},{question:"Who wrote 'In Search of Lost Time'?",options:["Marcel Proust","Andr Gide","Albert Camus","Jean-Paul Sartre"],correct:0,difficulty:5}],Physics:[{question:"What is the SI unit of force?",options:["Joule","Newton","Watt","Pascal"],correct:1,difficulty:2},{question:"What is Newton's First Law?",options:["F = ma","Object at rest stays at rest","Action-reaction","Gravity"],correct:1,difficulty:3},{question:"What is the formula for velocity?",options:["v = d/t","v = m/t","v = f  ","v = at"],correct:0,difficulty:2},{question:"What is kinetic energy?",options:["Stored energy","Energy of motion","Heat energy","Light energy"],correct:1,difficulty:3},{question:"What is acceleration?",options:["Speed","Distance over time","Change in velocity","Force"],correct:2,difficulty:2},{question:"What is the unit of power?",options:["Joule","Watt","Newton","Ampere"],correct:1,difficulty:3},{question:"What is potential energy?",options:["Motion energy","Stored energy","Heat energy","Sound energy"],correct:1,difficulty:2},{question:"What is the speed of sound in air?",options:["343 m/s","3000 m/s","300,000 km/s","150 m/s"],correct:0,difficulty:4},{question:"What is momentum?",options:["Force","Mass  velocity","Energy","Acceleration"],correct:1,difficulty:3},{question:"What is gravity on Earth?",options:["8.8 m/s","9.8 m/s","10.8 m/s","11.8 m/s"],correct:1,difficulty:2},{question:"What is Newton's Second Law?",options:["Inertia","F = ma","Action-reaction","Gravity"],correct:1,difficulty:2},{question:"What is work in physics?",options:["Force  distance","Mass  velocity","Power  time","Energy  time"],correct:0,difficulty:2},{question:"What is the unit of energy?",options:["Newton","Watt","Joule","Pascal"],correct:2,difficulty:2},{question:"What is friction?",options:["Resistance to motion","Type of energy","Form of power","Kind of force"],correct:0,difficulty:2},{question:"What is electromagnetic radiation?",options:["Sound waves","Light and similar waves","Heat only","Mechanical waves"],correct:1,difficulty:3},{question:"What is Ohm's Law?",options:["V = IR","F = ma","E = mc","P = IV"],correct:0,difficulty:3},{question:"What is the formula for work?",options:["W = Fd","W = ma","W = Pt","W = mv"],correct:0,difficulty:2},{question:"What is centripetal force?",options:["Outward force","Inward force in circular motion","Gravitational force","Frictional force"],correct:1,difficulty:3},{question:"What is the law of conservation of energy?",options:["Energy can be created","Energy cannot be destroyed","Energy stays constant","Energy always increases"],correct:1,difficulty:3},{question:"What is thermal energy?",options:["Motion energy","Heat energy","Light energy","Sound energy"],correct:1,difficulty:2},{question:"What is refraction?",options:["Light bouncing","Light bending","Light absorption","Light emission"],correct:1,difficulty:3},{question:"What is the Doppler Effect?",options:["Change in frequency due to motion","Light diffraction","Sound absorption","Wave interference"],correct:0,difficulty:4},{question:"What is the unit of electric current?",options:["Volt","Ampere","Ohm","Watt"],correct:1,difficulty:2},{question:"What is the formula for kinetic energy?",options:["KE = mv","KE = 1/2 mv","KE = mgh","KE = Fd"],correct:1,difficulty:3},{question:"What is simple harmonic motion?",options:["Linear motion","Oscillatory motion","Circular motion","Random motion"],correct:1,difficulty:4},{question:"What is Young's modulus?",options:["Elasticity measure","Viscosity measure","Density measure","Pressure measure"],correct:0,difficulty:4},{question:"What is the photoelectric effect?",options:["Light creating current","Light bending","Light reflection","Light absorption"],correct:0,difficulty:4},{question:"What is wave-particle duality?",options:["Waves are particles","Light behaves as both wave and particle","Only waves exist","Only particles exist"],correct:1,difficulty:5},{question:"What is the Heisenberg Uncertainty Principle?",options:["Everything is certain","Position and momentum cannot both be precise","Energy is uncertain","Time is relative"],correct:1,difficulty:5},{question:"What is special relativity about?",options:["Gravity","Motion at high speeds","Quantum mechanics","Thermodynamics"],correct:1,difficulty:4},{question:"What is E=mc?",options:["Energy-mass equivalence","Force formula","Power formula","Work formula"],correct:0,difficulty:3},{question:"What is entropy?",options:["Order","Disorder in a system","Energy","Force"],correct:1,difficulty:4},{question:"What is the strong nuclear force?",options:["Gravity","Electromagnetic force","Force binding nucleus","Weak force"],correct:2,difficulty:4},{question:"What is superconductivity?",options:["Very high resistance","Zero electrical resistance","High conductivity","Low resistance"],correct:1,difficulty:5},{question:"What is quantum tunneling?",options:["Digging tunnels","Particle passing through barrier","Wave reflection","Energy absorption"],correct:1,difficulty:5},{question:"What is the Higgs boson?",options:["Type of atom","Particle giving mass","Energy particle","Force carrier"],correct:1,difficulty:5},{question:"What is string theory?",options:["Music theory","Fundamental particles as strings","Rope physics","Wave theory"],correct:1,difficulty:5},{question:"What is dark energy?",options:["Black holes","Energy causing universe expansion","Dark matter","Negative energy"],correct:1,difficulty:5},{question:"What is the Pauli Exclusion Principle?",options:["Fermions cannot occupy same state","Bosons repel","Energy quantization","Wave-particle duality"],correct:0,difficulty:5},{question:"What is Planck's constant used for?",options:["Gravity","Quantum mechanics","Relativity","Thermodynamics"],correct:1,difficulty:4}],Chemistry:[{question:"What is the chemical symbol for Gold?",options:["Go","Gd","Au","Ag"],correct:2,difficulty:2},{question:"What is an atom?",options:["Smallest unit of element","A molecule","A compound","An ion"],correct:0,difficulty:2},{question:"What is H2SO4?",options:["Hydrochloric acid","Sulfuric acid","Nitric acid","Carbonic acid"],correct:1,difficulty:3},{question:"What is a molecule?",options:["Single atom","Two or more atoms bonded","An ion","An element"],correct:1,difficulty:2},{question:"What is the pH of a neutral solution?",options:["0","7","14","1"],correct:1,difficulty:2},{question:"What is NaCl?",options:["Sugar","Salt","Water","Acid"],correct:1,difficulty:1},{question:"What is oxidation?",options:["Gain electrons","Lose electrons","Gain protons","Lose neutrons"],correct:1,difficulty:4},{question:"What is the symbol for Iron?",options:["Ir","Fe","In","Fr"],correct:1,difficulty:2},{question:"What is a catalyst?",options:["Speeds up reaction","Slows reaction","Stops reaction","Creates reaction"],correct:0,difficulty:3},{question:"What is CO2?",options:["Carbon monoxide","Carbon dioxide","Calcium oxide","Cobalt"],correct:1,difficulty:1},{question:"What is the symbol for Sodium?",options:["S","So","Na","Sd"],correct:2,difficulty:2},{question:"What is a covalent bond?",options:["Electron sharing","Electron transfer","Proton sharing","Neutron sharing"],correct:0,difficulty:3},{question:"What is an ionic bond?",options:["Electron sharing","Electron transfer","Proton transfer","Neutron transfer"],correct:1,difficulty:3},{question:"What is the symbol for Oxygen?",options:["O","Ox","Og","Om"],correct:0,difficulty:1},{question:"What is an acid?",options:["pH > 7","pH < 7","pH = 7","pH = 0"],correct:1,difficulty:2},{question:"What is a base?",options:["pH < 7","pH > 7","pH = 7","pH = 14"],correct:1,difficulty:2},{question:"What is the periodic table?",options:["Element organization","Compound list","Molecule chart","Atom diagram"],correct:0,difficulty:2},{question:"What is the symbol for Helium?",options:["H","He","Hl","Hm"],correct:1,difficulty:1},{question:"What is reduction?",options:["Lose electrons","Gain electrons","Lose protons","Gain protons"],correct:1,difficulty:4},{question:"What is the symbol for Carbon?",options:["Ca","C","Cb","Cr"],correct:1,difficulty:1},{question:"What is an endothermic reaction?",options:["Releases heat","Absorbs heat","No heat change","Creates heat"],correct:1,difficulty:3},{question:"What is an exothermic reaction?",options:["Absorbs heat","Releases heat","No heat change","Destroys heat"],correct:1,difficulty:3},{question:"What is the symbol for Nitrogen?",options:["Ni","N","Nt","Nr"],correct:1,difficulty:1},{question:"What is Avogadro's number?",options:["6.02  10","3.14  10","9.8  10","1.6  10"],correct:0,difficulty:4},{question:"What is a noble gas?",options:["Reactive gas","Inert gas","Toxic gas","Heavy gas"],correct:1,difficulty:3},{question:"What is the symbol for Silver?",options:["Si","Ag","Sr","Sv"],correct:1,difficulty:2},{question:"What is a chemical equation?",options:["Math formula","Representation of reaction","Chemical formula","Element list"],correct:1,difficulty:2},{question:"What is the molar mass of water (H2O)?",options:["16 g/mol","18 g/mol","20 g/mol","22 g/mol"],correct:1,difficulty:3},{question:"What is electronegativity?",options:["Atom's ability to attract electrons","Positive charge","Negative charge","Neutral charge"],correct:0,difficulty:4},{question:"What is the symbol for Copper?",options:["Co","Cp","Cu","Cr"],correct:2,difficulty:2},{question:"What is a polymer?",options:["Single molecule","Large molecule from repeating units","Small molecule","Atom chain"],correct:1,difficulty:3},{question:"What is equilibrium in chemistry?",options:["One direction","Forward and reverse rates equal","No reaction","Complete reaction"],correct:1,difficulty:4},{question:"What is the symbol for Potassium?",options:["P","K","Po","Pt"],correct:1,difficulty:2},{question:"What is Le Chatelier's principle?",options:["System responds to stress","Energy conservation","Mass conservation","Charge conservation"],correct:0,difficulty:4},{question:"What is organic chemistry?",options:["Study of metals","Study of carbon compounds","Study of gases","Study of acids"],correct:1,difficulty:3},{question:"What is the symbol for Lead?",options:["L","Ld","Pb","Pl"],correct:2,difficulty:3},{question:"What is quantum chemistry?",options:["Old chemistry","Chemistry using quantum mechanics","Classical chemistry","Basic chemistry"],correct:1,difficulty:5},{question:"What is a Lewis structure?",options:["Molecular geometry","Electron dot diagram","Orbital diagram","Energy diagram"],correct:1,difficulty:4},{question:"What is the Haber process?",options:["Making steel","Synthesizing ammonia","Refining oil","Producing acids"],correct:1,difficulty:4},{question:"What is spectroscopy?",options:["Study of spectra","Study of speed","Study of space","Study of species"],correct:0,difficulty:5}],Biology:[{question:"What is the powerhouse of the cell?",options:["Nucleus","Mitochondria","Ribosome","Chloroplast"],correct:1,difficulty:2},{question:"What is DNA short for?",options:["Deoxyribonucleic acid","Dinitrogen acid","Dynamic nuclear acid","Dextrose acid"],correct:0,difficulty:3},{question:"What do red blood cells carry?",options:["Nutrients","Oxygen","Waste","Hormones"],correct:1,difficulty:2},{question:"What is the largest organ?",options:["Heart","Brain","Skin","Liver"],correct:2,difficulty:2},{question:"What is photosynthesis?",options:["Cell division","Making food from sunlight","Respiration","Digestion"],correct:1,difficulty:2},{question:"How many chromosomes do humans have?",options:["23","46","48","52"],correct:1,difficulty:3},{question:"What is an enzyme?",options:["Protein that speeds reactions","Type of cell","Hormone","Vitamin"],correct:0,difficulty:3},{question:"What is evolution?",options:["Growth","Change over time","Reproduction","Adaptation"],correct:1,difficulty:3},{question:"What is osmosis?",options:["Cell division","Water movement across membrane","Protein synthesis","Energy production"],correct:1,difficulty:4},{question:"What are genes made of?",options:["Proteins","DNA","RNA","Lipids"],correct:1,difficulty:3},{question:"What is the function of the nucleus?",options:["Energy production","Contains genetic material","Protein synthesis","Waste removal"],correct:1,difficulty:2},{question:"What is cellular respiration?",options:["Breathing","Converting glucose to energy","Photosynthesis","Cell division"],correct:1,difficulty:3},{question:"What is a prokaryote?",options:["Cell with nucleus","Cell without nucleus","Plant cell","Animal cell"],correct:1,difficulty:3},{question:"What is a eukaryote?",options:["Cell without nucleus","Cell with nucleus","Bacteria","Virus"],correct:1,difficulty:3},{question:"What is mitosis?",options:["Sexual reproduction","Cell division for growth","Energy production","Protein synthesis"],correct:1,difficulty:3},{question:"What is meiosis?",options:["Cell division for growth","Cell division for sex cells","Energy production","Protein synthesis"],correct:1,difficulty:3},{question:"What is the function of ribosomes?",options:["Energy production","Protein synthesis","Genetic storage","Waste removal"],correct:1,difficulty:2},{question:"What is homeostasis?",options:["Cell division","Maintaining stable conditions","Energy production","Growth"],correct:1,difficulty:3},{question:"What are the four bases in DNA?",options:["A, B, C, D","A, T, G, C","A, U, G, C","W, X, Y, Z"],correct:1,difficulty:3},{question:"What is natural selection?",options:["Random change","Survival of fittest","Artificial breeding","Mutation"],correct:1,difficulty:3},{question:"What is an ecosystem?",options:["Single organism","Community of organisms and environment","Food chain","Population"],correct:1,difficulty:2},{question:"What is the difference between DNA and RNA?",options:["DNA has thymine, RNA has uracil","No difference","RNA is double-stranded","DNA is single-stranded"],correct:0,difficulty:4},{question:"What is the cell membrane?",options:["Cell powerhouse","Protective barrier around cell","Genetic material","Energy producer"],correct:1,difficulty:2},{question:"What is chlorophyll?",options:["Animal protein","Green pigment in plants","Type of cell","Enzyme"],correct:1,difficulty:2},{question:"What is a species?",options:["Group of similar individuals","Single organism","Type of cell","Ecosystem"],correct:0,difficulty:2},{question:"What is ATP?",options:["Type of DNA","Energy currency of cell","Protein","Enzyme"],correct:1,difficulty:3},{question:"What is mutation?",options:["Normal growth","Change in DNA sequence","Cell division","Energy production"],correct:1,difficulty:3},{question:"What is biodiversity?",options:["Single species","Variety of life","Population size","Food chain"],correct:1,difficulty:2},{question:"What is the function of chloroplasts?",options:["Energy from respiration","Photosynthesis","Protein synthesis","Waste removal"],correct:1,difficulty:2},{question:"What is a food chain?",options:["Energy flow through organisms","Cell structure","DNA sequence","Protein structure"],correct:0,difficulty:2},{question:"What is symbiosis?",options:["Competition","Close relationship between species","Predation","Parasitism only"],correct:1,difficulty:3},{question:"What is the endoplasmic reticulum?",options:["Energy producer","Protein and lipid synthesis network","Genetic material","Cell membrane"],correct:1,difficulty:4},{question:"What is the Golgi apparatus?",options:["Powerhouse","Packaging and shipping center","Genetic storage","Energy producer"],correct:1,difficulty:4},{question:"What is a genotype?",options:["Physical traits","Genetic makeup","Cell type","Organism size"],correct:1,difficulty:4},{question:"What is a phenotype?",options:["Genetic makeup","Observable characteristics","DNA sequence","Cell structure"],correct:1,difficulty:4},{question:"What is CRISPR?",options:["Gene editing tool","Protein","Cell part","Disease"],correct:0,difficulty:5},{question:"What is epigenetics?",options:["Gene changes without DNA sequence change","Mutation","Evolution","Natural selection"],correct:0,difficulty:5},{question:"What is the Central Dogma?",options:["DNA  RNA  Protein","Protein  RNA  DNA","RNA  DNA  Protein","DNA  Protein  RNA"],correct:0,difficulty:4},{question:"What are stem cells?",options:["Specialized cells","Undifferentiated cells","Dead cells","Cancer cells"],correct:1,difficulty:4},{question:"What is apoptosis?",options:["Cell growth","Programmed cell death","Cell division","Mutation"],correct:1,difficulty:5}]},c=Se([]),u=oe(()=>c.value.length),d=oe(()=>c.value[r.value]),f=oe(()=>(r.value+1)/u.value*100),p=oe(()=>i.value.filter(U=>U.correct).length),g=oe(()=>i.value.length-p.value),b=oe(()=>Math.round(p.value/i.value.length*100)),k=oe(()=>{const U=b.value;return U>=90?"Advanced":U>=75?"Intermediate":U>=60?"Pre-Intermediate":"Beginner"}),L=U=>{const C=o.find(w=>w.id===U);return C?C.icon:""},V=U=>{s.value=U,c.value=l[U],e.value="test"},R=U=>{n.value=U},E=()=>{if(n.value===null)return;const U=n.value===d.value.correct;i.value.push({questionIndex:r.value,selectedAnswer:n.value,correctAnswer:d.value.correct,correct:U}),r.value<u.value-1?(r.value++,n.value=null):N()},N=async()=>{var U;e.value="results";try{const C=await((U=me.currentUser)==null?void 0:U.getIdToken()),w=t.state.firebaseUserId||localStorage.getItem("firebaseUserId");C&&w&&await ce.post(`learning-mode/placement-test/${w}/complete`,{subject:s.value,totalQuestions:u.value,correctAnswers:p.value,wrongAnswers:g.value,scorePercentage:b.value,recommendedLevel:k.value,answers:i.value},{headers:{Authorization:`Bearer ${C}`}})}catch{}};return{currentScreen:e,availableSubjects:o,selectedSubject:s,currentQuestion:d,currentQuestionIndex:r,totalQuestions:u,selectedAnswer:n,progressPercentage:f,correctAnswers:p,wrongAnswers:g,scorePercentage:b,recommendedLevel:k,getSubjectIcon:L,selectSubject:V,selectAnswer:R,nextQuestion:E,retakeTest:()=>{r.value=0,n.value=null,i.value=[],e.value="subject-select"}}}},G0e={class:"placement-test"},K0e={key:0,class:"screen"},Y0e={class:"container"},Q0e={class:"subjects-grid"},X0e=["onClick"],J0e={class:"subject-icon"},Z0e={class:"subject-name"},e1e={key:1,class:"screen test-screen"},t1e={class:"test-wrapper"},s1e={class:"test-sidebar"},r1e={class:"test-info"},n1e={class:"subject-badge"},i1e={class:"badge-icon"},o1e={class:"badge-text"},a1e={class:"progress-section"},l1e={class:"progress-stats"},c1e={class:"progress-bar"},u1e={class:"test-main"},d1e={class:"question-container"},h1e={class:"question-header"},f1e={class:"question-number"},p1e={class:"question-text"},m1e={class:"options-list"},g1e=["onClick"],y1e={class:"option-radio"},v1e={key:0,class:"radio-dot"},_1e={class:"option-label"},b1e={class:"question-actions"},w1e=["disabled"],S1e={key:2,class:"screen"},E1e={class:"container results-container"},T1e={class:"results-header"},k1e={class:"results-content"},I1e={class:"score-card"},C1e={class:"score-circle"},A1e={width:"200",height:"200",viewBox:"0 0 200 200"},P1e=["stroke-dashoffset"],x1e={x:"100",y:"95","text-anchor":"middle","font-size":"48","font-weight":"700",fill:"#111827"},L1e={class:"level-badge"},R1e={class:"level-value"},N1e={class:"stats-grid"},O1e={class:"stat-item"},M1e={class:"stat-info"},D1e={class:"stat-value"},$1e={class:"stat-item"},U1e={class:"stat-info"},F1e={class:"stat-value"},V1e={class:"stat-item"},B1e={class:"stat-info"},q1e={class:"stat-value"},j1e={class:"results-actions"};function H1e(t,e,s,r,n,i){return v(),S("div",G0e,[r.currentScreen==="subject-select"?(v(),S("div",K0e,[a("div",Y0e,[e[4]||(e[4]=a("div",{class:"header"},[a("h1",null,"Placement Test"),a("p",null,"Choose a subject to assess your current level")],-1)),a("div",Q0e,[(v(!0),S(he,null,be(r.availableSubjects,o=>(v(),S("button",{key:o.id,class:"subject-card",onClick:l=>r.selectSubject(o.id)},[a("div",J0e,m(o.icon),1),a("div",Z0e,m(o.name),1),e[3]||(e[3]=a("div",{class:"subject-count"},"40 Questions",-1))],8,X0e))),128))])])])):r.currentScreen==="test"?(v(),S("div",e1e,[a("div",t1e,[a("div",s1e,[a("div",r1e,[a("div",n1e,[a("span",i1e,m(r.getSubjectIcon(r.selectedSubject)),1),a("span",o1e,m(r.selectedSubject),1)]),a("div",a1e,[e[5]||(e[5]=a("div",{class:"progress-label"},"Progress",-1)),a("div",l1e,m(r.currentQuestionIndex+1)+" / "+m(r.totalQuestions),1),a("div",c1e,[a("div",{class:"progress-fill",style:rt({width:r.progressPercentage+"%"})},null,4)])])])]),a("div",u1e,[a("div",d1e,[a("div",h1e,[a("span",f1e,"Question "+m(r.currentQuestionIndex+1),1)]),a("h2",p1e,m(r.currentQuestion.question),1),a("div",m1e,[(v(!0),S(he,null,be(r.currentQuestion.options,(o,l)=>(v(),S("button",{key:l,class:ge(["option-item",{selected:r.selectedAnswer===l}]),onClick:c=>r.selectAnswer(l)},[a("span",y1e,[r.selectedAnswer===l?(v(),S("span",v1e)):G("",!0)]),a("span",_1e,m(o),1)],10,g1e))),128))]),a("div",b1e,[a("button",{class:"btn-next",disabled:r.selectedAnswer===null,onClick:e[0]||(e[0]=(...o)=>r.nextQuestion&&r.nextQuestion(...o))},[se(m(r.currentQuestionIndex===r.totalQuestions-1?"Finish Test":"Next Question")+" ",1),e[6]||(e[6]=a("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[a("path",{d:"M7.5 15L12.5 10L7.5 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))],8,w1e)])])])])])):r.currentScreen==="results"?(v(),S("div",S1e,[a("div",E1e,[a("div",T1e,[e[7]||(e[7]=a("div",{class:"results-icon"},[a("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none"},[a("circle",{cx:"32",cy:"32",r:"32",fill:"#10B981",opacity:"0.1"}),a("path",{d:"M20 32L28 40L44 24",stroke:"#10B981","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),e[8]||(e[8]=a("h1",null,"Test Complete!",-1)),a("p",null,"You've completed the "+m(r.selectedSubject)+" placement test",1)]),a("div",k1e,[a("div",I1e,[a("div",C1e,[(v(),S("svg",A1e,[e[9]||(e[9]=a("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#E5E7EB","stroke-width":"12"},null,-1)),a("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"#3B82F6","stroke-width":"12","stroke-dasharray":"565.48","stroke-dashoffset":565.48-565.48*r.scorePercentage/100,transform:"rotate(-90 100 100)","stroke-linecap":"round"},null,8,P1e),a("text",x1e,m(r.scorePercentage)+"% ",1),e[10]||(e[10]=a("text",{x:"100",y:"115","text-anchor":"middle","font-size":"14",fill:"#6B7280"}," Your Score ",-1))]))]),a("div",L1e,[e[11]||(e[11]=a("span",{class:"level-label"},"Recommended Level:",-1)),a("span",R1e,m(r.recommendedLevel),1)])]),a("div",N1e,[a("div",O1e,[e[13]||(e[13]=a("div",{class:"stat-icon correct"},[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a("div",M1e,[a("div",D1e,m(r.correctAnswers),1),e[12]||(e[12]=a("div",{class:"stat-label"},"Correct",-1))])]),a("div",$1e,[e[15]||(e[15]=a("div",{class:"stat-icon wrong"},[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a("div",U1e,[a("div",F1e,m(r.wrongAnswers),1),e[14]||(e[14]=a("div",{class:"stat-label"},"Wrong",-1))])]),a("div",V1e,[e[17]||(e[17]=a("div",{class:"stat-icon total"},[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a("div",B1e,[a("div",q1e,m(r.totalQuestions),1),e[16]||(e[16]=a("div",{class:"stat-label"},"Total",-1))])])]),a("div",j1e,[a("button",{class:"btn-primary",onClick:e[1]||(e[1]=o=>t.$router.push("/profile/catalogue"))}," Start Learning "),a("button",{class:"btn-secondary",onClick:e[2]||(e[2]=(...o)=>r.retakeTest&&r.retakeTest(...o))}," Take Another Test ")])])])])):G("",!0)])}const W1e=Je(z0e,[["render",H1e],["__scopeId","data-v-eaab5d80"]]),z1e={name:"LevelTest",setup(){const t=Mc(),e=RM(),s=Po(),r=Se(e.query.subject||sessionStorage.getItem("testSubject")||"General"),n=Se(parseInt(e.query.level)||s.getters["platformMode/currentLevelCap"]||1),i=Se(0),o=Se(null),l=Se([]),c=Se(!1),u=Se([]),d=()=>{const C=[{question:"What is the main topic of this lesson?",answers:["Grammar","Vocabulary","Pronunciation","Writing"],correct:0},{question:"Which of the following is correct?",answers:["Option A","Option B","Option C","Option D"],correct:1},{question:"Select the best answer:",answers:["Answer 1","Answer 2","Answer 3","Answer 4"],correct:2},{question:"Choose the correct statement:",answers:["Statement A","Statement B","Statement C","Statement D"],correct:0},{question:"What does this concept mean?",answers:["Definition 1","Definition 2","Definition 3","Definition 4"],correct:3}],w=Math.min(20,C.length*4),_=[];for(let x=0;x<w;x++){const P=C[x%C.length];_.push({...P,id:x,question:`${r.value} Q${x+1}: ${P.question}`})}u.value=_},f=oe(()=>u.value[i.value]),p=oe(()=>i.value===u.value.length-1),g=oe(()=>(i.value+1)/u.value.length*100),b=oe(()=>l.value.filter((C,w)=>C===u.value[w].correct).length),k=oe(()=>Math.round(b.value/u.value.length*100)),L=oe(()=>k.value>=70),V=C=>{o.value=C},R=()=>{l.value[i.value]=o.value,p.value?(c.value=!0,E()):(i.value++,o.value=null)},E=()=>{try{const C={subject:r.value,level:n.value,score:k.value,passed:L.value,correctAnswers:b.value,totalQuestions:u.value.length,timestamp:Date.now()},w=JSON.parse(localStorage.getItem("levelTests")||"[]");w.push(C),localStorage.setItem("levelTests",JSON.stringify(w))}catch{}},N=()=>{i.value=0,o.value=null,l.value=[],c.value=!1,d()},D=()=>{t.back()},U=()=>{t.push({name:"CataloguePage"})};return br(()=>{d()}),{subject:r,targetLevel:n,currentQuestionIndex:i,selectedAnswer:o,showResults:c,questions:u,currentQuestion:f,isLastQuestion:p,progressPercentage:g,correctAnswers:b,score:k,passed:L,selectAnswer:V,nextQuestion:R,retakeTest:N,goBack:D,goToCourses:U}}},G1e={class:"level-test-container"},K1e={class:"test-header"},Y1e={class:"test-info"},Q1e={class:"test-title"},X1e={class:"test-subtitle"},J1e={class:"progress-section"},Z1e={class:"progress-bar"},e_e={class:"progress-text"},t_e={key:0,class:"test-content"},s_e={class:"question-card"},r_e={class:"question-number"},n_e={class:"question-text"},i_e={class:"answers-grid"},o_e=["onClick"],a_e={class:"answer-letter"},l_e={class:"answer-text"},c_e={class:"question-actions"},u_e=["disabled"],d_e={key:1,class:"results-screen"},h_e={class:"results-card"},f_e={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},p_e={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},m_e={class:"results-title"},g_e={class:"results-message"},y_e={class:"results-stats"},v_e={class:"stat-item"},__e={class:"stat-value"},b_e={class:"stat-item"},w_e={class:"stat-value"},S_e={class:"stat-item"},E_e={class:"stat-value"},T_e={class:"results-actions"};function k_e(t,e,s,r,n,i){return v(),S("div",G1e,[a("div",K1e,[a("button",{class:"back-btn",onClick:e[0]||(e[0]=(...o)=>r.goBack&&r.goBack(...o))},e[4]||(e[4]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),se(" Back ")])),a("div",Y1e,[a("h1",Q1e,m(r.subject)+" Level Test",1),a("p",X1e,"Level "+m(r.targetLevel)+" Assessment",1)])]),a("div",J1e,[a("div",Z1e,[a("div",{class:"progress-fill",style:rt({width:r.progressPercentage+"%"})},null,4)]),a("div",e_e," Question "+m(r.currentQuestionIndex+1)+" of "+m(r.questions.length),1)]),r.showResults?(v(),S("div",d_e,[a("div",h_e,[a("div",{class:ge(["results-icon",r.passed?"success":"fail"])},[r.passed?(v(),S("svg",f_e,e[6]||(e[6]=[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),a("path",{d:"M22 4L12 14.01l-3-3"},null,-1)]))):(v(),S("svg",p_e,e[7]||(e[7]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)])))],2),a("h2",m_e,m(r.passed?"Congratulations!":"Keep Practicing!"),1),a("p",g_e,m(r.passed?`You've passed the Level ${r.targetLevel} test!`:`You scored ${r.score}%. Keep learning to improve!`),1),a("div",y_e,[a("div",v_e,[a("div",__e,m(r.correctAnswers)+"/"+m(r.questions.length),1),e[8]||(e[8]=a("div",{class:"stat-label"},"Correct Answers",-1))]),a("div",b_e,[a("div",w_e,m(r.score)+"%",1),e[9]||(e[9]=a("div",{class:"stat-label"},"Score",-1))]),a("div",S_e,[a("div",E_e,m(r.passed?"Pass":"Fail"),1),e[10]||(e[10]=a("div",{class:"stat-label"},"Result",-1))])]),a("div",T_e,[a("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...o)=>r.goToCourses&&r.goToCourses(...o))},m(r.passed?"Continue Learning":"Back to Courses"),1),r.passed?G("",!0):(v(),S("button",{key:0,class:"secondary-btn",onClick:e[3]||(e[3]=(...o)=>r.retakeTest&&r.retakeTest(...o))}," Retake Test "))])])])):(v(),S("div",t_e,[a("div",s_e,[a("div",r_e,"Question "+m(r.currentQuestionIndex+1),1),a("h2",n_e,m(r.currentQuestion.question),1),a("div",i_e,[(v(!0),S(he,null,be(r.currentQuestion.answers,(o,l)=>(v(),S("button",{key:l,class:ge(["answer-btn",{selected:r.selectedAnswer===l}]),onClick:c=>r.selectAnswer(l)},[a("span",a_e,m(String.fromCharCode(65+l)),1),a("span",l_e,m(o),1)],10,o_e))),128))]),a("div",c_e,[a("button",{class:"next-btn",disabled:r.selectedAnswer===null,onClick:e[1]||(e[1]=(...o)=>r.nextQuestion&&r.nextQuestion(...o))},[se(m(r.isLastQuestion?"Finish Test":"Next Question")+" ",1),e[5]||(e[5]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))],8,u_e)])])]))])}const I_e=Je(z1e,[["render",k_e],["__scopeId","data-v-9f61e8d5"]]),C_e=()=>yt(()=>import("./MyCourses-Oj9Fjkgb.js"),__vite__mapDeps([0,1])),A_e=()=>yt(()=>import("./LessonPage-DdzCT28f.js"),__vite__mapDeps([2,3])),P_e=()=>yt(()=>import("./TopicFinished-B6S1am6j.js"),__vite__mapDeps([4,5])),x_e=()=>yt(()=>import("./TopicOverview-BBDCaTDg.js"),__vite__mapDeps([6,7])),L_e=()=>yt(()=>Promise.resolve().then(()=>gG),void 0),R_e=()=>{const t=Jr.getters["user/userStatus"],e=localStorage.getItem("userStatus"),s=localStorage.getItem("subscriptionData");let r="free";if(s)try{const o=JSON.parse(s);o.plan&&o.expiryDate&&new Date<new Date(o.expiryDate)&&(r=o.plan)}catch{}const n=r!=="free"?r:t||e||"free";return["free","start","pro"].includes(n)?n:"free"},yl=(t,e,s)=>(r,n,i)=>{const o=R_e();if(e.includes(o))return i();sessionStorage.setItem("intendedRoute",JSON.stringify({path:r.path,query:r.query,params:r.params}));const c=e.includes("pro")?"pro":"start";return i({name:"PaymentSelection",params:{plan:c},query:{feature:t,requiredPlan:c,returnTo:r.path,message:s,provider:"multicard"}})},N_e=[{path:"/",name:"HomePage",component:cX,meta:{title:"Home"}},{path:"/about-us",name:"AboutUsPage",component:L_e,meta:{title:"About Us"}},{path:"/settings",name:"SettingsPage",component:HC,meta:{title:"Settings",requiresAuth:!0}},{path:"/placement-test",name:"PlacementTest",component:W1e,meta:{title:"Placement Test",requiresAuth:!0}},{path:"/level-test",name:"LevelTest",component:I_e,meta:{title:"Level Test",requiresAuth:!0}},{path:"/profile",component:kJ,meta:{requiresAuth:!0},children:[{path:"",redirect:"/profile/main"},{path:"main",name:"MainPage",component:Tce,meta:{title:"Home"}},{path:"catalogue",name:"CataloguePage",component:bne,meta:{title:"Catalogue"}},{path:"my-courses",name:"MyCourses",component:C_e,meta:{title:"My Courses"}},{path:"updated-courses",name:"UpdatedCourses",component:Ese,meta:{title:"Current Courses"}},{path:"diary",name:"DiaryPage",component:xge,meta:{title:"Diary"}},{path:"homeworks",name:"HomeworkList",component:_fe,meta:{title:"Homework"}},{path:"analytics",name:"UserAnalyticsPanel",component:yde,meta:{title:"Analytics"},beforeEnter:yl("analytics",["pro"],"Advanced analytics available with Pro subscription")},{path:"goal",name:"StudyGoal",component:ohe,meta:{title:"Study Goals"},beforeEnter:yl("goals",["start","pro"],"Goals available with Start subscription")},{path:"homework",name:"HomeworkHelp",component:Mhe,meta:{title:"Homework Help"},beforeEnter:yl("homework_help",["start","pro"],"Homework help available with Start subscription")},{path:"tests",name:"ProfileTestsPage",component:Oye,meta:{title:"Tests"},beforeEnter:yl("tests",["start","pro"],"Tests available with Start subscription")},{path:"vocabulary",name:"ProfileVocabularyPage",component:ZZ,meta:{title:"Vocabulary"},beforeEnter:yl("vocabulary",["start","pro"],"Vocabulary available with Start subscription")},{path:"homeworks/:id",name:"HomeworkPage",component:Tpe,props:t=>({homeworkId:t.params.id,...t.query}),meta:{title:"Complete Homework"}}]},{path:"/lesson/:id",name:"LessonPage",component:A_e,props:!0,meta:{title:"Lesson"}},{path:"/topic/:id/overview",name:"TopicOverview",component:x_e,props:!0,meta:{title:"Topic Overview"}},{path:"/finished",name:"TopicFinished",component:P_e,meta:{requiresAuth:!0,title:"Topic Completed"}},{path:"/pay/:plan",name:"PaymentSelection",component:qp,props:t=>({plan:t.params.plan,userId:t.query.userId,userName:t.query.userName,userEmail:t.query.userEmail,currentPlan:t.query.currentPlan,provider:t.query.provider||"multicard",...t.query}),meta:{title:"Payment Method Selection",requiresAuth:!0},beforeEnter:(t,e,s)=>{if(!["start","pro"].includes(t.params.plan))return s({name:"SettingsPage",query:{error:"invalid_plan"}});s()}},{path:"/payment/checkout",name:"UniversalCheckout",component:qp,meta:{title:"Payment Checkout",requiresAuth:!0},props:t=>({plan:t.query.plan,userId:t.query.userId,userName:t.query.userName,userEmail:t.query.userEmail,currentPlan:t.query.currentPlan,provider:t.query.provider||"multicard",amount:t.query.amount,...t.query})},{path:"/payment/:provider/checkout",name:"ProviderCheckout",component:qp,props:t=>({provider:t.params.provider,plan:t.query.plan,userId:t.query.userId,userName:t.query.userName,userEmail:t.query.userEmail,currentPlan:t.query.currentPlan,amount:t.query.amount,...t.query}),meta:{title:"Payment Checkout",requiresAuth:!0},beforeEnter:(t,e,s)=>{if(!["payme","multicard","click","uzum"].includes(t.params.provider))return s({name:"PaymentSelection",params:{plan:t.query.plan||"start"}});s()}},{path:"/payment/success/:provider?",name:"UniversalPaymentSuccess",component:R0e,props:t=>({provider:t.params.provider||t.query.provider||"unknown",transactionId:t.query.transactionId||t.query.transaction_id,plan:t.query.plan,amount:t.query.amount,...t.query}),meta:{title:"Payment Successful"}},{path:"/payment/failed/:provider?",name:"UniversalPaymentFailed",component:kw,props:t=>({provider:t.params.provider||t.query.provider||"unknown",error:t.query.error||t.query.errorMessage,transactionId:t.query.transactionId||t.query.transaction_id,...t.query}),meta:{title:"Payment Failed"}},{path:"/payment/return/:provider",name:"ProviderReturn",component:W0e,props:t=>({provider:t.params.provider,...t.query,...t.params}),meta:{title:"Processing Payment"},beforeEnter:(t,e,s)=>{if(!["payme","multicard","click","uzum"].includes(t.params.provider))return s({name:"UniversalPaymentFailed",params:{provider:"unknown"},query:{error:"Invalid payment provider"}});s()}},{path:"/payment/cancel/:provider?",name:"PaymentCancel",component:kw,props:t=>({provider:t.params.provider||"unknown",error:"Payment was cancelled by user",cancelled:!0,...t.query}),meta:{title:"Payment Cancelled"}},{path:"/vocabulary/:language?",redirect:"/profile/vocabulary"},{path:"/payment/:plan?",redirect:t=>`/pay/${t.params.plan||"start"}`},{path:"/payme/:plan",redirect:t=>({name:"PaymentSelection",params:{plan:t.params.plan},query:{provider:"payme",...t.query}})},{path:"/:catchAll(.*)",name:"NotFound",redirect:"/"}],bc=xM({history:iM(),routes:N_e,scrollBehavior(t,e,s){return t.hash?{el:t.hash,behavior:"smooth",top:80}:s||{top:0}}});bc.beforeEach(async(t,e,s)=>{try{try{const{authInitPromise:i}=await yt(async()=>{const{authInitPromise:o}=await Promise.resolve().then(()=>Zwe);return{authInitPromise:o}},void 0);await i}catch{}const r=Jr.getters.isLoggedIn,n=t.matched.some(i=>i.meta.requiresAuth);if(["LessonPage","TopicOverview"].includes(t.name))return s();if(n&&!r)return s({name:"HomePage",query:{redirect:t.fullPath,loginRequired:"true"}});if(t.name==="UniversalPaymentSuccess"){const i=sessionStorage.getItem("intendedRoute");if(i)try{const o=JSON.parse(i);sessionStorage.removeItem("intendedRoute"),setTimeout(()=>{bc.push(o)},3e3)}catch{}}s()}catch{s(!1)}});bc.afterEach((t,e)=>{const s="ACED - Educational Platform";if(document.title=t.meta.title?`${t.meta.title} - ACED`:s,Jr.getters.isLoggedIn&&!t.path.includes("/pay")){const r=Jr.getters["user/lastPaymentCheck"],n=5*60*1e3;(!r||Date.now()-r>n)&&Jr.dispatch("user/checkPendingPayments").catch(i=>{})}});bc.onError(t=>{t.name!=="NavigationDuplicated"&&(t.message.includes("Failed to fetch dynamically imported module")||t.message.includes("Loading chunk"))&&window.location.reload()});const OP=Object.freeze(Object.defineProperty({__proto__:null,default:bc},Symbol.toStringTag,{value:"Module"}));var k2e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O_e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Sv(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var od={exports:{}},jp={exports:{}},Hp={};/**
* @vue/compiler-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const xa=Symbol(""),da=Symbol(""),Ef=Symbol(""),wc=Symbol(""),Ev=Symbol(""),Ti=Symbol(""),Tv=Symbol(""),kv=Symbol(""),Tf=Symbol(""),kf=Symbol(""),Ya=Symbol(""),If=Symbol(""),Iv=Symbol(""),Cf=Symbol(""),Af=Symbol(""),Pf=Symbol(""),xf=Symbol(""),Lf=Symbol(""),Rf=Symbol(""),Cv=Symbol(""),Av=Symbol(""),Kc=Symbol(""),Sc=Symbol(""),Nf=Symbol(""),Of=Symbol(""),La=Symbol(""),Qa=Symbol(""),Mf=Symbol(""),sh=Symbol(""),MP=Symbol(""),rh=Symbol(""),Ec=Symbol(""),DP=Symbol(""),$P=Symbol(""),Df=Symbol(""),UP=Symbol(""),FP=Symbol(""),$f=Symbol(""),Pv=Symbol(""),So={[xa]:"Fragment",[da]:"Teleport",[Ef]:"Suspense",[wc]:"KeepAlive",[Ev]:"BaseTransition",[Ti]:"openBlock",[Tv]:"createBlock",[kv]:"createElementBlock",[Tf]:"createVNode",[kf]:"createElementVNode",[Ya]:"createCommentVNode",[If]:"createTextVNode",[Iv]:"createStaticVNode",[Cf]:"resolveComponent",[Af]:"resolveDynamicComponent",[Pf]:"resolveDirective",[xf]:"resolveFilter",[Lf]:"withDirectives",[Rf]:"renderList",[Cv]:"renderSlot",[Av]:"createSlots",[Kc]:"toDisplayString",[Sc]:"mergeProps",[Nf]:"normalizeClass",[Of]:"normalizeStyle",[La]:"normalizeProps",[Qa]:"guardReactiveProps",[Mf]:"toHandlers",[sh]:"camelize",[MP]:"capitalize",[rh]:"toHandlerKey",[Ec]:"setBlockTracking",[DP]:"pushScopeId",[$P]:"popScopeId",[Df]:"withCtx",[UP]:"unref",[FP]:"isRef",[$f]:"withMemo",[Pv]:"isMemoSame"};function VP(t){Object.getOwnPropertySymbols(t).forEach(e=>{So[e]=t[e]})}const M_e={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},D_e={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},$_e={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},U_e={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},is={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function BP(t,e=""){return{type:0,source:e,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:is}}function Ra(t,e,s,r,n,i,o,l=!1,c=!1,u=!1,d=is){return t&&(l?(t.helper(Ti),t.helper(ko(t.inSSR,u))):t.helper(To(t.inSSR,u)),o&&t.helper(Lf)),{type:13,tag:e,props:s,children:r,patchFlag:n,dynamicProps:i,directives:o,isBlock:l,disableTracking:c,isComponent:u,loc:d}}function fi(t,e=is){return{type:17,loc:e,elements:t}}function ar(t,e=is){return{type:15,loc:e,properties:t}}function Bt(t,e){return{type:16,loc:is,key:Fe(t)?He(t,!0):t,value:e}}function He(t,e=!1,s=is,r=0){return{type:4,loc:s,content:t,isStatic:e,constType:e?3:r}}function F_e(t,e){return{type:5,loc:e,content:Fe(t)?He(t,!1,e):t}}function yr(t,e=is){return{type:8,loc:e,children:t}}function Gt(t,e=[],s=is){return{type:14,loc:s,callee:t,arguments:e}}function Eo(t,e=void 0,s=!1,r=!1,n=is){return{type:18,params:t,returns:e,newline:s,isSlot:r,loc:n}}function nh(t,e,s,r=!0){return{type:19,test:t,consequent:e,alternate:s,newline:r,loc:is}}function qP(t,e,s=!1,r=!1){return{type:20,index:t,value:e,needPauseTracking:s,inVOnce:r,needArraySpread:!1,loc:is}}function jP(t){return{type:21,body:t,loc:is}}function V_e(t){return{type:22,elements:t,loc:is}}function B_e(t,e,s){return{type:23,test:t,consequent:e,alternate:s,loc:is}}function q_e(t,e){return{type:24,left:t,right:e,loc:is}}function j_e(t){return{type:25,expressions:t,loc:is}}function H_e(t){return{type:26,returns:t,loc:is}}function To(t,e){return t||e?Tf:kf}function ko(t,e){return t||e?Tv:kv}function Uf(t,{helper:e,removeHelper:s,inSSR:r}){t.isBlock||(t.isBlock=!0,s(To(r,t.isComponent)),e(Ti),e(ko(r,t.isComponent)))}const Iw=new Uint8Array([123,123]),Cw=new Uint8Array([125,125]);function Aw(t){return t>=97&&t<=122||t>=65&&t<=90}function ir(t){return t===32||t===10||t===9||t===12||t===13}function Kn(t){return t===47||t===62||ir(t)}function ih(t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++)e[s]=t.charCodeAt(s);return e}const Ss={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class W_e{constructor(e,s){this.stack=e,this.cbs=s,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=Iw,this.delimiterClose=Cw,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=Iw,this.delimiterClose=Cw}getPos(e){let s=1,r=e+1;for(let n=this.newlines.length-1;n>=0;n--){const i=this.newlines[n];if(e>i){s=n+2,r=e-i;break}}return{column:r,line:s,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const s=this.index+1-this.delimiterOpen.length;s>this.sectionStart&&this.cbs.ontext(this.sectionStart,s),this.state=3,this.sectionStart=s}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const s=this.sequenceIndex===this.currentSequence.length;if(!(s?Kn(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!s){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||ir(e)){const s=this.index-this.currentSequence.length;if(this.sectionStart<s){const r=this.index;this.index=s,this.cbs.ontext(this.sectionStart,s),this.index=r}this.sectionStart=s+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Ss.TitleEnd||this.currentSequence===Ss.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===Ss.Cdata[this.sequenceIndex]?++this.sequenceIndex===Ss.Cdata.length&&(this.state=28,this.currentSequence=Ss.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const s=this.buffer.charCodeAt(this.index);if(s===10&&this.newlines.push(this.index),s===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Ss.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,s){this.enterRCDATA(e,s),this.state=31}enterRCDATA(e,s){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=s}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):Aw(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){Kn(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(Kn(e)){const s=this.buffer.slice(this.sectionStart,this.index);s!=="template"&&this.enterRCDATA(ih("</"+s),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){ir(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=Aw(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||ir(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):ir(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):ir(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||Kn(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||Kn(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||Kn(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||Kn(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||Kn(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):ir(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):ir(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,s){(e===s||this.fastForwardTo(s))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){ir(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=Ss.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===Ss.ScriptEnd[3]?this.startSpecial(Ss.ScriptEnd,4):e===Ss.StyleEnd[3]?this.startSpecial(Ss.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===Ss.TitleEnd[3]?this.startSpecial(Ss.TitleEnd,4):e===Ss.TextareaEnd[3]?this.startSpecial(Ss.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const s=this.buffer.charCodeAt(this.index);switch(s===10&&this.newlines.push(this.index),this.state){case 1:{this.stateText(s);break}case 2:{this.stateInterpolationOpen(s);break}case 3:{this.stateInterpolation(s);break}case 4:{this.stateInterpolationClose(s);break}case 31:{this.stateSpecialStartSequence(s);break}case 32:{this.stateInRCDATA(s);break}case 26:{this.stateCDATASequence(s);break}case 19:{this.stateInAttrValueDoubleQuotes(s);break}case 12:{this.stateInAttrName(s);break}case 13:{this.stateInDirName(s);break}case 14:{this.stateInDirArg(s);break}case 15:{this.stateInDynamicDirArg(s);break}case 16:{this.stateInDirModifier(s);break}case 28:{this.stateInCommentLike(s);break}case 27:{this.stateInSpecialComment(s);break}case 11:{this.stateBeforeAttrName(s);break}case 6:{this.stateInTagName(s);break}case 34:{this.stateInSFCRootTagName(s);break}case 9:{this.stateInClosingTagName(s);break}case 5:{this.stateBeforeTagName(s);break}case 17:{this.stateAfterAttrName(s);break}case 20:{this.stateInAttrValueSingleQuotes(s);break}case 18:{this.stateBeforeAttrValue(s);break}case 8:{this.stateBeforeClosingTagName(s);break}case 10:{this.stateAfterClosingTagName(s);break}case 29:{this.stateBeforeSpecialS(s);break}case 30:{this.stateBeforeSpecialT(s);break}case 21:{this.stateInAttrValueNoQuotes(s);break}case 7:{this.stateInSelfClosingTag(s);break}case 23:{this.stateInDeclaration(s);break}case 22:{this.stateBeforeDeclaration(s);break}case 25:{this.stateBeforeComment(s);break}case 24:{this.stateInProcessingInstruction(s);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===Ss.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,s){}}const z_e={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},G_e={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:t=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${t}.sync\` should be changed to \`v-model:${t}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function hg(t,{compatConfig:e}){const s=e&&e[t];return t==="MODE"?s||3:s}function uo(t,e){const s=hg("MODE",e),r=hg(t,e);return s===3?r===!0:r!==!1}function Na(t,e,s,...r){return uo(t,e)}function K_e(t,e,s,...r){if(hg(t,e)==="suppress-warning")return;const{message:i,link:o}=G_e[t],l=`(deprecation ${t}) ${typeof i=="function"?i(...r):i}${o?`
  Details: ${o}`:""}`,c=new SyntaxError(l);c.code=t,s&&(c.loc=s),e.onWarn(c)}function xv(t){throw t}function HP(t){}function Pt(t,e,s,r){const n=`https://vuejs.org/error-reference/#compiler-${t}`,i=new SyntaxError(String(n));return i.code=t,i.loc=e,i}const Y_e={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},Q_e={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function X_e(t,e,s=!1,r=[],n=Object.create(null)){}function J_e(t,e,s){return!1}function Z_e(t,e){if(t&&(t.type==="ObjectProperty"||t.type==="ArrayPattern")){let s=e.length;for(;s--;){const r=e[s];if(r.type==="AssignmentExpression")return!0;if(r.type!=="ObjectProperty"&&!r.type.endsWith("Pattern"))break}}return!1}function ebe(t){let e=t.length;for(;e--;){const s=t[e];if(s.type==="NewExpression")return!0;if(s.type!=="MemberExpression")break}return!1}function tbe(t,e){for(const s of t.params)for(const r of bn(s))e(r)}function sbe(t,e){for(const s of t.body)if(s.type==="VariableDeclaration"){if(s.declare)continue;for(const r of s.declarations)for(const n of bn(r.id))e(n)}else if(s.type==="FunctionDeclaration"||s.type==="ClassDeclaration"){if(s.declare||!s.id)continue;e(s.id)}else rbe(s)&&nbe(s,!0,e)}function rbe(t){return t.type==="ForOfStatement"||t.type==="ForInStatement"||t.type==="ForStatement"}function nbe(t,e,s){const r=t.type==="ForStatement"?t.init:t.left;if(r&&r.type==="VariableDeclaration"&&(r.kind==="var"&&e))for(const n of r.declarations)for(const i of bn(n.id))s(i)}function bn(t,e=[]){switch(t.type){case"Identifier":e.push(t);break;case"MemberExpression":let s=t;for(;s.type==="MemberExpression";)s=s.object;e.push(s);break;case"ObjectPattern":for(const r of t.properties)r.type==="RestElement"?bn(r.argument,e):bn(r.value,e);break;case"ArrayPattern":t.elements.forEach(r=>{r&&bn(r,e)});break;case"RestElement":bn(t.argument,e);break;case"AssignmentPattern":bn(t.left,e);break}return e}const ibe=t=>/Function(?:Expression|Declaration)$|Method$/.test(t.type),WP=t=>t&&(t.type==="ObjectProperty"||t.type==="ObjectMethod")&&!t.computed,obe=(t,e)=>WP(e)&&e.key===t,zP=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function GP(t){return zP.includes(t.type)?GP(t.expression):t}const qs=t=>t.type===4&&t.isStatic;function Lv(t){switch(t){case"Teleport":case"teleport":return da;case"Suspense":case"suspense":return Ef;case"KeepAlive":case"keep-alive":return wc;case"BaseTransition":case"base-transition":return Ev}}const abe=/^\d|[^\$\w\xA0-\uFFFF]/,Yc=t=>!abe.test(t),lbe=/[A-Za-z_$\xA0-\uFFFF]/,cbe=/[\.\?\w$\xA0-\uFFFF]/,ube=/\s+[.[]\s*|\s*[.[]\s+/g,KP=t=>t.type===4?t.content:t.loc.source,YP=t=>{const e=KP(t).trim().replace(ube,l=>l.trim());let s=0,r=[],n=0,i=0,o=null;for(let l=0;l<e.length;l++){const c=e.charAt(l);switch(s){case 0:if(c==="[")r.push(s),s=1,n++;else if(c==="(")r.push(s),s=2,i++;else if(!(l===0?lbe:cbe).test(c))return!1;break;case 1:c==="'"||c==='"'||c==="`"?(r.push(s),s=3,o=c):c==="["?n++:c==="]"&&(--n||(s=r.pop()));break;case 2:if(c==="'"||c==='"'||c==="`")r.push(s),s=3,o=c;else if(c==="(")i++;else if(c===")"){if(l===e.length-1)return!1;--i||(s=r.pop())}break;case 3:c===o&&(s=r.pop(),o=null);break}}return!n&&!i},dbe=ls,Rv=YP,hbe=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,QP=t=>hbe.test(KP(t)),fbe=ls,XP=QP;function pbe(t,e,s=e.length){return JP({offset:t.offset,line:t.line,column:t.column},e,s)}function JP(t,e,s=e.length){let r=0,n=-1;for(let i=0;i<s;i++)e.charCodeAt(i)===10&&(r++,n=i);return t.offset+=s,t.line+=r,t.column=n===-1?t.column+s:s-n,t}function mbe(t,e){if(!t)throw new Error(e||"unexpected compiler condition")}function Bs(t,e,s=!1){for(let r=0;r<t.props.length;r++){const n=t.props[r];if(n.type===7&&(s||n.exp)&&(Fe(e)?n.name===e:e.test(n.name)))return n}}function Qc(t,e,s=!1,r=!1){for(let n=0;n<t.props.length;n++){const i=t.props[n];if(i.type===6){if(s)continue;if(i.name===e&&(i.value||r))return i}else if(i.name==="bind"&&(i.exp||r)&&oi(i.arg,e))return i}}function oi(t,e){return!!(t&&qs(t)&&t.content===e)}function ZP(t){return t.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function ad(t){return t.type===5||t.type===2}function Nv(t){return t.type===7&&t.name==="slot"}function Oa(t){return t.type===1&&t.tagType===3}function Tc(t){return t.type===1&&t.tagType===2}const gbe=new Set([La,Qa]);function ex(t,e=[]){if(t&&!Fe(t)&&t.type===14){const s=t.callee;if(!Fe(s)&&gbe.has(s))return ex(t.arguments[0],e.concat(t))}return[t,e]}function kc(t,e,s){let r,n=t.type===13?t.props:t.arguments[2],i=[],o;if(n&&!Fe(n)&&n.type===14){const l=ex(n);n=l[0],i=l[1],o=i[i.length-1]}if(n==null||Fe(n))r=ar([e]);else if(n.type===14){const l=n.arguments[0];!Fe(l)&&l.type===15?Pw(e,l)||l.properties.unshift(e):n.callee===Mf?r=Gt(s.helper(Sc),[ar([e]),n]):n.arguments.unshift(ar([e])),!r&&(r=n)}else n.type===15?(Pw(e,n)||n.properties.unshift(e),r=n):(r=Gt(s.helper(Sc),[ar([e]),n]),o&&o.callee===Qa&&(o=i[i.length-2]));t.type===13?o?o.arguments[0]=r:t.props=r:o?o.arguments[0]=r:t.arguments[2]=r}function Pw(t,e){let s=!1;if(t.key.type===4){const r=t.key.content;s=e.properties.some(n=>n.key.type===4&&n.key.content===r)}return s}function Ma(t,e){return`_${e}_${t.replace(/[^\w]/g,(s,r)=>s==="-"?"_":t.charCodeAt(r).toString())}`}function Tr(t,e){if(!t||Object.keys(e).length===0)return!1;switch(t.type){case 1:for(let s=0;s<t.props.length;s++){const r=t.props[s];if(r.type===7&&(Tr(r.arg,e)||Tr(r.exp,e)))return!0}return t.children.some(s=>Tr(s,e));case 11:return Tr(t.source,e)?!0:t.children.some(s=>Tr(s,e));case 9:return t.branches.some(s=>Tr(s,e));case 10:return Tr(t.condition,e)?!0:t.children.some(s=>Tr(s,e));case 4:return!t.isStatic&&Yc(t.content)&&!!e[t.content];case 8:return t.children.some(s=>ft(s)&&Tr(s,e));case 5:case 12:return Tr(t.content,e);case 2:case 3:case 20:return!1;default:return!1}}function tx(t){return t.type===14&&t.callee===$f?t.arguments[1].returns:t}const sx=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,rx={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:sa,isPreTag:sa,isIgnoreNewlineTag:sa,isCustomElement:sa,onError:xv,onWarn:HP,comments:!1,prefixIdentifiers:!1};let dt=rx,Ic=null,An="",Es=null,it=null,Ws="",pn=-1,Gi=-1,Ov=0,ti=!1,fg=null;const Ot=[],Vt=new W_e(Ot,{onerr:fn,ontext(t,e){Du(fs(t,e),t,e)},ontextentity(t,e,s){Du(t,e,s)},oninterpolation(t,e){if(ti)return Du(fs(t,e),t,e);let s=t+Vt.delimiterOpen.length,r=e-Vt.delimiterClose.length;for(;ir(An.charCodeAt(s));)s++;for(;ir(An.charCodeAt(r-1));)r--;let n=fs(s,r);n.includes("&")&&(n=dt.decodeEntities(n,!1)),pg({type:5,content:cd(n,!1,qt(s,r)),loc:qt(t,e)})},onopentagname(t,e){const s=fs(t,e);Es={type:1,tag:s,ns:dt.getNamespace(s,Ot[0],dt.ns),tagType:0,props:[],children:[],loc:qt(t-1,e),codegenNode:void 0}},onopentagend(t){Lw(t)},onclosetag(t,e){const s=fs(t,e);if(!dt.isVoidTag(s)){let r=!1;for(let n=0;n<Ot.length;n++)if(Ot[n].tag.toLowerCase()===s.toLowerCase()){r=!0,n>0&&fn(24,Ot[0].loc.start.offset);for(let o=0;o<=n;o++){const l=Ot.shift();ld(l,e,o<n)}break}r||fn(23,nx(t,60))}},onselfclosingtag(t){const e=Es.tag;Es.isSelfClosing=!0,Lw(t),Ot[0]&&Ot[0].tag===e&&ld(Ot.shift(),t)},onattribname(t,e){it={type:6,name:fs(t,e),nameLoc:qt(t,e),value:void 0,loc:qt(t)}},ondirname(t,e){const s=fs(t,e),r=s==="."||s===":"?"bind":s==="@"?"on":s==="#"?"slot":s.slice(2);if(!ti&&r===""&&fn(26,t),ti||r==="")it={type:6,name:s,nameLoc:qt(t,e),value:void 0,loc:qt(t)};else if(it={type:7,name:r,rawName:s,exp:void 0,arg:void 0,modifiers:s==="."?[He("prop")]:[],loc:qt(t)},r==="pre"){ti=Vt.inVPre=!0,fg=Es;const n=Es.props;for(let i=0;i<n.length;i++)n[i].type===7&&(n[i]=Cbe(n[i]))}},ondirarg(t,e){if(t===e)return;const s=fs(t,e);if(ti)it.name+=s,to(it.nameLoc,e);else{const r=s[0]!=="[";it.arg=cd(r?s:s.slice(1,-1),r,qt(t,e),r?3:0)}},ondirmodifier(t,e){const s=fs(t,e);if(ti)it.name+="."+s,to(it.nameLoc,e);else if(it.name==="slot"){const r=it.arg;r&&(r.content+="."+s,to(r.loc,e))}else{const r=He(s,!0,qt(t,e));it.modifiers.push(r)}},onattribdata(t,e){Ws+=fs(t,e),pn<0&&(pn=t),Gi=e},onattribentity(t,e,s){Ws+=t,pn<0&&(pn=e),Gi=s},onattribnameend(t){const e=it.loc.start.offset,s=fs(e,t);it.type===7&&(it.rawName=s),Es.props.some(r=>(r.type===7?r.rawName:r.name)===s)&&fn(2,e)},onattribend(t,e){if(Es&&it){if(to(it.loc,e),t!==0)if(Ws.includes("&")&&(Ws=dt.decodeEntities(Ws,!0)),it.type===6)it.name==="class"&&(Ws=ox(Ws).trim()),t===1&&!Ws&&fn(13,e),it.value={type:2,content:Ws,loc:t===1?qt(pn,Gi):qt(pn-1,Gi+1)},Vt.inSFCRoot&&Es.tag==="template"&&it.name==="lang"&&Ws&&Ws!=="html"&&Vt.enterRCDATA(ih("</template"),0);else{let s=0;it.exp=cd(Ws,!1,qt(pn,Gi),0,s),it.name==="for"&&(it.forParseResult=vbe(it.exp));let r=-1;it.name==="bind"&&(r=it.modifiers.findIndex(n=>n.content==="sync"))>-1&&Na("COMPILER_V_BIND_SYNC",dt,it.loc,it.rawName)&&(it.name="model",it.modifiers.splice(r,1))}(it.type!==7||it.name!=="pre")&&Es.props.push(it)}Ws="",pn=Gi=-1},oncomment(t,e){dt.comments&&pg({type:3,content:fs(t,e),loc:qt(t-4,e+3)})},onend(){const t=An.length;for(let e=0;e<Ot.length;e++)ld(Ot[e],t-1),fn(24,Ot[e].loc.start.offset)},oncdata(t,e){Ot[0].ns!==0?Du(fs(t,e),t,e):fn(1,t-9)},onprocessinginstruction(t){(Ot[0]?Ot[0].ns:dt.ns)===0&&fn(21,t-1)}}),xw=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ybe=/^\(|\)$/g;function vbe(t){const e=t.loc,s=t.content,r=s.match(sx);if(!r)return;const[,n,i]=r,o=(f,p,g=!1)=>{const b=e.start.offset+p,k=b+f.length;return cd(f,!1,qt(b,k),0,g?1:0)},l={source:o(i.trim(),s.indexOf(i,n.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let c=n.trim().replace(ybe,"").trim();const u=n.indexOf(c),d=c.match(xw);if(d){c=c.replace(xw,"").trim();const f=d[1].trim();let p;if(f&&(p=s.indexOf(f,u+c.length),l.key=o(f,p,!0)),d[2]){const g=d[2].trim();g&&(l.index=o(g,s.indexOf(g,l.key?p+f.length:u+c.length),!0))}}return c&&(l.value=o(c,u,!0)),l}function fs(t,e){return An.slice(t,e)}function Lw(t){Vt.inSFCRoot&&(Es.innerLoc=qt(t+1,t+1)),pg(Es);const{tag:e,ns:s}=Es;s===0&&dt.isPreTag(e)&&Ov++,dt.isVoidTag(e)?ld(Es,t):(Ot.unshift(Es),(s===1||s===2)&&(Vt.inXML=!0)),Es=null}function Du(t,e,s){{const i=Ot[0]&&Ot[0].tag;i!=="script"&&i!=="style"&&t.includes("&")&&(t=dt.decodeEntities(t,!1))}const r=Ot[0]||Ic,n=r.children[r.children.length-1];n&&n.type===2?(n.content+=t,to(n.loc,s)):r.children.push({type:2,content:t,loc:qt(e,s)})}function ld(t,e,s=!1){s?to(t.loc,nx(e,60)):to(t.loc,_be(e,62)+1),Vt.inSFCRoot&&(t.children.length?t.innerLoc.end=et({},t.children[t.children.length-1].loc.end):t.innerLoc.end=et({},t.innerLoc.start),t.innerLoc.source=fs(t.innerLoc.start.offset,t.innerLoc.end.offset));const{tag:r,ns:n,children:i}=t;if(ti||(r==="slot"?t.tagType=2:Rw(t)?t.tagType=3:wbe(t)&&(t.tagType=1)),Vt.inRCDATA||(t.children=ix(i)),n===0&&dt.isIgnoreNewlineTag(r)){const o=i[0];o&&o.type===2&&(o.content=o.content.replace(/^\r?\n/,""))}n===0&&dt.isPreTag(r)&&Ov--,fg===t&&(ti=Vt.inVPre=!1,fg=null),Vt.inXML&&(Ot[0]?Ot[0].ns:dt.ns)===0&&(Vt.inXML=!1);{const o=t.props;if(!Vt.inSFCRoot&&uo("COMPILER_NATIVE_TEMPLATE",dt)&&t.tag==="template"&&!Rw(t)){const c=Ot[0]||Ic,u=c.children.indexOf(t);c.children.splice(u,1,...t.children)}const l=o.find(c=>c.type===6&&c.name==="inline-template");l&&Na("COMPILER_INLINE_TEMPLATE",dt,l.loc)&&t.children.length&&(l.value={type:2,content:fs(t.children[0].loc.start.offset,t.children[t.children.length-1].loc.end.offset),loc:l.loc})}}function _be(t,e){let s=t;for(;An.charCodeAt(s)!==e&&s<An.length-1;)s++;return s}function nx(t,e){let s=t;for(;An.charCodeAt(s)!==e&&s>=0;)s--;return s}const bbe=new Set(["if","else","else-if","for","slot"]);function Rw({tag:t,props:e}){if(t==="template"){for(let s=0;s<e.length;s++)if(e[s].type===7&&bbe.has(e[s].name))return!0}return!1}function wbe({tag:t,props:e}){if(dt.isCustomElement(t))return!1;if(t==="component"||Sbe(t.charCodeAt(0))||Lv(t)||dt.isBuiltInComponent&&dt.isBuiltInComponent(t)||dt.isNativeTag&&!dt.isNativeTag(t))return!0;for(let s=0;s<e.length;s++){const r=e[s];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(Na("COMPILER_IS_ON_ELEMENT",dt,r.loc))return!0}}else if(r.name==="bind"&&oi(r.arg,"is")&&Na("COMPILER_IS_ON_ELEMENT",dt,r.loc))return!0}return!1}function Sbe(t){return t>64&&t<91}const Ebe=/\r\n/g;function ix(t,e){const s=dt.whitespace!=="preserve";let r=!1;for(let n=0;n<t.length;n++){const i=t[n];if(i.type===2)if(Ov)i.content=i.content.replace(Ebe,`
`);else if(Tbe(i.content)){const o=t[n-1]&&t[n-1].type,l=t[n+1]&&t[n+1].type;!o||!l||s&&(o===3&&(l===3||l===1)||o===1&&(l===3||l===1&&kbe(i.content)))?(r=!0,t[n]=null):i.content=" "}else s&&(i.content=ox(i.content))}return r?t.filter(Boolean):t}function Tbe(t){for(let e=0;e<t.length;e++)if(!ir(t.charCodeAt(e)))return!1;return!0}function kbe(t){for(let e=0;e<t.length;e++){const s=t.charCodeAt(e);if(s===10||s===13)return!0}return!1}function ox(t){let e="",s=!1;for(let r=0;r<t.length;r++)ir(t.charCodeAt(r))?s||(e+=" ",s=!0):(e+=t[r],s=!1);return e}function pg(t){(Ot[0]||Ic).children.push(t)}function qt(t,e){return{start:Vt.getPos(t),end:e==null?e:Vt.getPos(e),source:e==null?e:fs(t,e)}}function Ibe(t){return qt(t.start.offset,t.end.offset)}function to(t,e){t.end=Vt.getPos(e),t.source=fs(t.start.offset,e)}function Cbe(t){const e={type:6,name:t.rawName,nameLoc:qt(t.loc.start.offset,t.loc.start.offset+t.rawName.length),value:void 0,loc:t.loc};if(t.exp){const s=t.exp.loc;s.end.offset<t.loc.end.offset&&(s.start.offset--,s.start.column--,s.end.offset++,s.end.column++),e.value={type:2,content:t.exp.content,loc:s}}return e}function cd(t,e=!1,s,r=0,n=0){return He(t,e,s,r)}function fn(t,e,s){dt.onError(Pt(t,qt(e,e)))}function Abe(){Vt.reset(),Es=null,it=null,Ws="",pn=-1,Gi=-1,Ot.length=0}function Mv(t,e){if(Abe(),An=t,dt=et({},rx),e){let n;for(n in e)e[n]!=null&&(dt[n]=e[n])}Vt.mode=dt.parseMode==="html"?1:dt.parseMode==="sfc"?2:0,Vt.inXML=dt.ns===1||dt.ns===2;const s=e&&e.delimiters;s&&(Vt.delimiterOpen=ih(s[0]),Vt.delimiterClose=ih(s[1]));const r=Ic=BP([],t);return Vt.parse(An),r.loc=qt(0,t.length),r.children=ix(r.children),Ic=null,r}function Pbe(t,e){ud(t,void 0,e,ax(t,t.children[0]))}function ax(t,e){const{children:s}=t;return s.length===1&&e.type===1&&!Tc(e)}function ud(t,e,s,r=!1,n=!1){const{children:i}=t,o=[];for(let d=0;d<i.length;d++){const f=i[d];if(f.type===1&&f.tagType===0){const p=r?0:Qs(f,s);if(p>0){if(p>=2){f.codegenNode.patchFlag=-1,o.push(f);continue}}else{const g=f.codegenNode;if(g.type===13){const b=g.patchFlag;if((b===void 0||b===512||b===1)&&cx(f,s)>=2){const k=ux(f);k&&(g.props=s.hoist(k))}g.dynamicProps&&(g.dynamicProps=s.hoist(g.dynamicProps))}}}else if(f.type===12&&(r?0:Qs(f,s))>=2){o.push(f);continue}if(f.type===1){const p=f.tagType===1;p&&s.scopes.vSlot++,ud(f,t,s,!1,n),p&&s.scopes.vSlot--}else if(f.type===11)ud(f,t,s,f.children.length===1,!0);else if(f.type===9)for(let p=0;p<f.branches.length;p++)ud(f.branches[p],t,s,f.branches[p].children.length===1,n)}let l=!1;if(o.length===i.length&&t.type===1){if(t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&ke(t.codegenNode.children))t.codegenNode.children=c(fi(t.codegenNode.children)),l=!0;else if(t.tagType===1&&t.codegenNode&&t.codegenNode.type===13&&t.codegenNode.children&&!ke(t.codegenNode.children)&&t.codegenNode.children.type===15){const d=u(t.codegenNode,"default");d&&(d.returns=c(fi(d.returns)),l=!0)}else if(t.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!ke(e.codegenNode.children)&&e.codegenNode.children.type===15){const d=Bs(t,"slot",!0),f=d&&d.arg&&u(e.codegenNode,d.arg);f&&(f.returns=c(fi(f.returns)),l=!0)}}if(!l)for(const d of o)d.codegenNode=s.cache(d.codegenNode);function c(d){const f=s.cache(d);return n&&s.hmr&&(f.needArraySpread=!0),f}function u(d,f){if(d.children&&!ke(d.children)&&d.children.type===15){const p=d.children.properties.find(g=>g.key===f||g.key.content===f);return p&&p.value}}o.length&&s.transformHoist&&s.transformHoist(i,s,t)}function Qs(t,e){const{constantCache:s}=e;switch(t.type){case 1:if(t.tagType!==0)return 0;const r=s.get(t);if(r!==void 0)return r;const n=t.codegenNode;if(n.type!==13||n.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject"&&t.tag!=="math")return 0;if(n.patchFlag===void 0){let o=3;const l=cx(t,e);if(l===0)return s.set(t,0),0;l<o&&(o=l);for(let c=0;c<t.children.length;c++){const u=Qs(t.children[c],e);if(u===0)return s.set(t,0),0;u<o&&(o=u)}if(o>1)for(let c=0;c<t.props.length;c++){const u=t.props[c];if(u.type===7&&u.name==="bind"&&u.exp){const d=Qs(u.exp,e);if(d===0)return s.set(t,0),0;d<o&&(o=d)}}if(n.isBlock){for(let c=0;c<t.props.length;c++)if(t.props[c].type===7)return s.set(t,0),0;e.removeHelper(Ti),e.removeHelper(ko(e.inSSR,n.isComponent)),n.isBlock=!1,e.helper(To(e.inSSR,n.isComponent))}return s.set(t,o),o}else return s.set(t,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Qs(t.content,e);case 4:return t.constType;case 8:let i=3;for(let o=0;o<t.children.length;o++){const l=t.children[o];if(Fe(l)||js(l))continue;const c=Qs(l,e);if(c===0)return 0;c<i&&(i=c)}return i;case 20:return 2;default:return 0}}const xbe=new Set([Nf,Of,La,Qa]);function lx(t,e){if(t.type===14&&!Fe(t.callee)&&xbe.has(t.callee)){const s=t.arguments[0];if(s.type===4)return Qs(s,e);if(s.type===14)return lx(s,e)}return 0}function cx(t,e){let s=3;const r=ux(t);if(r&&r.type===15){const{properties:n}=r;for(let i=0;i<n.length;i++){const{key:o,value:l}=n[i],c=Qs(o,e);if(c===0)return c;c<s&&(s=c);let u;if(l.type===4?u=Qs(l,e):l.type===14?u=lx(l,e):u=0,u===0)return u;u<s&&(s=u)}}return s}function ux(t){const e=t.codegenNode;if(e.type===13)return e.props}function dx(t,{filename:e="",prefixIdentifiers:s=!1,hoistStatic:r=!1,hmr:n=!1,cacheHandlers:i=!1,nodeTransforms:o=[],directiveTransforms:l={},transformHoist:c=null,isBuiltInComponent:u=ls,isCustomElement:d=ls,expressionPlugins:f=[],scopeId:p=null,slotted:g=!0,ssr:b=!1,inSSR:k=!1,ssrCssVars:L="",bindingMetadata:V=Ze,inline:R=!1,isTS:E=!1,onError:N=xv,onWarn:D=HP,compatConfig:U}){const C=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),w={filename:e,selfName:C&&Ci(It(C[1])),prefixIdentifiers:s,hoistStatic:r,hmr:n,cacheHandlers:i,nodeTransforms:o,directiveTransforms:l,transformHoist:c,isBuiltInComponent:u,isCustomElement:d,expressionPlugins:f,scopeId:p,slotted:g,ssr:b,inSSR:k,ssrCssVars:L,bindingMetadata:V,inline:R,isTS:E,onError:N,onWarn:D,compatConfig:U,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(_){const x=w.helpers.get(_)||0;return w.helpers.set(_,x+1),_},removeHelper(_){const x=w.helpers.get(_);if(x){const P=x-1;P?w.helpers.set(_,P):w.helpers.delete(_)}},helperString(_){return`_${So[w.helper(_)]}`},replaceNode(_){w.parent.children[w.childIndex]=w.currentNode=_},removeNode(_){const x=w.parent.children,P=_?x.indexOf(_):w.currentNode?w.childIndex:-1;!_||_===w.currentNode?(w.currentNode=null,w.onNodeRemoved()):w.childIndex>P&&(w.childIndex--,w.onNodeRemoved()),w.parent.children.splice(P,1)},onNodeRemoved:ls,addIdentifiers(_){},removeIdentifiers(_){},hoist(_){Fe(_)&&(_=He(_)),w.hoists.push(_);const x=He(`_hoisted_${w.hoists.length}`,!1,_.loc,2);return x.hoisted=_,x},cache(_,x=!1,P=!1){const O=qP(w.cached.length,_,x,P);return w.cached.push(O),O}};return w.filters=new Set,w}function hx(t,e){const s=dx(t,e);Xc(t,s),e.hoistStatic&&Pbe(t,s),e.ssr||Lbe(t,s),t.helpers=new Set([...s.helpers.keys()]),t.components=[...s.components],t.directives=[...s.directives],t.imports=s.imports,t.hoists=s.hoists,t.temps=s.temps,t.cached=s.cached,t.transformed=!0,t.filters=[...s.filters]}function Lbe(t,e){const{helper:s}=e,{children:r}=t;if(r.length===1){const n=r[0];if(ax(t,n)&&n.codegenNode){const i=n.codegenNode;i.type===13&&Uf(i,e),t.codegenNode=i}else t.codegenNode=n}else if(r.length>1){let n=64;t.codegenNode=Ra(e,s(xa),void 0,t.children,n,void 0,void 0,!0,void 0,!1)}}function Rbe(t,e){let s=0;const r=()=>{s--};for(;s<t.children.length;s++){const n=t.children[s];Fe(n)||(e.grandParent=e.parent,e.parent=t,e.childIndex=s,e.onNodeRemoved=r,Xc(n,e))}}function Xc(t,e){e.currentNode=t;const{nodeTransforms:s}=e,r=[];for(let i=0;i<s.length;i++){const o=s[i](t,e);if(o&&(ke(o)?r.push(...o):r.push(o)),e.currentNode)t=e.currentNode;else return}switch(t.type){case 3:e.ssr||e.helper(Ya);break;case 5:e.ssr||e.helper(Kc);break;case 9:for(let i=0;i<t.branches.length;i++)Xc(t.branches[i],e);break;case 10:case 11:case 1:case 0:Rbe(t,e);break}e.currentNode=t;let n=r.length;for(;n--;)r[n]()}function Dv(t,e){const s=Fe(t)?r=>r===t:r=>t.test(r);return(r,n)=>{if(r.type===1){const{props:i}=r;if(r.tagType===3&&i.some(Nv))return;const o=[];for(let l=0;l<i.length;l++){const c=i[l];if(c.type===7&&s(c.name)){i.splice(l,1),l--;const u=e(r,c,n);u&&o.push(u)}}return o}}}const Ff="/*@__PURE__*/",fx=t=>`${So[t]}: _${So[t]}`;function Nbe(t,{mode:e="function",prefixIdentifiers:s=e==="module",sourceMap:r=!1,filename:n="template.vue.html",scopeId:i=null,optimizeImports:o=!1,runtimeGlobalName:l="Vue",runtimeModuleName:c="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:d=!1,isTS:f=!1,inSSR:p=!1}){const g={mode:e,prefixIdentifiers:s,sourceMap:r,filename:n,scopeId:i,optimizeImports:o,runtimeGlobalName:l,runtimeModuleName:c,ssrRuntimeModuleName:u,ssr:d,isTS:f,inSSR:p,source:t.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(k){return`_${So[k]}`},push(k,L=-2,V){g.code+=k},indent(){b(++g.indentLevel)},deindent(k=!1){k?--g.indentLevel:b(--g.indentLevel)},newline(){b(g.indentLevel)}};function b(k){g.push(`
`+"  ".repeat(k),0)}return g}function px(t,e={}){const s=Nbe(t,e);e.onContextCreated&&e.onContextCreated(s);const{mode:r,push:n,prefixIdentifiers:i,indent:o,deindent:l,newline:c,scopeId:u,ssr:d}=s,f=Array.from(t.helpers),p=f.length>0,g=!i&&r!=="module";Obe(t,s);const k=d?"ssrRender":"render",V=(d?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(n(`function ${k}(${V}) {`),o(),g&&(n("with (_ctx) {"),o(),p&&(n(`const { ${f.map(fx).join(", ")} } = _Vue
`,-1),c())),t.components.length&&(Wp(t.components,"component",s),(t.directives.length||t.temps>0)&&c()),t.directives.length&&(Wp(t.directives,"directive",s),t.temps>0&&c()),t.filters&&t.filters.length&&(c(),Wp(t.filters,"filter",s),c()),t.temps>0){n("let ");for(let R=0;R<t.temps;R++)n(`${R>0?", ":""}_temp${R}`)}return(t.components.length||t.directives.length||t.temps)&&(n(`
`,0),c()),d||n("return "),t.codegenNode?Ns(t.codegenNode,s):n("null"),g&&(l(),n("}")),l(),n("}"),{ast:t,code:s.code,preamble:"",map:s.map?s.map.toJSON():void 0}}function Obe(t,e){const{ssr:s,prefixIdentifiers:r,push:n,newline:i,runtimeModuleName:o,runtimeGlobalName:l,ssrRuntimeModuleName:c}=e,u=l,d=Array.from(t.helpers);if(d.length>0&&(n(`const _Vue = ${u}
`,-1),t.hoists.length)){const f=[Tf,kf,Ya,If,Iv].filter(p=>d.includes(p)).map(fx).join(", ");n(`const { ${f} } = _Vue
`,-1)}Mbe(t.hoists,e),i(),n("return ")}function Wp(t,e,{helper:s,push:r,newline:n,isTS:i}){const o=s(e==="filter"?xf:e==="component"?Cf:Pf);for(let l=0;l<t.length;l++){let c=t[l];const u=c.endsWith("__self");u&&(c=c.slice(0,-6)),r(`const ${Ma(c,e)} = ${o}(${JSON.stringify(c)}${u?", true":""})${i?"!":""}`),l<t.length-1&&n()}}function Mbe(t,e){if(!t.length)return;e.pure=!0;const{push:s,newline:r}=e;r();for(let n=0;n<t.length;n++){const i=t[n];i&&(s(`const _hoisted_${n+1} = `),Ns(i,e),r())}e.pure=!1}function $v(t,e){const s=t.length>3||!1;e.push("["),s&&e.indent(),Jc(t,e,s),s&&e.deindent(),e.push("]")}function Jc(t,e,s=!1,r=!0){const{push:n,newline:i}=e;for(let o=0;o<t.length;o++){const l=t[o];Fe(l)?n(l,-3):ke(l)?$v(l,e):Ns(l,e),o<t.length-1&&(s?(r&&n(","),i()):r&&n(", "))}}function Ns(t,e){if(Fe(t)){e.push(t,-3);return}if(js(t)){e.push(e.helper(t));return}switch(t.type){case 1:case 9:case 11:Ns(t.codegenNode,e);break;case 2:Dbe(t,e);break;case 4:mx(t,e);break;case 5:$be(t,e);break;case 12:Ns(t.codegenNode,e);break;case 8:gx(t,e);break;case 3:Fbe(t,e);break;case 13:Vbe(t,e);break;case 14:qbe(t,e);break;case 15:jbe(t,e);break;case 17:Hbe(t,e);break;case 18:Wbe(t,e);break;case 19:zbe(t,e);break;case 20:Gbe(t,e);break;case 21:Jc(t.body,e,!0,!1);break}}function Dbe(t,e){e.push(JSON.stringify(t.content),-3,t)}function mx(t,e){const{content:s,isStatic:r}=t;e.push(r?JSON.stringify(s):s,-3,t)}function $be(t,e){const{push:s,helper:r,pure:n}=e;n&&s(Ff),s(`${r(Kc)}(`),Ns(t.content,e),s(")")}function gx(t,e){for(let s=0;s<t.children.length;s++){const r=t.children[s];Fe(r)?e.push(r,-3):Ns(r,e)}}function Ube(t,e){const{push:s}=e;if(t.type===8)s("["),gx(t,e),s("]");else if(t.isStatic){const r=Yc(t.content)?t.content:JSON.stringify(t.content);s(r,-2,t)}else s(`[${t.content}]`,-3,t)}function Fbe(t,e){const{push:s,helper:r,pure:n}=e;n&&s(Ff),s(`${r(Ya)}(${JSON.stringify(t.content)})`,-3,t)}function Vbe(t,e){const{push:s,helper:r,pure:n}=e,{tag:i,props:o,children:l,patchFlag:c,dynamicProps:u,directives:d,isBlock:f,disableTracking:p,isComponent:g}=t;let b;c&&(b=String(c)),d&&s(r(Lf)+"("),f&&s(`(${r(Ti)}(${p?"true":""}), `),n&&s(Ff);const k=f?ko(e.inSSR,g):To(e.inSSR,g);s(r(k)+"(",-2,t),Jc(Bbe([i,o,l,b,u]),e),s(")"),f&&s(")"),d&&(s(", "),Ns(d,e),s(")"))}function Bbe(t){let e=t.length;for(;e--&&t[e]==null;);return t.slice(0,e+1).map(s=>s||"null")}function qbe(t,e){const{push:s,helper:r,pure:n}=e,i=Fe(t.callee)?t.callee:r(t.callee);n&&s(Ff),s(i+"(",-2,t),Jc(t.arguments,e),s(")")}function jbe(t,e){const{push:s,indent:r,deindent:n,newline:i}=e,{properties:o}=t;if(!o.length){s("{}",-2,t);return}const l=o.length>1||!1;s(l?"{":"{ "),l&&r();for(let c=0;c<o.length;c++){const{key:u,value:d}=o[c];Ube(u,e),s(": "),Ns(d,e),c<o.length-1&&(s(","),i())}l&&n(),s(l?"}":" }")}function Hbe(t,e){$v(t.elements,e)}function Wbe(t,e){const{push:s,indent:r,deindent:n}=e,{params:i,returns:o,body:l,newline:c,isSlot:u}=t;u&&s(`_${So[Df]}(`),s("(",-2,t),ke(i)?Jc(i,e):i&&Ns(i,e),s(") => "),(c||l)&&(s("{"),r()),o?(c&&s("return "),ke(o)?$v(o,e):Ns(o,e)):l&&Ns(l,e),(c||l)&&(n(),s("}")),u&&(t.isNonScopedSlot&&s(", undefined, true"),s(")"))}function zbe(t,e){const{test:s,consequent:r,alternate:n,newline:i}=t,{push:o,indent:l,deindent:c,newline:u}=e;if(s.type===4){const f=!Yc(s.content);f&&o("("),mx(s,e),f&&o(")")}else o("("),Ns(s,e),o(")");i&&l(),e.indentLevel++,i||o(" "),o("? "),Ns(r,e),e.indentLevel--,i&&u(),i||o(" "),o(": ");const d=n.type===19;d||e.indentLevel++,Ns(n,e),d||e.indentLevel--,i&&c(!0)}function Gbe(t,e){const{push:s,helper:r,indent:n,deindent:i,newline:o}=e,{needPauseTracking:l,needArraySpread:c}=t;c&&s("[...("),s(`_cache[${t.index}] || (`),l&&(n(),s(`${r(Ec)}(-1`),t.inVOnce&&s(", true"),s("),"),o(),s("(")),s(`_cache[${t.index}] = `),Ns(t.value,e),l&&(s(`).cacheIndex = ${t.index},`),o(),s(`${r(Ec)}(1),`),o(),s(`_cache[${t.index}]`),i()),s(")"),c&&s(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Kbe=(t,e)=>{if(t.type===5)t.content=dd(t.content,e);else if(t.type===1){const s=Bs(t,"memo");for(let r=0;r<t.props.length;r++){const n=t.props[r];if(n.type===7&&n.name!=="for"){const i=n.exp,o=n.arg;i&&i.type===4&&!(n.name==="on"&&o)&&!(s&&o&&o.type===4&&o.content==="key")&&(n.exp=dd(i,e,n.name==="slot")),o&&o.type===4&&!o.isStatic&&(n.arg=dd(o,e))}}}};function dd(t,e,s=!1,r=!1,n=Object.create(e.identifiers)){return t}function yx(t){return Fe(t)?t:t.type===4?t.content:t.children.map(yx).join("")}const Ybe=Dv(/^(if|else|else-if)$/,(t,e,s)=>vx(t,e,s,(r,n,i)=>{const o=s.parent.children;let l=o.indexOf(r),c=0;for(;l-->=0;){const u=o[l];u&&u.type===9&&(c+=u.branches.length)}return()=>{if(i)r.codegenNode=Ow(n,c,s);else{const u=Qbe(r.codegenNode);u.alternate=Ow(n,c+r.branches.length-1,s)}}}));function vx(t,e,s,r){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const n=e.exp?e.exp.loc:t.loc;s.onError(Pt(28,e.loc)),e.exp=He("true",!1,n)}if(e.name==="if"){const n=Nw(t,e),i={type:9,loc:Ibe(t.loc),branches:[n]};if(s.replaceNode(i),r)return r(i,n,!0)}else{const n=s.parent.children;let i=n.indexOf(t);for(;i-->=-1;){const o=n[i];if(o&&o.type===3){s.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){s.removeNode(o);continue}if(o&&o.type===9){e.name==="else-if"&&o.branches[o.branches.length-1].condition===void 0&&s.onError(Pt(30,t.loc)),s.removeNode();const l=Nw(t,e);o.branches.push(l);const c=r&&r(o,l,!1);Xc(l,s),c&&c(),s.currentNode=null}else s.onError(Pt(30,t.loc));break}}}function Nw(t,e){const s=t.tagType===3;return{type:10,loc:t.loc,condition:e.name==="else"?void 0:e.exp,children:s&&!Bs(t,"for")?t.children:[t],userKey:Qc(t,"key"),isTemplateIf:s}}function Ow(t,e,s){return t.condition?nh(t.condition,Mw(t,e,s),Gt(s.helper(Ya),['""',"true"])):Mw(t,e,s)}function Mw(t,e,s){const{helper:r}=s,n=Bt("key",He(`${e}`,!1,is,2)),{children:i}=t,o=i[0];if(i.length!==1||o.type!==1)if(i.length===1&&o.type===11){const c=o.codegenNode;return kc(c,n,s),c}else return Ra(s,r(xa),ar([n]),i,64,void 0,void 0,!0,!1,!1,t.loc);else{const c=o.codegenNode,u=tx(c);return u.type===13&&Uf(u,s),kc(u,n,s),c}}function Qbe(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const _x=(t,e,s)=>{const{modifiers:r,loc:n}=t,i=t.arg;let{exp:o}=t;if(o&&o.type===4&&!o.content.trim()&&(o=void 0),!o){if(i.type!==4||!i.isStatic)return s.onError(Pt(52,i.loc)),{props:[Bt(i,He("",!0,n))]};bx(t),o=t.exp}return i.type!==4?(i.children.unshift("("),i.children.push(') || ""')):i.isStatic||(i.content=`${i.content} || ""`),r.some(l=>l.content==="camel")&&(i.type===4?i.isStatic?i.content=It(i.content):i.content=`${s.helperString(sh)}(${i.content})`:(i.children.unshift(`${s.helperString(sh)}(`),i.children.push(")"))),s.inSSR||(r.some(l=>l.content==="prop")&&Dw(i,"."),r.some(l=>l.content==="attr")&&Dw(i,"^")),{props:[Bt(i,o)]}},bx=(t,e)=>{const s=t.arg,r=It(s.content);t.exp=He(r,!1,s.loc)},Dw=(t,e)=>{t.type===4?t.isStatic?t.content=e+t.content:t.content=`\`${e}\${${t.content}}\``:(t.children.unshift(`'${e}' + (`),t.children.push(")"))},Xbe=Dv("for",(t,e,s)=>{const{helper:r,removeHelper:n}=s;return wx(t,e,s,i=>{const o=Gt(r(Rf),[i.source]),l=Oa(t),c=Bs(t,"memo"),u=Qc(t,"key",!1,!0);u&&u.type===7&&!u.exp&&bx(u);let f=u&&(u.type===6?u.value?He(u.value.content,!0):void 0:u.exp);const p=u&&f?Bt("key",f):null,g=i.source.type===4&&i.source.constType>0,b=g?64:u?128:256;return i.codegenNode=Ra(s,r(xa),void 0,o,b,void 0,void 0,!0,!g,!1,t.loc),()=>{let k;const{children:L}=i,V=L.length!==1||L[0].type!==1,R=Tc(t)?t:l&&t.children.length===1&&Tc(t.children[0])?t.children[0]:null;if(R?(k=R.codegenNode,l&&p&&kc(k,p,s)):V?k=Ra(s,r(xa),p?ar([p]):void 0,t.children,64,void 0,void 0,!0,void 0,!1):(k=L[0].codegenNode,l&&p&&kc(k,p,s),k.isBlock!==!g&&(k.isBlock?(n(Ti),n(ko(s.inSSR,k.isComponent))):n(To(s.inSSR,k.isComponent))),k.isBlock=!g,k.isBlock?(r(Ti),r(ko(s.inSSR,k.isComponent))):r(To(s.inSSR,k.isComponent))),c){const E=Eo(oh(i.parseResult,[He("_cached")]));E.body=jP([yr(["const _memo = (",c.exp,")"]),yr(["if (_cached",...f?[" && _cached.key === ",f]:[],` && ${s.helperString(Pv)}(_cached, _memo)) return _cached`]),yr(["const _item = ",k]),He("_item.memo = _memo"),He("return _item")]),o.arguments.push(E,He("_cache"),He(String(s.cached.length))),s.cached.push(null)}else o.arguments.push(Eo(oh(i.parseResult),k,!0))}})});function wx(t,e,s,r){if(!e.exp){s.onError(Pt(31,e.loc));return}const n=e.forParseResult;if(!n){s.onError(Pt(32,e.loc));return}Uv(n);const{addIdentifiers:i,removeIdentifiers:o,scopes:l}=s,{source:c,value:u,key:d,index:f}=n,p={type:11,loc:e.loc,source:c,valueAlias:u,keyAlias:d,objectIndexAlias:f,parseResult:n,children:Oa(t)?t.children:[t]};s.replaceNode(p),l.vFor++;const g=r&&r(p);return()=>{l.vFor--,g&&g()}}function Uv(t,e){t.finalized||(t.finalized=!0)}function oh({value:t,key:e,index:s},r=[]){return Jbe([t,e,s,...r])}function Jbe(t){let e=t.length;for(;e--&&!t[e];);return t.slice(0,e+1).map((s,r)=>s||He("_".repeat(r+1),!1))}const $w=He("undefined",!1),Sx=(t,e)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const s=Bs(t,"slot");if(s)return s.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},Zbe=(t,e)=>{let s;if(Oa(t)&&t.props.some(Nv)&&(s=Bs(t,"for"))){const r=s.forParseResult;if(r){Uv(r);const{value:n,key:i,index:o}=r,{addIdentifiers:l,removeIdentifiers:c}=e;return n&&l(n),i&&l(i),o&&l(o),()=>{n&&c(n),i&&c(i),o&&c(o)}}}},ewe=(t,e,s,r)=>Eo(t,s,!1,!0,s.length?s[0].loc:r);function Ex(t,e,s=ewe){e.helper(Df);const{children:r,loc:n}=t,i=[],o=[];let l=e.scopes.vSlot>0||e.scopes.vFor>0;const c=Bs(t,"slot",!0);if(c){const{arg:L,exp:V}=c;L&&!qs(L)&&(l=!0),i.push(Bt(L||He("default",!0),s(V,void 0,r,n)))}let u=!1,d=!1;const f=[],p=new Set;let g=0;for(let L=0;L<r.length;L++){const V=r[L];let R;if(!Oa(V)||!(R=Bs(V,"slot",!0))){V.type!==3&&f.push(V);continue}if(c){e.onError(Pt(37,R.loc));break}u=!0;const{children:E,loc:N}=V,{arg:D=He("default",!0),exp:U,loc:C}=R;let w;qs(D)?w=D?D.content:"default":l=!0;const _=Bs(V,"for"),x=s(U,_,E,N);let P,O;if(P=Bs(V,"if"))l=!0,o.push(nh(P.exp,$u(D,x,g++),$w));else if(O=Bs(V,/^else(-if)?$/,!0)){let M=L,ae;for(;M--&&(ae=r[M],ae.type===3););if(ae&&Oa(ae)&&Bs(ae,/^(else-)?if$/)){let fe=o[o.length-1];for(;fe.alternate.type===19;)fe=fe.alternate;fe.alternate=O.exp?nh(O.exp,$u(D,x,g++),$w):$u(D,x,g++)}else e.onError(Pt(30,O.loc))}else if(_){l=!0;const M=_.forParseResult;M?(Uv(M),o.push(Gt(e.helper(Rf),[M.source,Eo(oh(M),$u(D,x),!0)]))):e.onError(Pt(32,_.loc))}else{if(w){if(p.has(w)){e.onError(Pt(38,C));continue}p.add(w),w==="default"&&(d=!0)}i.push(Bt(D,x))}}if(!c){const L=(V,R)=>{const E=s(V,void 0,R,n);return e.compatConfig&&(E.isNonScopedSlot=!0),Bt("default",E)};u?f.length&&f.some(V=>Tx(V))&&(d?e.onError(Pt(39,f[0].loc)):i.push(L(void 0,f))):i.push(L(void 0,r))}const b=l?2:hd(t.children)?3:1;let k=ar(i.concat(Bt("_",He(b+"",!1))),n);return o.length&&(k=Gt(e.helper(Av),[k,fi(o)])),{slots:k,hasDynamicSlots:l}}function $u(t,e,s){const r=[Bt("name",t),Bt("fn",e)];return s!=null&&r.push(Bt("key",He(String(s),!0))),ar(r)}function hd(t){for(let e=0;e<t.length;e++){const s=t[e];switch(s.type){case 1:if(s.tagType===2||hd(s.children))return!0;break;case 9:if(hd(s.branches))return!0;break;case 10:case 11:if(hd(s.children))return!0;break}}return!1}function Tx(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():Tx(t.content)}const kx=new WeakMap,Ix=(t,e)=>function(){if(t=e.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:r,props:n}=t,i=t.tagType===1;let o=i?Cx(t,e):`"${r}"`;const l=ft(o)&&o.callee===Af;let c,u,d=0,f,p,g,b=l||o===da||o===Ef||!i&&(r==="svg"||r==="foreignObject"||r==="math");if(n.length>0){const k=Fv(t,e,void 0,i,l);c=k.props,d=k.patchFlag,p=k.dynamicPropNames;const L=k.directives;g=L&&L.length?fi(L.map(V=>Ax(V,e))):void 0,k.shouldUseBlock&&(b=!0)}if(t.children.length>0)if(o===wc&&(b=!0,d|=1024),i&&o!==da&&o!==wc){const{slots:L,hasDynamicSlots:V}=Ex(t,e);u=L,V&&(d|=1024)}else if(t.children.length===1&&o!==da){const L=t.children[0],V=L.type,R=V===5||V===8;R&&Qs(L,e)===0&&(d|=1),R||V===2?u=L:u=t.children}else u=t.children;p&&p.length&&(f=swe(p)),t.codegenNode=Ra(e,o,c,u,d===0?void 0:d,f,g,!!b,!1,i,t.loc)};function Cx(t,e,s=!1){let{tag:r}=t;const n=mg(r),i=Qc(t,"is",!1,!0);if(i)if(n||uo("COMPILER_IS_ON_ELEMENT",e)){let l;if(i.type===6?l=i.value&&He(i.value.content,!0):(l=i.exp,l||(l=He("is",!1,i.arg.loc))),l)return Gt(e.helper(Af),[l])}else i.type===6&&i.value.content.startsWith("vue:")&&(r=i.value.content.slice(4));const o=Lv(r)||e.isBuiltInComponent(r);return o?(s||e.helper(o),o):(e.helper(Cf),e.components.add(r),Ma(r,"component"))}function Fv(t,e,s=t.props,r,n,i=!1){const{tag:o,loc:l,children:c}=t;let u=[];const d=[],f=[],p=c.length>0;let g=!1,b=0,k=!1,L=!1,V=!1,R=!1,E=!1,N=!1;const D=[],U=x=>{u.length&&(d.push(ar(Uw(u),l)),u=[]),x&&d.push(x)},C=()=>{e.scopes.vFor>0&&u.push(Bt(He("ref_for",!0),He("true")))},w=({key:x,value:P})=>{if(qs(x)){const O=x.content,M=ki(O);if(M&&(!r||n)&&O.toLowerCase()!=="onclick"&&O!=="onUpdate:modelValue"&&!Tn(O)&&(R=!0),M&&Tn(O)&&(N=!0),M&&P.type===14&&(P=P.arguments[0]),P.type===20||(P.type===4||P.type===8)&&Qs(P,e)>0)return;O==="ref"?k=!0:O==="class"?L=!0:O==="style"?V=!0:O!=="key"&&!D.includes(O)&&D.push(O),r&&(O==="class"||O==="style")&&!D.includes(O)&&D.push(O)}else E=!0};for(let x=0;x<s.length;x++){const P=s[x];if(P.type===6){const{loc:O,name:M,nameLoc:ae,value:fe}=P;let de=!0;if(M==="ref"&&(k=!0,C()),M==="is"&&(mg(o)||fe&&fe.content.startsWith("vue:")||uo("COMPILER_IS_ON_ELEMENT",e)))continue;u.push(Bt(He(M,!0,ae),He(fe?fe.content:"",de,fe?fe.loc:O)))}else{const{name:O,arg:M,exp:ae,loc:fe,modifiers:de}=P,Z=O==="bind",ue=O==="on";if(O==="slot"){r||e.onError(Pt(40,fe));continue}if(O==="once"||O==="memo"||O==="is"||Z&&oi(M,"is")&&(mg(o)||uo("COMPILER_IS_ON_ELEMENT",e))||ue&&i)continue;if((Z&&oi(M,"key")||ue&&p&&oi(M,"vue:before-update"))&&(g=!0),Z&&oi(M,"ref")&&C(),!M&&(Z||ue)){if(E=!0,ae)if(Z){if(C(),U(),uo("COMPILER_V_BIND_OBJECT_ORDER",e)){d.unshift(ae);continue}d.push(ae)}else U({type:14,loc:fe,callee:e.helper(Mf),arguments:r?[ae]:[ae,"true"]});else e.onError(Pt(Z?34:35,fe));continue}Z&&de.some(_e=>_e.content==="prop")&&(b|=32);const $e=e.directiveTransforms[O];if($e){const{props:_e,needRuntime:Oe}=$e(P,t,e);!i&&_e.forEach(w),ue&&M&&!qs(M)?U(ar(_e,l)):u.push(..._e),Oe&&(f.push(P),js(Oe)&&kx.set(P,Oe))}else Jw(O)||(f.push(P),p&&(g=!0))}}let _;if(d.length?(U(),d.length>1?_=Gt(e.helper(Sc),d,l):_=d[0]):u.length&&(_=ar(Uw(u),l)),E?b|=16:(L&&!r&&(b|=2),V&&!r&&(b|=4),D.length&&(b|=8),R&&(b|=32)),!g&&(b===0||b===32)&&(k||N||f.length>0)&&(b|=512),!e.inSSR&&_)switch(_.type){case 15:let x=-1,P=-1,O=!1;for(let fe=0;fe<_.properties.length;fe++){const de=_.properties[fe].key;qs(de)?de.content==="class"?x=fe:de.content==="style"&&(P=fe):de.isHandlerKey||(O=!0)}const M=_.properties[x],ae=_.properties[P];O?_=Gt(e.helper(La),[_]):(M&&!qs(M.value)&&(M.value=Gt(e.helper(Nf),[M.value])),ae&&(V||ae.value.type===4&&ae.value.content.trim()[0]==="["||ae.value.type===17)&&(ae.value=Gt(e.helper(Of),[ae.value])));break;case 14:break;default:_=Gt(e.helper(La),[Gt(e.helper(Qa),[_])]);break}return{props:_,directives:f,patchFlag:b,dynamicPropNames:D,shouldUseBlock:g}}function Uw(t){const e=new Map,s=[];for(let r=0;r<t.length;r++){const n=t[r];if(n.key.type===8||!n.key.isStatic){s.push(n);continue}const i=n.key.content,o=e.get(i);o?(i==="style"||i==="class"||ki(i))&&twe(o,n):(e.set(i,n),s.push(n))}return s}function twe(t,e){t.value.type===17?t.value.elements.push(e.value):t.value=fi([t.value,e.value],t.loc)}function Ax(t,e){const s=[],r=kx.get(t);r?s.push(e.helperString(r)):(e.helper(Pf),e.directives.add(t.name),s.push(Ma(t.name,"directive")));const{loc:n}=t;if(t.exp&&s.push(t.exp),t.arg&&(t.exp||s.push("void 0"),s.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||s.push("void 0"),s.push("void 0"));const i=He("true",!1,n);s.push(ar(t.modifiers.map(o=>Bt(o,i)),n))}return fi(s,t.loc)}function swe(t){let e="[";for(let s=0,r=t.length;s<r;s++)e+=JSON.stringify(t[s]),s<r-1&&(e+=", ");return e+"]"}function mg(t){return t==="component"||t==="Component"}const rwe=(t,e)=>{if(Tc(t)){const{children:s,loc:r}=t,{slotName:n,slotProps:i}=Px(t,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",n,"{}","undefined","true"];let l=2;i&&(o[2]=i,l=3),s.length&&(o[3]=Eo([],s,!1,!1,r),l=4),e.scopeId&&!e.slotted&&(l=5),o.splice(l),t.codegenNode=Gt(e.helper(Cv),o,r)}};function Px(t,e){let s='"default"',r;const n=[];for(let i=0;i<t.props.length;i++){const o=t.props[i];if(o.type===6)o.value&&(o.name==="name"?s=JSON.stringify(o.value.content):(o.name=It(o.name),n.push(o)));else if(o.name==="bind"&&oi(o.arg,"name")){if(o.exp)s=o.exp;else if(o.arg&&o.arg.type===4){const l=It(o.arg.content);s=o.exp=He(l,!1,o.arg.loc)}}else o.name==="bind"&&o.arg&&qs(o.arg)&&(o.arg.content=It(o.arg.content)),n.push(o)}if(n.length>0){const{props:i,directives:o}=Fv(t,e,n,!1,!1);r=i,o.length&&e.onError(Pt(36,o[0].loc))}return{slotName:s,slotProps:r}}const Vv=(t,e,s,r)=>{const{loc:n,modifiers:i,arg:o}=t;!t.exp&&!i.length&&s.onError(Pt(35,n));let l;if(o.type===4)if(o.isStatic){let f=o.content;f.startsWith("vue:")&&(f=`vnode-${f.slice(4)}`);const p=e.tagType!==0||f.startsWith("vnode")||!/[A-Z]/.test(f)?no(It(f)):`on:${f}`;l=He(p,!0,o.loc)}else l=yr([`${s.helperString(rh)}(`,o,")"]);else l=o,l.children.unshift(`${s.helperString(rh)}(`),l.children.push(")");let c=t.exp;c&&!c.content.trim()&&(c=void 0);let u=s.cacheHandlers&&!c&&!s.inVOnce;if(c){const f=Rv(c),p=!(f||XP(c)),g=c.content.includes(";");(p||u&&f)&&(c=yr([`${p?"$event":"(...args)"} => ${g?"{":"("}`,c,g?"}":")"]))}let d={props:[Bt(l,c||He("() => {}",!1,n))]};return r&&(d=r(d)),u&&(d.props[0].value=s.cache(d.props[0].value)),d.props.forEach(f=>f.key.isHandlerKey=!0),d},nwe=(t,e)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const s=t.children;let r,n=!1;for(let i=0;i<s.length;i++){const o=s[i];if(ad(o)){n=!0;for(let l=i+1;l<s.length;l++){const c=s[l];if(ad(c))r||(r=s[i]=yr([o],o.loc)),r.children.push(" + ",c),s.splice(l,1),l--;else{r=void 0;break}}}}if(!(!n||s.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(i=>i.type===7&&!e.directiveTransforms[i.name])&&t.tag!=="template")))for(let i=0;i<s.length;i++){const o=s[i];if(ad(o)||o.type===8){const l=[];(o.type!==2||o.content!==" ")&&l.push(o),!e.ssr&&Qs(o,e)===0&&l.push("1"),s[i]={type:12,content:o,loc:o.loc,codegenNode:Gt(e.helper(If),l)}}}}},Fw=new WeakSet,iwe=(t,e)=>{if(t.type===1&&Bs(t,"once",!0))return Fw.has(t)||e.inVOnce||e.inSSR?void 0:(Fw.add(t),e.inVOnce=!0,e.helper(Ec),()=>{e.inVOnce=!1;const s=e.currentNode;s.codegenNode&&(s.codegenNode=e.cache(s.codegenNode,!0,!0))})},Bv=(t,e,s)=>{const{exp:r,arg:n}=t;if(!r)return s.onError(Pt(41,t.loc)),Uu();const i=r.loc.source.trim(),o=r.type===4?r.content:i,l=s.bindingMetadata[i];if(l==="props"||l==="props-aliased")return s.onError(Pt(44,r.loc)),Uu();if(!o.trim()||!Rv(r))return s.onError(Pt(42,r.loc)),Uu();const c=n||He("modelValue",!0),u=n?qs(n)?`onUpdate:${It(n.content)}`:yr(['"onUpdate:" + ',n]):"onUpdate:modelValue";let d;const f=s.isTS?"($event: any)":"$event";d=yr([`${f} => ((`,r,") = $event)"]);const p=[Bt(c,t.exp),Bt(u,d)];if(t.modifiers.length&&e.tagType===1){const g=t.modifiers.map(k=>k.content).map(k=>(Yc(k)?k:JSON.stringify(k))+": true").join(", "),b=n?qs(n)?`${n.content}Modifiers`:yr([n,' + "Modifiers"']):"modelModifiers";p.push(Bt(b,He(`{ ${g} }`,!1,t.loc,2)))}return Uu(p)};function Uu(t=[]){return{props:t}}const owe=/[\w).+\-_$\]]/,awe=(t,e)=>{uo("COMPILER_FILTERS",e)&&(t.type===5?ah(t.content,e):t.type===1&&t.props.forEach(s=>{s.type===7&&s.name!=="for"&&s.exp&&ah(s.exp,e)}))};function ah(t,e){if(t.type===4)Vw(t,e);else for(let s=0;s<t.children.length;s++){const r=t.children[s];typeof r=="object"&&(r.type===4?Vw(r,e):r.type===8?ah(t,e):r.type===5&&ah(r.content,e))}}function Vw(t,e){const s=t.content;let r=!1,n=!1,i=!1,o=!1,l=0,c=0,u=0,d=0,f,p,g,b,k=[];for(g=0;g<s.length;g++)if(p=f,f=s.charCodeAt(g),r)f===39&&p!==92&&(r=!1);else if(n)f===34&&p!==92&&(n=!1);else if(i)f===96&&p!==92&&(i=!1);else if(o)f===47&&p!==92&&(o=!1);else if(f===124&&s.charCodeAt(g+1)!==124&&s.charCodeAt(g-1)!==124&&!l&&!c&&!u)b===void 0?(d=g+1,b=s.slice(0,g).trim()):L();else{switch(f){case 34:n=!0;break;case 39:r=!0;break;case 96:i=!0;break;case 40:u++;break;case 41:u--;break;case 91:c++;break;case 93:c--;break;case 123:l++;break;case 125:l--;break}if(f===47){let V=g-1,R;for(;V>=0&&(R=s.charAt(V),R===" ");V--);(!R||!owe.test(R))&&(o=!0)}}b===void 0?b=s.slice(0,g).trim():d!==0&&L();function L(){k.push(s.slice(d,g).trim()),d=g+1}if(k.length){for(g=0;g<k.length;g++)b=lwe(b,k[g],e);t.content=b,t.ast=void 0}}function lwe(t,e,s){s.helper(xf);const r=e.indexOf("(");if(r<0)return s.filters.add(e),`${Ma(e,"filter")}(${t})`;{const n=e.slice(0,r),i=e.slice(r+1);return s.filters.add(n),`${Ma(n,"filter")}(${t}${i!==")"?","+i:i}`}}const Bw=new WeakSet,cwe=(t,e)=>{if(t.type===1){const s=Bs(t,"memo");return!s||Bw.has(t)?void 0:(Bw.add(t),()=>{const r=t.codegenNode||e.currentNode.codegenNode;r&&r.type===13&&(t.tagType!==1&&Uf(r,e),t.codegenNode=Gt(e.helper($f),[s.exp,Eo(void 0,r),"_cache",String(e.cached.length)]),e.cached.push(null))})}};function xx(t){return[[iwe,Ybe,cwe,Xbe,awe,rwe,Ix,Sx,nwe],{on:Vv,bind:_x,model:Bv}]}function Lx(t,e={}){const s=e.onError||xv,r=e.mode==="module";e.prefixIdentifiers===!0?s(Pt(47)):r&&s(Pt(48));const n=!1;e.cacheHandlers&&s(Pt(49)),e.scopeId&&!r&&s(Pt(50));const i=et({},e,{prefixIdentifiers:n}),o=Fe(t)?Mv(t,i):t,[l,c]=xx();return hx(o,et({},i,{nodeTransforms:[...l,...e.nodeTransforms||[]],directiveTransforms:et({},c,e.directiveTransforms||{})})),px(o,i)}const uwe={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},Rx=()=>({props:[]});/**
* @vue/compiler-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const qv=Symbol(""),jv=Symbol(""),Hv=Symbol(""),Wv=Symbol(""),lh=Symbol(""),zv=Symbol(""),Gv=Symbol(""),Kv=Symbol(""),Yv=Symbol(""),Qv=Symbol("");VP({[qv]:"vModelRadio",[jv]:"vModelCheckbox",[Hv]:"vModelText",[Wv]:"vModelSelect",[lh]:"vModelDynamic",[zv]:"withModifiers",[Gv]:"withKeys",[Kv]:"vShow",[Yv]:"Transition",[Qv]:"TransitionGroup"});let Go;function dwe(t,e=!1){return Go||(Go=document.createElement("div")),e?(Go.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,Go.children[0].getAttribute("foo")):(Go.innerHTML=t,Go.textContent)}const Xv={parseMode:"html",isVoidTag:n2,isNativeTag:t=>t2(t)||s2(t)||r2(t),isPreTag:t=>t==="pre",isIgnoreNewlineTag:t=>t==="pre"||t==="textarea",decodeEntities:dwe,isBuiltInComponent:t=>{if(t==="Transition"||t==="transition")return Yv;if(t==="TransitionGroup"||t==="transition-group")return Qv},getNamespace(t,e,s){let r=e?e.ns:s;if(e&&r===2)if(e.tag==="annotation-xml"){if(t==="svg")return 1;e.props.some(n=>n.type===6&&n.name==="encoding"&&n.value!=null&&(n.value.content==="text/html"||n.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&t!=="mglyph"&&t!=="malignmark"&&(r=0);else e&&r===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(r=0);if(r===0){if(t==="svg")return 1;if(t==="math")return 2}return r}},Nx=t=>{t.type===1&&t.props.forEach((e,s)=>{e.type===6&&e.name==="style"&&e.value&&(t.props[s]={type:7,name:"bind",arg:He("style",!0,e.loc),exp:hwe(e.value.content,e.loc),modifiers:[],loc:e.loc})})},hwe=(t,e)=>{const s=_g(t);return He(JSON.stringify(s),!1,e,3)};function Pn(t,e){return Pt(t,e)}const fwe={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},pwe={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},mwe=(t,e,s)=>{const{exp:r,loc:n}=t;return r||s.onError(Pn(53,n)),e.children.length&&(s.onError(Pn(54,n)),e.children.length=0),{props:[Bt(He("innerHTML",!0,n),r||He("",!0))]}},gwe=(t,e,s)=>{const{exp:r,loc:n}=t;return r||s.onError(Pn(55,n)),e.children.length&&(s.onError(Pn(56,n)),e.children.length=0),{props:[Bt(He("textContent",!0),r?Qs(r,s)>0?r:Gt(s.helperString(Kc),[r],n):He("",!0))]}},ywe=(t,e,s)=>{const r=Bv(t,e,s);if(!r.props.length||e.tagType===1)return r;t.arg&&s.onError(Pn(58,t.arg.loc));const{tag:n}=e,i=s.isCustomElement(n);if(n==="input"||n==="textarea"||n==="select"||i){let o=Hv,l=!1;if(n==="input"||i){const c=Qc(e,"type");if(c){if(c.type===7)o=lh;else if(c.value)switch(c.value.content){case"radio":o=qv;break;case"checkbox":o=jv;break;case"file":l=!0,s.onError(Pn(59,t.loc));break}}else ZP(e)&&(o=lh)}else n==="select"&&(o=Wv);l||(r.needRuntime=s.helper(o))}else s.onError(Pn(57,t.loc));return r.props=r.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),r},vwe=us("passive,once,capture"),_we=us("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),bwe=us("left,right"),Ox=us("onkeyup,onkeydown,onkeypress"),wwe=(t,e,s,r)=>{const n=[],i=[],o=[];for(let l=0;l<e.length;l++){const c=e[l].content;c==="native"&&Na("COMPILER_V_ON_NATIVE",s)||vwe(c)?o.push(c):bwe(c)?qs(t)?Ox(t.content.toLowerCase())?n.push(c):i.push(c):(n.push(c),i.push(c)):_we(c)?i.push(c):n.push(c)}return{keyModifiers:n,nonKeyModifiers:i,eventOptionModifiers:o}},qw=(t,e)=>qs(t)&&t.content.toLowerCase()==="onclick"?He(e,!0):t.type!==4?yr(["(",t,`) === "onClick" ? "${e}" : (`,t,")"]):t,Swe=(t,e,s)=>Vv(t,e,s,r=>{const{modifiers:n}=t;if(!n.length)return r;let{key:i,value:o}=r.props[0];const{keyModifiers:l,nonKeyModifiers:c,eventOptionModifiers:u}=wwe(i,n,s,t.loc);if(c.includes("right")&&(i=qw(i,"onContextmenu")),c.includes("middle")&&(i=qw(i,"onMouseup")),c.length&&(o=Gt(s.helper(zv),[o,JSON.stringify(c)])),l.length&&(!qs(i)||Ox(i.content.toLowerCase()))&&(o=Gt(s.helper(Gv),[o,JSON.stringify(l)])),u.length){const d=u.map(Ci).join("");i=qs(i)?He(`${i.content}${d}`,!0):yr(["(",i,`) + "${d}"`])}return{props:[Bt(i,o)]}}),Ewe=(t,e,s)=>{const{exp:r,loc:n}=t;return r||s.onError(Pn(61,n)),{props:[],needRuntime:s.helper(Kv)}},Twe=(t,e)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&e.removeNode()},Mx=[Nx],Dx={cloak:Rx,html:mwe,text:gwe,model:ywe,on:Swe,show:Ewe};function kwe(t,e={}){return Lx(t,et({},Xv,e,{nodeTransforms:[Twe,...Mx,...e.nodeTransforms||[]],directiveTransforms:et({},Dx,e.directiveTransforms||{}),transformHoist:null}))}function Iwe(t,e={}){return Mv(t,et({},Xv,e))}const Cwe=Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION:Ev,BindingTypes:uwe,CAMELIZE:sh,CAPITALIZE:MP,CREATE_BLOCK:Tv,CREATE_COMMENT:Ya,CREATE_ELEMENT_BLOCK:kv,CREATE_ELEMENT_VNODE:kf,CREATE_SLOTS:Av,CREATE_STATIC:Iv,CREATE_TEXT:If,CREATE_VNODE:Tf,CompilerDeprecationTypes:z_e,ConstantTypes:U_e,DOMDirectiveTransforms:Dx,DOMErrorCodes:fwe,DOMErrorMessages:pwe,DOMNodeTransforms:Mx,ElementTypes:$_e,ErrorCodes:Y_e,FRAGMENT:xa,GUARD_REACTIVE_PROPS:Qa,IS_MEMO_SAME:Pv,IS_REF:FP,KEEP_ALIVE:wc,MERGE_PROPS:Sc,NORMALIZE_CLASS:Nf,NORMALIZE_PROPS:La,NORMALIZE_STYLE:Of,Namespaces:M_e,NodeTypes:D_e,OPEN_BLOCK:Ti,POP_SCOPE_ID:$P,PUSH_SCOPE_ID:DP,RENDER_LIST:Rf,RENDER_SLOT:Cv,RESOLVE_COMPONENT:Cf,RESOLVE_DIRECTIVE:Pf,RESOLVE_DYNAMIC_COMPONENT:Af,RESOLVE_FILTER:xf,SET_BLOCK_TRACKING:Ec,SUSPENSE:Ef,TELEPORT:da,TO_DISPLAY_STRING:Kc,TO_HANDLERS:Mf,TO_HANDLER_KEY:rh,TRANSITION:Yv,TRANSITION_GROUP:Qv,TS_NODE_TYPES:zP,UNREF:UP,V_MODEL_CHECKBOX:jv,V_MODEL_DYNAMIC:lh,V_MODEL_RADIO:qv,V_MODEL_SELECT:Wv,V_MODEL_TEXT:Hv,V_ON_WITH_KEYS:Gv,V_ON_WITH_MODIFIERS:zv,V_SHOW:Kv,WITH_CTX:Df,WITH_DIRECTIVES:Lf,WITH_MEMO:$f,advancePositionWithClone:pbe,advancePositionWithMutation:JP,assert:mbe,baseCompile:Lx,baseParse:Mv,buildDirectiveArgs:Ax,buildProps:Fv,buildSlots:Ex,checkCompatEnabled:Na,compile:kwe,convertToBlock:Uf,createArrayExpression:fi,createAssignmentExpression:q_e,createBlockStatement:jP,createCacheExpression:qP,createCallExpression:Gt,createCompilerError:Pt,createCompoundExpression:yr,createConditionalExpression:nh,createDOMCompilerError:Pn,createForLoopParams:oh,createFunctionExpression:Eo,createIfStatement:B_e,createInterpolation:F_e,createObjectExpression:ar,createObjectProperty:Bt,createReturnStatement:H_e,createRoot:BP,createSequenceExpression:j_e,createSimpleExpression:He,createStructuralDirectiveTransform:Dv,createTemplateLiteral:V_e,createTransformContext:dx,createVNodeCall:Ra,errorMessages:Q_e,extractIdentifiers:bn,findDir:Bs,findProp:Qc,forAliasRE:sx,generate:px,generateCodeFrame:Zw,getBaseTransformPreset:xx,getConstantType:Qs,getMemoedVNodeCall:tx,getVNodeBlockHelper:ko,getVNodeHelper:To,hasDynamicKeyVBind:ZP,hasScopeRef:Tr,helperNameMap:So,injectProp:kc,isCoreComponent:Lv,isFnExpression:XP,isFnExpressionBrowser:QP,isFnExpressionNode:fbe,isFunctionType:ibe,isInDestructureAssignment:Z_e,isInNewExpression:ebe,isMemberExpression:Rv,isMemberExpressionBrowser:YP,isMemberExpressionNode:dbe,isReferencedIdentifier:J_e,isSimpleIdentifier:Yc,isSlotOutlet:Tc,isStaticArgOf:oi,isStaticExp:qs,isStaticProperty:WP,isStaticPropertyKey:obe,isTemplateNode:Oa,isText:ad,isVSlot:Nv,locStub:is,noopDirectiveTransform:Rx,parse:Iwe,parserOptions:Xv,processExpression:dd,processFor:wx,processIf:vx,processSlotOutlet:Px,registerRuntimeHelpers:VP,resolveComponentType:Cx,stringifyExpression:yx,toValidAssetId:Ma,trackSlotScopes:Sx,trackVForSlotScopes:Zbe,transform:hx,transformBind:_x,transformElement:Ix,transformExpression:Kbe,transformModel:Bv,transformOn:Vv,transformStyle:Nx,traverseNode:Xc,unwrapTSNode:GP,walkBlockDeclarations:sbe,walkFunctionParams:tbe,walkIdentifiers:X_e,warnDeprecation:K_e},Symbol.toStringTag,{value:"Module"})),Awe=Sv(Cwe),Pwe=Sv(dO),xwe=Sv(Y4);/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var jw;function Lwe(){return jw||(jw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Awe,s=Pwe,r=xwe;function n(c){var u=Object.create(null);if(c)for(var d in c)u[d]=c[d];return u.default=c,Object.freeze(u)}var i=n(s);const o=Object.create(null);function l(c,u){if(!r.isString(c))if(c.nodeType)c=c.innerHTML;else return r.NOOP;const d=r.genCacheKey(c,u),f=o[d];if(f)return f;if(c[0]==="#"){const k=document.querySelector(c);c=k?k.innerHTML:""}const p=r.extend({hoistStatic:!0,onError:void 0,onWarn:r.NOOP},u);!p.isCustomElement&&typeof customElements<"u"&&(p.isCustomElement=k=>!!customElements.get(k));const{code:g}=e.compile(c,p),b=new Function("Vue",g)(i);return b._rc=!0,o[d]=b}s.registerRuntimeCompiler(l),t.compile=l,Object.keys(s).forEach(function(c){c!=="default"&&!Object.prototype.hasOwnProperty.call(t,c)&&(t[c]=s[c])})}(Hp)),Hp}var Hw;function Rwe(){return Hw||(Hw=1,jp.exports=Lwe()),jp.exports}var Nwe=od.exports,Ww;function Owe(){return Ww||(Ww=1,function(t,e){(function(r,n){t.exports=n(Rwe())})(Nwe,s=>(()=>{var r={113:(w,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.default=(x,P)=>{const O=x.__vccOpts||x;for(const[M,ae]of P)O[M]=ae;return O}},594:w=>{w.exports=s}},n={};function i(w){var _=n[w];if(_!==void 0)return _.exports;var x=n[w]={exports:{}};return r[w](x,x.exports,i),x.exports}i.d=(w,_)=>{for(var x in _)i.o(_,x)&&!i.o(w,x)&&Object.defineProperty(w,x,{enumerable:!0,get:_[x]})},i.o=(w,_)=>Object.prototype.hasOwnProperty.call(w,_),i.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{ToastComponent:()=>N,ToastPlugin:()=>U,ToastPositions:()=>g,default:()=>C,useToast:()=>D});var l=i(594);const c=["innerHTML"];function u(w,_,x,P,O,M){return(0,l.openBlock)(),(0,l.createBlock)(l.Transition,{"enter-active-class":w.transition.enter,"leave-active-class":w.transition.leave},{default:(0,l.withCtx)(()=>[(0,l.withDirectives)((0,l.createElementVNode)("div",{ref:"root",role:"alert",class:(0,l.normalizeClass)(["v-toast__item",[`v-toast__item--${w.type}`,`v-toast__item--${w.position}`]]),onMouseover:_[0]||(_[0]=ae=>w.toggleTimer(!0)),onMouseleave:_[1]||(_[1]=ae=>w.toggleTimer(!1)),onClick:_[2]||(_[2]=function(){return w.whenClicked&&w.whenClicked(...arguments)})},[_[3]||(_[3]=(0,l.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,l.createElementVNode)("p",{class:"v-toast__text",innerHTML:w.message},null,8,c)],34),[[l.vShow,w.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function d(w){var _;typeof w.remove<"u"?w.remove():(_=w.parentNode)==null||_.removeChild(w)}function f(w,_,x){let P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const O=(0,l.h)(w,_,P),M=document.createElement("div");return M.classList.add("v-toast--pending"),x.appendChild(M),(0,l.render)(O,M),O.component}class p{constructor(_,x){this.startedAt=Date.now(),this.callback=_,this.delay=x,this.timer=setTimeout(_,x)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const g=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function b(w){return{all:w=w||new Map,on:function(_,x){var P=w.get(_);P?P.push(x):w.set(_,[x])},off:function(_,x){var P=w.get(_);P&&(x?P.splice(P.indexOf(x)>>>0,1):w.set(_,[]))},emit:function(_,x){var P=w.get(_);P&&P.slice().map(function(O){O(x)}),(P=w.get("*"))&&P.slice().map(function(O){O(_,x)})}}}const L=b(),V=(0,l.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:g.BOTTOM_RIGHT,validator(w){return Object.values(g).includes(w)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),L.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const w=document.body;w.appendChild(this.parentTop),w.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const w=this.$refs.root;(0,l.render)(null,w),d(w)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const w=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),d(w),this.isActive=!0,this.duration&&(this.timer=new p(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(w){!this.pauseOnHover||!this.timer||(w?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return this.parentTop;case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case g.TOP:case g.TOP_RIGHT:case g.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case g.BOTTOM:case g.BOTTOM_RIGHT:case g.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){L.off("toast-clear",this.dismiss)}});var R=i(113);const N=(0,R.default)(V,[["render",u]]),D=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(_){let x=null;typeof _=="string"&&(x=_);const O=Object.assign({},{message:x},w,_);return{dismiss:f(N,O,document.body).ctx.dismiss}},clear(){L.emit("toast-clear")},success(_){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"success"},x))},error(_){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"error"},x))},info(_){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"info"},x))},warning(_){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"warning"},x))},default(_){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:_,type:"default"},x))}}},U={install:function(w){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=D(_);w.config.globalProperties.$toast=x,w.provide("$toast",x)}},C=U;return o})())}(od)),od.exports}var Mwe=Owe();const Dwe=O_e(Mwe),$x=JSON.parse(`{"common":{"login":"Login","register":"Register","logout":"Log Out","save":"Save","cancel":"Cancel","back":"Back","continue":"Continue","loading":"Loading...","or":"or","yes":"Yes","no":"No","free":"Free","pro":"Pro","start":"Start","close":"Close","search":"Search","apply":"Apply","update":"Update","delete":"Delete","edit":"Edit","verified":"Verified","active":"Active","language":"Language","selectLanguage":"Select Language","english":"English","russian":"","uzbek":"O'zbekcha"},"userSection":{"login":"Login","register":"Register","profile":"Profile","settings":"Settings","logout":"Logout","greeting":"Hello, {name}","createAccount":"Create an Account","startJourney":"Start your learning journey","firstName":"First Name","lastName":"Last Name","email":"Email","password":"Password","confirmPassword":"Confirm Password","signUp":"Sign Up","registering":"Registering...","continueWithGoogle":"Continue with Google","alreadyHaveAccount":"Already have an account?","signIn":"Sign In","welcomeBack":"Welcome Back!","continuelearning":"Continue your learning","signingIn":"Signing in...","dontHaveAccount":"Don't have an account?"},"heroSection":{"studentsLearning":"{count}+ students already learning","headline":"The smarter way to","headlineHighlight":"learn anything","subtitle":"Interactive lessons with AI-powered help. Learn at your own pace.","startFree":"Start Free - No Registration","registerAndSave":"Register & Save Progress","courses":"Courses","aiSupport":"AI Support","completion":"Completion","learners":"learners","mathematics":"Mathematics","mathLessons":"12 lessons  Beginner","languages":"Languages","langLessons":"24 lessons  Intermediate","science":"Science","sciLessons":"18 lessons  Advanced"},"sidebar":{"learningPlatform":"Learning Platform","level":"Level","streak":"Streak","learningMode":"Learning Mode","school":"School","studyCentre":"Study Centre","chooseYourPath":"Choose Your Path","selectHowToLearn":"Select how you want to learn","schoolMode":"School Mode","structuredCurriculum":"Structured curriculum","freeExploration":"Free exploration","menu":"Menu","dashboard":"Dashboard","overviewStats":"Overview & stats","myCourses":"My Courses","browseLessons":"Browse lessons","assignments":"Assignments","practiceHomework":"Practice & homework","tests":"Tests","assessmentAnalytics":"Assessment & analytics","settings":"Settings","accountPreferences":"Account & preferences","upgradeToPro":"Upgrade to Pro","unlockAllFeatures":"Unlock all features","logOut":"Log Out","confirmLogout":"Are you sure you want to log out of your account?","premiumFeature":"Premium Feature","unlockWithPlan":"Unlock with Start or Pro plan","unlimitedTests":"Unlimited practice tests","detailedAnalytics":"Detailed analytics","aiHomeworkHelp":"AI-powered homework help","maybeLater":"Maybe Later","upgradeNow":"Upgrade Now"},"footer":{"slogan":"Making education simple, interactive, and accessible for everyone.","navigation":"Navigation","aboutUs":"About Us","courses":"Courses","pricing":"Pricing","aiAssistant":"AI Assistant","contact":"Contact","contactUs":"Contact Us","allRights":"2025 ACED. All rights reserved.","privacyPolicy":"Privacy Policy","termsOfService":"Terms of Service","aiHelperTitle":"AI Assistant","aiHelperText":"Look for the chat bubble in the bottom right corner. Our AI is ready to help!","gotIt":"Got it"},"tariffs":{"pricing":"Pricing","simpleTitle":"Simple","pricingTitle":"pricing","noHiddenFees":"No hidden fees. Cancel anytime.","monthly":"Monthly","quarterly":"Quarterly","biannual":"Biannual","tryingOut":"Great for trying out","bestValue":"Best value","maxSavings":"Maximum savings","month":"mo","months":"months","forMonths":"for {count} months","getStarted":"Get Started","startLearning":"Start Learning","subscribe":"Subscribe","popular":"POPULAR","save":"Save {percent}%","allSubjects":"All subjects included","unlimitedAI":"Unlimited AI help","progressTracking":"Progress tracking","homeworkAssistance":"Homework assistance","prioritySupport":"Priority support","securePayment":"Secure payment","cancelAnytime":"Cancel anytime","instantAccess":"Instant access"},"mainPage":{"welcomeBack":"Welcome back!","searchPlaceholder":"Search for topics or courses...","allSubjects":"All subjects","recommended":"Recommended for you","refresh":"Refresh","noRecommendations":"No suitable recommendations.","myCourses":"My courses","noCourses":"You have no active courses yet."},"dashboard":{"title":"Dashboard","streak":"Streak","days":"days","points":"Points","discoverLevel":"Discover Your Level","discoverLevelDesc":"Take a quick test to determine your knowledge level and unlock appropriate courses","takePlacementTest":"Take Placement Test","yourLearningJourney":"Your Learning Journey","addCourseToSeePathway":"Add a course to see your interactive lesson pathway!","browseCourses":"Browse Courses","yourLearningDNA":"Your Learning DNA","aiPoweredPersonalization":"AI-powered personalization","learningStyle":"Learning Style","bestTime":"Best Time","cognitiveStrengths":"Cognitive Strengths","smartTips":"Smart Tips for You","learningPath":"Learning Path","optimalTime":"Optimal Time","sessionLength":"Session Length","difficulty":"Difficulty","unlockLearningDNA":"Unlock Your Learning DNA","completeLessonsToReveal":"Complete lessons to reveal your profile","completeAtLeast":"Complete at least {count} lessons to unlock your personalized Learning DNA and AI-powered recommendations.","lesson":"Lesson","startLearning":"Start Learning","yourProgress":"Your Progress","level":"Level","toNextLevel":"to next level","dayStreak":"Day Streak","achievements":"Achievements","stepsToReward":"Steps to Reward","recentAchievements":"Recent Achievements","viewAllAchievements":"View all {count} achievements","totalCourses":"Total Courses","completed":"Completed","hoursStudied":"Hours Studied","weeklyProgress":"Weekly Progress","currentLessons":"Current Lessons","activeCourses":"Active Courses","inProgress":"in progress","allLessons":"All Lessons","allCourses":"All Courses","loadingCourses":"Loading courses...","noActiveCourses":"You don't have any active courses yet","addCourse":"Add Course","nextLesson":"Next lesson","complete":"complete","continue":"Continue","quickAccess":"Quick Access","weeklyGoals":"Weekly Goals","recentActivity":"Recent Activity","noRecentActivity":"No recent activity","learningStatistics":"Learning Statistics","averageTestScore":"Average Test Score","myCurriculum":"My Curriculum","courseCatalog":"Course Catalog","viewLearningPath":"View your learning path","browseAllCourses":"Browse all available courses","detailedStatistics":"Detailed learning statistics","practiceExercises":"Practice problems and exercises","testsQuizzes":"Tests & Quizzes","testKnowledge":"Test your knowledge","myGoals":"My Goals","trackProgress":"Track your progress","vocabulary":"Vocabulary","learnedTerms":"Learned terms and concepts","complete5Lessons":"Complete 5 lessons","study2Hours":"Study 2 hours","pass3Tests":"Pass 3 tests","min":"min","weeklyGoal":"Weekly Goal","week":"Week","lessonsCount":"{current} / {total} Lessons","startLesson":"Start a Lesson","goalCompleted":"Goal Completed!","grade":"Grade","unlimitedAccess":"Unlimited Access","selectMode":"Select Your Mode","notAvailable":"N/A","encouragement":{"start":" Plant the seeds of knowledge!","growing":" Your tree is starting to grow!","halfway":" Keep it up! Halfway there!","apples":" Amazing progress! Apples appearing!","almost":" Almost there! The tree is flourishing!","done":" Incredible! Your tree is full of fruit!"}},"catalogue":{"title":"Catalogue","courses":"courses","inPlan":"in plan","findCourse":"Find a course...","allSubjects":"All Subjects","allLevels":"All Levels","allTypes":"All Types","free":"Free","premium":"Premium","clear":"Clear","shuffle":"Shuffle","loadingCourses":"Loading courses...","noCoursesFound":"No courses found","tryAdjustingFilters":"Try adjusting your filters","lessons":"lessons","progress":"Progress","addToStudyPlan":"Add to Study Plan?","cancel":"Cancel","add":"Add","added":"Added!","great":"Great","start":"Start","continueBtn":"Continue","review":"Review","lvl":"Lvl","beginner":"Beginner","elementary":"Elementary","intermediate":"Intermediate","upperIntermediate":"Upper-Intermediate","advanced":"Advanced","proficient":"Proficient"},"chatBot":{"title":"AI Chat","loginPrompt":"To start a conversation, log in.","logIn":"Log in","placeholder":"Enter message...","send":"Send","endConversation":"End Conversation"},"topics":{"title":"Topics to study","loading":"Loading topics...","loadError":"Error loading topics:","added":"Topic added to the list!","addError":"Error adding topic:"},"topicCard":{"add":"Add","start":"Start","subjectMissing":"Subject not specified."},"aboutUs":{"title":"About ACED","desc1":"We create next-generation educational technologies that make knowledge accessible to everyone in the world.","desc2":"Our goal is to break down barriers and make learning flexible, personalized, and inspiring.","desc3":"With ACED, you're not just learning. You become freer, stronger, and ready to change your reality.","chartTitle":"How ACED changed my life","happiness":"Happiness level","confidence":"Self-confidence","motivation":"Motivation to learn","freedom":"Sense of freedom","changeWorld":"Readiness to change the world"},"lesson":{"backToTests":"Back to Tests","continueLearning":"Continue Learning","lessonComplete":"Lesson Complete!","greatJob":"Great job! You've completed this lesson.","nextLesson":"Next Lesson","tryAgain":"Try Again","correctAnswer":"Correct!","wrongAnswer":"Not quite right. Try again!","hint":"Hint","showAnswer":"Show Answer","submit":"Submit","skip":"Skip","progress":"Progress","aiHelp":"AI Help","askQuestion":"Ask a question...","vocabulary":"Vocabulary"},"games":{"score":"Score","time":"Time","lives":"Lives","level":"Level","gameOver":"Game Over","youWin":"You Win!","playAgain":"Play Again","pause":"Pause","resume":"Resume","quit":"Quit","highScore":"High Score","newHighScore":"New High Score!","tapToStart":"Tap to Start","getReady":"Get Ready!","go":"Go!"},"errors":{"loginError":"Login error","userNotFound":"User not found","invalidPassword":"Invalid password or email","invalidEmail":"Invalid email format","tooManyAttempts":"Too many attempts. Please try later","accountDisabled":"Account disabled","networkError":"Internet connection problem","registrationError":"Registration error","emailInUse":"Email already in use","weakPassword":"Password too weak","passwordsMismatch":"Passwords don't match","fillAllFields":"Please fill all required fields","googleSignInError":"Google sign-in error","popupClosed":"Sign-in window was closed","popupBlocked":"Popup window blocked","passwordMinLength":"Password must be at least 6 characters"},"success":{"signedIn":"Successfully signed in!","signedInGoogle":"Successfully signed in with Google!","registrationSuccess":"Registration successful!","profileUpdated":"Profile updated successfully!","passwordChanged":"Password changed successfully!","promocodeApplied":"Promocode applied!"},"platformMode":{"levelTest":"Level Test","testYourLevel":"Test your level to get personalized recommendations","startTest":"Start Test","skipTest":"Skip Test","yourLevel":"Your Level","beginner":"Beginner","intermediate":"Intermediate","advanced":"Advanced","expert":"Expert"},"diary":{"saving":"Saving...","saved":"Saved!","finishDay":"Finish Day","todaysNotes":"Today's Notes","addNote":"Add a note...","noNotes":"No notes yet"},"homework":{"title":"Homework Help","uploadPhoto":"Upload Photo","typeQuestion":"Type your question","getHelp":"Get Help","solution":"Solution","explanation":"Explanation","similarProblems":"Similar Problems"},"vocabulary":{"title":"Vocabulary","loading":"Loading vocabulary...","emptyTitle":"No words yet","emptyText":"You don't have any words in your vocabulary yet","emptySubtext":"Start studying lessons to add new words","learned":"% learned","words":"words","topics":"topics","searchPlaceholder":"Search words...","allWords":"All words","active":"Active","progress":"Progress"},"topicFinished":{"congratulations":"Congratulations!","completed":"You have completed all lessons in this topic!","returnToDashboard":"Return to Dashboard","goldMedal":"Gold Medal! Magnificent!","silverMedal":"Silver Medal! Great job!","bronzeMedal":"Bronze Medal! Well done!","keepLearning":"Keep learning and you will get a medal!"},"payments":{"successTitle":"Payment Successful!","subscriptionActivated":"Your subscription {plan} is activated!","enjoyLearning":"Enjoy unlimited learning without restrictions.","transactionDetails":"Transaction Details","amount":"Amount","date":"Date","whatNowAvailable":"What's now available:","unlimitedLessons":"Unlimited access to all lessons","aiAssistant":"AI assistant for learning","progressTracking":"Progress and analytics tracking","allSubjects":"Access to all subjects","startLearning":"Start Learning","questions":"Questions? Contact us:","failedTitle":"Payment Failed","failedMessage":"Unfortunately, the payment could not be processed.","tryAgain":"Try Again","contactSupport":"Contact Support"},"profilePage":{"dashboard":"Dashboard","myCourses":"My Courses","assignments":"Assignments","testsAnalytics":"Tests & Analytics","settings":"Settings"},"loadingStates":{"lesson":"Loading lesson...","courses":"Loading courses...","courseInfo":"Loading course info...","course":"Loading course information...","errorLoading":"Error Loading","processing":"Processing...","update":"Update"},"settings":{"accountSettings":"Account Settings","manageProfile":"Update your personal details","plan":"Plan","messages":"Messages","images":"Images","daysLeft":"Days Left","subscriptionPlans":"Subscription Plans","chooseBestPlan":"Choose the best plan for you","oneMonth":"1 Month","threeMonths":"3 Months","sixMonths":"6 Months","uzs":"UZS","unlimitedMessages":"Unlimited messages","unlimitedImages":"Unlimited images","aiTutorAccess":"AI tutor access","aiTutorAnalytics":"AI tutor + Analytics","unlimitedEverything":"Unlimited everything","prioritySupportPlan":"Priority support","customCourses":"Custom courses","bestDeal":"Best Deal","getPro":"Get Pro","enterPromocode":"Enter promocode","applyCode":"Apply Code","applying":"Applying...","invalidPromocode":"Invalid promocode","promocodeApplied":"Promocode applied!","personalInformation":"Personal Information","personalInfo":"Personal Information","updatePersonal":"Update your personal details","notSpecified":"Not specified","security":"Security","changePassword":"Change your password","currentPassword":"Current Password","newPassword":"New Password","confirmPassword":"Confirm Password","confirmNewPassword":"Confirm Password","forgotPassword":"Forgot Password?","updating":"Updating...","dangerZone":"Danger Zone","irreversibleActions":"Irreversible actions","signOut":"Sign Out","signOutDesc":"Sign out from your account","deleteAccount":"Delete Account","deleteAccountDesc":"Permanently delete account","deleteModalTitle":"Delete Account","deleteModalText":"Are you sure you want to delete your account? This action cannot be undone.","deleteModalWarning":"All your data, progress, and subscription will be permanently deleted.","deleteConfirmTitle":"Delete Account","deleteConfirmText":"Are you sure you want to delete your account? This action cannot be undone.","deleteWarning":"All your data, progress, and subscription will be permanently deleted.","deleteForever":"Delete Forever","cancel":"Cancel","save":"Save","update":"Update","toggleNavigation":"Toggle navigation"},"analytics":{"pageTitle":"Learning Analytics","pageSubtitle":"Track your progress and achievements","title":"Your learning analytics","downloadPdf":"Download PDF","downloadPDF":"Download as PDF","configureExport":"Configure PDF export","choosePeriod":"Choose period:","lastWeek":"Last week","twoWeeks":"2 weeks","threeWeeks":"3 weeks","oneMonth":"1 Month","threeMonths":"3 Months","oneYear":"1 Year","studyDays":"Study Days","completedSubjects":"Subjects completed","weeklyLessons":"Lessons per week","monthlyLessons":"Lessons per month","streakDays":"Streak Days","activeDay":"Active day","mostActiveDay":"Most active day","totalLessons":"Total lessons","download":"Download","currentPace":"This is your current pace","consistency":"Consistency is key to success","onARoll":"You're on a roll","startAgain":"Start again","keepItUp":"Keep it up on this day","overallProgress":"Overall progress","loading":"Loading analytics...","error":"Error loading data","tryAgain":"Try Again","learningDna":"Your Learning DNA","aiPersonalization":"AI-powered personalization","learningStyle":"Learning Style","chronotype":"Chronotype","learningPath":"Learning Path","sessionLength":"Session Length","cognitiveProfile":"Cognitive Profile","personalInsights":"Personal Insights","gamification":"Gamification","level":"Level","points":"points","streak":"Streak","achievements":"Achievements","recentActivity":"Recent Activity","emptyState":"No analytics data yet","startLearning":"Start Learning","exportSettings":"PDF Export Settings","period":"Period","selectMetrics":"Select Metrics","completedLessons":"Completed Lessons","completedTopics":"Completed Topics","totalPoints":"Total Points","avgPointsPerDay":"Avg Points/Day","daysInRow":"days in a row","recentAchievements":"Recent Achievements","untilReward":"Until reward","authRequired":"Authorization required","authError":"Authorization error","notFound":"Data not found. Start learning lessons!","serverError":"Server error","loadError":"Error loading data","visual":"Visual","auditory":"Auditory","kinesthetic":"Kinesthetic","readingWriting":"Reading/Writing","balanced":"Balanced","lark":"Lark","owl":"Owl","thirdBird":"Third Bird","variable":"Variable","flexible":"Flexible","storyteller":"Storyteller","builder":"Builder","scientist":"Scientist","artist":"Artist","gamer":"Gamer","social":"Social","debater":"Debater","universal":"Universal","minutes":"minutes","processingSpeed":"Processing Speed","workingMemory":"Working Memory","visualSpatial":"Visual-Spatial","verbalLinguistic":"Verbal-Linguistic","logicalMathematical":"Logical-Mathematical","Processing":"Processing Speed","Memory":"Working Memory","Visual":"Visual-Spatial","Verbal":"Verbal-Linguistic","Logic":"Logical-Mathematical","lessonWithoutName":"Untitled Lesson","lesson":"Lesson","today":"Today","yesterday":"Yesterday","generated":"Generated","studyAnytime":"Study anytime","betterAt":"Better at {hours}","days":"days","yearShort":"y","monthShort":"mo","dayShort":"d","passedLessons":"Passed lessons","studiedSections":"Studied sections","activityPoints":"Activity points","avgEarnings":"Avg earnings"},"acedSection":{"exploreCourses":"Explore Courses","startLearning":"Start learning","today":"today","chooseCourse":"Choose a course and begin your learning journey","lessons":"lessons","start":"Start","noCoursesFound":"No courses found","loadingContent":"We're loading content for you","tryAgain":"Try Again","unlockCourse":"Unlock This Course","createFreeAccount":"Create a free account to access premium content","createAccount":"Create Free Account","maybeLater":"Maybe Later","lvl":"Lvl","errorLoading":"Error loading courses"},"homepage":{"whyChooseUs":"Why Choose Us","learningMadeSimple":"Learning made simple","learningMadeSimpleDesc":"We've built an education platform that's effective, engaging, and easy to use","interactiveLearning":"Interactive Learning","interactiveLearningDesc":"Hands-on exercises with instant feedback. No boring lectures.","aiPoweredHelp":"AI-Powered Help","aiPoweredHelpDesc":"Our AI tutor is available 24/7 to explain concepts clearly.","trackProgress":"Track Progress","trackProgressDesc":"See your growth with analytics. Earn badges as you level up.","richContent":"Rich Content","richContentDesc":"100+ courses in math, science, languages. New content weekly.","learnAnytime":"Learn Anytime","learnAnytimeDesc":"Access on any device. Progress syncs automatically.","actuallyFun":"Actually Fun","actuallyFunDesc":"Learning that doesn't feel like a chore. Stay motivated.","activeStudents":"Active Students","courses":"Courses","completionRate":"Completion Rate","aiSupport":"AI Support"},"tariffSection":{"pricing":"Pricing","simplePricing":"Simple pricing","noHiddenFees":"No hidden fees. Cancel anytime.","monthly":"Monthly","quarterly":"Quarterly","biannual":"Biannual","greatForTrying":"Great for trying out","bestValue":"Best value","maximumSavings":"Maximum savings","perMonth":"/mo","forMonths":"for {months} months","getStarted":"Get Started","startLearning":"Start Learning","subscribe":"Subscribe","popular":"POPULAR","save":"Save {percent}%","securePayment":"Secure payment","cancelAnytime":"Cancel anytime","instantAccess":"Instant access","allSubjectsIncluded":"All subjects included","unlimitedAiHelp":"Unlimited AI help","progressTracking":"Progress tracking","homeworkAssistance":"Homework assistance","prioritySupport":"Priority support"}}`),Ux=JSON.parse(`{"common":{"login":"","register":"","logout":"","save":"","cancel":"","back":"","continue":"","loading":"...","or":"","yes":"","no":"","free":"","pro":"","start":"","close":"","search":"","apply":"","update":"","delete":"","edit":"","verified":"","active":"","language":"","selectLanguage":" ","english":"English","russian":"","uzbek":"O'zbekcha","toggleNavigation":" "},"userSection":{"login":"","register":"","profile":"","settings":"","logout":"","greeting":", {name}","createAccount":" ","startJourney":"   ","firstName":"","lastName":"","email":"Email","password":"","confirmPassword":" ","signUp":"","registering":"...","continueWithGoogle":"  Google","alreadyHaveAccount":"  ?","signIn":"","welcomeBack":" !","continuelearning":" ","signingIn":"...","dontHaveAccount":" ?"},"heroSection":{"studentsLearning":"{count}+   ","headline":" ","headlineHighlight":" ","subtitle":"    .    .","startFree":" ","registerAndSave":"  ","courses":"","aiSupport":" ","completion":"","learners":"","mathematics":"","mathLessons":"12   ","languages":"","langLessons":"24   ","science":"","sciLessons":"18   "},"sidebar":{"learningPlatform":" ","level":"","streak":"","learningMode":" ","school":"","studyCentre":" ","chooseYourPath":"  ","selectHowToLearn":"  ","schoolMode":" ","structuredCurriculum":" ","freeExploration":" ","menu":"","dashboard":"","overviewStats":"  ","myCourses":" ","browseLessons":" ","assignments":"","practiceHomework":"  ","tests":"","assessmentAnalytics":"  ","settings":"","accountPreferences":"  ","upgradeToPro":"  Pro","unlockAllFeatures":"  ","logOut":"","confirmLogout":" ,     ?","premiumFeature":" ","unlockWithPlan":"   Start  Pro","unlimitedTests":" ","detailedAnalytics":" ","aiHomeworkHelp":"   ","maybeLater":" ","upgradeNow":" "},"footer":{"slogan":"  ,     .","navigation":"","aboutUs":" ","courses":"","pricing":"","aiAssistant":" ","contact":"","contactUs":"  ","allRights":"2025 ACED.   .","privacyPolicy":" ","termsOfService":" ","aiHelperTitle":" ","aiHelperText":"      .    !","gotIt":""},"tariffs":{"pricing":"","simpleTitle":"","pricingTitle":"","noHiddenFees":"  .    .","monthly":"","quarterly":"","biannual":"","tryingOut":"  ","bestValue":" ","maxSavings":" ","month":"","months":"","forMonths":" {count} ","getStarted":"","startLearning":" ","subscribe":"","popular":"","save":" {percent}%","allSubjects":"  ","unlimitedAI":"  ","progressTracking":" ","homeworkAssistance":"  ","prioritySupport":" ","securePayment":" ","cancelAnytime":"   ","instantAccess":" "},"mainPage":{"welcomeBack":" !","searchPlaceholder":"   ...","allSubjects":" ","recommended":"  ","refresh":"","noRecommendations":"  .","myCourses":" ","noCourses":"     ."},"dashboard":{"title":" ","streak":"","days":"","points":"","discoverLevel":"  ","discoverLevelDesc":"  ,        ","takePlacementTest":"  ","yourLearningJourney":"  ","addCourseToSeePathway":" ,     !","browseCourses":" ","yourLearningDNA":"  ","aiPoweredPersonalization":"   ","learningStyle":" ","bestTime":" ","cognitiveStrengths":" ","smartTips":"   ","learningPath":" ","optimalTime":" ","sessionLength":" ","difficulty":"","unlockLearningDNA":"   ","completeLessonsToReveal":" ,   ","completeAtLeast":"  {count} ,        .","lesson":"","startLearning":" ","yourProgress":" ","level":"","toNextLevel":"  ","dayStreak":" ","achievements":"","stepsToReward":"  ","recentAchievements":" ","viewAllAchievements":"  {count} ","totalCourses":" ","completed":"","hoursStudied":" ","weeklyProgress":" ","currentLessons":" ","activeCourses":" ","inProgress":" ","allLessons":" ","allCourses":" ","loadingCourses":" ...","noActiveCourses":"     ","addCourse":" ","nextLesson":" ","complete":"","continue":"","quickAccess":" ","weeklyGoals":" ","recentActivity":" ","noRecentActivity":"  ","learningStatistics":" ","averageTestScore":"  ","myCurriculum":" ","courseCatalog":" ","viewLearningPath":"  ","browseAllCourses":"   ","detailedStatistics":"  ","practiceExercises":"   ","testsQuizzes":"  ","testKnowledge":"  ","myGoals":" ","trackProgress":" ","vocabulary":"","learnedTerms":"   ","complete5Lessons":" 5 ","study2Hours":" 2 ","pass3Tests":" 3 ","min":"","weeklyGoal":" ","week":"","lessonsCount":"{current} / {total} ","startLesson":" ","goalCompleted":" !","grade":"","unlimitedAccess":" ","selectMode":" ","notAvailable":"/","encouragement":{"start":"   !","growing":"    !","halfway":"  !   !","apples":"  !  !","almost":"  !  !","done":" !    !"}},"catalogue":{"title":"","courses":"","inPlan":" ","findCourse":" ...","allSubjects":" ","allLevels":" ","allTypes":" ","free":"","premium":"","clear":"","shuffle":"","loadingCourses":" ...","noCoursesFound":"  ","tryAdjustingFilters":"  ","lessons":"","progress":"","addToStudyPlan":"   ?","cancel":"","add":"","added":"!","great":"","start":"","continueBtn":"","review":"","lvl":"","beginner":"","elementary":"","intermediate":"","upperIntermediate":" ","advanced":"","proficient":""},"chatBot":{"title":" ","loginPrompt":"  ,   .","logIn":"","placeholder":" ...","send":"","endConversation":" "},"topics":{"title":"  ","loading":" ...","loadError":"  :","added":"   !","addError":"   :"},"topicCard":{"add":"","start":"","subjectMissing":"  ."},"aboutUs":{"title":"  ACED","desc1":"     ,        .","desc2":"    ,   ,   .","desc3":" ACED    .   ,      .","chartTitle":" ACED   ","happiness":" ","confidence":"  ","motivation":" ","freedom":" ","changeWorld":"  "},"lesson":{"backToTests":"  ","continueLearning":" ","lessonComplete":" !","greatJob":"!    .","nextLesson":" ","tryAgain":" ","correctAnswer":"!","wrongAnswer":"  .  !","hint":"","showAnswer":" ","submit":"","skip":"","progress":"","aiHelp":" ","askQuestion":" ...","vocabulary":""},"games":{"score":"","time":"","lives":"","level":"","gameOver":" ","youWin":" !","playAgain":" ","pause":"","resume":"","quit":"","highScore":"","newHighScore":" !","tapToStart":"  ","getReady":"!","go":"!"},"errors":{"loginError":" ","userNotFound":"  ","invalidPassword":"   email","invalidEmail":"  email","tooManyAttempts":"  .  ","accountDisabled":" ","networkError":"   ","registrationError":" ","emailInUse":"Email  ","weakPassword":"  ","passwordsMismatch":"  ","fillAllFields":",    ","googleSignInError":"   Google","popupClosed":"   ","popupBlocked":"  ","passwordMinLength":"    6 "},"success":{"signedIn":" !","signedInGoogle":"   Google!","registrationSuccess":" !","profileUpdated":"  !","passwordChanged":"  !","promocodeApplied":" !"},"platformMode":{"levelTest":" ","testYourLevel":"     ","startTest":" ","skipTest":" ","yourLevel":" ","beginner":"","intermediate":"","advanced":"","expert":""},"diary":{"saving":"...","saved":"!","finishDay":" ","todaysNotes":"  ","addNote":" ...","noNotes":"  "},"homework":{"title":"  ","uploadPhoto":" ","typeQuestion":"  ","getHelp":" ","solution":"","explanation":"","similarProblems":" "},"vocabulary":{"title":"","loading":" ...","emptyTitle":"  ","emptyText":"     ","emptySubtext":"  ,    ","learned":"% ","words":"","topics":"","searchPlaceholder":" ...","allWords":" ","active":"","progress":""},"topicFinished":{"congratulations":"!","completed":"     !","returnToDashboard":"  ","goldMedal":" ! !","silverMedal":" !  !","bronzeMedal":" ! !","keepLearning":"    !"},"payments":{"successTitle":" !","subscriptionActivated":"  {plan} !","enjoyLearning":"    .","transactionDetails":" ","amount":"","date":"","whatNowAvailable":"  :","unlimitedLessons":"    ","aiAssistant":"   ","progressTracking":"   ","allSubjects":"   ","startLearning":" ","questions":"?  :","failedTitle":" ","failedMessage":" ,    .","tryAgain":" ","contactSupport":"  "},"profilePage":{"dashboard":" ","myCourses":" ","assignments":"","testsAnalytics":"  ","settings":""},"loadingStates":{"lesson":" ...","courses":" ...","courseInfo":"   ...","course":"   ...","errorLoading":" ","processing":"...","update":""},"settings":{"accountSettings":" ","manageProfile":"   ","plan":"","messages":"","images":"","daysLeft":" ","subscriptionPlans":" ","chooseBestPlan":"    ","oneMonth":"1 ","threeMonths":"3 ","sixMonths":"6 ","uzs":"","unlimitedMessages":" ","unlimitedImages":" ","aiTutorAccess":"   ","aiTutorAnalytics":"  + ","unlimitedEverything":"   ","prioritySupportPlan":" ","customCourses":" ","bestDeal":" ","getPro":" Pro","enterPromocode":" ","applyCode":" ","applying":"...","invalidPromocode":" ","promocodeApplied":" !","personalInformation":" ","personalInfo":" ","updatePersonal":"   ","notSpecified":" ","security":"","changePassword":" ","currentPassword":" ","newPassword":" ","confirmPassword":" ","confirmNewPassword":" ","forgotPassword":" ?","updating":"...","dangerZone":" ","irreversibleActions":" ","signOut":"","signOutDesc":"  ","deleteAccount":" ","deleteAccountDesc":"  ","deleteModalTitle":" ","deleteModalText":" ,    ?    .","deleteModalWarning":"  ,      .","deleteConfirmTitle":" ","deleteConfirmText":" ,    ?    .","deleteWarning":"  ,      .","deleteForever":" ","cancel":"","save":"","update":""},"analytics":{"pageTitle":" ","pageSubtitle":"    ","title":"  ","downloadPdf":" PDF","downloadPDF":"  PDF","configureExport":"  PDF","choosePeriod":" :","lastWeek":" ","twoWeeks":"2 ","threeWeeks":"3 ","oneMonth":"1 ","threeMonths":"3 ","oneYear":"1 ","studyDays":"  ","completedSubjects":" ","weeklyLessons":"  ","monthlyLessons":"  ","streakDays":" ","activeDay":" ","mostActiveDay":"  ","totalLessons":" ","download":"","currentPace":"   ","consistency":"    ","onARoll":"  ","startAgain":"  ","keepItUp":"   ","overallProgress":" ","loading":" ...","error":"  ","tryAgain":" ","learningDna":"  ","aiPersonalization":"AI-","learningStyle":" ","chronotype":"","learningPath":" ","sessionLength":" ","cognitiveProfile":" ","personalInsights":" ","gamification":"","level":"","points":"","streak":"","achievements":"","recentActivity":" ","emptyState":"    ","startLearning":" ","exportSettings":"  PDF","period":"","selectMetrics":" ","completedLessons":" ","completedTopics":" ","totalPoints":" ","avgPointsPerDay":"  ","daysInRow":" ","recentAchievements":" ","untilReward":" ","authRequired":" ","authError":" ","notFound":"  .   !","serverError":"  ","loadError":"  ","visual":"","auditory":"","kinesthetic":"","readingWriting":"/","balanced":"","lark":"","owl":"","thirdBird":"","variable":"","flexible":"","storyteller":"","builder":"","scientist":"","artist":"","gamer":"","social":"","debater":"","universal":"","minutes":"","processingSpeed":" ","workingMemory":" ","visualSpatial":"-","verbalLinguistic":"-","logicalMathematical":"-","Processing":" ","Memory":" ","Visual":"-","Verbal":"-","Logic":"-","lessonWithoutName":"  ","lesson":"","today":"","yesterday":"","generated":"","studyAnytime":"   ","betterAt":"  {hours}","days":"","yearShort":".","monthShort":".","dayShort":".","passedLessons":" ","studiedSections":" ","activityPoints":"  ","avgEarnings":" "},"acedSection":{"exploreCourses":"","startLearning":" ","today":"","chooseCourse":"     ","lessons":"","start":"","noCoursesFound":"  ","loadingContent":"   ","tryAgain":" ","unlockCourse":" ","createFreeAccount":"       ","createAccount":"  ","maybeLater":"","lvl":".","errorLoading":"  "},"homepage":{"whyChooseUs":" ","learningMadeSimple":" ","learningMadeSimpleDesc":"   ,  ,     ","interactiveLearning":" ","interactiveLearningDesc":"     .   .","aiPoweredHelp":"-","aiPoweredHelpDesc":" -  24/7   .","trackProgress":" ","trackProgressDesc":"     .  .","richContent":" ","richContentDesc":"100+   , , .   .","learnAnytime":"   ","learnAnytimeDesc":"   .   .","actuallyFun":" ","actuallyFunDesc":",    .  .","activeStudents":" ","courses":"","completionRate":"","aiSupport":"-"},"tariffSection":{"pricing":"","simplePricing":" ","noHiddenFees":"  .    .","monthly":"","quarterly":"","biannual":"","greatForTrying":"  ","bestValue":" ","maximumSavings":" ","perMonth":"/","forMonths":" {months} ","getStarted":"","startLearning":" ","subscribe":"","popular":"","save":" {percent}%","securePayment":" ","cancelAnytime":"   ","instantAccess":" ","allSubjectsIncluded":"  ","unlimitedAiHelp":" -","progressTracking":" ","homeworkAssistance":"  ","prioritySupport":" "}}`),Fx=JSON.parse(`{"common":{"login":"Kirish","register":"Ro'yxatdan o'tish","logout":"Chiqish","save":"Saqlash","cancel":"Bekor qilish","back":"Orqaga","continue":"Davom etish","loading":"Yuklanmoqda...","or":"yoki","yes":"Ha","no":"Yo'q","free":"Bepul","pro":"Pro","start":"Boshlash","close":"Yopish","search":"Qidirish","apply":"Qo'llash","update":"Yangilash","delete":"O'chirish","edit":"Tahrirlash","verified":"Tasdiqlangan","active":"Faol","language":"Til","selectLanguage":"Tilni tanlang","english":"English","russian":"","uzbek":"O'zbekcha","toggleNavigation":"Navigatsiyani o'zgartirish"},"userSection":{"login":"Kirish","register":"Ro'yxatdan o'tish","profile":"Profil","settings":"Sozlamalar","logout":"Chiqish","greeting":"Salom, {name}","createAccount":"Hisob yaratish","startJourney":"O'qish sayohatingizni boshlang","firstName":"Ism","lastName":"Familiya","email":"Email","password":"Parol","confirmPassword":"Parolni tasdiqlang","signUp":"Ro'yxatdan o'tish","registering":"Ro'yxatdan o'tilmoqda...","continueWithGoogle":"Google bilan davom etish","alreadyHaveAccount":"Hisobingiz bormi?","signIn":"Kirish","welcomeBack":"Qaytib kelganingiz bilan!","continuelearning":"O'qishni davom ettiring","signingIn":"Kirilmoqda...","dontHaveAccount":"Hisobingiz yo'qmi?"},"heroSection":{"studentsLearning":"{count}+ talaba allaqachon o'qimoqda","headline":"Hamma narsani o'rganishning","headlineHighlight":"aqlli usuli","subtitle":"AI yordami bilan interaktiv darslar. O'z sur'atingizda o'rganing.","startFree":"Bepul boshlash","registerAndSave":"Ro'yxatdan o'tish va saqlash","courses":"Kurslar","aiSupport":"AI yordam","completion":"Yakunlash","learners":"o'quvchilar","mathematics":"Matematika","mathLessons":"12 dars  Boshlang'ich","languages":"Tillar","langLessons":"24 dars  O'rta","science":"Fan","sciLessons":"18 dars  Yuqori"},"sidebar":{"learningPlatform":"O'quv platformasi","level":"Daraja","streak":"Ketma-ketlik","learningMode":"O'qish rejimi","school":"Maktab","studyCentre":"O'quv markazi","chooseYourPath":"Yo'lingizni tanlang","selectHowToLearn":"Qanday o'qishni tanlang","schoolMode":"Maktab rejimi","structuredCurriculum":"Tuzilgan dastur","freeExploration":"Erkin o'rganish","menu":"Menyu","dashboard":"Bosh sahifa","overviewStats":"Umumiy ko'rinish va statistika","myCourses":"Mening kurslarim","browseLessons":"Darslarni ko'rish","assignments":"Topshiriqlar","practiceHomework":"Amaliyot va uy vazifasi","tests":"Testlar","assessmentAnalytics":"Baholash va tahlil","settings":"Sozlamalar","accountPreferences":"Hisob va sozlamalar","upgradeToPro":"Pro ga yangilash","unlockAllFeatures":"Barcha funksiyalarni ochish","logOut":"Chiqish","confirmLogout":"Hisobingizdan chiqmoqchimisiz?","premiumFeature":"Premium funksiya","unlockWithPlan":"Start yoki Pro rejasi bilan oching","unlimitedTests":"Cheksiz testlar","detailedAnalytics":"Batafsil tahlil","aiHomeworkHelp":"AI uy vazifasi yordami","maybeLater":"Keyinroq","upgradeNow":"Hozir yangilash"},"footer":{"slogan":"Ta'limni oddiy, interaktiv va hamma uchun qulay qilish.","navigation":"Navigatsiya","aboutUs":"Biz haqimizda","courses":"Kurslar","pricing":"Narxlar","aiAssistant":"AI Yordamchi","contact":"Aloqa","contactUs":"Biz bilan bog'laning","allRights":"2025 ACED. Barcha huquqlar himoyalangan.","privacyPolicy":"Maxfiylik siyosati","termsOfService":"Foydalanish shartlari","aiHelperTitle":"AI Yordamchi","aiHelperText":"Pastki o'ng burchakdagi chat tugmasini toping. Bizning AI yordam berishga tayyor!","gotIt":"Tushundim"},"tariffs":{"pricing":"Narxlar","simpleTitle":"Oddiy","pricingTitle":"narxlar","noHiddenFees":"Yashirin to'lovlar yo'q. Istalgan vaqtda bekor qilish.","monthly":"Oylik","quarterly":"Choraklik","biannual":"Yarim yillik","tryingOut":"Sinash uchun ajoyib","bestValue":"Eng yaxshi narx","maxSavings":"Maksimal tejash","month":"oy","months":"oy","forMonths":"{count} oy uchun","getStarted":"Boshlash","startLearning":"O'qishni boshlash","subscribe":"Obuna bo'lish","popular":"MASHHUR","save":"{percent}% tejash","allSubjects":"Barcha fanlar kiritilgan","unlimitedAI":"Cheksiz AI yordam","progressTracking":"Progress kuzatuvi","homeworkAssistance":"Uy vazifasi yordami","prioritySupport":"Ustuvor qo'llab-quvvatlash","securePayment":"Xavfsiz to'lov","cancelAnytime":"Istalgan vaqtda bekor qilish","instantAccess":"Tezkor kirish"},"mainPage":{"welcomeBack":"Qaytib kelganingiz bilan!","searchPlaceholder":"Mavzular yoki kurslarni qidirish...","allSubjects":"Barcha fanlar","recommended":"Siz uchun tavsiya etilgan","refresh":"Yangilash","noRecommendations":"Mos tavsiyalar yo'q.","myCourses":"Mening kurslarim","noCourses":"Sizda hali faol kurslar yo'q."},"dashboard":{"title":"Boshqaruv paneli","streak":"Ketma-ketlik","days":"kun","points":"Ballar","discoverLevel":"Darajangizni aniqlang","discoverLevelDesc":"Bilim darajangizni aniqlash va mos kurslarni ochish uchun tezkor test topshiring","takePlacementTest":"Daraja testini topshirish","yourLearningJourney":"O'qish sayohatingiz","addCourseToSeePathway":"Interaktiv dars yo'lini ko'rish uchun kurs qo'shing!","browseCourses":"Kurslarni ko'rish","yourLearningDNA":"O'qish DNKingiz","aiPoweredPersonalization":"AI yordamida shaxsiylashtirish","learningStyle":"O'qish uslubi","bestTime":"Eng yaxshi vaqt","cognitiveStrengths":"Kognitiv kuchli tomonlar","smartTips":"Siz uchun aqlli maslahatlar","learningPath":"O'qish yo'li","optimalTime":"Optimal vaqt","sessionLength":"Sessiya davomiyligi","difficulty":"Qiyinlik","unlockLearningDNA":"O'qish DNKingizni oching","completeLessonsToReveal":"Profilingizni ochish uchun darslarni yakunlang","completeAtLeast":"Shaxsiylashtirilgan O'qish DNK va AI tavsiyalarini ochish uchun kamida {count} ta darsni yakunlang.","lesson":"Dars","startLearning":"O'qishni boshlash","yourProgress":"Sizning progressingiz","level":"Daraja","toNextLevel":"keyingi darajagacha","dayStreak":"Kunlik ketma-ketlik","achievements":"Yutuqlar","stepsToReward":"Mukofotgacha qadamlar","recentAchievements":"So'nggi yutuqlar","viewAllAchievements":"Barcha {count} yutuqni ko'rish","totalCourses":"Jami kurslar","completed":"Yakunlangan","hoursStudied":"O'qilgan soatlar","weeklyProgress":"Haftalik progress","currentLessons":"Joriy darslar","activeCourses":"Faol kurslar","inProgress":"jarayonda","allLessons":"Barcha darslar","allCourses":"Barcha kurslar","loadingCourses":"Kurslar yuklanmoqda...","noActiveCourses":"Sizda hali faol kurslar yo'q","addCourse":"Kurs qo'shish","nextLesson":"Keyingi dars","complete":"yakunlangan","continue":"Davom etish","quickAccess":"Tezkor kirish","weeklyGoals":"Haftalik maqsadlar","recentActivity":"So'nggi faoliyat","noRecentActivity":"So'nggi faoliyat yo'q","learningStatistics":"O'qish statistikasi","averageTestScore":"O'rtacha test balli","myCurriculum":"Mening dasturim","courseCatalog":"Kurslar katalogi","viewLearningPath":"O'qish yo'lini ko'rish","browseAllCourses":"Barcha mavjud kurslarni ko'rish","detailedStatistics":"Batafsil o'qish statistikasi","practiceExercises":"Amaliy mashqlar va topshiriqlar","testsQuizzes":"Testlar va viktorinalar","testKnowledge":"Bilimingizni tekshiring","myGoals":"Mening maqsadlarim","trackProgress":"Progressni kuzatish","vocabulary":"Lug'at","learnedTerms":"O'rganilgan atamalar va tushunchalar","complete5Lessons":"5 ta darsni yakunlash","study2Hours":"2 soat o'qish","pass3Tests":"3 ta testni topshirish","min":"daqiqa","weeklyGoal":"Haftalik maqsad","week":"Hafta","lessonsCount":"{current} / {total} Dars","startLesson":"Darsni boshlash","goalCompleted":"Maqsad bajarildi!","grade":"Sinf","unlimitedAccess":"Cheksiz kirish","selectMode":"Rejimni tanlang","notAvailable":"N/A","encouragement":{"start":" Bilim urug'larini eking!","growing":" Daraxtingiz o'sishni boshladi!","halfway":" Shunday davom eting! Yarmi ortda qoldi!","apples":" Ajoyib natija! Olmalar paydo bo'lmoqda!","almost":" Oz qoldi! Daraxt gullab-yashnamoqda!","done":" Aql bovar qilmas! Daraxtingiz mevalarga to'la!"}},"catalogue":{"title":"Katalog","courses":"kurslar","inPlan":"rejada","findCourse":"Kurs topish...","allSubjects":"Barcha fanlar","allLevels":"Barcha darajalar","allTypes":"Barcha turlar","free":"Bepul","premium":"Premium","clear":"Tozalash","shuffle":"Aralashtirish","loadingCourses":"Kurslar yuklanmoqda...","noCoursesFound":"Kurslar topilmadi","tryAdjustingFilters":"Filtrlarni o'zgartirib ko'ring","lessons":"darslar","progress":"Progress","addToStudyPlan":"O'qish rejasiga qo'shilsinmi?","cancel":"Bekor qilish","add":"Qo'shish","added":"Qo'shildi!","great":"Ajoyib","start":"Boshlash","continueBtn":"Davom etish","review":"Takrorlash","lvl":"Drj","beginner":"Boshlang'ich","elementary":"Elementar","intermediate":"O'rta","upperIntermediate":"O'rtadan yuqori","advanced":"Yuqori","proficient":"Professional"},"chatBot":{"title":"AI Chat","loginPrompt":"Suhbatni boshlash uchun tizimga kiring.","logIn":"Kirish","placeholder":"Xabar kiriting...","send":"Yuborish","endConversation":"Suhbatni yakunlash"},"topics":{"title":"O'rganish mavzulari","loading":"Mavzular yuklanmoqda...","loadError":"Mavzularni yuklashda xato:","added":"Mavzu ro'yxatga qo'shildi!","addError":"Mavzuni qo'shishda xato:"},"topicCard":{"add":"Qo'shish","start":"Boshlash","subjectMissing":"Fan ko'rsatilmagan."},"aboutUs":{"title":"ACED haqida","desc1":"Biz bilimni dunyodagi har bir inson uchun qulay qiladigan yangi avlod ta'lim texnologiyalarini yaratamiz.","desc2":"Maqsadimiz to'siqlarni yo'q qilish va ta'limni moslashuvchan, shaxsiylashtirilgan va ilhomlantiruvchi qilish.","desc3":"ACED bilan siz faqat o'rganib qolmaysiz. Siz erkinroq, kuchliroq bo'lib, o'z hayotingizni o'zgartirishga tayyor bo'lasiz.","chartTitle":"ACED hayotimni qanday o'zgartirdi","happiness":"Baxt darajasi","confidence":"O'ziga ishonch","motivation":"O'qishga motivatsiya","freedom":"Erkinlik hissi","changeWorld":"Dunyoni o'zgartirishga tayyorlik"},"lesson":{"backToTests":"Testlarga qaytish","continueLearning":"O'qishni davom ettirish","lessonComplete":"Dars yakunlandi!","greatJob":"Ajoyib! Siz bu darsni tugatdingiz.","nextLesson":"Keyingi dars","tryAgain":"Qaytadan urinish","correctAnswer":"To'g'ri!","wrongAnswer":"Mutlaqo to'g'ri emas. Qaytadan urining!","hint":"Maslahat","showAnswer":"Javobni ko'rsatish","submit":"Yuborish","skip":"O'tkazib yuborish","progress":"Progress","aiHelp":"AI Yordam","askQuestion":"Savol bering...","vocabulary":"Lug'at"},"games":{"score":"Ball","time":"Vaqt","lives":"Hayotlar","level":"Daraja","gameOver":"O'yin tugadi","youWin":"Siz yutdingiz!","playAgain":"Qayta o'ynash","pause":"Pauza","resume":"Davom etish","quit":"Chiqish","highScore":"Rekord","newHighScore":"Yangi rekord!","tapToStart":"Boshlash uchun bosing","getReady":"Tayyorlaning!","go":"Oldinga!"},"errors":{"loginError":"Kirish xatosi","userNotFound":"Foydalanuvchi topilmadi","invalidPassword":"Noto'g'ri parol yoki email","invalidEmail":"Noto'g'ri email formati","tooManyAttempts":"Juda ko'p urinish. Keyinroq qaytadan urinib ko'ring","accountDisabled":"Hisob o'chirilgan","networkError":"Internet aloqasi muammosi","registrationError":"Ro'yxatdan o'tish xatosi","emailInUse":"Email allaqachon ishlatilmoqda","weakPassword":"Parol juda zaif","passwordsMismatch":"Parollar mos kelmaydi","fillAllFields":"Iltimos, barcha majburiy maydonlarni to'ldiring","googleSignInError":"Google orqali kirish xatosi","popupClosed":"Kirish oynasi yopildi","popupBlocked":"Ochiluvchi oyna bloklandi","passwordMinLength":"Parol kamida 6 ta belgidan iborat bo'lishi kerak"},"success":{"signedIn":"Muvaffaqiyatli kirish!","signedInGoogle":"Google orqali muvaffaqiyatli kirish!","registrationSuccess":"Ro'yxatdan o'tish muvaffaqiyatli!","profileUpdated":"Profil muvaffaqiyatli yangilandi!","passwordChanged":"Parol muvaffaqiyatli o'zgartirildi!","promocodeApplied":"Promokod qo'llandi!"},"platformMode":{"levelTest":"Daraja testi","testYourLevel":"Shaxsiy tavsiyalar uchun darajangizni tekshiring","startTest":"Testni boshlash","skipTest":"Testni o'tkazib yuborish","yourLevel":"Sizning darajangiz","beginner":"Boshlang'ich","intermediate":"O'rta","advanced":"Yuqori","expert":"Ekspert"},"diary":{"saving":"Saqlanmoqda...","saved":"Saqlandi!","finishDay":"Kunni yakunlash","todaysNotes":"Bugungi yozuvlar","addNote":"Yozuv qo'shing...","noNotes":"Hali yozuvlar yo'q"},"homework":{"title":"Uy vazifasi yordami","uploadPhoto":"Rasm yuklash","typeQuestion":"Savolingizni yozing","getHelp":"Yordam olish","solution":"Yechim","explanation":"Tushuntirish","similarProblems":"O'xshash masalalar"},"vocabulary":{"title":"Lug'at","loading":"Lug'at yuklanmoqda...","emptyTitle":"Hali so'zlar yo'q","emptyText":"Lug'atingizda hali so'zlar yo'q","emptySubtext":"Yangi so'zlar qo'shish uchun darslarni o'rganishni boshlang","learned":"% o'rganildi","words":"so'z","topics":"mavzu","searchPlaceholder":"So'zlarni qidirish...","allWords":"Barcha so'zlar","active":"Faol","progress":"Progress"},"topicFinished":{"congratulations":"Tabriklaymiz!","completed":"Siz bu mavzudagi barcha darslarni tugatdingiz!","returnToDashboard":"Bosh sahifaga qaytish","goldMedal":"Oltin medal! Ajoyib!","silverMedal":"Kumush medal! Zo'r ish!","bronzeMedal":"Bronza medal! Barakalla!","keepLearning":"O'qishni davom ettiring va medal oling!"},"payments":{"successTitle":"To'lov muvaffaqiyatli!","subscriptionActivated":"Sizning {plan} obunangiz faollashtirildi!","enjoyLearning":"Cheklovsiz o'qishdan bahramand bo'ling.","transactionDetails":"Tranzaksiya tafsilotlari","amount":"Summa","date":"Sana","whatNowAvailable":"Endi nima mavjud:","unlimitedLessons":"Barcha darslarga cheksiz kirish","aiAssistant":"O'qish uchun AI yordamchi","progressTracking":"Progress va tahlil kuzatuvi","allSubjects":"Barcha fanlarga kirish","startLearning":"O'qishni boshlash","questions":"Savollar bormi? Biz bilan bog'laning:","failedTitle":"To'lov xatosi","failedMessage":"Afsuski, to'lovni amalga oshirib bo'lmadi.","tryAgain":"Qaytadan urinish","contactSupport":"Qo'llab-quvvatlash bilan bog'lanish"},"profilePage":{"dashboard":"Boshqaruv paneli","myCourses":"Mening kurslarim","assignments":"Topshiriqlar","testsAnalytics":"Testlar va tahlil","settings":"Sozlamalar"},"loadingStates":{"lesson":"Dars yuklanmoqda...","courses":"Kurslar yuklanmoqda...","courseInfo":"Kurs ma'lumotlari yuklanmoqda...","course":"Kurs ma'lumotlari yuklanmoqda...","errorLoading":"Yuklash xatosi","processing":"Jarayonda...","update":"Yangilash"},"settings":{"accountSettings":"Hisob sozlamalari","manageProfile":"Profil va obunani boshqarish","plan":"Reja","messages":"Xabarlar","images":"Rasmlar","daysLeft":"Kunlar qoldi","subscriptionPlans":"Obuna rejalari","chooseBestPlan":"Siz uchun eng yaxshi rejani tanlang","oneMonth":"1 Oy","threeMonths":"3 Oy","sixMonths":"6 Oy","uzs":"so'm","unlimitedMessages":"Cheksiz xabarlar","unlimitedImages":"Cheksiz rasmlar","aiTutorAccess":"AI o'qituvchi kirish","aiTutorAnalytics":"AI o'qituvchi + Tahlil","unlimitedEverything":"Hammaga cheksiz kirish","prioritySupportPlan":"Ustuvor qo'llab-quvvatlash","customCourses":"Shaxsiy kurslar","bestDeal":"Eng yaxshi taklif","getPro":"Pro olish","enterPromocode":"Promokodni kiriting","applyCode":"Kodni qo'llash","applying":"Qo'llanmoqda...","invalidPromocode":"Noto'g'ri promokod","promocodeApplied":"Promokod qo'llanildi!","personalInformation":"Shaxsiy ma'lumotlar","personalInfo":"Shaxsiy ma'lumotlar","updatePersonal":"Shaxsiy ma'lumotlaringizni yangilang","notSpecified":"Ko'rsatilmagan","security":"Xavfsizlik","changePassword":"Parolni o'zgartirish","currentPassword":"Joriy parol","newPassword":"Yangi parol","confirmPassword":"Parolni tasdiqlang","confirmNewPassword":"Parolni tasdiqlang","forgotPassword":"Parolni unutdingizmi?","updating":"Yangilanmoqda...","dangerZone":"Xavfli zona","irreversibleActions":"Qaytarib bo'lmaydigan harakatlar","signOut":"Chiqish","signOutDesc":"Hisobdan chiqish","deleteAccount":"Hisobni o'chirish","deleteAccountDesc":"Hisobni butunlay o'chirish","deleteModalTitle":"Hisobni o'chirish","deleteModalText":"Hisobingizni o'chirishni xohlaysizmi? Bu amalni bekor qilib bo'lmaydi.","deleteModalWarning":"Barcha ma'lumotlaringiz, yutuqlaringiz va obunangiz butunlay o'chiriladi.","deleteConfirmTitle":"Hisobni o'chirish","deleteConfirmText":"Hisobingizni o'chirmoqchimisiz? Bu harakatni bekor qilib bo'lmaydi.","deleteWarning":"Barcha ma'lumotlaringiz, progressingiz va obunangiz butunlay o'chiriladi.","deleteForever":"Butunlay o'chirish","cancel":"Bekor qilish","save":"Saqlash","update":"Yangilash"},"analytics":{"pageTitle":"O'quv tahlili","pageSubtitle":"Yutuqlaringiz va rivojlanishingizni kuzatib boring","title":"O'qish tahlillari","downloadPdf":"PDF yuklab olish","downloadPDF":"PDF sifatida yuklab olish","configureExport":"PDF eksportini sozlash","choosePeriod":"Davrni tanlang:","lastWeek":"O'tgan hafta","twoWeeks":"2 hafta","threeWeeks":"3 hafta","oneMonth":"1 oy","threeMonths":"3 oy","oneYear":"1 yil","studyDays":"O'qish kunlari","completedSubjects":"Tugatilgan fanlar","weeklyLessons":"Haftalik darslar","monthlyLessons":"Oylik darslar","streakDays":"O'qish ketma-ketligi","activeDay":"Faol kun","mostActiveDay":"Eng faol kun","totalLessons":"Jami darslar","download":"Yuklab olish","currentPace":"Bu sizning joriy sur'atingiz","consistency":"Barqarorlik muvaffaqiyat kaliti","onARoll":"Juda yaxshi ketayapsiz","startAgain":"Qayta boshlash vaqti keldi","keepItUp":"Bu kunda davom eting","overallProgress":"Umumiy progress","loading":"Tahlillar yuklanmoqda...","error":"Ma'lumotlarni yuklashda xatolik","tryAgain":"Qayta urinib ko'ring","learningDna":"Sizning o'quv DNK","aiPersonalization":"AI-shaxsiylashtirish","learningStyle":"O'rganish uslubi","chronotype":"Xronotip","learningPath":"O'rganish yo'li","sessionLength":"Sessiya davomiyligi","cognitiveProfile":"Kognitiv profil","personalInsights":"Shaxsiy tushunchalar","gamification":"O'yinlashtirish","level":"Daraja","points":"ball","streak":"Ketma-ketlik","achievements":"Yutuqlar","recentActivity":"So'nggi faollik","emptyState":"Hozircha tahlil ma'lumotlari yo'q","startLearning":"O'qishni boshlash","exportSettings":"PDF eksport sozlamalari","period":"Davr","selectMetrics":"Metriklarni tanlang","completedLessons":"Tugatilgan darslar","completedTopics":"Tugatilgan mavzular","totalPoints":"Jami ballar","avgPointsPerDay":"O'rtacha ball/kun","daysInRow":"kun ketma-ket","recentAchievements":"So'nggi yutuqlar","untilReward":"Mukofotgacha","authRequired":"Avtorizatsiya talab qilinadi","authError":"Avtorizatsiya xatosi","notFound":"Ma'lumot topilmadi. Darslarni o'rganishni boshlang!","serverError":"Server xatosi","loadError":"Ma'lumotlarni yuklashda xatolik","visual":"Vizual","auditory":"Eshitish","kinesthetic":"Kinestetik","readingWriting":"O'qish/Yozish","balanced":"Muvozanatli","lark":"To'rg'ay","owl":"Boyqush","thirdBird":"Kabutar","variable":"O'zgaruvchan","flexible":"Moslashuvchan","storyteller":"Hikoyachi","builder":"Quruvchi","scientist":"Olim","artist":"Rassom","gamer":"O'yinchi","social":"Ijtimoiy","debater":"Bahschi","universal":"Universal","minutes":"daqiqa","processingSpeed":"Qayta ishlash tezligi","workingMemory":"Ishchi xotira","visualSpatial":"Vizual-fazoviy","verbalLinguistic":"Verbal-lingvistik","logicalMathematical":"Mantiqiy-matematik","Processing":"Qayta ishlash tezligi","Memory":"Ishchi xotira","Visual":"Vizual-fazoviy","Verbal":"Verbal-lingvistik","Logic":"Mantiqiy-matematik","lessonWithoutName":"Nomsiz dars","lesson":"Dars","today":"Bugun","yesterday":"Kecha","generated":"Yaratildi","studyAnytime":"Istalgan vaqtda o'rganing","betterAt":"{hours} da yaxshiroq","days":"kun","yearShort":"y","monthShort":"oy","dayShort":"k","passedLessons":"O'tilgan darslar","studiedSections":"O'rganilgan bo'limlar","activityPoints":"Faollik ballari","avgEarnings":"O'rtacha daromad"},"acedSection":{"exploreCourses":"Kurslarni ko'rish","startLearning":"O'qishni boshlang","today":"bugun","chooseCourse":"Kurs tanlang va o'qish sayohatingizni boshlang","lessons":"dars","start":"Boshlash","noCoursesFound":"Kurslar topilmadi","loadingContent":"Siz uchun kontent yuklanmoqda","tryAgain":"Qayta urinish","unlockCourse":"Kursni ochish","createFreeAccount":"Premium kontentga kirish uchun bepul hisob yarating","createAccount":"Bepul hisob yaratish","maybeLater":"Keyinroq","lvl":"Dar.","errorLoading":"Kurslarni yuklashda xatolik"},"homepage":{"whyChooseUs":"Nega biz","learningMadeSimple":"O'qish oddiy","learningMadeSimpleDesc":"Biz samarali, qiziqarli va ishlatish oson ta'lim platformasini yaratdik","interactiveLearning":"Interaktiv o'qish","interactiveLearningDesc":"Amaliy mashqlar tezkor qayta aloqa bilan. Zerikarli ma'ruzalar yo'q.","aiPoweredHelp":"AI yordamchi","aiPoweredHelpDesc":"Bizning AI-o'qituvchimiz tushunchalarni tushuntirish uchun 24/7 mavjud.","trackProgress":"Progressni kuzatish","trackProgressDesc":"Tahlil orqali o'sishingizni ko'ring. Nishonlar oling.","richContent":"Boy kontent","richContentDesc":"100+ kurs matematika, fan, tillar bo'yicha. Har hafta yangi kontent.","learnAnytime":"Istalgan vaqtda o'rganing","learnAnytimeDesc":"Har qanday qurilmadan kirish. Progress avtomatik sinxronlanadi.","actuallyFun":"Haqiqatan qiziqarli","actuallyFunDesc":"Charchatmaydigan o'qish. Motivatsiyani saqlang.","activeStudents":"Faol o'quvchilar","courses":"Kurslar","completionRate":"Yakunlash darajasi","aiSupport":"AI qo'llab-quvvatlash"},"tariffSection":{"pricing":"Narxlar","simplePricing":"Oddiy narxlar","noHiddenFees":"Yashirin to'lovlar yo'q. Istalgan vaqtda bekor qilish.","monthly":"Oylik","quarterly":"Chorak","biannual":"Yarim yillik","greatForTrying":"Sinab ko'rish uchun ajoyib","bestValue":"Eng yaxshi taklif","maximumSavings":"Maksimal tejash","perMonth":"/oy","forMonths":"{months} oy uchun","getStarted":"Boshlash","startLearning":"O'qishni boshlash","subscribe":"Obuna bo'lish","popular":"MASHHUR","save":"{percent}% tejash","securePayment":"Xavfsiz to'lov","cancelAnytime":"Istalgan vaqtda bekor qilish","instantAccess":"Tezkor kirish","allSubjectsIncluded":"Barcha fanlar kiritilgan","unlimitedAiHelp":"Cheksiz AI yordam","progressTracking":"Progress kuzatuvi","homeworkAssistance":"Uy vazifasi yordami","prioritySupport":"Ustuvor qo'llab-quvvatlash"}}`),Vx={en:$x,ru:Ux,uz:Fx},Bx=Object.freeze(Object.defineProperty({__proto__:null,default:Vx,en:$x,ru:Ux,uz:Fx},Symbol.toStringTag,{value:"Module"}));class $we{constructor(){this.events={},this.debugMode=!1,this.subscriptionListeners=new Set,this.errorHandlers=new Set,this.statusChangeListeners=new Set}emit(e,s){this.debugMode,this.events[e]&&this.events[e].forEach(r=>{try{r(s)}catch(n){this.handleEventError(e,n,s)}}),(e.includes("status")||e.includes("Status")||e.includes("subscription"))&&(this.notifyStatusChangeListeners(e,s),this.notifySubscriptionListeners(e,s)),(e.includes("subscription")||e.includes("promocode")||e.includes("payment"))&&this.notifySubscriptionListeners(e,s)}on(e,s){this.events[e]||(this.events[e]=[]),this.events[e].push(s)}off(e,s){this.events[e]&&(this.events[e]=this.events[e].filter(r=>r!==s))}once(e,s){const r=n=>{s(n),this.off(e,r)};this.on(e,r)}onStatusChange(e){return this.statusChangeListeners.add(e),()=>this.statusChangeListeners.delete(e)}notifyStatusChangeListeners(e,s){this.statusChangeListeners.forEach(r=>{try{r(e,s)}catch{}})}onSubscriptionChange(e){return this.subscriptionListeners.add(e),()=>this.subscriptionListeners.delete(e)}notifySubscriptionListeners(e,s){this.subscriptionListeners.forEach(r=>{try{r(e,s)}catch{}})}onError(e){return this.errorHandlers.add(e),()=>this.errorHandlers.delete(e)}handleEventError(e,s,r){this.errorHandlers.forEach(n=>{try{n(e,s,r)}catch{}})}clear(){this.events={},this.subscriptionListeners.clear(),this.errorHandlers.clear(),this.statusChangeListeners.clear()}}const Vf=new $we;window.triggerGlobalEvent=(t,e={})=>{var s;if(!(typeof window>"u"))try{const{newStatus:r,plan:n,userStatus:i,subscriptionPlan:o,oldStatus:l}=e,c=g=>g&&g!==""&&g!=="undefined"&&g!==void 0&&g!==null&&["free","start","pro","premium"].includes(g);let u=null;const d=[r,n,i,o];for(const g of d)if(c(g)){u=g;break}if(!u){const g=localStorage.getItem("userStatus");c(g)?u=g:u="free"}const f={...e,eventName:t,source:e.source||"global-trigger",timestamp:e.timestamp||Date.now(),version:"2.0",newStatus:u,plan:u,userStatus:u,subscriptionPlan:u,oldStatus:l||"free"},p=new CustomEvent(t,{detail:f,bubbles:!0,cancelable:!0});if(window.dispatchEvent(p),(s=window.eventBus)!=null&&s.emit&&window.eventBus.emit(t,f),t.includes("Status")||t.includes("Subscription"))try{const g=new CustomEvent("userSubscriptionChanged",{detail:f,bubbles:!0});window.dispatchEvent(g),localStorage.setItem("lastGlobalEvent",JSON.stringify({eventName:t,data:f,timestamp:Date.now()}))}catch{}}catch{}};function Uwe(t){setInterval(()=>{try{const e=t.getters["user/userStatus"],s=localStorage.getItem("userStatus");e&&s&&e!==s&&(localStorage.setItem("userStatus",e),window.triggerGlobalEvent("userStatusChanged",{oldStatus:s,newStatus:e,source:"periodic-sync",timestamp:Date.now()}))}catch{}},3e4)}function Fwe(){try{const t=localStorage.getItem("subscriptionData");if(t){const e=JSON.parse(t),s=new Date,r=new Date(e.expiryDate),n=s<r;if(n&&e.plan!=="free")return localStorage.setItem("userStatus",e.plan),localStorage.setItem("userPlan",e.plan),localStorage.setItem("subscriptionPlan",e.plan),localStorage.setItem("preservedStatus",e.plan),localStorage.setItem("validSubscriptionDetected","true"),localStorage.setItem("preserveStatusDuringAuth",e.plan),e.plan;n||(localStorage.removeItem("subscriptionData"),localStorage.removeItem("validSubscriptionDetected"),localStorage.removeItem("preserveStatusDuringAuth"))}return"free"}catch{return"free"}}function Vwe(){let t=!0;const e=()=>{if(t){try{const s=localStorage.getItem("subscriptionData"),r=localStorage.getItem("userStatus");if(s){const n=JSON.parse(s),i=new Date,o=new Date(n.expiryDate);i<o&&n.plan!=="free"&&r!==n.plan&&(localStorage.setItem("userStatus",n.plan),localStorage.setItem("userPlan",n.plan),localStorage.setItem("subscriptionPlan",n.plan),window.triggerGlobalEvent&&window.triggerGlobalEvent("userStatusChanged",{oldStatus:r,newStatus:n.plan,source:"auth-monitoring-restore",timestamp:Date.now()}))}}catch{}setTimeout(e,100)}};e(),setTimeout(()=>{t=!1},1e4)}async function Jv(t,e="manual"){if(!t||t==="free")return;const s=new Date,r=new Date(s.getTime()+30*24*60*60*1e3),n=Zc();let i;n&&n.plan===t&&n.expiryDate&&new Date(n.expiryDate)>s?i={...n,lastUpdated:s.toISOString(),source:e,serverConfirmed:!0}:i=zw(t,s,r,e);try{localStorage.setItem("subscriptionData",JSON.stringify(i)),localStorage.setItem("subscriptionPlan",t),localStorage.setItem("subscriptionExpiry",i.expiryDate),localStorage.setItem("subscriptionActivated",i.activatedAt),localStorage.setItem("userStatus",t),localStorage.setItem("userPlan",t),localStorage.setItem("plan",t),localStorage.setItem("subscriptionStatus","active"),localStorage.setItem("serverConfirmedSubscription","true")}catch{}return i}function zw(t,e,s,r){return{plan:t,activatedAt:e.toISOString(),expiryDate:s.toISOString(),lastUpdated:e.toISOString(),source:r,status:"active",serverConfirmed:!0,duration:30}}function Zc(){try{const t=localStorage.getItem("subscriptionData");if(t){const n=JSON.parse(t);if(n&&n.plan&&n.expiryDate)return n;localStorage.removeItem("subscriptionData")}const e=localStorage.getItem("subscriptionPlan")||localStorage.getItem("userStatus"),s=localStorage.getItem("subscriptionExpiry"),r=localStorage.getItem("subscriptionActivated");if(e&&e!=="free"&&s){const n={plan:e,expiryDate:s,activatedAt:r||new Date().toISOString(),status:"active",source:"fallback-reconstruction"};return localStorage.setItem("subscriptionData",JSON.stringify(n)),n}}catch{localStorage.removeItem("subscriptionData")}return null}function Zv(){const t=Zc();if(!t||!t.expiryDate)return!1;const e=new Date,s=new Date(t.expiryDate);return e<s}function qx(t){localStorage.setItem("userStatus","free"),localStorage.setItem("userPlan","free"),localStorage.setItem("subscriptionPlan","free"),localStorage.setItem("plan","free"),localStorage.removeItem("subscriptionData"),localStorage.removeItem("subscriptionExpiry"),localStorage.removeItem("subscriptionActivated"),localStorage.removeItem("serverConfirmedSubscription");try{yt(async()=>{const{default:e}=await Promise.resolve().then(()=>Ni);return{default:e}},void 0).then(({default:e})=>{e.commit("user/SET_USER_STATUS","free"),e.commit("user/FORCE_UPDATE")}).catch(e=>{})}catch{}window.triggerGlobalEvent("userStatusChanged",{oldStatus:t.plan,newStatus:"free",source:"subscription-expired",timestamp:Date.now()}),window.triggerGlobalEvent("subscriptionExpired",{expiredPlan:t.plan,expiryDate:t.expiryDate,timestamp:Date.now()}),window.eventBus&&window.eventBus.emit("subscriptionExpired",{plan:t.plan,message:`Your ${t.plan==="pro"?"Pro":"Start"} subscription has expired. Please update your plan to continue using premium features.`,timestamp:Date.now()})}function Bwe(){window.subscriptionCheckInterval&&clearInterval(window.subscriptionCheckInterval);const t=()=>{const e=Zc();if(!(!e||e.plan==="free"))if(!Zv())qx(e);else{const s=new Date,r=new Date(e.expiryDate),n=Math.ceil((r-s)/(1e3*60*60*24));n<=3&&n>0&&window.eventBus&&window.eventBus.emit("subscriptionExpiringSoon",{plan:e.plan,daysRemaining:n,expiryDate:e.expiryDate,message:`Your ${e.plan} subscription will expire in ${n} ${n===1?"day":"days"}`,timestamp:Date.now()})}};window.subscriptionCheckInterval=setInterval(t,60*60*1e3),document.addEventListener("visibilitychange",()=>{document.hidden||t()}),setTimeout(t,1e4)}function qwe(t,e){Bwe();const s=Zc();s&&s.plan!=="free"&&(Zv()?(localStorage.setItem("userStatus",s.plan),localStorage.setItem("userPlan",s.plan),localStorage.setItem("subscriptionPlan",s.plan)):qx(s)),window.applyPromocodeGlobally=async(r,n)=>{try{const i=me.currentUser;if(!i)throw new Error("User not authenticated");const o=i.uid,l=await i.getIdToken(),d=await(await fetch("undefined/api/payments/promo-code",{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({userId:o,promoCode:r.toUpperCase(),plan:n})})).json();if(d!=null&&d.success){const f=await Jv(n,"promocode");localStorage.setItem("userStatus",n),localStorage.setItem("userPlan",n),localStorage.setItem("subscriptionPlan",n),localStorage.setItem("plan",n),localStorage.setItem("promocodeApplied",r.toUpperCase());try{const b=localStorage.getItem("user");if(b){const k=JSON.parse(b);k.subscriptionPlan=n,k.userStatus=n,k.plan=n,k.promocodeApplied=r.toUpperCase(),k.lastStatusUpdate=new Date().toISOString(),localStorage.setItem("user",JSON.stringify(k))}}catch{}if(window.store||t){const b=window.store||t;b.commit("user/SET_USER_STATUS",n),b.commit("user/UPDATE_SUBSCRIPTION",f),b.commit("user/FORCE_UPDATE")}const p={promocode:r.toUpperCase(),oldStatus:"free",newStatus:n,plan:n,userStatus:n,subscriptionPlan:n,expiryDate:f.expiryDate,activatedAt:f.activatedAt,source:"promocode",timestamp:Date.now(),message:`Promocode applied! Plan ${n.toUpperCase()} active until ${new Date(f.expiryDate).toLocaleDateString()}`};return["userStatusChanged","userSubscriptionChanged","subscriptionUpdated","promocodeApplied","globalForceUpdate","planChanged"].forEach(b=>{try{window.triggerGlobalEvent(b,{...p,eventType:b})}catch{}}),{success:!0,message:p.message,plan:n,expiryDate:f.expiryDate,serverConfirmed:!0}}return d}catch(i){return{success:!1,error:i.message}}}}function jwe(t,e,s){const r=i=>{const{plan:o,newStatus:l,userStatus:c,subscriptionPlan:u,message:d,source:f,oldPlan:p,timestamp:g}=i.detail||{};let b=o||l||c||u;if((!b||b===""||b==="undefined")&&d&&(d.includes("START")||d.includes("start")?b="start":d.includes("PRO")||d.includes("pro")?b="pro":(d.includes("FREE")||d.includes("free"))&&(b="free")),f==="promocode"&&(!b||b==="")){const E=localStorage.getItem("userStatus"),N=localStorage.getItem("userPlan"),D=localStorage.getItem("subscriptionPlan"),U=[E,N,D];for(const C of U)if(C&&C!=="free"&&["start","pro"].includes(C)){b=C;break}}(!b||b===""||b==="undefined")&&(b="free"),["free","start","pro","premium"].includes(b)||(b="free");const k=b==="pro"?"Pro":b==="start"?"Start":"Free";document.title&&!document.title.includes("|")&&(document.title=`ACED | ${k}`),document.body.className=document.body.className.replace(/user-plan-\w+/g,""),document.body.classList.add(`user-plan-${b}`),localStorage.setItem("userStatus",b),localStorage.setItem("userPlan",b),localStorage.setItem("subscriptionPlan",b);const L=JSON.parse(localStorage.getItem("subscriptionData")||"{}");L.plan!==b&&(L.plan=b,L.status=b!=="free"?"active":"inactive",localStorage.setItem("subscriptionData",JSON.stringify(L))),localStorage.setItem("statusUpdateTime",Date.now().toString());try{if(t.getters["user/userStatus"]!==b){t.commit("user/SET_USER_STATUS",b);try{t.commit("user/setUserStatus",b)}catch{}t.state.user&&(t.state.user.userStatus=b,t.state.user.subscriptionPlan=b,t.state.user.plan=b)}}catch{}if(s!=null&&s._instance)try{s._instance.proxy.$forceUpdate()}catch{}const V={reason:"subscription-change",plan:b,newStatus:b,userStatus:b,subscriptionPlan:b,source:f||"global-change",oldPlan:p||"free",timestamp:g||Date.now(),message:d};if(["globalForceUpdate","reactivityUpdate","subscriptionUpdated","userStatusChanged","planChanged"].forEach(E=>{e.emit(E,V)}),b!=="free"&&(p==="free"||!p)){const E=f==="promocode"?"promocode":"payment";e.emit("subscriptionUpgrade",{plan:b,newStatus:b,source:f||"upgrade",message:d||`Congratulations! ${k} subscription activated via ${E}!`,timestamp:Date.now()})}};["userSubscriptionChanged","userStatusChanged","subscriptionUpdated","globalForceUpdate","reactivityUpdate"].forEach(i=>{window.addEventListener(i,r)}),window.globalEventHandlers||(window.globalEventHandlers={subscriptionHandlers:[],statusHandlers:[]}),window.globalEventHandlers.subscriptionHandlers.push(r),e.on("userStatusChanged",i=>{const{newStatus:o,plan:l,userStatus:c,subscriptionPlan:u}=i||{};let d=o||l||c||u||"free";["free","start","pro","premium"].includes(d)||(d="free");try{localStorage.setItem("userStatus",d),localStorage.setItem("userPlan",d),localStorage.setItem("subscriptionPlan",d);const f=JSON.parse(localStorage.getItem("subscriptionData")||"{}");f.plan!==d&&(f.plan=d,f.status=d!=="free"?"active":"inactive",localStorage.setItem("subscriptionData",JSON.stringify(f))),localStorage.setItem("statusUpdateTime",Date.now().toString())}catch{}try{if(t.getters["user/userStatus"]!==d){t.commit("user/SET_USER_STATUS",d);try{t.commit("user/setUserStatus",d)}catch{}}}catch{}if(s!=null&&s._instance)try{s._instance.proxy.$forceUpdate(),s._instance.proxy.$nextTick(()=>{})}catch{}}),e.on("promocodeApplied",i=>{const o=new CustomEvent("userSubscriptionChanged",{detail:{plan:i.newStatus,source:"promocode",oldPlan:i.oldStatus,promocode:i.promocode,timestamp:Date.now()}});window.dispatchEvent(o)}),e.on("paymentCompleted",i=>{const o=new CustomEvent("userSubscriptionChanged",{detail:{plan:i.plan,source:"payment",oldPlan:"free",transactionId:i.transactionId,amount:i.amount,timestamp:Date.now()}});window.dispatchEvent(o)})}let Nt,jx=!1;const Pl={initialized:!1,mounted:!1,authReady:!1,storeReady:!1};async function Hwe(){const{default:t}=await yt(async()=>{const{default:n}=await Promise.resolve().then(()=>Ni);return{default:n}},void 0),{default:e}=await yt(async()=>{const{default:n}=await Promise.resolve().then(()=>OP);return{default:n}},void 0),{createI18n:s}=await yt(async()=>{const{createI18n:n}=await Promise.resolve().then(()=>UC);return{createI18n:n}},void 0),r=(await yt(async()=>{const{default:n}=await Promise.resolve().then(()=>Bx);return{default:n}},void 0)).default;try{Nt=sc(rE);const n=s({legacy:!1,locale:localStorage.getItem("lang")||"ru",fallbackLocale:"en",messages:r,globalInjection:!0});return iv(n),Nt.config.globalProperties.$eventBus=window.eventBus,Nt.config.globalProperties.$userStore=t,Nt.config.globalProperties.$userStatus=()=>t.getters["user/userStatus"],Nt.config.globalProperties.$hasFeature=i=>t.getters["user/hasFeatureAccess"](i),Nt.config.globalProperties.$isPremiumUser=()=>t.getters["user/isPremiumUser"],Nt.config.globalProperties.$triggerGlobalEvent=window.triggerGlobalEvent,Nt.config.globalProperties.$onUserStatusChange=i=>window.eventBus.onStatusChange(i),Nt.config.globalProperties.$setLanguage=Zd,Nt.config.globalProperties.$getLanguage=jC,Nt.use(t),t.dispatch("platformMode/loadFromLocalStorage"),Nt.use(e),Nt.use(Dwe,{position:"top-center",duration:4e3,dismissible:!0}),Nt.use(n),Nt.config.errorHandler=(i,o,l)=>{var c,u,d;if((c=i.message)!=null&&c.includes("Cannot read properties of undefined (reading 'length')")){window.eventBus.emit("lengthPropertyError",{error:i.message,component:((u=o==null?void 0:o.$options)==null?void 0:u.name)||"Unknown",info:l,timestamp:Date.now()});try{t.commit("user/FORCE_UPDATE"),window.triggerGlobalEvent("globalForceUpdate",{reason:"length-error-recovery",timestamp:Date.now()})}catch{}}window.eventBus.emit("vueError",{error:i.message,component:((d=o==null?void 0:o.$options)==null?void 0:d.name)||"Unknown",info:l,timestamp:Date.now()})},Nt.mount("#app"),jx=!0,Pl.mounted=!0,jwe(t,window.eventBus,Nt),Pl.initialized=!0,Pl.authReady=!0,Pl.storeReady=!0,window.eventBus.emit("appReady",{userAuthenticated:!!t.getters["user/isAuthenticated"],userStatus:t.getters["user/userStatus"],timestamp:Date.now()}),setTimeout(()=>{const i=t.getters["user/userStatus"]||"free";window.triggerGlobalEvent("userStatusChanged",{oldStatus:null,newStatus:i,source:"app-mount-complete",timestamp:Date.now()})},200),!0}catch(n){throw window.eventBus.emit("appMountError",{error:n.message,timestamp:Date.now()}),n}}async function Gw(){const{default:t}=await yt(async()=>{const{default:n}=await Promise.resolve().then(()=>Ni);return{default:n}},void 0),{default:e}=await yt(async()=>{const{default:n}=await Promise.resolve().then(()=>OP);return{default:n}},void 0),{createI18n:s}=await yt(async()=>{const{createI18n:n}=await Promise.resolve().then(()=>UC);return{createI18n:n}},void 0),r=(await yt(async()=>{const{default:n}=await Promise.resolve().then(()=>Bx);return{default:n}},void 0)).default;try{Nt=sc(rE);const n=s({legacy:!1,locale:localStorage.getItem("lang")||"ru",fallbackLocale:"en",messages:r,globalInjection:!0});return iv(n),Nt.use(t),Nt.use(e),Nt.use(n),Nt.config.errorHandler=(i,o,l)=>{console.error("Vue Error:",i)},Nt.mount("#app"),jx=!0,Pl.mounted=!0,!0}catch(n){throw n}}function Wwe(){return Nt}let Fu=!1;const zwe=new Promise(t=>{const s=(()=>{try{const n=localStorage.getItem("subscriptionData");if(n){const i=JSON.parse(n),o=new Date,l=new Date(i.expiryDate);if(o<l&&i.plan!=="free")return localStorage.setItem("userStatus",i.plan),localStorage.setItem("userPlan",i.plan),localStorage.setItem("subscriptionPlan",i.plan),localStorage.setItem("authPreserveStatus",i.plan),i.plan}}catch{}return"free"})(),r=jc(me,async n=>{if(!Fu){Fu=!0,r();try{await Kw(),n?await Gwe(n):await Yw(),await Hwe(),localStorage.removeItem("authPreserveStatus"),setTimeout(()=>{t({authenticated:!!n,user:n,appReady:!0,preservedStatus:s,timestamp:Date.now()})},50)}catch(i){try{await Gw()}catch{}setTimeout(()=>{t({authenticated:!1,user:null,appReady:!1,error:i.message,preservedStatus:s,timestamp:Date.now()})},50)}}});setTimeout(()=>{Fu||(Fu=!0,r(),Promise.resolve().then(()=>Kw()).then(()=>Yw()).then(()=>Gw()).then(()=>{t({authenticated:!1,user:null,appReady:!0,timedOut:!0,timestamp:Date.now()})}).catch(n=>{t({authenticated:!1,user:null,appReady:!1,error:n.message,fallbackFailed:!0,timestamp:Date.now()})}))},8e3)});async function Kw(){const{default:t}=await yt(async()=>{const{default:e}=await Promise.resolve().then(()=>Ni);return{default:e}},void 0);try{if(t.getters["user/isInitialized"]){const s=localStorage.getItem("lastServerLoad"),r=Date.now()-5*60*1e3;return(!s||parseInt(s)<r)&&await t.dispatch("user/loadUserFromServer"),!0}return await t.dispatch("user/initialize"),me.currentUser&&await t.dispatch("user/loadUserFromServer"),!0}catch(e){throw e}}async function Gwe(t){var s,r;const{default:e}=await yt(async()=>{const{default:n}=await Promise.resolve().then(()=>Ni);return{default:n}},void 0);try{const n=await t.getIdToken(!0),i=t.uid;let o=null,l="free";try{const p=await fetch(`undefined/api/users/${i}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(p.ok){const g=await p.json();o=g.user||g,l=o.subscriptionPlan||o.userStatus||"free",localStorage.setItem("userStatus",l),localStorage.setItem("userPlan",l),localStorage.setItem("subscriptionPlan",l),localStorage.setItem("plan",l),localStorage.setItem("serverStatus",l),localStorage.setItem("serverStatusConfirmed","true"),localStorage.setItem("lastServerFetch",Date.now().toString());const b={uid:t.uid,email:t.email,displayName:t.displayName||o.name,photoURL:t.photoURL};e.dispatch("user/saveUser",{userData:b,token:n}).catch(k=>console.error("Background sync failed",k))}}catch{}if(!o){const f={uid:t.uid,email:t.email,displayName:t.displayName,name:t.displayName||((s=t.email)==null?void 0:s.split("@")[0])||"User",emailVerified:t.emailVerified,photoURL:t.photoURL,lastLoginAt:new Date().toISOString()};try{const p=await e.dispatch("user/saveUser",{userData:f,token:n});p&&p.success&&p.user&&(o=p.user,l=o.subscriptionPlan||o.userStatus||"free",localStorage.setItem("userStatus",l),localStorage.setItem("userPlan",l),localStorage.setItem("subscriptionPlan",l),localStorage.setItem("plan",l))}catch{}}const c={...o,firebaseId:t.uid,_id:(o==null?void 0:o._id)||t.uid,uid:t.uid,email:t.email,name:(o==null?void 0:o.name)||t.displayName||((r=t.email)==null?void 0:r.split("@")[0])||"User",subscriptionPlan:l,userStatus:l,plan:l,lastLoginAt:new Date().toISOString(),serverStatus:l,fetchedFromServer:!0,serverStatusConfirmed:!0,lastServerSync:new Date().toISOString()};e.commit("setUser",c),e.commit("setFirebaseUserId",c.firebaseId),e.commit("setToken",n),e.commit("user/SET_USER",c),e.commit("user/SET_USER_STATUS",l),e.commit("user/FORCE_UPDATE"),localStorage.setItem("user",JSON.stringify(c)),localStorage.setItem("firebaseUserId",c.firebaseId),localStorage.setItem("userId",c.firebaseId),localStorage.setItem("token",n),localStorage.setItem("userStatus",l),localStorage.setItem("userPlan",l),localStorage.setItem("subscriptionPlan",l),localStorage.setItem("plan",l),localStorage.setItem("authMode","server-authenticated"),l!=="free"&&await Jv(l,"server-auth");const u={oldStatus:"free",newStatus:l,plan:l,userStatus:l,subscriptionPlan:l,source:"server-auth-fetch",user:c,timestamp:Date.now(),serverFetched:!0,serverStatusConfirmed:!0};["userStatusChanged","userSubscriptionChanged","subscriptionUpdated","userLoggedIn","serverStatusLoaded","globalForceUpdate","authStatusSynced"].forEach(f=>{try{window.triggerGlobalEvent(f,{...u,eventType:f})}catch{}}),setTimeout(()=>{window.triggerGlobalEvent("delayedStatusSync",u)},100)}catch{await Kwe(t,null,"free")}}async function Kwe(t,e=null,s="free"){var n;const{default:r}=await yt(async()=>{const{default:i}=await Promise.resolve().then(()=>Ni);return{default:i}},void 0);try{let i=s;if(i==="free"){const c=Zc();c&&c.plan!=="free"&&Zv()&&(i=c.plan)}const o={firebaseId:t.uid,_id:t.uid,uid:t.uid,email:t.email,name:t.displayName||((n=t.email)==null?void 0:n.split("@")[0])||"User",displayName:t.displayName||"",subscriptionPlan:i,userStatus:i,plan:i,subscription:i,emailVerified:t.emailVerified,photoURL:t.photoURL,lastLoginAt:new Date().toISOString(),lastSyncTime:new Date().toISOString(),metadata:{lastSync:new Date().toISOString(),syncSource:"basic-auth-with-server",serverStatusUsed:s!=="free"}};i&&i!=="free"&&await Jv(i,"basic-auth-server"),r.commit("setUser",o),r.commit("setFirebaseUserId",o.firebaseId),e&&r.commit("setToken",e),r.commit("user/SET_USER",o),r.commit("user/SET_USER_STATUS",i);try{localStorage.setItem("user",JSON.stringify(o)),localStorage.setItem("firebaseUserId",o.firebaseId),localStorage.setItem("userId",o.firebaseId),e&&localStorage.setItem("token",e),localStorage.setItem("userStatus",i),localStorage.setItem("userPlan",i),localStorage.setItem("subscriptionPlan",i),localStorage.setItem("plan",i),localStorage.setItem("lastLoginTime",new Date().toISOString()),localStorage.setItem("authMode","basic-with-server"),localStorage.setItem("serverStatusConfirmed",s!=="free"?"true":"false")}catch{}const l={oldStatus:"free",newStatus:i,source:"basic-auth-server-sync",user:o,timestamp:Date.now(),serverStatus:s,deviceSync:!0};window.triggerGlobalEvent("userStatusChanged",l),window.triggerGlobalEvent("userSubscriptionChanged",l),window.triggerGlobalEvent("userLoggedIn",{user:o,userStatus:i,source:"basic-server",timestamp:Date.now()}),setTimeout(()=>{window.triggerGlobalEvent("deviceStatusSynced",l),window.triggerGlobalEvent("globalForceUpdate",{reason:"basic-auth-server-status",plan:i,timestamp:Date.now()})},100)}catch(i){throw i}}async function Yw(){const{default:t}=await yt(async()=>{const{default:e}=await Promise.resolve().then(()=>Ni);return{default:e}},void 0);try{const e=localStorage.getItem("validSubscriptionDetected"),s=localStorage.getItem("preserveStatusDuringAuth");e==="true"&&s&&s!=="free"?(["user","firebaseUserId","userId","token","lastLoginTime"].forEach(i=>{try{localStorage.removeItem(i)}catch{}}),t.commit("user/SET_USER_STATUS",s),localStorage.removeItem("validSubscriptionDetected"),localStorage.removeItem("preserveStatusDuringAuth")):(await t.dispatch("user/logout"),t.commit("logout"),["user","firebaseUserId","userId","token","userStatus","lastLoginTime","subscriptionDetails"].forEach(i=>{try{localStorage.removeItem(i)}catch{}}),t.commit("user/SET_USER_STATUS","free"));const r=localStorage.getItem("userStatus")||"free";setTimeout(()=>{window.triggerGlobalEvent("userStatusChanged",{oldStatus:"free",newStatus:r,source:"not-authenticated-preserved",timestamp:Date.now()})},100)}catch{try{const s=localStorage.getItem("preserveStatusDuringAuth");s&&s!=="free"?(t.commit("user/SET_USER_STATUS",s),localStorage.setItem("userStatus",s)):(t.commit("user/CLEAR_USER"),localStorage.setItem("userStatus","free"))}catch{}}}function Ywe(t,e){window.emitUserStatusChange=(s,r,n="unknown")=>{if(!["free","start","pro","premium"].includes(r))return;try{t.commit("user/SET_USER_STATUS",r)}catch{}try{localStorage.setItem("userStatus",r),localStorage.setItem("userPlan",r),localStorage.setItem("subscriptionPlan",r),localStorage.setItem("statusUpdateTime",Date.now().toString())}catch{}const o={oldStatus:s,newStatus:r,source:n,timestamp:Date.now()};window.triggerGlobalEvent("userStatusChanged",o),window.triggerGlobalEvent("userSubscriptionChanged",o),window.triggerGlobalEvent("subscriptionUpdated",o),window.triggerGlobalEvent("globalForceUpdate",{reason:"manual-status-change",plan:r,timestamp:Date.now()});const l=Wwe();if(l!=null&&l._instance)try{l._instance.proxy.$forceUpdate()}catch{}},window.emitForceUpdate=(s="manual")=>{window.triggerGlobalEvent("globalForceUpdate",{reason:s,timestamp:Date.now()});try{t.commit("user/FORCE_UPDATE")}catch{}},window.listenToUserChanges=s=>{const r=["userStatusChanged","promocodeApplied","featuresUpdated","globalForceUpdate","subscriptionUpdated","reactivityUpdate"];return r.forEach(n=>e.on(n,s)),window.addEventListener("userSubscriptionChanged",s),()=>{r.forEach(n=>e.off(n,s)),window.removeEventListener("userSubscriptionChanged",s)}},window.getCurrentUserStatus=()=>{try{const s=t.getters["user/userStatus"],r=localStorage.getItem("userStatus");return s||r||"free"}catch{return localStorage.getItem("userStatus")||"free"}},window.repairStoreStatus=()=>{const s=localStorage.getItem("userStatus")||localStorage.getItem("userPlan")||localStorage.getItem("subscriptionPlan")||"free";try{if(!t.state.user)try{t.registerModule("user",{namespaced:!0,state:{user:null,userStatus:s,subscriptionPlan:s,isAuthenticated:!1,isInitialized:!0},getters:{userStatus:i=>i.userStatus,getUser:i=>i.user,isAuthenticated:i=>!!i.user,isInitialized:i=>i.isInitialized},mutations:{SET_USER_STATUS:(i,o)=>{i.userStatus=o},SET_USER:(i,o)=>{i.user=o},CLEAR_USER:i=>{i.user=null,i.userStatus="free"}}})}catch{t.state.user={user:null,userStatus:s,subscriptionPlan:s,isAuthenticated:!1,isInitialized:!0}}["user/SET_USER_STATUS","user/setUserStatus","user/SET_STATUS","user/UPDATE_USER_STATUS","setUserStatus"].forEach(i=>{try{t.commit(i,s)}catch{}}),t.state.user&&(t.state.user.userStatus=s,t.state.user.subscriptionPlan=s,t.state.user.plan=s);const n=t.getters["user/userStatus"];return(!n||n==="undefined")&&(window.getWorkingUserStatus=()=>{var i;return((i=t.state.user)==null?void 0:i.userStatus)||localStorage.getItem("userStatus")||"free"}),n||s}catch{return s}},window.syncUserStatus=()=>{try{const s=t.getters["user/userStatus"],r=localStorage.getItem("userStatus");return s&&r&&s!==r&&(localStorage.setItem("userStatus",s),window.triggerGlobalEvent("userStatusChanged",{oldStatus:r,newStatus:s,source:"sync-helper",timestamp:Date.now()})),s||r||"free"}catch{return"free"}},window.forceUserStatusSync=()=>{try{const s=t.getters["user/userStatus"]||"free";window.triggerGlobalEvent("userStatusChanged",{oldStatus:null,newStatus:s,source:"emergency-sync",timestamp:Date.now()})}catch{}},window.updateUserSubscription=(s,r="external")=>{if(!["free","start","pro"].includes(s))return!1;const n=window.getCurrentUserStatus();return window.emitUserStatusChange(n,s,r),!0},window.applyPromocode=(s,r)=>{if(!r||!["free","start","pro"].includes(r))return!1;const n=window.getCurrentUserStatus();window.emitUserStatusChange(n,r,"promocode");const i={promocode:s,oldStatus:n,newStatus:r,plan:r,userStatus:r,subscriptionPlan:r,source:"promocode",timestamp:Date.now()};return e.emit("promocodeApplied",i),window.triggerGlobalEvent("userSubscriptionChanged",i),window.triggerGlobalEvent("subscriptionUpdated",i),!0},window.paymentCompleted=(s,r,n)=>{if(!["start","pro"].includes(r))return!1;const i=window.getCurrentUserStatus();return window.emitUserStatusChange(i,r,"payment"),e.emit("paymentCompleted",{transactionId:s,plan:r,amount:n,oldStatus:i,newStatus:r,timestamp:Date.now()}),!0},window.smartPromocodeDetection=()=>{const r=(()=>{const n=["userStatus","userPlan","subscriptionPlan"];for(const i of n){const o=localStorage.getItem(i);if(o&&["start","pro"].includes(o))return o}return null})();if(r&&r!=="free"){const n=t.getters["user/userStatus"];(!n||n==="undefined"||n!==r)&&window.repairStoreStatus()}return null},setInterval(()=>{window.smartPromocodeDetection()},5e3)}function Qwe(t){t.subscribe((e,s)=>{var n,i,o;if(["user/SET_USER_STATUS","user/setUserStatus","user/UPDATE_SUBSCRIPTION","user/ADD_PROMOCODE","user/FORCE_UPDATE","user/SET_USER"].includes(e.type)){const l=((n=s.user)==null?void 0:n.userStatus)||"free";let c="free";e.type==="user/SET_USER_STATUS"&&e.payload&&(c=l);const u={oldStatus:c,newStatus:l,source:"store-mutation",mutation:{type:e.type,payload:e.payload},timestamp:Date.now(),forceCounter:((o=(i=s.user)==null?void 0:i.system)==null?void 0:o.forceUpdateCounter)||0};["userStatusChanged","subscriptionUpdated","userSubscriptionChanged","globalForceUpdate","reactivityUpdate","storeChanged"].forEach(f=>{window.triggerGlobalEvent(f,{...u,eventType:f})}),setTimeout(()=>{window.triggerGlobalEvent("delayedStatusUpdate",u)},100)}})}function Xwe(t){console.log(" Setting up global error handling"),window.addEventListener("error",e=>{var s,r,n;if(console.error(" Global error:",e.error),(r=(s=e.error)==null?void 0:s.message)!=null&&r.includes("Cannot read properties of undefined (reading 'length')")){console.warn(" Length property error detected, attempting recovery...");try{yt(async()=>{const{default:i}=await Promise.resolve().then(()=>Ni);return{default:i}},void 0).then(({default:i})=>{var o;i.commit("user/FORCE_UPDATE"),window.triggerGlobalEvent("globalForceUpdate",{reason:"global-error-recovery",originalError:(o=e.error)==null?void 0:o.message,timestamp:Date.now()}),console.log(" Recovery attempt completed")}).catch(i=>{console.error(" Store import failed:",i)})}catch(i){console.error(" Recovery failed:",i)}}t.emit("globalJavaScriptError",{error:((n=e.error)==null?void 0:n.message)||"Unknown error",filename:e.filename,lineno:e.lineno,colno:e.colno,timestamp:Date.now()})}),window.addEventListener("unhandledrejection",e=>{var s,r,n,i,o,l;if(console.error(" Unhandled promise rejection:",e.reason),(r=(s=e.reason)==null?void 0:s.message)!=null&&r.includes("userStatus")||(i=(n=e.reason)==null?void 0:n.message)!=null&&i.includes("subscription")){console.warn(" Status-related promise rejection, attempting recovery...");try{window.triggerGlobalEvent("globalForceUpdate",{reason:"promise-rejection-recovery",originalError:(o=e.reason)==null?void 0:o.message,timestamp:Date.now()}),console.log(" Recovery event triggered")}catch(c){console.error(" Recovery failed:",c)}}t.emit("unhandledPromiseRejection",{reason:((l=e.reason)==null?void 0:l.message)||e.reason,timestamp:Date.now()})}),window.addEventListener("storage",e=>{if(e.key==="userStatus"&&e.newValue!==e.oldValue){console.log(" Cross-tab status change detected");const s=e.newValue||"free",r=e.oldValue||"free";window.triggerGlobalEvent("userStatusChanged",{oldStatus:r,newStatus:s,source:"cross-tab-sync",timestamp:Date.now()})}if(e.key==="subscriptionData"&&e.newValue!==e.oldValue){console.log(" Cross-tab subscription change detected");try{const s=e.newValue?JSON.parse(e.newValue):null,r=e.oldValue?JSON.parse(e.oldValue):null;s&&s.plan&&window.triggerGlobalEvent("userSubscriptionChanged",{oldStatus:(r==null?void 0:r.plan)||"free",newStatus:s.plan,source:"cross-tab-subscription-sync",timestamp:Date.now()})}catch(s){console.error(" Failed to parse subscription data:",s)}}}),console.log(" Global error handling configured")}Fwe();Vwe();const Jwe=$C({legacy:!1,locale:localStorage.getItem("lang")||"ru",fallbackLocale:"en",messages:Vx,globalInjection:!0});iv(Jwe);rF(me,Gk).then(()=>{console.log(" Firebase auth persistence set to LOCAL")}).catch(t=>{console.error(" Firebase persistence setup failed:",t)});const Hx={initialized:!1,mounted:!1,authReady:!1,storeReady:!1};window.eventBus=Vf;window.appLifecycle=Hx;Uwe(Jr);Xwe(Vf);qwe(Jr);Qwe(Jr);Ywe(Jr,Vf);const Zwe=Object.freeze(Object.defineProperty({__proto__:null,appLifecycle:Hx,authInitPromise:zwe,eventBus:Vf},Symbol.toStringTag,{value:"Module"}));export{KK as $,Se as A,me as B,WK as C,_2e as D,b2e as E,he as F,LP as G,T2e as H,S2e as I,w2e as J,E2e as K,RM as L,Mc as M,br as N,Li as O,NP as P,jK as Q,Iq as R,pP as S,ma as T,HK as U,kn as V,at as W,xi as X,Ua as Y,Eh as Z,Je as _,a,ya as a0,ZN as a1,Qt as a2,fR as a3,Jp as a4,Js as a5,$a as a6,yt as a7,Sv as a8,k2e as a9,O_e as aa,xe as b,S as c,Yt as d,G as e,se as f,Pe as g,be as h,vt as i,rt as j,GK as k,hP as l,tn as m,ge as n,fP as o,yv as p,gv as q,Ht as r,v as s,m as t,wf as u,Ke as v,Jt as w,Co as x,oe as y,fr as z};
