import{_ as pe,c as n,s as t,a as e,e as L,j as ue,t as r,n as z,i as Se,F as J,h as K,f as ge,x as u,y as Pt,z as B,A as ne,B as xe,C as Ne,D as at,E as We,d as de,b as me,w as ye,T as $e,G as hs,H as ve,I as bs,J as xs,g as Ee,v as Re,K as zt,L as ys,M as ks,N as ws,O as _s,Q as tt,R as $s,S as Cs,U as Ss}from"./index-BNq51eEb.js";const Ts={name:"VocabularyModal",props:{vocabularyData:{type:Object,required:!0,default:()=>({isVisible:!1,currentIndex:0,words:[],isCompleted:!1,showingList:!1})},cardAnimation:{type:Object,default:()=>({isFlipping:!1,showDefinition:!1})},currentWord:{type:Object,default:null},progress:{type:Number,default:0},isLastWord:{type:Boolean,default:!1}},emits:["show-definition","hide-definition","mark-learned","next-word","previous-word","skip","restart","close","pronounce","jump-to-word"],computed:{isDevelopment(){return!1},hasValidWords(){const i=this.getValidWords().length>0;return this.isDevelopment,i},currentDisplayWord(){var h;const s=this.getValidWords(),i=((h=this.vocabularyData)==null?void 0:h.currentIndex)||0,a=s[i]||this.currentWord||null;return this.isDevelopment,a},debugInfo(){var s,i,a,h,c,l,d,v,m;return this.isDevelopment?{vocabularyData:{isVisible:(s=this.vocabularyData)==null?void 0:s.isVisible,currentIndex:(i=this.vocabularyData)==null?void 0:i.currentIndex,wordsLength:(h=(a=this.vocabularyData)==null?void 0:a.words)==null?void 0:h.length,isCompleted:(c=this.vocabularyData)==null?void 0:c.isCompleted,showingList:(l=this.vocabularyData)==null?void 0:l.showingList,wordsStructure:(m=(v=(d=this.vocabularyData)==null?void 0:d.words)==null?void 0:v.slice(0,2))==null?void 0:m.map(k=>({keys:Object.keys(k||{}),hasTerms:!!(k!=null&&k.term||k!=null&&k.word),hasDefinition:!!(k!=null&&k.definition||k!=null&&k.translation)}))},currentWord:this.currentWord?{keys:Object.keys(this.currentWord),term:this.getWordTerm(this.currentWord),definition:this.getWordDefinition(this.currentWord)}:null,validWordsCount:this.getValidWordsCount(),hasValidWords:this.hasValidWords}:null}},methods:{getValidWords(){var i;return(((i=this.vocabularyData)==null?void 0:i.words)||[]).filter(a=>{if(!a||typeof a!="object")return!1;const h=this.getWordTerm(a),c=this.getWordDefinition(a);return!!(h&&c)})},getValidWordsCount(){return this.getValidWords().length},getLearnedWordsCount(){return this.getValidWords().filter(s=>s==null?void 0:s.learned).length},getCompletionPercentage(){const s=this.getValidWordsCount(),i=this.getLearnedWordsCount();return s>0?Math.round(i/s*100):0},getWordTerm(s){if(!s)return"";const i=s.term||s.word||s.title||s.name||"";return String(i).trim()},getWordDefinition(s){if(!s)return"Definition not found";const i=s.definition||s.translation||s.meaning||s.desc||s.description||"";return String(i).trim()||"Definition not found"},getWordExample(s){if(!s)return"";const i=s.example||s.examples||s.usage||"";return String(i).trim()},getWordPronunciation(s){if(!s)return"";const i=s.pronunciation||s.phonetic||"";return String(i).trim()},getWordPartOfSpeech(s){if(!s)return"";const i=s.partOfSpeech||s.pos||s.type||"";return String(i).trim()},getWordId(s,i){var a;return s?s.id||s._id||`vocab-${i}-${((a=this.getWordTerm(s))==null?void 0:a.substring(0,10))||"word"}`:`vocab-${i}`},jumpToWord(s){this.$emit("jump-to-word",s)}},mounted(){this.isDevelopment},watch:{vocabularyData:{handler(s){this.isDevelopment},deep:!0,immediate:!0}}},Ms={class:"vocabulary-modal-container"},As={class:"vocabulary-modal-header"},Is={class:"vocab-progress-section"},Ds={class:"vocab-progress-bar"},js={class:"vocab-progress-text"},Ls={class:"vocab-header-actions"},qs={key:0,class:"debug-info"},Es={key:1,class:"vocabulary-card-container"},Ws={class:"card-content"},Bs={class:"vocab-term-section"},Ps={class:"vocab-term"},zs={key:0,class:"vocab-pronunciation"},Rs={key:1,class:"vocab-part-of-speech"},Ns={class:"card-content"},Fs={class:"vocab-definition-section"},Vs={class:"vocab-term-small"},Os={class:"vocab-definition"},Gs={key:0,class:"vocab-example"},Hs={class:"vocab-card-actions"},Qs=["disabled"],Us={class:"vocab-main-actions"},Ys={class:"btn-icon"},Xs={class:"btn-text"},Zs={class:"btn-icon"},Js={class:"btn-text"},Ks={class:"vocab-dots-navigation"},ea=["onClick","title"],ta={key:2,class:"no-vocabulary-content"},sa={class:"no-vocab-subtitle"},aa={key:0,class:"debug-words"},na={key:3,class:"vocabulary-completion"},la={class:"completion-animation"},oa={class:"completion-subtitle"},ra={class:"completion-stats"},ia={class:"completion-stat"},ca={class:"stat-number"},ua={class:"completion-stat"},da={class:"stat-number"},va={key:4,class:"vocabulary-list-transition"};function ma(s,i,a,h,c,l){var d,v,m,k,q,T,_,b,y,f,p,w,$,C,D,S,W,F,se;return t(),n("div",{class:"vocabulary-modal-overlay",onClick:i[12]||(i[12]=Se(V=>s.$emit("close"),["self"]))},[e("div",Ms,[e("div",As,[e("div",Is,[e("div",Ds,[e("div",{class:"vocab-progress-fill",style:ue({width:a.progress+"%"})},null,4)]),e("div",js,r((((d=a.vocabularyData)==null?void 0:d.currentIndex)||0)+1)+" / "+r(l.getValidWordsCount()),1)]),e("div",Ls,[e("button",{onClick:i[0]||(i[0]=V=>s.$emit("skip")),class:"vocab-skip-btn",title:"Skip and go to list"},i[13]||(i[13]=[e("span",{class:"btn-icon"},"‚è≠Ô∏è",-1),e("span",{class:"btn-text"},"Skip",-1)])),e("button",{onClick:i[1]||(i[1]=V=>s.$emit("close")),class:"vocab-close-btn",title:"Close vocabulary"}," ‚úï ")])]),l.isDevelopment?(t(),n("div",qs,[e("details",null,[i[14]||(i[14]=e("summary",null,"üîç Debug Info",-1)),e("pre",null,r(l.debugInfo),1)])])):L("",!0),!((v=a.vocabularyData)!=null&&v.isCompleted)&&!((m=a.vocabularyData)!=null&&m.showingList)&&l.hasValidWords?(t(),n("div",Es,[e("div",{class:z(["vocabulary-card",{flipped:(k=a.cardAnimation)==null?void 0:k.showDefinition,flipping:(q=a.cardAnimation)==null?void 0:q.isFlipping,learned:(T=l.currentDisplayWord)==null?void 0:T.learned}])},[e("div",{class:"card-front",onClick:i[3]||(i[3]=V=>s.$emit("show-definition"))},[e("div",Ws,[e("div",Bs,[e("h2",Ps,r(l.getWordTerm(l.currentDisplayWord)),1),l.getWordPronunciation(l.currentDisplayWord)?(t(),n("div",zs," /"+r(l.getWordPronunciation(l.currentDisplayWord))+"/ ",1)):L("",!0),l.getWordPartOfSpeech(l.currentDisplayWord)?(t(),n("div",Rs,r(l.getWordPartOfSpeech(l.currentDisplayWord)),1)):L("",!0)]),i[15]||(i[15]=e("div",{class:"card-instruction"},[e("div",{class:"instruction-icon"},"üí´"),e("p",null,"Click to see definition")],-1))]),l.getWordTerm(l.currentDisplayWord)?(t(),n("button",{key:0,onClick:i[2]||(i[2]=Se(V=>s.$emit("pronounce",l.getWordTerm(l.currentDisplayWord)),["stop"])),class:"voice-btn",title:"Pronunciation"},i[16]||(i[16]=[e("span",{class:"voice-icon"},"üîä",-1)]))):L("",!0)]),e("div",{class:"card-back",onClick:i[5]||(i[5]=V=>s.$emit("hide-definition"))},[e("div",Ns,[e("div",Fs,[e("h3",Vs,r(l.getWordTerm(l.currentDisplayWord)),1),e("div",Os,r(l.getWordDefinition(l.currentDisplayWord)),1),l.getWordExample(l.currentDisplayWord)?(t(),n("div",Gs,[i[17]||(i[17]=e("strong",null,"Example:",-1)),i[18]||(i[18]=e("br",null,null,-1)),e("em",null,r(l.getWordExample(l.currentDisplayWord)),1)])):L("",!0)]),i[19]||(i[19]=e("div",{class:"card-instruction"},[e("div",{class:"instruction-icon"},"‚Ü©Ô∏è"),e("p",null,"–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–µ—Ämin—É")],-1))]),l.getWordTerm(l.currentDisplayWord)?(t(),n("button",{key:0,onClick:i[4]||(i[4]=Se(V=>s.$emit("pronounce",l.getWordTerm(l.currentDisplayWord)),["stop"])),class:"voice-btn",title:"Pronunciation"},i[20]||(i[20]=[e("span",{class:"voice-icon"},"üîä",-1)]))):L("",!0)])],2),e("div",Hs,[e("button",{onClick:i[6]||(i[6]=V=>s.$emit("previous-word")),disabled:(((_=a.vocabularyData)==null?void 0:_.currentIndex)||0)===0,class:"vocab-nav-btn vocab-prev-btn",title:"Previous word"},i[21]||(i[21]=[e("span",{class:"btn-icon"},"‚¨ÖÔ∏è",-1),e("span",{class:"btn-text"},"Back",-1)]),8,Qs),e("div",Us,[e("button",{onClick:i[7]||(i[7]=V=>s.$emit("mark-learned")),class:z(["vocab-learned-btn",{active:(b=l.currentDisplayWord)==null?void 0:b.learned}]),title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ learned"},[e("span",Ys,r((y=l.currentDisplayWord)!=null&&y.learned?"‚úÖ":"üìö"),1),e("span",Xs,r((f=l.currentDisplayWord)!=null&&f.learned?"Learned":"Learn"),1)],2),e("button",{onClick:i[8]||(i[8]=V=>s.$emit("next-word")),class:"vocab-next-btn",title:"Next word"},[e("span",Zs,r(a.isLastWord?"üèÅ":"‚û°Ô∏è"),1),e("span",Js,r(a.isLastWord?"Finish":"Next"),1)])]),e("button",{onClick:i[9]||(i[9]=V=>s.$emit("restart")),class:"vocab-restart-btn",title:"Start over"},i[22]||(i[22]=[e("span",{class:"btn-icon"},"üîÑ",-1),e("span",{class:"btn-text"},"Start over",-1)]))]),e("div",Ks,[(t(!0),n(J,null,K(l.getValidWords(),(V,Y)=>{var ee;return t(),n("button",{key:l.getWordId(V,Y),onClick:ae=>l.jumpToWord(Y),class:z(["vocab-dot",{active:Y===(((ee=a.vocabularyData)==null?void 0:ee.currentIndex)||0),learned:V==null?void 0:V.learned}]),title:l.getWordTerm(V)},null,10,ea)}),128))])])):!l.hasValidWords&&!((p=a.vocabularyData)!=null&&p.isCompleted)&&!((w=a.vocabularyData)!=null&&w.showingList)?(t(),n("div",ta,[i[25]||(i[25]=e("div",{class:"no-vocab-icon"},"üìö",-1)),i[26]||(i[26]=e("h3",{class:"no-vocab-title"},"Vocabulary is empty",-1)),e("p",sa,r(((C=($=a.vocabularyData)==null?void 0:$.words)==null?void 0:C.length)>0?"–í —ç—Ç–æ–º lesson–µ –Ω–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö words –¥–ª—è learning":"–í —ç—Ç–æ–º lesson–µ –Ω–µ—Ç words –¥–ª—è learning"),1),l.isDevelopment&&((S=(D=a.vocabularyData)==null?void 0:D.words)==null?void 0:S.length)>0?(t(),n("div",aa,[e("details",null,[i[23]||(i[23]=e("summary",null,"üîß Word debug information",-1)),e("pre",null,r(JSON.stringify(a.vocabularyData.words,null,2)),1)])])):L("",!0),e("button",{onClick:i[10]||(i[10]=V=>s.$emit("skip")),class:"continue-btn"},i[24]||(i[24]=[e("span",{class:"btn-icon"},"üìã",-1),e("span",{class:"btn-text"},"Continue lesson",-1)]))])):(W=a.vocabularyData)!=null&&W.isCompleted&&!((F=a.vocabularyData)!=null&&F.showingList)?(t(),n("div",na,[e("div",la,[i[30]||(i[30]=e("div",{class:"completion-icon"},"üéâ",-1)),i[31]||(i[31]=e("h3",{class:"completion-title"},"Excellent!",-1)),e("p",oa," You learned "+r(l.getLearnedWordsCount())+" of "+r(l.getValidWordsCount())+" words ",1),e("div",ra,[e("div",ia,[e("div",ca,r(l.getLearnedWordsCount()),1),i[27]||(i[27]=e("div",{class:"stat-label"},"Learned",-1))]),e("div",ua,[e("div",da,r(l.getCompletionPercentage())+"%",1),i[28]||(i[28]=e("div",{class:"stat-label"},"Progress",-1))])]),e("button",{onClick:i[11]||(i[11]=V=>s.$emit("skip")),class:"continue-btn"},i[29]||(i[29]=[e("span",{class:"btn-icon"},"üìã",-1),e("span",{class:"btn-text"},"Go to word list",-1)]))])])):(se=a.vocabularyData)!=null&&se.showingList?(t(),n("div",va,i[32]||(i[32]=[e("div",{class:"transition-animation"},[e("div",{class:"transition-icon"},"üìö"),e("h3",null,"Going to word list..."),e("div",{class:"loading-dots"},[e("span"),e("span"),e("span")])],-1)]))):L("",!0)])])}const ga=pe(Ts,[["render",ma],["__scopeId","data-v-8675311f"]]),pa={name:"LessonIntro",props:{lesson:{type:Object,required:!0},estimatedTime:{type:Number,default:10},steps:{type:Array,default:()=>[]},previousProgress:{type:Object,default:null}},emits:["start","continue","exit","report-problem"],methods:{getLocalized(s){return typeof s=="string"?s:((s==null?void 0:s.en)||(s==null?void 0:s.ru)||(s==null?void 0:s.uz)||"").replace(/^(en|ru|uz):/i,"").trim()}}},fa={class:"fixed inset-0 z-50 bg-white flex flex-col"},ha={class:"flex items-center justify-between px-4 py-4 border-b border-slate-100"},ba={class:"text-xs font-medium text-slate-400 uppercase tracking-wider"},xa={class:"flex-1 flex flex-col items-center justify-center px-6 py-12 overflow-y-auto"},ya={class:"w-full max-w-md text-center flex flex-col gap-10"},ka={class:"flex flex-col gap-5"},wa={class:"text-2xl sm:text-3xl font-bold text-slate-900"},_a={class:"text-slate-500 text-base sm:text-lg leading-relaxed"},$a={class:"flex justify-center gap-12 py-2"},Ca={class:"text-center"},Sa={class:"text-3xl font-bold text-slate-900"},Ta={class:"text-center"},Ma={class:"text-3xl font-bold text-slate-900"},Aa={key:0,class:"bg-slate-50 rounded-2xl p-5 text-left"},Ia={class:"flex items-center justify-between mb-4"},Da={class:"text-sm font-bold text-slate-900"},ja={class:"h-2 bg-slate-200 rounded-full overflow-hidden mb-5"},La={class:"px-6 pb-8 pt-4 border-t border-slate-100 bg-white"},qa={class:"max-w-md mx-auto space-y-4"};function Ea(s,i,a,h,c,l){var d,v,m,k,q,T;return t(),n("div",fa,[e("div",ha,[e("button",{onClick:i[0]||(i[0]=_=>s.$emit("exit")),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors"},i[4]||(i[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("span",ba,r(((d=a.lesson)==null?void 0:d.type)==="premium"?"Premium":"Free"),1),i[5]||(i[5]=e("div",{class:"w-10"},null,-1))]),e("div",xa,[e("div",ya,[e("div",ka,[i[6]||(i[6]=e("div",{class:"w-20 h-20 mx-auto rounded-2xl bg-slate-100 flex items-center justify-center"},[e("svg",{class:"w-12 h-12 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),e("h1",wa,r(l.getLocalized((v=a.lesson)==null?void 0:v.lessonName)||"Lesson"),1),e("p",_a,r(l.getLocalized((m=a.lesson)==null?void 0:m.description)||"Start learning now"),1)]),e("div",$a,[e("div",Ca,[e("div",Sa,"~"+r(a.estimatedTime),1),i[7]||(i[7]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"min",-1))]),i[9]||(i[9]=e("div",{class:"w-px bg-slate-200"},null,-1)),e("div",Ta,[e("div",Ma,r((a.steps||[]).length),1),i[8]||(i[8]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"steps",-1))])]),a.previousProgress&&(((k=a.previousProgress)==null?void 0:k.completedSteps)||[]).length>0?(t(),n("div",Aa,[e("div",Ia,[i[10]||(i[10]=e("span",{class:"text-sm font-medium text-slate-600"},"Previous Progress",-1)),e("span",Da,r((((q=a.previousProgress)==null?void 0:q.completedSteps)||[]).length)+"/"+r((a.steps||[]).length),1)]),e("div",ja,[e("div",{class:"h-full bg-slate-900 rounded-full transition-all",style:ue({width:(((T=a.previousProgress)==null?void 0:T.completedSteps)||[]).length/Math.max((a.steps||[]).length,1)*100+"%"})},null,4)]),e("button",{onClick:i[1]||(i[1]=_=>s.$emit("continue")),class:"w-full py-3.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors"}," Continue ")])):L("",!0)])]),e("div",La,[e("div",qa,[e("button",{onClick:i[2]||(i[2]=_=>s.$emit("start")),class:"w-full py-4 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors text-lg"},r(a.previousProgress?"Start Over":"Start Lesson"),1),e("button",{onClick:i[3]||(i[3]=_=>s.$emit("report-problem")),class:"w-full py-3 text-slate-400 hover:text-slate-600 text-sm transition-colors"}," Report an issue ")])])])}const Wa=pe(pa,[["render",Ea],["__scopeId","data-v-bc04639d"]]),Ba={name:"ContentPanel",props:{currentStep:Object,currentIndex:Number,isInteractiveStep:Boolean,isGameStep:Boolean,showExplanationAlways:Boolean,totalExercises:Number,exerciseIndex:Number,isLastStep:Boolean},emits:["init-vocabulary","pronounce","next","previous"],computed:{isExerciseStep(){var s,i,a;return(((s=this.currentStep)==null?void 0:s.type)==="exercise"||((i=this.currentStep)==null?void 0:i.type)==="practice")&&!((a=this.currentStep)!=null&&a.gameType)},hasEmptyContent(){const s=this.getStepContent(this.currentStep);if(!s||typeof s!="string")return!0;const i=s.trim();return!i||i.includes("is not available")||i.includes("not found")||i.length<3},specialInteractiveTypes(){return["histogram","map","block-coding","data_analysis","fraction_visual","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","geometry","selection_game","language_tone_transformer","language_idiom_bridge","language_word_constellation","language_rhythm_match","language_false_friends"]},isSpecialInteractive(){var s;return this.specialInteractiveTypes.includes((s=this.currentStep)==null?void 0:s.type)},totalExercisesInStep(){var s;return this.currentStep?Array.isArray(this.currentStep.data)?this.currentStep.data.length:(s=this.currentStep.data)!=null&&s.exercises?this.currentStep.data.exercises.length:this.currentStep.exercises?this.currentStep.exercises.length:1:0}},methods:{getStepIcon(s){return{explanation:"üìö",example:"üí°",reading:"üìñ",exercise:"‚úèÔ∏è",practice:"üß™",quiz:"üß©",vocabulary:"üìù",video:"üé¨",audio:"üéµ",game:"üéÆ"}[s]||"üìÑ"},getStepTypeText(s){return{explanation:"Explanation",example:"Example",reading:"Reading",exercise:"Exercise",practice:"Practice",quiz:"Quiz",vocabulary:"Vocabulary",video:"Video",audio:"Audio",game:"Game"}[s]||"Content"},getStepContent(s){var a,h,c,l;if(!s)return"Step not found";if(s.gameType)return s.instructions||s.description||"Complete the game to proceed";let i=null;return(a=s.data)!=null&&a.content?i=s.data.content:(h=s.data)!=null&&h.text?i=s.data.text:(c=s.content)!=null&&c.text?i=s.content.text:(l=s.content)!=null&&l.content?i=s.content.content:typeof s.content=="string"?i=s.content:typeof s.data=="string"?i=s.data:s.description?i=s.description:s.text&&(i=s.text),i||`Content for "${s.type}" step is not available`},formatContent(s){if(!s)return"";let i=String(s);return i=i.replace(/\[card title="(.*?)"\]([\s\S]*?)\[\/card\]/g,(a,h,c)=>`<div class="content-card"><h3 class="card-heading">${h}</h3><div class="card-content">${c}</div></div>`),i=i.replace(/\[card\]([\s\S]*?)\[\/card\]/g,(a,h)=>`<div class="content-card">${h}</div>`),i=i.replace(/^## (.*$)/gim,'<h2 class="content-h2">$1</h2>').replace(/^### (.*$)/gim,'<h3 class="content-h3">$1</h3>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>"),`<p>${i}</p>`}}},Pa={class:"content-step-header"},za={class:"header-title"},Ra={class:"step-number"},Na={class:"step-icon"},Fa={class:"step-text"},Va={key:0,class:"exercise-counter"},Oa={class:"content-step-container"},Ga={class:"content-padding"},Ha={key:0},Qa={key:0,class:"empty-content-card"},Ua=["innerHTML"],Ya={key:1,class:"interactive-instruction-card"},Xa={key:2,class:"game-context-view"},Za={class:"game-intro-card"},Ja={class:"intro-header"},Ka={key:3,class:"interactive-instruction-card"},en={key:4,class:"interactive-instruction-card"},tn={class:"instruction-icon"},sn={class:"instruction-heading"},an={key:5,class:"vocabulary-content"},nn={key:0,class:"vocabulary-trigger"},ln={class:"trigger-subheading"},on={key:1,class:"vocabulary-list-view"},rn={class:"vocabulary-header"},cn={class:"vocabulary-list"},un={class:"vocab-item-header"},dn={class:"vocab-term"},vn=["onClick"],mn={key:0,class:"learned-badge"},gn={class:"vocab-definition"},pn={key:0,class:"vocab-example"},fn={key:6,class:"media-placeholder"},hn={class:"media-icon"},bn={class:"media-title"},xn={class:"media-description"},yn=["innerHTML"],kn={class:"content-navigation"};function wn(s,i,a,h,c,l){var d,v,m,k,q,T,_,b,y,f,p,w,$,C,D,S,W;return t(),n("div",{class:z(["content-panel",{"game-mode":a.isGameStep}])},[e("header",Pa,[e("h3",za,[e("span",Ra,r(a.currentIndex+1),1),e("span",Na,r(l.getStepIcon((d=a.currentStep)==null?void 0:d.type)),1),e("span",Fa,r(l.getStepTypeText((v=a.currentStep)==null?void 0:v.type)),1),a.isInteractiveStep&&!a.isGameStep?(t(),n("span",Va," ("+r(a.exerciseIndex+1)+"/"+r(a.totalExercises||1)+") ",1)):L("",!0)])]),e("div",Oa,[e("div",Ga,[["explanation","example","reading"].includes((m=a.currentStep)==null?void 0:m.type)?(t(),n("div",Ha,[l.hasEmptyContent?(t(),n("div",Qa,i[4]||(i[4]=[e("div",{class:"empty-icon"},"üì≠",-1),e("h3",{class:"empty-heading"},"Content Not Available",-1),e("p",{class:"empty-text"},"This step doesn't have content yet. Click Next to continue with the lesson.",-1)]))):(t(),n("div",{key:1,class:"content-text",innerHTML:l.formatContent(l.getStepContent(a.currentStep))},null,8,Ua))])):l.isExerciseStep?(t(),n("div",Ya,i[5]||(i[5]=[e("div",{class:"instruction-icon"},"‚úèÔ∏è",-1),e("h3",{class:"instruction-heading"},"Complete the exercise on the right",-1),e("p",{class:"instruction-text"}," Use the interactive panel to answer the question and continue with the lesson. ",-1)]))):a.isGameStep?(t(),n("div",Xa,[e("div",Za,[e("div",Ja,[i[6]||(i[6]=e("span",{class:"game-icon"},"üéÆ",-1)),e("h3",null,"Game Time: "+r(a.currentStep.title||"Interactive Challenge"),1)]),i[7]||(i[7]=e("div",{class:"game-instructions-box"},[e("h4",null,"How to Play:"),e("ul",{class:"instruction-list"},[e("li",null,"Follow the instructions in the game panel"),e("li",null,"Complete all objectives to proceed"),e("li",null,"Have fun learning!")])],-1))])])):l.isSpecialInteractive?(t(),n("div",Ka,i[8]||(i[8]=[e("div",{class:"instruction-icon"},"üéÆ",-1),e("h3",{class:"instruction-heading"},"Interactive Exercise",-1),e("p",{class:"instruction-text"},"Complete the interactive exercise on the right to continue.",-1)]))):a.isInteractiveStep&&!l.isExerciseStep&&!a.isGameStep?(t(),n("div",en,[e("div",tn,r(((k=a.currentStep)==null?void 0:k.type)==="practice"?"üß™":"üß©"),1),e("h3",sn,"Complete the "+r(l.getStepTypeText((q=a.currentStep)==null?void 0:q.type).toLowerCase())+" on the right",1),i[9]||(i[9]=e("p",{class:"instruction-text"},"Use the interactive panel to complete this activity.",-1))])):((T=a.currentStep)==null?void 0:T.type)==="vocabulary"?(t(),n("div",an,[(b=(_=a.currentStep)==null?void 0:_.data)!=null&&b.modalCompleted?(t(),n("div",on,[e("div",rn,[i[12]||(i[12]=e("h3",null,"üìñ Learned Words",-1)),e("button",{onClick:i[1]||(i[1]=F=>s.$emit("init-vocabulary")),class:"review-button"}," üîÑ Review ")]),e("div",cn,[(t(!0),n(J,null,K(((p=(f=a.currentStep)==null?void 0:f.data)==null?void 0:p.allWords)||((w=a.currentStep)==null?void 0:w.data)||[],(F,se)=>(t(),n("div",{key:(F==null?void 0:F.id)||`vocab-list-${se}`,class:z(["vocabulary-item",{"is-learned":F==null?void 0:F.learned}])},[e("div",un,[e("div",dn,[ge(r((F==null?void 0:F.term)||"Term")+" ",1),F!=null&&F.term?(t(),n("button",{key:0,onClick:V=>s.$emit("pronounce",F.term),class:"pronunciation-button",title:"Pronunciation"}," üîä ",8,vn)):L("",!0)]),F!=null&&F.learned?(t(),n("div",mn,"‚úÖ")):L("",!0)]),e("div",gn,r((F==null?void 0:F.definition)||"Definition"),1),F!=null&&F.example?(t(),n("div",pn,[i[13]||(i[13]=e("strong",null,"Example:",-1)),ge(" "+r(F.example),1)])):L("",!0)],2))),128))])])):(t(),n("div",nn,[i[10]||(i[10]=e("div",{class:"trigger-icon"},"üìö",-1)),i[11]||(i[11]=e("h3",{class:"trigger-heading"},"Vocabulary Learning",-1)),e("p",ln,r(Array.isArray((y=a.currentStep)==null?void 0:y.data)?a.currentStep.data.length:1)+" new words await you!",1),e("button",{onClick:i[0]||(i[0]=F=>s.$emit("init-vocabulary")),class:"trigger-button"}," üöÄ Start Learning ")]))])):["video","audio"].includes(($=a.currentStep)==null?void 0:$.type)?(t(),n("div",fn,[e("div",hn,r(((C=a.currentStep)==null?void 0:C.type)==="video"?"üé¨":"üéµ"),1),e("h4",bn,r(((D=a.currentStep)==null?void 0:D.type)==="video"?"Video Lesson":"Audio Lesson"),1),e("p",xn,r(((W=(S=a.currentStep)==null?void 0:S.data)==null?void 0:W.description)||"Multimedia content"),1)])):(t(),n("div",{key:7,class:"content-text",innerHTML:l.formatContent(l.getStepContent(a.currentStep))},null,8,yn))])]),e("footer",kn,[a.currentIndex>0?(t(),n("button",{key:0,class:"nav-button prev-button",onClick:i[2]||(i[2]=F=>s.$emit("previous"))}," ‚¨ÖÔ∏è Back ")):L("",!0),!a.isInteractiveStep||l.hasEmptyContent?(t(),n("button",{key:1,class:z(["nav-button next-button",{"hide-on-mobile-game":a.isGameStep}]),onClick:i[3]||(i[3]=F=>s.$emit("next"))},r(a.isLastStep?"üèÅ Finish":"‚û°Ô∏è Next"),3)):L("",!0)])],2)}const _n=pe(Ba,[["render",wn],["__scopeId","data-v-87b834fc"]]);function $n(){const s=u(0),i=u(0),a=u(null),h=u(null),c=u([]),l=u([]),d=u([]),v=Pt({}),m=u(""),k=u(!1),q=u(""),T=u(""),_=u(null),b=u([]),y=u([]),f=u(null),p=u(null),w=u(0),$=u(2),C=u(!1),D=B(()=>w.value===1&&w.value<$.value),S=o=>{if(!o)return[];let g=[];if(o.questions&&Array.isArray(o.questions))return g=o.questions.map((Q,E)=>({question:typeof Q=="string"?Q:Q.text||Q.question||`Question ${E+1}`,index:E,source:"explicit-array"})),g;const x=o.question||o.content||"";if(x){const Q=[{name:"numbered-dot",regex:/(\d+\.\s*[^?]*\?)/g,extract:E=>E.replace(/^\d+\.\s*/,"").trim()},{name:"numbered-paren",regex:/(\d+\)\s*[^?]*\?)/g,extract:E=>E.replace(/^\d+\)\s*/,"").trim()},{name:"question-prefix",regex:/((?:Question|Question)\s*\d+[:.]\s*[^?]*\?)/gi,extract:E=>E.replace(/(?:Question|Question)\s*\d+[:.]\s*/i,"").trim()},{name:"simple-questions",regex:/([–ê-–ØA-Z][^?]*\?)/g,extract:E=>E.trim()}];for(const E of Q){const X=[...x.matchAll(E.regex)];if(X.length>1){g=X.map((re,Me)=>({question:E.extract(re[1]||re[0]),index:Me,source:`pattern-${E.name}`}));break}}if(g.length===0){const X=x.split(/\n+/).filter(re=>re.trim().length>0).filter(re=>re.includes("?"));X.length>1&&(g=X.map((re,Me)=>({question:re.trim().replace(/^\d+[\.)]\s*/,""),index:Me,source:"line-split"})))}}if(g.length===0&&o.data)if(Array.isArray(o.data)){const Q=o.data.filter(E=>typeof E=="string"?E.includes("?"):E&&(E.question||E.text)&&String(E.question||E.text).includes("?"));Q.length>0&&(g=Q.map((E,X)=>({question:typeof E=="string"?E:E.question||E.text||`Question ${X+1}`,index:X,source:"data-array"})))}else o.data.questions&&Array.isArray(o.data.questions)&&(g=o.data.questions.map((Q,E)=>({question:typeof Q=="string"?Q:Q.text||Q.question||`Question ${E+1}`,index:E,source:"data-questions"})));return g},W=(o,g)=>{if(!o||!g)return 0;const x=o.length>g.length?o:g,Q=o.length>g.length?g:o;if(x.length===0)return 1;const E=F(x,Q);return(x.length-E)/x.length},F=(o,g)=>{o=o.toLowerCase(),g=g.toLowerCase();const x=[];for(let Q=0;Q<=o.length;Q++){let E=Q;for(let X=0;X<=g.length;X++)if(Q===0)x[X]=X;else if(X>0){let re=x[X-1];o.charAt(Q-1)!==g.charAt(X-1)&&(re=Math.min(Math.min(re,E),x[X])+1),x[X-1]=E,E=re}Q>0&&(x[g.length]=E)}return x[g.length]},se=o=>{const g=[...o];for(let x=g.length-1;x>0;x--){const Q=Math.floor(Math.random()*(x+1));[g[x],g[Q]]=[g[Q],g[x]]}if(g.length>1){let x=0;for(;x<5&&JSON.stringify(g)===JSON.stringify(o);){for(let Q=g.length-1;Q>0;Q--){const E=Math.floor(Math.random()*(Q+1));[g[Q],g[E]]=[g[E],g[Q]]}x++}}return g},V=o=>o.every((g,x)=>g.originalIndex===x),Y=o=>{const g=o.correctAnswer||o.answer;return Array.isArray(g)?g:[g].filter(Boolean)},ee=(o,g)=>{const x=S(g);if(x.length>1){if(!Array.isArray(o))return!1;const X=Y(g);let re=0;const Me=x.length;for(let be=0;be<Me;be++){const ze=o[be];if(!ze||typeof ze!="string")continue;const Ie=ze.trim().toLowerCase();if(Ie.length<1)continue;let Ce=null;if(X[be]?Ce=X[be]:X.length===1&&(Ce=X[0]),Ce){const Ye=String(Ce).trim().toLowerCase();(Ie===Ye||Ye.length>3&&W(Ie,Ye)>.8)&&re++}else Ie.length>=2&&re++}return re/Me>=.7}if(!o||typeof o!="string")return!1;const Q=Y(g),E=o.trim().toLowerCase();return Q.some(X=>{const re=String(X).trim().toLowerCase();return E===re?!0:re.length>3?W(E,re)>.8:!1})},ae=(o,g)=>{const x=g.correctAnswer;if(typeof x=="number")return o===x;if(typeof x=="string"&&x.length===1)return o===x.toUpperCase();if(typeof x=="string")return o===x;if(Array.isArray(x)){const Q=Array.isArray(o)?[...o].sort():[o],E=[...x].sort();return JSON.stringify(Q)===JSON.stringify(E)}return!1},ce=(o,g)=>{const x=g.correctAnswer;if(typeof x=="boolean"){if(typeof o=="boolean")return o===x;if(typeof o=="string")return o.toLowerCase()==="true"?!0:x===!1;if(typeof o=="number")return o===1===x}if(typeof x=="number"){if(typeof o=="number")return o===x;if(typeof o=="string"){const Q=x===0;return o.toLowerCase()==="true"===Q}}return typeof x=="string"&&typeof o=="string"?o.toLowerCase()===x.toLowerCase():!1},ie=(o,g)=>{if(!o||typeof o!="object")return!1;let x=[];return g.questions&&Array.isArray(g.questions)?x=g.questions.flatMap(Q=>Q.blanks||[]):g.blanks&&Array.isArray(g.blanks)&&(x=g.blanks),x.length===0||Object.keys(o).length<x.length?!1:x.every(Q=>{const E=Q.id,X=o[E],re=Q.correctAnswer;return(X||"").trim().toLowerCase()===(re||"").trim().toLowerCase()})},fe=(o,g)=>!o||typeof o!="object"||Object.keys(o).length<g.pairs.length?!1:g.pairs.every(x=>o[x.id]===x.correctMatch),R=(o,g)=>!o||typeof o!="object"||Object.keys(o).length<g.questions.length?!1:g.questions.every(x=>JSON.stringify(o[x.id])===JSON.stringify(x.correctOrder)),M=(o,g)=>{(!o||typeof o!="object")&&(o=v);const x=Array.isArray(g.dropZones)?g.dropZones:Object.values(g.dropZones||{}).filter(X=>X&&(X.label||X.id));if(x.length===0)return!1;let Q=0,E=0;for(const X of x){const re=X.id||X.label||String(X),Me=o[re]||[];let De=X.correctItems||X.items||[];X.correctItem!==void 0&&(typeof X.correctItem=="number"&&g.dragItems?De=[(Array.isArray(g.dragItems)?g.dragItems:Object.values(g.dragItems))[X.correctItem]]:De=[X.correctItem]),E+=De.length;for(const be of De){const ze=typeof be=="string"?be:(be==null?void 0:be.text)||(be==null?void 0:be.label)||String(be);Me.some(Ce=>(typeof Ce=="string"?Ce:(Ce==null?void 0:Ce.text)||(Ce==null?void 0:Ce.label)||String(Ce)).trim().toLowerCase()===ze.trim().toLowerCase())&&Q++}}return Q===E&&E>0},P=o=>{if(!o)return!1;switch(o.type||"short-answer"){case"short-answer":case"reading":case"sentence-transformation":case"error-correction":return ee(h.value,o);case"multiple-choice":case"abc":case"dialogue-completion":return ae(h.value,o);case"true-false":return ce(h.value,o);case"fill-blanks":return ie(h.value,o);case"matching":return fe(h.value,o);case"structure":case"ordering":return R(h.value,o);case"drag-drop":return M(v,o);case"geometry":return j(h.value,o);default:return ee(h.value,o)}},j=(o,g)=>{if(g.mode==="calculate"){if(!o||typeof o!="object")return!1;const x=String(o.side_b)===String(g.questions.find(E=>E.id==="side_b").correctAnswer),Q=String(o.angle_c)===String(g.questions.find(E=>E.id==="angle_c").correctAnswer);return x&&Q}return!o||typeof o!="object"?!1:o.valid===!0},I=o=>{if(!o)return!1;switch(o.type||"multiple-choice"){case"multiple-choice":return ae(h.value,o);case"true-false":return ce(h.value,o);case"short-answer":return ee(h.value,o);default:return ae(h.value,o)}},U=()=>{const o=["‚úÖ Excellent! Correct answer!","üéâ Correct! Keep it up!","‚≠ê Magnificent! Continue!","üöÄ Right! You did great!","üíØ Bull's-eye! Great work!","üèÜ Superb! Let's move on!"];return o[Math.floor(Math.random()*o.length)]},H=o=>{const g=["ü§î Not quite right. You have one more attempt!","üí≠ Think a little more. Try again!","üéØ Almost there! One more try!","üîç Pay attention! You have a second attempt!","üìö Re-read the material and try again!","‚ö° Don't give up! Try another option!"];return g[Math.floor(Math.random()*g.length)]},te=(o,g)=>{const x=["üìö Don't worry! Correct answer:","üí° Here's the correct answer:","üéØ Correct answer:","‚úÖ Remember the correct answer:"];return`${x[Math.floor(Math.random()*x.length)]} ${g}`},le=(o,g,x)=>{if(x)return U();if(!Array.isArray(o)||o.length===0)return"üîó Create at least one pair to check!";const E=(g.pairs||[]).length,X=o.length;if(X<E)return`üîó Create all ${E} pairs (you have ${X})`;let re=0;return o.forEach(Me=>{const{leftIndex:De,rightIndex:be}=Me;De!==void 0&&be!==void 0&&De===be&&re++}),re===0?"ü§î No pairs match. Think about logical connections!":re===1?`üéØ ${re} pair correct out of ${E}. Check the rest!`:`üéØ ${re} pairs correct out of ${E}. Almost there!`},he=o=>{var Q;if(!o)return"";const{correctAnswer:g,type:x="short-answer"}=o;if(x==="multiple-choice"||x==="abc"||x==="dialogue-completion"){if(typeof g=="number")return((Q=o.options[g])==null?void 0:Q.text)||o.options[g]||"";if(typeof g=="string"&&g.length===1){const E=o.options.find(X=>(X.text||X).startsWith(g));return(E==null?void 0:E.text)||E||""}}return x==="matching"?o.pairs&&Array.isArray(o.pairs)?o.pairs.map(E=>`${E.left} ‚Üî ${E.correctMatch}`).join("; "):"Correct pairs shown above":x==="ordering"||x==="structure"?o.questions&&Array.isArray(o.questions)?o.questions.map(E=>E.correctOrder.join(" ")).join("; "):"Correct order shown above":Array.isArray(g)?g.join("; "):String(g||"")},je=o=>{w.value++;const g=P(o);if(k.value=g,g)m.value="‚úÖ Excellent! Correct answer!";else{const x=he(o);m.value=`Correct answer: ${x}`}return C.value=!0,g},Be=o=>{w.value++;const g=I(o);if(k.value=g,g)m.value=U(),C.value=!1;else if(D.value)m.value=H(),C.value=!1;else{const x=he(o);m.value=te(o,x),C.value=!0}return g},Te=o=>{a.value=o},Pe=o=>{var Q,E,X,re,Me,De,be,ze;if(!o)return console.log("No current step provided"),null;if(o.gameType||o.type==="game")return console.log("This is a game step, not an exercise"),null;if(!["exercise","practice","data_analysis","fraction_visual","geometry","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","histogram","map","block-coding","explanation","language_tone_transformer","language_idiom_bridge","language_word_constellation","language_rhythm_match","language_false_friends"].includes(o.type))return console.log(`Step type ${o.type} is not a recognized exercise type`),null;let x=[];try{if(console.log("Processing step:",o),console.log("Step.data:",o.data),console.log("Step.data is array?",Array.isArray(o.data)),console.log("Step.data.length:",(Q=o.data)==null?void 0:Q.length),console.log("Step.data contents:",o.data?JSON.stringify(o.data,null,2):"N/A"),console.log("Step.content:",o.content),console.log("Step.content.type:",(E=o.content)==null?void 0:E.type),console.log("Step keys:",Object.keys(o)),Array.isArray(o.data)&&o.data.length>0?(console.log("Found exercises directly in data array, length:",o.data.length),x=o.data):(X=o.data)!=null&&X.exercises&&Array.isArray(o.data.exercises)?(console.log("Found exercises in data.exercises"),x=o.data.exercises):(re=o.content)!=null&&re.exercises&&Array.isArray(o.content.exercises)?(console.log("Found exercises in content.exercises"),x=o.content.exercises):o.exercises&&Array.isArray(o.exercises)?(console.log("Found exercises in step.exercises"),x=o.exercises):(Me=o.data)!=null&&Me.question||(De=o.data)!=null&&De.type?(console.log("Found single exercise in data (by question or type)"),x=[o.data]):(be=o.content)!=null&&be.question||(ze=o.content)!=null&&ze.type?(console.log("Found single exercise in content (by question or type)"),x=[o.content]):o.question?(console.log("Found single exercise as step itself"),x=[o]):(console.log("Step is the exercise itself (new interactive type)"),x=[o]),console.log(`Found ${x.length} exercises`),x.length===0)return console.warn("No exercises found in step"),null;s.value>=x.length&&(console.log("Resetting exercise index from",s.value,"to 0"),s.value=0);const Ie=x[s.value];return console.log("Returning exercise:",Ie),Ie&&S(Ie),Te(Ie),Ie||null}catch(Ie){return console.error("Error in getCurrentExercise:",Ie),null}},A=o=>{if(!o||o.type!=="quiz")return null;let g=[];try{const x=o.data||o.content;return Array.isArray(x)?g=x:x&&Array.isArray(x.quizzes)?g=x.quizzes:x&&x.content&&Array.isArray(x.content.questions)?g=x.content.questions:x&&x.question&&(g=[x]),g.length===0?null:(i.value>=g.length&&(i.value=0),g[i.value]||null)}catch{return null}},O=o=>{if(!o||!["exercise","practice","data_analysis","fraction_visual","geometry","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","histogram","map","block-coding"].includes(o.type))return 0;try{let x=[];const Q=o.data||o.content;if(Array.isArray(Q))x=Q;else if(Q&&Array.isArray(Q.exercises))x=Q.exercises;else if(Q&&Q.content&&Array.isArray(Q.content.exercises))x=Q.content.exercises;else return 1;return x.length}catch{return 0}},Z=o=>{if(!o||o.type!=="quiz")return 0;try{let g=[];const x=o.data||o.content;return Array.isArray(x)?g=x:x&&Array.isArray(x.quizzes)?g=x.quizzes:x&&x.content&&Array.isArray(x.content.questions)&&(g=x.content.questions),g.length}catch{return 0}},oe=o=>{const g=O(o);return s.value>=g-1},ke=o=>{const g=Z(o);return i.value>=g-1},Le=(o,g)=>{oe(o)?(rt(),g()):(s.value++,et(),Ae(Pe(o)))},Fe=(o,g)=>{ke(o)?(rt(),g()):(i.value++,et())},Ae=o=>{if(o)switch(o.type){case"fill-blank":Ve(o);break;case"ordering":qe(o);break;case"drag-drop":nt(o);break;case"matching":lt();break;case"short-answer":const g=S(o);g.length>1&&(h.value=new Array(g.length).fill(""));break}},Ve=o=>{if(!o){c.value=[];return}let g=0;if(o.blanks&&Array.isArray(o.blanks))g=o.blanks.length;else{const x=o.template||o.question||"",Q=x.match(/_+/g)||[],E=x.match(/\[blank\]/gi)||[],X=x.match(/\{[^}]*\}/g)||[];g=Math.max(Q.length,E.length,X.length)}c.value=new Array(Math.max(1,g)).fill("")},qe=o=>{if(!o||o.type!=="ordering"||!Array.isArray(o.items)){d.value=[];return}const g=o.items.map((E,X)=>({id:`item_${X}_${Math.random()}`,text:typeof E=="string"?E:(E==null?void 0:E.text)||String(E),originalIndex:X}));let x=[...g],Q=0;for(;Q<10&&JSON.stringify(x.map(E=>E.originalIndex))===JSON.stringify(g.map(E=>E.originalIndex));)x.sort(()=>Math.random()-.5),Q++;d.value=x},nt=o=>{Object.keys(v).forEach(g=>{delete v[g]}),b.value=[],y.value=[],!(!o||o.type!=="drag-drop")&&(o.dragItems&&Array.isArray(o.dragItems)&&(b.value=o.dragItems.map(g=>typeof g=="string"?{text:g,id:g}:g&&g.text?g:{text:String(g),id:String(g)})),o.dropZones&&Array.isArray(o.dropZones)&&(y.value=o.dropZones.map(g=>typeof g=="string"?{label:g,id:g,correctItems:[]}:g&&g.label?{label:g.label,id:g.id||g.label,correctItems:g.correctItems||g.items||[]}:{label:String(g),id:String(g),correctItems:[]}),y.value.forEach(g=>{v[g.id]=[]})))},lt=()=>{l.value=[],_.value=null,typeof window<"u"&&(window.matchingShuffleCache=null)},mt=(o,g)=>{if(!g){h.value=o;return}switch(g.type){case"matching":l.value=o||[],h.value=o||[];break;case"ordering":d.value=o||[],h.value=o||[];break;case"fill-blank":break;case"short-answer":S(g).length>1&&Array.isArray(o),h.value=o;break;default:h.value=o}},ot=(o,g)=>{for(Array.isArray(c.value)||(c.value=[]);c.value.length<=o;)c.value.push("");const x=typeof g=="object"&&(g!=null&&g.target)?g.target.value:g;c.value[o]=x||"",c.value=[...c.value]},Ze=()=>h.value||c.value||l.value||d.value,Je=o=>{_.value=o},Oe=o=>{if(o>=0&&o<l.value.length){const g=l.value.filter((x,Q)=>Q!==o);l.value=g,h.value=g}},Ge=({item:o,event:g})=>{f.value=o},He=o=>{p.value=o},Ke=()=>{p.value=null},Qe=({zoneId:o,item:g})=>{v[o]||(v[o]=[]);const x=typeof g=="string"?g:(g==null?void 0:g.text)||(g==null?void 0:g.label)||String(g);Object.keys(v).forEach(E=>{E!==o&&Array.isArray(v[E])&&(v[E]=v[E].filter(X=>(typeof X=="string"?X:(X==null?void 0:X.text)||(X==null?void 0:X.label)||String(X))!==x))}),v[o].some(E=>(typeof E=="string"?E:(E==null?void 0:E.text)||(E==null?void 0:E.label)||String(E))===x)||v[o].push(g),f.value=null,p.value=null},_e=({zoneId:o,itemIndex:g,item:x})=>{v[o]&&v[o][g]&&v[o].splice(g,1)},yt=()=>{q.value="Read the question carefully and think about the correct answer."},kt=()=>{T.value=""},gt=o=>{T.value=o},Ue=()=>{w.value=0,C.value=!1},et=()=>{h.value=null,m.value="",k.value=!1,q.value="",T.value="",Ue()},pt=()=>{c.value=[],l.value=[],_.value=null,d.value=[],b.value=[],y.value=[],Object.keys(v).forEach(o=>{delete v[o]})},rt=()=>{s.value=0,i.value=0,et(),pt(),Ue()};return{currentExerciseIndex:s,currentQuizIndex:i,userAnswer:h,confirmation:m,answerWasCorrect:k,currentHint:q,smartHint:T,fillBlankAnswers:c,matchingPairs:l,selectedMatchingItem:_,orderingItems:d,dragDropPlacements:v,availableDragItems:b,dropZones:y,draggedDragItem:f,dropOverZone:p,attemptCount:w,maxAttempts:$,showCorrectAnswer:C,isOnSecondChance:D,getCurrentExercise:Pe,getCurrentQuiz:A,getTotalExercises:O,getTotalQuizzes:Z,isLastExercise:oe,isLastQuiz:ke,goToNextExercise:Le,goToNextQuiz:Fe,setCurrentExercise:Te,detectQuestionsFromExercise:S,validateCurrentAnswer:P,validateQuizAnswer:I,validateShortAnswer:ee,validateMultipleChoice:ae,validateTrueFalse:ce,validateFillBlank:ie,validateMatching:fe,validateOrdering:R,validateDragDrop:M,submitAnswer:je,submitQuizAnswer:Be,initializeCurrentExerciseData:Ae,initializeFillBlankAnswers:Ve,initializeOrderingItems:qe,initializeDragDropItems:nt,initializeMatchingItems:lt,updateUserAnswer:mt,updateFillBlankAnswer:ot,getCurrentUserAnswer:Ze,handleMatchingSelection:Je,removeMatchingPair:Oe,handleDragItemStart:Ge,handleDragOverZone:He,handleDragLeaveZone:Ke,handleDropInZone:Qe,handleRemoveDroppedItem:_e,getCorrectAnswerDisplay:he,getMatchingFeedback:le,getRandomSuccessMessage:U,getSecondChanceMessage:H,getFinalFailureMessage:te,showHint:yt,clearSmartHint:kt,setSmartHint:gt,resetExerciseState:rt,resetExerciseAnswers:et,resetExerciseData:pt,resetAttemptState:Ue,getCurrentExerciseType:o=>(o==null?void 0:o.type)||"short-answer",getFormattedFillBlankTemplate:o=>{if(!o||o.type!=="fill-blank")return"";const g=o.template||o.question||"";let x=0;return g.replace(/\[blank\]/gi,()=>`<input data-blank-index="${x++}">`).replace(/_+/g,()=>`<input data-blank-index="${x++}">`).replace(/\{[^}]*\}/g,()=>`<input data-blank-index="${x++}">`)},getLeftItemsArray:o=>{if(!(o!=null&&o.pairs))return[];const g=o.pairs;return Array.isArray(g)?g.map((x,Q)=>{let E="";return Array.isArray(x)?E=String(x[0]||""):x&&typeof x=="object"?E=String(x.left||x[0]||x.question||x.term||""):E=String(x||""),{text:E,originalIndex:Q}}).filter(x=>x.text.trim()!==""):[]},getRightItemsArray:o=>{if(!(o!=null&&o.pairs))return[];const g=o.pairs;if(Array.isArray(g)){const x=g.map((Q,E)=>{let X="";return Array.isArray(Q)?X=String(Q[1]||""):Q&&typeof Q=="object"?X=String(Q.right||Q[1]||Q.answer||Q.definition||""):X=String(Q||""),{text:X,originalIndex:E}}).filter(Q=>Q.text.trim()!=="");return se(x)}return[]},calculateSimilarity:W,levenshteinDistance:F,getCorrectAnswersArray:Y,shuffleArray:se,isArrayInOriginalOrder:V,forceReshuffleRightItems:()=>!0}}function Cn(s){const i=u(0),a=u(0),h=u(null),c=u(null),l=B(()=>{const T=ne(s);return(T==null?void 0:T.questions)||[]}),d=B(()=>l.value[a.value]),v=B(()=>a.value>=l.value.length-1&&c.value==="correct"),m=T=>{c.value||(h.value=T.id,T.id===d.value.targetId?(c.value="correct",i.value++,setTimeout(()=>{a.value<l.value.length-1&&k()},1500)):(c.value="incorrect",setTimeout(()=>{h.value=null,c.value=null},1e3)))},k=()=>{a.value++,h.value=null,c.value=null};return{score:i,currentQuestion:d,currentQuestionIndex:a,questions:l,selectedItemId:h,feedback:c,isComplete:v,handleSelection:m,resetGame:()=>{a.value=0,i.value=0,h.value=null,c.value=null}}}const Sn={class:"game-hud-sidebar"},Tn={class:"hud-section score"},Mn={class:"hud-value"},An={class:"hud-value"},In={key:0,class:"hud-section lives"},Dn={class:"hearts"},jn={key:1,class:"hud-section prompt"},Ln={class:"prompt-text"},qn={key:2,class:"hud-section target"},En={class:"hud-value"},Wn={__name:"GameHUDSidebar",props:{score:{type:Number,default:0},timeRemaining:{type:Number,default:60},lives:{type:Number,default:3},maxLives:{type:Number,default:3},prompt:{type:String,default:""},targetScore:{type:Number,default:0}},setup(s){return(i,a)=>(t(),n("div",Sn,[e("div",Tn,[a[0]||(a[0]=e("span",{class:"hud-icon"},"üéØ",-1)),e("span",Mn,r(s.score),1),a[1]||(a[1]=e("span",{class:"hud-label"},"Score",-1))]),e("div",{class:z(["hud-section timer",{warning:s.timeRemaining<10}])},[a[2]||(a[2]=e("span",{class:"hud-icon"},"‚è≥",-1)),e("span",An,r(s.timeRemaining)+"s",1),a[3]||(a[3]=e("span",{class:"hud-label"},"Time",-1))],2),s.maxLives>0?(t(),n("div",In,[e("div",Dn,[(t(!0),n(J,null,K(s.maxLives,h=>(t(),n("span",{key:h,class:z(["heart",{lost:h>s.lives}])},"‚ù§Ô∏è",2))),128))]),a[4]||(a[4]=e("span",{class:"hud-label"},"Lives",-1))])):L("",!0),s.prompt?(t(),n("div",jn,[e("p",Ln,r(s.prompt),1)])):L("",!0),s.targetScore?(t(),n("div",qn,[a[5]||(a[5]=e("span",{class:"hud-icon"},"üéØ",-1)),e("span",En,r(s.targetScore),1),a[6]||(a[6]=e("span",{class:"hud-label"},"Target",-1))])):L("",!0)]))}},Rt=pe(Wn,[["__scopeId","data-v-1df417cb"]]),Bn={key:1,class:"question-display"},Pn={class:"question-text"},zn={class:"game-world"},Rn={class:"orb-text"},Nn={class:"splash-icon"},Fn={class:"splash-text"},Vn={__name:"BasketCatch",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60},isPaused:{type:Boolean,default:!1}},emits:["score-change","life-lost","item-collected","game-complete","pause","game-started"],setup(s,{emit:i}){const a=s,h=i,c=u(null),l=u([]),d=u({}),v=u(50),m=u(!1),k=u(0),q=u(null),T=u(null),_=u(0),b=u(!1),y=u(""),f=u(""),p=u(""),w=["#FFE0B2","#C8E6C9","#BBDEFB","#F8BBD0","#E1BEE7"],$=B(()=>a.gameData.questions||[{q:"Ready?",a:"Go",wrong:[]}]),C=B(()=>$.value[_.value]),D=B(()=>{var R,M;return((R=C.value)==null?void 0:R.q)||((M=C.value)==null?void 0:M.question)||"Loading..."}),S=()=>{if(!m.value||a.isPaused)return;const R=C.value;if(!R)return;const M=Math.random()>.5,P=R.a||R.correctAnswer||R.answer,j=R.wrong||R.wrongAnswers||["0","1"],I=j[Math.floor(Math.random()*j.length)],U=M?P:I,H={id:`item-${k.value++}`,text:U,isCorrect:M,x:Math.random()*80+10,speed:a.gameData.difficulty==="hard"?2.5:4,color:w[Math.floor(Math.random()*w.length)]};l.value.push(H),setTimeout(()=>{V(H.id)},H.speed*1e3+500)},W=()=>{var P;if(!m.value||a.isPaused)return;const R=(P=c.value)==null?void 0:P.querySelector(".basket-body");if(!R)return;const M=R.getBoundingClientRect();l.value.forEach(j=>{const I=d.value[j.id];if(!I)return;const U=I.getBoundingClientRect();!(U.right<M.left+20||U.left>M.right-20||U.bottom<M.top+20||U.top>M.bottom-20)&&F(j)})},F=R=>{V(R.id),R.isCorrect?(h("score-change",100),se("Correct!","success","‚ú®"),l.value=[],setTimeout(()=>{_.value<$.value.length-1?_.value++:h("game-complete",{score:a.score+100})},800)):(h("score-change",-20),h("life-lost"),se("Wrong!","error","‚ùå"))},se=(R,M,P)=>{y.value=R,f.value=M,p.value=P,b.value=!0,setTimeout(()=>b.value=!1,1e3)},V=R=>{const M=l.value.findIndex(P=>P.id===R);M!==-1&&(l.value.splice(M,1),delete d.value[R])},Y=R=>{if(!c.value||!m.value)return;const M=c.value.getBoundingClientRect();ae(R.clientX-M.left,M.width)},ee=R=>{if(R.preventDefault(),!c.value||!m.value)return;const M=c.value.getBoundingClientRect();ae(R.touches[0].clientX-M.left,M.width)},ae=(R,M)=>{const P=R/M*100;v.value=Math.max(10,Math.min(90,P))},ce=()=>{m.value||ie()},ie=()=>{m.value=!0,l.value=[],_.value=0,q.value&&clearInterval(q.value),T.value&&clearInterval(T.value),q.value=setInterval(S,1400),T.value=setInterval(W,50)},fe=()=>{m.value=!1,clearInterval(q.value),clearInterval(T.value)};return xe(()=>a.lives,R=>{R<=0&&fe()}),Ne(()=>{l.value=[],h("game-started"),setTimeout(()=>{ie()},100)}),at(fe),(R,M)=>(t(),n("div",{class:"basket-catch-game",ref_key:"gameContainer",ref:c,onMousemove:Y,onTouchmove:ee,onClick:ce},[M[2]||(M[2]=We('<div class="sun" data-v-69674282>‚òÄÔ∏è</div><div class="cloud cloud-1" data-v-69674282>‚òÅÔ∏è</div><div class="cloud cloud-2" data-v-69674282>‚òÅÔ∏è</div><div class="cloud cloud-3" data-v-69674282>‚òÅÔ∏è</div><div class="cloud cloud-4" data-v-69674282>‚òÅÔ∏è</div><div class="cloud cloud-5" data-v-69674282>‚òÅÔ∏è</div><div class="cloud cloud-6" data-v-69674282>‚òÅÔ∏è</div><div class="cloud cloud-7" data-v-69674282>‚òÅÔ∏è</div><div class="cloud cloud-8" data-v-69674282>‚òÅÔ∏è</div>',9)),m.value?(t(),de(Rt,{key:0,score:s.score,"time-remaining":s.timeRemaining,lives:s.lives,"max-lives":3},null,8,["score","time-remaining","lives"])):L("",!0),m.value?(t(),n("div",Bn,[M[0]||(M[0]=e("div",{class:"question-icon"},"‚ùì",-1)),e("div",Pn,r(D.value),1)])):L("",!0),e("div",zn,[(t(!0),n(J,null,K(l.value,P=>(t(),n("div",{key:P.id,class:"falling-orb",ref_for:!0,ref:j=>{j&&(d.value[P.id]=j)},style:ue({left:P.x+"%",animationDuration:P.speed+"s",backgroundColor:P.color})},[e("span",Rn,r(P.text),1)],4))),128))]),e("div",{class:"basket-wrapper",style:ue({left:v.value+"%"})},M[1]||(M[1]=[e("div",{class:"basket-body"},[e("span",{class:"basket-emoji"},"üß∫")],-1)]),4),me($e,{name:"pop"},{default:ye(()=>[b.value?(t(),n("div",{key:0,class:z(["feedback-splash",f.value])},[e("div",Nn,r(p.value),1),e("div",Fn,r(y.value),1)],2)):L("",!0)]),_:1})],544))}},Wt=pe(Vn,[["__scopeId","data-v-69674282"]]),On={class:"memory-cards-game"},Gn={key:1,class:"instruction-banner"},Hn={class:"instruction-text"},Qn=["onClick"],Un={class:"card-back"},Yn={class:"card-content"},Xn={__name:"MemoryCards",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(s,{emit:i}){const a=s,h=i,c=u([]),l=u([]),d=u(0),v=u(!0),m=u(!0),k=B(()=>{var w;return((w=a.gameData)==null?void 0:w.instructions)||"Find matching pairs!"}),q=B(()=>{var w,$;return((w=a.gameData)==null?void 0:w.items)||(($=a.gameData)==null?void 0:$.pairs)||[]}),T=B(()=>{const w=c.value.length;return w<=12?"4x3":w<=16?"4x4":w<=20?"5x4":"6x4"}),_=()=>{if(q.value.length===0)return;const w=[];let $=0;q.value.forEach((C,D)=>{let S;typeof C=="object"&&C!==null?S=C.content||C.text||C.word||JSON.stringify(C):S=C,w.push({id:$++,pairId:D,content:S,flipped:!1,matched:!1}),w.push({id:$++,pairId:D,content:S,flipped:!1,matched:!1})}),c.value=b(w)},b=w=>{const $=[...w];for(let C=$.length-1;C>0;C--){const D=Math.floor(Math.random()*(C+1));[$[C],$[D]]=[$[D],$[C]]}return $},y=w=>{!m.value||!v.value||w.flipped||w.matched||(w.flipped=!0,l.value.push(w),l.value.length===2&&(v.value=!1,f()))},f=()=>{const[w,$]=l.value;w.pairId===$.pairId?setTimeout(()=>{w.matched=!0,$.matched=!0,d.value++,h("score-change",20),h("item-collected",{isCorrect:!0}),d.value===q.value.length&&setTimeout(()=>{h("game-complete",{reason:"all-matched"})},500),p()},500):setTimeout(()=>{w.flipped=!1,$.flipped=!1,h("score-change",-2),h("item-collected",{isCorrect:!1}),p()},1e3)},p=()=>{l.value=[],v.value=!0};return xe(()=>a.lives,w=>{w<=0&&(m.value=!1)}),xe(()=>a.timeRemaining,w=>{w<=0&&(m.value=!1)}),Ne(()=>{_(),h("game-started")}),(w,$)=>(t(),n("div",On,[m.value?(t(),de(Rt,{key:0,score:s.score,"time-remaining":s.timeRemaining,lives:s.lives,"max-lives":3},null,8,["score","time-remaining","lives"])):L("",!0),m.value?(t(),n("div",Gn,[e("p",Hn,r(k.value),1)])):L("",!0),e("div",{class:z(["cards-grid",`grid-${T.value}`])},[(t(!0),n(J,null,K(c.value,C=>(t(),n("div",{key:C.id,class:"card-wrapper",onClick:D=>y(C)},[e("div",{class:z(["card",{flipped:C.flipped,matched:C.matched}])},[$[0]||($[0]=e("div",{class:"card-front"},[e("div",{class:"card-icon"},"üé¥")],-1)),e("div",Un,[e("div",Yn,r(C.content),1)])],2)],8,Qn))),128))],2)]))}},Zn=pe(Xn,[["__scopeId","data-v-3359ceb4"]]),Jn={ref:"gameWrapper",class:"game-container"},Kn={class:"top-section"},el={class:"question-text"},tl={class:"stats-row"},sl={class:"stat-badge stat-score"},al={class:"stat-value"},nl={class:"stat-badge stat-time"},ll={class:"stat-value"},ol={class:"stat-badge stat-lives"},rl={class:"game-area"},il={class:"moles-grid"},cl={key:1,class:"start-screen"},ul={class:"start-content"},dl={class:"start-info"},vl={class:"info-item"},ml={class:"info-value"},gl={class:"info-item"},pl={class:"info-value"},fl={class:"info-item"},hl={class:"info-value"},bl={key:2,class:"gameover-screen"},xl={class:"gameover-card"},yl={class:"gameover-emoji"},kl={class:"gameover-title"},wl={class:"gameover-score"},_l={class:"gameover-stars"},$l={class:"gameover-stats"},Cl={class:"gstat"},Sl={class:"gstat-value gstat-correct"},Tl={class:"gstat"},Ml={class:"gstat-value gstat-wrong"},Al={class:"gstat"},Il={class:"gstat-value"},Dl={class:"gameover-progress"},jl={class:"gameover-timer"},Ll=2500,ql=1200,Bt=5e3,El={__name:"WhackAMole",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(s,{emit:i}){const a=hs({props:{hole:Object},setup(R){return()=>{var M,P,j,I,U,H;return ve("div",{class:"hole-container"},[ve("div",{class:"hole-visual"},[ve("div",{class:"dirt-mound-back"}),ve("div",{class:["mole-wrapper",{"mole-up":(M=R.hole)==null?void 0:M.active,"mole-hit":((P=R.hole)==null?void 0:P.state)==="hit","mole-miss":((j=R.hole)==null?void 0:j.state)==="miss"}]},[ve("div",{class:"mole-character"},[ve("div",{class:"mole-head"},[ve("div",{class:"mole-ear mole-ear-l"}),ve("div",{class:"mole-ear mole-ear-r"}),ve("div",{class:"mole-face"},[ve("div",{class:"mole-eye mole-eye-l"},[ve("div",{class:"mole-pupil"}),ve("div",{class:"mole-eye-shine"})]),ve("div",{class:"mole-eye mole-eye-r"},[ve("div",{class:"mole-pupil"}),ve("div",{class:"mole-eye-shine"})]),ve("div",{class:"mole-cheek mole-cheek-l"}),ve("div",{class:"mole-cheek mole-cheek-r"}),ve("div",{class:"mole-nose"}),ve("div",{class:"mole-mouth"})])]),ve("div",{class:"mole-body"},[ve("div",{class:"mole-body-inner"}),ve("div",{class:"mole-paw mole-paw-l"}),ve("div",{class:"mole-paw mole-paw-r"})])])]),ve("div",{class:"dirt-mound-front"}),ve("div",{class:["wooden-sign",{"sign-visible":(I=R.hole)==null?void 0:I.active}]},[ve("div",{class:"sign-board"},[ve("span",{class:"sign-text"},((U=R.hole)==null?void 0:U.content)||"")])])]),(H=R.hole)!=null&&H.showEffect?ve("div",{class:"hit-effect"},R.hole.state==="hit"?"‚≠ê":"‚ùå"):null])}}}),h=s,c=i,l=B(()=>{var R;return((R=h.gameData)==null?void 0:R.lives)||3}),d=B(()=>{var R;return((R=h.gameData)==null?void 0:R.timeLimit)||60}),v=B(()=>{var R;return((R=h.gameData)==null?void 0:R.targetScore)||100}),m=u([]),k=u(!1),q=u(null),T=u(0),_=u(!1),b=u(0),y=u(100),f=u(null),p=u(null),w=u(0),$=u(0),C=B(()=>{var R,M;return((M=(R=h.gameData)==null?void 0:R.questions)==null?void 0:M.length)>0?"question":"category"}),D=B(()=>{var R;return((R=h.gameData)==null?void 0:R.questions)||[]}),S=B(()=>D.value[T.value]),W=B(()=>{var R,M,P,j;return C.value==="question"?((R=S.value)==null?void 0:R.q)||((M=S.value)==null?void 0:M.question)||"Find the answer!":((P=h.gameData)==null?void 0:P.targetCategory)||((j=h.gameData)==null?void 0:j.prompt)||"Tap correct items!"}),F=B(()=>{const R=w.value+$.value;return R===0?0:Math.round(w.value/R*100)}),se=()=>{m.value=Array.from({length:4},()=>({active:!1,content:"",isCorrect:!1,state:"idle",showEffect:!1,timer:null}))},V=()=>{var H;if(!k.value)return;const R=m.value.map((te,le)=>te.active?null:le).filter(te=>te!==null);if(R.length===0)return;const M=R[Math.floor(Math.random()*R.length)],P=m.value[M];let j="",I=!1;if(C.value==="question"){const te=S.value;if(!te)return;if(I=Math.random()>.4,I)j=te.a||te.answer||te.correctAnswer||"‚úì";else{const le=te.wrong||te.wrongAnswers||te.distractors||[];j=le.length>0?le[Math.floor(Math.random()*le.length)]:"‚úó"}}else{const te=((H=h.gameData)==null?void 0:H.items)||[];if(te.length===0)return;const le=te[Math.floor(Math.random()*te.length)];typeof le=="string"?(j=le,I=!0):(j=le.text||le.word||le.label||"?",I=le.isCorrect??le.correct??!0)}P.content=j,P.isCorrect=I,P.active=!0,P.state="idle";const U=Math.max(ql,Ll-h.score*15);P.timer=setTimeout(()=>{P.active&&P.state==="idle"&&(P.active=!1)},U)},Y=R=>{const M=m.value[R];!M||!M.active||M.state!=="idle"||(clearTimeout(M.timer),M.showEffect=!0,M.isCorrect?(M.state="hit",w.value++,c("score-change",10),c("item-collected",{isCorrect:!0}),C.value==="question"&&setTimeout(()=>ee(),400)):(M.state="miss",$.value++,c("score-change",-5),c("life-lost"),c("item-collected",{isCorrect:!1})),setTimeout(()=>{M.active=!1,M.showEffect=!1,M.state="idle"},350))},ee=()=>{T.value<D.value.length-1?(T.value++,m.value.forEach(R=>{R.active=!1,clearTimeout(R.timer)})):ce()},ae=()=>{const R=h.score/v.value*100;return R>=100?3:R>=70?2:R>=40?1:0},ce=()=>{fe(),_.value=!0,b.value=ae(),y.value=100;const R=Date.now();f.value=setInterval(()=>{y.value=Math.max(0,100-(Date.now()-R)/Bt*100)},50),p.value=setTimeout(()=>{clearInterval(f.value),c("game-complete",{score:h.score,stars:b.value,accuracy:F.value,correctHits:w.value,wrongHits:$.value,completed:h.score>=v.value*.4})},Bt)},ie=()=>{_.value=!1,k.value=!0,w.value=0,$.value=0,T.value=0,se(),c("game-started"),setTimeout(()=>{q.value=setInterval(V,900)},500)},fe=()=>{k.value=!1,q.value&&(clearInterval(q.value),q.value=null),m.value.forEach(R=>{R.timer&&clearTimeout(R.timer)})};return xe(()=>h.score,R=>{R>=v.value&&k.value&&ce()}),xe(()=>h.lives,R=>{R<=0&&k.value&&ce()}),xe(()=>h.timeRemaining,R=>{R<=0&&k.value&&ce()}),Ne(()=>se()),at(()=>{fe(),p.value&&clearTimeout(p.value),f.value&&clearInterval(f.value)}),(R,M)=>(t(),n("div",Jn,[k.value?(t(),n(J,{key:0},[e("div",Kn,[(t(),n("div",{class:"question-card",key:T.value},[M[8]||(M[8]=e("span",{class:"question-label"},"Question",-1)),e("p",el,r(W.value),1)])),e("div",tl,[e("div",sl,[M[9]||(M[9]=e("span",{class:"stat-icon"},"üéØ",-1)),e("span",al,r(s.score),1)]),e("div",nl,[M[10]||(M[10]=e("span",{class:"stat-icon"},"‚è±Ô∏è",-1)),e("span",ll,r(s.timeRemaining)+"s",1)]),e("div",ol,[(t(!0),n(J,null,K(l.value,P=>(t(),n("span",{key:P,class:"heart"},r(P<=s.lives?"‚ù§Ô∏è":"ü§ç"),1))),128))])])]),e("div",rl,[e("div",il,[e("div",{class:"mole-cell",onClick:M[0]||(M[0]=P=>Y(0)),onTouchstart:M[1]||(M[1]=Se(P=>Y(0),["prevent"]))},[me(ne(a),{hole:m.value[0]},null,8,["hole"])],32),e("div",{class:"mole-cell",onClick:M[2]||(M[2]=P=>Y(1)),onTouchstart:M[3]||(M[3]=Se(P=>Y(1),["prevent"]))},[me(ne(a),{hole:m.value[1]},null,8,["hole"])],32),e("div",{class:"mole-cell",onClick:M[4]||(M[4]=P=>Y(2)),onTouchstart:M[5]||(M[5]=Se(P=>Y(2),["prevent"]))},[me(ne(a),{hole:m.value[2]},null,8,["hole"])],32),e("div",{class:"mole-cell",onClick:M[6]||(M[6]=P=>Y(3)),onTouchstart:M[7]||(M[7]=Se(P=>Y(3),["prevent"]))},[me(ne(a),{hole:m.value[3]},null,8,["hole"])],32)])])],64)):_.value?(t(),n("div",bl,[e("div",xl,[e("div",yl,r(b.value>=3?"üèÜ":b.value>=2?"üéâ":b.value>=1?"üëç":"üí™"),1),e("h2",kl,r(b.value>=3?"Perfect!":b.value>=2?"Great Job!":b.value>=1?"Good Try!":"Keep Going!"),1),e("div",wl,r(s.score),1),M[24]||(M[24]=e("div",{class:"gameover-score-label"},"points",-1)),e("div",_l,[(t(),n(J,null,K(3,P=>e("span",{key:P,class:z(["star",P<=b.value?"star-filled":"star-empty"])},"‚òÖ",2)),64))]),e("div",$l,[e("div",Cl,[e("div",Sl,r(w.value),1),M[19]||(M[19]=e("div",{class:"gstat-label"},"Correct",-1))]),M[22]||(M[22]=e("div",{class:"gstat-divider"},null,-1)),e("div",Tl,[e("div",Ml,r($.value),1),M[20]||(M[20]=e("div",{class:"gstat-label"},"Wrong",-1))]),M[23]||(M[23]=e("div",{class:"gstat-divider"},null,-1)),e("div",Al,[e("div",Il,r(F.value)+"%",1),M[21]||(M[21]=e("div",{class:"gstat-label"},"Accuracy",-1))])]),e("div",Dl,[e("div",{class:"progress-fill",style:ue({width:y.value+"%"})},null,4)]),e("p",jl,"Next in "+r(Math.ceil(y.value/20))+"s",1)])])):(t(),n("div",cl,[e("div",ul,[M[18]||(M[18]=We('<div class="start-mole" data-v-daa656e9><div class="mole-preview" data-v-daa656e9><div class="preview-body" data-v-daa656e9></div><div class="preview-ear preview-ear-l" data-v-daa656e9></div><div class="preview-ear preview-ear-r" data-v-daa656e9></div><div class="preview-eye preview-eye-l" data-v-daa656e9></div><div class="preview-eye preview-eye-r" data-v-daa656e9></div><div class="preview-nose" data-v-daa656e9></div><div class="preview-cheek preview-cheek-l" data-v-daa656e9></div><div class="preview-cheek preview-cheek-r" data-v-daa656e9></div></div></div><h1 class="start-title" data-v-daa656e9>Whack-a-Mole!</h1><p class="start-subtitle" data-v-daa656e9>Tap moles with the <strong data-v-daa656e9>correct answer</strong></p>',3)),e("div",dl,[e("div",vl,[M[11]||(M[11]=e("span",{class:"info-icon"},"‚ù§Ô∏è",-1)),M[12]||(M[12]=e("span",{class:"info-label"},"Lives",-1)),e("span",ml,r(l.value),1)]),e("div",gl,[M[13]||(M[13]=e("span",{class:"info-icon"},"‚è±Ô∏è",-1)),M[14]||(M[14]=e("span",{class:"info-label"},"Time",-1)),e("span",pl,r(d.value)+"s",1)]),e("div",fl,[M[15]||(M[15]=e("span",{class:"info-icon"},"üéØ",-1)),M[16]||(M[16]=e("span",{class:"info-label"},"Goal",-1)),e("span",hl,r(v.value),1)])]),e("button",{class:"start-button",onClick:ie,onTouchend:Se(ie,["prevent"])},M[17]||(M[17]=[e("span",{class:"button-text"},"Play Now",-1),e("span",{class:"button-icon"},"‚ñ∂",-1)]),32)])]))],512))}},Wl=pe(El,[["__scopeId","data-v-daa656e9"]]),Bl={class:"lightning-round-game"},Pl={key:0,class:"question-container"},zl={class:"question-number"},Rl={class:"question-card"},Nl={class:"question-text"},Fl={class:"options-grid"},Vl=["disabled","onClick"],Ol={class:"question-timer"},Gl={class:"game-instructions"},Hl={__name:"LightningRound",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(s,{emit:i}){const a=s,h=i,c=u(0),l=u(!1),d=u(null),v=u(""),m=u(""),k=u(10),q=u(null),T=u(!0),_=B(()=>{var W;return((W=a.gameData)==null?void 0:W.instructions)||"Answer as fast as you can!"}),b=B(()=>{var W,F;return((W=a.gameData)==null?void 0:W.questions)||((F=a.gameData)==null?void 0:F.items)||[]}),y=B(()=>c.value<b.value.length?b.value[c.value]:null),f=B(()=>k.value/10*100),p=()=>{k.value=10,q.value=setInterval(()=>{k.value--,k.value<=0&&(clearInterval(q.value),l.value||$())},1e3)},w=W=>{if(l.value||!T.value)return;l.value=!0,d.value=W,q.value&&clearInterval(q.value);const F=y.value,se=F.correctAnswer,V=W===se;let Y=0;V?(Y=10+Math.floor(k.value*2),v.value=`Correct! +${Y} points`,m.value="correct"):(Y=-5,v.value=`Wrong! The correct answer was: ${F.options[se]}`,m.value="incorrect",h("life-lost")),h("score-change",Y),h("item-collected",{isCorrect:V}),setTimeout(()=>{C()},2e3)},$=()=>{l.value=!0,d.value=null,v.value="Time's up!",m.value="timeout",h("life-lost"),h("score-change",-5),h("item-collected",{isCorrect:!1}),setTimeout(()=>{C()},2e3)},C=()=>{c.value++,c.value>=b.value.length?(h("game-complete",{reason:"all-questions-answered"}),T.value=!1):(l.value=!1,d.value=null,v.value="",m.value="",p())},D=W=>{var se;if(!l.value)return"";const F=(se=y.value)==null?void 0:se.correctAnswer;return W===d.value?W===F?"selected-correct":"selected-wrong":W===F?"show-correct":"disabled"},S=()=>{T.value=!1,q.value&&clearInterval(q.value)};return xe(()=>a.lives,W=>{W<=0&&S()}),xe(()=>a.timeRemaining,W=>{W<=0&&S()}),Ne(()=>{b.value.length>0&&(p(),h("game-started"))}),at(()=>{S()}),(W,F)=>(t(),n("div",Bl,[y.value?(t(),n("div",Pl,[e("div",zl," Question "+r(c.value+1)+" / "+r(b.value.length),1),e("div",Rl,[e("h3",Nl,r(y.value.question),1),e("div",Fl,[(t(!0),n(J,null,K(y.value.options,(se,V)=>(t(),n("button",{key:V,class:z(["option-btn",D(V)]),disabled:l.value,onClick:Y=>w(V)},r(se),11,Vl))),128))]),l.value?(t(),n("div",{key:0,class:z(["feedback",m.value])},r(v.value),3)):L("",!0)]),e("div",Ol,[e("div",{class:"timer-bar",style:ue({width:`${f.value}%`})},null,4)])])):L("",!0),e("div",Gl,r(_.value),1)]))}},Ql=pe(Hl,[["__scopeId","data-v-632b2750"]]),Ul={class:"pattern-builder-game"},Yl={class:"pattern-display"},Xl={class:"pattern-items"},Zl={class:"player-pattern"},Jl={class:"pattern-items"},Kl=["onClick"],eo={key:0,class:"pattern-item empty"},to={class:"available-items"},so={class:"items-grid"},ao=["disabled","onClick"],no={class:"game-instructions"},lo={__name:"PatternBuilder",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(s,{emit:i}){const a=s,h=i,c=u([]),l=u([]),d=u([]),v=u(0),m=u(!1),k=u(!0),q=B(()=>{var D;return((D=a.gameData)==null?void 0:D.instructions)||"Build the pattern using the items below!"}),T=B(()=>{var D,S;return((D=a.gameData)==null?void 0:D.items)||((S=a.gameData)==null?void 0:S.patterns)||[]}),_=()=>{if(v.value>=T.value.length){h("game-complete",{reason:"all-patterns-completed"}),k.value=!1;return}const D=T.value[v.value];Array.isArray(D)?c.value=[...D]:D.pattern?c.value=[...D.pattern]:c.value=["A","B","C"],l.value=[],m.value=!1;const S=[...c.value];D.distractors&&S.push(...D.distractors);const W=b(S);d.value=W.map((F,se)=>({id:se,text:F,available:!0}))},b=D=>{const S=[...D];for(let W=S.length-1;W>0;W--){const F=Math.floor(Math.random()*(W+1));[S[W],S[F]]=[S[F],S[W]]}return S},y=D=>{!D.available||!k.value||l.value.length<c.value.length&&(l.value.push(D.text),D.available=!1)},f=D=>{if(!k.value||m.value)return;const S=l.value[D];l.value.splice(D,1);const W=d.value.find(F=>F.text===S&&!F.available);W&&(W.available=!0)},p=()=>{if(l.value.length!==c.value.length)return;if(m.value=!0,l.value.every((S,W)=>S===c.value[W])){const S=25+c.value.length*5;h("score-change",S),h("item-collected",{isCorrect:!0}),setTimeout(()=>{v.value++,_()},1500)}else h("score-change",-10),h("life-lost"),h("item-collected",{isCorrect:!1}),setTimeout(()=>{w()},2e3)},w=()=>{l.value=[],m.value=!1,d.value.forEach(D=>{D.available=!0})},$=D=>m.value?l.value[D]===c.value[D]:!1,C=D=>m.value?l.value[D]!==c.value[D]:!1;return xe(()=>a.lives,D=>{D<=0&&(k.value=!1)}),xe(()=>a.timeRemaining,D=>{D<=0&&(k.value=!1)}),Ne(()=>{T.value.length>0&&(_(),h("game-started"))}),(D,S)=>(t(),n("div",Ul,[e("div",Yl,[S[0]||(S[0]=e("h3",{class:"pattern-title"},"Build this pattern:",-1)),e("div",Xl,[(t(!0),n(J,null,K(c.value,(W,F)=>(t(),n("div",{key:`target-${F}`,class:"pattern-item target"},r(W),1))),128))])]),e("div",Zl,[S[2]||(S[2]=e("h3",{class:"pattern-title"},"Your pattern:",-1)),e("div",Jl,[(t(!0),n(J,null,K(l.value,(W,F)=>(t(),n("div",{key:`player-${F}`,class:z(["pattern-item player",{correct:$(F),wrong:C(F)}]),onClick:se=>f(F)},[ge(r(W)+" ",1),S[1]||(S[1]=e("span",{class:"remove-icon"},"√ó",-1))],10,Kl))),128)),l.value.length<c.value.length?(t(),n("div",eo," ? ")):L("",!0)])]),e("div",to,[S[3]||(S[3]=e("h3",{class:"items-title"},"Drag or click items:",-1)),e("div",so,[(t(!0),n(J,null,K(d.value,(W,F)=>(t(),n("button",{key:`available-${F}`,class:"item-btn",disabled:!W.available,onClick:se=>y(W)},r(W.text),9,ao))),128))])]),l.value.length===c.value.length?(t(),n("button",{key:0,class:"check-btn",onClick:p}," Check Pattern ")):L("",!0),e("div",no,r(q.value),1)]))}},oo=pe(lo,[["__scopeId","data-v-9d121a37"]]),ro={class:"flex flex-col items-center justify-center min-h-[400px] w-full bg-slate-50 p-6 rounded-2xl border border-slate-200 shadow-sm relative overflow-hidden"},io={key:0,class:"w-1 h-1 bg-slate-200 rounded-full mx-auto mt-[40%]"},co={class:"relative w-4/5 h-4/5"},st=48,vt=8,$t=10,uo={__name:"MazeRunner",props:{grid:{type:Array,default:()=>[[1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,0,0,0,0,1],[1,0,1,0,1,0,1,1,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,0,1,0,1],[1,1,1,1,1,1,1,1,0,1],[1,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1]]},robotPos:{type:Object,default:()=>({x:1,y:1})},goalPos:{type:Object,default:()=>({x:8,y:7})}},setup(s){const i=s,a=u({...i.robotPos}),h=u(!1),c=B(()=>i.robotPos||a.value),l=B(()=>i.goalPos),d=B(()=>st*$t+vt*($t-1)+32),v=B(()=>st*i.grid.length+vt*(i.grid.length-1)+32),m=B(()=>i.grid.flat()),k=q=>{if(!q)return{};const T=16+q.x*(st+vt),_=16+q.y*(st+vt);return{width:`${st}px`,height:`${st}px`,transform:`translate(${T}px, ${_}px)`}};return xe(()=>i.robotPos,()=>{h.value=!0,setTimeout(()=>h.value=!1,500)},{deep:!0}),(q,T)=>(t(),n("div",ro,[T[2]||(T[2]=We('<div class="absolute top-0 left-0 w-full h-full opacity-30 pointer-events-none bg-[radial-gradient(#e0e7ff_1px,transparent_1px)] [background-size:16px_16px]" data-v-357da0eb></div><div class="relative z-10 mb-6 flex justify-between w-full max-w-md px-4" data-v-357da0eb><div class="flex flex-col" data-v-357da0eb><span class="text-xs font-bold tracking-wider text-slate-400 uppercase" data-v-357da0eb>Current Level</span><span class="text-2xl font-black text-slate-800" data-v-357da0eb>01</span></div><div class="flex flex-col items-end" data-v-357da0eb><span class="text-xs font-bold tracking-wider text-slate-400 uppercase" data-v-357da0eb>Status</span><span class="flex items-center gap-2 text-sm font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full" data-v-357da0eb><span class="relative flex h-2 w-2" data-v-357da0eb><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75" data-v-357da0eb></span><span class="relative inline-flex rounded-full h-2 w-2 bg-indigo-500" data-v-357da0eb></span></span> Active </span></div></div>',2)),e("div",{class:"relative bg-white p-4 rounded-xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100 select-none",style:ue({width:d.value+"px",height:v.value+"px"})},[e("div",{class:"grid w-full h-full",style:ue({gridTemplateColumns:`repeat(${$t}, 1fr)`,gap:vt+"px"})},[(t(!0),n(J,null,K(m.value,(_,b)=>(t(),n("div",{key:b,class:z(["rounded-md transition-colors duration-300",[_===1?"bg-slate-800 shadow-inner":"bg-slate-50 border border-slate-100/50"]])},[_===0?(t(),n("div",io)):L("",!0)],2))),128))],4),e("div",{class:"absolute flex items-center justify-center text-emerald-500 animate-bounce",style:ue(k(l.value))},T[0]||(T[0]=[e("svg",{class:"w-6 h-6 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 21v-8a2 2 0 012-2h14a2 2 0 012 2v8M10 9H3V5a2 2 0 012-2h4a2 2 0 012 2v4zm10-4h-4m0 0v4m0-4h4a2 2 0 012 2v4m-6 4v.01"})],-1)]),4),e("div",{class:"absolute z-20 flex items-center justify-center transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)",style:ue(k(c.value))},[e("div",co,[e("div",{class:z(["absolute bottom-0 left-1/2 -translate-x-1/2 w-3/4 h-2 bg-black/20 blur-sm rounded-full transition-all duration-500",{"scale-75 opacity-10":h.value,"scale-100 opacity-20":!h.value}])},null,2),T[1]||(T[1]=We('<div class="w-full h-full bg-indigo-600 rounded-xl shadow-lg shadow-indigo-500/30 flex items-center justify-center text-white relative animate-float" data-v-357da0eb><svg class="w-3/5 h-3/5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-357da0eb><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-357da0eb></path></svg><div class="absolute -top-1 w-1 h-2 bg-indigo-400 rounded-full" data-v-357da0eb></div><div class="absolute -top-2 w-2 h-2 bg-red-400 rounded-full animate-pulse" data-v-357da0eb></div></div>',1))])],4)],4),T[3]||(T[3]=We('<div class="mt-6 flex gap-4 text-xs font-mono text-slate-400" data-v-357da0eb><div class="flex items-center gap-1" data-v-357da0eb><span class="px-2 py-1 bg-white border rounded shadow-sm" data-v-357da0eb>WASD</span> to move</div><div class="flex items-center gap-1" data-v-357da0eb><span class="px-2 py-1 bg-white border rounded shadow-sm" data-v-357da0eb>SPACE</span> to jump</div></div>',1))]))}},vo=pe(uo,[["__scopeId","data-v-357da0eb"]]),mo={key:0,class:"game-loading"},go={__name:"GameContainer",props:{gameData:{type:Object,required:!0},gameType:{type:String,required:!0},userId:{type:String,required:!0},lessonId:{type:String,required:!0},stepIndex:{type:Number,required:!0}},emits:["game-complete","game-exit"],setup(s,{emit:i}){const a=s,h=i,c=u(!1),l=u(!1),d=u(0),v=u(3),m=u(60),k=u(0),q=u(0),T=u(0),_=u(0),b=u(null),y=B(()=>({"basket-catch":Wt,"memory-cards":Zn,"whack-a-mole":Wl,"lightning-round":Ql,"pattern-builder":oo,"maze-runner":vo})[a.gameType]||Wt),f=B(()=>a.gameData.timeLimit||60),p=B(()=>a.gameData.lives||3),w=B(()=>q.value===0?0:Math.round(T.value/q.value*100)),$=B(()=>k.value?Math.floor((Date.now()-k.value)/1e3):0),C=()=>{c.value=!0,k.value=Date.now(),v.value=p.value,m.value=f.value,d.value=0,q.value=0,T.value=0,_.value=0,D()},D=()=>{b.value=setInterval(()=>{m.value>0?m.value--:clearInterval(b.value)},1e3)},S=V=>{d.value=Math.max(0,d.value+V)},W=()=>{v.value=Math.max(0,v.value-1)},F=({isCorrect:V})=>{q.value++,V?T.value++:_.value++},se=async(V={})=>{b.value&&clearInterval(b.value);try{l.value=!0,await xs({userId:a.userId,lessonId:a.lessonId,stepIndex:a.stepIndex,gameType:a.gameType,score:d.value,accuracy:w.value,timeSpent:$.value,itemsCollected:q.value,correctItems:T.value,wrongItems:_.value,completed:V.completed||!1,metadata:{stars:V.stars||0,livesRemaining:v.value,...V}})}catch(Y){console.error("Error submitting game results:",Y)}finally{l.value=!1}h("game-complete",{score:d.value,stars:V.stars||0,completed:V.completed||!1,accuracy:w.value})};return at(()=>{b.value&&clearInterval(b.value)}),(V,Y)=>(t(),n("div",{class:z(["game-container",`game-${s.gameType}`])},[(t(),de(bs(y.value),{"game-data":s.gameData,score:d.value,lives:v.value,"time-remaining":m.value,onScoreChange:S,onLifeLost:W,onGameComplete:se,onItemCollected:F,onGameStarted:C},null,40,["game-data","score","lives","time-remaining"])),l.value?(t(),n("div",mo,Y[0]||(Y[0]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Saving results...",-1)]))):L("",!0)],2))}},po=pe(go,[["__scopeId","data-v-b0986cba"]]),fo={class:"histogram-wrapper"},ho={class:"histogram-header"},bo={class:"histogram-title"},xo={key:0,class:"histogram-description"},yo={class:"chart-container"},ko={class:"chart-inner"},wo={class:"chart-grid"},_o={class:"grid-label"},$o={class:"bars-container"},Co=["onClick"],So={class:"bar-value"},To={class:"bar-label"},Mo={class:"slider-section"},Ao={class:"slider-header"},Io={class:"slider-current-value"},Do={class:"slider-container"},jo={class:"slider-min"},Lo={class:"slider-track-wrapper"},qo=["min","max","step","disabled"],Eo={class:"slider-track"},Wo={class:"slider-max"},Bo=["disabled"],Po={class:"feedback-icon"},zo={class:"feedback-text"},Ro={__name:"ModernHistogram",props:{title:String,description:String,data:{type:Object,required:!0},correctValue:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1}},emits:["complete","next"],setup(s,{emit:i}){const a=s,h=i,c=u(Math.floor((a.max+a.min)/2)),l=u(-1),d=u(""),v=u(!1),m=u(!1),k=B(()=>a.data||{labels:[],values:[]}),q=B(()=>Math.max(...k.value.values)),T=B(()=>(c.value-a.min)/(a.max-a.min)*100),_=f=>{c.value=Number(f.target.value)},b=f=>{const p=k.value.labels.indexOf(f);l.value=p,c.value=parseInt(f.replace("k","000"))},y=()=>{if(m.value)return;const f=a.step||100;Math.abs(c.value-a.correctValue)<=f?(v.value=!0,d.value="Perfect! You found the correct value!",m.value=!0,h("complete",!0),setTimeout(()=>{h("next")},2e3)):(v.value=!1,d.value="Not quite. Try again!",setTimeout(()=>{d.value=""},2e3))};return xe(()=>a.correctValue,()=>{c.value=Math.floor((a.max+a.min)/2),l.value=-1,d.value="",v.value=!1,m.value=!1}),(f,p)=>(t(),n("div",fo,[e("div",ho,[e("h3",bo,r(s.title||"Data Visualization"),1),s.description?(t(),n("p",xo,r(s.description),1)):L("",!0)]),e("div",yo,[e("div",ko,[e("div",wo,[(t(),n(J,null,K(5,w=>e("div",{key:w,class:"grid-line"},[e("span",_o,r(Math.round(q.value/4*(5-w))),1)])),64))]),e("div",$o,[(t(!0),n(J,null,K(k.value.values,(w,$)=>(t(),n("div",{key:$,class:"bar-wrapper",onClick:C=>b(k.value.labels[$])},[e("div",{class:z(["bar",{"bar-selected":l.value===$}]),style:ue({height:`${w/q.value*100}%`})},[e("div",So,r(w),1)],6),e("div",To,r(k.value.labels[$]),1)],8,Co))),128))])])]),e("div",Mo,[e("div",Ao,[p[1]||(p[1]=e("span",{class:"slider-label"},"Select Value",-1)),e("span",Io,r(c.value),1)]),e("div",Do,[e("span",jo,r(s.min),1),e("div",Lo,[Ee(e("input",{type:"range",min:s.min,max:s.max,step:s.step,"onUpdate:modelValue":p[0]||(p[0]=w=>c.value=w),class:"slider-input",disabled:m.value,onInput:_},null,40,qo),[[Re,c.value,void 0,{number:!0}]]),e("div",Eo,[e("div",{class:"slider-fill",style:ue({width:T.value+"%"})},null,4)])]),e("span",Wo,r(s.max),1)]),e("button",{onClick:y,disabled:m.value,class:z(["submit-button",{"submit-button-success":m.value}])},r(m.value?"‚úì Correct!":"Submit Answer"),11,Bo),me($e,{name:"fade-slide"},{default:ye(()=>[d.value?(t(),n("div",{key:0,class:z(["feedback",{"feedback-success":v.value,"feedback-error":!v.value}])},[e("span",Po,r(v.value?"üéØ":"üí´"),1),e("span",zo,r(d.value),1)],2)):L("",!0)]),_:1})])]))}},No=pe(Ro,[["__scopeId","data-v-7df8c6f2"]]),Fo={class:"map-wrapper"},Vo={class:"map-card"},Oo={class:"map-header"},Go={class:"map-title"},Ho={class:"map-description"},Qo={class:"map-content"},Uo={class:"map-decoration"},Yo={class:"lat-lines"},Xo={class:"lon-lines"},Zo=["onClick"],Jo={class:"marker-pin"},Ko={class:"pin-head"},er={key:0,class:"pin-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},tr={key:1,class:"pin-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},sr={key:2,class:"pin-dot"},ar={class:"marker-label"},nr={class:"feedback-section"},lr={class:"feedback-icon-wrapper"},or={class:"feedback-emoji"},rr={class:"feedback-content"},ir={class:"feedback-title"},cr={class:"feedback-message"},ur={key:1,class:"feedback-idle"},dr={key:0,class:"action-buttons"},vr=5,mr={__name:"ModernMap",props:{image:String,title:{type:String,default:"Find the Location"},description:{type:String,default:"Select the correct location marker on the map"},markers:{type:Array,required:!0}},emits:["next","complete"],setup(s,{emit:i}){const a=i,h=u(null),c=u(!1),l=u(!1),d=u(0),v=u(null),m=u({show:!1,x:0,y:0}),k=_=>{if(!l.value){if(v.value){const b=v.value.getBoundingClientRect(),y=_.x/100*b.width,f=_.y/100*b.height;m.value={show:!0,x:y,y:f},setTimeout(()=>{m.value.show=!1},600)}d.value++,h.value=_.id,c.value=!0,_.isCorrect?(l.value=!0,a("complete",!0)):(l.value=!1,a("complete",!1),setTimeout(()=>{l.value||(c.value=!1,h.value=null)},2500))}},q=()=>{a("next")},T=()=>{a("complete",!1),a("next")};return(_,b)=>(t(),n("div",Fo,[e("div",Vo,[e("div",Oo,[b[0]||(b[0]=e("div",{class:"header-badge"},[e("span",{class:"badge-icon"},"üó∫Ô∏è"),e("span",{class:"badge-text"},"Geography Challenge")],-1)),e("h2",Go,r(s.title),1),e("p",Ho,r(s.description),1)]),e("div",{class:"map-container",ref_key:"mapContainer",ref:v},[b[5]||(b[5]=e("div",{class:"map-grid"},null,-1)),e("div",Qo,[e("div",Uo,[e("div",Yo,[(t(),n(J,null,K(8,y=>e("div",{key:"lat-"+y,class:"lat-line",style:ue({top:y*12.5+"%"})},null,4)),64))]),e("div",Xo,[(t(),n(J,null,K(12,y=>e("div",{key:"lon-"+y,class:"lon-line",style:ue({left:y*8.33+"%"})},null,4)),64))])]),b[4]||(b[4]=We('<div class="region-display" data-v-bbdbab1e><svg viewBox="0 0 800 500" class="region-svg" data-v-bbdbab1e><defs data-v-bbdbab1e><linearGradient id="landGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-bbdbab1e><stop offset="0%" style="stop-color:#10b981;stop-opacity:0.1;" data-v-bbdbab1e></stop><stop offset="100%" style="stop-color:#059669;stop-opacity:0.15;" data-v-bbdbab1e></stop></linearGradient></defs><path d="M 200,100 L 700,100 L 700,400 L 500,450 L 200,400 Z" fill="url(#landGradient)" stroke="#10b981" stroke-width="2" stroke-dasharray="10,5" opacity="0.6" data-v-bbdbab1e></path><text x="450" y="260" font-size="48" fill="#94a3b8" opacity="0.3" text-anchor="middle" font-family="Arial, sans-serif" font-weight="bold" data-v-bbdbab1e> ASIA </text></svg></div>',1)),(t(!0),n(J,null,K(s.markers,y=>(t(),n("div",{key:y.id,class:z(["marker",{"marker-selected":h.value===y.id,"marker-correct":h.value===y.id&&y.isCorrect&&c.value,"marker-incorrect":h.value===y.id&&!y.isCorrect&&c.value,"marker-pulse":h.value===y.id}]),style:ue({left:y.x+"%",top:y.y+"%"}),onClick:f=>k(y)},[e("div",Jo,[e("div",Ko,[h.value===y.id&&c.value&&y.isCorrect?(t(),n("svg",er,b[1]||(b[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):h.value===y.id&&c.value&&!y.isCorrect?(t(),n("svg",tr,b[2]||(b[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(t(),n("div",sr))]),b[3]||(b[3]=e("div",{class:"pin-spike"},null,-1))]),e("div",ar,r(y.label),1)],14,Zo))),128)),m.value.show?(t(),n("div",{key:0,class:"click-ripple",style:ue({left:m.value.x+"px",top:m.value.y+"px"})},null,4)):L("",!0)]),b[6]||(b[6]=We('<div class="compass" data-v-bbdbab1e><div class="compass-rose" data-v-bbdbab1e><div class="compass-n" data-v-bbdbab1e>N</div><div class="compass-arrows" data-v-bbdbab1e><div class="compass-arrow compass-arrow-n" data-v-bbdbab1e>‚ñ≤</div><div class="compass-arrow compass-arrow-e" data-v-bbdbab1e>‚ñ∂</div><div class="compass-arrow compass-arrow-s" data-v-bbdbab1e>‚ñº</div><div class="compass-arrow compass-arrow-w" data-v-bbdbab1e>‚óÄ</div></div></div></div><div class="scale-indicator" data-v-bbdbab1e><div class="scale-line" data-v-bbdbab1e></div><span class="scale-text" data-v-bbdbab1e>~ 1000 km</span></div>',2))],512),e("div",nr,[me($e,{name:"slide-up",mode:"out-in"},{default:ye(()=>[c.value?(t(),n("div",{key:0,class:z(["feedback",{"feedback-success":l.value,"feedback-error":!l.value}])},[e("div",lr,[e("span",or,r(l.value?"üéØ":"üß≠"),1)]),e("div",rr,[e("h3",ir,r(l.value?"Perfect! You found it!":"Not quite the right location"),1),e("p",cr,r(l.value?"Excellent geographic knowledge! +15 XP":"Try selecting another marker on the map."),1)])],2)):(t(),n("div",ur,b[7]||(b[7]=[e("span",{class:"feedback-idle-icon"},"üìç",-1),e("span",{class:"feedback-idle-text"},"Click on a location marker to make your selection",-1)])))]),_:1}),c.value?(t(),n("div",dr,[l.value?(t(),n("button",{key:0,onClick:q,class:"action-button action-button-success"},b[8]||(b[8]=[e("svg",{class:"button-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1),ge(" Continue ")]))):d.value>=vr?(t(),n("button",{key:1,onClick:T,class:"action-button action-button-skip"},b[9]||(b[9]=[e("svg",{class:"button-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ge(" Skip & Continue ")]))):L("",!0)])):L("",!0)])])]))}},gr=pe(mr,[["__scopeId","data-v-bbdbab1e"]]),pr={class:"w-full max-w-6xl mx-auto"},fr={class:"bg-[linear-gradient(135deg,rgb(139,92,246),rgb(219,39,119))] rounded-3xl p-8 mb-8 shadow-2xl"},hr={class:"text-white font-black text-2xl mb-3"},br={class:"text-white/90 text-base"},xr={class:"flex flex-col lg:flex-row gap-8 items-start"},yr={class:"flex-1 order-2 lg:order-1"},kr={class:"bg-linear-to-br from-slate-900 to-slate-800 rounded-3xl p-8 shadow-2xl border-4 border-purple-500/30"},wr={key:0},_r={class:"grid grid-cols-5 gap-3 bg-slate-950/50 p-4 rounded-2xl"},$r={key:1,class:"aspect-square bg-white rounded-2xl relative shadow-inner"},Cr={class:"w-full h-full",viewBox:"0 0 200 200"},Sr=["d"],Tr=["cx","cy"],Mr={class:"text-base font-bold text-center"},Ar={class:"w-full lg:w-80 order-1 lg:order-2 space-y-6"},Ir={class:"bg-linear-to-br from-purple-600 to-pink-600 rounded-3xl p-8 shadow-2xl"},Dr={class:"flex flex-col items-center gap-3"},jr=["disabled"],Lr={class:"flex gap-3"},qr=["disabled"],Er=["disabled"],Wr=["disabled"],Br={__name:"ModernBlockCoding",props:{type:String,title:String,description:String,availableBlocks:{type:Array,default:()=>["move_forward","turn_left","turn_right"]},config:Object},emits:["complete","next"],setup(s,{emit:i}){const a=s,h=i;u([]);const c=u(!1),l=u({x:0,y:0}),d=u(0),v=u([]),m=u({x:100,y:100}),k=u(0),q=u(""),T=u(!1);B(()=>{var $;return a.type==="maze"||(($=a.config)==null?void 0:$.type)==="maze"});const _=B(()=>{var $;return(($=a.config)==null?void 0:$.goal)||{x:4,y:4}}),b=B(()=>{var $;return(($=a.config)==null?void 0:$.walls)||[]}),y=$=>{const C=$%5,D=Math.floor($/5);return l.value.x===C&&l.value.y===D?"bg-[linear-gradient(135deg,rgb(34,211,238),rgb(59,130,246))] shadow-2xl shadow-cyan-400/60 border-2 border-cyan-300/50":_.value.x===C&&_.value.y===D?"bg-[linear-gradient(135deg,rgb(251,191,36),rgb(245,158,11))] shadow-2xl shadow-amber-400/60 border-2 border-amber-300/50 animate-pulse":b.value.some(S=>S.x===C&&S.y===D)?"bg-[linear-gradient(135deg,rgb(88,28,135),rgb(126,34,206))] border-2 border-purple-700/30":"bg-slate-800/40 border border-slate-700/30 hover:bg-slate-700/40 transition-colors"},f=$=>{const C=$%5,D=Math.floor($/5);return l.value.x===C&&l.value.y===D?"ü§ñ":_.value.x===C&&_.value.y===D?"‚≠ê":""},p=async $=>{c.value=!0;const D={up:{dx:0,dy:-1},down:{dx:0,dy:1},left:{dx:-1,dy:0},right:{dx:1,dy:0}}[$],S=l.value.x+D.dx,W=l.value.y+D.dy;S>=0&&S<5&&W>=0&&W<5?b.value.some(F=>F.x===S&&F.y===W)?(q.value="üö´ Can't move there - wall!",setTimeout(()=>q.value="",1e3)):(l.value={x:S,y:W},l.value.x===_.value.x&&l.value.y===_.value.y&&(q.value="üéâ Goal reached! Perfect!",T.value=!0,setTimeout(()=>{h("complete",!0),h("next")},1500))):(q.value="üö´ Can't move outside the maze!",setTimeout(()=>q.value="",1e3)),setTimeout(()=>c.value=!1,300)},w=()=>{var $;l.value=(($=a.config)==null?void 0:$.start)||{x:0,y:0},d.value=0,v.value=[],m.value={x:100,y:100},k.value=0,q.value="",T.value=!1};return w(),Ne(()=>{console.log("ModernBlockCoding mounted with props:",a)}),($,C)=>{var D;return t(),n("div",pr,[e("div",fr,[e("h3",hr,r(s.title||"üéÆ Maze Challenge"),1),e("p",br,r(s.description||"Use the arrow buttons to navigate the robot to the golden star!"),1)]),e("div",xr,[e("div",yr,[e("div",kr,[C[4]||(C[4]=e("h4",{class:"text-purple-300 font-bold text-sm uppercase tracking-wider mb-6 text-center"},"üó∫Ô∏è Maze Grid",-1)),s.type==="maze"||((D=s.config)==null?void 0:D.type)==="maze"?(t(),n("div",wr,[e("div",_r,[(t(),n(J,null,K(25,(S,W)=>e("div",{key:W,class:z(["aspect-square rounded-xl flex items-center justify-center text-4xl transition-all duration-300 shadow-lg",y(W)])},r(f(W)),3)),64))])])):(t(),n("div",$r,[(t(),n("svg",Cr,[(t(!0),n(J,null,K(v.value,(S,W)=>(t(),n("path",{key:W,d:`M ${S.from.x} ${S.from.y} L ${S.to.x} ${S.to.y}`,stroke:"#8b5cf6","stroke-width":"2",fill:"none",class:"animate-draw"},null,8,Sr))),128)),m.value?(t(),n("circle",{key:0,cx:m.value.x,cy:m.value.y,r:"4",fill:"#ec4899",class:"animate-pulse"},null,8,Tr)):L("",!0)]))])),q.value?(t(),n("div",{key:2,class:z(["mt-6 p-4 rounded-2xl backdrop-blur-md shadow-lg",T.value?"bg-emerald-500/30 border-2 border-emerald-400 text-emerald-100":"bg-rose-500/30 border-2 border-rose-400 text-rose-100"])},[e("p",Mr,r(q.value),1)],2)):L("",!0)])]),e("div",Ar,[e("div",Ir,[C[5]||(C[5]=e("h4",{class:"text-white font-bold text-base uppercase tracking-wide mb-6 text-center"},"üéÆ Controls",-1)),e("div",Dr,[e("button",{onClick:C[0]||(C[0]=S=>p("up")),disabled:c.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," ‚¨Ü ",8,jr),e("div",Lr,[e("button",{onClick:C[1]||(C[1]=S=>p("left")),disabled:c.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," ‚¨Ö ",8,qr),e("button",{onClick:C[2]||(C[2]=S=>p("down")),disabled:c.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," ‚¨á ",8,Er),e("button",{onClick:C[3]||(C[3]=S=>p("right")),disabled:c.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," ‚û° ",8,Wr)])])]),e("button",{onClick:w,class:"w-full py-5 bg-linear-to-r from-amber-500 to-orange-500 text-white font-black text-lg rounded-2xl hover:shadow-2xl hover:scale-105 transition-all duration-200 active:scale-95 shadow-xl"}," üîÑ Reset ")])])])}}},Pr=pe(Br,[["__scopeId","data-v-c9536df7"]]),zr={class:"min-h-screen bg-white p-4 md:p-8"},Rr={class:"max-w-7xl mx-auto"},Nr={key:0,class:"grid lg:grid-cols-2 gap-6 md:gap-8 items-start"},Fr={class:"bg-white rounded-2xl border-2 border-purple-200 p-6 md:p-8 shadow-lg"},Vr={class:"space-y-1 mb-6 md:mb-8"},Or={class:"text-slate-900 text-base"},Gr={class:"font-semibold"},Hr={class:"text-purple-600 font-medium text-base"},Qr={class:"flex justify-center items-center py-8 md:py-12"},Ur={class:"relative"},Yr={width:"280",height:"280",viewBox:"0 0 280 280",class:"max-w-full h-auto"},Xr={x:"140",y:"268","text-anchor":"middle",class:"fill-green-600 font-bold text-sm"},Zr={class:"space-y-6"},Jr={class:"bg-white rounded-2xl border-2 border-purple-200 p-6 md:p-8 shadow-lg"},Kr={class:"space-y-3 md:space-y-4"},ei=["onClick"],ti={class:"font-semibold text-slate-900 mb-1.5"},si={class:"font-mono text-purple-600 text-sm"},ai={class:"pt-6"},ni=["disabled"],li={class:"flex items-start gap-3"},oi={class:"flex-shrink-0"},ri={key:0,class:"w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center"},ii={key:1,class:"w-6 h-6 rounded-full bg-red-500 flex items-center justify-center"},ci={key:0,class:"bg-white rounded-2xl border-2 border-purple-200 p-6 shadow-lg"},ui={class:"text-slate-700 text-sm md:text-base leading-relaxed"},di={__name:"GeometryExercise",props:{geometryData:{type:Object,required:!0},userAnswer:{type:Object,required:!0}},emits:["update:userAnswer","next-exercise","submit"],setup(s,{emit:i}){const a=s,h=i,c=u(null),l=u(null),d=u(!1),v=u(!1),m=B(()=>{var _;return((_=a.userAnswer)==null?void 0:_.side_b)&&l.value}),k=_=>{c.value=_,d.value=!1},q=_=>{l.value=_,d.value=!1},T=()=>{const _=a.geometryData.correctAnswer.side_b,b=a.geometryData.correctAnswer.formulaId,y=parseFloat(a.userAnswer.side_b),f=l.value;v.value=y===_&&f===b,d.value=!0,h("submit",{isCorrect:v.value,userSide:y,userFormula:f})};return xe(()=>a.geometryData,()=>{c.value=null,l.value=null,d.value=!1,v.value=!1},{deep:!0}),(_,b)=>(t(),n("div",zr,[e("div",Rr,[b[12]||(b[12]=e("div",{class:"text-center mb-8 md:mb-12"},[e("h1",{class:"text-3xl md:text-4xl font-bold text-slate-900 mb-2"},"Geometry Lesson: Square Properties"),e("p",{class:"text-purple-600 text-lg md:text-xl font-medium"}," Find the missing side length using the correct formula ")],-1)),s.geometryData.mode==="calculate"?(t(),n("div",Nr,[e("div",Fr,[b[6]||(b[6]=e("h3",{class:"text-purple-600 font-semibold text-lg mb-4 md:mb-6"},"Given Information",-1)),e("div",Vr,[e("p",Or,[b[3]||(b[3]=ge("Side a = ")),e("span",Gr,r(s.geometryData.given.side_a),1),b[4]||(b[4]=ge(" units"))]),e("p",Hr,"Angle = "+r(s.geometryData.given.angle)+"¬∞",1)]),e("div",Qr,[e("div",Ur,[(t(),n("svg",Yr,[b[5]||(b[5]=We('<defs><linearGradient id="rainbowGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#a855f7"></stop><stop offset="25%" stop-color="#ec4899"></stop><stop offset="50%" stop-color="#f97316"></stop><stop offset="75%" stop-color="#eab308"></stop><stop offset="100%" stop-color="#22c55e"></stop></linearGradient></defs><rect x="40" y="40" width="200" height="200" fill="white" stroke="url(#rainbowGradient)" stroke-width="4" rx="4"></rect><path d="M 40 220 L 55 220 L 55 240" fill="none" stroke="#eab308" stroke-width="2"></path><text x="62" y="233" class="text-xs fill-yellow-500 font-medium">90¬∞</text>',4)),e("text",Xr," side a = "+r(s.geometryData.given.side_a),1),e("g",{onClick:b[0]||(b[0]=y=>k("b")),class:"cursor-pointer transition-all duration-200"},[e("text",{x:"255",y:"140","text-anchor":"start",class:z(["font-bold text-sm",c.value==="b"?"fill-pink-600":"fill-pink-500 hover:fill-pink-600"])}," side b = ? ",2)])]))])])]),e("div",Zr,[e("div",Jr,[b[10]||(b[10]=e("h3",{class:"text-purple-600 font-semibold text-lg mb-6"},"Select the Formula You Used",-1)),e("div",Kr,[(t(!0),n(J,null,K(s.geometryData.formulas,y=>(t(),n("button",{key:y.id,onClick:f=>q(y.id),class:z(["w-full text-left p-4 md:p-5 rounded-xl border-2 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",l.value===y.id?"border-purple-500 bg-purple-50 shadow-md":"border-gray-200 hover:border-purple-300 bg-white hover:shadow-sm"])},[e("p",ti,r(y.name),1),e("p",si,r(y.formula),1)],10,ei))),128))]),e("div",ai,[b[7]||(b[7]=e("label",{class:"block text-sm font-medium text-slate-900 mb-2"},"Enter value for side b:",-1)),Ee(e("input",{type:"number","onUpdate:modelValue":b[1]||(b[1]=y=>s.userAnswer.side_b=y),placeholder:"Enter value...",class:"w-full p-3 md:p-4 rounded-lg border-2 border-purple-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all"},null,512),[[Re,s.userAnswer.side_b]])]),e("button",{onClick:T,disabled:!m.value,class:"w-full py-3.5 md:py-4 rounded-full font-semibold text-white text-base transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 mt-6 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg"}," Check Answer ",8,ni),me($e,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100"},{default:ye(()=>[d.value?(t(),n("div",{key:0,class:z(["mt-4 p-4 rounded-xl border-2",v.value?"bg-teal-50 border-teal-400":"bg-red-50 border-red-400"])},[e("div",li,[e("div",oi,[v.value?(t(),n("div",ri,b[8]||(b[8]=[e("span",{class:"text-white text-sm font-bold"},"‚úì",-1)]))):(t(),n("div",ii,b[9]||(b[9]=[e("span",{class:"text-white text-sm font-bold"},"‚úï",-1)])))]),e("div",null,[e("h4",{class:z(["font-bold text-base",v.value?"text-teal-900":"text-red-900"])},r(v.value?"Great job!":"Not quite right"),3),e("p",{class:z(["text-sm mt-1",v.value?"text-teal-800":"text-red-800"])},r(v.value?`Side b = ${s.geometryData.given.side_a} units`:"Review the hint and square property, then try again."),3)])])],2)):L("",!0)]),_:1}),me($e,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100"},{default:ye(()=>[v.value?(t(),n("button",{key:0,onClick:b[2]||(b[2]=y=>h("next-exercise")),class:"w-full py-3.5 md:py-4 rounded-full font-semibold text-white shadow-lg bg-purple-600 hover:bg-purple-700 transition-all transform hover:scale-[1.02] active:scale-[0.98] mt-4"}," Next ‚Üí ")):L("",!0)]),_:1})]),s.geometryData.hint?(t(),n("div",ci,[b[11]||(b[11]=e("h3",{class:"text-purple-600 font-semibold text-base mb-2 flex items-center gap-2"},[e("span",{class:"text-xl"},"üí°"),ge(" Hint ")],-1)),e("p",ui,r(s.geometryData.hint),1)])):L("",!0)])])):L("",!0)])]))}},vi={class:"data-analysis-container"},mi={class:"relative z-10"},gi={class:"da-header"},pi={class:"da-title"},fi={class:"da-chart-section"},hi={class:"da-chart"},bi={class:"da-bar-value"},xi={class:"da-tooltip"},yi={class:"da-bar-label"},ki={class:"da-axis-label"},wi={class:"da-input-section"},_i={class:"da-input-row"},$i=["disabled"],Ci={class:"da-input-unit"},Si={class:"da-button-wrapper"},Ti=["disabled"],Mi={class:"da-feedback-icon"},Ai={class:"da-feedback-content"},Ii={class:"da-feedback-title"},Di={class:"da-feedback-message"},ji={__name:"DataAnalysisStep",props:{step:{type:Object,default:()=>({prompt:"What is the average rainfall?",numericLabel:"Rainfall (mm)",numericKey:"rainfall",data:[{label:"January",rainfall:45},{label:"February",rainfall:38},{label:"March",rainfall:52}],correctAnswer:45,tolerance:.5})}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u(null),l=u(!1),d=u({show:!1,isCorrect:!1,message:""}),v=B(()=>a.step.numericLabel||"Value"),m=B(()=>a.step.numericKey||"value"),k=B(()=>(a.step.data||[]).map(f=>({label:f.label||"Item",value:f[m.value]||f.value||0}))),q=B(()=>k.value.length===0?100:Math.max(...k.value.map(y=>y.value))),T=y=>!y||!q.value?5:Math.max(10,y/q.value*100),_=y=>{const f=["bg-gradient-to-t from-blue-600 to-blue-400","bg-gradient-to-t from-cyan-600 to-cyan-400","bg-gradient-to-t from-teal-600 to-teal-400","bg-gradient-to-t from-emerald-600 to-emerald-400","bg-gradient-to-t from-green-600 to-green-400","bg-gradient-to-t from-lime-600 to-lime-400"];return f[y%f.length]},b=()=>{if(c.value===null)return;const y=a.step.tolerance||.5,f=a.step.correctAnswer,p=Math.abs(c.value-f)<=y;l.value=!0,d.value={show:!0,isCorrect:p,message:p?`Excellent! The correct answer is ${f.toFixed(2)}. Your calculation is spot on!`:`The correct answer is ${f.toFixed(2)}. You answered ${c.value.toFixed(2)}. Remember: Average = Sum of all values √∑ Number of values`},h("complete",p)};return(y,f)=>(t(),n("div",vi,[f[7]||(f[7]=e("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"bg-decoration bg-decoration-1"}),e("div",{class:"bg-decoration bg-decoration-2"})],-1)),e("div",mi,[e("div",gi,[f[2]||(f[2]=e("div",{class:"da-badge"},[e("span",{class:"da-badge-icon"},"üìä"),e("span",{class:"da-badge-text"},"Data Analysis")],-1)),e("h2",pi,r(s.step.prompt||"Analyze the Data"),1)]),e("div",fi,[e("div",hi,[(t(!0),n(J,null,K(k.value,(p,w)=>(t(),n("div",{key:w,class:"da-bar-wrapper"},[e("span",bi,r(p.value),1),e("div",{class:z(["da-bar bar-animate",_(w)]),style:ue({height:T(p.value)+"%",animationDelay:w*.1+"s"})},[e("div",xi,r(p.label)+": "+r(p.value)+" "+r(v.value),1)],6),e("span",yi,r(p.label),1)]))),128))]),e("div",ki,[e("span",null,r(v.value),1)])]),e("div",wi,[f[3]||(f[3]=e("label",{class:"da-input-label"}," Enter your answer: ",-1)),e("div",_i,[Ee(e("input",{type:"number","onUpdate:modelValue":f[0]||(f[0]=p=>c.value=p),disabled:l.value,step:.01,class:"da-input",placeholder:"0.00",onKeyup:zt(b,["enter"])},null,40,$i),[[Re,c.value,void 0,{number:!0}]]),e("span",Ci,r(v.value),1)]),f[4]||(f[4]=e("p",{class:"da-hint"}," üí° Tip: Calculate the average of all values (sum √∑ count) ",-1))]),e("div",Si,[l.value?(t(),n("button",{key:1,onClick:f[1]||(f[1]=p=>y.$emit("complete",!0)),class:"da-btn da-btn-success"},f[6]||(f[6]=[ge(" Continue "),e("svg",{class:"da-btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)]))):(t(),n("button",{key:0,onClick:b,disabled:c.value===null||c.value==="",class:"da-btn da-btn-primary"},f[5]||(f[5]=[e("svg",{class:"da-btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),ge(" Calculate ")]),8,Ti))]),me($e,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0 translate-y-4 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100"},{default:ye(()=>[d.value.show?(t(),n("div",{key:0,class:z(["da-feedback",d.value.isCorrect?"da-feedback-success":"da-feedback-error"])},[e("div",Mi,r(d.value.isCorrect?"üéØ":"üìê"),1),e("div",Ai,[e("h4",Ii,r(d.value.isCorrect?"Correct!":"Not quite"),1),e("p",Di,r(d.value.message),1)])],2)):L("",!0)]),_:1})])]))}},Li=pe(ji,[["__scopeId","data-v-fd05e49a"]]),qi={class:"interactive-step step-animate-in"},Ei={class:"text-lg text-gray-600 mb-6 leading-relaxed"},Wi={class:"flex flex-col sm:flex-row gap-8 justify-center items-center sm:items-start"},Bi={class:"flex flex-col items-center gap-3"},Pi={class:"text-sm font-bold text-gray-500 uppercase tracking-wide"},zi={class:"flex flex-col items-center gap-3"},Ri={class:"text-sm font-bold text-gray-500 uppercase tracking-wide"},Ni=["onClick","disabled","aria-label"],Fi={class:"mt-8"},Vi=["disabled"],Oi={__name:"FractionVisualStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u([]),l=u("idle"),d=u("");xe(()=>a.step,()=>{c.value=Array(a.step.userTotalBlocks).fill(!1),l.value="idle",d.value=""},{immediate:!0});const v=B(()=>c.value.filter(Boolean).length),m=b=>({gridTemplateColumns:`repeat(${b<=4?2:b<=9?3:4}, 1fr)`}),k=B(()=>l.value==="correct"?"‚úÖ Correct! (Equivalent)":l.value==="incorrect"?"‚ùå Try again":"Check Answer"),q=B(()=>l.value==="correct"?"bg-green-100 text-green-700 ring-2 ring-green-500 ring-offset-2 cursor-default":l.value==="incorrect"?"bg-red-100 text-red-700 ring-2 ring-red-500 ring-offset-2":"bg-gray-100 text-gray-900 hover:bg-gray-200"),T=b=>{l.value!=="correct"&&(c.value[b]=!c.value[b],l.value==="incorrect"&&(l.value="idle",d.value=""))},_=()=>{const b=a.step.targetNumerator/a.step.targetDenominator,y=v.value/a.step.userTotalBlocks;Math.abs(b-y)<1e-4?(l.value="correct",d.value=`üéâ Perfect! ${v.value}/${a.step.userTotalBlocks} = ${a.step.targetNumerator}/${a.step.targetDenominator}`,h("complete",!0)):(l.value="incorrect",d.value="Not quite equivalent. Try shading a different number of cells.",h("complete",!1),setTimeout(()=>{l.value="idle",d.value=""},2e3))};return(b,y)=>(t(),n("div",qi,[e("p",Ei,r(s.step.prompt),1),e("div",Wi,[e("div",Bi,[e("span",Pi," Target: "+r(s.step.targetNumerator)+"/"+r(s.step.targetDenominator),1),e("div",{class:"grid gap-2 bg-gray-100 p-3 rounded-xl border border-gray-200 shadow-inner",style:ue(m(s.step.targetDenominator))},[(t(!0),n(J,null,K(s.step.targetDenominator,(f,p)=>(t(),n("div",{key:"target-"+p,class:z(["w-12 h-12 rounded-lg border-2 transition-all duration-300",p<s.step.targetNumerator?"bg-blue-500 border-blue-600":"bg-white border-gray-200"])},null,2))),128))],4)]),y[0]||(y[0]=e("div",{class:"text-4xl font-light text-gray-300 self-center hidden sm:block"},"=",-1)),e("div",zi,[e("span",Ri," Your Answer: "+r(v.value)+"/"+r(s.step.userTotalBlocks),1),e("div",{class:"grid gap-2 bg-gray-100 p-3 rounded-xl border border-gray-200 shadow-inner cursor-pointer",style:ue(m(s.step.userTotalBlocks))},[(t(!0),n(J,null,K(c.value,(f,p)=>(t(),n("button",{key:"user-"+p,onClick:w=>T(p),disabled:l.value==="correct",class:z(["w-12 h-12 rounded-lg border-2 transition-all duration-200 transform focus:outline-none",{"bg-blue-500 border-blue-600 shadow-md":f,"bg-white border-gray-200 hover:border-blue-300 hover:scale-105 active:scale-95":!f&&l.value!=="correct"}]),"aria-label":`Toggle cell ${p+1}`},null,10,Ni))),128))],4)])]),e("div",Fi,[e("button",{onClick:_,disabled:l.value==="correct",class:z(["w-full py-4 rounded-xl font-bold text-lg transition-all shadow-sm",q.value])},r(k.value),11,Vi)]),d.value?(t(),n("div",{key:0,class:z(["step-feedback mt-4",l.value])},r(d.value),3)):L("",!0)]))}},Gi=pe(Oi,[["__scopeId","data-v-f6e3214c"]]),Hi={class:"interactive-step step-animate-in"},Qi={class:"text-lg text-gray-600 mb-6 leading-relaxed"},Ui={class:"bg-gray-100 rounded-xl overflow-hidden shadow-inner border border-gray-200 select-none"},Yi={viewBox:"0 0 400 300",class:"w-full h-auto"},Xi=["x1","y1","x2","y2"],Zi=["points"],Ji=["cx","cy"],Ki=["d"],ec=["cx","cy"],tc={class:"flex items-center gap-4 bg-white p-4 rounded-lg border border-gray-200 shadow-sm mt-6"},sc={key:0,class:"flex flex-col gap-4 mt-4"},ac={class:"flex gap-3 flex-wrap"},nc=["onClick","disabled"],lc=["disabled"],oc={__name:"GeometryPolyStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u(0),l=u(null),d=u("idle"),v=[{x:200,y:50},{x:350,y:250},{x:50,y:250}],m={x:200,y:183},k=B(()=>v.map(f=>({x:f.x+(m.x-f.x)*c.value,y:f.y+(m.y-f.y)*c.value}))),q=B(()=>k.value.map(f=>`${f.x},${f.y}`).join(" ")),T=f=>`M ${f.x+15} ${f.y} A 15 15 0 0 1 ${f.x} ${f.y-15}`,_=()=>{c.value<.8&&(d.value="idle",l.value=null)},b=f=>{d.value!=="correct"&&(l.value=f,d.value="idle")},y=()=>{if(!l.value)return;const f=l.value===a.step.correctShape;d.value=f?"correct":"incorrect",h("complete",f)};return(f,p)=>(t(),n("div",Hi,[e("p",Qi,r(s.step.prompt),1),e("div",Ui,[(t(),n("svg",Yi,[(t(!0),n(J,null,K(k.value,(w,$)=>(t(),n("line",{key:`ray-${$}`,x1:m.x,y1:m.y,x2:w.x,y2:w.y,stroke:"#e5e7eb","stroke-width":"2","stroke-dasharray":"4"},null,8,Xi))),128)),e("polygon",{points:q.value,fill:"rgba(59, 130, 246, 0.1)",stroke:"#3b82f6","stroke-width":"3"},null,8,Zi),(t(!0),n(J,null,K(k.value,(w,$)=>(t(),n("g",{key:`ext-${$}`},[e("circle",{cx:w.x,cy:w.y,r:"4",fill:"#3b82f6"},null,8,Ji),c.value>.8?(t(),n("path",{key:0,d:T(w),fill:"none",stroke:"#f59e0b","stroke-width":"3",opacity:"0.8"},null,8,Ki)):L("",!0)]))),128)),c.value===1?(t(),n("circle",{key:0,cx:m.x,cy:m.y,r:"15",fill:"none",stroke:"#f59e0b","stroke-width":"4"},null,8,ec)):L("",!0)]))]),e("div",tc,[p[1]||(p[1]=e("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Large",-1)),Ee(e("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":p[0]||(p[0]=w=>c.value=w),onInput:_,class:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"},null,544),[[Re,c.value,void 0,{number:!0}]]),p[2]||(p[2]=e("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Point",-1))]),me($e,{"enter-active-class":"transition-all duration-500","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-64 opacity-100","leave-active-class":"transition-all duration-500","leave-from-class":"max-h-64 opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:ye(()=>[c.value>.5?(t(),n("div",sc,[p[3]||(p[3]=e("p",{class:"font-semibold text-gray-800"}," What shape do the exterior angles form? ",-1)),e("div",ac,[(t(!0),n(J,null,K(s.step.shapes,w=>(t(),n("button",{key:w,onClick:$=>b(w),disabled:d.value==="correct",class:z(["flex-1 min-w-[80px] py-3 px-2 rounded-lg border font-medium transition-all",{"border-blue-500 bg-blue-50 text-blue-700 shadow-sm":l.value===w,"border-gray-200 bg-white text-gray-600 hover:bg-gray-50 hover:border-gray-300":l.value!==w}])},r(w),11,nc))),128))]),l.value?(t(),n("button",{key:0,onClick:y,disabled:d.value==="correct",class:z(["w-full py-3 rounded-lg font-bold text-white transition-all shadow-md",{"bg-green-500 cursor-default":d.value==="correct","bg-red-500 hover:bg-red-600":d.value==="incorrect","bg-zinc-900 hover:bg-zinc-800":d.value==="idle"}])},r(d.value==="correct"?"Correct!":d.value==="incorrect"?"Incorrect, look closer!":"Confirm"),11,lc)):L("",!0)])):L("",!0)]),_:1})]))}},rc={class:"interactive-step step-animate-in"},ic={class:"text-lg text-gray-600 mb-6 leading-relaxed"},cc={class:"grid grid-cols-1 sm:grid-cols-3 gap-8 items-end justify-items-center mb-8"},uc={class:"flex flex-col gap-3 w-full max-w-[150px]"},dc=["title"],vc={class:"flex justify-center"},mc={class:"chem-tube"},gc={class:"flex flex-col gap-1"},pc=["max","disabled"],fc={class:"flex flex-col items-center gap-4 w-full order-last sm:order-none"},hc={class:"relative"},bc={class:"chem-beaker"},xc={key:0,class:"chem-bubbles"},yc={key:0,class:"absolute -top-6 -right-8 text-6xl animate-bounce z-10"},kc=["disabled"],wc={class:"flex flex-col gap-3 w-full max-w-[150px]"},_c=["title"],$c={class:"flex justify-center"},Cc={class:"chem-tube"},Sc={class:"flex flex-col gap-1"},Tc=["max","disabled"],Mc={class:"bg-gray-50 rounded-xl p-4 text-sm flex flex-col sm:flex-row justify-between gap-2 border border-gray-100"},Ac={class:"text-gray-400"},Ic={__name:"ChemMixingStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u(0),l=u(0),d=u("idle"),v=u(""),m=B(()=>{var f;return((f=a.step.substances)==null?void 0:f[0])||{}}),k=B(()=>{var f;return((f=a.step.substances)==null?void 0:f[1])||{}}),q=(f,p)=>!p||f<=0?0:Math.min(f/p,1)*90,T=B(()=>d.value==="success"?a.step.successColor:d.value==="fail"?a.step.failColor:"#e5e7eb"),_=B(()=>d.value==="mixing"?"Mixing...":d.value==="success"?"Reaction Complete":"Start Reaction"),b=()=>{d.value!=="mixing"&&(d.value="idle",v.value="")},y=()=>{d.value!=="mixing"&&(d.value="mixing",v.value="Mixing... üß™",setTimeout(()=>{const f=a.step.tolerance||5,p=Math.abs((c.value||0)-m.value.targetVolume)<=f,w=Math.abs((l.value||0)-k.value.targetVolume)<=f;p&&w?(d.value="success",v.value="‚úÖ Perfect! The solution is stable and balanced.",h("complete",!0)):(d.value="fail",v.value="üí• The proportions were off! The reaction became unstable.",h("complete",!1))},1500))};return(f,p)=>(t(),n("div",rc,[e("p",ic,r(s.step.prompt),1),e("div",cc,[e("div",uc,[e("h3",{class:"text-sm font-bold text-gray-500 text-center truncate",title:m.value.name},r(m.value.name),9,dc),e("div",vc,[e("div",mc,[e("div",{class:"chem-tube-fill",style:ue({height:`${q(c.value,m.value.maxVolume)}%`,backgroundColor:m.value.color})},null,4),p[2]||(p[2]=e("div",{class:"chem-tube-graduations"},null,-1))])]),e("div",gc,[p[3]||(p[3]=e("label",{class:"text-xs font-semibold text-gray-400"},"Volume (ml)",-1)),Ee(e("input",{type:"number","onUpdate:modelValue":p[0]||(p[0]=w=>c.value=w),max:m.value.maxVolume,min:0,disabled:d.value==="mixing",class:"p-2 border border-gray-200 rounded-lg text-center font-mono font-bold focus:ring-2 focus:ring-purple-400 outline-none bg-white text-gray-900",onInput:b},null,40,pc),[[Re,c.value,void 0,{number:!0}]])])]),e("div",fc,[e("div",hc,[e("div",bc,[e("div",{class:z(["chem-beaker-fill",{"animate-pulse":d.value==="mixing"}]),style:ue({height:d.value==="idle"?"0%":"75%",backgroundColor:T.value})},null,6),d.value==="mixing"?(t(),n("div",xc,p[4]||(p[4]=[e("div",{class:"chem-bubble"},null,-1),e("div",{class:"chem-bubble",style:{width:"12px",height:"12px"}},null,-1),e("div",{class:"chem-bubble"},null,-1)]))):L("",!0)]),me($e,{name:"bounce"},{default:ye(()=>[d.value==="fail"?(t(),n("div",yc," üí• ")):L("",!0)]),_:1})]),e("button",{onClick:y,disabled:d.value==="mixing"||d.value==="success",class:z(["step-btn-primary",{"opacity-50 cursor-wait":d.value==="mixing","step-btn-success":d.value==="success"}])},r(_.value),11,kc)]),e("div",wc,[e("h3",{class:"text-sm font-bold text-gray-500 text-center truncate",title:k.value.name},r(k.value.name),9,_c),e("div",$c,[e("div",Cc,[e("div",{class:"chem-tube-fill",style:ue({height:`${q(l.value,k.value.maxVolume)}%`,backgroundColor:k.value.color})},null,4),p[5]||(p[5]=e("div",{class:"chem-tube-graduations"},null,-1))])]),e("div",Sc,[p[6]||(p[6]=e("label",{class:"text-xs font-semibold text-gray-400"},"Volume (ml)",-1)),Ee(e("input",{type:"number","onUpdate:modelValue":p[1]||(p[1]=w=>l.value=w),max:k.value.maxVolume,min:0,disabled:d.value==="mixing",class:"p-2 border border-gray-200 rounded-lg text-center font-mono font-bold focus:ring-2 focus:ring-purple-400 outline-none bg-white text-gray-900",onInput:b},null,40,Tc),[[Re,l.value,void 0,{number:!0}]])])])]),e("div",Mc,[e("div",null,[p[7]||(p[7]=e("span",{class:"font-semibold"},"Target:",-1)),ge(" "+r(m.value.targetVolume)+"ml + "+r(k.value.targetVolume)+"ml ",1),e("span",Ac,"(¬±"+r(s.step.tolerance)+"ml)",1)]),e("div",null,[p[8]||(p[8]=e("span",{class:"font-semibold"},"Current:",-1)),ge(" "+r(c.value||0)+"ml + "+r(l.value||0)+"ml ",1)])]),e("div",{class:z(["step-feedback mt-4",d.value==="success"?"success":d.value==="fail"?"error":""])},r(v.value),3)]))}},Dc=pe(Ic,[["__scopeId","data-v-f4b4fac2"]]),jc={class:"interactive-step step-animate-in"},Lc={class:"text-lg text-gray-600 mb-6 leading-relaxed"},qc={class:"grid grid-cols-2 gap-4 sm:gap-8"},Ec={class:"bg-gray-50 p-4 rounded-xl border border-gray-100"},Wc={class:"flex flex-col gap-2"},Bc=["onClick"],Pc={class:"bg-gray-50 p-4 rounded-xl border border-gray-100"},zc={class:"flex flex-col gap-2"},Rc=["onClick"],Nc={class:"h-8 flex items-center justify-center font-bold text-lg transition-colors duration-300 mt-6"},Fc={key:0,class:"bg-green-100 text-green-800 p-4 rounded-xl text-center font-bold mt-4"},Vc={__name:"ChemMatchingStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u(null),l=u(null),d=u([]),v=u({text:"",type:null}),m=B(()=>[...a.step.pairs].sort(()=>Math.random()-.5)),k=B(()=>d.value.length===a.step.pairs.length);xe(k,b=>{b&&h("complete",!0)});const q=(b,y)=>{d.value.includes(y)||b==="name"&&c.value===y||b==="formula"&&l.value===y||(v.value.type==="wrong"&&(v.value={text:"",type:null}),b==="name"?(c.value=y,l.value!==null&&T(y,l.value)):(l.value=y,c.value!==null&&T(c.value,y)))},T=(b,y)=>{b===y?(d.value=[...d.value,b],v.value={text:"‚úÖ Correct match!",type:"correct"},c.value=null,l.value=null):(v.value={text:"‚ùå Not a correct pair. Try again.",type:"wrong"},setTimeout(()=>{c.value=null,l.value=null,v.value.type==="wrong"&&(v.value={text:"",type:null})},1e3))},_=(b,y)=>{const f=d.value.includes(b),p=y==="name"?c.value===b:l.value===b,w=v.value.type==="wrong"&&p;return f?"border-green-500 bg-green-50 text-green-700 cursor-default shadow-none":w?"border-red-500 bg-red-50 text-red-700 animate-pulse":p?"border-purple-500 bg-purple-50 text-purple-700 shadow-sm ring-1 ring-purple-200":"border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50"};return(b,y)=>(t(),n("div",jc,[e("p",Lc,r(s.step.prompt),1),e("div",qc,[e("div",Ec,[y[0]||(y[0]=e("h3",{class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3"},"Names",-1)),e("div",Wc,[(t(!0),n(J,null,K(s.step.pairs,f=>(t(),n("button",{key:`name-${f.id}`,onClick:p=>q("name",f.id),class:z(["w-full text-left p-3 sm:p-4 rounded-xl border-2 transition-all duration-200 font-medium text-sm sm:text-base",_(f.id,"name")])},r(f.name),11,Bc))),128))])]),e("div",Pc,[y[1]||(y[1]=e("h3",{class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3"},"Formulas",-1)),e("div",zc,[(t(!0),n(J,null,K(m.value,f=>(t(),n("button",{key:`formula-${f.id}`,onClick:p=>q("formula",f.id),class:z(["w-full text-left p-3 sm:p-4 rounded-xl border-2 transition-all duration-200 font-medium font-mono text-sm sm:text-base",_(f.id,"formula")])},r(f.formula),11,Rc))),128))])])]),e("div",Nc,[e("span",{class:z(v.value.type==="correct"?"text-green-600":"text-red-500")},r(v.value.text),3)]),k.value?(t(),n("div",Fc," üéâ Great job! You matched all correctly. ")):L("",!0)]))}},Oc={class:"interactive-step step-animate-in"},Gc={class:"text-lg text-gray-600 mb-6 leading-relaxed"},Hc={class:"bg-gray-50 p-6 rounded-xl border border-gray-200 flex flex-wrap gap-2 items-center leading-loose mb-6"},Qc=["onClick"],Uc={key:0,class:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm mb-6 animate-fade-in"},Yc={class:"text-sm font-semibold text-gray-500 mb-3"},Xc={class:"text-gray-900 font-bold"},Zc={class:"flex flex-wrap gap-2 mb-3"},Jc=["onClick"],Kc={class:"text-xs text-gray-500 italic flex items-center gap-2"},eu=["disabled"],tu={__name:"EnglishSentenceFixStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u([]),l=u(null),d=u(""),v=u(!1);xe(()=>a.step,()=>{var f;(f=a.step.tokens)!=null&&f.length?c.value=[...a.step.tokens]:c.value=a.step.originalSentence.split(" "),d.value="",v.value=!1,l.value=null},{immediate:!0});const m=B(()=>new Set(a.step.errors.map(f=>f.index))),k=B(()=>l.value===null?null:a.step.errors.find(f=>f.index===l.value)),q=B(()=>l.value===null?"":a.step.tokens[l.value]),T=f=>{if(!m.value.has(f))return"border-transparent bg-white cursor-default text-gray-800";const w=f===l.value,$=a.step.errors.find(S=>S.index===f),C=$&&c.value[f]===$.correct;let D="cursor-pointer transition-all duration-200 border ";return w&&(D+="ring-2 ring-purple-500 shadow-sm "),C?D+="bg-green-100 text-green-800 border-green-200":D+="bg-orange-100 text-orange-800 border-orange-200",D},_=f=>{if(!m.value.has(f)){l.value=null;return}l.value=f,d.value=""},b=f=>{l.value!==null&&(c.value[l.value]=f)},y=()=>{a.step.errors.every(p=>c.value[p.index]===p.correct)?(d.value="‚úÖ Great! You fixed all the mistakes.",v.value=!0,h("complete",!0)):(d.value="‚ùå There are still some mistakes. Tap the highlighted words.",v.value=!1,h("complete",!1))};return(f,p)=>(t(),n("div",Oc,[e("p",Gc,r(s.step.prompt),1),e("div",Hc,[(t(!0),n(J,null,K(c.value,(w,$)=>(t(),n("button",{key:$,onClick:C=>_($),class:z(["sentence-token",T($)])},r(w),11,Qc))),128))]),me($e,{name:"slide-fade"},{default:ye(()=>[k.value?(t(),n("div",Uc,[e("p",Yc,[p[0]||(p[0]=ge(" Choose the correct form for: ")),e("span",Xc,'"'+r(q.value)+'"',1)]),e("div",Zc,[(t(!0),n(J,null,K(k.value.options,w=>(t(),n("button",{key:w,onClick:$=>b(w),class:z(["px-4 py-2 rounded-lg border font-medium transition-colors",{"bg-purple-100 text-purple-700 border-purple-300":c.value[l.value]===w,"bg-white text-gray-700 border-gray-200 hover:bg-gray-50":c.value[l.value]!==w}])},r(w),11,Jc))),128))]),e("p",Kc,[p[1]||(p[1]=e("span",{class:"text-lg"},"üí°",-1)),ge(" "+r(k.value.explanation),1)])])):L("",!0)]),_:1}),e("div",{class:z(["step-feedback mb-4",v.value?"success":"error"])},r(d.value),3),e("button",{onClick:y,disabled:v.value,class:z(["px-6 py-3 rounded-full font-bold text-white shadow-md transition-transform active:scale-95",{"bg-green-500 cursor-default":v.value,"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":!v.value}])},r(v.value?"Correct!":"Check Sentence"),11,eu)]))}},su=pe(tu,[["__scopeId","data-v-46ae28c6"]]),au={class:"interactive-step step-animate-in"},nu={class:"text-lg text-gray-600 mb-6 leading-relaxed"},lu=["draggable","onDragstart","onDrop"],ou={key:0,class:"text-gray-400 italic"},ru={class:"bg-white p-4 rounded-lg border border-gray-100 shadow-sm mb-6"},iu={class:"text-lg text-gray-800 font-serif"},cu=["disabled"],uu={__name:"EnglishSentenceOrderStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u([]),l=u(null),d=u(""),v=u(!1),m=u(!1);xe(()=>a.step,()=>{var _;(_=a.step.scrambledOptions)!=null&&_.length?c.value=[...a.step.scrambledOptions]:c.value=[...a.step.correctOrder].sort(()=>Math.random()-.5),d.value="",v.value=!1},{immediate:!0});const k=_=>{l.value=_,d.value=""},q=_=>{if(l.value===null||l.value===_)return;const b=[...c.value],[y]=b.splice(l.value,1);b.splice(_,0,y),c.value=b,l.value=null,v.value=!1},T=()=>{c.value.join(" ")===a.step.correctOrder.join(" ")?(d.value="‚úÖ Perfect! The sentence is in the correct order.",v.value=!0,h("complete",!0)):(d.value="‚ùå Not quite. Try rearranging the words again.",v.value=!1,h("complete",!1))};return(_,b)=>(t(),n("div",au,[e("p",nu,r(s.step.prompt),1),e("div",{class:z(["bg-gray-50 p-6 rounded-xl border border-gray-200 min-h-[100px] flex flex-wrap gap-3 items-center",{"bg-blue-50 border-blue-200":m.value}]),onDragover:b[1]||(b[1]=Se(y=>m.value=!0,["prevent"])),onDragleave:b[2]||(b[2]=y=>m.value=!1),onDrop:b[3]||(b[3]=y=>m.value=!1)},[(t(!0),n(J,null,K(c.value,(y,f)=>(t(),n("div",{key:`${f}-${y}`,draggable:!v.value,onDragstart:p=>k(f),onDragover:b[0]||(b[0]=Se(()=>{},["prevent"])),onDrop:p=>q(f),class:z(["px-4 py-2 rounded-full font-medium shadow-sm transition-all duration-200 select-none",{"bg-green-100 text-green-800 border border-green-200 cursor-default":v.value,"bg-white text-gray-800 border border-gray-200 cursor-grab active:cursor-grabbing hover:shadow-md hover:border-blue-300 hover:text-blue-600 active:scale-95":!v.value}])},r(y),43,lu))),128)),c.value.length===0?(t(),n("span",ou," Loading words... ")):L("",!0)],34),b[5]||(b[5]=e("p",{class:"text-sm text-gray-500 italic flex items-center gap-2 mb-6"},[e("span",{class:"text-lg"},"üí°"),ge(" Hint: Drag words to reorder them. ")],-1)),e("div",ru,[b[4]||(b[4]=e("span",{class:"text-gray-500 text-sm font-semibold uppercase tracking-wider block mb-1"}," Preview ",-1)),e("p",iu,r(c.value.join(" ")),1)]),e("div",{class:z(["step-feedback mb-4",v.value?"success":"error"])},r(d.value),3),e("button",{onClick:T,disabled:v.value,class:z(["px-6 py-3 rounded-full font-bold text-white shadow-md transition-transform active:scale-95",{"bg-green-500 cursor-default":v.value,"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":!v.value}])},r(v.value?"‚úì Correct!":"Check Sentence"),11,cu)]))}},du={class:"interactive-step step-animate-in"},vu={class:"text-lg text-gray-600 mb-8 leading-relaxed"},mu={class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3"},gu={class:"flex flex-wrap gap-2"},pu=["draggable","onDragstart","onClick"],fu={key:0,class:"text-gray-400 italic text-sm self-center"},hu={class:"flex flex-col items-center mt-8"},bu={class:"relative w-full max-w-sm"},xu={class:"text-sm font-bold text-indigo-400 uppercase tracking-wider mb-4"},yu={class:"flex flex-wrap gap-2 justify-center w-full"},ku={key:0,class:"text-indigo-300 text-sm italic py-4 border-2 border-dashed border-indigo-200 rounded-lg w-full text-center pointer-events-none"},wu=["draggable","onDragstart","onClick"],_u={class:"flex justify-start mt-4"},$u=["disabled"],Cu={__name:"LanguageNounBagStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u([]),l=u([]),d=u(""),v=u("idle"),m=u(null),k=B(()=>a.step.targetPos||"noun"),q=B(()=>a.step.availableLabel||"Available Words"),T=B(()=>a.step.bagLabel?a.step.bagLabel:{noun:"Noun Bag",verb:"Verb Collection",adj:"Adjective Box",adv:"Adverb Container"}[k.value]||"Word Bag"),_=B(()=>a.step.emptyAvailableMessage||"All words are in the bag."),b=B(()=>a.step.emptyBagMessage||"Drag words here"),y=B(()=>a.step.checkButtonLabel||"Check Selection"),f=B(()=>a.step.words.filter(S=>S.pos===k.value));xe(()=>a.step,()=>{c.value=[...a.step.words],l.value=[],d.value="",v.value="idle",m.value=null},{immediate:!0});const p=S=>{if(v.value==="correct")return;const W=[...c.value],[F]=W.splice(S,1);c.value=W,l.value=[...l.value,F],d.value="",v.value="idle"},w=S=>{if(v.value==="correct")return;const W=[...l.value],[F]=W.splice(S,1);l.value=W,c.value=[...c.value,F],d.value="",v.value="idle"},$=()=>{const S=l.value.filter(Y=>Y.pos===k.value),W=l.value.filter(Y=>Y.pos!==k.value),F=f.value.every(Y=>S.some(ee=>ee.text===Y.text)),se=W.length===0;F&&se?(d.value=a.step.successMessage||`‚úÖ Perfect! All ${k.value}s are in the bag.`,v.value="correct",h("complete",!0)):W.length>0?(d.value=a.step.extraWordsMessage||`‚ùå You included non-${k.value}s in the bag. Remove them.`,v.value="incorrect",h("complete",!1)):(d.value=a.step.missingWordsMessage||`‚ùå You haven't added all ${k.value}s yet.`,v.value="incorrect",h("complete",!1))},C=(S,W,F)=>{if(v.value==="correct"){S.preventDefault();return}m.value={source:W,index:F},S.dataTransfer.effectAllowed="move"},D=S=>{!m.value||v.value==="correct"||(m.value.source==="available"&&S==="bag"?p(m.value.index):m.value.source==="bag"&&S==="available"&&w(m.value.index),m.value=null)};return(S,W)=>{var F,se,V,Y;return t(),n("div",du,[e("p",vu,r(s.step.prompt),1),e("div",{class:z(["bg-gray-50 p-4 rounded-xl border-2 transition-all duration-200 min-h-[120px]",{"border-blue-300 bg-blue-50 ring-2 ring-blue-100":((F=m.value)==null?void 0:F.source)==="bag","border-gray-200":((se=m.value)==null?void 0:se.source)!=="bag"}]),onDragover:W[0]||(W[0]=Se(()=>{},["prevent"])),onDrop:W[1]||(W[1]=ee=>D("available"))},[e("h3",mu,r(q.value),1),e("div",gu,[(t(!0),n(J,null,K(c.value,(ee,ae)=>(t(),n("div",{key:`${ae}-${ee.text}`,draggable:v.value!=="correct",onDragstart:ce=>C(ce,"available",ae),onClick:ce=>p(ae),class:z(["px-4 py-2 rounded-full border border-gray-300 bg-white text-gray-700 font-medium transition-all active:scale-95 select-none cursor-grab active:cursor-grabbing",{"hover:bg-gray-100 hover:border-gray-400 hover:shadow-sm":v.value!=="correct","opacity-50 cursor-not-allowed":v.value==="correct"}])},r(ee.text),43,pu))),128)),c.value.length===0?(t(),n("span",fu,r(_.value),1)):L("",!0)])],34),e("div",hu,[e("div",bu,[W[5]||(W[5]=e("div",{class:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-16 h-8 border-4 border-gray-400 rounded-t-xl z-0"},null,-1)),e("div",{class:z(["relative z-10 bg-indigo-50 border-4 rounded-2xl p-6 min-h-[160px] shadow-lg flex flex-col items-center transition-all duration-200",{"border-indigo-400 bg-indigo-100 ring-4 ring-indigo-200 scale-[1.02]":((V=m.value)==null?void 0:V.source)==="available","border-indigo-200":((Y=m.value)==null?void 0:Y.source)!=="available"}]),onDragover:W[2]||(W[2]=Se(()=>{},["prevent"])),onDrop:W[3]||(W[3]=ee=>D("bag"))},[e("h3",xu,r(T.value),1),e("div",yu,[l.value.length===0?(t(),n("div",ku,r(b.value),1)):L("",!0),(t(!0),n(J,null,K(l.value,(ee,ae)=>(t(),n("div",{key:`bag-${ae}-${ee.text}`,draggable:v.value!=="correct",onDragstart:ce=>C(ce,"bag",ae),onClick:ce=>w(ae),class:z(["px-4 py-2 rounded-full border border-indigo-300 bg-indigo-100 text-indigo-800 font-medium transition-all active:scale-95 select-none cursor-grab active:cursor-grabbing group relative",{"hover:bg-red-50 hover:text-red-600 hover:border-red-200":v.value!=="correct","opacity-80 cursor-not-allowed":v.value==="correct"}])},[ge(r(ee.text)+" ",1),W[4]||(W[4]=e("span",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 font-bold text-xs pointer-events-none text-red-500"}," ‚úï ",-1))],42,wu))),128))])],34),W[6]||(W[6]=e("div",{class:"flex justify-between px-8 -mt-3 relative z-20"},[e("div",{class:"w-6 h-6 bg-gray-800 rounded-full shadow-md"}),e("div",{class:"w-6 h-6 bg-gray-800 rounded-full shadow-md"})],-1))])]),e("div",{class:z(["step-feedback mt-6",v.value==="correct"?"success":v.value==="incorrect"?"error":""])},r(d.value),3),e("div",_u,[e("button",{onClick:$,disabled:v.value==="correct",class:z(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-transform active:scale-95",{"bg-green-500 cursor-default":v.value==="correct","bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700":v.value!=="correct"}])},r(v.value==="correct"?"Correct!":y.value),11,$u)])])}}},Su={class:"interactive-step step-animate-in"},Tu={class:"text-center mb-8"},Mu={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},Au={class:"relative mb-8"},Iu={class:"absolute -top-3 left-4 px-3 py-1 bg-white text-xs font-bold text-gray-500 uppercase tracking-wider"},Du={class:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 rounded-2xl p-6"},ju={class:"text-xl text-gray-800 font-medium leading-relaxed"},Lu={class:"mt-3 flex items-center gap-2"},qu={class:"flex justify-center mb-8"},Eu={class:"relative"},Wu={class:"absolute -right-24 top-1/2 -translate-y-1/2 px-3 py-1 rounded-full bg-fuchsia-100 text-fuchsia-700 font-bold text-sm whitespace-nowrap"},Bu={class:"relative mb-8"},Pu={key:0,class:"space-y-4"},zu={class:"min-h-[60px] bg-white rounded-xl border-2 border-dashed border-gray-300 p-4 flex flex-wrap gap-2 items-center"},Ru={key:0,class:"text-gray-400 italic"},Nu=["onClick"],Fu={class:"flex flex-wrap gap-2 justify-center"},Vu=["onClick","disabled"],Ou={class:"flex justify-center gap-2 mt-4"},Gu=["onClick"],Hu={key:1,class:"text-center"},Qu={class:"mt-3 flex items-center justify-center gap-2"},Uu={key:0,class:"mb-8 p-4 bg-amber-50 rounded-xl border border-amber-200"},Yu={class:"flex items-start gap-3"},Xu={class:"font-semibold text-amber-800 mb-1"},Zu={class:"text-amber-700 text-sm"},Ju={class:"flex justify-start gap-3"},Ku=["disabled"],ed={key:1,class:"mt-4 p-4 bg-blue-50 rounded-xl border border-blue-200"},td={class:"text-blue-800"},sd={__name:"LanguageToneTransformer",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a={props:["tone"],template:`
    <div class="flex items-center gap-2 text-sm">
      <div class="flex gap-0.5">
        <div v-for="i in 5" :key="i"
             class="w-2 h-4 rounded-sm transition-all"
             :class="i <= getToneLevel(tone) ? getToneBarColor(tone) : 'bg-gray-200'"
             :style="{ height: (12 + i * 3) + 'px' }">
        </div>
      </div>
      <span :class="getToneLabelColor(tone)" class="font-medium">{{ getToneEmoji(tone) }} {{ tone }}</span>
    </div>
  `,methods:{getToneLevel(V){return{formal:5,neutral:3,casual:2,sarcastic:4,enthusiastic:5,romantic:4}[V]||3},getToneBarColor(V){return{formal:"bg-blue-500",neutral:"bg-gray-500",casual:"bg-green-500",sarcastic:"bg-purple-500",enthusiastic:"bg-orange-500",romantic:"bg-pink-500"}[V]||"bg-gray-500"},getToneLabelColor(V){return{formal:"text-blue-600",neutral:"text-gray-600",casual:"text-green-600",sarcastic:"text-purple-600",enthusiastic:"text-orange-600",romantic:"text-pink-600"}[V]||"text-gray-600"},getToneEmoji(V){return{formal:"üé©",neutral:"üòê",casual:"üòé",sarcastic:"üòè",enthusiastic:"üéâ",romantic:"üíï"}[V]||"üí¨"}}},h=s,c=i,l=u([]),d=u([]),v=u(""),m=u(!1),k=u(0),q=u(!1),T=B(()=>{var ae;const V=((ae=h.step.correctAnswer)==null?void 0:ae.split(" "))||[],Y=h.step.distractors||[];return[...V,...Y].sort(()=>Math.random()-.5)});xe(()=>h.step,()=>{l.value=[],d.value=[],v.value="",m.value=!1,k.value=0,q.value=!1},{immediate:!0});const _=V=>{d.value.includes(V)||m.value||(l.value.push(T.value[V]),d.value.push(V),v.value="")},b=V=>{if(m.value)return;const Y=l.value[V],ee=T.value.findIndex((ae,ce)=>ae===Y&&d.value.includes(ce));l.value.splice(V,1),d.value=d.value.filter(ae=>T.value[ae]!==Y||ae!==ee),v.value=""},y=V=>{if(!m.value&&l.value.length>0){const Y=l.value.length-1;l.value[Y]=l.value[Y].replace(/[.,!?]+$/,"")+V}},f=()=>{l.value=[],d.value=[],v.value=""},p=()=>{q.value=!0},w=()=>{k.value++;const V=l.value.join(" ").toLowerCase().replace(/\s+/g," ").trim(),Y=h.step.correctAnswer.toLowerCase().replace(/\s+/g," ").trim(),ee=(h.step.alternatives||[]).map(ce=>ce.toLowerCase().replace(/\s+/g," ").trim());V===Y||ee.includes(V)?(m.value=!0,v.value=`‚ú® Brilliant! You've mastered the ${C(h.step.targetTone)} tone!`,c("complete",!0)):(v.value=`Not quite the right tone. ${$()}`,c("complete",!1))},$=()=>({formal:"Try using more polite, professional language.",casual:"Make it sound more relaxed and friendly!",sarcastic:"Add some ironic or mocking undertones.",enthusiastic:"Show more excitement and energy!",romantic:"Make it more affectionate and tender."})[h.step.targetTone]||"Try matching the tone more closely.",C=V=>({formal:"Formal",neutral:"Neutral",casual:"Casual",sarcastic:"Sarcastic",enthusiastic:"Enthusiastic",romantic:"Romantic"})[V]||V,D=V=>({formal:"text-blue-600",casual:"text-green-600",sarcastic:"text-purple-600",enthusiastic:"text-orange-600",romantic:"text-pink-600"})[V]||"text-gray-600",S=V=>({formal:"text-blue-800",casual:"text-green-800",sarcastic:"text-purple-800",enthusiastic:"text-orange-800",romantic:"text-pink-800"})[V]||"text-gray-800",W=()=>m.value?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300":{formal:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",casual:"bg-gradient-to-br from-green-50 to-teal-50 border-green-200",sarcastic:"bg-gradient-to-br from-purple-50 to-violet-50 border-purple-200",enthusiastic:"bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200",romantic:"bg-gradient-to-br from-pink-50 to-rose-50 border-pink-200"}[h.step.targetTone]||"bg-gray-50 border-gray-200",F=V=>({formal:"Use polite phrases, complete sentences, and respectful vocabulary. Avoid contractions and slang.",casual:"Be relaxed! Use contractions, simple words, and friendly expressions.",sarcastic:"Say the opposite of what you mean, use exaggeration, or add ironic praise.",enthusiastic:"Show excitement! Use exclamation marks, positive superlatives, and energetic words.",romantic:"Express affection with tender words, poetic language, and emotional expressions."})[V]||"Match the target tone as closely as possible.",se=B(()=>v.value?m.value?"success":"error":"");return(V,Y)=>(t(),n("div",Su,[e("div",Tu,[Y[0]||(Y[0]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-violet-100 to-fuchsia-100 border border-violet-200 mb-4"},[e("span",{class:"text-2xl"},"üé≠"),e("span",{class:"font-bold text-violet-700"},"Tone Transformer")],-1)),e("p",Mu,r(s.step.prompt||"Transform the sentence to match the target tone"),1)]),e("div",Au,[e("div",Iu," Original ("+r(C(s.step.originalTone))+") ",1),e("div",Du,[e("p",ju,' "'+r(s.step.originalSentence)+'" ',1),e("div",Lu,[me(a,{tone:s.step.originalTone},null,8,["tone"])])])]),e("div",qu,[e("div",Eu,[Y[1]||(Y[1]=e("div",{class:"w-16 h-16 rounded-full bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg transform-arrow"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})])],-1)),e("div",Wu," Transform to: "+r(C(s.step.targetTone)),1)])]),e("div",Bu,[e("div",{class:z(["absolute -top-3 left-4 px-3 py-1 bg-white text-xs font-bold uppercase tracking-wider",D(s.step.targetTone)])}," Target Tone: "+r(C(s.step.targetTone)),3),e("div",{class:z(["border-2 rounded-2xl p-6 transition-all duration-300",W()])},[m.value?(t(),n("div",Hu,[e("p",{class:z(["text-xl font-medium leading-relaxed",S(s.step.targetTone)])},' "'+r(l.value.join(" "))+'" ',3),e("div",Qu,[me(a,{tone:s.step.targetTone},null,8,["tone"])])])):(t(),n("div",Pu,[Y[3]||(Y[3]=e("p",{class:"text-sm text-gray-500 mb-4"},"Click on words to build your transformed sentence:",-1)),e("div",zu,[l.value.length===0?(t(),n("span",Ru," Your sentence will appear here... ")):L("",!0),(t(!0),n(J,null,K(l.value,(ee,ae)=>(t(),n("div",{key:`selected-${ae}`,onClick:ce=>b(ae),class:"px-3 py-1.5 rounded-full bg-violet-100 text-violet-800 font-medium cursor-pointer hover:bg-red-100 hover:text-red-600 transition-colors group"},[ge(r(ee)+" ",1),Y[2]||(Y[2]=e("span",{class:"ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},"√ó",-1))],8,Nu))),128))]),e("div",Fu,[(t(!0),n(J,null,K(T.value,(ee,ae)=>(t(),n("button",{key:`word-${ae}`,onClick:ce=>_(ae),disabled:d.value.includes(ae),class:z(["px-4 py-2 rounded-full font-medium transition-all duration-200 transform hover:scale-105",d.value.includes(ae)?"bg-gray-200 text-gray-400 cursor-not-allowed opacity-50":"bg-white border-2 border-gray-200 text-gray-700 hover:border-violet-400 hover:bg-violet-50 hover:shadow-md cursor-pointer"])},r(ee),11,Vu))),128))]),e("div",Ou,[(t(),n(J,null,K([".","!","?",",","..."],ee=>e("button",{key:ee,onClick:ae=>y(ee),class:"w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold transition-colors"},r(ee),9,Gu)),64)),e("button",{onClick:f,class:"px-4 h-10 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 font-medium transition-colors"}," Clear ")])]))],2)]),!m.value&&s.step.showGuide!==!1?(t(),n("div",Uu,[e("div",Yu,[Y[4]||(Y[4]=e("span",{class:"text-xl"},"üí°",-1)),e("div",null,[e("p",Xu,"Tone Guide: "+r(C(s.step.targetTone)),1),e("p",Zu,r(F(s.step.targetTone)),1)])])])):L("",!0),e("div",{class:z(["step-feedback mb-4",se.value])},r(v.value),3),e("div",Ju,[e("button",{onClick:w,disabled:m.value||l.value.length===0,class:z(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-all active:scale-95",m.value?"bg-green-500 cursor-default":"bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700"])},r(m.value?"‚úì Perfect Transformation!":"Check Tone"),11,Ku),!m.value&&k.value>0?(t(),n("button",{key:0,onClick:p,class:"px-6 py-3 rounded-full font-medium text-violet-600 bg-violet-50 hover:bg-violet-100 transition-colors"}," Show Hint ")):L("",!0)]),q.value&&!m.value?(t(),n("div",ed,[e("p",td,[Y[5]||(Y[5]=e("span",{class:"font-bold"},"Hint:",-1)),ge(" "+r(s.step.hint||`Try starting with: "${s.step.correctAnswer.split(" ").slice(0,3).join(" ")}..."`),1)])])):L("",!0)]))}},ad=pe(sd,[["__scopeId","data-v-8cf2fb6e"]]),nd={class:"interactive-step step-animate-in"},ld={class:"text-center mb-8"},od={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},rd={class:"flex justify-between mb-4 px-4"},id={class:"flex items-center gap-2"},cd={class:"text-2xl"},ud={class:"font-bold text-gray-700"},dd={class:"flex items-center gap-2"},vd={class:"font-bold text-gray-700"},md={class:"text-2xl"},gd=["d","stroke"],pd=["d"],fd={class:"flex justify-between gap-8"},hd={class:"flex-1 space-y-4"},bd=["onMousedown","onTouchstart"],xd={class:"idiom-content"},yd={class:"font-semibold text-gray-800"},kd={key:0,class:"text-sm text-gray-500 italic mt-1"},wd={class:"flex-1 space-y-4"},_d=["onMouseup","onTouchend","onMouseenter"],$d={class:"idiom-content"},Cd={class:"font-semibold text-gray-800"},Sd={key:0,class:"text-sm text-gray-500 italic mt-1"},Td={class:"text-green-800"},Md={class:"mt-6 flex items-center gap-4"},Ad={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},Id={class:"text-sm font-bold text-gray-600"},Dd={class:"flex justify-start gap-3 mt-4"},jd={__name:"LanguageIdiomBridge",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u(null),l=u(null),d=u({}),v=u({}),m=u([]),k=u([]),q=u([]),T=u(null),_=u(null),b=u(null),y=u(""),f=u([]),p=(P,j)=>{j&&(d.value[P]=j)},w=(P,j)=>{j&&(v.value[P]=j)},$=B(()=>k.value.filter(P=>P.correct)),C=B(()=>$.value.length===a.step.sourceIdioms.length),D=B(()=>y.value?y.value.includes("‚úì")||y.value.includes("üéâ")?"success":"error":""),S=P=>k.value.some(j=>j.sourceIdx===P),W=P=>k.value.some(j=>j.targetIdx===P),F=P=>k.value.some(j=>j.sourceIdx===P&&j.correct),se=P=>k.value.some(j=>j.sourceIdx===P&&!j.correct),V=P=>k.value.some(j=>j.targetIdx===P&&j.correct),Y=P=>k.value.some(j=>j.targetIdx===P&&!j.correct);xe(()=>a.step,()=>{let P=[...a.step.targetIdioms],j=0;do{P.sort(()=>Math.random()-.5),j++;const I=P.filter((U,H)=>a.step.sourceIdioms[H]&&U.matchId===a.step.sourceIdioms[H].matchId).length;if(P.length<4){if(I<P.length||j>5)break}else if(I<=Math.max(1,P.length*.3)||j>10)break}while(!0);m.value=P,k.value=[],q.value=[],f.value=[],y.value="",T.value=null,_.value=null},{immediate:!0});const ee=(P,j,I)=>{if(S(P)){const U=k.value.findIndex(H=>H.sourceIdx===P);U!==-1&&(k.value.splice(U,1),q.value.splice(U,1))}T.value=P,y.value="",ae(I)},ae=P=>{if(T.value===null)return;const j=d.value[T.value];if(!j||!l.value)return;const I=l.value.getBoundingClientRect(),U=j.getBoundingClientRect(),H=U.right-I.left,te=U.top+U.height/2-I.top;let le,he;P.touches?(le=P.touches[0].clientX-I.left,he=P.touches[0].clientY-I.top):(le=P.clientX-I.left,he=P.clientY-I.top);const je=H+(le-H)/2;_.value=`M ${H} ${te} C ${je} ${te}, ${je} ${he}, ${le} ${he}`},ce=P=>{if(T.value===null)return;const j=T.value,I=a.step.sourceIdioms[j],U=m.value[P];if(W(P)){T.value=null,_.value=null,y.value="‚ö†Ô∏è This idiom is already connected!";return}const H=I.matchId===U.matchId,te=d.value[j],le=v.value[P],he=l.value.getBoundingClientRect(),je=te.getBoundingClientRect(),Be=le.getBoundingClientRect(),Te=je.right-he.left,Pe=je.top+je.height/2-he.top,A=Be.left-he.left,O=Be.top+Be.height/2-he.top,Z=Te+(A-Te)/2,oe=`M ${Te} ${Pe} C ${Z} ${Pe}, ${Z} ${O}, ${A} ${O}`;k.value.push({sourceIdx:j,targetIdx:P,correct:H}),q.value.push({path:oe,correct:H,animate:!0}),H?(y.value="‚úì Perfect match!",f.value.push({id:I.matchId,meaning:I.meaning||U.meaning||"These idioms share the same meaning!"}),$.value.length===a.step.sourceIdioms.length&&(y.value="üéâ All idioms matched! You've built the complete bridge!",h("complete",!0))):y.value="‚úó These idioms have different meanings. Try again!",T.value=null,_.value=null},ie=()=>{k.value=[],q.value=[],f.value=[],y.value="",T.value=null,_.value=null},fe=P=>{T.value!==null&&ae(P)},R=()=>{T.value!==null&&(T.value=null,_.value=null)};Ne(()=>{document.addEventListener("mousemove",fe),document.addEventListener("mouseup",R),document.addEventListener("touchmove",fe),document.addEventListener("touchend",R)}),at(()=>{document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",R),document.removeEventListener("touchmove",fe),document.removeEventListener("touchend",R)});const M=P=>({English:"üá¨üáß",Spanish:"üá™üá∏",French:"üá´üá∑",German:"üá©üá™",Italian:"üáÆüáπ",Russian:"üá∑üá∫",Chinese:"üá®üá≥",Japanese:"üáØüáµ",Korean:"üá∞üá∑",Portuguese:"üáµüáπ",Arabic:"üá∏üá¶"})[P]||"üåç";return(P,j)=>(t(),n("div",nd,[e("div",ld,[j[2]||(j[2]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-amber-100 to-orange-100 border border-amber-200 mb-4"},[e("span",{class:"text-2xl"},"üåâ"),e("span",{class:"font-bold text-amber-700"},"Idiom Bridge")],-1)),e("p",od,r(s.step.prompt||"Connect idioms with the same meaning across languages"),1)]),e("div",rd,[e("div",id,[e("span",cd,r(M(s.step.sourceLanguage)),1),e("span",ud,r(s.step.sourceLanguage||"English"),1)]),e("div",dd,[e("span",vd,r(s.step.targetLanguage||"Spanish"),1),e("span",md,r(M(s.step.targetLanguage)),1)])]),e("div",{class:"relative bridge-container",ref_key:"bridgeContainer",ref:c},[(t(),n("svg",{class:"absolute inset-0 w-full h-full pointer-events-none z-10",ref_key:"svgCanvas",ref:l},[(t(!0),n(J,null,K(q.value,(I,U)=>(t(),n("path",{key:`conn-${U}`,d:I.path,stroke:I.correct?"#10b981":"#ef4444","stroke-width":"3",fill:"none",class:z(["connection-line",{"animate-draw":I.animate}])},null,10,gd))),128)),_.value?(t(),n("path",{key:0,d:_.value,stroke:"#8b5cf6","stroke-width":"3","stroke-dasharray":"8 4",fill:"none",class:"active-connection"},null,8,pd)):L("",!0)],512)),e("div",fd,[e("div",hd,[(t(!0),n(J,null,K(s.step.sourceIdioms,(I,U)=>(t(),n("div",{key:`source-${U}`,ref_for:!0,ref:H=>p(U,H),onMousedown:H=>ee(U,"source",H),onTouchstart:Se(H=>ee(U,"source",H),["prevent"]),class:z(["idiom-card source-card",{connected:S(U),correct:F(U),incorrect:se(U),active:T.value===U}])},[e("div",xd,[e("p",yd,r(I.text),1),I.literal?(t(),n("p",kd," (Literally: "+r(I.literal)+") ",1)):L("",!0)]),e("div",{class:z(["connection-dot right-dot",{"dot-active":T.value===U}])},null,2)],42,bd))),128))]),j[3]||(j[3]=We('<div class="flex flex-col items-center justify-center px-4" data-v-e0711625><div class="bridge-pillar" data-v-e0711625></div><div class="bridge-deck" data-v-e0711625><div class="bridge-cable left-cable" data-v-e0711625></div><div class="bridge-cable right-cable" data-v-e0711625></div></div><div class="bridge-pillar" data-v-e0711625></div></div>',1)),e("div",wd,[(t(!0),n(J,null,K(m.value,(I,U)=>(t(),n("div",{key:`target-${U}`,ref_for:!0,ref:H=>w(U,H),onMouseup:H=>ce(U),onTouchend:H=>ce(U),class:z(["idiom-card target-card",{connected:W(U),correct:V(U),incorrect:Y(U),hovering:b.value===U}]),onMouseenter:H=>b.value=T.value!==null?U:null,onMouseleave:j[0]||(j[0]=H=>b.value=null)},[e("div",{class:z(["connection-dot left-dot",{"dot-active":b.value===U}])},null,2),e("div",$d,[e("p",Cd,r(I.text),1),I.literal?(t(),n("p",Sd," (Literally: "+r(I.literal)+") ",1)):L("",!0)])],42,_d))),128))])])],512),me(ys,{name:"meaning-reveal",tag:"div",class:"mt-6 space-y-2"},{default:ye(()=>[(t(!0),n(J,null,K(f.value,I=>(t(),n("div",{key:I.id,class:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200"},[e("p",Td,[j[4]||(j[4]=e("span",{class:"font-bold"},"Shared meaning:",-1)),ge(" "+r(I.meaning),1)])]))),128))]),_:1}),e("div",Md,[e("div",Ad,[e("div",{class:"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full transition-all duration-500",style:ue({width:`${$.value.length/s.step.sourceIdioms.length*100}%`})},null,4)]),e("span",Id,r($.value.length)+" / "+r(s.step.sourceIdioms.length),1)]),e("div",{class:z(["step-feedback mt-4",D.value])},r(y.value),3),e("div",Dd,[C.value?L("",!0):(t(),n("button",{key:0,onClick:ie,class:"px-6 py-3 rounded-full font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors"}," Reset All ")),C.value?(t(),n("button",{key:1,onClick:j[1]||(j[1]=I=>P.$emit("complete",!0)),class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 shadow-md hover:shadow-lg transition-all"}," Continue ‚Üí ")):L("",!0)])]))}},Ld=pe(jd,[["__scopeId","data-v-e0711625"]]),qd={class:"interactive-step step-animate-in"},Ed={class:"text-center mb-6 relative"},Wd={key:0,class:"absolute top-12 right-0 w-72 bg-white p-5 rounded-xl shadow-xl border border-indigo-100 z-50 text-left"},Bd={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},Pd={class:"text-center mb-4"},zd={class:"inline-block px-6 py-3 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-xl shadow-lg"},Rd={class:"absolute inset-0 w-full h-full pointer-events-none"},Nd=["cx","cy","r","opacity"],Fd=["x1","y1","x2","y2"],Vd=["x1","y1","x2","y2"],Od=["onMousedown","onTouchstart","onMouseenter"],Gd={class:"word-content"},Hd={class:"word-text"},Qd={key:0,class:"word-type"},Ud={key:0,class:"connection-badge"},Yd={class:"star-core"},Xd={key:0,class:"mt-6 flex flex-wrap justify-center gap-3"},Zd={class:"font-medium"},Jd={class:"mt-6"},Kd={class:"flex items-center gap-4 mb-4"},ev={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},tv={class:"text-sm font-bold text-gray-600"},sv={class:"flex justify-start gap-3 mt-4"},av={__name:"LanguageWordConstellation",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i,c=u(null),l=Pt({}),d=u([]),v=u(!1),m=u(null),k=u(null),q=u(null),T=u(null),_=u(""),b=u(!0),y=u(!1),f=u([]),p=()=>{const j=[];for(let I=0;I<50;I++)j.push({id:I,x:Math.random()*100+"%",y:Math.random()*100+"%",r:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,delay:Math.random()*3});f.value=j},w=[{type:"synonym",label:"Synonym",icon:"‚âà",class:"bg-blue-100 text-blue-700"},{type:"antonym",label:"Antonym",icon:"‚Üî",class:"bg-red-100 text-red-700"},{type:"related",label:"Related",icon:"‚Üí",class:"bg-green-100 text-green-700"},{type:"category",label:"Category",icon:"‚äÇ",class:"bg-purple-100 text-purple-700"}],$=B(()=>typeof a.step.centralWord=="object"&&a.step.centralWord!==null?a.step.centralWord.text||"Center":a.step.centralWord),C=B(()=>d.value.filter(j=>(a.step.requiredConnections||[]).some(U=>U.from===j.from&&U.to===j.to||U.from===j.to&&U.to===j.from))),D=B(()=>{var I;const j=((I=a.step.requiredConnections)==null?void 0:I.length)||a.step.words.length;return C.value.length/j*100}),S=B(()=>{var I;const j=((I=a.step.requiredConnections)==null?void 0:I.length)||a.step.words.length;return C.value.length>=j}),W=B(()=>_.value?_.value.includes("‚úì")||_.value.includes("üåü")?"success":"error":"");xe(()=>a.step,()=>{d.value=[],_.value="",v.value=!1,p()},{immediate:!0}),Ne(()=>{p()});const F=(j,I)=>{const U=a.step.words.length,H=I/U*2*Math.PI-Math.PI/2,te=38,le=50+te*Math.cos(H),he=50+te*Math.sin(H);return{left:`${le}%`,top:`${he}%`,transform:"translate(-50%, -50%)"}},se=()=>({left:"50%",top:"50%",transform:"translate(-50%, -50%)"}),V=j=>{if(!c.value)return{x:0,y:0};const I=l[j];if(!I)return{x:c.value.offsetWidth/2,y:c.value.offsetHeight/2};const U=c.value.getBoundingClientRect(),H=I.getBoundingClientRect();return{x:H.left+H.width/2-U.left,y:H.top+H.height/2-U.top}},Y=j=>d.value.some(I=>I.from===j||I.to===j),ee=j=>d.value.filter(I=>I.from===j||I.to===j).length,ae=(j,I)=>d.value.some(U=>U.from===j&&U.to===I||U.from===I&&U.to===j),ce=(j,I)=>{v.value=!0,m.value=j.id,k.value=V(j.id);const U=c.value.getBoundingClientRect();I.touches?q.value={x:I.touches[0].clientX-U.left,y:I.touches[0].clientY-U.top}:q.value={x:I.clientX-U.left,y:I.clientY-U.top}},ie=j=>{if(!v.value||!c.value)return;const I=c.value.getBoundingClientRect();q.value={x:j.clientX-I.left,y:j.clientY-I.top}},fe=j=>{if(!v.value||!c.value)return;const I=c.value.getBoundingClientRect();q.value={x:j.touches[0].clientX-I.left,y:j.touches[0].clientY-I.top}},R=()=>{v.value&&(T.value&&T.value!==m.value&&M(m.value,T.value),v.value=!1,m.value=null,k.value=null,q.value=null)},M=(j,I)=>{if(ae(j,I)){_.value="‚ö†Ô∏è These words are already connected!";return}if((a.step.requiredConnections||[]).some(te=>te.from===j&&te.to===I||te.from===I&&te.to===j))d.value.push({from:j,to:I}),_.value="‚úì Connection discovered!",S.value&&(_.value="üåü Constellation complete! You found all the word relationships!",h("complete",!0));else{_.value="‚úó These words don't have a direct relationship. Try another pair!";const te=l[j],le=l[I];te&&te.classList.add("shake"),le&&le.classList.add("shake"),setTimeout(()=>{te&&te.classList.remove("shake"),le&&le.classList.remove("shake")},500)}},P=()=>{d.value=[],_.value=""};return(j,I)=>{var U;return t(),n("div",qd,[e("div",Ed,[I[6]||(I[6]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-indigo-100 to-purple-100 border border-indigo-200 mb-4"},[e("span",{class:"text-2xl"},"‚ú®"),e("span",{class:"font-bold text-indigo-700"},"Word Constellation")],-1)),e("button",{onClick:I[0]||(I[0]=H=>y.value=!y.value),class:"absolute right-0 top-0 p-2 text-indigo-400 hover:text-indigo-600 transition-colors",title:"How to play"},I[4]||(I[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),y.value?(t(),n("div",Wd,[I[5]||(I[5]=We('<h4 class="font-bold text-indigo-700 mb-2 flex items-center gap-2" data-v-626106ed><span data-v-626106ed>üéÆ</span> How to Play </h4><ul class="space-y-2 text-sm text-gray-600" data-v-626106ed><li class="flex gap-2" data-v-626106ed><span class="text-indigo-500 font-bold" data-v-626106ed>1.</span><span data-v-626106ed>Look for words related to the <strong data-v-626106ed>Central Word</strong>.</span></li><li class="flex gap-2" data-v-626106ed><span class="text-indigo-500 font-bold" data-v-626106ed>2.</span><span data-v-626106ed><strong data-v-626106ed>Drag</strong> from one word to another to connect them.</span></li><li class="flex gap-2" data-v-626106ed><span class="text-indigo-500 font-bold" data-v-626106ed>3.</span><span data-v-626106ed>Find all connections to reveal the full constellation!</span></li></ul>',2)),e("button",{onClick:I[1]||(I[1]=H=>y.value=!1),class:"mt-3 w-full py-1 bg-indigo-50 text-indigo-600 rounded-lg text-xs font-bold hover:bg-indigo-100"},"Got it!")])):L("",!0),e("p",Bd,r(s.step.prompt||"Drag to connect words that are synonyms, antonyms, or related to the central concept."),1)]),e("div",Pd,[e("span",zd,r($.value),1)]),e("div",{class:"constellation-canvas",ref_key:"canvas",ref:c,onMousemove:ie,onMouseup:R,onTouchmove:fe,onTouchend:R},[(t(),n("svg",Rd,[(t(!0),n(J,null,K(f.value,H=>(t(),n("circle",{key:H.id,cx:H.x,cy:H.y,r:H.r,fill:"white",opacity:H.opacity,class:"twinkle",style:ue({animationDelay:H.delay+"s"})},null,12,Nd))),128)),(t(!0),n(J,null,K(C.value,H=>(t(),n("line",{key:`line-${H.from}-${H.to}`,x1:V(H.from).x,y1:V(H.from).y,x2:V(H.to).x,y2:V(H.to).y,stroke:"url(#connectionGradient)","stroke-width":"3","stroke-linecap":"round",class:"constellation-line"},null,8,Fd))),128)),v.value&&k.value&&q.value?(t(),n("line",{key:0,x1:k.value.x,y1:k.value.y,x2:q.value.x,y2:q.value.y,stroke:"#a5b4fc","stroke-width":"2","stroke-dasharray":"6 4","stroke-linecap":"round"},null,8,Vd)):L("",!0),I[7]||(I[7]=e("defs",null,[e("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#818cf8"}),e("stop",{offset:"50%","stop-color":"#c084fc"}),e("stop",{offset:"100%","stop-color":"#818cf8"})])],-1))])),(t(!0),n(J,null,K(s.step.words,(H,te)=>(t(),n("div",{key:H.id,ref_for:!0,ref:le=>l[H.id]=le,class:z(["word-node",{connected:Y(H.id),dragging:m.value===H.id,hovering:T.value===H.id&&v.value&&m.value!==H.id,central:H.id==="center"}]),style:ue(F(H,te)),onMousedown:le=>ce(H,le),onTouchstart:Se(le=>ce(H,le),["prevent"]),onMouseenter:le=>T.value=H.id,onMouseleave:I[2]||(I[2]=le=>T.value=null)},[I[8]||(I[8]=e("div",{class:"word-glow"},null,-1)),e("div",Gd,[e("span",Hd,r(H.text),1),H.type&&b.value?(t(),n("span",Qd,r(H.type),1)):L("",!0)]),ee(H.id)>0?(t(),n("div",Ud,r(ee(H.id)),1)):L("",!0)],46,Od))),128)),e("div",{class:"central-star",style:ue(se())},[I[9]||(I[9]=e("div",{class:"star-rays"},null,-1)),e("div",Yd,[e("span",null,r($.value),1)])],4)],544),s.step.showLegend!==!1?(t(),n("div",Xd,[(t(),n(J,null,K(w,H=>e("div",{key:H.type,class:z(["flex items-center gap-2 px-3 py-1.5 rounded-full text-sm",H.class])},[e("span",null,r(H.icon),1),e("span",Zd,r(H.label),1)],2)),64))])):L("",!0),e("div",Jd,[e("div",Kd,[e("div",ev,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:ue({width:`${D.value}%`})},null,4)]),e("span",tv,r(C.value.length)+" / "+r(((U=s.step.requiredConnections)==null?void 0:U.length)||s.step.words.length),1)]),e("div",{class:z(["step-feedback",W.value])},r(_.value),3)]),e("div",sv,[C.value.length>0&&!S.value?(t(),n("button",{key:0,onClick:P,class:"px-6 py-3 rounded-full font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors"}," Reset ")):L("",!0),S.value?(t(),n("button",{key:1,onClick:I[3]||(I[3]=H=>j.$emit("complete",!0)),class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-indigo-600 to-purple-600 shadow-md hover:shadow-lg transition-all"}," Constellation Complete! ‚Üí ")):L("",!0)])])}}},nv=pe(av,[["__scopeId","data-v-626106ed"]]),lv={class:"interactive-step step-animate-in"},ov={class:"text-center mb-6"},rv={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},iv={class:"mb-8"},cv={class:"target-pattern-card"},uv={class:"waveform-container mb-4"},dv={class:"flex justify-center gap-2 mb-3"},vv={class:"text-lg text-gray-800 font-medium text-center"},mv={class:"text-sm text-gray-500 text-center mt-2"},gv={class:"space-y-4 mb-6"},pv=["onClick"],fv={class:"mini-waveform"},hv={class:"flex-1"},bv={class:"text-gray-800 font-medium"},xv={key:0,class:"text-sm text-green-600 mt-1"},yv=["onClick"],kv={key:0,class:"selection-indicator"},wv={key:0,class:"mb-6 p-4 bg-blue-50 rounded-xl border border-blue-200"},_v={class:"flex items-start gap-3"},$v={class:"text-blue-700 text-sm"},Cv={class:"flex justify-start gap-3 mt-4"},Sv=["disabled"],Tv={__name:"LanguageRhythmMatch",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=i;let c=null;const l=u(null),d=u(!1),v=u(""),m=u(!1),k=B(()=>v.value?m.value?"success":"error":"");xe(()=>a.step,()=>{l.value=null,d.value=!1,v.value="",m.value=!1},{immediate:!0});const q=f=>{console.log("Selected option:",f),!d.value&&(l.value=f,v.value="")},T=f=>parseInt(a.step.correctIndex)===f,_=()=>{if(console.log("Check Answer clicked"),console.log("Selected Option:",l.value),console.log("Correct Index:",a.step.correctIndex),l.value===null){console.log("No option selected");return}d.value=!0;const f=parseInt(a.step.correctIndex),p=parseInt(l.value);console.log("Parsed Correct Index:",f),console.log("Parsed Selected Index:",p),m.value=!isNaN(f)&&p===f,console.log("Is Correct:",m.value),m.value?(v.value="üéµ Perfect! You matched the rhythm correctly!",h("complete",!0)):(v.value="‚ùå Not quite. Listen to the patterns again - the stress falls on different syllables.",h("complete",!1))},b=f=>{const p=f.join(""),w={"01":"Iambic (da-DUM)",10:"Trochaic (DUM-da)","001":"Anapestic (da-da-DUM)",100:"Dactylic (DUM-da-da)","0101":"Iambic dimeter",1010:"Trochaic dimeter","010101":"Iambic trimeter","01010101":"Iambic tetrameter","0101010101":"Iambic pentameter"};return p.match(/^(01)+$/)?`Iambic (${f.length/2} feet)`:p.match(/^(10)+$/)?`Trochaic (${f.length/2} feet)`:p.match(/^(001)+$/)?`Anapestic (${f.length/3} feet)`:p.match(/^(100)+$/)?`Dactylic (${f.length/3} feet)`:w[p]||"Custom rhythm pattern"},y=async f=>{try{c||(c=new(window.AudioContext||window.webkitAudioContext));const p=300,w=c.currentTime;f.forEach(($,C)=>{const D=c.createOscillator(),S=c.createGain();D.connect(S),S.connect(c.destination),$===1?(D.frequency.value=600,S.gain.value=.5):(D.frequency.value=400,S.gain.value=.2),D.type="sine";const W=w+C*p/1e3,F=.15;S.gain.setValueAtTime(S.gain.value,W),S.gain.exponentialRampToValueAtTime(.01,W+F),D.start(W),D.stop(W+F)})}catch{console.log("Audio not supported")}};return(f,p)=>(t(),n("div",lv,[e("div",ov,[p[2]||(p[2]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-cyan-100 to-teal-100 border border-cyan-200 mb-4"},[e("span",{class:"text-2xl"},"üéµ"),e("span",{class:"font-bold text-cyan-700"},"Rhythm Match")],-1)),e("p",rv,r(s.step.prompt||"Match sentences with the same stress pattern (rhythm)"),1)]),p[10]||(p[10]=We('<div class="flex justify-center gap-6 mb-6" data-v-b7477a30><div class="flex items-center gap-2" data-v-b7477a30><div class="w-4 h-8 rounded bg-cyan-500" data-v-b7477a30></div><span class="text-sm text-gray-600" data-v-b7477a30>Stressed syllable</span></div><div class="flex items-center gap-2" data-v-b7477a30><div class="w-4 h-4 rounded bg-cyan-300" data-v-b7477a30></div><span class="text-sm text-gray-600" data-v-b7477a30>Unstressed syllable</span></div></div>',1)),e("div",iv,[p[4]||(p[4]=e("div",{class:"text-center mb-3"},[e("span",{class:"text-sm font-bold text-gray-500 uppercase tracking-wider"},"Target Rhythm Pattern")],-1)),e("div",cv,[e("div",uv,[(t(!0),n(J,null,K(s.step.targetPattern,(w,$)=>(t(),n("div",{key:$,class:z(["waveform-bar",w===1?"stressed":"unstressed"]),style:ue({animationDelay:$*.1+"s"})},null,6))),128))]),e("div",dv,[(t(!0),n(J,null,K(s.step.targetPattern,(w,$)=>(t(),n("span",{key:`notation-${$}`,class:"text-2xl"},r(w===1?"‚óè":"‚óã"),1))),128))]),e("p",vv,' "'+r(s.step.targetSentence)+'" ',1),e("p",mv,r(b(s.step.targetPattern)),1),e("button",{onClick:p[0]||(p[0]=w=>y(s.step.targetPattern)),class:"mt-4 mx-auto flex items-center gap-2 px-4 py-2 rounded-full bg-cyan-100 hover:bg-cyan-200 text-cyan-700 font-medium transition-colors"},p[3]||(p[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ge(" Hear Rhythm ")]))])]),e("div",gv,[p[7]||(p[7]=e("p",{class:"text-center text-gray-600 font-medium"},"Which sentence has the same rhythm?",-1)),(t(!0),n(J,null,K(s.step.options,(w,$)=>(t(),n("div",{key:$,onClick:C=>q($),class:z(["option-card",{selected:l.value===$,correct:d.value&&T($),incorrect:d.value&&l.value===$&&!T($)}])},[e("div",fv,[(t(!0),n(J,null,K(w.pattern,(C,D)=>(t(),n("div",{key:D,class:z(["mini-bar",C===1?"stressed":"unstressed"])},null,2))),128))]),e("div",hv,[e("p",bv,r(w.sentence),1),d.value&&T($)?(t(),n("p",xv," Pattern: "+r(w.pattern.map(C=>C===1?"‚óè":"‚óã").join(" ")),1)):L("",!0)]),e("button",{onClick:Se(C=>y(w.pattern),["stop"]),class:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors"},p[5]||(p[5]=[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})],-1)]),8,yv),l.value===$?(t(),n("div",kv,p[6]||(p[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):L("",!0)],10,pv))),128))]),me($e,{name:"slide-fade"},{default:ye(()=>[d.value&&s.step.explanation?(t(),n("div",wv,[e("div",_v,[p[9]||(p[9]=e("span",{class:"text-xl"},"üí°",-1)),e("div",null,[p[8]||(p[8]=e("p",{class:"font-semibold text-blue-800 mb-1"},"Understanding Rhythm",-1)),e("p",$v,r(s.step.explanation),1)])])])):L("",!0)]),_:1}),e("div",{class:z(["step-feedback",k.value])},r(v.value),3),e("div",Cv,[d.value?(t(),n("button",{key:1,onClick:p[1]||(p[1]=w=>f.$emit("complete",m.value)),class:z(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-all",m.value?"bg-gradient-to-r from-green-500 to-emerald-600":"bg-gradient-to-r from-cyan-600 to-teal-600"])},r(m.value?"Continue ‚Üí":"Try Another ‚Üí"),3)):(t(),n("button",{key:0,onClick:_,disabled:l.value===null,class:z(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-all active:scale-95",l.value!==null?"bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-700 hover:to-teal-700":"bg-gray-300 cursor-not-allowed"])}," Check Rhythm ",10,Sv))])]))}},Mv=pe(Tv,[["__scopeId","data-v-b7477a30"]]),Av={class:"interactive-step step-animate-in"},Iv={class:"text-center mb-6"},Dv={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},jv={class:"flex items-center justify-center gap-4 mb-6"},Lv={class:"text-2xl"},qv={class:"font-bold text-gray-700"},Ev={class:"font-bold text-gray-700"},Wv={class:"text-2xl"},Bv={class:"case-file mb-8"},Pv={class:"case-header"},zv={class:"case-number"},Rv={class:"word-comparison"},Nv={class:"language-badge"},Fv={class:"word-display"},Vv={class:"word-text"},Ov={key:0,class:"word-meaning"},Gv={key:0,class:"word-mystery"},Hv={class:"comparison-center"},Qv={key:0},Uv={key:1},Yv={key:2},Xv={key:0,class:"comparison-label"},Zv={class:"language-badge"},Jv={class:"word-display"},Kv={class:"word-text"},e0={key:0,class:"word-meaning"},t0={key:0,class:"word-mystery"},s0={key:0,class:"guess-buttons"},a0={key:0,class:"explanation-box"},n0={class:"explanation-text"},l0={key:0,class:"examples-grid"},o0={key:0,class:"example-item"},r0={class:"example-lang"},i0={class:"example-text"},c0={key:1,class:"example-item"},u0={class:"example-lang"},d0={class:"example-text"},v0={class:"progress-tracker mb-6"},m0={class:"progress-dots"},g0={key:0},p0={key:1},f0={key:2},h0={class:"progress-score"},b0={class:"score-correct"},x0={class:"score-total"},y0={class:"flex justify-start gap-3 mt-4"},k0={class:"results-modal"},w0={class:"results-header"},_0={class:"text-4xl"},$0={class:"results-score"},C0={class:"score-circle"},S0={class:"score-number"},T0={class:"score-label"},M0={class:"score-message"},A0={class:"results-breakdown"},I0={class:"result-words"},D0={class:"result-type"},j0={class:"result-status"},L0={__name:"LanguageFalseFriends",props:{step:{type:Object,required:!0}},emits:["complete"],setup(s,{emit:i}){const a=s,h=u(0),c=u(!1),l=u({}),d=u(""),v=u(!1),m=B(()=>a.step.words[h.value]||{}),k=B(()=>Object.values(l.value).filter($=>$==="correct").length),q=B(()=>h.value>=a.step.words.length-1&&c.value),T=B(()=>d.value?d.value.includes("‚úì")||d.value.includes("üéâ")?"success":"error":"");xe(()=>a.step,()=>{h.value=0,c.value=!1,l.value={},d.value="",v.value=!1},{immediate:!0});const _=$=>{const C=$===m.value.isFalseFriend;c.value=!0,l.value[h.value]=C?"correct":"incorrect",C?d.value=m.value.isFalseFriend?"‚úì Correct! This is indeed a false friend - the words look similar but mean different things!":"‚úì Correct! These are true cognates with the same meaning.":d.value=m.value.isFalseFriend?"‚úó Actually, this is a false friend! Despite looking similar, they have different meanings.":"‚úó Actually, these are true cognates - they share the same meaning across both languages."},b=()=>{h.value<a.step.words.length-1?(h.value++,c.value=!1,d.value=""):v.value=!0},y=()=>c.value?l.value[h.value]||"pending":"investigating",f=()=>c.value?l.value[h.value]==="correct"?"Solved!":"Missed!":"Investigating...",p=()=>{const $=k.value/a.step.words.length;return $>=.9?"Master Detective! You have an excellent eye for false friends!":$>=.7?"Great detective work! You caught most of the tricky words.":$>=.5?"Good effort! Keep practicing to spot more false friends.":"These sneaky words fooled you! Study the explanations to learn the differences."},w=$=>({English:"üá¨üáß",Spanish:"üá™üá∏",French:"üá´üá∑",German:"üá©üá™",Italian:"üáÆüáπ",Russian:"üá∑üá∫",Portuguese:"üáµüáπ",Polish:"üáµüá±",Dutch:"üá≥üá±",Swedish:"üá∏üá™"})[$]||"üåç";return($,C)=>(t(),n("div",Av,[e("div",Iv,[C[5]||(C[5]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-rose-100 to-orange-100 border border-rose-200 mb-4"},[e("span",{class:"text-2xl"},"üîç"),e("span",{class:"font-bold text-rose-700"},"False Friends Detective")],-1)),e("p",Dv,r(s.step.prompt||"Identify words that look similar but have different meanings!"),1)]),e("div",jv,[e("span",Lv,r(w(s.step.language1)),1),e("span",qv,r(s.step.language1),1),C[6]||(C[6]=e("span",{class:"text-2xl text-rose-500"},"‚ö°",-1)),e("span",Ev,r(s.step.language2),1),e("span",Wv,r(w(s.step.language2)),1)]),e("div",Bv,[e("div",Pv,[e("span",zv,"Case #"+r(h.value+1),1),e("span",{class:z(["case-status",y()])},r(f()),3)]),e("div",Rv,[e("div",{class:z(["word-card",{revealed:c.value}])},[e("div",Nv,r(s.step.language1),1),e("div",Fv,[e("span",Vv,r(m.value.word1),1),c.value?(t(),n("span",Ov,r(m.value.meaning1),1)):L("",!0)]),c.value?L("",!0):(t(),n("div",Gv,"?"))],2),e("div",Hv,[e("div",{class:z(["comparison-icon",{"false-friend":c.value&&m.value.isFalseFriend}])},[c.value?m.value.isFalseFriend?(t(),n("span",Uv,"‚ö†Ô∏è")):(t(),n("span",Yv,"‚úì")):(t(),n("span",Qv,"ü§î"))],2),c.value?(t(),n("div",Xv,r(m.value.isFalseFriend?"FALSE FRIEND!":"True cognate"),1)):L("",!0)]),e("div",{class:z(["word-card",{revealed:c.value}])},[e("div",Zv,r(s.step.language2),1),e("div",Jv,[e("span",Kv,r(m.value.word2),1),c.value?(t(),n("span",e0,r(m.value.meaning2),1)):L("",!0)]),c.value?L("",!0):(t(),n("div",t0,"?"))],2)]),c.value?L("",!0):(t(),n("div",s0,[e("button",{onClick:C[0]||(C[0]=D=>_(!0)),class:"guess-btn false-friend-btn"},C[7]||(C[7]=[e("span",{class:"text-2xl mb-1"},"‚ö†Ô∏è",-1),e("span",{class:"font-bold"},"False Friend",-1),e("span",{class:"text-sm opacity-75"},"Different meanings",-1)])),e("button",{onClick:C[1]||(C[1]=D=>_(!1)),class:"guess-btn true-cognate-btn"},C[8]||(C[8]=[e("span",{class:"text-2xl mb-1"},"‚úì",-1),e("span",{class:"font-bold"},"True Cognate",-1),e("span",{class:"text-sm opacity-75"},"Same meaning",-1)]))])),me($e,{name:"slide-up"},{default:ye(()=>[c.value&&m.value.explanation?(t(),n("div",a0,[C[9]||(C[9]=e("div",{class:"explanation-header"},[e("span",{class:"text-lg"},"üí°"),e("span",{class:"font-bold"},"Detective Notes")],-1)),e("p",n0,r(m.value.explanation),1),m.value.example1||m.value.example2?(t(),n("div",l0,[m.value.example1?(t(),n("div",o0,[e("span",r0,r(s.step.language1)+":",1),e("span",i0,'"'+r(m.value.example1)+'"',1)])):L("",!0),m.value.example2?(t(),n("div",c0,[e("span",u0,r(s.step.language2)+":",1),e("span",d0,'"'+r(m.value.example2)+'"',1)])):L("",!0)])):L("",!0)])):L("",!0)]),_:1})]),e("div",v0,[e("div",m0,[(t(!0),n(J,null,K(s.step.words,(D,S)=>(t(),n("div",{key:S,class:z(["progress-dot",{current:S===h.value,correct:l.value[S]==="correct",incorrect:l.value[S]==="incorrect",pending:!l.value[S]&&S!==h.value}])},[l.value[S]==="correct"?(t(),n("span",g0,"‚úì")):l.value[S]==="incorrect"?(t(),n("span",p0,"‚úó")):(t(),n("span",f0,r(S+1),1))],2))),128))]),e("div",h0,[e("span",b0,r(k.value)+" correct",1),C[10]||(C[10]=e("span",{class:"score-divider"},"/",-1)),e("span",x0,r(s.step.words.length)+" total",1)])]),e("div",{class:z(["step-feedback",T.value])},r(d.value),3),e("div",y0,[c.value&&!q.value?(t(),n("button",{key:0,onClick:b,class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-rose-500 to-orange-500 shadow-md hover:shadow-lg transition-all"}," Next Case ‚Üí ")):L("",!0),q.value?(t(),n("button",{key:1,onClick:C[2]||(C[2]=D=>v.value=!0),class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 shadow-md hover:shadow-lg transition-all"},r(k.value>=s.step.words.length/2?"Case Closed! ‚Üí":"Review Results ‚Üí"),1)):L("",!0)]),me($e,{name:"modal"},{default:ye(()=>[v.value?(t(),n("div",{key:0,class:"results-overlay",onClick:C[4]||(C[4]=Se(D=>v.value=!1,["self"]))},[e("div",k0,[e("div",w0,[e("span",_0,r(k.value>=s.step.words.length/2?"üèÜ":"üìö"),1),C[11]||(C[11]=e("h3",null,"Investigation Complete!",-1))]),e("div",$0,[e("div",C0,[e("span",S0,r(k.value),1),e("span",T0,"/ "+r(s.step.words.length),1)]),e("p",M0,r(p()),1)]),e("div",A0,[(t(!0),n(J,null,K(s.step.words,(D,S)=>(t(),n("div",{key:S,class:z(["result-item",l.value[S]])},[e("span",I0,r(D.word1)+" ‚Üî "+r(D.word2),1),e("span",D0,r(D.isFalseFriend?"‚ö†Ô∏è False Friend":"‚úì Cognate"),1),e("span",j0,r(l.value[S]==="correct"?"‚úì":"‚úó"),1)],2))),128))]),e("button",{onClick:C[3]||(C[3]=D=>$.$emit("complete",k.value>=s.step.words.length/2)),class:"results-close-btn"}," Continue ")])])):L("",!0)]),_:1})]))}},q0=pe(L0,[["__scopeId","data-v-8ce386f3"]]),E0={key:0,class:"game-full-container"},W0={key:1,class:"w-full h-full overflow-y-auto"},B0={class:"bg-white p-4 sm:p-8 min-h-full"},P0={class:"text-center mb-6 sm:mb-8"},z0={class:"flex items-center justify-center gap-2 mt-3"},R0={class:"text-sm sm:text-base font-semibold text-slate-900"},N0={class:"mb-6 sm:mb-8"},F0={class:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 shadow-lg rounded-2xl p-4 sm:p-6 text-center"},V0={class:"text-lg sm:text-2xl font-bold text-slate-900 mb-2"},O0={class:"text-sm sm:text-base text-purple-600"},G0={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6"},H0=["onClick","disabled"],Q0={class:"flex flex-col items-center justify-center h-full p-2 sm:p-4"},U0=["src","alt"],Y0={class:"text-xs sm:text-sm font-medium text-slate-700"},X0={key:2,class:"exercise-scroll-container"},Z0={class:"exercise-content"},J0={key:0,class:"text-center mb-6 sm:mb-8"},K0={class:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm sm:text-base shadow-lg"},em={class:"text-xl sm:text-2xl md:text-3xl font-bold text-slate-900 mb-2"},tm={key:0,class:"text-slate-500 text-sm sm:text-base max-w-xl mx-auto"},sm={key:1,class:"exercise-card"},am={class:"mb-4 sm:mb-6"},nm={class:"inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 font-semibold text-xs sm:text-sm"},lm={class:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 leading-relaxed mb-6 sm:mb-8"},om={class:"space-y-2 sm:space-y-3"},rm=["onClick","disabled"],im={class:"option-text"},cm={key:0,class:"option-check"},um={class:"feedback-icon"},dm={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vm={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mm={class:"font-bold text-sm sm:text-base"},gm={key:0,class:"text-xs sm:text-sm mt-1"},pm={key:2,class:"exercise-card text-center"},fm={class:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 leading-relaxed mb-6 sm:mb-8"},hm={class:"flex justify-center gap-4 sm:gap-6"},bm=["disabled"],xm=["disabled"],ym={class:"feedback-icon"},km={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wm={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_m={class:"font-bold text-sm sm:text-base"},$m={key:0,class:"text-xs sm:text-sm mt-1"},Cm={key:4,class:"exercise-card"},Sm={class:"mb-4"},Tm={class:"inline-flex items-center px-3 py-1 rounded-full bg-slate-100 text-slate-600 font-semibold text-xs sm:text-sm"},Mm={key:0,class:"text-lg sm:text-xl font-bold text-slate-900 leading-relaxed mb-4"},Am=["disabled"],Im={class:"feedback-icon"},Dm={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},jm={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Lm={class:"font-bold"},qm={key:0,class:"text-sm mt-1"},Em={key:5,class:"mt-6 flex justify-end"},Wm=["disabled"],Bm={key:3,class:"flex-1 flex items-center justify-center"},Pm={__name:"InteractivePanel",props:{currentExercise:Object,exerciseIndex:Number,totalExercises:Number,userId:String,lessonId:String,stepIndex:Number},emits:["submit","next-exercise"],setup(s,{emit:i}){const a=s,h=i,{userAnswer:c,answerWasCorrect:l,showCorrectAnswer:d,submitAnswer:v,resetExerciseState:m}=$n(),k=["histogram","map","block-coding","data_analysis","fraction_visual","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","geometry","language_tone_transformer","language_idiom_bridge","language_word_constellation","language_rhythm_match","language_false_friends"],q=["multiple-choice","multiple_choice","abc","quiz","dialogue-completion","mcq","choice"],T=["true-false","true_false","boolean","tf"],_=B(()=>{var oe,ke,Le,Fe,Ae;if(!a.currentExercise)return"short-answer";const A=a.currentExercise,O=[A.exerciseType,(oe=A.content)==null?void 0:oe.type,(ke=A.data)==null?void 0:ke.type,A.type].filter(Boolean);if(A.type==="exercise"){if((Le=A.content)!=null&&Le.type)return A.content.type;if((Fe=A.data)!=null&&Fe.type)return A.data.type}const Z=O.find(Ve=>k.includes(Ve));return Z||(A.options&&Array.isArray(A.options)&&A.options.length>0||(Ae=A.content)!=null&&Ae.options&&Array.isArray(A.content.options)?"multiple-choice":O[0]||A.type||"short-answer")}),b=B(()=>{var Z,oe;const A=(Z=_.value)==null?void 0:Z.toLowerCase();if(k.includes(A))return!1;if(q.some(ke=>A==null?void 0:A.includes(ke)))return!0;const O=a.currentExercise;return!!(O!=null&&O.options&&Array.isArray(O.options)&&O.options.length>=2||(oe=O==null?void 0:O.content)!=null&&oe.options&&Array.isArray(O.content.options))}),y=B(()=>T.some(A=>{var O,Z;return(Z=(O=_.value)==null?void 0:O.toLowerCase())==null?void 0:Z.includes(A)})),f=B(()=>k.includes(_.value)),p=B(()=>{if(!a.currentExercise)return{};const A=a.currentExercise;return A.content&&typeof A.content=="object"?A.content:A.data&&typeof A.data=="object"&&!Array.isArray(A.data)?A.data:A}),w=B(()=>{var A,O,Z,oe;return((A=a.currentExercise)==null?void 0:A.title)||((Z=(O=a.currentExercise)==null?void 0:O.content)==null?void 0:Z.title)||((oe=p.value)==null?void 0:oe.title)||"Exercise"}),$=B(()=>{var A,O,Z,oe;return((A=a.currentExercise)==null?void 0:A.instructions)||((O=a.currentExercise)==null?void 0:O.description)||((oe=(Z=a.currentExercise)==null?void 0:Z.content)==null?void 0:oe.description)||""}),C=B(()=>{const A=_.value;return A==="quiz"?"Quiz Question":q.includes(A)?"Multiple Choice":"Question"}),D=B(()=>{var A,O,Z,oe,ke,Le;return((A=a.currentExercise)==null?void 0:A.question)||((Z=(O=a.currentExercise)==null?void 0:O.content)==null?void 0:Z.question)||((ke=(oe=a.currentExercise)==null?void 0:oe.data)==null?void 0:ke.question)||((Le=a.currentExercise)==null?void 0:Le.prompt)||"Select the correct answer"}),S=B(()=>{var O,Z;const A=a.currentExercise;return A!=null&&A.options&&Array.isArray(A.options)?A.options:(O=A==null?void 0:A.content)!=null&&O.options&&Array.isArray(A.content.options)?A.content.options:(Z=A==null?void 0:A.data)!=null&&Z.options&&Array.isArray(A.data.options)?A.data.options:[]}),W=A=>typeof A=="string"?A:typeof A=="number"?String(A):A!=null&&A.text?A.text:A!=null&&A.label?A.label:A!=null&&A.value?A.value:String(A),F=B(()=>{var Z;const A=a.currentExercise;if(typeof(A==null?void 0:A.correctAnswer)=="number")return A.correctAnswer;if(typeof((Z=A==null?void 0:A.content)==null?void 0:Z.correctAnswer)=="number")return A.content.correctAnswer;if(typeof(A==null?void 0:A.correctAnswerIndex)=="number")return A.correctAnswerIndex;if((A==null?void 0:A.correctAnswer)!==void 0){const oe=S.value.findIndex(ke=>W(ke)===String(A.correctAnswer)||ke===A.correctAnswer);if(oe!==-1)return oe}const O=S.value.findIndex(oe=>(oe==null?void 0:oe.isCorrect)===!0);return O!==-1?O:0}),se=B(()=>b.value||y.value?c.value!==null&&c.value!==void 0:c.value!==null&&c.value!==void 0&&c.value!==""),V=A=>{d.value||(c.value=A)},Y=A=>{const O=c.value===A,Z=A===F.value;return d.value?Z?"option-correct":O&&!Z?"option-incorrect":"option-disabled":O?"option-selected":"option-default"},ee=A=>{const O=c.value===A,Z=A===F.value;return d.value?Z?"letter-correct":O&&!Z?"letter-incorrect":"letter-disabled":O?"letter-selected":"letter-default"},ae=()=>{v(a.currentExercise),h("submit")},ce=()=>{h("next-exercise")},ie=A=>{A&&(l.value=!0,d.value=!0)},fe=u({side_b:null}),R=A=>{l.value=A.isCorrect,d.value=!0,A.isCorrect&&setTimeout(()=>h("next-exercise"),1500)},M=B(()=>a.currentExercise?a.currentExercise.type==="game"||!!a.currentExercise.gameType||["basket-catch","whack-a-mole"].includes(a.currentExercise.type):!1),P=B(()=>M.value?a.currentExercise.gameType||a.currentExercise.type||"basket-catch":null),j=B(()=>M.value?{...a.currentExercise,...a.currentExercise.gameData}:null),I=A=>{l.value=A.completed||A.stars>=2,d.value=!0,setTimeout(()=>h("next-exercise"),1500)},U=()=>{m(),d.value=!1},H=B(()=>{var A,O,Z;return((A=a.currentExercise)==null?void 0:A.type)==="selection_game"||((Z=(O=a.currentExercise)==null?void 0:O.content)==null?void 0:Z.type)==="selection_game"}),te=B(()=>H.value?p.value||a.currentExercise:{questions:[]}),{score:le,currentQuestion:he,questions:je,selectedItemId:Be,feedback:Te,handleSelection:Pe}=Cn(te);return xe(()=>a.currentExercise,()=>{m(),c.value=null},{immediate:!0}),(A,O)=>(t(),n("div",{class:z(["interactive-panel-wrapper",{"is-game-mode":M.value}])},[M.value?(t(),n("div",E0,[me(po,{"game-data":j.value,"game-type":P.value,"user-id":s.userId,"lesson-id":s.lessonId,"step-index":s.stepIndex,onGameComplete:I,onGameExit:U},null,8,["game-data","game-type","user-id","lesson-id","step-index"])])):H.value&&ne(he)?(t(),n("div",W0,[e("div",B0,[e("div",P0,[O[9]||(O[9]=e("h1",{class:"text-xl sm:text-2xl font-bold text-slate-900 mb-2"}," Shape Recognition Lesson ",-1)),O[10]||(O[10]=e("p",{class:"text-sm sm:text-base text-purple-600"}," Click on the correct shape! ",-1)),e("div",z0,[O[8]||(O[8]=e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500 fill-yellow-500",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)),e("span",R0," Score: "+r(ne(le))+" / "+r(ne(je).length),1)])]),e("div",N0,[e("div",F0,[e("h2",V0,r(ne(he).prompt),1),e("p",O0,r(ne(he).hint||"Click on the shape below"),1)])]),e("div",G0,[(t(!0),n(J,null,K(ne(he).items,(Z,oe)=>(t(),n("button",{key:Z.id,onClick:ke=>ne(Pe)(Z),disabled:ne(Te)!==null,class:z(["relative w-full aspect-square rounded-2xl border-4 transition-all duration-200",[ne(Be)===Z.id&&ne(Te)==="correct"?"border-green-500 bg-green-50":ne(Be)===Z.id&&ne(Te)==="incorrect"?"border-red-500 bg-red-50":"border-purple-200 bg-white hover:border-purple-400 hover:shadow-lg",ne(Te)!==null?"cursor-not-allowed":"cursor-pointer"]])},[e("div",Q0,[Z.image?(t(),n("img",{key:0,src:Z.image,alt:Z.name,class:"w-16 h-16 sm:w-24 sm:h-24 object-contain mb-2"},null,8,U0)):L("",!0),e("p",Y0,r(Z.name),1)])],10,H0))),128))])])])):s.currentExercise?(t(),n("div",X0,[e("div",Z0,[f.value?L("",!0):(t(),n("header",J0,[e("div",K0,r(s.exerciseIndex+1),1),e("h2",em,r(w.value),1),$.value?(t(),n("p",tm,r($.value),1)):L("",!0)])),b.value?(t(),n("div",sm,[e("div",am,[e("span",nm,r(C.value),1)]),e("h3",lm,r(D.value),1),e("div",om,[(t(!0),n(J,null,K(S.value,(Z,oe)=>(t(),n("button",{key:oe,onClick:ke=>V(oe),disabled:ne(d),class:z(["option-btn",Y(oe)])},[e("div",{class:z(["option-letter",ee(oe)])},r(String.fromCharCode(65+oe)),3),e("span",im,r(W(Z)),1),ne(c)===oe?(t(),n("div",cm,O[11]||(O[11]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M5 13l4 4L19 7"})],-1)]))):L("",!0)],10,rm))),128))]),me($e,{name:"slide-fade"},{default:ye(()=>[ne(d)?(t(),n("div",{key:0,class:z(["feedback-box mt-6",ne(l)?"feedback-success":"feedback-error"])},[e("div",um,[ne(l)?(t(),n("svg",dm,O[12]||(O[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(t(),n("svg",vm,O[13]||(O[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])))]),e("div",null,[e("h4",mm,r(ne(l)?"Correct! üéâ":"Not quite right"),1),ne(l)?L("",!0):(t(),n("p",gm,[O[14]||(O[14]=ge(" The correct answer is: ")),e("strong",null,r(String.fromCharCode(65+F.value)),1)]))])],2)):L("",!0)]),_:1})])):y.value?(t(),n("div",pm,[O[20]||(O[20]=e("div",{class:"mb-4 sm:mb-6"},[e("span",{class:"inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-cyan-100 to-blue-100 text-cyan-700 font-semibold text-xs sm:text-sm"}," True or False ")],-1)),e("h3",fm,r(D.value),1),e("div",hm,[e("button",{onClick:O[0]||(O[0]=Z=>c.value=!0),disabled:ne(d),class:z(["tf-btn",ne(c)===!0?"tf-true-selected":"tf-default"])},O[15]||(O[15]=[e("span",{class:"text-3xl mb-1"},"üëç",-1),e("span",{class:"text-sm sm:text-base font-bold"},"True",-1)]),10,bm),e("button",{onClick:O[1]||(O[1]=Z=>c.value=!1),disabled:ne(d),class:z(["tf-btn",ne(c)===!1?"tf-false-selected":"tf-default"])},O[16]||(O[16]=[e("span",{class:"text-3xl mb-1"},"üëé",-1),e("span",{class:"text-sm sm:text-base font-bold"},"False",-1)]),10,xm)]),me($e,{name:"slide-fade"},{default:ye(()=>[ne(d)?(t(),n("div",{key:0,class:z(["feedback-box mt-6 mx-auto max-w-sm",ne(l)?"feedback-success":"feedback-error"])},[e("div",ym,[ne(l)?(t(),n("svg",km,O[17]||(O[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(t(),n("svg",wm,O[18]||(O[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])))]),e("div",null,[e("h4",_m,r(ne(l)?"Correct! üéâ":"Not Quite"),1),ne(l)?L("",!0):(t(),n("p",$m,[O[19]||(O[19]=ge(" The statement is actually ")),e("strong",null,r(s.currentExercise.correctAnswer?"True":"False"),1)]))])],2)):L("",!0)]),_:1})])):f.value?(t(),n(J,{key:3},[_.value==="histogram"?(t(),de(No,{key:0,title:p.value.title||w.value,description:p.value.description||$.value,data:p.value.data,correctValue:p.value.correctValue,min:p.value.min||0,max:p.value.max||1e5,step:p.value.step||100,onComplete:ie,onNext:O[2]||(O[2]=Z=>h("next-exercise"))},null,8,["title","description","data","correctValue","min","max","step"])):_.value==="map"?(t(),de(gr,{key:1,title:p.value.title||w.value,description:p.value.description||$.value,image:p.value.image,markers:p.value.markers,onComplete:ie,onNext:O[3]||(O[3]=Z=>h("next-exercise"))},null,8,["title","description","image","markers"])):_.value==="block-coding"?(t(),de(Pr,{key:2,type:p.value.subtype||p.value.type||"maze",title:p.value.title||w.value,description:p.value.description||$.value,availableBlocks:p.value.availableBlocks,config:p.value.config,onComplete:ie,onNext:O[4]||(O[4]=Z=>h("next-exercise"))},null,8,["type","title","description","availableBlocks","config"])):_.value==="geometry"?(t(),de(di,{key:3,geometryData:p.value,userAnswer:fe.value,"onUpdate:userAnswer":O[5]||(O[5]=Z=>fe.value=Z),onSubmit:R,onNextExercise:O[6]||(O[6]=Z=>h("next-exercise"))},null,8,["geometryData","userAnswer"])):_.value==="data_analysis"?(t(),de(Li,{key:4,step:p.value,onComplete:ie},null,8,["step"])):_.value==="fraction_visual"?(t(),de(Gi,{key:5,step:p.value,onComplete:ie},null,8,["step"])):_.value==="geometry_poly"?(t(),de(oc,{key:6,step:p.value,onComplete:ie},null,8,["step"])):_.value==="chem_mixing"?(t(),de(Dc,{key:7,step:p.value,onComplete:ie},null,8,["step"])):_.value==="chem_matching"?(t(),de(Vc,{key:8,step:p.value,onComplete:ie},null,8,["step"])):_.value==="english_sentence_fix"?(t(),de(su,{key:9,step:p.value,onComplete:ie},null,8,["step"])):_.value==="english_sentence_order"?(t(),de(uu,{key:10,step:p.value,onComplete:ie},null,8,["step"])):_.value==="language_noun_bag"?(t(),de(Cu,{key:11,step:p.value,onComplete:ie},null,8,["step"])):_.value==="language_tone_transformer"?(t(),de(ad,{key:12,step:p.value,onComplete:ie},null,8,["step"])):_.value==="language_idiom_bridge"?(t(),de(Ld,{key:13,step:p.value,onComplete:ie},null,8,["step"])):_.value==="language_word_constellation"?(t(),de(nv,{key:14,step:p.value,onComplete:ie},null,8,["step"])):_.value==="language_rhythm_match"?(t(),de(Mv,{key:15,step:p.value,onComplete:ie},null,8,["step"])):_.value==="language_false_friends"?(t(),de(q0,{key:16,step:p.value,onComplete:ie},null,8,["step"])):L("",!0)],64)):(t(),n("div",Cm,[e("div",Sm,[e("span",Tm,r(_.value||"Exercise"),1)]),D.value?(t(),n("h3",Mm,r(D.value),1)):L("",!0),Ee(e("textarea",{"onUpdate:modelValue":O[7]||(O[7]=Z=>ks(c)?c.value=Z:null),placeholder:"Type your answer here...",disabled:ne(d),class:"w-full p-3 sm:p-4 rounded-xl border-2 border-slate-200 bg-slate-50 focus:bg-white focus:border-purple-500 focus:ring-0 transition-all outline-none resize-none h-32 text-base text-slate-800 placeholder-slate-400"},null,8,Am),[[Re,ne(c)]]),me($e,{name:"slide-fade"},{default:ye(()=>[ne(d)?(t(),n("div",{key:0,class:z(["feedback-box mt-4",ne(l)?"feedback-success":"feedback-error"])},[e("div",Im,[ne(l)?(t(),n("svg",Dm,O[21]||(O[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(t(),n("svg",jm,O[22]||(O[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])))]),e("div",null,[e("h4",Lm,r(ne(l)?"Great job!":"Here's the answer:"),1),ne(l)?L("",!0):(t(),n("p",qm,r(s.currentExercise.correctAnswer),1))])],2)):L("",!0)]),_:1})])),f.value?L("",!0):(t(),n("footer",Em,[ne(d)?(t(),n("button",{key:1,onClick:ce,class:"btn-success"}," Continue ‚Üí ")):(t(),n("button",{key:0,onClick:ae,disabled:!se.value,class:"btn-primary"}," Check Answer ",8,Wm))]))])])):(t(),n("div",Bm,O[23]||(O[23]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600 mx-auto mb-4"}),e("p",{class:"text-slate-500 text-sm"},"Loading exercise...")],-1)])))],2))}},zm=pe(Pm,[["__scopeId","data-v-d00732f2"]]),Rm={name:"CompletionScreen",props:{lesson:{type:Object,required:!0},readableTime:{type:String,required:!0},stars:{type:Number,required:!0},mistakeCount:{type:Number,required:!0},earnedPoints:{type:Number,required:!0},medalLabel:{type:String,required:!0},medalIcon:{type:String,required:!0},progressInsight:{type:String,default:""},totalSteps:{type:Number,default:1}},emits:["return-to-catalogue","share","homework"],computed:{medalBgClass(){return this.mistakeCount===0?"bg-amber-100":this.mistakeCount<=2?"bg-slate-100":"bg-orange-100"},accuracyPercentage(){if(this.totalSteps===0)return 100;const s=this.totalSteps-this.mistakeCount;return Math.max(0,Math.round(s/this.totalSteps*100))}}},Nm={class:"fixed inset-0 z-1000 bg-white flex flex-col"},Fm={class:"flex-1 flex flex-col items-center justify-center px-6 py-10 overflow-y-auto"},Vm={class:"w-full max-w-md text-center flex flex-col gap-8"},Om={class:"flex flex-col gap-4"},Gm={class:"text-2xl sm:text-3xl font-bold text-slate-900 mt-2"},Hm={class:"flex justify-center gap-10 py-4"},Qm={class:"text-center"},Um={class:"text-3xl font-bold text-slate-900"},Ym={class:"text-center"},Xm={class:"text-3xl font-bold text-slate-900"},Zm={class:"text-center"},Jm={class:"text-3xl font-bold text-slate-900"},Km={class:"bg-slate-50 rounded-2xl p-5"},eg={class:"flex items-center justify-between mb-3"},tg={class:"text-sm font-bold text-slate-900"},sg={class:"h-2.5 bg-slate-200 rounded-full overflow-hidden"},ag={key:0,class:"text-sm text-emerald-600 mt-3 font-medium"},ng={key:1,class:"text-sm text-slate-400 mt-3"},lg={key:0,class:"bg-slate-50 rounded-2xl p-5 text-left"},og={class:"text-sm text-slate-600 leading-relaxed"},rg={class:"px-6 pb-8 pt-4 border-t border-slate-100 bg-white"},ig={class:"max-w-md mx-auto space-y-4"},cg={class:"flex gap-4"};function ug(s,i,a,h,c,l){return t(),n("div",Nm,[i[9]||(i[9]=e("div",{class:"flex items-center justify-center px-4 py-4 border-b border-slate-100"},[e("span",{class:"text-xs font-medium text-slate-400 uppercase tracking-wider"},"Lesson Complete")],-1)),e("div",Fm,[e("div",Vm,[e("div",Om,[e("div",{class:z(["w-24 h-24 mx-auto rounded-full flex items-center justify-center text-5xl",l.medalBgClass])},r(a.medalIcon),3),e("h1",Gm,r(a.medalLabel),1)]),e("div",Hm,[e("div",Qm,[e("div",Um,r(a.readableTime),1),i[3]||(i[3]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"time",-1))]),i[6]||(i[6]=e("div",{class:"w-px bg-slate-200"},null,-1)),e("div",Ym,[e("div",Xm,r(a.stars),1),i[4]||(i[4]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"stars",-1))]),i[7]||(i[7]=e("div",{class:"w-px bg-slate-200"},null,-1)),e("div",Zm,[e("div",Jm,r(a.earnedPoints),1),i[5]||(i[5]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"points",-1))])]),e("div",Km,[e("div",eg,[i[8]||(i[8]=e("span",{class:"text-sm font-medium text-slate-600"},"Accuracy",-1)),e("span",tg,r(l.accuracyPercentage)+"%",1)]),e("div",sg,[e("div",{class:z(["h-full rounded-full transition-all duration-700",l.accuracyPercentage>=80?"bg-emerald-500":l.accuracyPercentage>=50?"bg-amber-500":"bg-red-400"]),style:ue({width:l.accuracyPercentage+"%"})},null,6)]),a.mistakeCount===0?(t(),n("p",ag,"Perfect! No mistakes")):(t(),n("p",ng,r(a.mistakeCount)+" mistake"+r(a.mistakeCount>1?"s":""),1))]),a.progressInsight?(t(),n("div",lg,[e("p",og,r(a.progressInsight),1)])):L("",!0)])]),e("div",rg,[e("div",ig,[e("button",{onClick:i[0]||(i[0]=d=>s.$emit("return-to-catalogue")),class:"w-full py-4 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors text-lg"}," Continue "),e("div",cg,[e("button",{onClick:i[1]||(i[1]=d=>s.$emit("homework")),class:"flex-1 py-3.5 bg-slate-100 text-slate-700 font-medium rounded-xl hover:bg-slate-200 transition-colors"}," Homework "),e("button",{onClick:i[2]||(i[2]=d=>s.$emit("share")),class:"flex-1 py-3.5 bg-slate-100 text-slate-700 font-medium rounded-xl hover:bg-slate-200 transition-colors"}," Share ")]),e("div",null,[ws(s.$slots,"extra-actions",{},void 0,!0)])])])])}const dg=pe(Rm,[["render",ug],["__scopeId","data-v-fa3a10d5"]]),vg={class:"lesson-page"},mg={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-50 p-4"},gg={class:"text-slate-600 font-medium"},pg={key:1,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-50 p-6 text-center"},fg={class:"text-xl font-bold text-slate-800 mb-2"},hg={class:"text-slate-500 mb-6 max-w-sm"},bg={key:0,class:"fixed inset-0 z-[1000] bg-black/40 flex items-center justify-center p-4"},xg={class:"bg-white rounded-2xl w-full max-w-xs p-6 text-center"},yg={class:"space-y-2"},kg={key:0,class:"fixed inset-0 z-[1000] bg-black/40 flex items-center justify-center p-4"},wg={class:"bg-white rounded-2xl w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col"},_g={class:"flex-1 overflow-y-auto px-5 py-4 space-y-4"},$g={key:0,class:"mt-1 text-xs text-red-500"},Cg={class:"px-5 py-4 border-t border-slate-100 flex gap-3"},Sg=["disabled"],Tg={key:0,class:"fixed top-4 right-4 z-[2000] max-w-sm w-full"},Mg={key:4,class:"lesson-container-new"},Ag={class:"sticky top-0 z-40 bg-white/95 backdrop-blur-md border-b border-slate-200 px-3 sm:px-4 py-2.5 sm:py-3"},Ig={class:"flex items-center justify-between gap-2 sm:gap-4"},Dg={class:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1"},jg={class:"min-w-0 flex-1 hidden sm:block"},Lg={class:"text-sm font-semibold text-slate-800 truncate"},qg={class:"text-xs text-slate-400 truncate"},Eg={class:"flex items-center gap-2 shrink-0"},Wg={class:"w-20 sm:w-28 h-2 bg-slate-100 rounded-full overflow-hidden"},Bg={class:"text-xs font-semibold text-slate-500 tabular-nums"},Pg={class:"flex items-center gap-1.5 sm:gap-2 shrink-0"},zg={class:"flex items-center gap-1 px-2.5 py-1.5 bg-amber-50 rounded-lg"},Rg={class:"text-xs font-bold text-amber-700"},Ng={class:"flex items-center gap-1 px-2.5 py-1.5 bg-indigo-50 rounded-lg"},Fg={class:"text-xs font-bold text-indigo-700"},Vg={key:0,class:"interactive-container"},Og={key:0,class:"fixed bottom-4 right-4 z-[100] max-w-sm w-full"},Gg={class:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden"},Hg={class:"px-5 py-4"},Qg={class:"flex gap-3"},Ug=["disabled"],Yg={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xg={key:1,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Zg={key:0},Jg={key:1},Kg={key:0,class:"fixed bottom-24 right-6 z-[60] w-80 max-h-96 bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden flex flex-col"},ep={class:"flex-1 overflow-y-auto p-4 space-y-3 min-h-[200px]"},tp={key:0,class:"text-center text-slate-400 text-sm py-8"},sp={key:1,class:"flex justify-start"},ap={class:"p-3 border-t border-slate-100"},np={class:"flex gap-2"},lp=["disabled"],op={__name:"LessonPage",setup(s){const i=Cs(),a=Ss(),{t:h}=_s(),c=u(!0),l=u(null),d=u(null),v=u([]),m=u(0),k=u(!1),q=u(!1),T=u(null),_=u(!1),b=u(!1),y=u(!1),f=u(!1),p=u(!1),w=u(""),$=u(""),C=u(""),D=u(!1),S=u(!1),W=u(0),F=u(0),se=u(0),V=u(0),Y=u("0:00"),ee=u(""),ae=u(""),ce=u(null),ie=u(0),fe=u(0),R=u(""),M=u(null),P=u(!1),j=u(""),I=u(""),U=u({}),H=u([]),te=u(null),le=u([]),he=u({}),je=u([]),Be=u([]),Te=u(0),Pe=u(3),A=u(!1),O=u(!1),Z=u(""),oe=u(!1),ke=u(""),Le=u(""),Fe=u(!1),Ae=u({isVisible:!1}),Ve=u(""),qe=u(null),nt=u({current:0,total:0}),lt=u(!1),mt=u(null),ot=u(!1),Ze=u(50),Je=u(!1),Oe=u(!1),Ge=u([]),He=u(""),Ke=u(!1),Qe=u(!1),_e=B(()=>v.value[m.value]||null),yt=B(()=>v.value.length===0?0:Math.round((m.value+1)/v.value.length*100)),kt=B(()=>{const N=v.value.length;return`${Math.ceil(N*1.5)} min`}),gt=B(()=>{const N=_e.value;return N?N.type==="exercise"||N.type==="quiz":!1}),Ue=B(()=>{const N=_e.value;return N?N.type==="game":!1}),et=B(()=>m.value===v.value.length-1),pt=B(()=>({width:Je.value?"100%":`${Ze.value}%`})),rt=B(()=>({width:Je.value?"0%":`${100-Ze.value}%`}));async function wt(){c.value=!0,l.value=null;try{const N=i.params.id;await new Promise(G=>setTimeout(G,1e3)),d.value={title:"Sample Lesson",subtitle:"Learning basics"},v.value=[]}catch(N){l.value=N.message||"Failed to load lesson"}finally{c.value=!1}}function Ct(){wt()}function it(){a.push("/courses")}function St(){k.value=!0,m.value=0}function Tt(){T.value&&(m.value=T.value.stepIndex||0),k.value=!0}function o(){b.value=!0}function g(){b.value=!1}function x(){b.value=!1,it()}function Q(){m.value<v.value.length-1?(m.value++,X()):re()}function E(){m.value>0&&(m.value--,X())}function X(){R.value="",M.value=null,P.value=!1,j.value="",I.value="",U.value={},H.value=[],te.value=null,Te.value=0,A.value=!1,O.value=!1,Z.value="",ie.value=0,fe.value=0}function re(){q.value=!0,Me()}function Me(){const N=v.value.length,G=N>0?(N-se.value)/N:1;G>=.9?(V.value=3,ee.value="Gold"):G>=.7?(V.value=2,ee.value="Silver"):(V.value=1,ee.value="Bronze"),ae.value=`You completed ${N} steps with ${se.value} mistakes.`}function De(){return{Gold:"ü•á",Silver:"ü•à",Bronze:"ü•â"}[ee.value]||"üèÖ"}function be(){console.log("Sharing result...")}function ze(){a.push("/homework")}function Ie(){a.push("/vocabulary")}function Ce(N){return!N||N.type!=="exercise"?null:(N.exercises||[])[ie.value]||null}function Ye(N){return!N||N.type!=="quiz"?null:(N.quizzes||[])[fe.value]||null}function ft(N){return!N||N.type!=="exercise"?0:(N.exercises||[]).length}function _t(N){return!N||N.type!=="quiz"?0:(N.quizzes||[]).length}function Nt(N){R.value=N}function Ft({index:N,value:G}){U.value[N]=G}function Vt(){M.value?P.value?Mt():(Te.value++,Te.value>=Pe.value&&(O.value=!0)):Ot()}function Ot(){R.value.toLowerCase()==="correct"?(M.value="correct",P.value=!0,W.value++,F.value+=10):(M.value="incorrect",P.value=!1,se.value++,W.value=0)}function Mt(){const N=_e.value;if(!N)return;const G=ft(N);ie.value<G-1?(ie.value++,X()):Q()}function Gt(){const N=_e.value;if(!N)return;const G=_t(N);fe.value<G-1?(fe.value++,X()):Q()}function Ht(){j.value="Try thinking about it differently..."}function Qt(){I.value=""}function Ut(N){te.value?(H.value.push({left:te.value,right:N}),te.value=null):te.value=N}function Yt(N){H.value.splice(N,1)}function Xt(N){}function Zt(N){}function Jt(N){}function Kt({item:N,zoneId:G}){he.value[G]=N}function es(N){delete he.value[N]}function ts(){oe.value=!oe.value}async function ss(){if(ke.value.trim()){Fe.value=!0;try{await new Promise(N=>setTimeout(N,1500)),Le.value="Here is the explanation for your question..."}catch{Le.value="Sorry, I could not get an explanation at this time."}finally{Fe.value=!1}}}function as(N){Ae.value={isVisible:!0,words:N.words||[],currentIndex:0},ct()}function ct(){const N=Ae.value;N.words&&N.words.length>0&&(qe.value=N.words[N.currentIndex],nt.value={current:N.currentIndex+1,total:N.words.length},lt.value=N.currentIndex===N.words.length-1)}function ns(){qe.value&&(qe.value.showDefinition=!0)}function ls(){qe.value&&(qe.value.showDefinition=!1)}function os(){qe.value&&(qe.value.learned=!0),At()}function At(){Ve.value="slide-left";const N=Ae.value;N.currentIndex<N.words.length-1&&(N.currentIndex++,ct())}function rs(){Ve.value="slide-right";const N=Ae.value;N.currentIndex>0&&(N.currentIndex--,ct())}function is(N){Ae.value.currentIndex=N,ct()}function cs(){It()}function us(){Ae.value.currentIndex=0,ct()}function It(){Ae.value.isVisible=!1}function Dt(N){if("speechSynthesis"in window){const G=new SpeechSynthesisUtterance(N);G.lang="en-US",speechSynthesis.speak(G)}}function jt(){y.value=!0,w.value="",$.value="",C.value="",D.value=!1}function ht(){y.value=!1}async function ds(){if(!$.value.trim()){D.value=!0;return}S.value=!0;try{await new Promise(N=>setTimeout(N,1e3)),ht(),f.value=!0,setTimeout(()=>{f.value=!1},3e3)}catch(N){console.error("Failed to submit report:",N)}finally{S.value=!1}}function vs(){f.value=!1}function Lt(N){if(Je.value)return;ot.value=!0;const G=N.type==="touchstart"?N.touches[0].clientX:N.clientX,bt=Ze.value,ut=mt.value;if(!ut)return;const xt=ut.offsetWidth;function Xe(dt){const ps=((dt.type==="touchmove"?dt.touches[0].clientX:dt.clientX)-G)/xt*100,fs=Math.min(Math.max(bt+ps,30),70);Ze.value=fs}function we(){ot.value=!1,document.removeEventListener("mousemove",Xe),document.removeEventListener("mouseup",we),document.removeEventListener("touchmove",Xe),document.removeEventListener("touchend",we)}document.addEventListener("mousemove",Xe),document.addEventListener("mouseup",we),document.addEventListener("touchmove",Xe),document.addEventListener("touchend",we)}function ms(){Oe.value=!Oe.value}async function qt(){const N=He.value.trim();if(N){Ge.value.push({role:"user",content:N}),He.value="",Ke.value=!0;try{await new Promise(G=>setTimeout(G,1500)),Ge.value.push({role:"assistant",content:"I understand your question. Let me help you with that..."})}catch{Ge.value.push({role:"assistant",content:"Sorry, I encountered an error. Please try again."})}finally{Ke.value=!1}}}function Et(){p.value=!1}async function gs(){Qe.value=!0;try{await new Promise(N=>setTimeout(N,2e3)),Et()}catch(N){console.error("Migration failed:",N)}finally{Qe.value=!1}}return Ne(()=>{wt()}),at(()=>{}),(N,G)=>{var bt,ut,xt,Xe;return t(),n("div",vg,[c.value?(t(),n("div",mg,[G[6]||(G[6]=e("div",{class:"w-12 h-12 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin mb-4"},null,-1)),e("p",gg,r(N.$t("loadingStates.lesson")),1)])):l.value?(t(),n("div",pg,[G[9]||(G[9]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("h3",fg,r(N.$t("loadingStates.errorLoading")),1),e("p",hg,r(l.value),1),e("div",{class:"flex flex-col sm:flex-row gap-3 w-full max-w-xs"},[e("button",{onClick:Ct,class:"flex-1 py-3 px-6 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2"},G[7]||(G[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),ge(" Try Again ")])),e("button",{onClick:it,class:"flex-1 py-3 px-6 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-slate-200 transition-colors flex items-center justify-center gap-2"},G[8]||(G[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),ge(" Back ")]))])])):L("",!0),(t(),de(tt,{to:"body"},[_.value?(t(),n("div",bg,[e("div",xg,[G[10]||(G[10]=e("div",{class:"w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),G[11]||(G[11]=e("h3",{class:"text-lg font-bold text-slate-900 mb-2"},"Premium Content",-1)),G[12]||(G[12]=e("p",{class:"text-slate-500 text-sm mb-6"},"Upgrade to access this lesson",-1)),e("div",yg,[e("button",{onClick:G[0]||(G[0]=we=>N.$router.push("/pay/start")),class:"w-full py-3 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors"}," Get Premium "),e("button",{onClick:it,class:"w-full py-3 text-slate-500 font-medium hover:text-slate-700 transition-colors"}," Go Back ")])])])):L("",!0)])),(t(),de(tt,{to:"body"},[b.value?(t(),n("div",kg,[e("div",{class:"bg-white rounded-2xl w-full max-w-xs p-6 text-center"},[G[13]||(G[13]=e("h3",{class:"text-lg font-bold text-slate-900 mb-2"},"Leave Lesson?",-1)),G[14]||(G[14]=e("p",{class:"text-slate-500 text-sm mb-6"},"Your progress will be saved",-1)),e("div",{class:"space-y-2"},[e("button",{onClick:x,class:"w-full py-3 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors"}," Leave "),e("button",{onClick:g,class:"w-full py-3 text-slate-500 font-medium hover:text-slate-700 transition-colors"}," Stay ")])])])):L("",!0)])),(t(),de(tt,{to:"body"},[y.value?(t(),n("div",{key:0,class:"fixed inset-0 z-[1000] bg-black/40 flex items-center justify-center p-4",onClick:Se(ht,["self"])},[e("div",wg,[e("div",{class:"flex items-center justify-between px-5 py-4 border-b border-slate-100"},[G[16]||(G[16]=e("h3",{class:"font-semibold text-slate-900"},"Report Issue",-1)),e("button",{onClick:ht,class:"w-8 h-8 flex items-center justify-center rounded-full text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors"},G[15]||(G[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",_g,[e("div",null,[G[18]||(G[18]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Type",-1)),Ee(e("select",{"onUpdate:modelValue":G[1]||(G[1]=we=>w.value=we),class:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"},G[17]||(G[17]=[e("option",{value:""},"Select...",-1),e("option",{value:"content"},"Content Error",-1),e("option",{value:"technical"},"Technical",-1),e("option",{value:"exercise"},"Exercise",-1),e("option",{value:"other"},"Other",-1)]),512),[[$s,w.value]])]),e("div",null,[G[19]||(G[19]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Description *",-1)),Ee(e("textarea",{"onUpdate:modelValue":G[2]||(G[2]=we=>$.value=we),rows:"3",placeholder:"Describe the issue...",class:z(["w-full px-3 py-2.5 bg-slate-50 border rounded-xl text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent resize-none",D.value&&!$.value.trim()?"border-red-300":"border-slate-200"])},null,2),[[Re,$.value]]),D.value&&!$.value.trim()?(t(),n("p",$g,"Required")):L("",!0)]),e("div",null,[G[20]||(G[20]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Contact (optional)",-1)),Ee(e("input",{type:"text","onUpdate:modelValue":G[3]||(G[3]=we=>C.value=we),placeholder:"Email or @telegram",class:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"},null,512),[[Re,C.value]])])]),e("div",Cg,[e("button",{onClick:ht,class:"flex-1 py-3 text-slate-600 font-medium rounded-xl hover:bg-slate-100 transition-colors"}," Cancel "),e("button",{onClick:ds,disabled:S.value,class:"flex-1 py-3 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors disabled:opacity-50"},r(S.value?"Sending...":"Send"),9,Sg)])])])):L("",!0)])),(t(),de(tt,{to:"body"},[me($e,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-full"},{default:ye(()=>[f.value?(t(),n("div",Tg,[e("div",{class:"bg-white rounded-2xl shadow-xl border border-emerald-100 p-4 flex items-start gap-4"},[G[22]||(G[22]=e("div",{class:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center shrink-0"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),G[23]||(G[23]=e("div",{class:"flex-1 min-w-0"},[e("h4",{class:"text-sm font-semibold text-slate-800"},"Report Sent!"),e("p",{class:"text-sm text-slate-500 mt-0.5"},"Thank you for helping us improve.")],-1)),e("button",{onClick:vs,class:"text-slate-400 hover:text-slate-600 transition-colors"},G[21]||(G[21]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):L("",!0)]),_:1})])),Ae.value.isVisible?(t(),de(ga,{key:2,"vocabulary-data":Ae.value,"card-animation":Ve.value,"current-word":qe.value,progress:nt.value,"is-last-word":lt.value,onShowDefinition:ns,onHideDefinition:ls,onMarkLearned:os,onNextWord:At,onPreviousWord:rs,onSkip:cs,onRestart:us,onClose:It,onPronounce:Dt,onJumpToWord:is},null,8,["vocabulary-data","card-animation","current-word","progress","is-last-word"])):L("",!0),!k.value&&!_.value&&!c.value&&!l.value?(t(),de(Wa,{key:3,lesson:d.value,"estimated-time":kt.value,steps:v.value,"previous-progress":T.value,onStart:St,onContinue:Tt,onExit:o,onReportProblem:jt},null,8,["lesson","estimated-time","steps","previous-progress"])):k.value&&!_.value&&!c.value&&!l.value?(t(),n("div",Mg,[e("div",Ag,[e("div",Ig,[e("div",Dg,[e("button",{onClick:o,class:"w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center rounded-lg bg-slate-100 text-slate-500 hover:bg-red-50 hover:text-red-500 transition-colors shrink-0","aria-label":"Exit lesson"},G[24]||(G[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",jg,[e("h2",Lg,r(((bt=d.value)==null?void 0:bt.title)||"Lesson"),1),e("p",qg,r(((ut=d.value)==null?void 0:ut.subtitle)||""),1)]),e("div",Eg,[e("div",Wg,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full transition-all duration-500",style:ue({width:yt.value+"%"})},null,4)]),e("span",Bg,r(m.value+1)+"/"+r(v.value.length),1)])]),e("div",Pg,[e("div",zg,[G[25]||(G[25]=e("svg",{class:"w-4 h-4 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z"})],-1)),e("span",Rg,r(W.value),1)]),e("div",Ng,[G[26]||(G[26]=e("svg",{class:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)),e("span",Fg,r(F.value),1)])])])]),e("div",{class:z(["split-content",{"is-game-active":Ue.value}]),ref_key:"splitContainer",ref:mt},[e("div",{class:"split-panel content-side",style:ue(pt.value)},[me(_n,{"current-step":_e.value,"current-index":m.value,"is-interactive-step":gt.value,"is-game-step":Ue.value,"show-explanation-always":!0,"current-exercise":Ce(_e.value),"current-quiz":Ye(_e.value),"exercise-index":ie.value,"quiz-index":fe.value,"total-exercises":ft(_e.value),"total-quizzes":_t(_e.value),"show-explanation-help":oe.value,"explanation-question":ke.value,"explanation-ai-response":Le.value,"is-loading-explanation":Fe.value,"is-last-step":et.value,onToggleExplanationHelp:ts,"onUpdate:explanationQuestion":G[4]||(G[4]=we=>ke.value=we),onAskExplanation:ss,onInitVocabulary:as,onPronounce:Dt,onNext:Q,onPrevious:E},null,8,["current-step","current-index","is-interactive-step","is-game-step","current-exercise","current-quiz","exercise-index","quiz-index","total-exercises","total-quizzes","show-explanation-help","explanation-question","explanation-ai-response","is-loading-explanation","is-last-step"])],4),Je.value?L("",!0):(t(),n("div",{key:0,class:z(["resize-handle",{"is-resizing":ot.value}]),onMousedown:Lt,onTouchstart:Lt},G[27]||(G[27]=[e("div",{class:"handle-bar"},null,-1)]),34)),e("div",{class:"split-panel interactive-side",style:ue(rt.value)},[gt.value||Ue.value?(t(),n("div",Vg,[(t(),de(zm,{key:((xt=_e.value)==null?void 0:xt.id)||((Xe=_e.value)==null?void 0:Xe._id)||m.value,"current-step":_e.value,"current-exercise":Ce(_e.value),"current-quiz":Ye(_e.value),"exercise-index":ie.value,"quiz-index":fe.value,"total-exercises":ft(_e.value),"total-quizzes":_t(_e.value),"user-answer":R.value,confirmation:M.value,"answer-was-correct":P.value,"current-hint":j.value,"smart-hint":I.value,"mistake-count":se.value,"fill-blank-answers":U.value,"matching-pairs":H.value,"selected-matching-item":te.value,"ordering-items":le.value,"drag-drop-placements":he.value,"available-drag-items":je.value,"drop-zones":Be.value,"attempt-count":Te.value,"max-attempts":Pe.value,"is-on-second-chance":A.value,"show-correct-answer":O.value,"correct-answer-text":Z.value,onAnswerChanged:Nt,onFillBlankUpdated:Ft,onSubmit:Vt,onNextExercise:Mt,onNextQuiz:Gt,onShowHint:Ht,onClearHint:Qt,onMatchingItemSelected:Ut,onRemoveMatchingPair:Yt,onDragItemStart:Xt,onDragOverZone:Zt,onDragLeaveZone:Jt,onDropInZone:Kt,onRemoveDroppedItem:es},null,8,["current-step","current-exercise","current-quiz","exercise-index","quiz-index","total-exercises","total-quizzes","user-answer","confirmation","answer-was-correct","current-hint","smart-hint","mistake-count","fill-blank-answers","matching-pairs","selected-matching-item","ordering-items","drag-drop-placements","available-drag-items","drop-zones","attempt-count","max-attempts","is-on-second-chance","show-correct-answer","correct-answer-text"]))])):L("",!0)],4)],2)])):L("",!0),q.value?(t(),de(dg,{key:5,lesson:d.value,"readable-time":Y.value,stars:V.value,"mistake-count":se.value,"earned-points":F.value,"medal-label":ee.value,"medal-icon":De(),"progress-insight":ae.value,"total-steps":v.value.length,"extraction-results":ce.value,onReturnToCatalogue:it,onShare:be,onHomework:ze,onVocabulary:Ie},{"extra-actions":ye(()=>[e("button",{onClick:jt,class:"w-full py-3 px-4 text-slate-500 hover:text-amber-600 font-medium rounded-xl hover:bg-amber-50 transition-colors flex items-center justify-center gap-2 text-sm"},G[28]||(G[28]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),ge(" Report an issue with this lesson ")]))]),_:1},8,["lesson","readable-time","stars","mistake-count","earned-points","medal-label","medal-icon","progress-insight","total-steps","extraction-results"])):L("",!0),(t(),de(tt,{to:"body"},[me($e,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-full","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-full"},{default:ye(()=>[p.value?(t(),n("div",Og,[e("div",Gg,[G[32]||(G[32]=e("div",{class:"px-5 py-4 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])]),e("h3",{class:"font-semibold text-slate-800"},"Content Update")])],-1)),e("div",Hg,[G[31]||(G[31]=e("p",{class:"text-sm text-slate-600 mb-4"},"Create assignments and vocabulary from completed lessons?",-1)),e("div",Qg,[e("button",{onClick:gs,disabled:Qe.value,class:"flex-1 py-2.5 px-4 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[Qe.value?(t(),n("svg",Xg,G[30]||(G[30]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(t(),n("svg",Yg,G[29]||(G[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"},null,-1)]))),ge(" "+r(Qe.value?"Processing...":"Update"),1)],8,Ug),e("button",{onClick:Et,class:"py-2.5 px-4 text-slate-600 font-medium rounded-xl hover:bg-slate-100 transition-colors"}," Close ")])])])])):L("",!0)]),_:1})])),k.value&&!q.value?(t(),n("button",{key:6,onClick:ms,class:z(["fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-200 hover:scale-110 hover:shadow-xl z-50",Oe.value?"bg-cyan-500 shadow-cyan-500/40":"bg-indigo-600 shadow-indigo-500/40"]),"aria-label":"AI Assistant"},[Oe.value?(t(),n("span",Zg,"‚úï")):(t(),n("span",Jg,"ü§ñ"))],2)):L("",!0),(t(),de(tt,{to:"body"},[me($e,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-4 scale-95"},{default:ye(()=>[Oe.value?(t(),n("div",Kg,[G[36]||(G[36]=e("div",{class:"px-4 py-3 bg-gradient-to-r from-indigo-500 to-blue-500 text-white"},[e("h4",{class:"font-semibold"},"AI Assistant"),e("p",{class:"text-xs text-white/80"},"Ask me anything about this lesson")],-1)),e("div",ep,[Ge.value.length===0?(t(),n("div",tp,G[33]||(G[33]=[e("p",null,"üëã How can I help you?",-1)]))):L("",!0),(t(!0),n(J,null,K(Ge.value,(we,dt)=>(t(),n("div",{key:dt,class:z(["flex",we.role==="user"?"justify-end":"justify-start"])},[e("div",{class:z(["max-w-[80%] px-3 py-2 rounded-xl text-sm",we.role==="user"?"bg-indigo-500 text-white":"bg-slate-100 text-slate-800"])},r(we.content),3)],2))),128)),Ke.value?(t(),n("div",sp,G[34]||(G[34]=[e("div",{class:"bg-slate-100 px-3 py-2 rounded-xl"},[e("div",{class:"flex gap-1"},[e("span",{class:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),e("span",{class:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),e("span",{class:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})])],-1)]))):L("",!0)]),e("div",ap,[e("div",np,[Ee(e("input",{"onUpdate:modelValue":G[5]||(G[5]=we=>He.value=we),onKeyup:zt(qt,["enter"]),type:"text",placeholder:"Type a message...",class:"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,544),[[Re,He.value]]),e("button",{onClick:qt,disabled:!He.value.trim()||Ke.value,class:"px-4 py-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},G[35]||(G[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)]),8,lp)])])])):L("",!0)]),_:1})]))])}}},up=pe(op,[["__scopeId","data-v-68d3b7d0"]]);export{up as default};
