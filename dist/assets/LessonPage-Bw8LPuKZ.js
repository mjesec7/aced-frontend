import{_ as ke,c as l,s as a,a as e,e as j,j as me,t as r,n as N,i as De,F as J,h as K,x as Ht,f as xe,y as ot,z as u,A as Gt,B,C as le,D as $e,E as Ge,G as lt,H as We,d as fe,b as ye,w as Ae,T as Ie,I as js,J as pe,K as zs,L as Es,g as Fe,v as Oe,M as Qt,N as qs,O as Rs,Q as Ps,R as Ye,S as Bs,U as nt,V as Ws,W as Fs,X as Ns,Y as Vs}from"./index-CIIeN04W.js";const Os={name:"VocabularyModal",props:{vocabularyData:{type:Object,required:!0,default:()=>({isVisible:!1,currentIndex:0,words:[],isCompleted:!1,showingList:!1})},cardAnimation:{type:Object,default:()=>({isFlipping:!1,showDefinition:!1})},currentWord:{type:Object,default:null},progress:{type:Number,default:0},isLastWord:{type:Boolean,default:!1}},emits:["show-definition","hide-definition","mark-learned","next-word","previous-word","skip","restart","close","pronounce","jump-to-word"],computed:{isDevelopment(){return!1},hasValidWords(){const n=this.getValidWords().length>0;return this.isDevelopment,n},currentDisplayWord(){var v;const t=this.getValidWords(),n=((v=this.vocabularyData)==null?void 0:v.currentIndex)||0,s=t[n]||this.currentWord||null;return this.isDevelopment,s},debugInfo(){var t,n,s,v,i,o,g,d,m;return this.isDevelopment?{vocabularyData:{isVisible:(t=this.vocabularyData)==null?void 0:t.isVisible,currentIndex:(n=this.vocabularyData)==null?void 0:n.currentIndex,wordsLength:(v=(s=this.vocabularyData)==null?void 0:s.words)==null?void 0:v.length,isCompleted:(i=this.vocabularyData)==null?void 0:i.isCompleted,showingList:(o=this.vocabularyData)==null?void 0:o.showingList,wordsStructure:(m=(d=(g=this.vocabularyData)==null?void 0:g.words)==null?void 0:d.slice(0,2))==null?void 0:m.map(y=>({keys:Object.keys(y||{}),hasTerms:!!(y!=null&&y.term||y!=null&&y.word),hasDefinition:!!(y!=null&&y.definition||y!=null&&y.translation)}))},currentWord:this.currentWord?{keys:Object.keys(this.currentWord),term:this.getWordTerm(this.currentWord),definition:this.getWordDefinition(this.currentWord)}:null,validWordsCount:this.getValidWordsCount(),hasValidWords:this.hasValidWords}:null}},methods:{getValidWords(){var n;return(((n=this.vocabularyData)==null?void 0:n.words)||[]).filter(s=>{if(!s||typeof s!="object")return!1;const v=this.getWordTerm(s),i=this.getWordDefinition(s);return!!(v&&i)})},getValidWordsCount(){return this.getValidWords().length},getLearnedWordsCount(){return this.getValidWords().filter(t=>t==null?void 0:t.learned).length},getCompletionPercentage(){const t=this.getValidWordsCount(),n=this.getLearnedWordsCount();return t>0?Math.round(n/t*100):0},getWordTerm(t){if(!t)return"";const n=t.term||t.word||t.title||t.name||"";return String(n).trim()},getWordDefinition(t){if(!t)return"Definition not found";const n=t.definition||t.translation||t.meaning||t.desc||t.description||"";return String(n).trim()||"Definition not found"},getWordExample(t){if(!t)return"";const n=t.example||t.examples||t.usage||"";return String(n).trim()},getWordPronunciation(t){if(!t)return"";const n=t.pronunciation||t.phonetic||"";return String(n).trim()},getWordPartOfSpeech(t){if(!t)return"";const n=t.partOfSpeech||t.pos||t.type||"";return String(n).trim()},getWordId(t,n){var s;return t?t.id||t._id||`vocab-${n}-${((s=this.getWordTerm(t))==null?void 0:s.substring(0,10))||"word"}`:`vocab-${n}`},jumpToWord(t){this.$emit("jump-to-word",t)}},mounted(){this.isDevelopment},watch:{vocabularyData:{handler(t){this.isDevelopment},deep:!0,immediate:!0}}},Us={class:"vocabulary-modal-container"},Hs={class:"vocabulary-modal-header"},Gs={class:"vocab-progress-section"},Qs={class:"vocab-progress-bar"},Ys={class:"vocab-progress-text"},Xs={class:"vocab-header-actions"},Zs={key:0,class:"debug-info"},Js={key:1,class:"vocabulary-card-container"},Ks={class:"card-content"},en={class:"vocab-term-section"},tn={class:"vocab-term"},sn={key:0,class:"vocab-pronunciation"},nn={key:1,class:"vocab-part-of-speech"},an={class:"card-content"},on={class:"vocab-definition-section"},ln={class:"vocab-term-small"},rn={class:"vocab-definition"},cn={key:0,class:"vocab-example"},un={class:"vocab-card-actions"},dn=["disabled"],vn={class:"vocab-main-actions"},gn={class:"btn-icon"},mn={class:"btn-text"},fn={class:"btn-icon"},pn={class:"btn-text"},hn={class:"vocab-dots-navigation"},bn=["onClick","title"],xn={key:2,class:"no-vocabulary-content"},yn={class:"no-vocab-subtitle"},kn={key:0,class:"debug-words"},_n={key:3,class:"vocabulary-completion"},wn={class:"completion-animation"},$n={class:"completion-subtitle"},Cn={class:"completion-stats"},Sn={class:"completion-stat"},An={class:"stat-number"},Tn={class:"completion-stat"},Mn={class:"stat-number"},In={key:4,class:"vocabulary-list-transition"};function Ln(t,n,s,v,i,o){var g,d,m,y,M,C,k,b,_,h,p,w,A,S,E,T,q,Y,ne;return a(),l("div",{class:"vocabulary-modal-overlay",onClick:n[12]||(n[12]=De(V=>t.$emit("close"),["self"]))},[e("div",Us,[e("div",Hs,[e("div",Gs,[e("div",Qs,[e("div",{class:"vocab-progress-fill",style:me({width:s.progress+"%"})},null,4)]),e("div",Ys,r((((g=s.vocabularyData)==null?void 0:g.currentIndex)||0)+1)+" / "+r(o.getValidWordsCount()),1)]),e("div",Xs,[e("button",{onClick:n[0]||(n[0]=V=>t.$emit("skip")),class:"vocab-skip-btn",title:"Skip and go to list"},n[13]||(n[13]=[e("span",{class:"btn-icon"},"â­ï¸",-1),e("span",{class:"btn-text"},"Skip",-1)])),e("button",{onClick:n[1]||(n[1]=V=>t.$emit("close")),class:"vocab-close-btn",title:"Close vocabulary"}," âœ• ")])]),o.isDevelopment?(a(),l("div",Zs,[e("details",null,[n[14]||(n[14]=e("summary",null,"ðŸ” Debug Info",-1)),e("pre",null,r(o.debugInfo),1)])])):j("",!0),!((d=s.vocabularyData)!=null&&d.isCompleted)&&!((m=s.vocabularyData)!=null&&m.showingList)&&o.hasValidWords?(a(),l("div",Js,[e("div",{class:N(["vocabulary-card",{flipped:(y=s.cardAnimation)==null?void 0:y.showDefinition,flipping:(M=s.cardAnimation)==null?void 0:M.isFlipping,learned:(C=o.currentDisplayWord)==null?void 0:C.learned}])},[e("div",{class:"card-front",onClick:n[3]||(n[3]=V=>t.$emit("show-definition"))},[e("div",Ks,[e("div",en,[e("h2",tn,r(o.getWordTerm(o.currentDisplayWord)),1),o.getWordPronunciation(o.currentDisplayWord)?(a(),l("div",sn," /"+r(o.getWordPronunciation(o.currentDisplayWord))+"/ ",1)):j("",!0),o.getWordPartOfSpeech(o.currentDisplayWord)?(a(),l("div",nn,r(o.getWordPartOfSpeech(o.currentDisplayWord)),1)):j("",!0)]),n[15]||(n[15]=e("div",{class:"card-instruction"},[e("div",{class:"instruction-icon"},"ðŸ’«"),e("p",null,"Click to see definition")],-1))]),o.getWordTerm(o.currentDisplayWord)?(a(),l("button",{key:0,onClick:n[2]||(n[2]=De(V=>t.$emit("pronounce",o.getWordTerm(o.currentDisplayWord)),["stop"])),class:"voice-btn",title:"Pronunciation"},n[16]||(n[16]=[e("span",{class:"voice-icon"},"ðŸ”Š",-1)]))):j("",!0)]),e("div",{class:"card-back",onClick:n[5]||(n[5]=V=>t.$emit("hide-definition"))},[e("div",an,[e("div",on,[e("h3",ln,r(o.getWordTerm(o.currentDisplayWord)),1),e("div",rn,r(o.getWordDefinition(o.currentDisplayWord)),1),o.getWordExample(o.currentDisplayWord)?(a(),l("div",cn,[n[17]||(n[17]=e("strong",null,"Example:",-1)),n[18]||(n[18]=e("br",null,null,-1)),e("em",null,r(o.getWordExample(o.currentDisplayWord)),1)])):j("",!0)]),n[19]||(n[19]=e("div",{class:"card-instruction"},[e("div",{class:"instruction-icon"},"â†©ï¸"),e("p",null,"ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ðº Ñ‚ÐµÑ€minÑƒ")],-1))]),o.getWordTerm(o.currentDisplayWord)?(a(),l("button",{key:0,onClick:n[4]||(n[4]=De(V=>t.$emit("pronounce",o.getWordTerm(o.currentDisplayWord)),["stop"])),class:"voice-btn",title:"Pronunciation"},n[20]||(n[20]=[e("span",{class:"voice-icon"},"ðŸ”Š",-1)]))):j("",!0)])],2),e("div",un,[e("button",{onClick:n[6]||(n[6]=V=>t.$emit("previous-word")),disabled:(((k=s.vocabularyData)==null?void 0:k.currentIndex)||0)===0,class:"vocab-nav-btn vocab-prev-btn",title:"Previous word"},n[21]||(n[21]=[e("span",{class:"btn-icon"},"â¬…ï¸",-1),e("span",{class:"btn-text"},"Back",-1)]),8,dn),e("div",vn,[e("button",{onClick:n[7]||(n[7]=V=>t.$emit("mark-learned")),class:N(["vocab-learned-btn",{active:(b=o.currentDisplayWord)==null?void 0:b.learned}]),title:"ÐžÑ‚Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ ÐºÐ°Ðº learned"},[e("span",gn,r((_=o.currentDisplayWord)!=null&&_.learned?"âœ…":"ðŸ“š"),1),e("span",mn,r((h=o.currentDisplayWord)!=null&&h.learned?"Learned":"Learn"),1)],2),e("button",{onClick:n[8]||(n[8]=V=>t.$emit("next-word")),class:"vocab-next-btn",title:"Next word"},[e("span",fn,r(s.isLastWord?"ðŸ":"âž¡ï¸"),1),e("span",pn,r(s.isLastWord?"Finish":"Next"),1)])]),e("button",{onClick:n[9]||(n[9]=V=>t.$emit("restart")),class:"vocab-restart-btn",title:"Start over"},n[22]||(n[22]=[e("span",{class:"btn-icon"},"ðŸ”„",-1),e("span",{class:"btn-text"},"Start over",-1)]))]),e("div",hn,[(a(!0),l(J,null,K(o.getValidWords(),(V,Q)=>{var te;return a(),l("button",{key:o.getWordId(V,Q),onClick:ee=>o.jumpToWord(Q),class:N(["vocab-dot",{active:Q===(((te=s.vocabularyData)==null?void 0:te.currentIndex)||0),learned:V==null?void 0:V.learned}]),title:o.getWordTerm(V)},null,10,bn)}),128))])])):!o.hasValidWords&&!((p=s.vocabularyData)!=null&&p.isCompleted)&&!((w=s.vocabularyData)!=null&&w.showingList)?(a(),l("div",xn,[n[25]||(n[25]=e("div",{class:"no-vocab-icon"},"ðŸ“š",-1)),n[26]||(n[26]=e("h3",{class:"no-vocab-title"},"Vocabulary is empty",-1)),e("p",yn,r(((S=(A=s.vocabularyData)==null?void 0:A.words)==null?void 0:S.length)>0?"Ð’ ÑÑ‚Ð¾Ð¼ lessonÐµ Ð½ÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ñ… words Ð´Ð»Ñ learning":"Ð’ ÑÑ‚Ð¾Ð¼ lessonÐµ Ð½ÐµÑ‚ words Ð´Ð»Ñ learning"),1),o.isDevelopment&&((T=(E=s.vocabularyData)==null?void 0:E.words)==null?void 0:T.length)>0?(a(),l("div",kn,[e("details",null,[n[23]||(n[23]=e("summary",null,"ðŸ”§ Word debug information",-1)),e("pre",null,r(JSON.stringify(s.vocabularyData.words,null,2)),1)])])):j("",!0),e("button",{onClick:n[10]||(n[10]=V=>t.$emit("skip")),class:"continue-btn"},n[24]||(n[24]=[e("span",{class:"btn-icon"},"ðŸ“‹",-1),e("span",{class:"btn-text"},"Continue lesson",-1)]))])):(q=s.vocabularyData)!=null&&q.isCompleted&&!((Y=s.vocabularyData)!=null&&Y.showingList)?(a(),l("div",_n,[e("div",wn,[n[30]||(n[30]=e("div",{class:"completion-icon"},"ðŸŽ‰",-1)),n[31]||(n[31]=e("h3",{class:"completion-title"},"Excellent!",-1)),e("p",$n," You learned "+r(o.getLearnedWordsCount())+" of "+r(o.getValidWordsCount())+" words ",1),e("div",Cn,[e("div",Sn,[e("div",An,r(o.getLearnedWordsCount()),1),n[27]||(n[27]=e("div",{class:"stat-label"},"Learned",-1))]),e("div",Tn,[e("div",Mn,r(o.getCompletionPercentage())+"%",1),n[28]||(n[28]=e("div",{class:"stat-label"},"Progress",-1))])]),e("button",{onClick:n[11]||(n[11]=V=>t.$emit("skip")),class:"continue-btn"},n[29]||(n[29]=[e("span",{class:"btn-icon"},"ðŸ“‹",-1),e("span",{class:"btn-text"},"Go to word list",-1)]))])])):(ne=s.vocabularyData)!=null&&ne.showingList?(a(),l("div",In,n[32]||(n[32]=[e("div",{class:"transition-animation"},[e("div",{class:"transition-icon"},"ðŸ“š"),e("h3",null,"Going to word list..."),e("div",{class:"loading-dots"},[e("span"),e("span"),e("span")])],-1)]))):j("",!0)])])}const Dn=ke(Os,[["render",Ln],["__scopeId","data-v-8675311f"]]),jn={name:"LessonIntro",props:{lesson:{type:Object,required:!0},estimatedTime:{type:Number,default:10},steps:{type:Array,default:()=>[]},previousProgress:{type:Object,default:null}},emits:["start","continue","exit","report-problem"],setup(){const{language:t}=Ht();return{language:t}},mounted(){var t,n;console.log("ðŸŸ¢ [LessonIntro v2] MOUNTED - lesson:",(t=this.lesson)==null?void 0:t.lessonName,"type:",typeof((n=this.lesson)==null?void 0:n.lessonName))},methods:{getLocalized(t){if(console.log("ðŸŸ¢ [LessonIntro v2] getLocalized input:",t,"type:",typeof t),t==null)return"";if(typeof t=="string")return t;if(typeof t=="object"){const n=this.language||localStorage.getItem("lang")||"ru";console.log("ðŸŸ¢ [LessonIntro v2] Object detected, lang:",n,"keys:",Object.keys(t));const s=t[n]||t.en||t.ru||t.uz;if(console.log("ðŸŸ¢ [LessonIntro v2] Selected value:",s),s&&typeof s=="string")return s.replace(/^(en|ru|uz):/i,"").trim();const v=Object.values(t);for(const i of v)if(i&&typeof i=="string"&&i.trim())return i.replace(/^(en|ru|uz):/i,"").trim()}return""}}},zn={class:"fixed inset-0 z-50 bg-white flex flex-col"},En={class:"flex items-center justify-between px-4 py-4 border-b border-slate-100"},qn={class:"text-xs font-medium text-slate-400 uppercase tracking-wider"},Rn={class:"flex-1 flex flex-col items-center justify-center px-6 py-12 overflow-y-auto"},Pn={class:"w-full max-w-md text-center flex flex-col gap-10"},Bn={class:"flex flex-col gap-5"},Wn={class:"text-2xl sm:text-3xl font-bold text-slate-900"},Fn={class:"text-slate-500 text-base sm:text-lg leading-relaxed"},Nn={class:"flex justify-center gap-12 py-2"},Vn={class:"text-center"},On={class:"text-3xl font-bold text-slate-900"},Un={class:"text-center"},Hn={class:"text-3xl font-bold text-slate-900"},Gn={key:0,class:"bg-slate-50 rounded-2xl p-5 text-left"},Qn={class:"flex items-center justify-between mb-4"},Yn={class:"text-sm font-bold text-slate-900"},Xn={class:"h-2 bg-slate-200 rounded-full overflow-hidden mb-5"},Zn={class:"px-6 pb-8 pt-4 border-t border-slate-100 bg-white"},Jn={class:"max-w-md mx-auto space-y-4"};function Kn(t,n,s,v,i,o){var g,d,m,y,M,C;return a(),l("div",zn,[e("div",En,[e("button",{onClick:n[0]||(n[0]=k=>t.$emit("exit")),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors"},n[4]||(n[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("span",qn,r(((g=s.lesson)==null?void 0:g.type)==="premium"?"Premium":"Free"),1),n[5]||(n[5]=e("div",{class:"w-10"},null,-1))]),e("div",Rn,[e("div",Pn,[e("div",Bn,[n[6]||(n[6]=e("div",{class:"w-20 h-20 mx-auto rounded-2xl bg-slate-100 flex items-center justify-center"},[e("svg",{class:"w-12 h-12 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),e("h1",Wn,r(o.getLocalized((d=s.lesson)==null?void 0:d.lessonName)||"Lesson"),1),e("p",Fn,r(o.getLocalized((m=s.lesson)==null?void 0:m.description)||"Start learning now"),1)]),e("div",Nn,[e("div",Vn,[e("div",On,"~"+r(s.estimatedTime),1),n[7]||(n[7]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"min",-1))]),n[9]||(n[9]=e("div",{class:"w-px bg-slate-200"},null,-1)),e("div",Un,[e("div",Hn,r((s.steps||[]).length),1),n[8]||(n[8]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"steps",-1))])]),s.previousProgress&&(((y=s.previousProgress)==null?void 0:y.completedSteps)||[]).length>0?(a(),l("div",Gn,[e("div",Qn,[n[10]||(n[10]=e("span",{class:"text-sm font-medium text-slate-600"},"Previous Progress",-1)),e("span",Yn,r((((M=s.previousProgress)==null?void 0:M.completedSteps)||[]).length)+"/"+r((s.steps||[]).length),1)]),e("div",Xn,[e("div",{class:"h-full bg-slate-900 rounded-full transition-all",style:me({width:(((C=s.previousProgress)==null?void 0:C.completedSteps)||[]).length/Math.max((s.steps||[]).length,1)*100+"%"})},null,4)]),e("button",{onClick:n[1]||(n[1]=k=>t.$emit("continue")),class:"w-full py-3.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors"}," Continue ")])):j("",!0)])]),e("div",Zn,[e("div",Jn,[e("button",{onClick:n[2]||(n[2]=k=>t.$emit("start")),class:"w-full py-4 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors text-lg"},r(s.previousProgress?"Start Over":"Start Lesson"),1),e("button",{onClick:n[3]||(n[3]=k=>t.$emit("report-problem")),class:"w-full py-3 text-slate-400 hover:text-slate-600 text-sm transition-colors"}," Report an issue ")])])])}const ea=ke(jn,[["render",Kn],["__scopeId","data-v-61ce4102"]]),ta={name:"ContentPanel",props:{currentStep:Object,currentIndex:Number,isInteractiveStep:Boolean,isGameStep:Boolean,showExplanationAlways:Boolean,totalExercises:Number,exerciseIndex:Number,isLastStep:Boolean},emits:["init-vocabulary","pronounce","next","previous"],data(){return{highlightPhrases:[]}},computed:{currentLang(){return localStorage.getItem("lang")||"en"},isExerciseStep(){var t,n,s;return(((t=this.currentStep)==null?void 0:t.type)==="exercise"||((n=this.currentStep)==null?void 0:n.type)==="practice")&&!((s=this.currentStep)!=null&&s.gameType)},hasEmptyContent(){const t=this.getStepContent(this.currentStep);if(!t||typeof t!="string")return!0;const n=t.trim();return!n||n.includes("is not available")||n.includes("not found")||n.length<3},specialInteractiveTypes(){return["histogram","map","block-coding","data_analysis","fraction_visual","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","geometry","selection_game","language_tone_transformer","language_idiom_bridge","language_word_constellation","language_rhythm_match","language_false_friends"]},isSpecialInteractive(){var t;return this.specialInteractiveTypes.includes((t=this.currentStep)==null?void 0:t.type)},totalExercisesInStep(){var t;return this.currentStep?Array.isArray(this.currentStep.data)?this.currentStep.data.length:(t=this.currentStep.data)!=null&&t.exercises?this.currentStep.data.exercises.length:this.currentStep.exercises?this.currentStep.exercises.length:1:0},vocabularyModalCompleted(){var t,n;return((n=(t=this.currentStep)==null?void 0:t.data)==null?void 0:n.modalCompleted)||!1},vocabularyTerms(){var t,n,s;return this.currentStep?(t=this.currentStep.content)!=null&&t.terms&&Array.isArray(this.currentStep.content.terms)?this.currentStep.content.terms:(n=this.currentStep.data)!=null&&n.terms&&Array.isArray(this.currentStep.data.terms)?this.currentStep.data.terms:(s=this.currentStep.data)!=null&&s.allWords&&Array.isArray(this.currentStep.data.allWords)?this.currentStep.data.allWords:Array.isArray(this.currentStep.data)?this.currentStep.data:[]:[]},getVocabularyCount(){return this.vocabularyTerms.length||1}},methods:{getLocalizedText(t){if(!t)return"";if(typeof t=="string")return t.trim();if(typeof t=="object"&&t!==null){const n=this.currentLang;if(t[n]&&typeof t[n]=="string")return t[n].trim();const s=["en","ru","uz"];for(const i of s)if(t[i]&&typeof t[i]=="string")return t[i].trim();const v=Object.values(t);for(const i of v)if(typeof i=="string"&&i.trim())return i.trim()}return String(t||"")},getStepIcon(t){return{explanation:"ðŸ“š",example:"ðŸ’¡",reading:"ðŸ“–",exercise:"âœï¸",practice:"ðŸ§ª",quiz:"ðŸ§©",vocabulary:"ðŸ“",video:"ðŸŽ¬",audio:"ðŸŽµ",game:"ðŸŽ®",data_analysis:"ðŸ“Š",chem_matching:"ðŸ”—",chem_mixing:"âš—ï¸",english_sentence_order:"ðŸ“",english_sentence_fix:"âœï¸",language_word_constellation:"ðŸŒŸ",language_noun_bag:"ðŸŽ’",fraction_visual:"ðŸ”¢",geometry_poly:"ðŸ“",histogram:"ðŸ“ˆ",map:"ðŸ—ºï¸","block-coding":"ðŸ§±"}[t]||"ðŸ“„"},getStepTypeText(t){return{explanation:"Explanation",example:"Example",reading:"Reading",exercise:"Exercise",practice:"Practice",quiz:"Quiz",vocabulary:"Vocabulary",video:"Video",audio:"Audio",game:"Game",data_analysis:"Data Analysis",chem_matching:"Matching",chem_mixing:"Mixing",english_sentence_order:"Sentence Order",english_sentence_fix:"Sentence Fix",language_word_constellation:"Word Constellation",language_noun_bag:"Word Sort",fraction_visual:"Fractions",geometry_poly:"Geometry",histogram:"Histogram",map:"Map","block-coding":"Block Coding"}[t]||"Content"},getStepContent(t){var s,v,i,o,g,d;if(!t)return"Step not found";if(console.log("ðŸ” getStepContent:",{type:t.type,hasContent:!!t.content,hasContentText:!!((s=t.content)!=null&&s.text),contentTextType:typeof((v=t.content)==null?void 0:v.text),hasData:!!t.data,lang:this.currentLang}),t.gameType){const m=this.getLocalizedText(t.instructions),y=this.getLocalizedText(t.description);return m||y||"Complete the game to proceed"}let n=null;if(((i=t.content)==null?void 0:i.text)!==void 0?(n=t.content.text,console.log("ðŸ“ Found content.text:",typeof n)):((o=t.data)==null?void 0:o.content)!==void 0?n=t.data.content:((g=t.data)==null?void 0:g.text)!==void 0?n=t.data.text:((d=t.content)==null?void 0:d.content)!==void 0?n=t.content.content:typeof t.content=="string"?n=t.content:typeof t.data=="string"?n=t.data:t.description!==void 0?n=t.description:t.text!==void 0&&(n=t.text),n!=null){const m=this.getLocalizedText(n);if(console.log("âœ… Localized content length:",m==null?void 0:m.length),m&&m.trim())return m}return`Content for "${t.type}" step is not available`},formatContent(t){if(!t)return"";let n=this.getLocalizedText(t);return typeof n!="string"&&(console.warn("formatContent received non-string:",typeof n),n=String(n||"")),n.trim()?(n=n.replace(/\[card title="(.*?)"\]([\s\S]*?)\[\/card\]/g,(s,v,i)=>`<div class="content-card"><h3 class="card-heading">${v}</h3><div class="card-content">${i}</div></div>`),n=n.replace(/\[card\]([\s\S]*?)\[\/card\]/g,(s,v)=>`<div class="content-card">${v}</div>`),n=n.replace(/^## (.*$)/gim,'<h2 class="content-h2">$1</h2>').replace(/^### (.*$)/gim,'<h3 class="content-h3">$1</h3>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>"),`<p>${n}</p>`):""},applyHighlights(t){this.highlightPhrases=t||[],this.$nextTick(()=>{var v;const n=(v=this.$el)==null?void 0:v.querySelector(".content-text");if(!n||!t||t.length===0)return;n.querySelectorAll("mark.ai-highlight").forEach(i=>{const o=i.parentNode;o&&(o.replaceChild(document.createTextNode(i.textContent),i),o.normalize())}),t.forEach(i=>{if(!i||i.length<3)return;const o=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,!1),g=[];let d;for(;d=o.nextNode();)d.nodeValue&&d.nodeValue.includes(i)&&g.push(d);g.forEach(m=>{const y=m.nodeValue.split(i),M=document.createDocumentFragment();y.forEach((C,k)=>{if(M.appendChild(document.createTextNode(C)),k<y.length-1){const b=document.createElement("mark");b.className="ai-highlight",b.textContent=i,M.appendChild(b)}}),m.parentNode&&m.parentNode.replaceChild(M,m)})})})},clearHighlights(){this.highlightPhrases=[],this.$nextTick(()=>{var s;const t=(s=this.$el)==null?void 0:s.querySelector(".content-text");if(!t)return;t.querySelectorAll("mark.ai-highlight").forEach(v=>{const i=v.parentNode;i&&(i.replaceChild(document.createTextNode(v.textContent),v),i.normalize())})})},handleHighlightText(t){this.applyHighlights(t)}},mounted(){ot.on("highlight-text",this.handleHighlightText),ot.on("clear-highlights",this.clearHighlights)},beforeUnmount(){ot.off("highlight-text",this.handleHighlightText),ot.off("clear-highlights",this.clearHighlights)}},sa={class:"content-step-header"},na={class:"header-title"},aa={class:"step-number"},oa={class:"step-icon"},la={class:"step-text"},ra={key:0,class:"exercise-counter"},ia={class:"content-step-container"},ca={class:"content-padding"},ua={key:0},da={key:0,class:"empty-content-card"},va=["innerHTML"],ga={key:1,class:"interactive-instruction-card"},ma={class:"instruction-heading"},fa={class:"instruction-text"},pa={key:2,class:"game-context-view"},ha={class:"game-intro-card"},ba={class:"intro-header"},xa={class:"game-instructions-box"},ya={key:0,class:"game-instructions-text"},ka={key:1,class:"instruction-list"},_a={key:3,class:"interactive-instruction-card"},wa={class:"instruction-heading"},$a={class:"instruction-text"},Ca={key:4,class:"interactive-instruction-card"},Sa={class:"instruction-heading"},Aa={class:"instruction-text"},Ta={key:5,class:"interactive-instruction-card"},Ma={class:"instruction-heading"},Ia={class:"instruction-text"},La={key:6,class:"interactive-instruction-card"},Da={class:"instruction-heading"},ja={class:"instruction-text"},za={key:7,class:"interactive-instruction-card"},Ea={class:"instruction-heading"},qa={class:"instruction-text"},Ra={key:8,class:"interactive-instruction-card"},Pa={class:"instruction-heading"},Ba={class:"instruction-text"},Wa={key:9,class:"interactive-instruction-card"},Fa={class:"instruction-icon"},Na={class:"instruction-heading"},Va={class:"instruction-text"},Oa={key:10,class:"vocabulary-content"},Ua={key:0,class:"vocabulary-trigger"},Ha={class:"trigger-heading"},Ga={class:"trigger-subheading"},Qa={key:1,class:"vocabulary-list-view"},Ya={class:"vocabulary-header"},Xa={class:"vocabulary-list"},Za={class:"vocab-item-header"},Ja={class:"vocab-term"},Ka=["onClick"],eo={key:0,class:"learned-badge"},to={class:"vocab-definition"},so={key:0,class:"vocab-example"},no={key:11,class:"media-placeholder"},ao={class:"media-icon"},oo={class:"media-title"},lo={class:"media-description"},ro=["innerHTML"],io={class:"content-navigation"};function co(t,n,s,v,i,o){var g,d,m,y,M,C,k,b,_,h,p,w,A,S,E,T,q,Y,ne,V,Q,te,ee,ie,de,he,F,I,P,z,L,G,O,se,ae,be;return a(),l("div",{class:N(["content-panel",{"game-mode":s.isGameStep}])},[e("header",sa,[e("h3",na,[e("span",aa,r(s.currentIndex+1),1),e("span",oa,r(o.getStepIcon((g=s.currentStep)==null?void 0:g.type)),1),e("span",la,r(o.getStepTypeText((d=s.currentStep)==null?void 0:d.type)),1),s.isInteractiveStep&&!s.isGameStep?(a(),l("span",ra," ("+r(s.exerciseIndex+1)+"/"+r(s.totalExercises||1)+") ",1)):j("",!0)])]),e("div",ia,[e("div",ca,[["explanation","example","reading"].includes((m=s.currentStep)==null?void 0:m.type)?(a(),l("div",ua,[o.hasEmptyContent?(a(),l("div",da,n[4]||(n[4]=[e("div",{class:"empty-icon"},"ðŸ“­",-1),e("h3",{class:"empty-heading"},"Content Not Available",-1),e("p",{class:"empty-text"},"This step doesn't have content yet. Click Next to continue with the lesson.",-1)]))):(a(),l("div",{key:1,class:"content-text",innerHTML:o.formatContent(o.getStepContent(s.currentStep))},null,8,va))])):o.isExerciseStep?(a(),l("div",ga,[n[5]||(n[5]=e("div",{class:"instruction-icon"},"âœï¸",-1)),e("h3",ma,r(o.getLocalizedText((y=s.currentStep)==null?void 0:y.title)||"Complete the exercise on the right"),1),e("p",fa,r(o.getLocalizedText((M=s.currentStep)==null?void 0:M.instructions)||"Use the interactive panel to answer the question and continue with the lesson."),1)])):s.isGameStep?(a(),l("div",pa,[e("div",ha,[e("div",ba,[n[6]||(n[6]=e("span",{class:"game-icon"},"ðŸŽ®",-1)),e("h3",null,r(o.getLocalizedText((C=s.currentStep)==null?void 0:C.title)||"Interactive Challenge"),1)]),e("div",xa,[n[8]||(n[8]=e("h4",null,"How to Play:",-1)),(k=s.currentStep)!=null&&k.instructions?(a(),l("p",ya,r(o.getLocalizedText(s.currentStep.instructions)),1)):(a(),l("ul",ka,n[7]||(n[7]=[e("li",null,"Follow the instructions in the game panel",-1),e("li",null,"Complete all objectives to proceed",-1),e("li",null,"Have fun learning!",-1)])))])])])):o.isSpecialInteractive?(a(),l("div",_a,[n[9]||(n[9]=e("div",{class:"instruction-icon"},"ðŸŽ®",-1)),e("h3",wa,r(o.getLocalizedText((b=s.currentStep)==null?void 0:b.title)||"Interactive Exercise"),1),e("p",$a,r(o.getLocalizedText((_=s.currentStep)==null?void 0:_.instructions)||"Complete the interactive exercise on the right to continue."),1)])):((h=s.currentStep)==null?void 0:h.type)==="quiz"?(a(),l("div",Ca,[n[10]||(n[10]=e("div",{class:"instruction-icon"},"ðŸ§©",-1)),e("h3",Sa,r(o.getLocalizedText((p=s.currentStep)==null?void 0:p.title)||"Quiz Time!"),1),e("p",Aa,r(o.getLocalizedText((w=s.currentStep)==null?void 0:w.instructions)||"Answer the questions on the right to test your knowledge."),1)])):((A=s.currentStep)==null?void 0:A.type)==="data_analysis"?(a(),l("div",Ta,[n[11]||(n[11]=e("div",{class:"instruction-icon"},"ðŸ“Š",-1)),e("h3",Ma,r(o.getLocalizedText((S=s.currentStep)==null?void 0:S.title)||"Data Analysis"),1),e("p",Ia,r(o.getLocalizedText((E=s.currentStep)==null?void 0:E.instructions)||"Analyze the data and answer the question."),1)])):((T=s.currentStep)==null?void 0:T.type)==="chem_matching"?(a(),l("div",La,[n[12]||(n[12]=e("div",{class:"instruction-icon"},"ðŸ”—",-1)),e("h3",Da,r(o.getLocalizedText((q=s.currentStep)==null?void 0:q.title)||"Matching Exercise"),1),e("p",ja,r(o.getLocalizedText((Y=s.currentStep)==null?void 0:Y.instructions)||"Match the items on the left with their correct pairs on the right."),1)])):((ne=s.currentStep)==null?void 0:ne.type)==="english_sentence_order"?(a(),l("div",za,[n[13]||(n[13]=e("div",{class:"instruction-icon"},"ðŸ“",-1)),e("h3",Ea,r(o.getLocalizedText((V=s.currentStep)==null?void 0:V.title)||"Put in Order"),1),e("p",qa,r(o.getLocalizedText((Q=s.currentStep)==null?void 0:Q.instructions)||"Arrange the items in the correct order."),1)])):((te=s.currentStep)==null?void 0:te.type)==="language_word_constellation"?(a(),l("div",Ra,[n[14]||(n[14]=e("div",{class:"instruction-icon"},"ðŸŒŸ",-1)),e("h3",Pa,r(o.getLocalizedText((ee=s.currentStep)==null?void 0:ee.title)||"Word Constellation"),1),e("p",Ba,r(o.getLocalizedText((ie=s.currentStep)==null?void 0:ie.instructions)||"Connect the related words to build a semantic map."),1)])):s.isInteractiveStep&&!o.isExerciseStep&&!s.isGameStep?(a(),l("div",Wa,[e("div",Fa,r(((de=s.currentStep)==null?void 0:de.type)==="practice"?"ðŸ§ª":"ðŸ§©"),1),e("h3",Na,r(o.getLocalizedText((he=s.currentStep)==null?void 0:he.title)||`Complete the ${o.getStepTypeText((F=s.currentStep)==null?void 0:F.type).toLowerCase()} on the right`),1),e("p",Va,r(o.getLocalizedText((I=s.currentStep)==null?void 0:I.instructions)||"Use the interactive panel to complete this activity."),1)])):((P=s.currentStep)==null?void 0:P.type)==="vocabulary"?(a(),l("div",Oa,[o.vocabularyModalCompleted?(a(),l("div",Qa,[e("div",Ya,[n[16]||(n[16]=e("h3",null,"ðŸ“– Learned Words",-1)),e("button",{onClick:n[1]||(n[1]=oe=>t.$emit("init-vocabulary")),class:"review-button"}," ðŸ”„ Review ")]),e("div",Xa,[(a(!0),l(J,null,K(o.vocabularyTerms,(oe,Le)=>(a(),l("div",{key:(oe==null?void 0:oe.id)||`vocab-list-${Le}`,class:N(["vocabulary-item",{"is-learned":oe==null?void 0:oe.learned}])},[e("div",Za,[e("div",Ja,[xe(r(o.getLocalizedText(oe==null?void 0:oe.term))+" ",1),oe!=null&&oe.term?(a(),l("button",{key:0,onClick:Ee=>t.$emit("pronounce",o.getLocalizedText(oe.term)),class:"pronunciation-button",title:"Pronunciation"}," ðŸ”Š ",8,Ka)):j("",!0)]),oe!=null&&oe.learned?(a(),l("div",eo,"âœ…")):j("",!0)]),e("div",to,r(o.getLocalizedText(oe==null?void 0:oe.definition)),1),oe!=null&&oe.example?(a(),l("div",so,[n[17]||(n[17]=e("strong",null,"Example:",-1)),xe(" "+r(o.getLocalizedText(oe.example)),1)])):j("",!0)],2))),128))])])):(a(),l("div",Ua,[n[15]||(n[15]=e("div",{class:"trigger-icon"},"ðŸ“š",-1)),e("h3",Ha,r(o.getLocalizedText((z=s.currentStep)==null?void 0:z.title)||"Vocabulary Learning"),1),e("p",Ga,r(o.getVocabularyCount)+" new words await you!",1),e("button",{onClick:n[0]||(n[0]=oe=>t.$emit("init-vocabulary")),class:"trigger-button"}," ðŸš€ Start Learning ")]))])):["video","audio"].includes((L=s.currentStep)==null?void 0:L.type)?(a(),l("div",no,[e("div",ao,r(((G=s.currentStep)==null?void 0:G.type)==="video"?"ðŸŽ¬":"ðŸŽµ"),1),e("h4",oo,r(((O=s.currentStep)==null?void 0:O.type)==="video"?"Video Lesson":"Audio Lesson"),1),e("p",lo,r(o.getLocalizedText((ae=(se=s.currentStep)==null?void 0:se.data)==null?void 0:ae.description)||o.getLocalizedText((be=s.currentStep)==null?void 0:be.description)||"Multimedia content"),1)])):(a(),l("div",{key:12,class:"content-text",innerHTML:o.formatContent(o.getStepContent(s.currentStep))},null,8,ro))])]),e("footer",io,[s.currentIndex>0?(a(),l("button",{key:0,class:"nav-button prev-button",onClick:n[2]||(n[2]=oe=>t.$emit("previous"))}," â¬…ï¸ Back ")):j("",!0),!s.isInteractiveStep||o.hasEmptyContent?(a(),l("button",{key:1,class:N(["nav-button next-button",{"hide-on-mobile-game":s.isGameStep}]),onClick:n[3]||(n[3]=oe=>t.$emit("next"))},r(s.isLastStep?"ðŸ Finish":"âž¡ï¸ Next"),3)):j("",!0)])],2)}const uo=ke(ta,[["render",co],["__scopeId","data-v-a5eb7f42"]]);function vo(){const t=u(0),n=u(0),s=u(null),v=u(null),i=u([]),o=u([]),g=u([]),d=Gt({}),m=u(""),y=u(!1),M=u(""),C=u(""),k=u(null),b=u([]),_=u([]),h=u(null),p=u(null),w=u(0),A=u(2),S=u(!1),E=B(()=>w.value===1&&w.value<A.value),T=c=>{if(!c)return[];let f=[];if(c.questions&&Array.isArray(c.questions))return f=c.questions.map((H,R)=>({question:typeof H=="string"?H:H.text||H.question||`Question ${R+1}`,index:R,source:"explicit-array"})),f;const x=c.question||c.content||"";if(x){const H=[{name:"numbered-dot",regex:/(\d+\.\s*[^?]*\?)/g,extract:R=>R.replace(/^\d+\.\s*/,"").trim()},{name:"numbered-paren",regex:/(\d+\)\s*[^?]*\?)/g,extract:R=>R.replace(/^\d+\)\s*/,"").trim()},{name:"question-prefix",regex:/((?:Question|Question)\s*\d+[:.]\s*[^?]*\?)/gi,extract:R=>R.replace(/(?:Question|Question)\s*\d+[:.]\s*/i,"").trim()},{name:"simple-questions",regex:/([Ð-Ð¯A-Z][^?]*\?)/g,extract:R=>R.trim()}];for(const R of H){const X=[...x.matchAll(R.regex)];if(X.length>1){f=X.map((ce,je)=>({question:R.extract(ce[1]||ce[0]),index:je,source:`pattern-${R.name}`}));break}}if(f.length===0){const X=x.split(/\n+/).filter(ce=>ce.trim().length>0).filter(ce=>ce.includes("?"));X.length>1&&(f=X.map((ce,je)=>({question:ce.trim().replace(/^\d+[\.)]\s*/,""),index:je,source:"line-split"})))}}if(f.length===0&&c.data)if(Array.isArray(c.data)){const H=c.data.filter(R=>typeof R=="string"?R.includes("?"):R&&(R.question||R.text)&&String(R.question||R.text).includes("?"));H.length>0&&(f=H.map((R,X)=>({question:typeof R=="string"?R:R.question||R.text||`Question ${X+1}`,index:X,source:"data-array"})))}else c.data.questions&&Array.isArray(c.data.questions)&&(f=c.data.questions.map((H,R)=>({question:typeof H=="string"?H:H.text||H.question||`Question ${R+1}`,index:R,source:"data-questions"})));return f},q=(c,f)=>{if(!c||!f)return 0;const x=c.length>f.length?c:f,H=c.length>f.length?f:c;if(x.length===0)return 1;const R=Y(x,H);return(x.length-R)/x.length},Y=(c,f)=>{c=c.toLowerCase(),f=f.toLowerCase();const x=[];for(let H=0;H<=c.length;H++){let R=H;for(let X=0;X<=f.length;X++)if(H===0)x[X]=X;else if(X>0){let ce=x[X-1];c.charAt(H-1)!==f.charAt(X-1)&&(ce=Math.min(Math.min(ce,R),x[X])+1),x[X-1]=R,R=ce}H>0&&(x[f.length]=R)}return x[f.length]},ne=c=>{const f=[...c];for(let x=f.length-1;x>0;x--){const H=Math.floor(Math.random()*(x+1));[f[x],f[H]]=[f[H],f[x]]}if(f.length>1){let x=0;for(;x<5&&JSON.stringify(f)===JSON.stringify(c);){for(let H=f.length-1;H>0;H--){const R=Math.floor(Math.random()*(H+1));[f[H],f[R]]=[f[R],f[H]]}x++}}return f},V=c=>c.every((f,x)=>f.originalIndex===x),Q=c=>{const f=c.correctAnswer||c.answer;return Array.isArray(f)?f:[f].filter(Boolean)},te=(c,f)=>{const x=T(f);if(x.length>1){if(!Array.isArray(c))return!1;const X=Q(f);let ce=0;const je=x.length;for(let _e=0;_e<je;_e++){const Ve=c[_e];if(!Ve||typeof Ve!="string")continue;const Me=Ve.trim().toLowerCase();if(Me.length<1)continue;let ze=null;if(X[_e]?ze=X[_e]:X.length===1&&(ze=X[0]),ze){const st=String(ze).trim().toLowerCase();(Me===st||st.length>3&&q(Me,st)>.8)&&ce++}else Me.length>=2&&ce++}return ce/je>=.7}if(!c||typeof c!="string")return!1;const H=Q(f),R=c.trim().toLowerCase();return H.some(X=>{const ce=String(X).trim().toLowerCase();return R===ce?!0:ce.length>3?q(R,ce)>.8:!1})},ee=(c,f)=>{const x=f.correctAnswer;if(typeof x=="number")return c===x;if(typeof x=="string"&&x.length===1)return c===x.toUpperCase();if(typeof x=="string")return c===x;if(Array.isArray(x)){const H=Array.isArray(c)?[...c].sort():[c],R=[...x].sort();return JSON.stringify(H)===JSON.stringify(R)}return!1},ie=(c,f)=>{const x=f.correctAnswer;if(typeof x=="boolean"){if(typeof c=="boolean")return c===x;if(typeof c=="string")return c.toLowerCase()==="true"?!0:x===!1;if(typeof c=="number")return c===1===x}if(typeof x=="number"){if(typeof c=="number")return c===x;if(typeof c=="string"){const H=x===0;return c.toLowerCase()==="true"===H}}return typeof x=="string"&&typeof c=="string"?c.toLowerCase()===x.toLowerCase():!1},de=(c,f)=>{if(!c||typeof c!="object")return!1;let x=[];return f.questions&&Array.isArray(f.questions)?x=f.questions.flatMap(H=>H.blanks||[]):f.blanks&&Array.isArray(f.blanks)&&(x=f.blanks),x.length===0||Object.keys(c).length<x.length?!1:x.every(H=>{const R=H.id,X=c[R],ce=H.correctAnswer;return(X||"").trim().toLowerCase()===(ce||"").trim().toLowerCase()})},he=(c,f)=>!c||typeof c!="object"||Object.keys(c).length<f.pairs.length?!1:f.pairs.every(x=>c[x.id]===x.correctMatch),F=(c,f)=>!c||typeof c!="object"||Object.keys(c).length<f.questions.length?!1:f.questions.every(x=>JSON.stringify(c[x.id])===JSON.stringify(x.correctOrder)),I=(c,f)=>{(!c||typeof c!="object")&&(c=d);const x=Array.isArray(f.dropZones)?f.dropZones:Object.values(f.dropZones||{}).filter(X=>X&&(X.label||X.id));if(x.length===0)return!1;let H=0,R=0;for(const X of x){const ce=X.id||X.label||String(X),je=c[ce]||[];let qe=X.correctItems||X.items||[];X.correctItem!==void 0&&(typeof X.correctItem=="number"&&f.dragItems?qe=[(Array.isArray(f.dragItems)?f.dragItems:Object.values(f.dragItems))[X.correctItem]]:qe=[X.correctItem]),R+=qe.length;for(const _e of qe){const Ve=typeof _e=="string"?_e:(_e==null?void 0:_e.text)||(_e==null?void 0:_e.label)||String(_e);je.some(ze=>(typeof ze=="string"?ze:(ze==null?void 0:ze.text)||(ze==null?void 0:ze.label)||String(ze)).trim().toLowerCase()===Ve.trim().toLowerCase())&&H++}}return H===R&&R>0},P=c=>{if(!c)return!1;switch(c.type||"short-answer"){case"short-answer":case"reading":case"sentence-transformation":case"error-correction":return te(v.value,c);case"multiple-choice":case"abc":case"dialogue-completion":return ee(v.value,c);case"true-false":return ie(v.value,c);case"fill-blanks":return de(v.value,c);case"matching":return he(v.value,c);case"structure":case"ordering":return F(v.value,c);case"drag-drop":return I(d,c);case"geometry":return z(v.value,c);default:return te(v.value,c)}},z=(c,f)=>{if(f.mode==="calculate"){if(!c||typeof c!="object")return!1;const x=String(c.side_b)===String(f.questions.find(R=>R.id==="side_b").correctAnswer),H=String(c.angle_c)===String(f.questions.find(R=>R.id==="angle_c").correctAnswer);return x&&H}return!c||typeof c!="object"?!1:c.valid===!0},L=c=>{if(!c)return!1;switch(c.type||"multiple-choice"){case"multiple-choice":return ee(v.value,c);case"true-false":return ie(v.value,c);case"short-answer":return te(v.value,c);default:return ee(v.value,c)}},G=()=>{const c=["âœ… Excellent! Correct answer!","ðŸŽ‰ Correct! Keep it up!","â­ Magnificent! Continue!","ðŸš€ Right! You did great!","ðŸ’¯ Bull's-eye! Great work!","ðŸ† Superb! Let's move on!"];return c[Math.floor(Math.random()*c.length)]},O=c=>{const f=["ðŸ¤” Not quite right. You have one more attempt!","ðŸ’­ Think a little more. Try again!","ðŸŽ¯ Almost there! One more try!","ðŸ” Pay attention! You have a second attempt!","ðŸ“š Re-read the material and try again!","âš¡ Don't give up! Try another option!"];return f[Math.floor(Math.random()*f.length)]},se=(c,f)=>{const x=["ðŸ“š Don't worry! Correct answer:","ðŸ’¡ Here's the correct answer:","ðŸŽ¯ Correct answer:","âœ… Remember the correct answer:"];return`${x[Math.floor(Math.random()*x.length)]} ${f}`},ae=(c,f,x)=>{if(x)return G();if(!Array.isArray(c)||c.length===0)return"ðŸ”— Create at least one pair to check!";const R=(f.pairs||[]).length,X=c.length;if(X<R)return`ðŸ”— Create all ${R} pairs (you have ${X})`;let ce=0;return c.forEach(je=>{const{leftIndex:qe,rightIndex:_e}=je;qe!==void 0&&_e!==void 0&&qe===_e&&ce++}),ce===0?"ðŸ¤” No pairs match. Think about logical connections!":ce===1?`ðŸŽ¯ ${ce} pair correct out of ${R}. Check the rest!`:`ðŸŽ¯ ${ce} pairs correct out of ${R}. Almost there!`},be=c=>{var H;if(!c)return"";const{correctAnswer:f,type:x="short-answer"}=c;if(x==="multiple-choice"||x==="abc"||x==="dialogue-completion"){if(typeof f=="number")return((H=c.options[f])==null?void 0:H.text)||c.options[f]||"";if(typeof f=="string"&&f.length===1){const R=c.options.find(X=>(X.text||X).startsWith(f));return(R==null?void 0:R.text)||R||""}}return x==="matching"?c.pairs&&Array.isArray(c.pairs)?c.pairs.map(R=>`${R.left} â†” ${R.correctMatch}`).join("; "):"Correct pairs shown above":x==="ordering"||x==="structure"?c.questions&&Array.isArray(c.questions)?c.questions.map(R=>R.correctOrder.join(" ")).join("; "):"Correct order shown above":Array.isArray(f)?f.join("; "):String(f||"")},oe=c=>{w.value++;const f=P(c);if(y.value=f,f)m.value="âœ… Excellent! Correct answer!";else{const x=be(c);m.value=`Correct answer: ${x}`}return S.value=!0,f},Le=c=>{w.value++;const f=L(c);if(y.value=f,f)m.value=G(),S.value=!1;else if(E.value)m.value=O(),S.value=!1;else{const x=be(c);m.value=se(c,x),S.value=!0}return f},Ee=c=>{s.value=c},Pe=c=>{var H,R,X,ce,je,qe,_e,Ve;if(!c)return console.log("No current step provided"),null;if(c.gameType||c.type==="game")return console.log("This is a game step, not an exercise"),null;if(!["exercise","practice","data_analysis","fraction_visual","geometry","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","histogram","map","block-coding","explanation","language_tone_transformer","language_idiom_bridge","language_word_constellation","language_rhythm_match","language_false_friends"].includes(c.type))return console.log(`Step type ${c.type} is not a recognized exercise type`),null;let x=[];try{if(console.log("Processing step:",c),console.log("Step.data:",c.data),console.log("Step.data is array?",Array.isArray(c.data)),console.log("Step.data.length:",(H=c.data)==null?void 0:H.length),console.log("Step.data contents:",c.data?JSON.stringify(c.data,null,2):"N/A"),console.log("Step.content:",c.content),console.log("Step.content.type:",(R=c.content)==null?void 0:R.type),console.log("Step keys:",Object.keys(c)),Array.isArray(c.data)&&c.data.length>0?(console.log("Found exercises directly in data array, length:",c.data.length),x=c.data):(X=c.data)!=null&&X.exercises&&Array.isArray(c.data.exercises)?(console.log("Found exercises in data.exercises"),x=c.data.exercises):(ce=c.content)!=null&&ce.exercises&&Array.isArray(c.content.exercises)?(console.log("Found exercises in content.exercises"),x=c.content.exercises):c.exercises&&Array.isArray(c.exercises)?(console.log("Found exercises in step.exercises"),x=c.exercises):(je=c.data)!=null&&je.question||(qe=c.data)!=null&&qe.type?(console.log("Found single exercise in data (by question or type)"),x=[c.data]):(_e=c.content)!=null&&_e.question||(Ve=c.content)!=null&&Ve.type?(console.log("Found single exercise in content (by question or type)"),x=[c.content]):c.question?(console.log("Found single exercise as step itself"),x=[c]):(console.log("Step is the exercise itself (new interactive type)"),x=[c]),console.log(`Found ${x.length} exercises`),x.length===0)return console.warn("No exercises found in step"),null;t.value>=x.length&&(console.log("Resetting exercise index from",t.value,"to 0"),t.value=0);const Me=x[t.value];return console.log("Returning exercise:",Me),Me&&T(Me),Ee(Me),Me||null}catch(Me){return console.error("Error in getCurrentExercise:",Me),null}},D=c=>{if(!c||c.type!=="quiz")return null;let f=[];try{const x=c.data||c.content;return Array.isArray(x)?f=x:x&&Array.isArray(x.quizzes)?f=x.quizzes:x&&x.content&&Array.isArray(x.content.questions)?f=x.content.questions:x&&x.question&&(f=[x]),f.length===0?null:(n.value>=f.length&&(n.value=0),f[n.value]||null)}catch{return null}},U=c=>{if(!c||!["exercise","practice","data_analysis","fraction_visual","geometry","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","histogram","map","block-coding"].includes(c.type))return 0;try{let x=[];const H=c.data||c.content;if(Array.isArray(H))x=H;else if(H&&Array.isArray(H.exercises))x=H.exercises;else if(H&&H.content&&Array.isArray(H.content.exercises))x=H.content.exercises;else return 1;return x.length}catch{return 0}},Z=c=>{if(!c||c.type!=="quiz")return 0;try{let f=[];const x=c.data||c.content;return Array.isArray(x)?f=x:x&&Array.isArray(x.quizzes)?f=x.quizzes:x&&x.content&&Array.isArray(x.content.questions)&&(f=x.content.questions),f.length}catch{return 0}},ue=c=>{const f=U(c);return t.value>=f-1},Te=c=>{const f=Z(c);return n.value>=f-1},Be=(c,f)=>{ue(c)?(ut(),f()):(t.value++,Ce(),Ue(Pe(c)))},Xe=(c,f)=>{Te(c)?(ut(),f()):(n.value++,Ce())},Ue=c=>{if(c)switch(c.type){case"fill-blank":Qe(c);break;case"ordering":Je(c);break;case"drag-drop":Ke(c);break;case"matching":Re();break;case"short-answer":const f=T(c);f.length>1&&(v.value=new Array(f.length).fill(""));break}},Qe=c=>{if(!c){i.value=[];return}let f=0;if(c.blanks&&Array.isArray(c.blanks))f=c.blanks.length;else{const x=c.template||c.question||"",H=x.match(/_+/g)||[],R=x.match(/\[blank\]/gi)||[],X=x.match(/\{[^}]*\}/g)||[];f=Math.max(H.length,R.length,X.length)}i.value=new Array(Math.max(1,f)).fill("")},Je=c=>{if(!c||c.type!=="ordering"||!Array.isArray(c.items)){g.value=[];return}const f=c.items.map((R,X)=>({id:`item_${X}_${Math.random()}`,text:typeof R=="string"?R:(R==null?void 0:R.text)||String(R),originalIndex:X}));let x=[...f],H=0;for(;H<10&&JSON.stringify(x.map(R=>R.originalIndex))===JSON.stringify(f.map(R=>R.originalIndex));)x.sort(()=>Math.random()-.5),H++;g.value=x},Ke=c=>{Object.keys(d).forEach(f=>{delete d[f]}),b.value=[],_.value=[],!(!c||c.type!=="drag-drop")&&(c.dragItems&&Array.isArray(c.dragItems)&&(b.value=c.dragItems.map(f=>typeof f=="string"?{text:f,id:f}:f&&f.text?f:{text:String(f),id:String(f)})),c.dropZones&&Array.isArray(c.dropZones)&&(_.value=c.dropZones.map(f=>typeof f=="string"?{label:f,id:f,correctItems:[]}:f&&f.label?{label:f.label,id:f.id||f.label,correctItems:f.correctItems||f.items||[]}:{label:String(f),id:String(f),correctItems:[]}),_.value.forEach(f=>{d[f.id]=[]})))},Re=()=>{o.value=[],k.value=null,typeof window<"u"&&(window.matchingShuffleCache=null)},rt=(c,f)=>{if(!f){v.value=c;return}switch(f.type){case"matching":o.value=c||[],v.value=c||[];break;case"ordering":g.value=c||[],v.value=c||[];break;case"fill-blank":break;case"short-answer":T(f).length>1&&Array.isArray(c),v.value=c;break;default:v.value=c}},Ne=(c,f)=>{for(Array.isArray(i.value)||(i.value=[]);i.value.length<=c;)i.value.push("");const x=typeof f=="object"&&(f!=null&&f.target)?f.target.value:f;i.value[c]=x||"",i.value=[...i.value]},mt=()=>v.value||i.value||o.value||g.value,ft=c=>{k.value=c},pt=c=>{if(c>=0&&c<o.value.length){const f=o.value.filter((x,H)=>H!==c);o.value=f,v.value=f}},it=({item:c,event:f})=>{h.value=c},et=c=>{p.value=c},tt=()=>{p.value=null},Ze=({zoneId:c,item:f})=>{d[c]||(d[c]=[]);const x=typeof f=="string"?f:(f==null?void 0:f.text)||(f==null?void 0:f.label)||String(f);Object.keys(d).forEach(R=>{R!==c&&Array.isArray(d[R])&&(d[R]=d[R].filter(X=>(typeof X=="string"?X:(X==null?void 0:X.text)||(X==null?void 0:X.label)||String(X))!==x))}),d[c].some(R=>(typeof R=="string"?R:(R==null?void 0:R.text)||(R==null?void 0:R.label)||String(R))===x)||d[c].push(f),h.value=null,p.value=null},ct=({zoneId:c,itemIndex:f,item:x})=>{d[c]&&d[c][f]&&d[c].splice(f,1)},kt=()=>{M.value="Read the question carefully and think about the correct answer."},_t=()=>{C.value=""},ht=c=>{C.value=c},He=()=>{w.value=0,S.value=!1},Ce=()=>{v.value=null,m.value="",y.value=!1,M.value="",C.value="",He()},bt=()=>{i.value=[],o.value=[],k.value=null,g.value=[],b.value=[],_.value=[],Object.keys(d).forEach(c=>{delete d[c]})},ut=()=>{t.value=0,n.value=0,Ce(),bt(),He()};return{currentExerciseIndex:t,currentQuizIndex:n,userAnswer:v,confirmation:m,answerWasCorrect:y,currentHint:M,smartHint:C,fillBlankAnswers:i,matchingPairs:o,selectedMatchingItem:k,orderingItems:g,dragDropPlacements:d,availableDragItems:b,dropZones:_,draggedDragItem:h,dropOverZone:p,attemptCount:w,maxAttempts:A,showCorrectAnswer:S,isOnSecondChance:E,getCurrentExercise:Pe,getCurrentQuiz:D,getTotalExercises:U,getTotalQuizzes:Z,isLastExercise:ue,isLastQuiz:Te,goToNextExercise:Be,goToNextQuiz:Xe,setCurrentExercise:Ee,detectQuestionsFromExercise:T,validateCurrentAnswer:P,validateQuizAnswer:L,validateShortAnswer:te,validateMultipleChoice:ee,validateTrueFalse:ie,validateFillBlank:de,validateMatching:he,validateOrdering:F,validateDragDrop:I,submitAnswer:oe,submitQuizAnswer:Le,initializeCurrentExerciseData:Ue,initializeFillBlankAnswers:Qe,initializeOrderingItems:Je,initializeDragDropItems:Ke,initializeMatchingItems:Re,updateUserAnswer:rt,updateFillBlankAnswer:Ne,getCurrentUserAnswer:mt,handleMatchingSelection:ft,removeMatchingPair:pt,handleDragItemStart:it,handleDragOverZone:et,handleDragLeaveZone:tt,handleDropInZone:Ze,handleRemoveDroppedItem:ct,getCorrectAnswerDisplay:be,getMatchingFeedback:ae,getRandomSuccessMessage:G,getSecondChanceMessage:O,getFinalFailureMessage:se,showHint:kt,clearSmartHint:_t,setSmartHint:ht,resetExerciseState:ut,resetExerciseAnswers:Ce,resetExerciseData:bt,resetAttemptState:He,getCurrentExerciseType:c=>(c==null?void 0:c.type)||"short-answer",getFormattedFillBlankTemplate:c=>{if(!c||c.type!=="fill-blank")return"";const f=c.template||c.question||"";let x=0;return f.replace(/\[blank\]/gi,()=>`<input data-blank-index="${x++}">`).replace(/_+/g,()=>`<input data-blank-index="${x++}">`).replace(/\{[^}]*\}/g,()=>`<input data-blank-index="${x++}">`)},getLeftItemsArray:c=>{if(!(c!=null&&c.pairs))return[];const f=c.pairs;return Array.isArray(f)?f.map((x,H)=>{let R="";return Array.isArray(x)?R=String(x[0]||""):x&&typeof x=="object"?R=String(x.left||x[0]||x.question||x.term||""):R=String(x||""),{text:R,originalIndex:H}}).filter(x=>x.text.trim()!==""):[]},getRightItemsArray:c=>{if(!(c!=null&&c.pairs))return[];const f=c.pairs;if(Array.isArray(f)){const x=f.map((H,R)=>{let X="";return Array.isArray(H)?X=String(H[1]||""):H&&typeof H=="object"?X=String(H.right||H[1]||H.answer||H.definition||""):X=String(H||""),{text:X,originalIndex:R}}).filter(H=>H.text.trim()!=="");return ne(x)}return[]},calculateSimilarity:q,levenshteinDistance:Y,getCorrectAnswersArray:Q,shuffleArray:ne,isArrayInOriginalOrder:V,forceReshuffleRightItems:()=>!0}}function go(t){const n=u(0),s=u(0),v=u(null),i=u(null),o=B(()=>{const C=le(t);return(C==null?void 0:C.questions)||[]}),g=B(()=>o.value[s.value]),d=B(()=>s.value>=o.value.length-1&&i.value==="correct"),m=C=>{i.value||(v.value=C.id,C.id===g.value.targetId?(i.value="correct",n.value++,setTimeout(()=>{s.value<o.value.length-1&&y()},1500)):(i.value="incorrect",setTimeout(()=>{v.value=null,i.value=null},1e3)))},y=()=>{s.value++,v.value=null,i.value=null};return{score:n,currentQuestion:g,currentQuestionIndex:s,questions:o,selectedItemId:v,feedback:i,isComplete:d,handleSelection:m,resetGame:()=>{s.value=0,n.value=0,v.value=null,i.value=null}}}const mo={class:"game-hud-sidebar"},fo={class:"hud-section score"},po={class:"hud-value"},ho={class:"hud-value"},bo={key:0,class:"hud-section lives"},xo={class:"hearts"},yo={key:1,class:"hud-section prompt"},ko={class:"prompt-text"},_o={key:2,class:"hud-section target"},wo={class:"hud-value"},$o={__name:"GameHUDSidebar",props:{score:{type:Number,default:0},timeRemaining:{type:Number,default:60},lives:{type:Number,default:3},maxLives:{type:Number,default:3},prompt:{type:String,default:""},targetScore:{type:Number,default:0}},setup(t){return(n,s)=>(a(),l("div",mo,[e("div",fo,[s[0]||(s[0]=e("span",{class:"hud-icon"},"ðŸŽ¯",-1)),e("span",po,r(t.score),1),s[1]||(s[1]=e("span",{class:"hud-label"},"Score",-1))]),e("div",{class:N(["hud-section timer",{warning:t.timeRemaining<10}])},[s[2]||(s[2]=e("span",{class:"hud-icon"},"â³",-1)),e("span",ho,r(t.timeRemaining)+"s",1),s[3]||(s[3]=e("span",{class:"hud-label"},"Time",-1))],2),t.maxLives>0?(a(),l("div",bo,[e("div",xo,[(a(!0),l(J,null,K(t.maxLives,v=>(a(),l("span",{key:v,class:N(["heart",{lost:v>t.lives}])},"â¤ï¸",2))),128))]),s[4]||(s[4]=e("span",{class:"hud-label"},"Lives",-1))])):j("",!0),t.prompt?(a(),l("div",yo,[e("p",ko,r(t.prompt),1)])):j("",!0),t.targetScore?(a(),l("div",_o,[s[5]||(s[5]=e("span",{class:"hud-icon"},"ðŸŽ¯",-1)),e("span",wo,r(t.targetScore),1),s[6]||(s[6]=e("span",{class:"hud-label"},"Target",-1))])):j("",!0)]))}},Yt=ke($o,[["__scopeId","data-v-1df417cb"]]),Co={key:1,class:"question-display"},So={class:"question-text"},Ao={class:"game-world"},To={class:"orb-text"},Mo={class:"splash-icon"},Io={class:"splash-text"},Lo={__name:"BasketCatch",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60},isPaused:{type:Boolean,default:!1}},emits:["score-change","life-lost","item-collected","game-complete","pause","game-started"],setup(t,{emit:n}){const s=t,v=n,i=u(null),o=u([]),g=u({}),d=u(50),m=u(!1),y=u(0),M=u(null),C=u(null),k=u(0),b=u(!1),_=u(""),h=u(""),p=u(""),w=["#FFE0B2","#C8E6C9","#BBDEFB","#F8BBD0","#E1BEE7"],A=B(()=>s.gameData.questions||[{q:"Ready?",a:"Go",wrong:[]}]),S=B(()=>A.value[k.value]),E=B(()=>{var F,I;return((F=S.value)==null?void 0:F.q)||((I=S.value)==null?void 0:I.question)||"Loading..."}),T=()=>{if(!m.value||s.isPaused)return;const F=S.value;if(!F)return;const I=Math.random()>.5,P=F.a||F.correctAnswer||F.answer,z=F.wrong||F.wrongAnswers||["0","1"],L=z[Math.floor(Math.random()*z.length)],G=I?P:L,O={id:`item-${y.value++}`,text:G,isCorrect:I,x:Math.random()*80+10,speed:s.gameData.difficulty==="hard"?2.5:4,color:w[Math.floor(Math.random()*w.length)]};o.value.push(O),setTimeout(()=>{V(O.id)},O.speed*1e3+500)},q=()=>{var P;if(!m.value||s.isPaused)return;const F=(P=i.value)==null?void 0:P.querySelector(".basket-body");if(!F)return;const I=F.getBoundingClientRect();o.value.forEach(z=>{const L=g.value[z.id];if(!L)return;const G=L.getBoundingClientRect();!(G.right<I.left+20||G.left>I.right-20||G.bottom<I.top+20||G.top>I.bottom-20)&&Y(z)})},Y=F=>{V(F.id),F.isCorrect?(v("score-change",100),ne("Correct!","success","âœ¨"),o.value=[],setTimeout(()=>{k.value<A.value.length-1?k.value++:v("game-complete",{score:s.score+100})},800)):(v("score-change",-20),v("life-lost"),ne("Wrong!","error","âŒ"))},ne=(F,I,P)=>{_.value=F,h.value=I,p.value=P,b.value=!0,setTimeout(()=>b.value=!1,1e3)},V=F=>{const I=o.value.findIndex(P=>P.id===F);I!==-1&&(o.value.splice(I,1),delete g.value[F])},Q=F=>{if(!i.value||!m.value)return;const I=i.value.getBoundingClientRect();ee(F.clientX-I.left,I.width)},te=F=>{if(F.preventDefault(),!i.value||!m.value)return;const I=i.value.getBoundingClientRect();ee(F.touches[0].clientX-I.left,I.width)},ee=(F,I)=>{const P=F/I*100;d.value=Math.max(10,Math.min(90,P))},ie=()=>{m.value||de()},de=()=>{m.value=!0,o.value=[],k.value=0,M.value&&clearInterval(M.value),C.value&&clearInterval(C.value),M.value=setInterval(T,1400),C.value=setInterval(q,50)},he=()=>{m.value=!1,clearInterval(M.value),clearInterval(C.value)};return $e(()=>s.lives,F=>{F<=0&&he()}),Ge(()=>{o.value=[],v("game-started"),setTimeout(()=>{de()},100)}),lt(he),(F,I)=>(a(),l("div",{class:"basket-catch-game",ref_key:"gameContainer",ref:i,onMousemove:Q,onTouchmove:te,onClick:ie},[I[2]||(I[2]=We('<div class="sun" data-v-69674282>â˜€ï¸</div><div class="cloud cloud-1" data-v-69674282>â˜ï¸</div><div class="cloud cloud-2" data-v-69674282>â˜ï¸</div><div class="cloud cloud-3" data-v-69674282>â˜ï¸</div><div class="cloud cloud-4" data-v-69674282>â˜ï¸</div><div class="cloud cloud-5" data-v-69674282>â˜ï¸</div><div class="cloud cloud-6" data-v-69674282>â˜ï¸</div><div class="cloud cloud-7" data-v-69674282>â˜ï¸</div><div class="cloud cloud-8" data-v-69674282>â˜ï¸</div>',9)),m.value?(a(),fe(Yt,{key:0,score:t.score,"time-remaining":t.timeRemaining,lives:t.lives,"max-lives":3},null,8,["score","time-remaining","lives"])):j("",!0),m.value?(a(),l("div",Co,[I[0]||(I[0]=e("div",{class:"question-icon"},"â“",-1)),e("div",So,r(E.value),1)])):j("",!0),e("div",Ao,[(a(!0),l(J,null,K(o.value,P=>(a(),l("div",{key:P.id,class:"falling-orb",ref_for:!0,ref:z=>{z&&(g.value[P.id]=z)},style:me({left:P.x+"%",animationDuration:P.speed+"s",backgroundColor:P.color})},[e("span",To,r(P.text),1)],4))),128))]),e("div",{class:"basket-wrapper",style:me({left:d.value+"%"})},I[1]||(I[1]=[e("div",{class:"basket-body"},[e("span",{class:"basket-emoji"},"ðŸ§º")],-1)]),4),ye(Ie,{name:"pop"},{default:Ae(()=>[b.value?(a(),l("div",{key:0,class:N(["feedback-splash",h.value])},[e("div",Mo,r(p.value),1),e("div",Io,r(_.value),1)],2)):j("",!0)]),_:1})],544))}},Vt=ke(Lo,[["__scopeId","data-v-69674282"]]),Do={class:"memory-cards-game"},jo={key:1,class:"instruction-banner"},zo={class:"instruction-text"},Eo=["onClick"],qo={class:"card-back"},Ro={class:"card-content"},Po={__name:"MemoryCards",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(t,{emit:n}){const s=t,v=n,i=u([]),o=u([]),g=u(0),d=u(!0),m=u(!0),y=B(()=>{var w;return((w=s.gameData)==null?void 0:w.instructions)||"Find matching pairs!"}),M=B(()=>{var w,A;return((w=s.gameData)==null?void 0:w.items)||((A=s.gameData)==null?void 0:A.pairs)||[]}),C=B(()=>{const w=i.value.length;return w<=12?"4x3":w<=16?"4x4":w<=20?"5x4":"6x4"}),k=()=>{if(M.value.length===0)return;const w=[];let A=0;M.value.forEach((S,E)=>{let T;typeof S=="object"&&S!==null?T=S.content||S.text||S.word||JSON.stringify(S):T=S,w.push({id:A++,pairId:E,content:T,flipped:!1,matched:!1}),w.push({id:A++,pairId:E,content:T,flipped:!1,matched:!1})}),i.value=b(w)},b=w=>{const A=[...w];for(let S=A.length-1;S>0;S--){const E=Math.floor(Math.random()*(S+1));[A[S],A[E]]=[A[E],A[S]]}return A},_=w=>{!m.value||!d.value||w.flipped||w.matched||(w.flipped=!0,o.value.push(w),o.value.length===2&&(d.value=!1,h()))},h=()=>{const[w,A]=o.value;w.pairId===A.pairId?setTimeout(()=>{w.matched=!0,A.matched=!0,g.value++,v("score-change",20),v("item-collected",{isCorrect:!0}),g.value===M.value.length&&setTimeout(()=>{v("game-complete",{reason:"all-matched"})},500),p()},500):setTimeout(()=>{w.flipped=!1,A.flipped=!1,v("score-change",-2),v("item-collected",{isCorrect:!1}),p()},1e3)},p=()=>{o.value=[],d.value=!0};return $e(()=>s.lives,w=>{w<=0&&(m.value=!1)}),$e(()=>s.timeRemaining,w=>{w<=0&&(m.value=!1)}),Ge(()=>{k(),v("game-started")}),(w,A)=>(a(),l("div",Do,[m.value?(a(),fe(Yt,{key:0,score:t.score,"time-remaining":t.timeRemaining,lives:t.lives,"max-lives":3},null,8,["score","time-remaining","lives"])):j("",!0),m.value?(a(),l("div",jo,[e("p",zo,r(y.value),1)])):j("",!0),e("div",{class:N(["cards-grid",`grid-${C.value}`])},[(a(!0),l(J,null,K(i.value,S=>(a(),l("div",{key:S.id,class:"card-wrapper",onClick:E=>_(S)},[e("div",{class:N(["card",{flipped:S.flipped,matched:S.matched}])},[A[0]||(A[0]=e("div",{class:"card-front"},[e("div",{class:"card-icon"},"ðŸŽ´")],-1)),e("div",qo,[e("div",Ro,r(S.content),1)])],2)],8,Eo))),128))],2)]))}},Bo=ke(Po,[["__scopeId","data-v-3359ceb4"]]),Wo={ref:"gameWrapper",class:"game-container"},Fo={class:"top-section"},No={class:"question-text"},Vo={class:"stats-row"},Oo={class:"stat-badge stat-score"},Uo={class:"stat-value"},Ho={class:"stat-badge stat-time"},Go={class:"stat-value"},Qo={class:"stat-badge stat-lives"},Yo={class:"game-area"},Xo={class:"moles-grid"},Zo={key:1,class:"start-screen"},Jo={class:"start-content"},Ko={class:"start-info"},el={class:"info-item"},tl={class:"info-value"},sl={class:"info-item"},nl={class:"info-value"},al={class:"info-item"},ol={class:"info-value"},ll={key:2,class:"gameover-screen"},rl={class:"gameover-card"},il={class:"gameover-emoji"},cl={class:"gameover-title"},ul={class:"gameover-score"},dl={class:"gameover-stars"},vl={class:"gameover-stats"},gl={class:"gstat"},ml={class:"gstat-value gstat-correct"},fl={class:"gstat"},pl={class:"gstat-value gstat-wrong"},hl={class:"gstat"},bl={class:"gstat-value"},xl={class:"gameover-progress"},yl={class:"gameover-timer"},kl=2500,_l=1200,Ot=5e3,wl={__name:"WhackAMole",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(t,{emit:n}){const s=js({props:{hole:Object},setup(F){return()=>{var I,P,z,L,G,O;return pe("div",{class:"hole-container"},[pe("div",{class:"hole-visual"},[pe("div",{class:"dirt-mound-back"}),pe("div",{class:["mole-wrapper",{"mole-up":(I=F.hole)==null?void 0:I.active,"mole-hit":((P=F.hole)==null?void 0:P.state)==="hit","mole-miss":((z=F.hole)==null?void 0:z.state)==="miss"}]},[pe("div",{class:"mole-character"},[pe("div",{class:"mole-head"},[pe("div",{class:"mole-ear mole-ear-l"}),pe("div",{class:"mole-ear mole-ear-r"}),pe("div",{class:"mole-face"},[pe("div",{class:"mole-eye mole-eye-l"},[pe("div",{class:"mole-pupil"}),pe("div",{class:"mole-eye-shine"})]),pe("div",{class:"mole-eye mole-eye-r"},[pe("div",{class:"mole-pupil"}),pe("div",{class:"mole-eye-shine"})]),pe("div",{class:"mole-cheek mole-cheek-l"}),pe("div",{class:"mole-cheek mole-cheek-r"}),pe("div",{class:"mole-nose"}),pe("div",{class:"mole-mouth"})])]),pe("div",{class:"mole-body"},[pe("div",{class:"mole-body-inner"}),pe("div",{class:"mole-paw mole-paw-l"}),pe("div",{class:"mole-paw mole-paw-r"})])])]),pe("div",{class:"dirt-mound-front"}),pe("div",{class:["wooden-sign",{"sign-visible":(L=F.hole)==null?void 0:L.active}]},[pe("div",{class:"sign-board"},[pe("span",{class:"sign-text"},((G=F.hole)==null?void 0:G.content)||"")])])]),(O=F.hole)!=null&&O.showEffect?pe("div",{class:"hit-effect"},F.hole.state==="hit"?"â­":"âŒ"):null])}}}),v=t,i=n,o=B(()=>{var F;return((F=v.gameData)==null?void 0:F.lives)||3}),g=B(()=>{var F;return((F=v.gameData)==null?void 0:F.timeLimit)||60}),d=B(()=>{var F;return((F=v.gameData)==null?void 0:F.targetScore)||100}),m=u([]),y=u(!1),M=u(null),C=u(0),k=u(!1),b=u(0),_=u(100),h=u(null),p=u(null),w=u(0),A=u(0),S=B(()=>{var F,I;return((I=(F=v.gameData)==null?void 0:F.questions)==null?void 0:I.length)>0?"question":"category"}),E=B(()=>{var F;return((F=v.gameData)==null?void 0:F.questions)||[]}),T=B(()=>E.value[C.value]),q=B(()=>{var F,I,P,z;return S.value==="question"?((F=T.value)==null?void 0:F.q)||((I=T.value)==null?void 0:I.question)||"Find the answer!":((P=v.gameData)==null?void 0:P.targetCategory)||((z=v.gameData)==null?void 0:z.prompt)||"Tap correct items!"}),Y=B(()=>{const F=w.value+A.value;return F===0?0:Math.round(w.value/F*100)}),ne=()=>{m.value=Array.from({length:4},()=>({active:!1,content:"",isCorrect:!1,state:"idle",showEffect:!1,timer:null}))},V=()=>{var O;if(!y.value)return;const F=m.value.map((se,ae)=>se.active?null:ae).filter(se=>se!==null);if(F.length===0)return;const I=F[Math.floor(Math.random()*F.length)],P=m.value[I];let z="",L=!1;if(S.value==="question"){const se=T.value;if(!se)return;if(L=Math.random()>.4,L)z=se.a||se.answer||se.correctAnswer||"âœ“";else{const ae=se.wrong||se.wrongAnswers||se.distractors||[];z=ae.length>0?ae[Math.floor(Math.random()*ae.length)]:"âœ—"}}else{const se=((O=v.gameData)==null?void 0:O.items)||[];if(se.length===0)return;const ae=se[Math.floor(Math.random()*se.length)];typeof ae=="string"?(z=ae,L=!0):(z=ae.text||ae.word||ae.label||"?",L=ae.isCorrect??ae.correct??!0)}P.content=z,P.isCorrect=L,P.active=!0,P.state="idle";const G=Math.max(_l,kl-v.score*15);P.timer=setTimeout(()=>{P.active&&P.state==="idle"&&(P.active=!1)},G)},Q=F=>{const I=m.value[F];!I||!I.active||I.state!=="idle"||(clearTimeout(I.timer),I.showEffect=!0,I.isCorrect?(I.state="hit",w.value++,i("score-change",10),i("item-collected",{isCorrect:!0}),S.value==="question"&&setTimeout(()=>te(),400)):(I.state="miss",A.value++,i("score-change",-5),i("life-lost"),i("item-collected",{isCorrect:!1})),setTimeout(()=>{I.active=!1,I.showEffect=!1,I.state="idle"},350))},te=()=>{C.value<E.value.length-1?(C.value++,m.value.forEach(F=>{F.active=!1,clearTimeout(F.timer)})):ie()},ee=()=>{const F=v.score/d.value*100;return F>=100?3:F>=70?2:F>=40?1:0},ie=()=>{he(),k.value=!0,b.value=ee(),_.value=100;const F=Date.now();h.value=setInterval(()=>{_.value=Math.max(0,100-(Date.now()-F)/Ot*100)},50),p.value=setTimeout(()=>{clearInterval(h.value),i("game-complete",{score:v.score,stars:b.value,accuracy:Y.value,correctHits:w.value,wrongHits:A.value,completed:v.score>=d.value*.4})},Ot)},de=()=>{k.value=!1,y.value=!0,w.value=0,A.value=0,C.value=0,ne(),i("game-started"),setTimeout(()=>{M.value=setInterval(V,900)},500)},he=()=>{y.value=!1,M.value&&(clearInterval(M.value),M.value=null),m.value.forEach(F=>{F.timer&&clearTimeout(F.timer)})};return $e(()=>v.score,F=>{F>=d.value&&y.value&&ie()}),$e(()=>v.lives,F=>{F<=0&&y.value&&ie()}),$e(()=>v.timeRemaining,F=>{F<=0&&y.value&&ie()}),Ge(()=>ne()),lt(()=>{he(),p.value&&clearTimeout(p.value),h.value&&clearInterval(h.value)}),(F,I)=>(a(),l("div",Wo,[y.value?(a(),l(J,{key:0},[e("div",Fo,[(a(),l("div",{class:"question-card",key:C.value},[I[8]||(I[8]=e("span",{class:"question-label"},"Question",-1)),e("p",No,r(q.value),1)])),e("div",Vo,[e("div",Oo,[I[9]||(I[9]=e("span",{class:"stat-icon"},"ðŸŽ¯",-1)),e("span",Uo,r(t.score),1)]),e("div",Ho,[I[10]||(I[10]=e("span",{class:"stat-icon"},"â±ï¸",-1)),e("span",Go,r(t.timeRemaining)+"s",1)]),e("div",Qo,[(a(!0),l(J,null,K(o.value,P=>(a(),l("span",{key:P,class:"heart"},r(P<=t.lives?"â¤ï¸":"ðŸ¤"),1))),128))])])]),e("div",Yo,[e("div",Xo,[e("div",{class:"mole-cell",onClick:I[0]||(I[0]=P=>Q(0)),onTouchstart:I[1]||(I[1]=De(P=>Q(0),["prevent"]))},[ye(le(s),{hole:m.value[0]},null,8,["hole"])],32),e("div",{class:"mole-cell",onClick:I[2]||(I[2]=P=>Q(1)),onTouchstart:I[3]||(I[3]=De(P=>Q(1),["prevent"]))},[ye(le(s),{hole:m.value[1]},null,8,["hole"])],32),e("div",{class:"mole-cell",onClick:I[4]||(I[4]=P=>Q(2)),onTouchstart:I[5]||(I[5]=De(P=>Q(2),["prevent"]))},[ye(le(s),{hole:m.value[2]},null,8,["hole"])],32),e("div",{class:"mole-cell",onClick:I[6]||(I[6]=P=>Q(3)),onTouchstart:I[7]||(I[7]=De(P=>Q(3),["prevent"]))},[ye(le(s),{hole:m.value[3]},null,8,["hole"])],32)])])],64)):k.value?(a(),l("div",ll,[e("div",rl,[e("div",il,r(b.value>=3?"ðŸ†":b.value>=2?"ðŸŽ‰":b.value>=1?"ðŸ‘":"ðŸ’ª"),1),e("h2",cl,r(b.value>=3?"Perfect!":b.value>=2?"Great Job!":b.value>=1?"Good Try!":"Keep Going!"),1),e("div",ul,r(t.score),1),I[24]||(I[24]=e("div",{class:"gameover-score-label"},"points",-1)),e("div",dl,[(a(),l(J,null,K(3,P=>e("span",{key:P,class:N(["star",P<=b.value?"star-filled":"star-empty"])},"â˜…",2)),64))]),e("div",vl,[e("div",gl,[e("div",ml,r(w.value),1),I[19]||(I[19]=e("div",{class:"gstat-label"},"Correct",-1))]),I[22]||(I[22]=e("div",{class:"gstat-divider"},null,-1)),e("div",fl,[e("div",pl,r(A.value),1),I[20]||(I[20]=e("div",{class:"gstat-label"},"Wrong",-1))]),I[23]||(I[23]=e("div",{class:"gstat-divider"},null,-1)),e("div",hl,[e("div",bl,r(Y.value)+"%",1),I[21]||(I[21]=e("div",{class:"gstat-label"},"Accuracy",-1))])]),e("div",xl,[e("div",{class:"progress-fill",style:me({width:_.value+"%"})},null,4)]),e("p",yl,"Next in "+r(Math.ceil(_.value/20))+"s",1)])])):(a(),l("div",Zo,[e("div",Jo,[I[18]||(I[18]=We('<div class="start-mole" data-v-daa656e9><div class="mole-preview" data-v-daa656e9><div class="preview-body" data-v-daa656e9></div><div class="preview-ear preview-ear-l" data-v-daa656e9></div><div class="preview-ear preview-ear-r" data-v-daa656e9></div><div class="preview-eye preview-eye-l" data-v-daa656e9></div><div class="preview-eye preview-eye-r" data-v-daa656e9></div><div class="preview-nose" data-v-daa656e9></div><div class="preview-cheek preview-cheek-l" data-v-daa656e9></div><div class="preview-cheek preview-cheek-r" data-v-daa656e9></div></div></div><h1 class="start-title" data-v-daa656e9>Whack-a-Mole!</h1><p class="start-subtitle" data-v-daa656e9>Tap moles with the <strong data-v-daa656e9>correct answer</strong></p>',3)),e("div",Ko,[e("div",el,[I[11]||(I[11]=e("span",{class:"info-icon"},"â¤ï¸",-1)),I[12]||(I[12]=e("span",{class:"info-label"},"Lives",-1)),e("span",tl,r(o.value),1)]),e("div",sl,[I[13]||(I[13]=e("span",{class:"info-icon"},"â±ï¸",-1)),I[14]||(I[14]=e("span",{class:"info-label"},"Time",-1)),e("span",nl,r(g.value)+"s",1)]),e("div",al,[I[15]||(I[15]=e("span",{class:"info-icon"},"ðŸŽ¯",-1)),I[16]||(I[16]=e("span",{class:"info-label"},"Goal",-1)),e("span",ol,r(d.value),1)])]),e("button",{class:"start-button",onClick:de,onTouchend:De(de,["prevent"])},I[17]||(I[17]=[e("span",{class:"button-text"},"Play Now",-1),e("span",{class:"button-icon"},"â–¶",-1)]),32)])]))],512))}},$l=ke(wl,[["__scopeId","data-v-daa656e9"]]),Cl={class:"lightning-round-game"},Sl={key:0,class:"question-container"},Al={class:"question-number"},Tl={class:"question-card"},Ml={class:"question-text"},Il={class:"options-grid"},Ll=["disabled","onClick"],Dl={class:"question-timer"},jl={class:"game-instructions"},zl={__name:"LightningRound",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(t,{emit:n}){const s=t,v=n,i=u(0),o=u(!1),g=u(null),d=u(""),m=u(""),y=u(10),M=u(null),C=u(!0),k=B(()=>{var q;return((q=s.gameData)==null?void 0:q.instructions)||"Answer as fast as you can!"}),b=B(()=>{var q,Y;return((q=s.gameData)==null?void 0:q.questions)||((Y=s.gameData)==null?void 0:Y.items)||[]}),_=B(()=>i.value<b.value.length?b.value[i.value]:null),h=B(()=>y.value/10*100),p=()=>{y.value=10,M.value=setInterval(()=>{y.value--,y.value<=0&&(clearInterval(M.value),o.value||A())},1e3)},w=q=>{if(o.value||!C.value)return;o.value=!0,g.value=q,M.value&&clearInterval(M.value);const Y=_.value,ne=Y.correctAnswer,V=q===ne;let Q=0;V?(Q=10+Math.floor(y.value*2),d.value=`Correct! +${Q} points`,m.value="correct"):(Q=-5,d.value=`Wrong! The correct answer was: ${Y.options[ne]}`,m.value="incorrect",v("life-lost")),v("score-change",Q),v("item-collected",{isCorrect:V}),setTimeout(()=>{S()},2e3)},A=()=>{o.value=!0,g.value=null,d.value="Time's up!",m.value="timeout",v("life-lost"),v("score-change",-5),v("item-collected",{isCorrect:!1}),setTimeout(()=>{S()},2e3)},S=()=>{i.value++,i.value>=b.value.length?(v("game-complete",{reason:"all-questions-answered"}),C.value=!1):(o.value=!1,g.value=null,d.value="",m.value="",p())},E=q=>{var ne;if(!o.value)return"";const Y=(ne=_.value)==null?void 0:ne.correctAnswer;return q===g.value?q===Y?"selected-correct":"selected-wrong":q===Y?"show-correct":"disabled"},T=()=>{C.value=!1,M.value&&clearInterval(M.value)};return $e(()=>s.lives,q=>{q<=0&&T()}),$e(()=>s.timeRemaining,q=>{q<=0&&T()}),Ge(()=>{b.value.length>0&&(p(),v("game-started"))}),lt(()=>{T()}),(q,Y)=>(a(),l("div",Cl,[_.value?(a(),l("div",Sl,[e("div",Al," Question "+r(i.value+1)+" / "+r(b.value.length),1),e("div",Tl,[e("h3",Ml,r(_.value.question),1),e("div",Il,[(a(!0),l(J,null,K(_.value.options,(ne,V)=>(a(),l("button",{key:V,class:N(["option-btn",E(V)]),disabled:o.value,onClick:Q=>w(V)},r(ne),11,Ll))),128))]),o.value?(a(),l("div",{key:0,class:N(["feedback",m.value])},r(d.value),3)):j("",!0)]),e("div",Dl,[e("div",{class:"timer-bar",style:me({width:`${h.value}%`})},null,4)])])):j("",!0),e("div",jl,r(k.value),1)]))}},El=ke(zl,[["__scopeId","data-v-632b2750"]]),ql={class:"pattern-builder-game"},Rl={class:"pattern-display"},Pl={class:"pattern-items"},Bl={class:"player-pattern"},Wl={class:"pattern-items"},Fl=["onClick"],Nl={key:0,class:"pattern-item empty"},Vl={class:"available-items"},Ol={class:"items-grid"},Ul=["disabled","onClick"],Hl={class:"game-instructions"},Gl={__name:"PatternBuilder",props:{gameData:{type:Object,required:!0},score:{type:Number,default:0},lives:{type:Number,default:3},timeRemaining:{type:Number,default:60}},emits:["score-change","life-lost","game-complete","item-collected","game-started"],setup(t,{emit:n}){const s=t,v=n,i=u([]),o=u([]),g=u([]),d=u(0),m=u(!1),y=u(!0),M=B(()=>{var E;return((E=s.gameData)==null?void 0:E.instructions)||"Build the pattern using the items below!"}),C=B(()=>{var E,T;return((E=s.gameData)==null?void 0:E.items)||((T=s.gameData)==null?void 0:T.patterns)||[]}),k=()=>{if(d.value>=C.value.length){v("game-complete",{reason:"all-patterns-completed"}),y.value=!1;return}const E=C.value[d.value];Array.isArray(E)?i.value=[...E]:E.pattern?i.value=[...E.pattern]:i.value=["A","B","C"],o.value=[],m.value=!1;const T=[...i.value];E.distractors&&T.push(...E.distractors);const q=b(T);g.value=q.map((Y,ne)=>({id:ne,text:Y,available:!0}))},b=E=>{const T=[...E];for(let q=T.length-1;q>0;q--){const Y=Math.floor(Math.random()*(q+1));[T[q],T[Y]]=[T[Y],T[q]]}return T},_=E=>{!E.available||!y.value||o.value.length<i.value.length&&(o.value.push(E.text),E.available=!1)},h=E=>{if(!y.value||m.value)return;const T=o.value[E];o.value.splice(E,1);const q=g.value.find(Y=>Y.text===T&&!Y.available);q&&(q.available=!0)},p=()=>{if(o.value.length!==i.value.length)return;if(m.value=!0,o.value.every((T,q)=>T===i.value[q])){const T=25+i.value.length*5;v("score-change",T),v("item-collected",{isCorrect:!0}),setTimeout(()=>{d.value++,k()},1500)}else v("score-change",-10),v("life-lost"),v("item-collected",{isCorrect:!1}),setTimeout(()=>{w()},2e3)},w=()=>{o.value=[],m.value=!1,g.value.forEach(E=>{E.available=!0})},A=E=>m.value?o.value[E]===i.value[E]:!1,S=E=>m.value?o.value[E]!==i.value[E]:!1;return $e(()=>s.lives,E=>{E<=0&&(y.value=!1)}),$e(()=>s.timeRemaining,E=>{E<=0&&(y.value=!1)}),Ge(()=>{C.value.length>0&&(k(),v("game-started"))}),(E,T)=>(a(),l("div",ql,[e("div",Rl,[T[0]||(T[0]=e("h3",{class:"pattern-title"},"Build this pattern:",-1)),e("div",Pl,[(a(!0),l(J,null,K(i.value,(q,Y)=>(a(),l("div",{key:`target-${Y}`,class:"pattern-item target"},r(q),1))),128))])]),e("div",Bl,[T[2]||(T[2]=e("h3",{class:"pattern-title"},"Your pattern:",-1)),e("div",Wl,[(a(!0),l(J,null,K(o.value,(q,Y)=>(a(),l("div",{key:`player-${Y}`,class:N(["pattern-item player",{correct:A(Y),wrong:S(Y)}]),onClick:ne=>h(Y)},[xe(r(q)+" ",1),T[1]||(T[1]=e("span",{class:"remove-icon"},"Ã—",-1))],10,Fl))),128)),o.value.length<i.value.length?(a(),l("div",Nl," ? ")):j("",!0)])]),e("div",Vl,[T[3]||(T[3]=e("h3",{class:"items-title"},"Drag or click items:",-1)),e("div",Ol,[(a(!0),l(J,null,K(g.value,(q,Y)=>(a(),l("button",{key:`available-${Y}`,class:"item-btn",disabled:!q.available,onClick:ne=>_(q)},r(q.text),9,Ul))),128))])]),o.value.length===i.value.length?(a(),l("button",{key:0,class:"check-btn",onClick:p}," Check Pattern ")):j("",!0),e("div",Hl,r(M.value),1)]))}},Ql=ke(Gl,[["__scopeId","data-v-9d121a37"]]),Yl={class:"flex flex-col items-center justify-center min-h-[400px] w-full bg-slate-50 p-6 rounded-2xl border border-slate-200 shadow-sm relative overflow-hidden"},Xl={key:0,class:"w-1 h-1 bg-slate-200 rounded-full mx-auto mt-[40%]"},Zl={class:"relative w-4/5 h-4/5"},at=48,gt=8,St=10,Jl={__name:"MazeRunner",props:{grid:{type:Array,default:()=>[[1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,0,0,0,0,1],[1,0,1,0,1,0,1,1,0,1],[1,0,1,0,0,0,0,1,0,1],[1,0,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,0,1,0,1],[1,1,1,1,1,1,1,1,0,1],[1,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1]]},robotPos:{type:Object,default:()=>({x:1,y:1})},goalPos:{type:Object,default:()=>({x:8,y:7})}},setup(t){const n=t,s=u({...n.robotPos}),v=u(!1),i=B(()=>n.robotPos||s.value),o=B(()=>n.goalPos),g=B(()=>at*St+gt*(St-1)+32),d=B(()=>at*n.grid.length+gt*(n.grid.length-1)+32),m=B(()=>n.grid.flat()),y=M=>{if(!M)return{};const C=16+M.x*(at+gt),k=16+M.y*(at+gt);return{width:`${at}px`,height:`${at}px`,transform:`translate(${C}px, ${k}px)`}};return $e(()=>n.robotPos,()=>{v.value=!0,setTimeout(()=>v.value=!1,500)},{deep:!0}),(M,C)=>(a(),l("div",Yl,[C[2]||(C[2]=We('<div class="absolute top-0 left-0 w-full h-full opacity-30 pointer-events-none bg-[radial-gradient(#e0e7ff_1px,transparent_1px)] [background-size:16px_16px]" data-v-357da0eb></div><div class="relative z-10 mb-6 flex justify-between w-full max-w-md px-4" data-v-357da0eb><div class="flex flex-col" data-v-357da0eb><span class="text-xs font-bold tracking-wider text-slate-400 uppercase" data-v-357da0eb>Current Level</span><span class="text-2xl font-black text-slate-800" data-v-357da0eb>01</span></div><div class="flex flex-col items-end" data-v-357da0eb><span class="text-xs font-bold tracking-wider text-slate-400 uppercase" data-v-357da0eb>Status</span><span class="flex items-center gap-2 text-sm font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full" data-v-357da0eb><span class="relative flex h-2 w-2" data-v-357da0eb><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75" data-v-357da0eb></span><span class="relative inline-flex rounded-full h-2 w-2 bg-indigo-500" data-v-357da0eb></span></span> Active </span></div></div>',2)),e("div",{class:"relative bg-white p-4 rounded-xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100 select-none",style:me({width:g.value+"px",height:d.value+"px"})},[e("div",{class:"grid w-full h-full",style:me({gridTemplateColumns:`repeat(${St}, 1fr)`,gap:gt+"px"})},[(a(!0),l(J,null,K(m.value,(k,b)=>(a(),l("div",{key:b,class:N(["rounded-md transition-colors duration-300",[k===1?"bg-slate-800 shadow-inner":"bg-slate-50 border border-slate-100/50"]])},[k===0?(a(),l("div",Xl)):j("",!0)],2))),128))],4),e("div",{class:"absolute flex items-center justify-center text-emerald-500 animate-bounce",style:me(y(o.value))},C[0]||(C[0]=[e("svg",{class:"w-6 h-6 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 21v-8a2 2 0 012-2h14a2 2 0 012 2v8M10 9H3V5a2 2 0 012-2h4a2 2 0 012 2v4zm10-4h-4m0 0v4m0-4h4a2 2 0 012 2v4m-6 4v.01"})],-1)]),4),e("div",{class:"absolute z-20 flex items-center justify-center transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)",style:me(y(i.value))},[e("div",Zl,[e("div",{class:N(["absolute bottom-0 left-1/2 -translate-x-1/2 w-3/4 h-2 bg-black/20 blur-sm rounded-full transition-all duration-500",{"scale-75 opacity-10":v.value,"scale-100 opacity-20":!v.value}])},null,2),C[1]||(C[1]=We('<div class="w-full h-full bg-indigo-600 rounded-xl shadow-lg shadow-indigo-500/30 flex items-center justify-center text-white relative animate-float" data-v-357da0eb><svg class="w-3/5 h-3/5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-357da0eb><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-357da0eb></path></svg><div class="absolute -top-1 w-1 h-2 bg-indigo-400 rounded-full" data-v-357da0eb></div><div class="absolute -top-2 w-2 h-2 bg-red-400 rounded-full animate-pulse" data-v-357da0eb></div></div>',1))])],4)],4),C[3]||(C[3]=We('<div class="mt-6 flex gap-4 text-xs font-mono text-slate-400" data-v-357da0eb><div class="flex items-center gap-1" data-v-357da0eb><span class="px-2 py-1 bg-white border rounded shadow-sm" data-v-357da0eb>WASD</span> to move</div><div class="flex items-center gap-1" data-v-357da0eb><span class="px-2 py-1 bg-white border rounded shadow-sm" data-v-357da0eb>SPACE</span> to jump</div></div>',1))]))}},Kl=ke(Jl,[["__scopeId","data-v-357da0eb"]]),er={key:0,class:"game-loading"},tr={__name:"GameContainer",props:{gameData:{type:Object,required:!0},gameType:{type:String,required:!0},userId:{type:String,required:!0},lessonId:{type:String,required:!0},stepIndex:{type:Number,required:!0}},emits:["game-complete","game-exit"],setup(t,{emit:n}){const s=t,v=n,i=u(!1),o=u(!1),g=u(0),d=u(3),m=u(60),y=u(0),M=u(0),C=u(0),k=u(0),b=u(null),_=B(()=>({"basket-catch":Vt,"memory-cards":Bo,"whack-a-mole":$l,"lightning-round":El,"pattern-builder":Ql,"maze-runner":Kl})[s.gameType]||Vt),h=B(()=>s.gameData.timeLimit||60),p=B(()=>s.gameData.lives||3),w=B(()=>M.value===0?0:Math.round(C.value/M.value*100)),A=B(()=>y.value?Math.floor((Date.now()-y.value)/1e3):0),S=()=>{i.value=!0,y.value=Date.now(),d.value=p.value,m.value=h.value,g.value=0,M.value=0,C.value=0,k.value=0,E()},E=()=>{b.value=setInterval(()=>{m.value>0?m.value--:clearInterval(b.value)},1e3)},T=V=>{g.value=Math.max(0,g.value+V)},q=()=>{d.value=Math.max(0,d.value-1)},Y=({isCorrect:V})=>{M.value++,V?C.value++:k.value++},ne=async(V={})=>{b.value&&clearInterval(b.value);try{o.value=!0,await Es({userId:s.userId,lessonId:s.lessonId,stepIndex:s.stepIndex,gameType:s.gameType,score:g.value,accuracy:w.value,timeSpent:A.value,itemsCollected:M.value,correctItems:C.value,wrongItems:k.value,completed:V.completed||!1,metadata:{stars:V.stars||0,livesRemaining:d.value,...V}})}catch(Q){console.error("Error submitting game results:",Q)}finally{o.value=!1}v("game-complete",{score:g.value,stars:V.stars||0,completed:V.completed||!1,accuracy:w.value})};return lt(()=>{b.value&&clearInterval(b.value)}),(V,Q)=>(a(),l("div",{class:N(["game-container",`game-${t.gameType}`])},[(a(),fe(zs(_.value),{"game-data":t.gameData,score:g.value,lives:d.value,"time-remaining":m.value,onScoreChange:T,onLifeLost:q,onGameComplete:ne,onItemCollected:Y,onGameStarted:S},null,40,["game-data","score","lives","time-remaining"])),o.value?(a(),l("div",er,Q[0]||(Q[0]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Saving results...",-1)]))):j("",!0)],2))}},sr=ke(tr,[["__scopeId","data-v-b0986cba"]]),nr={class:"histogram-wrapper"},ar={class:"histogram-header"},or={class:"histogram-title"},lr={key:0,class:"histogram-description"},rr={class:"chart-container"},ir={class:"chart-inner"},cr={class:"chart-grid"},ur={class:"grid-label"},dr={class:"bars-container"},vr=["onClick"],gr={class:"bar-value"},mr={class:"bar-label"},fr={class:"slider-section"},pr={class:"slider-header"},hr={class:"slider-current-value"},br={class:"slider-container"},xr={class:"slider-min"},yr={class:"slider-track-wrapper"},kr=["min","max","step","disabled"],_r={class:"slider-track"},wr={class:"slider-max"},$r=["disabled"],Cr={class:"feedback-icon"},Sr={class:"feedback-text"},Ar={__name:"ModernHistogram",props:{title:String,description:String,data:{type:Object,required:!0},correctValue:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1}},emits:["complete","next"],setup(t,{emit:n}){const s=t,v=n,i=u(Math.floor((s.max+s.min)/2)),o=u(-1),g=u(""),d=u(!1),m=u(!1),y=B(()=>s.data||{labels:[],values:[]}),M=B(()=>Math.max(...y.value.values)),C=B(()=>(i.value-s.min)/(s.max-s.min)*100),k=h=>{i.value=Number(h.target.value)},b=h=>{const p=y.value.labels.indexOf(h);o.value=p,i.value=parseInt(h.replace("k","000"))},_=()=>{if(m.value)return;const h=s.step||100;Math.abs(i.value-s.correctValue)<=h?(d.value=!0,g.value="Perfect! You found the correct value!",m.value=!0,v("complete",!0),setTimeout(()=>{v("next")},2e3)):(d.value=!1,g.value="Not quite. Try again!",setTimeout(()=>{g.value=""},2e3))};return $e(()=>s.correctValue,()=>{i.value=Math.floor((s.max+s.min)/2),o.value=-1,g.value="",d.value=!1,m.value=!1}),(h,p)=>(a(),l("div",nr,[e("div",ar,[e("h3",or,r(t.title||"Data Visualization"),1),t.description?(a(),l("p",lr,r(t.description),1)):j("",!0)]),e("div",rr,[e("div",ir,[e("div",cr,[(a(),l(J,null,K(5,w=>e("div",{key:w,class:"grid-line"},[e("span",ur,r(Math.round(M.value/4*(5-w))),1)])),64))]),e("div",dr,[(a(!0),l(J,null,K(y.value.values,(w,A)=>(a(),l("div",{key:A,class:"bar-wrapper",onClick:S=>b(y.value.labels[A])},[e("div",{class:N(["bar",{"bar-selected":o.value===A}]),style:me({height:`${w/M.value*100}%`})},[e("div",gr,r(w),1)],6),e("div",mr,r(y.value.labels[A]),1)],8,vr))),128))])])]),e("div",fr,[e("div",pr,[p[1]||(p[1]=e("span",{class:"slider-label"},"Select Value",-1)),e("span",hr,r(i.value),1)]),e("div",br,[e("span",xr,r(t.min),1),e("div",yr,[Fe(e("input",{type:"range",min:t.min,max:t.max,step:t.step,"onUpdate:modelValue":p[0]||(p[0]=w=>i.value=w),class:"slider-input",disabled:m.value,onInput:k},null,40,kr),[[Oe,i.value,void 0,{number:!0}]]),e("div",_r,[e("div",{class:"slider-fill",style:me({width:C.value+"%"})},null,4)])]),e("span",wr,r(t.max),1)]),e("button",{onClick:_,disabled:m.value,class:N(["submit-button",{"submit-button-success":m.value}])},r(m.value?"âœ“ Correct!":"Submit Answer"),11,$r),ye(Ie,{name:"fade-slide"},{default:Ae(()=>[g.value?(a(),l("div",{key:0,class:N(["feedback",{"feedback-success":d.value,"feedback-error":!d.value}])},[e("span",Cr,r(d.value?"ðŸŽ¯":"ðŸ’«"),1),e("span",Sr,r(g.value),1)],2)):j("",!0)]),_:1})])]))}},Tr=ke(Ar,[["__scopeId","data-v-7df8c6f2"]]),Mr={class:"map-wrapper"},Ir={class:"map-card"},Lr={class:"map-header"},Dr={class:"map-title"},jr={class:"map-description"},zr={class:"map-content"},Er={class:"map-decoration"},qr={class:"lat-lines"},Rr={class:"lon-lines"},Pr=["onClick"],Br={class:"marker-pin"},Wr={class:"pin-head"},Fr={key:0,class:"pin-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},Nr={key:1,class:"pin-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},Vr={key:2,class:"pin-dot"},Or={class:"marker-label"},Ur={class:"feedback-section"},Hr={class:"feedback-icon-wrapper"},Gr={class:"feedback-emoji"},Qr={class:"feedback-content"},Yr={class:"feedback-title"},Xr={class:"feedback-message"},Zr={key:1,class:"feedback-idle"},Jr={key:0,class:"action-buttons"},Kr=5,ei={__name:"ModernMap",props:{image:String,title:{type:String,default:"Find the Location"},description:{type:String,default:"Select the correct location marker on the map"},markers:{type:Array,required:!0}},emits:["next","complete"],setup(t,{emit:n}){const s=n,v=u(null),i=u(!1),o=u(!1),g=u(0),d=u(null),m=u({show:!1,x:0,y:0}),y=k=>{if(!o.value){if(d.value){const b=d.value.getBoundingClientRect(),_=k.x/100*b.width,h=k.y/100*b.height;m.value={show:!0,x:_,y:h},setTimeout(()=>{m.value.show=!1},600)}g.value++,v.value=k.id,i.value=!0,k.isCorrect?(o.value=!0,s("complete",!0)):(o.value=!1,s("complete",!1),setTimeout(()=>{o.value||(i.value=!1,v.value=null)},2500))}},M=()=>{s("next")},C=()=>{s("complete",!1),s("next")};return(k,b)=>(a(),l("div",Mr,[e("div",Ir,[e("div",Lr,[b[0]||(b[0]=e("div",{class:"header-badge"},[e("span",{class:"badge-icon"},"ðŸ—ºï¸"),e("span",{class:"badge-text"},"Geography Challenge")],-1)),e("h2",Dr,r(t.title),1),e("p",jr,r(t.description),1)]),e("div",{class:"map-container",ref_key:"mapContainer",ref:d},[b[5]||(b[5]=e("div",{class:"map-grid"},null,-1)),e("div",zr,[e("div",Er,[e("div",qr,[(a(),l(J,null,K(8,_=>e("div",{key:"lat-"+_,class:"lat-line",style:me({top:_*12.5+"%"})},null,4)),64))]),e("div",Rr,[(a(),l(J,null,K(12,_=>e("div",{key:"lon-"+_,class:"lon-line",style:me({left:_*8.33+"%"})},null,4)),64))])]),b[4]||(b[4]=We('<div class="region-display" data-v-bbdbab1e><svg viewBox="0 0 800 500" class="region-svg" data-v-bbdbab1e><defs data-v-bbdbab1e><linearGradient id="landGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-bbdbab1e><stop offset="0%" style="stop-color:#10b981;stop-opacity:0.1;" data-v-bbdbab1e></stop><stop offset="100%" style="stop-color:#059669;stop-opacity:0.15;" data-v-bbdbab1e></stop></linearGradient></defs><path d="M 200,100 L 700,100 L 700,400 L 500,450 L 200,400 Z" fill="url(#landGradient)" stroke="#10b981" stroke-width="2" stroke-dasharray="10,5" opacity="0.6" data-v-bbdbab1e></path><text x="450" y="260" font-size="48" fill="#94a3b8" opacity="0.3" text-anchor="middle" font-family="Arial, sans-serif" font-weight="bold" data-v-bbdbab1e> ASIA </text></svg></div>',1)),(a(!0),l(J,null,K(t.markers,_=>(a(),l("div",{key:_.id,class:N(["marker",{"marker-selected":v.value===_.id,"marker-correct":v.value===_.id&&_.isCorrect&&i.value,"marker-incorrect":v.value===_.id&&!_.isCorrect&&i.value,"marker-pulse":v.value===_.id}]),style:me({left:_.x+"%",top:_.y+"%"}),onClick:h=>y(_)},[e("div",Br,[e("div",Wr,[v.value===_.id&&i.value&&_.isCorrect?(a(),l("svg",Fr,b[1]||(b[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):v.value===_.id&&i.value&&!_.isCorrect?(a(),l("svg",Nr,b[2]||(b[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(a(),l("div",Vr))]),b[3]||(b[3]=e("div",{class:"pin-spike"},null,-1))]),e("div",Or,r(_.label),1)],14,Pr))),128)),m.value.show?(a(),l("div",{key:0,class:"click-ripple",style:me({left:m.value.x+"px",top:m.value.y+"px"})},null,4)):j("",!0)]),b[6]||(b[6]=We('<div class="compass" data-v-bbdbab1e><div class="compass-rose" data-v-bbdbab1e><div class="compass-n" data-v-bbdbab1e>N</div><div class="compass-arrows" data-v-bbdbab1e><div class="compass-arrow compass-arrow-n" data-v-bbdbab1e>â–²</div><div class="compass-arrow compass-arrow-e" data-v-bbdbab1e>â–¶</div><div class="compass-arrow compass-arrow-s" data-v-bbdbab1e>â–¼</div><div class="compass-arrow compass-arrow-w" data-v-bbdbab1e>â—€</div></div></div></div><div class="scale-indicator" data-v-bbdbab1e><div class="scale-line" data-v-bbdbab1e></div><span class="scale-text" data-v-bbdbab1e>~ 1000 km</span></div>',2))],512),e("div",Ur,[ye(Ie,{name:"slide-up",mode:"out-in"},{default:Ae(()=>[i.value?(a(),l("div",{key:0,class:N(["feedback",{"feedback-success":o.value,"feedback-error":!o.value}])},[e("div",Hr,[e("span",Gr,r(o.value?"ðŸŽ¯":"ðŸ§­"),1)]),e("div",Qr,[e("h3",Yr,r(o.value?"Perfect! You found it!":"Not quite the right location"),1),e("p",Xr,r(o.value?"Excellent geographic knowledge! +15 XP":"Try selecting another marker on the map."),1)])],2)):(a(),l("div",Zr,b[7]||(b[7]=[e("span",{class:"feedback-idle-icon"},"ðŸ“",-1),e("span",{class:"feedback-idle-text"},"Click on a location marker to make your selection",-1)])))]),_:1}),i.value?(a(),l("div",Jr,[o.value?(a(),l("button",{key:0,onClick:M,class:"action-button action-button-success"},b[8]||(b[8]=[e("svg",{class:"button-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1),xe(" Continue ")]))):g.value>=Kr?(a(),l("button",{key:1,onClick:C,class:"action-button action-button-skip"},b[9]||(b[9]=[e("svg",{class:"button-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),xe(" Skip & Continue ")]))):j("",!0)])):j("",!0)])])]))}},ti=ke(ei,[["__scopeId","data-v-bbdbab1e"]]),si={class:"w-full max-w-6xl mx-auto"},ni={class:"bg-[linear-gradient(135deg,rgb(139,92,246),rgb(219,39,119))] rounded-3xl p-8 mb-8 shadow-2xl"},ai={class:"text-white font-black text-2xl mb-3"},oi={class:"text-white/90 text-base"},li={class:"flex flex-col lg:flex-row gap-8 items-start"},ri={class:"flex-1 order-2 lg:order-1"},ii={class:"bg-linear-to-br from-slate-900 to-slate-800 rounded-3xl p-8 shadow-2xl border-4 border-purple-500/30"},ci={key:0},ui={class:"grid grid-cols-5 gap-3 bg-slate-950/50 p-4 rounded-2xl"},di={key:1,class:"aspect-square bg-white rounded-2xl relative shadow-inner"},vi={class:"w-full h-full",viewBox:"0 0 200 200"},gi=["d"],mi=["cx","cy"],fi={class:"text-base font-bold text-center"},pi={class:"w-full lg:w-80 order-1 lg:order-2 space-y-6"},hi={class:"bg-linear-to-br from-purple-600 to-pink-600 rounded-3xl p-8 shadow-2xl"},bi={class:"flex flex-col items-center gap-3"},xi=["disabled"],yi={class:"flex gap-3"},ki=["disabled"],_i=["disabled"],wi=["disabled"],$i={__name:"ModernBlockCoding",props:{type:String,title:String,description:String,availableBlocks:{type:Array,default:()=>["move_forward","turn_left","turn_right"]},config:Object},emits:["complete","next"],setup(t,{emit:n}){const s=t,v=n;u([]);const i=u(!1),o=u({x:0,y:0}),g=u(0),d=u([]),m=u({x:100,y:100}),y=u(0),M=u(""),C=u(!1);B(()=>{var A;return s.type==="maze"||((A=s.config)==null?void 0:A.type)==="maze"});const k=B(()=>{var A;return((A=s.config)==null?void 0:A.goal)||{x:4,y:4}}),b=B(()=>{var A;return((A=s.config)==null?void 0:A.walls)||[]}),_=A=>{const S=A%5,E=Math.floor(A/5);return o.value.x===S&&o.value.y===E?"bg-[linear-gradient(135deg,rgb(34,211,238),rgb(59,130,246))] shadow-2xl shadow-cyan-400/60 border-2 border-cyan-300/50":k.value.x===S&&k.value.y===E?"bg-[linear-gradient(135deg,rgb(251,191,36),rgb(245,158,11))] shadow-2xl shadow-amber-400/60 border-2 border-amber-300/50 animate-pulse":b.value.some(T=>T.x===S&&T.y===E)?"bg-[linear-gradient(135deg,rgb(88,28,135),rgb(126,34,206))] border-2 border-purple-700/30":"bg-slate-800/40 border border-slate-700/30 hover:bg-slate-700/40 transition-colors"},h=A=>{const S=A%5,E=Math.floor(A/5);return o.value.x===S&&o.value.y===E?"ðŸ¤–":k.value.x===S&&k.value.y===E?"â­":""},p=async A=>{i.value=!0;const E={up:{dx:0,dy:-1},down:{dx:0,dy:1},left:{dx:-1,dy:0},right:{dx:1,dy:0}}[A],T=o.value.x+E.dx,q=o.value.y+E.dy;T>=0&&T<5&&q>=0&&q<5?b.value.some(Y=>Y.x===T&&Y.y===q)?(M.value="ðŸš« Can't move there - wall!",setTimeout(()=>M.value="",1e3)):(o.value={x:T,y:q},o.value.x===k.value.x&&o.value.y===k.value.y&&(M.value="ðŸŽ‰ Goal reached! Perfect!",C.value=!0,setTimeout(()=>{v("complete",!0),v("next")},1500))):(M.value="ðŸš« Can't move outside the maze!",setTimeout(()=>M.value="",1e3)),setTimeout(()=>i.value=!1,300)},w=()=>{var A;o.value=((A=s.config)==null?void 0:A.start)||{x:0,y:0},g.value=0,d.value=[],m.value={x:100,y:100},y.value=0,M.value="",C.value=!1};return w(),Ge(()=>{console.log("ModernBlockCoding mounted with props:",s)}),(A,S)=>{var E;return a(),l("div",si,[e("div",ni,[e("h3",ai,r(t.title||"ðŸŽ® Maze Challenge"),1),e("p",oi,r(t.description||"Use the arrow buttons to navigate the robot to the golden star!"),1)]),e("div",li,[e("div",ri,[e("div",ii,[S[4]||(S[4]=e("h4",{class:"text-purple-300 font-bold text-sm uppercase tracking-wider mb-6 text-center"},"ðŸ—ºï¸ Maze Grid",-1)),t.type==="maze"||((E=t.config)==null?void 0:E.type)==="maze"?(a(),l("div",ci,[e("div",ui,[(a(),l(J,null,K(25,(T,q)=>e("div",{key:q,class:N(["aspect-square rounded-xl flex items-center justify-center text-4xl transition-all duration-300 shadow-lg",_(q)])},r(h(q)),3)),64))])])):(a(),l("div",di,[(a(),l("svg",vi,[(a(!0),l(J,null,K(d.value,(T,q)=>(a(),l("path",{key:q,d:`M ${T.from.x} ${T.from.y} L ${T.to.x} ${T.to.y}`,stroke:"#8b5cf6","stroke-width":"2",fill:"none",class:"animate-draw"},null,8,gi))),128)),m.value?(a(),l("circle",{key:0,cx:m.value.x,cy:m.value.y,r:"4",fill:"#ec4899",class:"animate-pulse"},null,8,mi)):j("",!0)]))])),M.value?(a(),l("div",{key:2,class:N(["mt-6 p-4 rounded-2xl backdrop-blur-md shadow-lg",C.value?"bg-emerald-500/30 border-2 border-emerald-400 text-emerald-100":"bg-rose-500/30 border-2 border-rose-400 text-rose-100"])},[e("p",fi,r(M.value),1)],2)):j("",!0)])]),e("div",pi,[e("div",hi,[S[5]||(S[5]=e("h4",{class:"text-white font-bold text-base uppercase tracking-wide mb-6 text-center"},"ðŸŽ® Controls",-1)),e("div",bi,[e("button",{onClick:S[0]||(S[0]=T=>p("up")),disabled:i.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," â¬† ",8,xi),e("div",yi,[e("button",{onClick:S[1]||(S[1]=T=>p("left")),disabled:i.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," â¬… ",8,ki),e("button",{onClick:S[2]||(S[2]=T=>p("down")),disabled:i.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," â¬‡ ",8,_i),e("button",{onClick:S[3]||(S[3]=T=>p("right")),disabled:i.value,class:"w-20 h-20 bg-white/95 hover:bg-white text-purple-600 font-black rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed text-3xl active:scale-95 shadow-xl"}," âž¡ ",8,wi)])])]),e("button",{onClick:w,class:"w-full py-5 bg-linear-to-r from-amber-500 to-orange-500 text-white font-black text-lg rounded-2xl hover:shadow-2xl hover:scale-105 transition-all duration-200 active:scale-95 shadow-xl"}," ðŸ”„ Reset ")])])])}}},Ci=ke($i,[["__scopeId","data-v-c9536df7"]]),Si={class:"min-h-screen bg-white p-4 md:p-8"},Ai={class:"max-w-7xl mx-auto"},Ti={key:0,class:"grid lg:grid-cols-2 gap-6 md:gap-8 items-start"},Mi={class:"bg-white rounded-2xl border-2 border-purple-200 p-6 md:p-8 shadow-lg"},Ii={class:"space-y-1 mb-6 md:mb-8"},Li={class:"text-slate-900 text-base"},Di={class:"font-semibold"},ji={class:"text-purple-600 font-medium text-base"},zi={class:"flex justify-center items-center py-8 md:py-12"},Ei={class:"relative"},qi={width:"280",height:"280",viewBox:"0 0 280 280",class:"max-w-full h-auto"},Ri={x:"140",y:"268","text-anchor":"middle",class:"fill-green-600 font-bold text-sm"},Pi={class:"space-y-6"},Bi={class:"bg-white rounded-2xl border-2 border-purple-200 p-6 md:p-8 shadow-lg"},Wi={class:"space-y-3 md:space-y-4"},Fi=["onClick"],Ni={class:"font-semibold text-slate-900 mb-1.5"},Vi={class:"font-mono text-purple-600 text-sm"},Oi={class:"pt-6"},Ui=["disabled"],Hi={class:"flex items-start gap-3"},Gi={class:"flex-shrink-0"},Qi={key:0,class:"w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center"},Yi={key:1,class:"w-6 h-6 rounded-full bg-red-500 flex items-center justify-center"},Xi={key:0,class:"bg-white rounded-2xl border-2 border-purple-200 p-6 shadow-lg"},Zi={class:"text-slate-700 text-sm md:text-base leading-relaxed"},Ji={__name:"GeometryExercise",props:{geometryData:{type:Object,required:!0},userAnswer:{type:Object,required:!0}},emits:["update:userAnswer","next-exercise","submit"],setup(t,{emit:n}){const s=t,v=n,i=u(null),o=u(null),g=u(!1),d=u(!1),m=B(()=>{var k;return((k=s.userAnswer)==null?void 0:k.side_b)&&o.value}),y=k=>{i.value=k,g.value=!1},M=k=>{o.value=k,g.value=!1},C=()=>{const k=s.geometryData.correctAnswer.side_b,b=s.geometryData.correctAnswer.formulaId,_=parseFloat(s.userAnswer.side_b),h=o.value;d.value=_===k&&h===b,g.value=!0,v("submit",{isCorrect:d.value,userSide:_,userFormula:h})};return $e(()=>s.geometryData,()=>{i.value=null,o.value=null,g.value=!1,d.value=!1},{deep:!0}),(k,b)=>(a(),l("div",Si,[e("div",Ai,[b[12]||(b[12]=e("div",{class:"text-center mb-8 md:mb-12"},[e("h1",{class:"text-3xl md:text-4xl font-bold text-slate-900 mb-2"},"Geometry Lesson: Square Properties"),e("p",{class:"text-purple-600 text-lg md:text-xl font-medium"}," Find the missing side length using the correct formula ")],-1)),t.geometryData.mode==="calculate"?(a(),l("div",Ti,[e("div",Mi,[b[6]||(b[6]=e("h3",{class:"text-purple-600 font-semibold text-lg mb-4 md:mb-6"},"Given Information",-1)),e("div",Ii,[e("p",Li,[b[3]||(b[3]=xe("Side a = ")),e("span",Di,r(t.geometryData.given.side_a),1),b[4]||(b[4]=xe(" units"))]),e("p",ji,"Angle = "+r(t.geometryData.given.angle)+"Â°",1)]),e("div",zi,[e("div",Ei,[(a(),l("svg",qi,[b[5]||(b[5]=We('<defs><linearGradient id="rainbowGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#a855f7"></stop><stop offset="25%" stop-color="#ec4899"></stop><stop offset="50%" stop-color="#f97316"></stop><stop offset="75%" stop-color="#eab308"></stop><stop offset="100%" stop-color="#22c55e"></stop></linearGradient></defs><rect x="40" y="40" width="200" height="200" fill="white" stroke="url(#rainbowGradient)" stroke-width="4" rx="4"></rect><path d="M 40 220 L 55 220 L 55 240" fill="none" stroke="#eab308" stroke-width="2"></path><text x="62" y="233" class="text-xs fill-yellow-500 font-medium">90Â°</text>',4)),e("text",Ri," side a = "+r(t.geometryData.given.side_a),1),e("g",{onClick:b[0]||(b[0]=_=>y("b")),class:"cursor-pointer transition-all duration-200"},[e("text",{x:"255",y:"140","text-anchor":"start",class:N(["font-bold text-sm",i.value==="b"?"fill-pink-600":"fill-pink-500 hover:fill-pink-600"])}," side b = ? ",2)])]))])])]),e("div",Pi,[e("div",Bi,[b[10]||(b[10]=e("h3",{class:"text-purple-600 font-semibold text-lg mb-6"},"Select the Formula You Used",-1)),e("div",Wi,[(a(!0),l(J,null,K(t.geometryData.formulas,_=>(a(),l("button",{key:_.id,onClick:h=>M(_.id),class:N(["w-full text-left p-4 md:p-5 rounded-xl border-2 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",o.value===_.id?"border-purple-500 bg-purple-50 shadow-md":"border-gray-200 hover:border-purple-300 bg-white hover:shadow-sm"])},[e("p",Ni,r(_.name),1),e("p",Vi,r(_.formula),1)],10,Fi))),128))]),e("div",Oi,[b[7]||(b[7]=e("label",{class:"block text-sm font-medium text-slate-900 mb-2"},"Enter value for side b:",-1)),Fe(e("input",{type:"number","onUpdate:modelValue":b[1]||(b[1]=_=>t.userAnswer.side_b=_),placeholder:"Enter value...",class:"w-full p-3 md:p-4 rounded-lg border-2 border-purple-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all"},null,512),[[Oe,t.userAnswer.side_b]])]),e("button",{onClick:C,disabled:!m.value,class:"w-full py-3.5 md:py-4 rounded-full font-semibold text-white text-base transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 mt-6 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg"}," Check Answer ",8,Ui),ye(Ie,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100"},{default:Ae(()=>[g.value?(a(),l("div",{key:0,class:N(["mt-4 p-4 rounded-xl border-2",d.value?"bg-teal-50 border-teal-400":"bg-red-50 border-red-400"])},[e("div",Hi,[e("div",Gi,[d.value?(a(),l("div",Qi,b[8]||(b[8]=[e("span",{class:"text-white text-sm font-bold"},"âœ“",-1)]))):(a(),l("div",Yi,b[9]||(b[9]=[e("span",{class:"text-white text-sm font-bold"},"âœ•",-1)])))]),e("div",null,[e("h4",{class:N(["font-bold text-base",d.value?"text-teal-900":"text-red-900"])},r(d.value?"Great job!":"Not quite right"),3),e("p",{class:N(["text-sm mt-1",d.value?"text-teal-800":"text-red-800"])},r(d.value?`Side b = ${t.geometryData.given.side_a} units`:"Review the hint and square property, then try again."),3)])])],2)):j("",!0)]),_:1}),ye(Ie,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100"},{default:Ae(()=>[d.value?(a(),l("button",{key:0,onClick:b[2]||(b[2]=_=>v("next-exercise")),class:"w-full py-3.5 md:py-4 rounded-full font-semibold text-white shadow-lg bg-purple-600 hover:bg-purple-700 transition-all transform hover:scale-[1.02] active:scale-[0.98] mt-4"}," Next â†’ ")):j("",!0)]),_:1})]),t.geometryData.hint?(a(),l("div",Xi,[b[11]||(b[11]=e("h3",{class:"text-purple-600 font-semibold text-base mb-2 flex items-center gap-2"},[e("span",{class:"text-xl"},"ðŸ’¡"),xe(" Hint ")],-1)),e("p",Zi,r(t.geometryData.hint),1)])):j("",!0)])])):j("",!0)])]))}},Ki={class:"data-analysis-container"},ec={class:"relative z-10"},tc={class:"da-header"},sc={class:"da-title"},nc={class:"da-chart-section"},ac={class:"da-chart"},oc={class:"da-bar-value"},lc={class:"da-tooltip"},rc={class:"da-bar-label"},ic={class:"da-axis-label"},cc={class:"da-input-section"},uc={class:"da-input-row"},dc=["disabled"],vc={class:"da-input-unit"},gc={class:"da-button-wrapper"},mc=["disabled"],fc={class:"da-feedback-icon"},pc={class:"da-feedback-content"},hc={class:"da-feedback-title"},bc={class:"da-feedback-message"},xc={__name:"DataAnalysisStep",props:{step:{type:Object,default:()=>({prompt:"What is the average rainfall?",numericLabel:"Rainfall (mm)",numericKey:"rainfall",data:[{label:"January",rainfall:45},{label:"February",rainfall:38},{label:"March",rainfall:52}],correctAnswer:45,tolerance:.5})}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u(null),o=u(!1),g=u({show:!1,isCorrect:!1,message:""}),d=B(()=>s.step.numericLabel||"Value"),m=B(()=>s.step.numericKey||"value"),y=B(()=>(s.step.data||[]).map(h=>({label:h.label||"Item",value:h[m.value]||h.value||0}))),M=B(()=>y.value.length===0?100:Math.max(...y.value.map(_=>_.value))),C=_=>!_||!M.value?5:Math.max(10,_/M.value*100),k=_=>{const h=["bg-gradient-to-t from-blue-600 to-blue-400","bg-gradient-to-t from-cyan-600 to-cyan-400","bg-gradient-to-t from-teal-600 to-teal-400","bg-gradient-to-t from-emerald-600 to-emerald-400","bg-gradient-to-t from-green-600 to-green-400","bg-gradient-to-t from-lime-600 to-lime-400"];return h[_%h.length]},b=()=>{if(i.value===null)return;const _=s.step.tolerance||.5,h=s.step.correctAnswer,p=Math.abs(i.value-h)<=_;o.value=!0,g.value={show:!0,isCorrect:p,message:p?`Excellent! The correct answer is ${h.toFixed(2)}. Your calculation is spot on!`:`The correct answer is ${h.toFixed(2)}. You answered ${i.value.toFixed(2)}. Remember: Average = Sum of all values Ã· Number of values`},v("complete",p)};return(_,h)=>(a(),l("div",Ki,[h[7]||(h[7]=e("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"bg-decoration bg-decoration-1"}),e("div",{class:"bg-decoration bg-decoration-2"})],-1)),e("div",ec,[e("div",tc,[h[2]||(h[2]=e("div",{class:"da-badge"},[e("span",{class:"da-badge-icon"},"ðŸ“Š"),e("span",{class:"da-badge-text"},"Data Analysis")],-1)),e("h2",sc,r(t.step.prompt||"Analyze the Data"),1)]),e("div",nc,[e("div",ac,[(a(!0),l(J,null,K(y.value,(p,w)=>(a(),l("div",{key:w,class:"da-bar-wrapper"},[e("span",oc,r(p.value),1),e("div",{class:N(["da-bar bar-animate",k(w)]),style:me({height:C(p.value)+"%",animationDelay:w*.1+"s"})},[e("div",lc,r(p.label)+": "+r(p.value)+" "+r(d.value),1)],6),e("span",rc,r(p.label),1)]))),128))]),e("div",ic,[e("span",null,r(d.value),1)])]),e("div",cc,[h[3]||(h[3]=e("label",{class:"da-input-label"}," Enter your answer: ",-1)),e("div",uc,[Fe(e("input",{type:"number","onUpdate:modelValue":h[0]||(h[0]=p=>i.value=p),disabled:o.value,step:.01,class:"da-input",placeholder:"0.00",onKeyup:Qt(b,["enter"])},null,40,dc),[[Oe,i.value,void 0,{number:!0}]]),e("span",vc,r(d.value),1)]),h[4]||(h[4]=e("p",{class:"da-hint"}," ðŸ’¡ Tip: Calculate the average of all values (sum Ã· count) ",-1))]),e("div",gc,[o.value?(a(),l("button",{key:1,onClick:h[1]||(h[1]=p=>_.$emit("complete",!0)),class:"da-btn da-btn-success"},h[6]||(h[6]=[xe(" Continue "),e("svg",{class:"da-btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)]))):(a(),l("button",{key:0,onClick:b,disabled:i.value===null||i.value==="",class:"da-btn da-btn-primary"},h[5]||(h[5]=[e("svg",{class:"da-btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),xe(" Calculate ")]),8,mc))]),ye(Ie,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0 translate-y-4 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100"},{default:Ae(()=>[g.value.show?(a(),l("div",{key:0,class:N(["da-feedback",g.value.isCorrect?"da-feedback-success":"da-feedback-error"])},[e("div",fc,r(g.value.isCorrect?"ðŸŽ¯":"ðŸ“"),1),e("div",pc,[e("h4",hc,r(g.value.isCorrect?"Correct!":"Not quite"),1),e("p",bc,r(g.value.message),1)])],2)):j("",!0)]),_:1})])]))}},yc=ke(xc,[["__scopeId","data-v-fd05e49a"]]),kc={class:"interactive-step step-animate-in"},_c={class:"text-lg text-gray-600 mb-6 leading-relaxed"},wc={class:"flex flex-col sm:flex-row gap-8 justify-center items-center sm:items-start"},$c={class:"flex flex-col items-center gap-3"},Cc={class:"text-sm font-bold text-gray-500 uppercase tracking-wide"},Sc={class:"flex flex-col items-center gap-3"},Ac={class:"text-sm font-bold text-gray-500 uppercase tracking-wide"},Tc=["onClick","disabled","aria-label"],Mc={class:"mt-8"},Ic=["disabled"],Lc={__name:"FractionVisualStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u([]),o=u("idle"),g=u("");$e(()=>s.step,()=>{i.value=Array(s.step.userTotalBlocks).fill(!1),o.value="idle",g.value=""},{immediate:!0});const d=B(()=>i.value.filter(Boolean).length),m=b=>({gridTemplateColumns:`repeat(${b<=4?2:b<=9?3:4}, 1fr)`}),y=B(()=>o.value==="correct"?"âœ… Correct! (Equivalent)":o.value==="incorrect"?"âŒ Try again":"Check Answer"),M=B(()=>o.value==="correct"?"bg-green-100 text-green-700 ring-2 ring-green-500 ring-offset-2 cursor-default":o.value==="incorrect"?"bg-red-100 text-red-700 ring-2 ring-red-500 ring-offset-2":"bg-gray-100 text-gray-900 hover:bg-gray-200"),C=b=>{o.value!=="correct"&&(i.value[b]=!i.value[b],o.value==="incorrect"&&(o.value="idle",g.value=""))},k=()=>{const b=s.step.targetNumerator/s.step.targetDenominator,_=d.value/s.step.userTotalBlocks;Math.abs(b-_)<1e-4?(o.value="correct",g.value=`ðŸŽ‰ Perfect! ${d.value}/${s.step.userTotalBlocks} = ${s.step.targetNumerator}/${s.step.targetDenominator}`,v("complete",!0)):(o.value="incorrect",g.value="Not quite equivalent. Try shading a different number of cells.",v("complete",!1),setTimeout(()=>{o.value="idle",g.value=""},2e3))};return(b,_)=>(a(),l("div",kc,[e("p",_c,r(t.step.prompt),1),e("div",wc,[e("div",$c,[e("span",Cc," Target: "+r(t.step.targetNumerator)+"/"+r(t.step.targetDenominator),1),e("div",{class:"grid gap-2 bg-gray-100 p-3 rounded-xl border border-gray-200 shadow-inner",style:me(m(t.step.targetDenominator))},[(a(!0),l(J,null,K(t.step.targetDenominator,(h,p)=>(a(),l("div",{key:"target-"+p,class:N(["w-12 h-12 rounded-lg border-2 transition-all duration-300",p<t.step.targetNumerator?"bg-blue-500 border-blue-600":"bg-white border-gray-200"])},null,2))),128))],4)]),_[0]||(_[0]=e("div",{class:"text-4xl font-light text-gray-300 self-center hidden sm:block"},"=",-1)),e("div",Sc,[e("span",Ac," Your Answer: "+r(d.value)+"/"+r(t.step.userTotalBlocks),1),e("div",{class:"grid gap-2 bg-gray-100 p-3 rounded-xl border border-gray-200 shadow-inner cursor-pointer",style:me(m(t.step.userTotalBlocks))},[(a(!0),l(J,null,K(i.value,(h,p)=>(a(),l("button",{key:"user-"+p,onClick:w=>C(p),disabled:o.value==="correct",class:N(["w-12 h-12 rounded-lg border-2 transition-all duration-200 transform focus:outline-none",{"bg-blue-500 border-blue-600 shadow-md":h,"bg-white border-gray-200 hover:border-blue-300 hover:scale-105 active:scale-95":!h&&o.value!=="correct"}]),"aria-label":`Toggle cell ${p+1}`},null,10,Tc))),128))],4)])]),e("div",Mc,[e("button",{onClick:k,disabled:o.value==="correct",class:N(["w-full py-4 rounded-xl font-bold text-lg transition-all shadow-sm",M.value])},r(y.value),11,Ic)]),g.value?(a(),l("div",{key:0,class:N(["step-feedback mt-4",o.value])},r(g.value),3)):j("",!0)]))}},Dc=ke(Lc,[["__scopeId","data-v-f6e3214c"]]),jc={class:"interactive-step step-animate-in"},zc={class:"text-lg text-gray-600 mb-6 leading-relaxed"},Ec={class:"bg-gray-100 rounded-xl overflow-hidden shadow-inner border border-gray-200 select-none"},qc={viewBox:"0 0 400 300",class:"w-full h-auto"},Rc=["x1","y1","x2","y2"],Pc=["points"],Bc=["cx","cy"],Wc=["d"],Fc=["cx","cy"],Nc={class:"flex items-center gap-4 bg-white p-4 rounded-lg border border-gray-200 shadow-sm mt-6"},Vc={key:0,class:"flex flex-col gap-4 mt-4"},Oc={class:"flex gap-3 flex-wrap"},Uc=["onClick","disabled"],Hc=["disabled"],Gc={__name:"GeometryPolyStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u(0),o=u(null),g=u("idle"),d=[{x:200,y:50},{x:350,y:250},{x:50,y:250}],m={x:200,y:183},y=B(()=>d.map(h=>({x:h.x+(m.x-h.x)*i.value,y:h.y+(m.y-h.y)*i.value}))),M=B(()=>y.value.map(h=>`${h.x},${h.y}`).join(" ")),C=h=>`M ${h.x+15} ${h.y} A 15 15 0 0 1 ${h.x} ${h.y-15}`,k=()=>{i.value<.8&&(g.value="idle",o.value=null)},b=h=>{g.value!=="correct"&&(o.value=h,g.value="idle")},_=()=>{if(!o.value)return;const h=o.value===s.step.correctShape;g.value=h?"correct":"incorrect",v("complete",h)};return(h,p)=>(a(),l("div",jc,[e("p",zc,r(t.step.prompt),1),e("div",Ec,[(a(),l("svg",qc,[(a(!0),l(J,null,K(y.value,(w,A)=>(a(),l("line",{key:`ray-${A}`,x1:m.x,y1:m.y,x2:w.x,y2:w.y,stroke:"#e5e7eb","stroke-width":"2","stroke-dasharray":"4"},null,8,Rc))),128)),e("polygon",{points:M.value,fill:"rgba(59, 130, 246, 0.1)",stroke:"#3b82f6","stroke-width":"3"},null,8,Pc),(a(!0),l(J,null,K(y.value,(w,A)=>(a(),l("g",{key:`ext-${A}`},[e("circle",{cx:w.x,cy:w.y,r:"4",fill:"#3b82f6"},null,8,Bc),i.value>.8?(a(),l("path",{key:0,d:C(w),fill:"none",stroke:"#f59e0b","stroke-width":"3",opacity:"0.8"},null,8,Wc)):j("",!0)]))),128)),i.value===1?(a(),l("circle",{key:0,cx:m.x,cy:m.y,r:"15",fill:"none",stroke:"#f59e0b","stroke-width":"4"},null,8,Fc)):j("",!0)]))]),e("div",Nc,[p[1]||(p[1]=e("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Large",-1)),Fe(e("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":p[0]||(p[0]=w=>i.value=w),onInput:k,class:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"},null,544),[[Oe,i.value,void 0,{number:!0}]]),p[2]||(p[2]=e("span",{class:"text-xs font-bold text-gray-500 uppercase"},"Point",-1))]),ye(Ie,{"enter-active-class":"transition-all duration-500","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-64 opacity-100","leave-active-class":"transition-all duration-500","leave-from-class":"max-h-64 opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:Ae(()=>[i.value>.5?(a(),l("div",Vc,[p[3]||(p[3]=e("p",{class:"font-semibold text-gray-800"}," What shape do the exterior angles form? ",-1)),e("div",Oc,[(a(!0),l(J,null,K(t.step.shapes,w=>(a(),l("button",{key:w,onClick:A=>b(w),disabled:g.value==="correct",class:N(["flex-1 min-w-[80px] py-3 px-2 rounded-lg border font-medium transition-all",{"border-blue-500 bg-blue-50 text-blue-700 shadow-sm":o.value===w,"border-gray-200 bg-white text-gray-600 hover:bg-gray-50 hover:border-gray-300":o.value!==w}])},r(w),11,Uc))),128))]),o.value?(a(),l("button",{key:0,onClick:_,disabled:g.value==="correct",class:N(["w-full py-3 rounded-lg font-bold text-white transition-all shadow-md",{"bg-green-500 cursor-default":g.value==="correct","bg-red-500 hover:bg-red-600":g.value==="incorrect","bg-zinc-900 hover:bg-zinc-800":g.value==="idle"}])},r(g.value==="correct"?"Correct!":g.value==="incorrect"?"Incorrect, look closer!":"Confirm"),11,Hc)):j("",!0)])):j("",!0)]),_:1})]))}},Qc={class:"interactive-step step-animate-in"},Yc={class:"text-lg text-gray-600 mb-6 leading-relaxed"},Xc={class:"grid grid-cols-1 sm:grid-cols-3 gap-8 items-end justify-items-center mb-8"},Zc={class:"flex flex-col gap-3 w-full max-w-[150px]"},Jc=["title"],Kc={class:"flex justify-center"},eu={class:"chem-tube"},tu={class:"flex flex-col gap-1"},su=["max","disabled"],nu={class:"flex flex-col items-center gap-4 w-full order-last sm:order-none"},au={class:"relative"},ou={class:"chem-beaker"},lu={key:0,class:"chem-bubbles"},ru={key:0,class:"absolute -top-6 -right-8 text-6xl animate-bounce z-10"},iu=["disabled"],cu={class:"flex flex-col gap-3 w-full max-w-[150px]"},uu=["title"],du={class:"flex justify-center"},vu={class:"chem-tube"},gu={class:"flex flex-col gap-1"},mu=["max","disabled"],fu={class:"bg-gray-50 rounded-xl p-4 text-sm flex flex-col sm:flex-row justify-between gap-2 border border-gray-100"},pu={class:"text-gray-400"},hu={__name:"ChemMixingStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u(0),o=u(0),g=u("idle"),d=u(""),m=B(()=>{var h;return((h=s.step.substances)==null?void 0:h[0])||{}}),y=B(()=>{var h;return((h=s.step.substances)==null?void 0:h[1])||{}}),M=(h,p)=>!p||h<=0?0:Math.min(h/p,1)*90,C=B(()=>g.value==="success"?s.step.successColor:g.value==="fail"?s.step.failColor:"#e5e7eb"),k=B(()=>g.value==="mixing"?"Mixing...":g.value==="success"?"Reaction Complete":"Start Reaction"),b=()=>{g.value!=="mixing"&&(g.value="idle",d.value="")},_=()=>{g.value!=="mixing"&&(g.value="mixing",d.value="Mixing... ðŸ§ª",setTimeout(()=>{const h=s.step.tolerance||5,p=Math.abs((i.value||0)-m.value.targetVolume)<=h,w=Math.abs((o.value||0)-y.value.targetVolume)<=h;p&&w?(g.value="success",d.value="âœ… Perfect! The solution is stable and balanced.",v("complete",!0)):(g.value="fail",d.value="ðŸ’¥ The proportions were off! The reaction became unstable.",v("complete",!1))},1500))};return(h,p)=>(a(),l("div",Qc,[e("p",Yc,r(t.step.prompt),1),e("div",Xc,[e("div",Zc,[e("h3",{class:"text-sm font-bold text-gray-500 text-center truncate",title:m.value.name},r(m.value.name),9,Jc),e("div",Kc,[e("div",eu,[e("div",{class:"chem-tube-fill",style:me({height:`${M(i.value,m.value.maxVolume)}%`,backgroundColor:m.value.color})},null,4),p[2]||(p[2]=e("div",{class:"chem-tube-graduations"},null,-1))])]),e("div",tu,[p[3]||(p[3]=e("label",{class:"text-xs font-semibold text-gray-400"},"Volume (ml)",-1)),Fe(e("input",{type:"number","onUpdate:modelValue":p[0]||(p[0]=w=>i.value=w),max:m.value.maxVolume,min:0,disabled:g.value==="mixing",class:"p-2 border border-gray-200 rounded-lg text-center font-mono font-bold focus:ring-2 focus:ring-purple-400 outline-none bg-white text-gray-900",onInput:b},null,40,su),[[Oe,i.value,void 0,{number:!0}]])])]),e("div",nu,[e("div",au,[e("div",ou,[e("div",{class:N(["chem-beaker-fill",{"animate-pulse":g.value==="mixing"}]),style:me({height:g.value==="idle"?"0%":"75%",backgroundColor:C.value})},null,6),g.value==="mixing"?(a(),l("div",lu,p[4]||(p[4]=[e("div",{class:"chem-bubble"},null,-1),e("div",{class:"chem-bubble",style:{width:"12px",height:"12px"}},null,-1),e("div",{class:"chem-bubble"},null,-1)]))):j("",!0)]),ye(Ie,{name:"bounce"},{default:Ae(()=>[g.value==="fail"?(a(),l("div",ru," ðŸ’¥ ")):j("",!0)]),_:1})]),e("button",{onClick:_,disabled:g.value==="mixing"||g.value==="success",class:N(["step-btn-primary",{"opacity-50 cursor-wait":g.value==="mixing","step-btn-success":g.value==="success"}])},r(k.value),11,iu)]),e("div",cu,[e("h3",{class:"text-sm font-bold text-gray-500 text-center truncate",title:y.value.name},r(y.value.name),9,uu),e("div",du,[e("div",vu,[e("div",{class:"chem-tube-fill",style:me({height:`${M(o.value,y.value.maxVolume)}%`,backgroundColor:y.value.color})},null,4),p[5]||(p[5]=e("div",{class:"chem-tube-graduations"},null,-1))])]),e("div",gu,[p[6]||(p[6]=e("label",{class:"text-xs font-semibold text-gray-400"},"Volume (ml)",-1)),Fe(e("input",{type:"number","onUpdate:modelValue":p[1]||(p[1]=w=>o.value=w),max:y.value.maxVolume,min:0,disabled:g.value==="mixing",class:"p-2 border border-gray-200 rounded-lg text-center font-mono font-bold focus:ring-2 focus:ring-purple-400 outline-none bg-white text-gray-900",onInput:b},null,40,mu),[[Oe,o.value,void 0,{number:!0}]])])])]),e("div",fu,[e("div",null,[p[7]||(p[7]=e("span",{class:"font-semibold"},"Target:",-1)),xe(" "+r(m.value.targetVolume)+"ml + "+r(y.value.targetVolume)+"ml ",1),e("span",pu,"(Â±"+r(t.step.tolerance)+"ml)",1)]),e("div",null,[p[8]||(p[8]=e("span",{class:"font-semibold"},"Current:",-1)),xe(" "+r(i.value||0)+"ml + "+r(o.value||0)+"ml ",1)])]),e("div",{class:N(["step-feedback mt-4",g.value==="success"?"success":g.value==="fail"?"error":""])},r(d.value),3)]))}},bu=ke(hu,[["__scopeId","data-v-f4b4fac2"]]),xu={class:"interactive-step step-animate-in"},yu={class:"text-lg text-gray-600 mb-6 leading-relaxed"},ku={class:"grid grid-cols-2 gap-4 sm:gap-8"},_u={class:"bg-gray-50 p-4 rounded-xl border border-gray-100"},wu={class:"flex flex-col gap-2"},$u=["onClick"],Cu={class:"bg-gray-50 p-4 rounded-xl border border-gray-100"},Su={class:"flex flex-col gap-2"},Au=["onClick"],Tu={class:"h-8 flex items-center justify-center font-bold text-lg transition-colors duration-300 mt-6"},Mu={key:0,class:"bg-green-100 text-green-800 p-4 rounded-xl text-center font-bold mt-4"},Iu={__name:"ChemMatchingStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u(null),o=u(null),g=u([]),d=u({text:"",type:null}),m=B(()=>[...s.step.pairs].sort(()=>Math.random()-.5)),y=B(()=>g.value.length===s.step.pairs.length);$e(y,b=>{b&&v("complete",!0)});const M=(b,_)=>{g.value.includes(_)||b==="name"&&i.value===_||b==="formula"&&o.value===_||(d.value.type==="wrong"&&(d.value={text:"",type:null}),b==="name"?(i.value=_,o.value!==null&&C(_,o.value)):(o.value=_,i.value!==null&&C(i.value,_)))},C=(b,_)=>{b===_?(g.value=[...g.value,b],d.value={text:"âœ… Correct match!",type:"correct"},i.value=null,o.value=null):(d.value={text:"âŒ Not a correct pair. Try again.",type:"wrong"},setTimeout(()=>{i.value=null,o.value=null,d.value.type==="wrong"&&(d.value={text:"",type:null})},1e3))},k=(b,_)=>{const h=g.value.includes(b),p=_==="name"?i.value===b:o.value===b,w=d.value.type==="wrong"&&p;return h?"border-green-500 bg-green-50 text-green-700 cursor-default shadow-none":w?"border-red-500 bg-red-50 text-red-700 animate-pulse":p?"border-purple-500 bg-purple-50 text-purple-700 shadow-sm ring-1 ring-purple-200":"border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50"};return(b,_)=>(a(),l("div",xu,[e("p",yu,r(t.step.prompt),1),e("div",ku,[e("div",_u,[_[0]||(_[0]=e("h3",{class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3"},"Names",-1)),e("div",wu,[(a(!0),l(J,null,K(t.step.pairs,h=>(a(),l("button",{key:`name-${h.id}`,onClick:p=>M("name",h.id),class:N(["w-full text-left p-3 sm:p-4 rounded-xl border-2 transition-all duration-200 font-medium text-sm sm:text-base",k(h.id,"name")])},r(h.name),11,$u))),128))])]),e("div",Cu,[_[1]||(_[1]=e("h3",{class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3"},"Formulas",-1)),e("div",Su,[(a(!0),l(J,null,K(m.value,h=>(a(),l("button",{key:`formula-${h.id}`,onClick:p=>M("formula",h.id),class:N(["w-full text-left p-3 sm:p-4 rounded-xl border-2 transition-all duration-200 font-medium font-mono text-sm sm:text-base",k(h.id,"formula")])},r(h.formula),11,Au))),128))])])]),e("div",Tu,[e("span",{class:N(d.value.type==="correct"?"text-green-600":"text-red-500")},r(d.value.text),3)]),y.value?(a(),l("div",Mu," ðŸŽ‰ Great job! You matched all correctly. ")):j("",!0)]))}},Lu={class:"interactive-step step-animate-in"},Du={class:"text-lg text-gray-600 mb-6 leading-relaxed"},ju={class:"bg-gray-50 p-6 rounded-xl border border-gray-200 flex flex-wrap gap-2 items-center leading-loose mb-6"},zu=["onClick"],Eu={key:0,class:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm mb-6 animate-fade-in"},qu={class:"text-sm font-semibold text-gray-500 mb-3"},Ru={class:"text-gray-900 font-bold"},Pu={class:"flex flex-wrap gap-2 mb-3"},Bu=["onClick"],Wu={class:"text-xs text-gray-500 italic flex items-center gap-2"},Fu=["disabled"],Nu={__name:"EnglishSentenceFixStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u([]),o=u(null),g=u(""),d=u(!1);$e(()=>s.step,()=>{var h;(h=s.step.tokens)!=null&&h.length?i.value=[...s.step.tokens]:i.value=s.step.originalSentence.split(" "),g.value="",d.value=!1,o.value=null},{immediate:!0});const m=B(()=>new Set(s.step.errors.map(h=>h.index))),y=B(()=>o.value===null?null:s.step.errors.find(h=>h.index===o.value)),M=B(()=>o.value===null?"":s.step.tokens[o.value]),C=h=>{if(!m.value.has(h))return"border-transparent bg-white cursor-default text-gray-800";const w=h===o.value,A=s.step.errors.find(T=>T.index===h),S=A&&i.value[h]===A.correct;let E="cursor-pointer transition-all duration-200 border ";return w&&(E+="ring-2 ring-purple-500 shadow-sm "),S?E+="bg-green-100 text-green-800 border-green-200":E+="bg-orange-100 text-orange-800 border-orange-200",E},k=h=>{if(!m.value.has(h)){o.value=null;return}o.value=h,g.value=""},b=h=>{o.value!==null&&(i.value[o.value]=h)},_=()=>{s.step.errors.every(p=>i.value[p.index]===p.correct)?(g.value="âœ… Great! You fixed all the mistakes.",d.value=!0,v("complete",!0)):(g.value="âŒ There are still some mistakes. Tap the highlighted words.",d.value=!1,v("complete",!1))};return(h,p)=>(a(),l("div",Lu,[e("p",Du,r(t.step.prompt),1),e("div",ju,[(a(!0),l(J,null,K(i.value,(w,A)=>(a(),l("button",{key:A,onClick:S=>k(A),class:N(["sentence-token",C(A)])},r(w),11,zu))),128))]),ye(Ie,{name:"slide-fade"},{default:Ae(()=>[y.value?(a(),l("div",Eu,[e("p",qu,[p[0]||(p[0]=xe(" Choose the correct form for: ")),e("span",Ru,'"'+r(M.value)+'"',1)]),e("div",Pu,[(a(!0),l(J,null,K(y.value.options,w=>(a(),l("button",{key:w,onClick:A=>b(w),class:N(["px-4 py-2 rounded-lg border font-medium transition-colors",{"bg-purple-100 text-purple-700 border-purple-300":i.value[o.value]===w,"bg-white text-gray-700 border-gray-200 hover:bg-gray-50":i.value[o.value]!==w}])},r(w),11,Bu))),128))]),e("p",Wu,[p[1]||(p[1]=e("span",{class:"text-lg"},"ðŸ’¡",-1)),xe(" "+r(y.value.explanation),1)])])):j("",!0)]),_:1}),e("div",{class:N(["step-feedback mb-4",d.value?"success":"error"])},r(g.value),3),e("button",{onClick:_,disabled:d.value,class:N(["px-6 py-3 rounded-full font-bold text-white shadow-md transition-transform active:scale-95",{"bg-green-500 cursor-default":d.value,"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":!d.value}])},r(d.value?"Correct!":"Check Sentence"),11,Fu)]))}},Vu=ke(Nu,[["__scopeId","data-v-46ae28c6"]]),Ou={class:"interactive-step step-animate-in"},Uu={class:"text-lg text-gray-600 mb-6 leading-relaxed"},Hu=["draggable","onDragstart","onDrop"],Gu={key:0,class:"text-gray-400 italic"},Qu={class:"bg-white p-4 rounded-lg border border-gray-100 shadow-sm mb-6"},Yu={class:"text-lg text-gray-800 font-serif"},Xu=["disabled"],Zu={__name:"EnglishSentenceOrderStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u([]),o=u(null),g=u(""),d=u(!1),m=u(!1);$e(()=>s.step,()=>{var k;(k=s.step.scrambledOptions)!=null&&k.length?i.value=[...s.step.scrambledOptions]:i.value=[...s.step.correctOrder].sort(()=>Math.random()-.5),g.value="",d.value=!1},{immediate:!0});const y=k=>{o.value=k,g.value=""},M=k=>{if(o.value===null||o.value===k)return;const b=[...i.value],[_]=b.splice(o.value,1);b.splice(k,0,_),i.value=b,o.value=null,d.value=!1},C=()=>{i.value.join(" ")===s.step.correctOrder.join(" ")?(g.value="âœ… Perfect! The sentence is in the correct order.",d.value=!0,v("complete",!0)):(g.value="âŒ Not quite. Try rearranging the words again.",d.value=!1,v("complete",!1))};return(k,b)=>(a(),l("div",Ou,[e("p",Uu,r(t.step.prompt),1),e("div",{class:N(["bg-gray-50 p-6 rounded-xl border border-gray-200 min-h-[100px] flex flex-wrap gap-3 items-center",{"bg-blue-50 border-blue-200":m.value}]),onDragover:b[1]||(b[1]=De(_=>m.value=!0,["prevent"])),onDragleave:b[2]||(b[2]=_=>m.value=!1),onDrop:b[3]||(b[3]=_=>m.value=!1)},[(a(!0),l(J,null,K(i.value,(_,h)=>(a(),l("div",{key:`${h}-${_}`,draggable:!d.value,onDragstart:p=>y(h),onDragover:b[0]||(b[0]=De(()=>{},["prevent"])),onDrop:p=>M(h),class:N(["px-4 py-2 rounded-full font-medium shadow-sm transition-all duration-200 select-none",{"bg-green-100 text-green-800 border border-green-200 cursor-default":d.value,"bg-white text-gray-800 border border-gray-200 cursor-grab active:cursor-grabbing hover:shadow-md hover:border-blue-300 hover:text-blue-600 active:scale-95":!d.value}])},r(_),43,Hu))),128)),i.value.length===0?(a(),l("span",Gu," Loading words... ")):j("",!0)],34),b[5]||(b[5]=e("p",{class:"text-sm text-gray-500 italic flex items-center gap-2 mb-6"},[e("span",{class:"text-lg"},"ðŸ’¡"),xe(" Hint: Drag words to reorder them. ")],-1)),e("div",Qu,[b[4]||(b[4]=e("span",{class:"text-gray-500 text-sm font-semibold uppercase tracking-wider block mb-1"}," Preview ",-1)),e("p",Yu,r(i.value.join(" ")),1)]),e("div",{class:N(["step-feedback mb-4",d.value?"success":"error"])},r(g.value),3),e("button",{onClick:C,disabled:d.value,class:N(["px-6 py-3 rounded-full font-bold text-white shadow-md transition-transform active:scale-95",{"bg-green-500 cursor-default":d.value,"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":!d.value}])},r(d.value?"âœ“ Correct!":"Check Sentence"),11,Xu)]))}},Ju={class:"interactive-step step-animate-in"},Ku={class:"text-lg text-gray-600 mb-8 leading-relaxed"},ed={class:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3"},td={class:"flex flex-wrap gap-2"},sd=["draggable","onDragstart","onClick"],nd={key:0,class:"text-gray-400 italic text-sm self-center"},ad={class:"flex flex-col items-center mt-8"},od={class:"relative w-full max-w-sm"},ld={class:"text-sm font-bold text-indigo-400 uppercase tracking-wider mb-4"},rd={class:"flex flex-wrap gap-2 justify-center w-full"},id={key:0,class:"text-indigo-300 text-sm italic py-4 border-2 border-dashed border-indigo-200 rounded-lg w-full text-center pointer-events-none"},cd=["draggable","onDragstart","onClick"],ud={class:"flex justify-start mt-4"},dd=["disabled"],vd={__name:"LanguageNounBagStep",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u([]),o=u([]),g=u(""),d=u("idle"),m=u(null),y=B(()=>s.step.targetPos||"noun"),M=B(()=>s.step.availableLabel||"Available Words"),C=B(()=>s.step.bagLabel?s.step.bagLabel:{noun:"Noun Bag",verb:"Verb Collection",adj:"Adjective Box",adv:"Adverb Container"}[y.value]||"Word Bag"),k=B(()=>s.step.emptyAvailableMessage||"All words are in the bag."),b=B(()=>s.step.emptyBagMessage||"Drag words here"),_=B(()=>s.step.checkButtonLabel||"Check Selection"),h=B(()=>s.step.words.filter(T=>T.pos===y.value));$e(()=>s.step,()=>{i.value=[...s.step.words],o.value=[],g.value="",d.value="idle",m.value=null},{immediate:!0});const p=T=>{if(d.value==="correct")return;const q=[...i.value],[Y]=q.splice(T,1);i.value=q,o.value=[...o.value,Y],g.value="",d.value="idle"},w=T=>{if(d.value==="correct")return;const q=[...o.value],[Y]=q.splice(T,1);o.value=q,i.value=[...i.value,Y],g.value="",d.value="idle"},A=()=>{const T=o.value.filter(Q=>Q.pos===y.value),q=o.value.filter(Q=>Q.pos!==y.value),Y=h.value.every(Q=>T.some(te=>te.text===Q.text)),ne=q.length===0;Y&&ne?(g.value=s.step.successMessage||`âœ… Perfect! All ${y.value}s are in the bag.`,d.value="correct",v("complete",!0)):q.length>0?(g.value=s.step.extraWordsMessage||`âŒ You included non-${y.value}s in the bag. Remove them.`,d.value="incorrect",v("complete",!1)):(g.value=s.step.missingWordsMessage||`âŒ You haven't added all ${y.value}s yet.`,d.value="incorrect",v("complete",!1))},S=(T,q,Y)=>{if(d.value==="correct"){T.preventDefault();return}m.value={source:q,index:Y},T.dataTransfer.effectAllowed="move"},E=T=>{!m.value||d.value==="correct"||(m.value.source==="available"&&T==="bag"?p(m.value.index):m.value.source==="bag"&&T==="available"&&w(m.value.index),m.value=null)};return(T,q)=>{var Y,ne,V,Q;return a(),l("div",Ju,[e("p",Ku,r(t.step.prompt),1),e("div",{class:N(["bg-gray-50 p-4 rounded-xl border-2 transition-all duration-200 min-h-[120px]",{"border-blue-300 bg-blue-50 ring-2 ring-blue-100":((Y=m.value)==null?void 0:Y.source)==="bag","border-gray-200":((ne=m.value)==null?void 0:ne.source)!=="bag"}]),onDragover:q[0]||(q[0]=De(()=>{},["prevent"])),onDrop:q[1]||(q[1]=te=>E("available"))},[e("h3",ed,r(M.value),1),e("div",td,[(a(!0),l(J,null,K(i.value,(te,ee)=>(a(),l("div",{key:`${ee}-${te.text}`,draggable:d.value!=="correct",onDragstart:ie=>S(ie,"available",ee),onClick:ie=>p(ee),class:N(["px-4 py-2 rounded-full border border-gray-300 bg-white text-gray-700 font-medium transition-all active:scale-95 select-none cursor-grab active:cursor-grabbing",{"hover:bg-gray-100 hover:border-gray-400 hover:shadow-sm":d.value!=="correct","opacity-50 cursor-not-allowed":d.value==="correct"}])},r(te.text),43,sd))),128)),i.value.length===0?(a(),l("span",nd,r(k.value),1)):j("",!0)])],34),e("div",ad,[e("div",od,[q[5]||(q[5]=e("div",{class:"absolute -top-4 left-1/2 transform -translate-x-1/2 w-16 h-8 border-4 border-gray-400 rounded-t-xl z-0"},null,-1)),e("div",{class:N(["relative z-10 bg-indigo-50 border-4 rounded-2xl p-6 min-h-[160px] shadow-lg flex flex-col items-center transition-all duration-200",{"border-indigo-400 bg-indigo-100 ring-4 ring-indigo-200 scale-[1.02]":((V=m.value)==null?void 0:V.source)==="available","border-indigo-200":((Q=m.value)==null?void 0:Q.source)!=="available"}]),onDragover:q[2]||(q[2]=De(()=>{},["prevent"])),onDrop:q[3]||(q[3]=te=>E("bag"))},[e("h3",ld,r(C.value),1),e("div",rd,[o.value.length===0?(a(),l("div",id,r(b.value),1)):j("",!0),(a(!0),l(J,null,K(o.value,(te,ee)=>(a(),l("div",{key:`bag-${ee}-${te.text}`,draggable:d.value!=="correct",onDragstart:ie=>S(ie,"bag",ee),onClick:ie=>w(ee),class:N(["px-4 py-2 rounded-full border border-indigo-300 bg-indigo-100 text-indigo-800 font-medium transition-all active:scale-95 select-none cursor-grab active:cursor-grabbing group relative",{"hover:bg-red-50 hover:text-red-600 hover:border-red-200":d.value!=="correct","opacity-80 cursor-not-allowed":d.value==="correct"}])},[xe(r(te.text)+" ",1),q[4]||(q[4]=e("span",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 font-bold text-xs pointer-events-none text-red-500"}," âœ• ",-1))],42,cd))),128))])],34),q[6]||(q[6]=e("div",{class:"flex justify-between px-8 -mt-3 relative z-20"},[e("div",{class:"w-6 h-6 bg-gray-800 rounded-full shadow-md"}),e("div",{class:"w-6 h-6 bg-gray-800 rounded-full shadow-md"})],-1))])]),e("div",{class:N(["step-feedback mt-6",d.value==="correct"?"success":d.value==="incorrect"?"error":""])},r(g.value),3),e("div",ud,[e("button",{onClick:A,disabled:d.value==="correct",class:N(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-transform active:scale-95",{"bg-green-500 cursor-default":d.value==="correct","bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700":d.value!=="correct"}])},r(d.value==="correct"?"Correct!":_.value),11,dd)])])}}},gd={class:"interactive-step step-animate-in"},md={class:"text-center mb-8"},fd={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},pd={class:"relative mb-8"},hd={class:"absolute -top-3 left-4 px-3 py-1 bg-white text-xs font-bold text-gray-500 uppercase tracking-wider"},bd={class:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 rounded-2xl p-6"},xd={class:"text-xl text-gray-800 font-medium leading-relaxed"},yd={class:"mt-3 flex items-center gap-2"},kd={class:"flex justify-center mb-8"},_d={class:"relative"},wd={class:"absolute -right-24 top-1/2 -translate-y-1/2 px-3 py-1 rounded-full bg-fuchsia-100 text-fuchsia-700 font-bold text-sm whitespace-nowrap"},$d={class:"relative mb-8"},Cd={key:0,class:"space-y-4"},Sd={class:"min-h-[60px] bg-white rounded-xl border-2 border-dashed border-gray-300 p-4 flex flex-wrap gap-2 items-center"},Ad={key:0,class:"text-gray-400 italic"},Td=["onClick"],Md={class:"flex flex-wrap gap-2 justify-center"},Id=["onClick","disabled"],Ld={class:"flex justify-center gap-2 mt-4"},Dd=["onClick"],jd={key:1,class:"text-center"},zd={class:"mt-3 flex items-center justify-center gap-2"},Ed={key:0,class:"mb-8 p-4 bg-amber-50 rounded-xl border border-amber-200"},qd={class:"flex items-start gap-3"},Rd={class:"font-semibold text-amber-800 mb-1"},Pd={class:"text-amber-700 text-sm"},Bd={class:"flex justify-start gap-3"},Wd=["disabled"],Fd={key:1,class:"mt-4 p-4 bg-blue-50 rounded-xl border border-blue-200"},Nd={class:"text-blue-800"},Vd={__name:"LanguageToneTransformer",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s={props:["tone"],template:`
    <div class="flex items-center gap-2 text-sm">
      <div class="flex gap-0.5">
        <div v-for="i in 5" :key="i"
             class="w-2 h-4 rounded-sm transition-all"
             :class="i <= getToneLevel(tone) ? getToneBarColor(tone) : 'bg-gray-200'"
             :style="{ height: (12 + i * 3) + 'px' }">
        </div>
      </div>
      <span :class="getToneLabelColor(tone)" class="font-medium">{{ getToneEmoji(tone) }} {{ tone }}</span>
    </div>
  `,methods:{getToneLevel(V){return{formal:5,neutral:3,casual:2,sarcastic:4,enthusiastic:5,romantic:4}[V]||3},getToneBarColor(V){return{formal:"bg-blue-500",neutral:"bg-gray-500",casual:"bg-green-500",sarcastic:"bg-purple-500",enthusiastic:"bg-orange-500",romantic:"bg-pink-500"}[V]||"bg-gray-500"},getToneLabelColor(V){return{formal:"text-blue-600",neutral:"text-gray-600",casual:"text-green-600",sarcastic:"text-purple-600",enthusiastic:"text-orange-600",romantic:"text-pink-600"}[V]||"text-gray-600"},getToneEmoji(V){return{formal:"ðŸŽ©",neutral:"ðŸ˜",casual:"ðŸ˜Ž",sarcastic:"ðŸ˜",enthusiastic:"ðŸŽ‰",romantic:"ðŸ’•"}[V]||"ðŸ’¬"}}},v=t,i=n,o=u([]),g=u([]),d=u(""),m=u(!1),y=u(0),M=u(!1),C=B(()=>{var ee;const V=((ee=v.step.correctAnswer)==null?void 0:ee.split(" "))||[],Q=v.step.distractors||[];return[...V,...Q].sort(()=>Math.random()-.5)});$e(()=>v.step,()=>{o.value=[],g.value=[],d.value="",m.value=!1,y.value=0,M.value=!1},{immediate:!0});const k=V=>{g.value.includes(V)||m.value||(o.value.push(C.value[V]),g.value.push(V),d.value="")},b=V=>{if(m.value)return;const Q=o.value[V],te=C.value.findIndex((ee,ie)=>ee===Q&&g.value.includes(ie));o.value.splice(V,1),g.value=g.value.filter(ee=>C.value[ee]!==Q||ee!==te),d.value=""},_=V=>{if(!m.value&&o.value.length>0){const Q=o.value.length-1;o.value[Q]=o.value[Q].replace(/[.,!?]+$/,"")+V}},h=()=>{o.value=[],g.value=[],d.value=""},p=()=>{M.value=!0},w=()=>{y.value++;const V=o.value.join(" ").toLowerCase().replace(/\s+/g," ").trim(),Q=v.step.correctAnswer.toLowerCase().replace(/\s+/g," ").trim(),te=(v.step.alternatives||[]).map(ie=>ie.toLowerCase().replace(/\s+/g," ").trim());V===Q||te.includes(V)?(m.value=!0,d.value=`âœ¨ Brilliant! You've mastered the ${S(v.step.targetTone)} tone!`,i("complete",!0)):(d.value=`Not quite the right tone. ${A()}`,i("complete",!1))},A=()=>({formal:"Try using more polite, professional language.",casual:"Make it sound more relaxed and friendly!",sarcastic:"Add some ironic or mocking undertones.",enthusiastic:"Show more excitement and energy!",romantic:"Make it more affectionate and tender."})[v.step.targetTone]||"Try matching the tone more closely.",S=V=>({formal:"Formal",neutral:"Neutral",casual:"Casual",sarcastic:"Sarcastic",enthusiastic:"Enthusiastic",romantic:"Romantic"})[V]||V,E=V=>({formal:"text-blue-600",casual:"text-green-600",sarcastic:"text-purple-600",enthusiastic:"text-orange-600",romantic:"text-pink-600"})[V]||"text-gray-600",T=V=>({formal:"text-blue-800",casual:"text-green-800",sarcastic:"text-purple-800",enthusiastic:"text-orange-800",romantic:"text-pink-800"})[V]||"text-gray-800",q=()=>m.value?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-300":{formal:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",casual:"bg-gradient-to-br from-green-50 to-teal-50 border-green-200",sarcastic:"bg-gradient-to-br from-purple-50 to-violet-50 border-purple-200",enthusiastic:"bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200",romantic:"bg-gradient-to-br from-pink-50 to-rose-50 border-pink-200"}[v.step.targetTone]||"bg-gray-50 border-gray-200",Y=V=>({formal:"Use polite phrases, complete sentences, and respectful vocabulary. Avoid contractions and slang.",casual:"Be relaxed! Use contractions, simple words, and friendly expressions.",sarcastic:"Say the opposite of what you mean, use exaggeration, or add ironic praise.",enthusiastic:"Show excitement! Use exclamation marks, positive superlatives, and energetic words.",romantic:"Express affection with tender words, poetic language, and emotional expressions."})[V]||"Match the target tone as closely as possible.",ne=B(()=>d.value?m.value?"success":"error":"");return(V,Q)=>(a(),l("div",gd,[e("div",md,[Q[0]||(Q[0]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-violet-100 to-fuchsia-100 border border-violet-200 mb-4"},[e("span",{class:"text-2xl"},"ðŸŽ­"),e("span",{class:"font-bold text-violet-700"},"Tone Transformer")],-1)),e("p",fd,r(t.step.prompt||"Transform the sentence to match the target tone"),1)]),e("div",pd,[e("div",hd," Original ("+r(S(t.step.originalTone))+") ",1),e("div",bd,[e("p",xd,' "'+r(t.step.originalSentence)+'" ',1),e("div",yd,[ye(s,{tone:t.step.originalTone},null,8,["tone"])])])]),e("div",kd,[e("div",_d,[Q[1]||(Q[1]=e("div",{class:"w-16 h-16 rounded-full bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg transform-arrow"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})])],-1)),e("div",wd," Transform to: "+r(S(t.step.targetTone)),1)])]),e("div",$d,[e("div",{class:N(["absolute -top-3 left-4 px-3 py-1 bg-white text-xs font-bold uppercase tracking-wider",E(t.step.targetTone)])}," Target Tone: "+r(S(t.step.targetTone)),3),e("div",{class:N(["border-2 rounded-2xl p-6 transition-all duration-300",q()])},[m.value?(a(),l("div",jd,[e("p",{class:N(["text-xl font-medium leading-relaxed",T(t.step.targetTone)])},' "'+r(o.value.join(" "))+'" ',3),e("div",zd,[ye(s,{tone:t.step.targetTone},null,8,["tone"])])])):(a(),l("div",Cd,[Q[3]||(Q[3]=e("p",{class:"text-sm text-gray-500 mb-4"},"Click on words to build your transformed sentence:",-1)),e("div",Sd,[o.value.length===0?(a(),l("span",Ad," Your sentence will appear here... ")):j("",!0),(a(!0),l(J,null,K(o.value,(te,ee)=>(a(),l("div",{key:`selected-${ee}`,onClick:ie=>b(ee),class:"px-3 py-1.5 rounded-full bg-violet-100 text-violet-800 font-medium cursor-pointer hover:bg-red-100 hover:text-red-600 transition-colors group"},[xe(r(te)+" ",1),Q[2]||(Q[2]=e("span",{class:"ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},"Ã—",-1))],8,Td))),128))]),e("div",Md,[(a(!0),l(J,null,K(C.value,(te,ee)=>(a(),l("button",{key:`word-${ee}`,onClick:ie=>k(ee),disabled:g.value.includes(ee),class:N(["px-4 py-2 rounded-full font-medium transition-all duration-200 transform hover:scale-105",g.value.includes(ee)?"bg-gray-200 text-gray-400 cursor-not-allowed opacity-50":"bg-white border-2 border-gray-200 text-gray-700 hover:border-violet-400 hover:bg-violet-50 hover:shadow-md cursor-pointer"])},r(te),11,Id))),128))]),e("div",Ld,[(a(),l(J,null,K([".","!","?",",","..."],te=>e("button",{key:te,onClick:ee=>_(te),class:"w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold transition-colors"},r(te),9,Dd)),64)),e("button",{onClick:h,class:"px-4 h-10 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 font-medium transition-colors"}," Clear ")])]))],2)]),!m.value&&t.step.showGuide!==!1?(a(),l("div",Ed,[e("div",qd,[Q[4]||(Q[4]=e("span",{class:"text-xl"},"ðŸ’¡",-1)),e("div",null,[e("p",Rd,"Tone Guide: "+r(S(t.step.targetTone)),1),e("p",Pd,r(Y(t.step.targetTone)),1)])])])):j("",!0),e("div",{class:N(["step-feedback mb-4",ne.value])},r(d.value),3),e("div",Bd,[e("button",{onClick:w,disabled:m.value||o.value.length===0,class:N(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-all active:scale-95",m.value?"bg-green-500 cursor-default":"bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700"])},r(m.value?"âœ“ Perfect Transformation!":"Check Tone"),11,Wd),!m.value&&y.value>0?(a(),l("button",{key:0,onClick:p,class:"px-6 py-3 rounded-full font-medium text-violet-600 bg-violet-50 hover:bg-violet-100 transition-colors"}," Show Hint ")):j("",!0)]),M.value&&!m.value?(a(),l("div",Fd,[e("p",Nd,[Q[5]||(Q[5]=e("span",{class:"font-bold"},"Hint:",-1)),xe(" "+r(t.step.hint||`Try starting with: "${t.step.correctAnswer.split(" ").slice(0,3).join(" ")}..."`),1)])])):j("",!0)]))}},Od=ke(Vd,[["__scopeId","data-v-8cf2fb6e"]]),Ud={class:"interactive-step step-animate-in"},Hd={class:"text-center mb-8"},Gd={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},Qd={class:"flex justify-between mb-4 px-4"},Yd={class:"flex items-center gap-2"},Xd={class:"text-2xl"},Zd={class:"font-bold text-gray-700"},Jd={class:"flex items-center gap-2"},Kd={class:"font-bold text-gray-700"},ev={class:"text-2xl"},tv=["d","stroke"],sv=["d"],nv={class:"flex justify-between gap-8"},av={class:"flex-1 space-y-4"},ov=["onMousedown","onTouchstart"],lv={class:"idiom-content"},rv={class:"font-semibold text-gray-800"},iv={key:0,class:"text-sm text-gray-500 italic mt-1"},cv={class:"flex-1 space-y-4"},uv=["onMouseup","onTouchend","onMouseenter"],dv={class:"idiom-content"},vv={class:"font-semibold text-gray-800"},gv={key:0,class:"text-sm text-gray-500 italic mt-1"},mv={class:"text-green-800"},fv={class:"mt-6 flex items-center gap-4"},pv={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},hv={class:"text-sm font-bold text-gray-600"},bv={class:"flex justify-start gap-3 mt-4"},xv={__name:"LanguageIdiomBridge",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u(null),o=u(null),g=u({}),d=u({}),m=u([]),y=u([]),M=u([]),C=u(null),k=u(null),b=u(null),_=u(""),h=u([]),p=(P,z)=>{z&&(g.value[P]=z)},w=(P,z)=>{z&&(d.value[P]=z)},A=B(()=>y.value.filter(P=>P.correct)),S=B(()=>A.value.length===s.step.sourceIdioms.length),E=B(()=>_.value?_.value.includes("âœ“")||_.value.includes("ðŸŽ‰")?"success":"error":""),T=P=>y.value.some(z=>z.sourceIdx===P),q=P=>y.value.some(z=>z.targetIdx===P),Y=P=>y.value.some(z=>z.sourceIdx===P&&z.correct),ne=P=>y.value.some(z=>z.sourceIdx===P&&!z.correct),V=P=>y.value.some(z=>z.targetIdx===P&&z.correct),Q=P=>y.value.some(z=>z.targetIdx===P&&!z.correct);$e(()=>s.step,()=>{let P=[...s.step.targetIdioms],z=0;do{P.sort(()=>Math.random()-.5),z++;const L=P.filter((G,O)=>s.step.sourceIdioms[O]&&G.matchId===s.step.sourceIdioms[O].matchId).length;if(P.length<4){if(L<P.length||z>5)break}else if(L<=Math.max(1,P.length*.3)||z>10)break}while(!0);m.value=P,y.value=[],M.value=[],h.value=[],_.value="",C.value=null,k.value=null},{immediate:!0});const te=(P,z,L)=>{if(T(P)){const G=y.value.findIndex(O=>O.sourceIdx===P);G!==-1&&(y.value.splice(G,1),M.value.splice(G,1))}C.value=P,_.value="",ee(L)},ee=P=>{if(C.value===null)return;const z=g.value[C.value];if(!z||!o.value)return;const L=o.value.getBoundingClientRect(),G=z.getBoundingClientRect(),O=G.right-L.left,se=G.top+G.height/2-L.top;let ae,be;P.touches?(ae=P.touches[0].clientX-L.left,be=P.touches[0].clientY-L.top):(ae=P.clientX-L.left,be=P.clientY-L.top);const oe=O+(ae-O)/2;k.value=`M ${O} ${se} C ${oe} ${se}, ${oe} ${be}, ${ae} ${be}`},ie=P=>{if(C.value===null)return;const z=C.value,L=s.step.sourceIdioms[z],G=m.value[P];if(q(P)){C.value=null,k.value=null,_.value="âš ï¸ This idiom is already connected!";return}const O=L.matchId===G.matchId,se=g.value[z],ae=d.value[P],be=o.value.getBoundingClientRect(),oe=se.getBoundingClientRect(),Le=ae.getBoundingClientRect(),Ee=oe.right-be.left,Pe=oe.top+oe.height/2-be.top,D=Le.left-be.left,U=Le.top+Le.height/2-be.top,Z=Ee+(D-Ee)/2,ue=`M ${Ee} ${Pe} C ${Z} ${Pe}, ${Z} ${U}, ${D} ${U}`;y.value.push({sourceIdx:z,targetIdx:P,correct:O}),M.value.push({path:ue,correct:O,animate:!0}),O?(_.value="âœ“ Perfect match!",h.value.push({id:L.matchId,meaning:L.meaning||G.meaning||"These idioms share the same meaning!"}),A.value.length===s.step.sourceIdioms.length&&(_.value="ðŸŽ‰ All idioms matched! You've built the complete bridge!",v("complete",!0))):_.value="âœ— These idioms have different meanings. Try again!",C.value=null,k.value=null},de=()=>{y.value=[],M.value=[],h.value=[],_.value="",C.value=null,k.value=null},he=P=>{C.value!==null&&ee(P)},F=()=>{C.value!==null&&(C.value=null,k.value=null)};Ge(()=>{document.addEventListener("mousemove",he),document.addEventListener("mouseup",F),document.addEventListener("touchmove",he),document.addEventListener("touchend",F)}),lt(()=>{document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",F),document.removeEventListener("touchmove",he),document.removeEventListener("touchend",F)});const I=P=>({English:"ðŸ‡¬ðŸ‡§",Spanish:"ðŸ‡ªðŸ‡¸",French:"ðŸ‡«ðŸ‡·",German:"ðŸ‡©ðŸ‡ª",Italian:"ðŸ‡®ðŸ‡¹",Russian:"ðŸ‡·ðŸ‡º",Chinese:"ðŸ‡¨ðŸ‡³",Japanese:"ðŸ‡¯ðŸ‡µ",Korean:"ðŸ‡°ðŸ‡·",Portuguese:"ðŸ‡µðŸ‡¹",Arabic:"ðŸ‡¸ðŸ‡¦"})[P]||"ðŸŒ";return(P,z)=>(a(),l("div",Ud,[e("div",Hd,[z[2]||(z[2]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-amber-100 to-orange-100 border border-amber-200 mb-4"},[e("span",{class:"text-2xl"},"ðŸŒ‰"),e("span",{class:"font-bold text-amber-700"},"Idiom Bridge")],-1)),e("p",Gd,r(t.step.prompt||"Connect idioms with the same meaning across languages"),1)]),e("div",Qd,[e("div",Yd,[e("span",Xd,r(I(t.step.sourceLanguage)),1),e("span",Zd,r(t.step.sourceLanguage||"English"),1)]),e("div",Jd,[e("span",Kd,r(t.step.targetLanguage||"Spanish"),1),e("span",ev,r(I(t.step.targetLanguage)),1)])]),e("div",{class:"relative bridge-container",ref_key:"bridgeContainer",ref:i},[(a(),l("svg",{class:"absolute inset-0 w-full h-full pointer-events-none z-10",ref_key:"svgCanvas",ref:o},[(a(!0),l(J,null,K(M.value,(L,G)=>(a(),l("path",{key:`conn-${G}`,d:L.path,stroke:L.correct?"#10b981":"#ef4444","stroke-width":"3",fill:"none",class:N(["connection-line",{"animate-draw":L.animate}])},null,10,tv))),128)),k.value?(a(),l("path",{key:0,d:k.value,stroke:"#8b5cf6","stroke-width":"3","stroke-dasharray":"8 4",fill:"none",class:"active-connection"},null,8,sv)):j("",!0)],512)),e("div",nv,[e("div",av,[(a(!0),l(J,null,K(t.step.sourceIdioms,(L,G)=>(a(),l("div",{key:`source-${G}`,ref_for:!0,ref:O=>p(G,O),onMousedown:O=>te(G,"source",O),onTouchstart:De(O=>te(G,"source",O),["prevent"]),class:N(["idiom-card source-card",{connected:T(G),correct:Y(G),incorrect:ne(G),active:C.value===G}])},[e("div",lv,[e("p",rv,r(L.text),1),L.literal?(a(),l("p",iv," (Literally: "+r(L.literal)+") ",1)):j("",!0)]),e("div",{class:N(["connection-dot right-dot",{"dot-active":C.value===G}])},null,2)],42,ov))),128))]),z[3]||(z[3]=We('<div class="flex flex-col items-center justify-center px-4" data-v-e0711625><div class="bridge-pillar" data-v-e0711625></div><div class="bridge-deck" data-v-e0711625><div class="bridge-cable left-cable" data-v-e0711625></div><div class="bridge-cable right-cable" data-v-e0711625></div></div><div class="bridge-pillar" data-v-e0711625></div></div>',1)),e("div",cv,[(a(!0),l(J,null,K(m.value,(L,G)=>(a(),l("div",{key:`target-${G}`,ref_for:!0,ref:O=>w(G,O),onMouseup:O=>ie(G),onTouchend:O=>ie(G),class:N(["idiom-card target-card",{connected:q(G),correct:V(G),incorrect:Q(G),hovering:b.value===G}]),onMouseenter:O=>b.value=C.value!==null?G:null,onMouseleave:z[0]||(z[0]=O=>b.value=null)},[e("div",{class:N(["connection-dot left-dot",{"dot-active":b.value===G}])},null,2),e("div",dv,[e("p",vv,r(L.text),1),L.literal?(a(),l("p",gv," (Literally: "+r(L.literal)+") ",1)):j("",!0)])],42,uv))),128))])])],512),ye(qs,{name:"meaning-reveal",tag:"div",class:"mt-6 space-y-2"},{default:Ae(()=>[(a(!0),l(J,null,K(h.value,L=>(a(),l("div",{key:L.id,class:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200"},[e("p",mv,[z[4]||(z[4]=e("span",{class:"font-bold"},"Shared meaning:",-1)),xe(" "+r(L.meaning),1)])]))),128))]),_:1}),e("div",fv,[e("div",pv,[e("div",{class:"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full transition-all duration-500",style:me({width:`${A.value.length/t.step.sourceIdioms.length*100}%`})},null,4)]),e("span",hv,r(A.value.length)+" / "+r(t.step.sourceIdioms.length),1)]),e("div",{class:N(["step-feedback mt-4",E.value])},r(_.value),3),e("div",bv,[S.value?j("",!0):(a(),l("button",{key:0,onClick:de,class:"px-6 py-3 rounded-full font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors"}," Reset All ")),S.value?(a(),l("button",{key:1,onClick:z[1]||(z[1]=L=>P.$emit("complete",!0)),class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 shadow-md hover:shadow-lg transition-all"}," Continue â†’ ")):j("",!0)])]))}},yv=ke(xv,[["__scopeId","data-v-e0711625"]]),kv={class:"interactive-step step-animate-in"},_v={class:"text-center mb-6 relative"},wv={key:0,class:"absolute top-12 right-0 w-72 bg-white p-5 rounded-xl shadow-xl border border-indigo-100 z-50 text-left"},$v={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},Cv={class:"text-center mb-4"},Sv={class:"inline-block px-6 py-3 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-xl shadow-lg"},Av={class:"absolute inset-0 w-full h-full pointer-events-none"},Tv=["cx","cy","r","opacity"],Mv=["x1","y1","x2","y2"],Iv=["x1","y1","x2","y2"],Lv=["onMousedown","onTouchstart","onMouseenter"],Dv={class:"word-content"},jv={class:"word-text"},zv={key:0,class:"word-type"},Ev={key:0,class:"connection-badge"},qv={class:"star-core"},Rv={key:0,class:"mt-6 flex flex-wrap justify-center gap-3"},Pv={class:"font-medium"},Bv={class:"mt-6"},Wv={class:"flex items-center gap-4 mb-4"},Fv={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},Nv={class:"text-sm font-bold text-gray-600"},Vv={class:"flex justify-start gap-3 mt-4"},Ov={__name:"LanguageWordConstellation",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n,i=u(null),o=Gt({}),g=u([]),d=u(!1),m=u(null),y=u(null),M=u(null),C=u(null),k=u(""),b=u(!0),_=u(!1),h=u([]),p=()=>{const z=[];for(let L=0;L<50;L++)z.push({id:L,x:Math.random()*100+"%",y:Math.random()*100+"%",r:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,delay:Math.random()*3});h.value=z},w=[{type:"synonym",label:"Synonym",icon:"â‰ˆ",class:"bg-blue-100 text-blue-700"},{type:"antonym",label:"Antonym",icon:"â†”",class:"bg-red-100 text-red-700"},{type:"related",label:"Related",icon:"â†’",class:"bg-green-100 text-green-700"},{type:"category",label:"Category",icon:"âŠ‚",class:"bg-purple-100 text-purple-700"}],A=B(()=>typeof s.step.centralWord=="object"&&s.step.centralWord!==null?s.step.centralWord.text||"Center":s.step.centralWord),S=B(()=>g.value.filter(z=>(s.step.requiredConnections||[]).some(G=>G.from===z.from&&G.to===z.to||G.from===z.to&&G.to===z.from))),E=B(()=>{var L;const z=((L=s.step.requiredConnections)==null?void 0:L.length)||s.step.words.length;return S.value.length/z*100}),T=B(()=>{var L;const z=((L=s.step.requiredConnections)==null?void 0:L.length)||s.step.words.length;return S.value.length>=z}),q=B(()=>k.value?k.value.includes("âœ“")||k.value.includes("ðŸŒŸ")?"success":"error":"");$e(()=>s.step,()=>{g.value=[],k.value="",d.value=!1,p()},{immediate:!0}),Ge(()=>{p()});const Y=(z,L)=>{const G=s.step.words.length,O=L/G*2*Math.PI-Math.PI/2,se=38,ae=50+se*Math.cos(O),be=50+se*Math.sin(O);return{left:`${ae}%`,top:`${be}%`,transform:"translate(-50%, -50%)"}},ne=()=>({left:"50%",top:"50%",transform:"translate(-50%, -50%)"}),V=z=>{if(!i.value)return{x:0,y:0};const L=o[z];if(!L)return{x:i.value.offsetWidth/2,y:i.value.offsetHeight/2};const G=i.value.getBoundingClientRect(),O=L.getBoundingClientRect();return{x:O.left+O.width/2-G.left,y:O.top+O.height/2-G.top}},Q=z=>g.value.some(L=>L.from===z||L.to===z),te=z=>g.value.filter(L=>L.from===z||L.to===z).length,ee=(z,L)=>g.value.some(G=>G.from===z&&G.to===L||G.from===L&&G.to===z),ie=(z,L)=>{d.value=!0,m.value=z.id,y.value=V(z.id);const G=i.value.getBoundingClientRect();L.touches?M.value={x:L.touches[0].clientX-G.left,y:L.touches[0].clientY-G.top}:M.value={x:L.clientX-G.left,y:L.clientY-G.top}},de=z=>{if(!d.value||!i.value)return;const L=i.value.getBoundingClientRect();M.value={x:z.clientX-L.left,y:z.clientY-L.top}},he=z=>{if(!d.value||!i.value)return;const L=i.value.getBoundingClientRect();M.value={x:z.touches[0].clientX-L.left,y:z.touches[0].clientY-L.top}},F=()=>{d.value&&(C.value&&C.value!==m.value&&I(m.value,C.value),d.value=!1,m.value=null,y.value=null,M.value=null)},I=(z,L)=>{if(ee(z,L)){k.value="âš ï¸ These words are already connected!";return}if((s.step.requiredConnections||[]).some(se=>se.from===z&&se.to===L||se.from===L&&se.to===z))g.value.push({from:z,to:L}),k.value="âœ“ Connection discovered!",T.value&&(k.value="ðŸŒŸ Constellation complete! You found all the word relationships!",v("complete",!0));else{k.value="âœ— These words don't have a direct relationship. Try another pair!";const se=o[z],ae=o[L];se&&se.classList.add("shake"),ae&&ae.classList.add("shake"),setTimeout(()=>{se&&se.classList.remove("shake"),ae&&ae.classList.remove("shake")},500)}},P=()=>{g.value=[],k.value=""};return(z,L)=>{var G;return a(),l("div",kv,[e("div",_v,[L[6]||(L[6]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-indigo-100 to-purple-100 border border-indigo-200 mb-4"},[e("span",{class:"text-2xl"},"âœ¨"),e("span",{class:"font-bold text-indigo-700"},"Word Constellation")],-1)),e("button",{onClick:L[0]||(L[0]=O=>_.value=!_.value),class:"absolute right-0 top-0 p-2 text-indigo-400 hover:text-indigo-600 transition-colors",title:"How to play"},L[4]||(L[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),_.value?(a(),l("div",wv,[L[5]||(L[5]=We('<h4 class="font-bold text-indigo-700 mb-2 flex items-center gap-2" data-v-626106ed><span data-v-626106ed>ðŸŽ®</span> How to Play </h4><ul class="space-y-2 text-sm text-gray-600" data-v-626106ed><li class="flex gap-2" data-v-626106ed><span class="text-indigo-500 font-bold" data-v-626106ed>1.</span><span data-v-626106ed>Look for words related to the <strong data-v-626106ed>Central Word</strong>.</span></li><li class="flex gap-2" data-v-626106ed><span class="text-indigo-500 font-bold" data-v-626106ed>2.</span><span data-v-626106ed><strong data-v-626106ed>Drag</strong> from one word to another to connect them.</span></li><li class="flex gap-2" data-v-626106ed><span class="text-indigo-500 font-bold" data-v-626106ed>3.</span><span data-v-626106ed>Find all connections to reveal the full constellation!</span></li></ul>',2)),e("button",{onClick:L[1]||(L[1]=O=>_.value=!1),class:"mt-3 w-full py-1 bg-indigo-50 text-indigo-600 rounded-lg text-xs font-bold hover:bg-indigo-100"},"Got it!")])):j("",!0),e("p",$v,r(t.step.prompt||"Drag to connect words that are synonyms, antonyms, or related to the central concept."),1)]),e("div",Cv,[e("span",Sv,r(A.value),1)]),e("div",{class:"constellation-canvas",ref_key:"canvas",ref:i,onMousemove:de,onMouseup:F,onTouchmove:he,onTouchend:F},[(a(),l("svg",Av,[(a(!0),l(J,null,K(h.value,O=>(a(),l("circle",{key:O.id,cx:O.x,cy:O.y,r:O.r,fill:"white",opacity:O.opacity,class:"twinkle",style:me({animationDelay:O.delay+"s"})},null,12,Tv))),128)),(a(!0),l(J,null,K(S.value,O=>(a(),l("line",{key:`line-${O.from}-${O.to}`,x1:V(O.from).x,y1:V(O.from).y,x2:V(O.to).x,y2:V(O.to).y,stroke:"url(#connectionGradient)","stroke-width":"3","stroke-linecap":"round",class:"constellation-line"},null,8,Mv))),128)),d.value&&y.value&&M.value?(a(),l("line",{key:0,x1:y.value.x,y1:y.value.y,x2:M.value.x,y2:M.value.y,stroke:"#a5b4fc","stroke-width":"2","stroke-dasharray":"6 4","stroke-linecap":"round"},null,8,Iv)):j("",!0),L[7]||(L[7]=e("defs",null,[e("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#818cf8"}),e("stop",{offset:"50%","stop-color":"#c084fc"}),e("stop",{offset:"100%","stop-color":"#818cf8"})])],-1))])),(a(!0),l(J,null,K(t.step.words,(O,se)=>(a(),l("div",{key:O.id,ref_for:!0,ref:ae=>o[O.id]=ae,class:N(["word-node",{connected:Q(O.id),dragging:m.value===O.id,hovering:C.value===O.id&&d.value&&m.value!==O.id,central:O.id==="center"}]),style:me(Y(O,se)),onMousedown:ae=>ie(O,ae),onTouchstart:De(ae=>ie(O,ae),["prevent"]),onMouseenter:ae=>C.value=O.id,onMouseleave:L[2]||(L[2]=ae=>C.value=null)},[L[8]||(L[8]=e("div",{class:"word-glow"},null,-1)),e("div",Dv,[e("span",jv,r(O.text),1),O.type&&b.value?(a(),l("span",zv,r(O.type),1)):j("",!0)]),te(O.id)>0?(a(),l("div",Ev,r(te(O.id)),1)):j("",!0)],46,Lv))),128)),e("div",{class:"central-star",style:me(ne())},[L[9]||(L[9]=e("div",{class:"star-rays"},null,-1)),e("div",qv,[e("span",null,r(A.value),1)])],4)],544),t.step.showLegend!==!1?(a(),l("div",Rv,[(a(),l(J,null,K(w,O=>e("div",{key:O.type,class:N(["flex items-center gap-2 px-3 py-1.5 rounded-full text-sm",O.class])},[e("span",null,r(O.icon),1),e("span",Pv,r(O.label),1)],2)),64))])):j("",!0),e("div",Bv,[e("div",Wv,[e("div",Fv,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:me({width:`${E.value}%`})},null,4)]),e("span",Nv,r(S.value.length)+" / "+r(((G=t.step.requiredConnections)==null?void 0:G.length)||t.step.words.length),1)]),e("div",{class:N(["step-feedback",q.value])},r(k.value),3)]),e("div",Vv,[S.value.length>0&&!T.value?(a(),l("button",{key:0,onClick:P,class:"px-6 py-3 rounded-full font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors"}," Reset ")):j("",!0),T.value?(a(),l("button",{key:1,onClick:L[3]||(L[3]=O=>z.$emit("complete",!0)),class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-indigo-600 to-purple-600 shadow-md hover:shadow-lg transition-all"}," Constellation Complete! â†’ ")):j("",!0)])])}}},Uv=ke(Ov,[["__scopeId","data-v-626106ed"]]),Hv={class:"interactive-step step-animate-in"},Gv={class:"text-center mb-6"},Qv={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},Yv={class:"mb-8"},Xv={class:"target-pattern-card"},Zv={class:"waveform-container mb-4"},Jv={class:"flex justify-center gap-2 mb-3"},Kv={class:"text-lg text-gray-800 font-medium text-center"},eg={class:"text-sm text-gray-500 text-center mt-2"},tg={class:"space-y-4 mb-6"},sg=["onClick"],ng={class:"mini-waveform"},ag={class:"flex-1"},og={class:"text-gray-800 font-medium"},lg={key:0,class:"text-sm text-green-600 mt-1"},rg=["onClick"],ig={key:0,class:"selection-indicator"},cg={key:0,class:"mb-6 p-4 bg-blue-50 rounded-xl border border-blue-200"},ug={class:"flex items-start gap-3"},dg={class:"text-blue-700 text-sm"},vg={class:"flex justify-start gap-3 mt-4"},gg=["disabled"],mg={__name:"LanguageRhythmMatch",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=n;let i=null;const o=u(null),g=u(!1),d=u(""),m=u(!1),y=B(()=>d.value?m.value?"success":"error":"");$e(()=>s.step,()=>{o.value=null,g.value=!1,d.value="",m.value=!1},{immediate:!0});const M=h=>{console.log("Selected option:",h),!g.value&&(o.value=h,d.value="")},C=h=>parseInt(s.step.correctIndex)===h,k=()=>{if(console.log("Check Answer clicked"),console.log("Selected Option:",o.value),console.log("Correct Index:",s.step.correctIndex),o.value===null){console.log("No option selected");return}g.value=!0;const h=parseInt(s.step.correctIndex),p=parseInt(o.value);console.log("Parsed Correct Index:",h),console.log("Parsed Selected Index:",p),m.value=!isNaN(h)&&p===h,console.log("Is Correct:",m.value),m.value?(d.value="ðŸŽµ Perfect! You matched the rhythm correctly!",v("complete",!0)):(d.value="âŒ Not quite. Listen to the patterns again - the stress falls on different syllables.",v("complete",!1))},b=h=>{const p=h.join(""),w={"01":"Iambic (da-DUM)",10:"Trochaic (DUM-da)","001":"Anapestic (da-da-DUM)",100:"Dactylic (DUM-da-da)","0101":"Iambic dimeter",1010:"Trochaic dimeter","010101":"Iambic trimeter","01010101":"Iambic tetrameter","0101010101":"Iambic pentameter"};return p.match(/^(01)+$/)?`Iambic (${h.length/2} feet)`:p.match(/^(10)+$/)?`Trochaic (${h.length/2} feet)`:p.match(/^(001)+$/)?`Anapestic (${h.length/3} feet)`:p.match(/^(100)+$/)?`Dactylic (${h.length/3} feet)`:w[p]||"Custom rhythm pattern"},_=async h=>{try{i||(i=new(window.AudioContext||window.webkitAudioContext));const p=300,w=i.currentTime;h.forEach((A,S)=>{const E=i.createOscillator(),T=i.createGain();E.connect(T),T.connect(i.destination),A===1?(E.frequency.value=600,T.gain.value=.5):(E.frequency.value=400,T.gain.value=.2),E.type="sine";const q=w+S*p/1e3,Y=.15;T.gain.setValueAtTime(T.gain.value,q),T.gain.exponentialRampToValueAtTime(.01,q+Y),E.start(q),E.stop(q+Y)})}catch{console.log("Audio not supported")}};return(h,p)=>(a(),l("div",Hv,[e("div",Gv,[p[2]||(p[2]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-cyan-100 to-teal-100 border border-cyan-200 mb-4"},[e("span",{class:"text-2xl"},"ðŸŽµ"),e("span",{class:"font-bold text-cyan-700"},"Rhythm Match")],-1)),e("p",Qv,r(t.step.prompt||"Match sentences with the same stress pattern (rhythm)"),1)]),p[10]||(p[10]=We('<div class="flex justify-center gap-6 mb-6" data-v-b7477a30><div class="flex items-center gap-2" data-v-b7477a30><div class="w-4 h-8 rounded bg-cyan-500" data-v-b7477a30></div><span class="text-sm text-gray-600" data-v-b7477a30>Stressed syllable</span></div><div class="flex items-center gap-2" data-v-b7477a30><div class="w-4 h-4 rounded bg-cyan-300" data-v-b7477a30></div><span class="text-sm text-gray-600" data-v-b7477a30>Unstressed syllable</span></div></div>',1)),e("div",Yv,[p[4]||(p[4]=e("div",{class:"text-center mb-3"},[e("span",{class:"text-sm font-bold text-gray-500 uppercase tracking-wider"},"Target Rhythm Pattern")],-1)),e("div",Xv,[e("div",Zv,[(a(!0),l(J,null,K(t.step.targetPattern,(w,A)=>(a(),l("div",{key:A,class:N(["waveform-bar",w===1?"stressed":"unstressed"]),style:me({animationDelay:A*.1+"s"})},null,6))),128))]),e("div",Jv,[(a(!0),l(J,null,K(t.step.targetPattern,(w,A)=>(a(),l("span",{key:`notation-${A}`,class:"text-2xl"},r(w===1?"â—":"â—‹"),1))),128))]),e("p",Kv,' "'+r(t.step.targetSentence)+'" ',1),e("p",eg,r(b(t.step.targetPattern)),1),e("button",{onClick:p[0]||(p[0]=w=>_(t.step.targetPattern)),class:"mt-4 mx-auto flex items-center gap-2 px-4 py-2 rounded-full bg-cyan-100 hover:bg-cyan-200 text-cyan-700 font-medium transition-colors"},p[3]||(p[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),xe(" Hear Rhythm ")]))])]),e("div",tg,[p[7]||(p[7]=e("p",{class:"text-center text-gray-600 font-medium"},"Which sentence has the same rhythm?",-1)),(a(!0),l(J,null,K(t.step.options,(w,A)=>(a(),l("div",{key:A,onClick:S=>M(A),class:N(["option-card",{selected:o.value===A,correct:g.value&&C(A),incorrect:g.value&&o.value===A&&!C(A)}])},[e("div",ng,[(a(!0),l(J,null,K(w.pattern,(S,E)=>(a(),l("div",{key:E,class:N(["mini-bar",S===1?"stressed":"unstressed"])},null,2))),128))]),e("div",ag,[e("p",og,r(w.sentence),1),g.value&&C(A)?(a(),l("p",lg," Pattern: "+r(w.pattern.map(S=>S===1?"â—":"â—‹").join(" ")),1)):j("",!0)]),e("button",{onClick:De(S=>_(w.pattern),["stop"]),class:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors"},p[5]||(p[5]=[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})],-1)]),8,rg),o.value===A?(a(),l("div",ig,p[6]||(p[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):j("",!0)],10,sg))),128))]),ye(Ie,{name:"slide-fade"},{default:Ae(()=>[g.value&&t.step.explanation?(a(),l("div",cg,[e("div",ug,[p[9]||(p[9]=e("span",{class:"text-xl"},"ðŸ’¡",-1)),e("div",null,[p[8]||(p[8]=e("p",{class:"font-semibold text-blue-800 mb-1"},"Understanding Rhythm",-1)),e("p",dg,r(t.step.explanation),1)])])])):j("",!0)]),_:1}),e("div",{class:N(["step-feedback",y.value])},r(d.value),3),e("div",vg,[g.value?(a(),l("button",{key:1,onClick:p[1]||(p[1]=w=>h.$emit("complete",m.value)),class:N(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-all",m.value?"bg-gradient-to-r from-green-500 to-emerald-600":"bg-gradient-to-r from-cyan-600 to-teal-600"])},r(m.value?"Continue â†’":"Try Another â†’"),3)):(a(),l("button",{key:0,onClick:k,disabled:o.value===null,class:N(["px-8 py-3 rounded-full font-bold text-white shadow-md transition-all active:scale-95",o.value!==null?"bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-700 hover:to-teal-700":"bg-gray-300 cursor-not-allowed"])}," Check Rhythm ",10,gg))])]))}},fg=ke(mg,[["__scopeId","data-v-b7477a30"]]),pg={class:"interactive-step step-animate-in"},hg={class:"text-center mb-6"},bg={class:"text-lg text-gray-600 leading-relaxed max-w-xl mx-auto"},xg={class:"flex items-center justify-center gap-4 mb-6"},yg={class:"text-2xl"},kg={class:"font-bold text-gray-700"},_g={class:"font-bold text-gray-700"},wg={class:"text-2xl"},$g={class:"case-file mb-8"},Cg={class:"case-header"},Sg={class:"case-number"},Ag={class:"word-comparison"},Tg={class:"language-badge"},Mg={class:"word-display"},Ig={class:"word-text"},Lg={key:0,class:"word-meaning"},Dg={key:0,class:"word-mystery"},jg={class:"comparison-center"},zg={key:0},Eg={key:1},qg={key:2},Rg={key:0,class:"comparison-label"},Pg={class:"language-badge"},Bg={class:"word-display"},Wg={class:"word-text"},Fg={key:0,class:"word-meaning"},Ng={key:0,class:"word-mystery"},Vg={key:0,class:"guess-buttons"},Og={key:0,class:"explanation-box"},Ug={class:"explanation-text"},Hg={key:0,class:"examples-grid"},Gg={key:0,class:"example-item"},Qg={class:"example-lang"},Yg={class:"example-text"},Xg={key:1,class:"example-item"},Zg={class:"example-lang"},Jg={class:"example-text"},Kg={class:"progress-tracker mb-6"},e0={class:"progress-dots"},t0={key:0},s0={key:1},n0={key:2},a0={class:"progress-score"},o0={class:"score-correct"},l0={class:"score-total"},r0={class:"flex justify-start gap-3 mt-4"},i0={class:"results-modal"},c0={class:"results-header"},u0={class:"text-4xl"},d0={class:"results-score"},v0={class:"score-circle"},g0={class:"score-number"},m0={class:"score-label"},f0={class:"score-message"},p0={class:"results-breakdown"},h0={class:"result-words"},b0={class:"result-type"},x0={class:"result-status"},y0={__name:"LanguageFalseFriends",props:{step:{type:Object,required:!0}},emits:["complete"],setup(t,{emit:n}){const s=t,v=u(0),i=u(!1),o=u({}),g=u(""),d=u(!1),m=B(()=>s.step.words[v.value]||{}),y=B(()=>Object.values(o.value).filter(A=>A==="correct").length),M=B(()=>v.value>=s.step.words.length-1&&i.value),C=B(()=>g.value?g.value.includes("âœ“")||g.value.includes("ðŸŽ‰")?"success":"error":"");$e(()=>s.step,()=>{v.value=0,i.value=!1,o.value={},g.value="",d.value=!1},{immediate:!0});const k=A=>{const S=A===m.value.isFalseFriend;i.value=!0,o.value[v.value]=S?"correct":"incorrect",S?g.value=m.value.isFalseFriend?"âœ“ Correct! This is indeed a false friend - the words look similar but mean different things!":"âœ“ Correct! These are true cognates with the same meaning.":g.value=m.value.isFalseFriend?"âœ— Actually, this is a false friend! Despite looking similar, they have different meanings.":"âœ— Actually, these are true cognates - they share the same meaning across both languages."},b=()=>{v.value<s.step.words.length-1?(v.value++,i.value=!1,g.value=""):d.value=!0},_=()=>i.value?o.value[v.value]||"pending":"investigating",h=()=>i.value?o.value[v.value]==="correct"?"Solved!":"Missed!":"Investigating...",p=()=>{const A=y.value/s.step.words.length;return A>=.9?"Master Detective! You have an excellent eye for false friends!":A>=.7?"Great detective work! You caught most of the tricky words.":A>=.5?"Good effort! Keep practicing to spot more false friends.":"These sneaky words fooled you! Study the explanations to learn the differences."},w=A=>({English:"ðŸ‡¬ðŸ‡§",Spanish:"ðŸ‡ªðŸ‡¸",French:"ðŸ‡«ðŸ‡·",German:"ðŸ‡©ðŸ‡ª",Italian:"ðŸ‡®ðŸ‡¹",Russian:"ðŸ‡·ðŸ‡º",Portuguese:"ðŸ‡µðŸ‡¹",Polish:"ðŸ‡µðŸ‡±",Dutch:"ðŸ‡³ðŸ‡±",Swedish:"ðŸ‡¸ðŸ‡ª"})[A]||"ðŸŒ";return(A,S)=>(a(),l("div",pg,[e("div",hg,[S[5]||(S[5]=e("div",{class:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-gradient-to-r from-rose-100 to-orange-100 border border-rose-200 mb-4"},[e("span",{class:"text-2xl"},"ðŸ”"),e("span",{class:"font-bold text-rose-700"},"False Friends Detective")],-1)),e("p",bg,r(t.step.prompt||"Identify words that look similar but have different meanings!"),1)]),e("div",xg,[e("span",yg,r(w(t.step.language1)),1),e("span",kg,r(t.step.language1),1),S[6]||(S[6]=e("span",{class:"text-2xl text-rose-500"},"âš¡",-1)),e("span",_g,r(t.step.language2),1),e("span",wg,r(w(t.step.language2)),1)]),e("div",$g,[e("div",Cg,[e("span",Sg,"Case #"+r(v.value+1),1),e("span",{class:N(["case-status",_()])},r(h()),3)]),e("div",Ag,[e("div",{class:N(["word-card",{revealed:i.value}])},[e("div",Tg,r(t.step.language1),1),e("div",Mg,[e("span",Ig,r(m.value.word1),1),i.value?(a(),l("span",Lg,r(m.value.meaning1),1)):j("",!0)]),i.value?j("",!0):(a(),l("div",Dg,"?"))],2),e("div",jg,[e("div",{class:N(["comparison-icon",{"false-friend":i.value&&m.value.isFalseFriend}])},[i.value?m.value.isFalseFriend?(a(),l("span",Eg,"âš ï¸")):(a(),l("span",qg,"âœ“")):(a(),l("span",zg,"ðŸ¤”"))],2),i.value?(a(),l("div",Rg,r(m.value.isFalseFriend?"FALSE FRIEND!":"True cognate"),1)):j("",!0)]),e("div",{class:N(["word-card",{revealed:i.value}])},[e("div",Pg,r(t.step.language2),1),e("div",Bg,[e("span",Wg,r(m.value.word2),1),i.value?(a(),l("span",Fg,r(m.value.meaning2),1)):j("",!0)]),i.value?j("",!0):(a(),l("div",Ng,"?"))],2)]),i.value?j("",!0):(a(),l("div",Vg,[e("button",{onClick:S[0]||(S[0]=E=>k(!0)),class:"guess-btn false-friend-btn"},S[7]||(S[7]=[e("span",{class:"text-2xl mb-1"},"âš ï¸",-1),e("span",{class:"font-bold"},"False Friend",-1),e("span",{class:"text-sm opacity-75"},"Different meanings",-1)])),e("button",{onClick:S[1]||(S[1]=E=>k(!1)),class:"guess-btn true-cognate-btn"},S[8]||(S[8]=[e("span",{class:"text-2xl mb-1"},"âœ“",-1),e("span",{class:"font-bold"},"True Cognate",-1),e("span",{class:"text-sm opacity-75"},"Same meaning",-1)]))])),ye(Ie,{name:"slide-up"},{default:Ae(()=>[i.value&&m.value.explanation?(a(),l("div",Og,[S[9]||(S[9]=e("div",{class:"explanation-header"},[e("span",{class:"text-lg"},"ðŸ’¡"),e("span",{class:"font-bold"},"Detective Notes")],-1)),e("p",Ug,r(m.value.explanation),1),m.value.example1||m.value.example2?(a(),l("div",Hg,[m.value.example1?(a(),l("div",Gg,[e("span",Qg,r(t.step.language1)+":",1),e("span",Yg,'"'+r(m.value.example1)+'"',1)])):j("",!0),m.value.example2?(a(),l("div",Xg,[e("span",Zg,r(t.step.language2)+":",1),e("span",Jg,'"'+r(m.value.example2)+'"',1)])):j("",!0)])):j("",!0)])):j("",!0)]),_:1})]),e("div",Kg,[e("div",e0,[(a(!0),l(J,null,K(t.step.words,(E,T)=>(a(),l("div",{key:T,class:N(["progress-dot",{current:T===v.value,correct:o.value[T]==="correct",incorrect:o.value[T]==="incorrect",pending:!o.value[T]&&T!==v.value}])},[o.value[T]==="correct"?(a(),l("span",t0,"âœ“")):o.value[T]==="incorrect"?(a(),l("span",s0,"âœ—")):(a(),l("span",n0,r(T+1),1))],2))),128))]),e("div",a0,[e("span",o0,r(y.value)+" correct",1),S[10]||(S[10]=e("span",{class:"score-divider"},"/",-1)),e("span",l0,r(t.step.words.length)+" total",1)])]),e("div",{class:N(["step-feedback",C.value])},r(g.value),3),e("div",r0,[i.value&&!M.value?(a(),l("button",{key:0,onClick:b,class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-rose-500 to-orange-500 shadow-md hover:shadow-lg transition-all"}," Next Case â†’ ")):j("",!0),M.value?(a(),l("button",{key:1,onClick:S[2]||(S[2]=E=>d.value=!0),class:"px-8 py-3 rounded-full font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 shadow-md hover:shadow-lg transition-all"},r(y.value>=t.step.words.length/2?"Case Closed! â†’":"Review Results â†’"),1)):j("",!0)]),ye(Ie,{name:"modal"},{default:Ae(()=>[d.value?(a(),l("div",{key:0,class:"results-overlay",onClick:S[4]||(S[4]=De(E=>d.value=!1,["self"]))},[e("div",i0,[e("div",c0,[e("span",u0,r(y.value>=t.step.words.length/2?"ðŸ†":"ðŸ“š"),1),S[11]||(S[11]=e("h3",null,"Investigation Complete!",-1))]),e("div",d0,[e("div",v0,[e("span",g0,r(y.value),1),e("span",m0,"/ "+r(t.step.words.length),1)]),e("p",f0,r(p()),1)]),e("div",p0,[(a(!0),l(J,null,K(t.step.words,(E,T)=>(a(),l("div",{key:T,class:N(["result-item",o.value[T]])},[e("span",h0,r(E.word1)+" â†” "+r(E.word2),1),e("span",b0,r(E.isFalseFriend?"âš ï¸ False Friend":"âœ“ Cognate"),1),e("span",x0,r(o.value[T]==="correct"?"âœ“":"âœ—"),1)],2))),128))]),e("button",{onClick:S[3]||(S[3]=E=>A.$emit("complete",y.value>=t.step.words.length/2)),class:"results-close-btn"}," Continue ")])])):j("",!0)]),_:1})]))}},k0=ke(y0,[["__scopeId","data-v-8ce386f3"]]),_0={key:0,class:"game-full-container"},w0={key:1,class:"w-full h-full overflow-y-auto"},$0={class:"bg-white p-4 sm:p-8 min-h-full"},C0={class:"text-center mb-6 sm:mb-8"},S0={class:"flex items-center justify-center gap-2 mt-3"},A0={class:"text-sm sm:text-base font-semibold text-slate-900"},T0={class:"mb-6 sm:mb-8"},M0={class:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 shadow-lg rounded-2xl p-4 sm:p-6 text-center"},I0={class:"text-lg sm:text-2xl font-bold text-slate-900 mb-2"},L0={class:"text-sm sm:text-base text-purple-600"},D0={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6"},j0=["onClick","disabled"],z0={class:"flex flex-col items-center justify-center h-full p-2 sm:p-4"},E0=["src","alt"],q0={class:"text-xs sm:text-sm font-medium text-slate-700"},R0={key:2,class:"exercise-scroll-container"},P0={class:"exercise-content"},B0={key:0,class:"text-center mb-6 sm:mb-8"},W0={class:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm sm:text-base shadow-lg"},F0={class:"text-xl sm:text-2xl md:text-3xl font-bold text-slate-900 mb-2"},N0={key:0,class:"text-slate-500 text-sm sm:text-base max-w-xl mx-auto"},V0={key:1,class:"exercise-card"},O0={class:"mb-4 sm:mb-6"},U0={class:"inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 font-semibold text-xs sm:text-sm"},H0={class:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 leading-relaxed mb-6 sm:mb-8"},G0={class:"space-y-2 sm:space-y-3"},Q0=["onClick","disabled"],Y0={class:"option-text"},X0={key:0,class:"option-check"},Z0={class:"feedback-icon"},J0={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K0={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},em={class:"font-bold text-sm sm:text-base"},tm={key:0,class:"text-xs sm:text-sm mt-1"},sm={key:2,class:"exercise-card text-center"},nm={class:"text-lg sm:text-xl md:text-2xl font-bold text-slate-900 leading-relaxed mb-6 sm:mb-8"},am={class:"flex justify-center gap-4 sm:gap-6"},om=["disabled"],lm=["disabled"],rm={class:"feedback-icon"},im={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},cm={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},um={class:"font-bold text-sm sm:text-base"},dm={key:0,class:"text-xs sm:text-sm mt-1"},vm={key:4,class:"exercise-card"},gm={class:"mb-4"},mm={class:"inline-flex items-center px-3 py-1 rounded-full bg-slate-100 text-slate-600 font-semibold text-xs sm:text-sm"},fm={key:0,class:"text-lg sm:text-xl font-bold text-slate-900 leading-relaxed mb-4"},pm=["disabled"],hm={class:"feedback-icon"},bm={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xm={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ym={class:"font-bold"},km={key:0,class:"text-sm mt-1"},_m={key:5,class:"mt-6 flex justify-end"},wm=["disabled"],$m={key:3,class:"flex-1 flex items-center justify-center"},Cm={__name:"InteractivePanel",props:{currentExercise:Object,exerciseIndex:Number,totalExercises:Number,userId:String,lessonId:String,stepIndex:Number},emits:["submit","next-exercise"],setup(t,{emit:n}){const s=t,v=n,{userAnswer:i,answerWasCorrect:o,showCorrectAnswer:g,submitAnswer:d,resetExerciseState:m}=vo(),y=["histogram","map","block-coding","data_analysis","fraction_visual","geometry_poly","chem_mixing","chem_matching","english_sentence_fix","english_sentence_order","language_noun_bag","geometry","language_tone_transformer","language_idiom_bridge","language_word_constellation","language_rhythm_match","language_false_friends"],M=["multiple-choice","multiple_choice","abc","quiz","dialogue-completion","mcq","choice"],C=["true-false","true_false","boolean","tf"],k=B(()=>{var ue,Te,Be,Xe,Ue;if(!s.currentExercise)return"short-answer";const D=s.currentExercise,U=[D.exerciseType,(ue=D.content)==null?void 0:ue.type,(Te=D.data)==null?void 0:Te.type,D.type].filter(Boolean);if(D.type==="exercise"){if((Be=D.content)!=null&&Be.type)return D.content.type;if((Xe=D.data)!=null&&Xe.type)return D.data.type}const Z=U.find(Qe=>y.includes(Qe));return Z||(D.options&&Array.isArray(D.options)&&D.options.length>0||(Ue=D.content)!=null&&Ue.options&&Array.isArray(D.content.options)?"multiple-choice":U[0]||D.type||"short-answer")}),b=B(()=>{var Z,ue;const D=(Z=k.value)==null?void 0:Z.toLowerCase();if(y.includes(D))return!1;if(M.some(Te=>D==null?void 0:D.includes(Te)))return!0;const U=s.currentExercise;return!!(U!=null&&U.options&&Array.isArray(U.options)&&U.options.length>=2||(ue=U==null?void 0:U.content)!=null&&ue.options&&Array.isArray(U.content.options))}),_=B(()=>C.some(D=>{var U,Z;return(Z=(U=k.value)==null?void 0:U.toLowerCase())==null?void 0:Z.includes(D)})),h=B(()=>y.includes(k.value)),p=B(()=>{if(!s.currentExercise)return{};const D=s.currentExercise;return D.content&&typeof D.content=="object"?D.content:D.data&&typeof D.data=="object"&&!Array.isArray(D.data)?D.data:D}),w=B(()=>{var D,U,Z,ue;return((D=s.currentExercise)==null?void 0:D.title)||((Z=(U=s.currentExercise)==null?void 0:U.content)==null?void 0:Z.title)||((ue=p.value)==null?void 0:ue.title)||"Exercise"}),A=B(()=>{var D,U,Z,ue;return((D=s.currentExercise)==null?void 0:D.instructions)||((U=s.currentExercise)==null?void 0:U.description)||((ue=(Z=s.currentExercise)==null?void 0:Z.content)==null?void 0:ue.description)||""}),S=B(()=>{const D=k.value;return D==="quiz"?"Quiz Question":M.includes(D)?"Multiple Choice":"Question"}),E=B(()=>{var D,U,Z,ue,Te,Be;return((D=s.currentExercise)==null?void 0:D.question)||((Z=(U=s.currentExercise)==null?void 0:U.content)==null?void 0:Z.question)||((Te=(ue=s.currentExercise)==null?void 0:ue.data)==null?void 0:Te.question)||((Be=s.currentExercise)==null?void 0:Be.prompt)||"Select the correct answer"}),T=B(()=>{var U,Z;const D=s.currentExercise;return D!=null&&D.options&&Array.isArray(D.options)?D.options:(U=D==null?void 0:D.content)!=null&&U.options&&Array.isArray(D.content.options)?D.content.options:(Z=D==null?void 0:D.data)!=null&&Z.options&&Array.isArray(D.data.options)?D.data.options:[]}),q=D=>typeof D=="string"?D:typeof D=="number"?String(D):D!=null&&D.text?D.text:D!=null&&D.label?D.label:D!=null&&D.value?D.value:String(D),Y=B(()=>{var Z;const D=s.currentExercise;if(typeof(D==null?void 0:D.correctAnswer)=="number")return D.correctAnswer;if(typeof((Z=D==null?void 0:D.content)==null?void 0:Z.correctAnswer)=="number")return D.content.correctAnswer;if(typeof(D==null?void 0:D.correctAnswerIndex)=="number")return D.correctAnswerIndex;if((D==null?void 0:D.correctAnswer)!==void 0){const ue=T.value.findIndex(Te=>q(Te)===String(D.correctAnswer)||Te===D.correctAnswer);if(ue!==-1)return ue}const U=T.value.findIndex(ue=>(ue==null?void 0:ue.isCorrect)===!0);return U!==-1?U:0}),ne=B(()=>b.value||_.value?i.value!==null&&i.value!==void 0:i.value!==null&&i.value!==void 0&&i.value!==""),V=D=>{g.value||(i.value=D)},Q=D=>{const U=i.value===D,Z=D===Y.value;return g.value?Z?"option-correct":U&&!Z?"option-incorrect":"option-disabled":U?"option-selected":"option-default"},te=D=>{const U=i.value===D,Z=D===Y.value;return g.value?Z?"letter-correct":U&&!Z?"letter-incorrect":"letter-disabled":U?"letter-selected":"letter-default"},ee=()=>{d(s.currentExercise),v("submit")},ie=()=>{v("next-exercise")},de=D=>{D&&(o.value=!0,g.value=!0)},he=u({side_b:null}),F=D=>{o.value=D.isCorrect,g.value=!0,D.isCorrect&&setTimeout(()=>v("next-exercise"),1500)},I=B(()=>s.currentExercise?s.currentExercise.type==="game"||!!s.currentExercise.gameType||["basket-catch","whack-a-mole"].includes(s.currentExercise.type):!1),P=B(()=>I.value?s.currentExercise.gameType||s.currentExercise.type||"basket-catch":null),z=B(()=>I.value?{...s.currentExercise,...s.currentExercise.gameData}:null),L=D=>{o.value=D.completed||D.stars>=2,g.value=!0,setTimeout(()=>v("next-exercise"),1500)},G=()=>{m(),g.value=!1},O=B(()=>{var D,U,Z;return((D=s.currentExercise)==null?void 0:D.type)==="selection_game"||((Z=(U=s.currentExercise)==null?void 0:U.content)==null?void 0:Z.type)==="selection_game"}),se=B(()=>O.value?p.value||s.currentExercise:{questions:[]}),{score:ae,currentQuestion:be,questions:oe,selectedItemId:Le,feedback:Ee,handleSelection:Pe}=go(se);return $e(()=>s.currentExercise,()=>{m(),i.value=null},{immediate:!0}),(D,U)=>(a(),l("div",{class:N(["interactive-panel-wrapper",{"is-game-mode":I.value}])},[I.value?(a(),l("div",_0,[ye(sr,{"game-data":z.value,"game-type":P.value,"user-id":t.userId,"lesson-id":t.lessonId,"step-index":t.stepIndex,onGameComplete:L,onGameExit:G},null,8,["game-data","game-type","user-id","lesson-id","step-index"])])):O.value&&le(be)?(a(),l("div",w0,[e("div",$0,[e("div",C0,[U[9]||(U[9]=e("h1",{class:"text-xl sm:text-2xl font-bold text-slate-900 mb-2"}," Shape Recognition Lesson ",-1)),U[10]||(U[10]=e("p",{class:"text-sm sm:text-base text-purple-600"}," Click on the correct shape! ",-1)),e("div",S0,[U[8]||(U[8]=e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500 fill-yellow-500",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)),e("span",A0," Score: "+r(le(ae))+" / "+r(le(oe).length),1)])]),e("div",T0,[e("div",M0,[e("h2",I0,r(le(be).prompt),1),e("p",L0,r(le(be).hint||"Click on the shape below"),1)])]),e("div",D0,[(a(!0),l(J,null,K(le(be).items,(Z,ue)=>(a(),l("button",{key:Z.id,onClick:Te=>le(Pe)(Z),disabled:le(Ee)!==null,class:N(["relative w-full aspect-square rounded-2xl border-4 transition-all duration-200",[le(Le)===Z.id&&le(Ee)==="correct"?"border-green-500 bg-green-50":le(Le)===Z.id&&le(Ee)==="incorrect"?"border-red-500 bg-red-50":"border-purple-200 bg-white hover:border-purple-400 hover:shadow-lg",le(Ee)!==null?"cursor-not-allowed":"cursor-pointer"]])},[e("div",z0,[Z.image?(a(),l("img",{key:0,src:Z.image,alt:Z.name,class:"w-16 h-16 sm:w-24 sm:h-24 object-contain mb-2"},null,8,E0)):j("",!0),e("p",q0,r(Z.name),1)])],10,j0))),128))])])])):t.currentExercise?(a(),l("div",R0,[e("div",P0,[h.value?j("",!0):(a(),l("header",B0,[e("div",W0,r(t.exerciseIndex+1),1),e("h2",F0,r(w.value),1),A.value?(a(),l("p",N0,r(A.value),1)):j("",!0)])),b.value?(a(),l("div",V0,[e("div",O0,[e("span",U0,r(S.value),1)]),e("h3",H0,r(E.value),1),e("div",G0,[(a(!0),l(J,null,K(T.value,(Z,ue)=>(a(),l("button",{key:ue,onClick:Te=>V(ue),disabled:le(g),class:N(["option-btn",Q(ue)])},[e("div",{class:N(["option-letter",te(ue)])},r(String.fromCharCode(65+ue)),3),e("span",Y0,r(q(Z)),1),le(i)===ue?(a(),l("div",X0,U[11]||(U[11]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M5 13l4 4L19 7"})],-1)]))):j("",!0)],10,Q0))),128))]),ye(Ie,{name:"slide-fade"},{default:Ae(()=>[le(g)?(a(),l("div",{key:0,class:N(["feedback-box mt-6",le(o)?"feedback-success":"feedback-error"])},[e("div",Z0,[le(o)?(a(),l("svg",J0,U[12]||(U[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(a(),l("svg",K0,U[13]||(U[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])))]),e("div",null,[e("h4",em,r(le(o)?"Correct! ðŸŽ‰":"Not quite right"),1),le(o)?j("",!0):(a(),l("p",tm,[U[14]||(U[14]=xe(" The correct answer is: ")),e("strong",null,r(String.fromCharCode(65+Y.value)),1)]))])],2)):j("",!0)]),_:1})])):_.value?(a(),l("div",sm,[U[20]||(U[20]=e("div",{class:"mb-4 sm:mb-6"},[e("span",{class:"inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-cyan-100 to-blue-100 text-cyan-700 font-semibold text-xs sm:text-sm"}," True or False ")],-1)),e("h3",nm,r(E.value),1),e("div",am,[e("button",{onClick:U[0]||(U[0]=Z=>i.value=!0),disabled:le(g),class:N(["tf-btn",le(i)===!0?"tf-true-selected":"tf-default"])},U[15]||(U[15]=[e("span",{class:"text-3xl mb-1"},"ðŸ‘",-1),e("span",{class:"text-sm sm:text-base font-bold"},"True",-1)]),10,om),e("button",{onClick:U[1]||(U[1]=Z=>i.value=!1),disabled:le(g),class:N(["tf-btn",le(i)===!1?"tf-false-selected":"tf-default"])},U[16]||(U[16]=[e("span",{class:"text-3xl mb-1"},"ðŸ‘Ž",-1),e("span",{class:"text-sm sm:text-base font-bold"},"False",-1)]),10,lm)]),ye(Ie,{name:"slide-fade"},{default:Ae(()=>[le(g)?(a(),l("div",{key:0,class:N(["feedback-box mt-6 mx-auto max-w-sm",le(o)?"feedback-success":"feedback-error"])},[e("div",rm,[le(o)?(a(),l("svg",im,U[17]||(U[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(a(),l("svg",cm,U[18]||(U[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])))]),e("div",null,[e("h4",um,r(le(o)?"Correct! ðŸŽ‰":"Not Quite"),1),le(o)?j("",!0):(a(),l("p",dm,[U[19]||(U[19]=xe(" The statement is actually ")),e("strong",null,r(t.currentExercise.correctAnswer?"True":"False"),1)]))])],2)):j("",!0)]),_:1})])):h.value?(a(),l(J,{key:3},[k.value==="histogram"?(a(),fe(Tr,{key:0,title:p.value.title||w.value,description:p.value.description||A.value,data:p.value.data,correctValue:p.value.correctValue,min:p.value.min||0,max:p.value.max||1e5,step:p.value.step||100,onComplete:de,onNext:U[2]||(U[2]=Z=>v("next-exercise"))},null,8,["title","description","data","correctValue","min","max","step"])):k.value==="map"?(a(),fe(ti,{key:1,title:p.value.title||w.value,description:p.value.description||A.value,image:p.value.image,markers:p.value.markers,onComplete:de,onNext:U[3]||(U[3]=Z=>v("next-exercise"))},null,8,["title","description","image","markers"])):k.value==="block-coding"?(a(),fe(Ci,{key:2,type:p.value.subtype||p.value.type||"maze",title:p.value.title||w.value,description:p.value.description||A.value,availableBlocks:p.value.availableBlocks,config:p.value.config,onComplete:de,onNext:U[4]||(U[4]=Z=>v("next-exercise"))},null,8,["type","title","description","availableBlocks","config"])):k.value==="geometry"?(a(),fe(Ji,{key:3,geometryData:p.value,userAnswer:he.value,"onUpdate:userAnswer":U[5]||(U[5]=Z=>he.value=Z),onSubmit:F,onNextExercise:U[6]||(U[6]=Z=>v("next-exercise"))},null,8,["geometryData","userAnswer"])):k.value==="data_analysis"?(a(),fe(yc,{key:4,step:p.value,onComplete:de},null,8,["step"])):k.value==="fraction_visual"?(a(),fe(Dc,{key:5,step:p.value,onComplete:de},null,8,["step"])):k.value==="geometry_poly"?(a(),fe(Gc,{key:6,step:p.value,onComplete:de},null,8,["step"])):k.value==="chem_mixing"?(a(),fe(bu,{key:7,step:p.value,onComplete:de},null,8,["step"])):k.value==="chem_matching"?(a(),fe(Iu,{key:8,step:p.value,onComplete:de},null,8,["step"])):k.value==="english_sentence_fix"?(a(),fe(Vu,{key:9,step:p.value,onComplete:de},null,8,["step"])):k.value==="english_sentence_order"?(a(),fe(Zu,{key:10,step:p.value,onComplete:de},null,8,["step"])):k.value==="language_noun_bag"?(a(),fe(vd,{key:11,step:p.value,onComplete:de},null,8,["step"])):k.value==="language_tone_transformer"?(a(),fe(Od,{key:12,step:p.value,onComplete:de},null,8,["step"])):k.value==="language_idiom_bridge"?(a(),fe(yv,{key:13,step:p.value,onComplete:de},null,8,["step"])):k.value==="language_word_constellation"?(a(),fe(Uv,{key:14,step:p.value,onComplete:de},null,8,["step"])):k.value==="language_rhythm_match"?(a(),fe(fg,{key:15,step:p.value,onComplete:de},null,8,["step"])):k.value==="language_false_friends"?(a(),fe(k0,{key:16,step:p.value,onComplete:de},null,8,["step"])):j("",!0)],64)):(a(),l("div",vm,[e("div",gm,[e("span",mm,r(k.value||"Exercise"),1)]),E.value?(a(),l("h3",fm,r(E.value),1)):j("",!0),Fe(e("textarea",{"onUpdate:modelValue":U[7]||(U[7]=Z=>Rs(i)?i.value=Z:null),placeholder:"Type your answer here...",disabled:le(g),class:"w-full p-3 sm:p-4 rounded-xl border-2 border-slate-200 bg-slate-50 focus:bg-white focus:border-purple-500 focus:ring-0 transition-all outline-none resize-none h-32 text-base text-slate-800 placeholder-slate-400"},null,8,pm),[[Oe,le(i)]]),ye(Ie,{name:"slide-fade"},{default:Ae(()=>[le(g)?(a(),l("div",{key:0,class:N(["feedback-box mt-4",le(o)?"feedback-success":"feedback-error"])},[e("div",hm,[le(o)?(a(),l("svg",bm,U[21]||(U[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):(a(),l("svg",xm,U[22]||(U[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"},null,-1)])))]),e("div",null,[e("h4",ym,r(le(o)?"Great job!":"Here's the answer:"),1),le(o)?j("",!0):(a(),l("p",km,r(t.currentExercise.correctAnswer),1))])],2)):j("",!0)]),_:1})])),h.value?j("",!0):(a(),l("footer",_m,[le(g)?(a(),l("button",{key:1,onClick:ie,class:"btn-success"}," Continue â†’ ")):(a(),l("button",{key:0,onClick:ee,disabled:!ne.value,class:"btn-primary"}," Check Answer ",8,wm))]))])])):(a(),l("div",$m,U[23]||(U[23]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600 mx-auto mb-4"}),e("p",{class:"text-slate-500 text-sm"},"Loading exercise...")],-1)])))],2))}},Sm=ke(Cm,[["__scopeId","data-v-d00732f2"]]),Am={name:"CompletionScreen",props:{lesson:{type:Object,required:!0},readableTime:{type:String,required:!0},stars:{type:Number,required:!0},mistakeCount:{type:Number,required:!0},earnedPoints:{type:Number,required:!0},medalLabel:{type:String,required:!0},medalIcon:{type:String,required:!0},progressInsight:{type:String,default:""},totalSteps:{type:Number,default:1}},emits:["return-to-catalogue","share","homework"],computed:{medalBgClass(){return this.mistakeCount===0?"bg-amber-100":this.mistakeCount<=2?"bg-slate-100":"bg-orange-100"},accuracyPercentage(){if(this.totalSteps===0)return 100;const t=this.totalSteps-this.mistakeCount;return Math.max(0,Math.round(t/this.totalSteps*100))}}},Tm={class:"fixed inset-0 z-1000 bg-white flex flex-col"},Mm={class:"flex-1 flex flex-col items-center justify-center px-6 py-10 overflow-y-auto"},Im={class:"w-full max-w-md text-center flex flex-col gap-8"},Lm={class:"flex flex-col gap-4"},Dm={class:"text-2xl sm:text-3xl font-bold text-slate-900 mt-2"},jm={class:"flex justify-center gap-10 py-4"},zm={class:"text-center"},Em={class:"text-3xl font-bold text-slate-900"},qm={class:"text-center"},Rm={class:"text-3xl font-bold text-slate-900"},Pm={class:"text-center"},Bm={class:"text-3xl font-bold text-slate-900"},Wm={class:"bg-slate-50 rounded-2xl p-5"},Fm={class:"flex items-center justify-between mb-3"},Nm={class:"text-sm font-bold text-slate-900"},Vm={class:"h-2.5 bg-slate-200 rounded-full overflow-hidden"},Om={key:0,class:"text-sm text-emerald-600 mt-3 font-medium"},Um={key:1,class:"text-sm text-slate-400 mt-3"},Hm={key:0,class:"bg-slate-50 rounded-2xl p-5 text-left"},Gm={class:"text-sm text-slate-600 leading-relaxed"},Qm={class:"px-6 pb-8 pt-4 border-t border-slate-100 bg-white"},Ym={class:"max-w-md mx-auto space-y-4"},Xm={class:"flex gap-4"};function Zm(t,n,s,v,i,o){return a(),l("div",Tm,[n[9]||(n[9]=e("div",{class:"flex items-center justify-center px-4 py-4 border-b border-slate-100"},[e("span",{class:"text-xs font-medium text-slate-400 uppercase tracking-wider"},"Lesson Complete")],-1)),e("div",Mm,[e("div",Im,[e("div",Lm,[e("div",{class:N(["w-24 h-24 mx-auto rounded-full flex items-center justify-center text-5xl",o.medalBgClass])},r(s.medalIcon),3),e("h1",Dm,r(s.medalLabel),1)]),e("div",jm,[e("div",zm,[e("div",Em,r(s.readableTime),1),n[3]||(n[3]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"time",-1))]),n[6]||(n[6]=e("div",{class:"w-px bg-slate-200"},null,-1)),e("div",qm,[e("div",Rm,r(s.stars),1),n[4]||(n[4]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"stars",-1))]),n[7]||(n[7]=e("div",{class:"w-px bg-slate-200"},null,-1)),e("div",Pm,[e("div",Bm,r(s.earnedPoints),1),n[5]||(n[5]=e("div",{class:"text-xs text-slate-400 uppercase tracking-wide mt-1"},"points",-1))])]),e("div",Wm,[e("div",Fm,[n[8]||(n[8]=e("span",{class:"text-sm font-medium text-slate-600"},"Accuracy",-1)),e("span",Nm,r(o.accuracyPercentage)+"%",1)]),e("div",Vm,[e("div",{class:N(["h-full rounded-full transition-all duration-700",o.accuracyPercentage>=80?"bg-emerald-500":o.accuracyPercentage>=50?"bg-amber-500":"bg-red-400"]),style:me({width:o.accuracyPercentage+"%"})},null,6)]),s.mistakeCount===0?(a(),l("p",Om,"Perfect! No mistakes")):(a(),l("p",Um,r(s.mistakeCount)+" mistake"+r(s.mistakeCount>1?"s":""),1))]),s.progressInsight?(a(),l("div",Hm,[e("p",Gm,r(s.progressInsight),1)])):j("",!0)])]),e("div",Qm,[e("div",Ym,[e("button",{onClick:n[0]||(n[0]=g=>t.$emit("return-to-catalogue")),class:"w-full py-4 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors text-lg"}," Continue "),e("div",Xm,[e("button",{onClick:n[1]||(n[1]=g=>t.$emit("homework")),class:"flex-1 py-3.5 bg-slate-100 text-slate-700 font-medium rounded-xl hover:bg-slate-200 transition-colors"}," Homework "),e("button",{onClick:n[2]||(n[2]=g=>t.$emit("share")),class:"flex-1 py-3.5 bg-slate-100 text-slate-700 font-medium rounded-xl hover:bg-slate-200 transition-colors"}," Share ")]),e("div",null,[Ps(t.$slots,"extra-actions",{},void 0,!0)])])])])}const Jm=ke(Am,[["render",Zm],["__scopeId","data-v-fa3a10d5"]]),Ut={async analyzeLesson(t,n,s="explanation"){try{return(await Ye.post("/chat/analyze-speech",{lessonContent:t,stepContext:n,stepType:s})).data}catch(v){throw console.error("[VoiceAPI] analyzeLesson error:",v),v}},async streamAudio(t,n={}){try{return(await Ye.post("/elevenlabs/stream",{text:t,...n},{responseType:"blob",timeout:6e4})).data}catch(s){throw console.error("[VoiceAPI] streamAudio error:",s),s}},async getVoices(){try{return(await Ye.get("/elevenlabs/voices")).data}catch(t){throw console.error("[VoiceAPI] getVoices error:",t),t}},async checkAvailability(){try{return{available:!0,...(await Ye.get("/elevenlabs/health")).data}}catch(t){return console.error("[VoiceAPI] checkAvailability error:",t),{available:!1,error:t.message}}}},Km={async getLessonContextAIResponse({userInput:t,lessonContext:n}){var s;try{return(await Ye.post("/chat/lesson-context",{userInput:t,lessonContext:{content:(n==null?void 0:n.content)||((s=n==null?void 0:n.data)==null?void 0:s.content)||"",type:(n==null?void 0:n.type)||"explanation",title:(n==null?void 0:n.title)||"",stepIndex:n==null?void 0:n.stepIndex}})).data}catch(v){throw console.error("[ChatAPI] getLessonContextAIResponse error:",v),v}},async sendMessage(t,n={}){try{return(await Ye.post("/chat/message",{message:t,context:n})).data}catch(s){throw console.error("[ChatAPI] sendMessage error:",s),s}},async getExplanation(t,n){try{return(await Ye.post("/chat/explain",{content:t,question:n})).data}catch(s){throw console.error("[ChatAPI] getExplanation error:",s),s}},async getSuggestions(t){try{return(await Ye.post("/chat/suggestions",{lessonContext:t})).data}catch(n){return console.error("[ChatAPI] getSuggestions error:",n),{suggestions:[]}}}},ef={name:"FloatingAIAssistant",props:{aiUsage:{type:Object,default:()=>({messages:0,current:0,limit:50,remaining:50,percentage:0,unlimited:!1,plan:"free"})},quickSuggestions:{type:Array,default:()=>[]},aiChatHistory:{type:Array,default:()=>[]},floatingAIInput:{type:String,default:""},aiIsLoading:{type:Boolean,default:!1},currentStep:{type:Object,default:null},autoAnalyze:{type:Boolean,default:!0},voiceEnabled:{type:Boolean,default:!0}},emits:["close","send-message","ask-ai","clear-chat","analysis-complete","speaking-start","speaking-end"],data(){return{localFloatingInput:"",showAllMessages:!1,isSpeaking:!1,isListening:!1,isAnalyzing:!1,currentAudio:null,currentAudioUrl:null,speechRecognition:null,analysisError:null,currentExplanation:"",currentHighlights:[]}},computed:{recentMessages(){return!this.aiChatHistory||!Array.isArray(this.aiChatHistory)?[]:this.showAllMessages?this.aiChatHistory:this.aiChatHistory.slice(-5)},userStatus(){var t,n;return((n=(t=this.$store)==null?void 0:t.getters)==null?void 0:n["user/userStatus"])||"free"},currentMessageCount(){return!this.aiUsage||typeof this.aiUsage!="object"?0:this.aiUsage.current||this.aiUsage.messages||0},messageLimit(){return!this.aiUsage||typeof this.aiUsage!="object"?50:this.aiUsage.limit||50},isUnlimited(){var t;return((t=this.aiUsage)==null?void 0:t.unlimited)||this.messageLimit===-1},remainingMessages(){var t;return this.isUnlimited?-1:((t=this.aiUsage)==null?void 0:t.remaining)||Math.max(0,this.messageLimit-this.currentMessageCount)},usagePercentage(){var t;return this.isUnlimited||this.messageLimit<=0?0:((t=this.aiUsage)==null?void 0:t.percentage)||Math.min(100,Math.round(this.currentMessageCount/this.messageLimit*100))},isMessageLimitReached(){return this.isUnlimited?!1:this.currentMessageCount>=this.messageLimit},isNearLimit(){if(this.isUnlimited)return!1;const t=Math.floor(this.messageLimit*.9);return this.currentMessageCount>=t&&!this.isMessageLimitReached},formattedUsage(){if(!this.aiUsage)return"0/50";const t=this.currentMessageCount;if(this.isUnlimited)return`${t}/âˆž`;const n=this.messageLimit;return`${t}/${n}`}},watch:{floatingAIInput:{handler(t){this.localFloatingInput=t},immediate:!0},aiChatHistory:{handler(){this.$nextTick(()=>{this.scrollToBottom()})},deep:!0},currentStep:{async handler(t,n){if(!t||!this.autoAnalyze)return;const s=(t==null?void 0:t.id)||(t==null?void 0:t._id),v=(n==null?void 0:n.id)||(n==null?void 0:n._id);if(s&&v&&s===v)return;if(!["explanation","example","reading"].includes(t==null?void 0:t.type)){this.clearHighlights();return}await this.analyzeAndSpeak(t)},immediate:!0,deep:!1}},mounted(){this.scrollToBottom(),this.initializeSpeechRecognition()},beforeUnmount(){this.stopAudio(),this.stopListening(),this.clearHighlights()},methods:{getStepContent(t){var n,s,v,i;return t?(n=t.data)!=null&&n.content?t.data.content:(s=t.data)!=null&&s.text?t.data.text:(v=t.content)!=null&&v.text?t.content.text:(i=t.content)!=null&&i.content?t.content.content:typeof t.content=="string"?t.content:typeof t.data=="string"?t.data:t.description?t.description:t.text?t.text:"":""},async analyzeAndSpeak(t){if(!t)return;this.stopAudio(),this.clearHighlights(),this.analysisError=null;const n=this.getStepContent(t);if(!(!n||n.length<20)){this.isAnalyzing=!0;try{const s=await Ut.analyzeLesson(n,t.type||"explanation",t.type),{explanation:v,highlights:i}=(s==null?void 0:s.data)||s||{};if(!v){console.warn("[FloatingAI] No explanation received from analysis"),this.isAnalyzing=!1;return}this.currentExplanation=v,this.currentHighlights=i||[],i&&i.length>0&&ot.emit("highlight-text",i),this.$emit("analysis-complete",{explanation:v,highlights:i}),this.voiceEnabled&&v&&await this.speakText(v)}catch(s){console.error("[FloatingAI] Analysis error:",s),this.analysisError=s.message||"Failed to analyze lesson"}finally{this.isAnalyzing=!1}}},async speakText(t){if(t)try{const n=await Ut.streamAudio(t);this.currentAudioUrl&&URL.revokeObjectURL(this.currentAudioUrl),this.currentAudioUrl=URL.createObjectURL(n),this.currentAudio&&this.currentAudio.pause(),this.currentAudio=new Audio(this.currentAudioUrl),this.isSpeaking=!0,this.$emit("speaking-start"),this.currentAudio.onended=()=>{this.isSpeaking=!1,this.$emit("speaking-end"),this.currentAudioUrl&&(URL.revokeObjectURL(this.currentAudioUrl),this.currentAudioUrl=null)},this.currentAudio.onerror=s=>{console.error("[FloatingAI] Audio playback error:",s),this.isSpeaking=!1,this.$emit("speaking-end")},await this.currentAudio.play()}catch(n){console.error("[FloatingAI] speakText error:",n),this.isSpeaking=!1,this.$emit("speaking-end")}},stopAudio(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.currentTime=0,this.currentAudio=null),this.currentAudioUrl&&(URL.revokeObjectURL(this.currentAudioUrl),this.currentAudioUrl=null),this.isSpeaking=!1},clearHighlights(){ot.emit("clear-highlights"),this.currentHighlights=[]},initializeSpeechRecognition(){const t=window.SpeechRecognition||window.webkitSpeechRecognition;if(!t){console.warn("[FloatingAI] Speech recognition not supported in this browser");return}this.speechRecognition=new t,this.speechRecognition.lang="ru-RU",this.speechRecognition.interimResults=!1,this.speechRecognition.continuous=!1,this.speechRecognition.onresult=async n=>{const s=n.results[0][0].transcript;this.isListening=!1,s&&await this.handleVoiceQuestion(s)},this.speechRecognition.onerror=n=>{console.error("[FloatingAI] Speech recognition error:",n.error),this.isListening=!1},this.speechRecognition.onend=()=>{this.isListening=!1}},startListening(){if(this.stopAudio(),!this.speechRecognition){if(!(window.SpeechRecognition||window.webkitSpeechRecognition)){alert("Your browser does not support voice input");return}this.initializeSpeechRecognition()}try{this.isListening=!0,this.speechRecognition.start()}catch(t){console.error("[FloatingAI] Failed to start speech recognition:",t),this.isListening=!1}},stopListening(){if(this.speechRecognition)try{this.speechRecognition.stop()}catch{}this.isListening=!1},async handleVoiceQuestion(t){var n;if(t){this.$emit("send-message",t);try{const s=await Km.getLessonContextAIResponse({userInput:t,lessonContext:this.currentStep}),v=((n=s==null?void 0:s.data)==null?void 0:n.reply)||(s==null?void 0:s.reply);v&&await this.speakText(v)}catch(s){console.error("[FloatingAI] handleVoiceQuestion error:",s)}}},toggleMicrophone(){this.isListening?this.stopListening():this.startListening()},sendMessage(){var t;if(!((t=this.localFloatingInput)!=null&&t.trim())||this.aiIsLoading||this.isMessageLimitReached){this.isMessageLimitReached;return}this.$emit("send-message",this.localFloatingInput.trim()),this.localFloatingInput=""},clearChat(){this.$emit("clear-chat")},formatTime(t){if(!(t!=null&&t.timestamp))return"";try{return new Date(t.timestamp).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}catch{return""}},scrollToBottom(){const t=this.$refs.chatMessages;t&&(t.scrollTop=t.scrollHeight)}}},tf={class:"floating-ai-assistant"},sf={class:"ai-header"},nf={class:"ai-header-left"},af={key:0,class:"voice-status analyzing"},of={key:1,class:"voice-status speaking"},lf={key:2,class:"voice-status listening"},rf={class:"ai-header-right"},cf=["disabled","title"],uf={key:0},df={key:1},vf={class:"ai-body"},gf={key:0,class:"usage-display"},mf={key:0,class:"usage-bar"},ff={key:1,class:"quick-suggestions"},pf={class:"suggestions-list"},hf=["onClick","disabled"],bf={class:"ai-chat-area"},xf={class:"chat-messages",ref:"chatMessages"},yf={key:0,class:"empty-chat-state"},kf={class:"message-avatar"},_f={key:0},wf={key:1},$f={class:"message-bubble"},Cf={class:"message-content"},Sf={class:"message-time"},Af={key:1,class:"loading-message"},Tf={class:"chat-input"},Mf=["disabled"],If=["disabled","title"],Lf={key:0,class:"loading-spinner"},Df={key:1},jf={key:0,class:"limit-warning"},zf={key:0,class:"limit-reached"},Ef={key:1,class:"limit-near"},qf={key:2,class:"chat-controls"};function Rf(t,n,s,v,i,o){var g;return a(),l("div",tf,[e("div",sf,[e("div",nf,[n[10]||(n[10]=e("h4",null,"ðŸ¤– AI Assistant",-1)),i.isAnalyzing?(a(),l("div",af,n[7]||(n[7]=[e("span",{class:"status-icon"},"ðŸ§ ",-1),e("span",{class:"status-text"},"Analyzing...",-1)]))):i.isSpeaking?(a(),l("div",of,n[8]||(n[8]=[e("span",{class:"status-icon"},"ðŸ”Š",-1),e("span",{class:"status-text"},"Speaking...",-1)]))):i.isListening?(a(),l("div",lf,n[9]||(n[9]=[e("span",{class:"status-icon"},"ðŸ‘‚",-1),e("span",{class:"status-text"},"Listening...",-1)]))):j("",!0)]),e("div",rf,[e("button",{onClick:n[0]||(n[0]=(...d)=>o.toggleMicrophone&&o.toggleMicrophone(...d)),class:N(["mic-btn",{listening:i.isListening,speaking:i.isSpeaking}]),disabled:i.isAnalyzing,title:i.isListening?"Stop listening":i.isSpeaking?"Interrupt & Ask":"Ask Question"},[i.isListening?(a(),l("span",uf,"â¹ï¸")):(a(),l("span",df,"ðŸŽ¤"))],10,cf),e("button",{onClick:n[1]||(n[1]=d=>t.$emit("close")),class:"close-ai-btn"},"âœ•")])]),e("div",vf,[o.formattedUsage?(a(),l("div",gf,[e("p",null,"ðŸ“Š Used: "+r(o.formattedUsage),1),o.usagePercentage>0&&!o.isUnlimited?(a(),l("div",mf,[e("div",{class:"usage-fill",style:me({width:o.usagePercentage+"%"})},null,4)])):j("",!0)])):j("",!0),(s.quickSuggestions||[]).length?(a(),l("div",ff,[n[11]||(n[11]=e("p",{class:"suggestions-label"},"ðŸ’¡ Quick questions:",-1)),e("div",pf,[(a(!0),l(J,null,K(s.quickSuggestions||[],(d,m)=>(a(),l("button",{key:`quick-${m}`,onClick:y=>t.$emit("ask-ai",d),class:"quick-suggestion-btn",disabled:s.aiIsLoading||o.isMessageLimitReached},r(d),9,hf))),128))])])):j("",!0),e("div",bf,[e("div",xf,[(s.aiChatHistory||[]).length?j("",!0):(a(),l("div",yf,n[12]||(n[12]=[e("div",{class:"empty-icon"},"ðŸ’­",-1),e("p",null,"Ask a question about the current step!",-1)]))),(a(!0),l(J,null,K(o.recentMessages,d=>(a(),l("div",{key:(d==null?void 0:d.id)||`float-msg-${Math.random()}`,class:N(["chat-message",(d==null?void 0:d.type)||"unknown"])},[e("div",kf,[(d==null?void 0:d.type)==="user"?(a(),l("span",_f,"ðŸ‘¤")):(a(),l("span",wf,"ðŸ¤–"))]),e("div",$f,[e("div",Cf,r((d==null?void 0:d.content)||"No content"),1),e("div",Sf,r(o.formatTime(d)),1)])],2))),128)),s.aiIsLoading?(a(),l("div",Af,n[13]||(n[13]=[e("div",{class:"message-avatar"},[e("span",null,"ðŸ¤–")],-1),e("div",{class:"message-bubble loading"},[e("div",{class:"typing-indicator"},[e("span"),e("span"),e("span")])],-1)]))):j("",!0)],512),e("div",Tf,[Fe(e("input",{"onUpdate:modelValue":n[2]||(n[2]=d=>i.localFloatingInput=d),onKeyup:n[3]||(n[3]=Qt((...d)=>o.sendMessage&&o.sendMessage(...d),["enter"])),placeholder:"Ask about the current step...",disabled:s.aiIsLoading||o.isMessageLimitReached,class:"chat-input-field",ref:"chatInput"},null,40,Mf),[[Oe,i.localFloatingInput]]),e("button",{onClick:n[4]||(n[4]=(...d)=>o.sendMessage&&o.sendMessage(...d)),disabled:!((g=i.localFloatingInput)!=null&&g.trim())||s.aiIsLoading||o.isMessageLimitReached,class:"send-btn",title:o.isMessageLimitReached?"Message limit reached":"Send message"},[s.aiIsLoading?(a(),l("span",Lf,"â³")):(a(),l("span",Df,"ðŸ“¤"))],8,If)]),o.isNearLimit||o.isMessageLimitReached?(a(),l("div",jf,[o.isMessageLimitReached?(a(),l("div",zf,n[14]||(n[14]=[xe(" ðŸš« Message limit reached. "),e("a",{href:"/pay/start",class:"upgrade-link"},"Upgrade subscription",-1)]))):o.isNearLimit?(a(),l("div",Ef," âš ï¸ Remaining "+r(o.remainingMessages)+" messages ",1)):j("",!0)])):j("",!0)]),(s.aiChatHistory||[]).length>3?(a(),l("div",qf,[e("button",{onClick:n[5]||(n[5]=d=>i.showAllMessages=!i.showAllMessages),class:"toggle-messages-btn"},r(i.showAllMessages?"Show less":"Show all"),1),e("button",{onClick:n[6]||(n[6]=(...d)=>o.clearChat&&o.clearChat(...d)),class:"clear-chat-btn"}," ðŸ—‘ï¸ Clear ")])):j("",!0)])])}const Pf=ke(ef,[["render",Rf],["__scopeId","data-v-cd15464b"]]),Bf={class:"lesson-page"},Wf={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-50 p-4"},Ff={class:"text-slate-600 font-medium"},Nf={key:1,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-50 p-6 text-center"},Vf={class:"text-xl font-bold text-slate-800 mb-2"},Of={class:"text-slate-500 mb-6 max-w-sm"},Uf={key:0,class:"fixed inset-0 z-[1000] bg-black/40 flex items-center justify-center p-4"},Hf={class:"bg-white rounded-2xl w-full max-w-xs p-6 text-center"},Gf={class:"space-y-2"},Qf={key:0,class:"fixed inset-0 z-[1000] bg-black/40 flex items-center justify-center p-4"},Yf={class:"bg-white rounded-2xl w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col"},Xf={class:"flex-1 overflow-y-auto px-5 py-4 space-y-4"},Zf={key:0,class:"mt-1 text-xs text-red-500"},Jf={class:"px-5 py-4 border-t border-slate-100 flex gap-3"},Kf=["disabled"],ep={key:0,class:"fixed top-4 right-4 z-[2000] max-w-sm w-full"},tp={key:4,class:"lesson-container-new"},sp={class:"sticky top-0 z-40 bg-white/95 backdrop-blur-md border-b border-slate-200 px-3 sm:px-4 py-2.5 sm:py-3"},np={class:"flex items-center justify-between gap-2 sm:gap-4"},ap={class:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1"},op={class:"min-w-0 flex-1 hidden sm:block"},lp={class:"text-sm font-semibold text-slate-800 truncate"},rp={class:"text-xs text-slate-400 truncate"},ip={class:"flex items-center gap-2 shrink-0"},cp={class:"w-20 sm:w-28 h-2 bg-slate-100 rounded-full overflow-hidden"},up={class:"text-xs font-semibold text-slate-500 tabular-nums"},dp={class:"flex items-center gap-1.5 sm:gap-2 shrink-0"},vp={class:"flex items-center gap-1 px-2.5 py-1.5 bg-amber-50 rounded-lg"},gp={class:"text-xs font-bold text-amber-700"},mp={class:"flex items-center gap-1 px-2.5 py-1.5 bg-indigo-50 rounded-lg"},fp={class:"text-xs font-bold text-indigo-700"},pp={key:0,class:"interactive-container"},hp={key:0,class:"fixed bottom-4 right-4 z-[100] max-w-sm w-full"},bp={class:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden"},xp={class:"px-5 py-4"},yp={class:"flex gap-3"},kp=["disabled"],_p={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wp={key:1,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},$p={key:0},Cp={key:1},Sp={__name:"LessonPage",setup(t){const n=Fs(),s=Vs(),{t:v}=Bs(),{language:i}=Ht();function o($){if(!$)return"Untitled Lesson";const W=i.value||localStorage.getItem("lang")||"ru",Se=["lessonName","title","name"];for(const ve of Se){const re=$[ve];if(typeof re=="string"&&re.trim())return re.trim();if(typeof re=="object"&&re!==null){let ge=re[W];if((!ge||typeof ge!="string")&&(ge=re.en||re.ru||re.uz),ge&&typeof ge=="string"&&ge.trim())return ge.trim()}}if($.translations&&typeof $.translations=="object"){const ve=$.translations[W]||$.translations.en||$.translations.ru||$.translations.uz;if(ve){for(const re of Se)if(ve[re]&&typeof ve[re]=="string"&&ve[re].trim())return ve[re].trim()}}return"Untitled Lesson"}function g($){if(!$)return"";const W=i.value||localStorage.getItem("lang")||"ru",Se=["subtitle","description","summary","desc"];for(const ve of Se){const re=$[ve];if(typeof re=="string"&&re.trim())return re.trim();if(typeof re=="object"&&re!==null){let ge=re[W];if((!ge||typeof ge!="string")&&(ge=re.en||re.ru||re.uz),ge&&typeof ge=="string"&&ge.trim())return ge.trim()}}if($.translations&&typeof $.translations=="object"){const ve=$.translations[W]||$.translations.en||$.translations.ru||$.translations.uz;if(ve){for(const re of Se)if(ve[re]&&typeof ve[re]=="string"&&ve[re].trim())return ve[re].trim()}}return""}function d($,W){if(!$)return null;const Se=i.value||localStorage.getItem("lang")||"ru",ve=re=>{const ge=$[re];if(typeof ge=="string")return ge;if(typeof ge=="object"&&ge!==null)return ge[Se]||ge.en||ge.ru||ge.uz||"";if($.data&&$.data[re]){const we=$.data[re];if(typeof we=="string")return we;if(typeof we=="object"&&we!==null)return we[Se]||we.en||we.ru||we.uz||""}return""};return{...$,id:$.id||$._id||`step_${W}`,type:$.type||"explanation",title:ve("title"),content:$.content,description:ve("description"),explanation:ve("explanation"),data:$.data,images:$.images||[],exercises:$.exercises,quizzes:$.quizzes,options:$.options}}const m=u(!0),y=u(null),M=u(null),C=u([]),k=u(0),b=u(!1),_=u(!1),h=u(null),p=u(!1),w=u(!1),A=u(!1),S=u(!1),E=u(!1),T=u(""),q=u(""),Y=u(""),ne=u(!1),V=u(!1),Q=u(0),te=u(0),ee=u(0),ie=u(0),de=u("0:00"),he=u(""),F=u(""),I=u(null),P=u(0),z=u(0),L=u(""),G=u(null),O=u(!1),se=u(""),ae=u(""),be=u({}),oe=u([]),Le=u(null),Ee=u([]),Pe=u({}),D=u([]),U=u([]),Z=u(0),ue=u(3),Te=u(!1),Be=u(!1),Xe=u(""),Ue=u(!1),Qe=u(""),Je=u(""),Ke=u(!1),Re=u({isVisible:!1}),rt=u(""),Ne=u(null),mt=u({current:0,total:0}),ft=u(!1),pt=u(null),it=u(!1),et=u(50),tt=u(!1),Ze=u(!1),ct=u([]);u("");const kt=u(!1),_t=u(!0),ht=u(!1),He=u(!1),Ce=B(()=>C.value[k.value]||null),bt=B(()=>C.value.length===0?0:Math.round((k.value+1)/C.value.length*100)),ut=B(()=>{var W,Se,ve;if((W=M.value)!=null&&W.estimatedDuration)return Number(M.value.estimatedDuration)||0;if((ve=(Se=M.value)==null?void 0:Se.timing)!=null&&ve.estimatedDuration)return Number(M.value.timing.estimatedDuration)||0;const $=C.value.length;return $===0?0:Math.ceil($*1.5)}),wt=B(()=>{const $=Ce.value;return $?$.type==="exercise"||$.type==="quiz":!1}),xt=B(()=>{const $=Ce.value;return $?$.type==="game":!1}),At=B(()=>k.value===C.value.length-1),Tt=B(()=>ct.value.map(($,W)=>({id:`msg-${W}-${Date.now()}`,type:$.role==="user"?"user":"ai",content:$.content,timestamp:$.timestamp||new Date().toISOString()}))),Mt=B(()=>({width:tt.value?"100%":`${et.value}%`})),c=B(()=>({width:tt.value?"0%":`${100-et.value}%`}));async function f(){var $;m.value=!0,y.value=null;try{const W=n.params.id;if(!W)throw new Error("No lesson ID provided");const Se=await Ns(W);if(Se.success&&Se.data){const ve=Se.data,re=o(ve),ge=g(ve);M.value={...ve,title:re,subtitle:ge,estimatedDuration:(($=ve.timing)==null?void 0:$.estimatedDuration)||0};const we=ve.steps||[];C.value=we.map((vt,Nt)=>d(vt,Nt)).filter(Boolean)}else throw new Error(Se.error||"Failed to load lesson data")}catch(W){console.error("[LessonPage] loadLesson error:",W),y.value=W.message||"Failed to load lesson"}finally{m.value=!1}}function x(){f()}function H(){s.push("/courses")}function R(){b.value=!0,k.value=0}function X(){h.value&&(k.value=h.value.stepIndex||0),b.value=!0}function ce(){w.value=!0}function je(){w.value=!1}function qe(){w.value=!1,H()}function _e(){k.value<C.value.length-1?(k.value++,Me()):ze()}function Ve(){k.value>0&&(k.value--,Me())}function Me(){L.value="",G.value=null,O.value=!1,se.value="",ae.value="",be.value={},oe.value=[],Le.value=null,Z.value=0,Te.value=!1,Be.value=!1,Xe.value="",P.value=0,z.value=0}function ze(){_.value=!0,st()}function st(){const $=C.value.length,W=$>0?($-ee.value)/$:1;W>=.9?(ie.value=3,he.value="Gold"):W>=.7?(ie.value=2,he.value="Silver"):(ie.value=1,he.value="Bronze"),F.value=`You completed ${$} steps with ${ee.value} mistakes.`}function It(){return{Gold:"ðŸ¥‡",Silver:"ðŸ¥ˆ",Bronze:"ðŸ¥‰"}[he.value]||"ðŸ…"}function Xt(){console.log("Sharing result...")}function Zt(){s.push("/homework")}function Jt(){s.push("/vocabulary")}function Lt($){return!$||$.type!=="exercise"?null:($.exercises||[])[P.value]||null}function Dt($){return!$||$.type!=="quiz"?null:($.quizzes||[])[z.value]||null}function $t($){return!$||$.type!=="exercise"?0:($.exercises||[]).length}function Ct($){return!$||$.type!=="quiz"?0:($.quizzes||[]).length}function Kt($){L.value=$}function es({index:$,value:W}){be.value[$]=W}function ts(){G.value?O.value?jt():(Z.value++,Z.value>=ue.value&&(Be.value=!0)):ss()}function ss(){L.value.toLowerCase()==="correct"?(G.value="correct",O.value=!0,Q.value++,te.value+=10):(G.value="incorrect",O.value=!1,ee.value++,Q.value=0)}function jt(){const $=Ce.value;if(!$)return;const W=$t($);P.value<W-1?(P.value++,Me()):_e()}function ns(){const $=Ce.value;if(!$)return;const W=Ct($);z.value<W-1?(z.value++,Me()):_e()}function as(){se.value="Try thinking about it differently..."}function os(){ae.value=""}function ls($){Le.value?(oe.value.push({left:Le.value,right:$}),Le.value=null):Le.value=$}function rs($){oe.value.splice($,1)}function is($){}function cs($){}function us($){}function ds({item:$,zoneId:W}){Pe.value[W]=$}function vs($){delete Pe.value[$]}function gs(){Ue.value=!Ue.value}async function ms(){if(Qe.value.trim()){Ke.value=!0;try{await new Promise($=>setTimeout($,1500)),Je.value="Here is the explanation for your question..."}catch{Je.value="Sorry, I could not get an explanation at this time."}finally{Ke.value=!1}}}function fs($){Re.value={isVisible:!0,words:$.words||[],currentIndex:0},dt()}function dt(){const $=Re.value;$.words&&$.words.length>0&&(Ne.value=$.words[$.currentIndex],mt.value={current:$.currentIndex+1,total:$.words.length},ft.value=$.currentIndex===$.words.length-1)}function ps(){Ne.value&&(Ne.value.showDefinition=!0)}function hs(){Ne.value&&(Ne.value.showDefinition=!1)}function bs(){Ne.value&&(Ne.value.learned=!0),zt()}function zt(){rt.value="slide-left";const $=Re.value;$.currentIndex<$.words.length-1&&($.currentIndex++,dt())}function xs(){rt.value="slide-right";const $=Re.value;$.currentIndex>0&&($.currentIndex--,dt())}function ys($){Re.value.currentIndex=$,dt()}function ks(){Et()}function _s(){Re.value.currentIndex=0,dt()}function Et(){Re.value.isVisible=!1}function qt($){if("speechSynthesis"in window){const W=new SpeechSynthesisUtterance($);W.lang="en-US",speechSynthesis.speak(W)}}function Rt(){A.value=!0,T.value="",q.value="",Y.value="",ne.value=!1}function yt(){A.value=!1}async function ws(){if(!q.value.trim()){ne.value=!0;return}V.value=!0;try{await new Promise($=>setTimeout($,1e3)),yt(),S.value=!0,setTimeout(()=>{S.value=!1},3e3)}catch($){console.error("Failed to submit report:",$)}finally{V.value=!1}}function $s(){S.value=!1}function Pt($){if(tt.value)return;it.value=!0;const W=$.type==="touchstart"?$.touches[0].clientX:$.clientX,Se=et.value,ve=pt.value;if(!ve)return;const re=ve.offsetWidth;function ge(vt){const Ls=((vt.type==="touchmove"?vt.touches[0].clientX:vt.clientX)-W)/re*100,Ds=Math.min(Math.max(Se+Ls,30),70);et.value=Ds}function we(){it.value=!1,document.removeEventListener("mousemove",ge),document.removeEventListener("mouseup",we),document.removeEventListener("touchmove",ge),document.removeEventListener("touchend",we)}document.addEventListener("mousemove",ge),document.addEventListener("mouseup",we),document.addEventListener("touchmove",ge),document.addEventListener("touchend",we)}function Bt(){Ze.value=!Ze.value}function Wt($){$&&ct.value.push({role:"user",content:$,timestamp:new Date().toISOString()})}function Cs($){Wt($)}function Ss(){ct.value=[]}function As({explanation:$,highlights:W}){console.log("[LessonPage] Analysis complete:",{explanation:$,highlightCount:W==null?void 0:W.length})}function Ts(){ht.value=!0}function Ms(){ht.value=!1}function Ft(){E.value=!1}async function Is(){He.value=!0;try{await new Promise($=>setTimeout($,2e3)),Ft()}catch($){console.error("Migration failed:",$)}finally{He.value=!1}}return Ge(()=>{f()}),lt(()=>{}),($,W)=>{var Se,ve,re,ge;return a(),l("div",Bf,[m.value?(a(),l("div",Wf,[W[5]||(W[5]=e("div",{class:"w-12 h-12 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin mb-4"},null,-1)),e("p",Ff,r($.$t("loadingStates.lesson")),1)])):y.value?(a(),l("div",Nf,[W[8]||(W[8]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("h3",Vf,r($.$t("loadingStates.errorLoading")),1),e("p",Of,r(y.value),1),e("div",{class:"flex flex-col sm:flex-row gap-3 w-full max-w-xs"},[e("button",{onClick:x,class:"flex-1 py-3 px-6 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2"},W[6]||(W[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),xe(" Try Again ")])),e("button",{onClick:H,class:"flex-1 py-3 px-6 bg-slate-100 text-slate-700 font-semibold rounded-xl hover:bg-slate-200 transition-colors flex items-center justify-center gap-2"},W[7]||(W[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),xe(" Back ")]))])])):j("",!0),(a(),fe(nt,{to:"body"},[p.value?(a(),l("div",Uf,[e("div",Hf,[W[9]||(W[9]=e("div",{class:"w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),W[10]||(W[10]=e("h3",{class:"text-lg font-bold text-slate-900 mb-2"},"Premium Content",-1)),W[11]||(W[11]=e("p",{class:"text-slate-500 text-sm mb-6"},"Upgrade to access this lesson",-1)),e("div",Gf,[e("button",{onClick:W[0]||(W[0]=we=>$.$router.push("/pay/start")),class:"w-full py-3 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors"}," Get Premium "),e("button",{onClick:H,class:"w-full py-3 text-slate-500 font-medium hover:text-slate-700 transition-colors"}," Go Back ")])])])):j("",!0)])),(a(),fe(nt,{to:"body"},[w.value?(a(),l("div",Qf,[e("div",{class:"bg-white rounded-2xl w-full max-w-xs p-6 text-center"},[W[12]||(W[12]=e("h3",{class:"text-lg font-bold text-slate-900 mb-2"},"Leave Lesson?",-1)),W[13]||(W[13]=e("p",{class:"text-slate-500 text-sm mb-6"},"Your progress will be saved",-1)),e("div",{class:"space-y-2"},[e("button",{onClick:qe,class:"w-full py-3 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors"}," Leave "),e("button",{onClick:je,class:"w-full py-3 text-slate-500 font-medium hover:text-slate-700 transition-colors"}," Stay ")])])])):j("",!0)])),(a(),fe(nt,{to:"body"},[A.value?(a(),l("div",{key:0,class:"fixed inset-0 z-[1000] bg-black/40 flex items-center justify-center p-4",onClick:De(yt,["self"])},[e("div",Yf,[e("div",{class:"flex items-center justify-between px-5 py-4 border-b border-slate-100"},[W[15]||(W[15]=e("h3",{class:"font-semibold text-slate-900"},"Report Issue",-1)),e("button",{onClick:yt,class:"w-8 h-8 flex items-center justify-center rounded-full text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors"},W[14]||(W[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Xf,[e("div",null,[W[17]||(W[17]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Type",-1)),Fe(e("select",{"onUpdate:modelValue":W[1]||(W[1]=we=>T.value=we),class:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"},W[16]||(W[16]=[e("option",{value:""},"Select...",-1),e("option",{value:"content"},"Content Error",-1),e("option",{value:"technical"},"Technical",-1),e("option",{value:"exercise"},"Exercise",-1),e("option",{value:"other"},"Other",-1)]),512),[[Ws,T.value]])]),e("div",null,[W[18]||(W[18]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Description *",-1)),Fe(e("textarea",{"onUpdate:modelValue":W[2]||(W[2]=we=>q.value=we),rows:"3",placeholder:"Describe the issue...",class:N(["w-full px-3 py-2.5 bg-slate-50 border rounded-xl text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent resize-none",ne.value&&!q.value.trim()?"border-red-300":"border-slate-200"])},null,2),[[Oe,q.value]]),ne.value&&!q.value.trim()?(a(),l("p",Zf,"Required")):j("",!0)]),e("div",null,[W[19]||(W[19]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Contact (optional)",-1)),Fe(e("input",{type:"text","onUpdate:modelValue":W[3]||(W[3]=we=>Y.value=we),placeholder:"Email or @telegram",class:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent"},null,512),[[Oe,Y.value]])])]),e("div",Jf,[e("button",{onClick:yt,class:"flex-1 py-3 text-slate-600 font-medium rounded-xl hover:bg-slate-100 transition-colors"}," Cancel "),e("button",{onClick:ws,disabled:V.value,class:"flex-1 py-3 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-colors disabled:opacity-50"},r(V.value?"Sending...":"Send"),9,Kf)])])])):j("",!0)])),(a(),fe(nt,{to:"body"},[ye(Ie,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-full"},{default:Ae(()=>[S.value?(a(),l("div",ep,[e("div",{class:"bg-white rounded-2xl shadow-xl border border-emerald-100 p-4 flex items-start gap-4"},[W[21]||(W[21]=e("div",{class:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center shrink-0"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),W[22]||(W[22]=e("div",{class:"flex-1 min-w-0"},[e("h4",{class:"text-sm font-semibold text-slate-800"},"Report Sent!"),e("p",{class:"text-sm text-slate-500 mt-0.5"},"Thank you for helping us improve.")],-1)),e("button",{onClick:$s,class:"text-slate-400 hover:text-slate-600 transition-colors"},W[20]||(W[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):j("",!0)]),_:1})])),Re.value.isVisible?(a(),fe(Dn,{key:2,"vocabulary-data":Re.value,"card-animation":rt.value,"current-word":Ne.value,progress:mt.value,"is-last-word":ft.value,onShowDefinition:ps,onHideDefinition:hs,onMarkLearned:bs,onNextWord:zt,onPreviousWord:xs,onSkip:ks,onRestart:_s,onClose:Et,onPronounce:qt,onJumpToWord:ys},null,8,["vocabulary-data","card-animation","current-word","progress","is-last-word"])):j("",!0),!b.value&&!p.value&&!m.value&&!y.value?(a(),fe(ea,{key:3,lesson:M.value,"estimated-time":ut.value,steps:C.value,"previous-progress":h.value,onStart:R,onContinue:X,onExit:ce,onReportProblem:Rt},null,8,["lesson","estimated-time","steps","previous-progress"])):b.value&&!p.value&&!m.value&&!y.value?(a(),l("div",tp,[e("div",sp,[e("div",np,[e("div",ap,[e("button",{onClick:ce,class:"w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center rounded-lg bg-slate-100 text-slate-500 hover:bg-red-50 hover:text-red-500 transition-colors shrink-0","aria-label":"Exit lesson"},W[23]||(W[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",op,[e("h2",lp,r(((Se=M.value)==null?void 0:Se.title)||"Lesson"),1),e("p",rp,r(((ve=M.value)==null?void 0:ve.subtitle)||""),1)]),e("div",ip,[e("div",cp,[e("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full transition-all duration-500",style:me({width:bt.value+"%"})},null,4)]),e("span",up,r(k.value+1)+"/"+r(C.value.length),1)])]),e("div",dp,[e("div",vp,[W[24]||(W[24]=e("svg",{class:"w-4 h-4 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z"})],-1)),e("span",gp,r(Q.value),1)]),e("div",mp,[W[25]||(W[25]=e("svg",{class:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)),e("span",fp,r(te.value),1)])])])]),e("div",{class:N(["split-content",{"is-game-active":xt.value}]),ref_key:"splitContainer",ref:pt},[e("div",{class:"split-panel content-side",style:me(Mt.value)},[ye(uo,{"current-step":Ce.value,"current-index":k.value,"is-interactive-step":wt.value,"is-game-step":xt.value,"show-explanation-always":!0,"current-exercise":Lt(Ce.value),"current-quiz":Dt(Ce.value),"exercise-index":P.value,"quiz-index":z.value,"total-exercises":$t(Ce.value),"total-quizzes":Ct(Ce.value),"show-explanation-help":Ue.value,"explanation-question":Qe.value,"explanation-ai-response":Je.value,"is-loading-explanation":Ke.value,"is-last-step":At.value,onToggleExplanationHelp:gs,"onUpdate:explanationQuestion":W[4]||(W[4]=we=>Qe.value=we),onAskExplanation:ms,onInitVocabulary:fs,onPronounce:qt,onNext:_e,onPrevious:Ve},null,8,["current-step","current-index","is-interactive-step","is-game-step","current-exercise","current-quiz","exercise-index","quiz-index","total-exercises","total-quizzes","show-explanation-help","explanation-question","explanation-ai-response","is-loading-explanation","is-last-step"])],4),tt.value?j("",!0):(a(),l("div",{key:0,class:N(["resize-handle",{"is-resizing":it.value}]),onMousedown:Pt,onTouchstart:Pt},W[26]||(W[26]=[e("div",{class:"handle-bar"},null,-1)]),34)),e("div",{class:"split-panel interactive-side",style:me(c.value)},[wt.value||xt.value?(a(),l("div",pp,[(a(),fe(Sm,{key:((re=Ce.value)==null?void 0:re.id)||((ge=Ce.value)==null?void 0:ge._id)||k.value,"current-step":Ce.value,"current-exercise":Lt(Ce.value),"current-quiz":Dt(Ce.value),"exercise-index":P.value,"quiz-index":z.value,"total-exercises":$t(Ce.value),"total-quizzes":Ct(Ce.value),"user-answer":L.value,confirmation:G.value,"answer-was-correct":O.value,"current-hint":se.value,"smart-hint":ae.value,"mistake-count":ee.value,"fill-blank-answers":be.value,"matching-pairs":oe.value,"selected-matching-item":Le.value,"ordering-items":Ee.value,"drag-drop-placements":Pe.value,"available-drag-items":D.value,"drop-zones":U.value,"attempt-count":Z.value,"max-attempts":ue.value,"is-on-second-chance":Te.value,"show-correct-answer":Be.value,"correct-answer-text":Xe.value,onAnswerChanged:Kt,onFillBlankUpdated:es,onSubmit:ts,onNextExercise:jt,onNextQuiz:ns,onShowHint:as,onClearHint:os,onMatchingItemSelected:ls,onRemoveMatchingPair:rs,onDragItemStart:is,onDragOverZone:cs,onDragLeaveZone:us,onDropInZone:ds,onRemoveDroppedItem:vs},null,8,["current-step","current-exercise","current-quiz","exercise-index","quiz-index","total-exercises","total-quizzes","user-answer","confirmation","answer-was-correct","current-hint","smart-hint","mistake-count","fill-blank-answers","matching-pairs","selected-matching-item","ordering-items","drag-drop-placements","available-drag-items","drop-zones","attempt-count","max-attempts","is-on-second-chance","show-correct-answer","correct-answer-text"]))])):j("",!0)],4)],2)])):j("",!0),_.value?(a(),fe(Jm,{key:5,lesson:M.value,"readable-time":de.value,stars:ie.value,"mistake-count":ee.value,"earned-points":te.value,"medal-label":he.value,"medal-icon":It(),"progress-insight":F.value,"total-steps":C.value.length,"extraction-results":I.value,onReturnToCatalogue:H,onShare:Xt,onHomework:Zt,onVocabulary:Jt},{"extra-actions":Ae(()=>[e("button",{onClick:Rt,class:"w-full py-3 px-4 text-slate-500 hover:text-amber-600 font-medium rounded-xl hover:bg-amber-50 transition-colors flex items-center justify-center gap-2 text-sm"},W[27]||(W[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),xe(" Report an issue with this lesson ")]))]),_:1},8,["lesson","readable-time","stars","mistake-count","earned-points","medal-label","medal-icon","progress-insight","total-steps","extraction-results"])):j("",!0),(a(),fe(nt,{to:"body"},[ye(Ie,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-full","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-full"},{default:Ae(()=>[E.value?(a(),l("div",hp,[e("div",bp,[W[31]||(W[31]=e("div",{class:"px-5 py-4 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])]),e("h3",{class:"font-semibold text-slate-800"},"Content Update")])],-1)),e("div",xp,[W[30]||(W[30]=e("p",{class:"text-sm text-slate-600 mb-4"},"Create assignments and vocabulary from completed lessons?",-1)),e("div",yp,[e("button",{onClick:Is,disabled:He.value,class:"flex-1 py-2.5 px-4 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[He.value?(a(),l("svg",wp,W[29]||(W[29]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(a(),l("svg",_p,W[28]||(W[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"},null,-1)]))),xe(" "+r(He.value?"Processing...":"Update"),1)],8,kp),e("button",{onClick:Ft,class:"py-2.5 px-4 text-slate-600 font-medium rounded-xl hover:bg-slate-100 transition-colors"}," Close ")])])])])):j("",!0)]),_:1})])),b.value&&!_.value?(a(),l("button",{key:6,onClick:Bt,class:N(["fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-2xl transition-all duration-200 hover:scale-110 hover:shadow-xl z-50",Ze.value?"bg-cyan-500 shadow-cyan-500/40":"bg-indigo-600 shadow-indigo-500/40"]),"aria-label":"AI Assistant"},[Ze.value?(a(),l("span",$p,"âœ•")):(a(),l("span",Cp,"ðŸ¤–"))],2)):j("",!0),(a(),fe(nt,{to:"body"},[ye(Ie,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-4 scale-95"},{default:Ae(()=>[Ze.value?(a(),fe(Pf,{key:0,"current-step":Ce.value,"ai-chat-history":Tt.value,"ai-is-loading":kt.value,"auto-analyze":!0,"voice-enabled":_t.value,onClose:Bt,onSendMessage:Wt,onAskAi:Cs,onClearChat:Ss,onAnalysisComplete:As,onSpeakingStart:Ts,onSpeakingEnd:Ms},null,8,["current-step","ai-chat-history","ai-is-loading","voice-enabled"])):j("",!0)]),_:1})]))])}}},Mp=ke(Sp,[["__scopeId","data-v-962f9e28"]]);export{Mp as default};
